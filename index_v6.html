<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function eC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jw={exports:{}},Vg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k6;function TZ(){if(k6)return Vg;k6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Vg.Fragment=t,Vg.jsx=n,Vg.jsxs=n,Vg}var O6;function DZ(){return O6||(O6=1,jw.exports=TZ()),jw.exports}var ee=DZ(),Pw={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N6;function kZ(){if(N6)return Le;N6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function S(L,V,ae){this.props=L,this.context=V,this.refs=b,this.updater=ae||y}S.prototype.isReactComponent={},S.prototype.setState=function(L,V){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,V,"setState")},S.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=S.prototype;function _(L,V,ae){this.props=L,this.context=V,this.refs=b,this.updater=ae||y}var A=_.prototype=new w;A.constructor=_,v(A,S.prototype),A.isPureReactComponent=!0;var $=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function T(L,V,ae,se,de,be){return ae=be.ref,{$$typeof:e,type:L,key:V,ref:ae!==void 0?ae:null,props:be}}function O(L,V){return T(L.type,V,void 0,void 0,void 0,L.props)}function z(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function P(L){var V={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ae){return V[ae]})}var B=/\/+/g;function Y(L,V){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):V.toString(36)}function R(){}function U(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(R,R):(L.status="pending",L.then(function(V){L.status==="pending"&&(L.status="fulfilled",L.value=V)},function(V){L.status==="pending"&&(L.status="rejected",L.reason=V)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,V,ae,se,de){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var Se=!1;if(L===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(L.$$typeof){case e:case t:Se=!0;break;case d:return Se=L._init,F(Se(L._payload),V,ae,se,de)}}if(Se)return de=de(L),Se=se===""?"."+Y(L,0):se,$(de)?(ae="",Se!=null&&(ae=Se.replace(B,"$&/")+"/"),F(de,V,ae,"",function(ge){return ge})):de!=null&&(z(de)&&(de=O(de,ae+(de.key==null||L&&L.key===de.key?"":(""+de.key).replace(B,"$&/")+"/")+Se)),V.push(de)),1;Se=0;var It=se===""?".":se+":";if($(L))for(var Qe=0;Qe<L.length;Qe++)se=L[Qe],be=It+Y(se,Qe),Se+=F(se,V,ae,be,de);else if(Qe=p(L),typeof Qe=="function")for(L=Qe.call(L),Qe=0;!(se=L.next()).done;)se=se.value,be=It+Y(se,Qe++),Se+=F(se,V,ae,be,de);else if(be==="object"){if(typeof L.then=="function")return F(U(L),V,ae,se,de);throw V=String(L),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Se}function N(L,V,ae){if(L==null)return L;var se=[],de=0;return F(L,se,"","",function(be){return V.call(ae,be,de++)}),se}function I(L){if(L._status===-1){var V=L._result;V=V(),V.then(function(ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=ae)},function(ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=ae)}),L._status===-1&&(L._status=0,L._result=V)}if(L._status===1)return L._result.default;throw L._result}var H=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function K(){}return Le.Children={map:N,forEach:function(L,V,ae){N(L,function(){V.apply(this,arguments)},ae)},count:function(L){var V=0;return N(L,function(){V++}),V},toArray:function(L){return N(L,function(V){return V})||[]},only:function(L){if(!z(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=S,Le.Fragment=n,Le.Profiler=r,Le.PureComponent=_,Le.StrictMode=i,Le.Suspense=l,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Le.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},Le.cache=function(L){return function(){return L.apply(null,arguments)}},Le.cloneElement=function(L,V,ae){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var se=v({},L.props),de=L.key,be=void 0;if(V!=null)for(Se in V.ref!==void 0&&(be=void 0),V.key!==void 0&&(de=""+V.key),V)!D.call(V,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&V.ref===void 0||(se[Se]=V[Se]);var Se=arguments.length-2;if(Se===1)se.children=ae;else if(1<Se){for(var It=Array(Se),Qe=0;Qe<Se;Qe++)It[Qe]=arguments[Qe+2];se.children=It}return T(L.type,de,void 0,void 0,be,se)},Le.createContext=function(L){return L={$$typeof:s,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Le.createElement=function(L,V,ae){var se,de={},be=null;if(V!=null)for(se in V.key!==void 0&&(be=""+V.key),V)D.call(V,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(de[se]=V[se]);var Se=arguments.length-2;if(Se===1)de.children=ae;else if(1<Se){for(var It=Array(Se),Qe=0;Qe<Se;Qe++)It[Qe]=arguments[Qe+2];de.children=It}if(L&&L.defaultProps)for(se in Se=L.defaultProps,Se)de[se]===void 0&&(de[se]=Se[se]);return T(L,be,void 0,void 0,null,de)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:o,render:L}},Le.isValidElement=z,Le.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:I}},Le.memo=function(L,V){return{$$typeof:c,type:L,compare:V===void 0?null:V}},Le.startTransition=function(L){var V=M.T,ae={};M.T=ae;try{var se=L(),de=M.S;de!==null&&de(ae,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(K,H)}catch(be){H(be)}finally{M.T=V}},Le.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Le.use=function(L){return M.H.use(L)},Le.useActionState=function(L,V,ae){return M.H.useActionState(L,V,ae)},Le.useCallback=function(L,V){return M.H.useCallback(L,V)},Le.useContext=function(L){return M.H.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L,V){return M.H.useDeferredValue(L,V)},Le.useEffect=function(L,V,ae){var se=M.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(L,V)},Le.useId=function(){return M.H.useId()},Le.useImperativeHandle=function(L,V,ae){return M.H.useImperativeHandle(L,V,ae)},Le.useInsertionEffect=function(L,V){return M.H.useInsertionEffect(L,V)},Le.useLayoutEffect=function(L,V){return M.H.useLayoutEffect(L,V)},Le.useMemo=function(L,V){return M.H.useMemo(L,V)},Le.useOptimistic=function(L,V){return M.H.useOptimistic(L,V)},Le.useReducer=function(L,V,ae){return M.H.useReducer(L,V,ae)},Le.useRef=function(L){return M.H.useRef(L)},Le.useState=function(L){return M.H.useState(L)},Le.useSyncExternalStore=function(L,V,ae){return M.H.useSyncExternalStore(L,V,ae)},Le.useTransition=function(){return M.H.useTransition()},Le.version="19.1.0",Le}var R6;function tC(){return R6||(R6=1,Pw.exports=kZ()),Pw.exports}var Zn=tC();const OZ=eC(Zn);var Iw={exports:{}},Wg={},qw={exports:{}},Hw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z6;function NZ(){return z6||(z6=1,function(e){function t(N,I){var H=N.length;N.push(I);e:for(;0<H;){var K=H-1>>>1,L=N[K];if(0<r(L,I))N[K]=I,N[H]=L,H=K;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var I=N[0],H=N.pop();if(H!==I){N[0]=H;e:for(var K=0,L=N.length,V=L>>>1;K<V;){var ae=2*(K+1)-1,se=N[ae],de=ae+1,be=N[de];if(0>r(se,H))de<L&&0>r(be,se)?(N[K]=be,N[de]=H,K=de):(N[K]=se,N[ae]=H,K=ae);else if(de<L&&0>r(be,H))N[K]=be,N[de]=H,K=de;else break e}}return I}function r(N,I){var H=N.sortIndex-I.sortIndex;return H!==0?H:N.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(N){for(var I=n(c);I!==null;){if(I.callback===null)i(c);else if(I.startTime<=N)i(c),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(c)}}function M(N){if(b=!1,$(N),!v)if(n(l)!==null)v=!0,D||(D=!0,Y());else{var I=n(c);I!==null&&F(M,I.startTime-N)}}var D=!1,T=-1,O=5,z=-1;function P(){return S?!0:!(e.unstable_now()-z<O)}function B(){if(S=!1,D){var N=e.unstable_now();z=N;var I=!0;try{e:{v=!1,b&&(b=!1,_(T),T=-1),y=!0;var H=p;try{t:{for($(N),h=n(l);h!==null&&!(h.expirationTime>N&&P());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var L=K(h.expirationTime<=N);if(N=e.unstable_now(),typeof L=="function"){h.callback=L,$(N),I=!0;break t}h===n(l)&&i(l),$(N)}else i(l);h=n(l)}if(h!==null)I=!0;else{var V=n(c);V!==null&&F(M,V.startTime-N),I=!1}}break e}finally{h=null,p=H,y=!1}I=void 0}}finally{I?Y():D=!1}}}var Y;if(typeof A=="function")Y=function(){A(B)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,U=R.port2;R.port1.onmessage=B,Y=function(){U.postMessage(null)}}else Y=function(){w(B,0)};function F(N,I){T=w(function(){N(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var H=p;p=I;try{return N()}finally{p=H}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=p;p=N;try{return I()}finally{p=H}},e.unstable_scheduleCallback=function(N,I,H){var K=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,N){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,N={id:d++,callback:I,priorityLevel:N,startTime:H,expirationTime:L,sortIndex:-1},H>K?(N.sortIndex=H,t(c,N),n(l)===null&&N===n(c)&&(b?(_(T),T=-1):b=!0,F(M,H-K))):(N.sortIndex=L,t(l,N),v||y||(v=!0,D||(D=!0,Y()))),N},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(N){var I=p;return function(){var H=p;p=I;try{return N.apply(this,arguments)}finally{p=H}}}}(Hw)),Hw}var F6;function RZ(){return F6||(F6=1,qw.exports=NZ()),qw.exports}var Gw={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L6;function zZ(){if(L6)return Yn;L6=1;var e=tC();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return a(l,c,null,d)},Yn.flushSync=function(l){var c=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=c,i.p=d,i.d.f()}},Yn.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(l,c))},Yn.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Yn.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?i.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Yn.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(l)},Yn.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);i.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Yn.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);i.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(l)},Yn.requestFormReset=function(l){i.d.r(l)},Yn.unstable_batchedUpdates=function(l,c){return l(c)},Yn.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},Yn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Yn.version="19.1.0",Yn}var U6;function FZ(){if(U6)return Gw.exports;U6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gw.exports=zZ(),Gw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B6;function LZ(){if(B6)return Wg;B6=1;var e=RZ(),t=tC(),n=FZ();function i(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,g=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(g=f.return),u=f.return;while(u)}return f.tag===3?g:null}function s(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(i(188));return f!==u?null:u}for(var g=u,m=f;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),u;if(E===m)return o(x),f;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var C=!1,k=x.child;k;){if(k===g){C=!0,g=x,m=E;break}if(k===m){C=!0,m=x,g=E;break}k=k.sibling}if(!C){for(k=E.child;k;){if(k===g){C=!0,g=E,m=x;break}if(k===m){C=!0,m=E,g=x;break}k=k.sibling}if(!C)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function Y(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var R=Symbol.for("react.client.reference");function U(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===R?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case A:return(u.displayName||"Context")+".Provider";case _:return(u._context.displayName||"Context")+".Consumer";case $:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return f=u.displayName||null,f!==null?f:U(u.type)||"Memo";case O:f=u._payload,u=u._init;try{return U(u(f))}catch{}}return null}var F=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},K=[],L=-1;function V(u){return{current:u}}function ae(u){0>L||(u.current=K[L],K[L]=null,L--)}function se(u,f){L++,K[L]=u.current,u.current=f}var de=V(null),be=V(null),Se=V(null),It=V(null);function Qe(u,f){switch(se(Se,f),se(be,u),se(de,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?a6(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=a6(f),u=s6(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ae(de),se(de,u)}function ge(){ae(de),ae(be),ae(Se)}function ke(u){u.memoizedState!==null&&se(It,u);var f=de.current,g=s6(f,u.type);f!==g&&(se(be,u),se(de,g))}function ze(u){be.current===u&&(ae(de),ae(be)),It.current===u&&(ae(It),qg._currentValue=H)}var le=Object.prototype.hasOwnProperty,qt=e.unstable_scheduleCallback,Ze=e.unstable_cancelCallback,Zt=e.unstable_shouldYield,gn=e.unstable_requestPaint,Kt=e.unstable_now,Im=e.unstable_getCurrentPriorityLevel,BO=e.unstable_ImmediatePriority,jO=e.unstable_UserBlockingPriority,qm=e.unstable_NormalPriority,cW=e.unstable_LowPriority,PO=e.unstable_IdlePriority,fW=e.log,dW=e.unstable_setDisableYieldValue,Zh=null,qi=null;function Do(u){if(typeof fW=="function"&&dW(u),qi&&typeof qi.setStrictMode=="function")try{qi.setStrictMode(Zh,u)}catch{}}var Hi=Math.clz32?Math.clz32:pW,hW=Math.log,gW=Math.LN2;function pW(u){return u>>>=0,u===0?32:31-(hW(u)/gW|0)|0}var Hm=256,Gm=4194304;function rl(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Ym(u,f,g){var m=u.pendingLanes;if(m===0)return 0;var x=0,E=u.suspendedLanes,C=u.pingedLanes;u=u.warmLanes;var k=m&134217727;return k!==0?(m=k&~E,m!==0?x=rl(m):(C&=k,C!==0?x=rl(C):g||(g=k&~u,g!==0&&(x=rl(g))))):(k=m&~E,k!==0?x=rl(k):C!==0?x=rl(C):g||(g=m&~u,g!==0&&(x=rl(g)))),x===0?0:f!==0&&f!==x&&(f&E)===0&&(E=x&-x,g=f&-f,E>=g||E===32&&(g&4194048)!==0)?f:x}function Kh(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function mW(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IO(){var u=Hm;return Hm<<=1,(Hm&4194048)===0&&(Hm=256),u}function qO(){var u=Gm;return Gm<<=1,(Gm&62914560)===0&&(Gm=4194304),u}function TS(u){for(var f=[],g=0;31>g;g++)f.push(u);return f}function Jh(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function yW(u,f,g,m,x,E){var C=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var k=u.entanglements,j=u.expirationTimes,W=u.hiddenUpdates;for(g=C&~g;0<g;){var ne=31-Hi(g),re=1<<ne;k[ne]=0,j[ne]=-1;var Q=W[ne];if(Q!==null)for(W[ne]=null,ne=0;ne<Q.length;ne++){var Z=Q[ne];Z!==null&&(Z.lane&=-536870913)}g&=~re}m!==0&&HO(u,m,0),E!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=E&~(C&~f))}function HO(u,f,g){u.pendingLanes|=f,u.suspendedLanes&=~f;var m=31-Hi(f);u.entangledLanes|=f,u.entanglements[m]=u.entanglements[m]|1073741824|g&4194090}function GO(u,f){var g=u.entangledLanes|=f;for(u=u.entanglements;g;){var m=31-Hi(g),x=1<<m;x&f|u[m]&f&&(u[m]|=f),g&=~x}}function DS(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function kS(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function YO(){var u=I.p;return u!==0?u:(u=window.event,u===void 0?32:A6(u.type))}function vW(u,f){var g=I.p;try{return I.p=u,f()}finally{I.p=g}}var ko=Math.random().toString(36).slice(2),Hn="__reactFiber$"+ko,_i="__reactProps$"+ko,Jc="__reactContainer$"+ko,OS="__reactEvents$"+ko,bW="__reactListeners$"+ko,xW="__reactHandles$"+ko,XO="__reactResources$"+ko,eg="__reactMarker$"+ko;function NS(u){delete u[Hn],delete u[_i],delete u[OS],delete u[bW],delete u[xW]}function ef(u){var f=u[Hn];if(f)return f;for(var g=u.parentNode;g;){if(f=g[Jc]||g[Hn]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(u=c6(u);u!==null;){if(g=u[Hn])return g;u=c6(u)}return f}u=g,g=u.parentNode}return null}function tf(u){if(u=u[Hn]||u[Jc]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function tg(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(i(33))}function nf(u){var f=u[XO];return f||(f=u[XO]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function pn(u){u[eg]=!0}var VO=new Set,WO={};function al(u,f){rf(u,f),rf(u+"Capture",f)}function rf(u,f){for(WO[u]=f,u=0;u<f.length;u++)VO.add(f[u])}var SW=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),QO={},ZO={};function EW(u){return le.call(ZO,u)?!0:le.call(QO,u)?!1:SW.test(u)?ZO[u]=!0:(QO[u]=!0,!1)}function Xm(u,f,g){if(EW(f))if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var m=f.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+g)}}function Vm(u,f,g){if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+g)}}function bs(u,f,g,m){if(m===null)u.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(f,g,""+m)}}var RS,KO;function af(u){if(RS===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);RS=f&&f[1]||"",KO=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+RS+u+KO}var zS=!1;function FS(u,f){if(!u||zS)return"";zS=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(f){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Q=Z}Reflect.construct(u,[],re)}else{try{re.call()}catch(Z){Q=Z}u.call(re.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(re=u())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],k=E[1];if(C&&k){var j=C.split(`
`),W=k.split(`
`);for(x=m=0;m<j.length&&!j[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===j.length||x===W.length)for(m=j.length-1,x=W.length-1;1<=m&&0<=x&&j[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(j[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||j[m]!==W[x]){var ne=`
`+j[m].replace(" at new "," at ");return u.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",u.displayName)),ne}while(1<=m&&0<=x);break}}}finally{zS=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?af(g):""}function wW(u){switch(u.tag){case 26:case 27:case 5:return af(u.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 15:return FS(u.type,!1);case 11:return FS(u.type.render,!1);case 1:return FS(u.type,!0);case 31:return af("Activity");default:return""}}function JO(u){try{var f="";do f+=wW(u),u=u.return;while(u);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function gr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function eN(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function _W(u){var f=eN(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),m=""+u[f];if(!u.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return x.call(this)},set:function(C){m=""+C,E.call(this,C)}}),Object.defineProperty(u,f,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Wm(u){u._valueTracker||(u._valueTracker=_W(u))}function tN(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var g=f.getValue(),m="";return u&&(m=eN(u)?u.checked?"true":"false":u.value),u=m,u!==g?(f.setValue(u),!0):!1}function Qm(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var AW=/[\n"\\]/g;function pr(u){return u.replace(AW,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function LS(u,f,g,m,x,E,C,k){u.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?u.type=C:u.removeAttribute("type"),f!=null?C==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+gr(f)):u.value!==""+gr(f)&&(u.value=""+gr(f)):C!=="submit"&&C!=="reset"||u.removeAttribute("value"),f!=null?US(u,C,gr(f)):g!=null?US(u,C,gr(g)):m!=null&&u.removeAttribute("value"),x==null&&E!=null&&(u.defaultChecked=!!E),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?u.name=""+gr(k):u.removeAttribute("name")}function nN(u,f,g,m,x,E,C,k){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),f!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||f!=null))return;g=g!=null?""+gr(g):"",f=f!=null?""+gr(f):g,k||f===u.value||(u.value=f),u.defaultValue=f}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=k?u.checked:!!m,u.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(u.name=C)}function US(u,f,g){f==="number"&&Qm(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function sf(u,f,g,m){if(u=u.options,f){f={};for(var x=0;x<g.length;x++)f["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=f.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&m&&(u[g].defaultSelected=!0)}else{for(g=""+gr(g),f=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}f!==null||u[x].disabled||(f=u[x])}f!==null&&(f.selected=!0)}}function iN(u,f,g){if(f!=null&&(f=""+gr(f),f!==u.value&&(u.value=f),g==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=g!=null?""+gr(g):""}function rN(u,f,g,m){if(f==null){if(m!=null){if(g!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),f=g}g=gr(f),u.defaultValue=g,m=u.textContent,m===g&&m!==""&&m!==null&&(u.value=m)}function of(u,f){if(f){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=f;return}}u.textContent=f}var $W=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function aN(u,f,g){var m=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":m?u.setProperty(f,g):typeof g!="number"||g===0||$W.has(f)?f==="float"?u.cssFloat=g:u[f]=(""+g).trim():u[f]=g+"px"}function sN(u,f,g){if(f!=null&&typeof f!="object")throw Error(i(62));if(u=u.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||f!=null&&f.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in f)m=f[x],f.hasOwnProperty(x)&&g[x]!==m&&aN(u,x,m)}else for(var E in f)f.hasOwnProperty(E)&&aN(u,E,f[E])}function BS(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MW=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CW=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zm(u){return CW.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var jS=null;function PS(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var uf=null,lf=null;function oN(u){var f=tf(u);if(f&&(u=f.stateNode)){var g=u[_i]||null;e:switch(u=f.stateNode,f.type){case"input":if(LS(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+pr(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var m=g[f];if(m!==u&&m.form===u.form){var x=m[_i]||null;if(!x)throw Error(i(90));LS(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(f=0;f<g.length;f++)m=g[f],m.form===u.form&&tN(m)}break e;case"textarea":iN(u,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&sf(u,!!g.multiple,f,!1)}}}var IS=!1;function uN(u,f,g){if(IS)return u(f,g);IS=!0;try{var m=u(f);return m}finally{if(IS=!1,(uf!==null||lf!==null)&&(F1(),uf&&(f=uf,u=lf,lf=uf=null,oN(f),u)))for(f=0;f<u.length;f++)oN(u[f])}}function ng(u,f){var g=u.stateNode;if(g===null)return null;var m=g[_i]||null;if(m===null)return null;g=m[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,f,typeof g));return g}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qS=!1;if(xs)try{var ig={};Object.defineProperty(ig,"passive",{get:function(){qS=!0}}),window.addEventListener("test",ig,ig),window.removeEventListener("test",ig,ig)}catch{qS=!1}var Oo=null,HS=null,Km=null;function lN(){if(Km)return Km;var u,f=HS,g=f.length,m,x="value"in Oo?Oo.value:Oo.textContent,E=x.length;for(u=0;u<g&&f[u]===x[u];u++);var C=g-u;for(m=1;m<=C&&f[g-m]===x[E-m];m++);return Km=x.slice(u,1<m?1-m:void 0)}function Jm(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function e1(){return!0}function cN(){return!1}function Ai(u){function f(g,m,x,E,C){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var k in u)u.hasOwnProperty(k)&&(g=u[k],this[k]=g?g(E):E[k]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?e1:cN,this.isPropagationStopped=cN,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=e1)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=e1)},persist:function(){},isPersistent:e1}),f}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t1=Ai(sl),rg=d({},sl,{view:0,detail:0}),TW=Ai(rg),GS,YS,ag,n1=d({},rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VS,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ag&&(ag&&u.type==="mousemove"?(GS=u.screenX-ag.screenX,YS=u.screenY-ag.screenY):YS=GS=0,ag=u),GS)},movementY:function(u){return"movementY"in u?u.movementY:YS}}),fN=Ai(n1),DW=d({},n1,{dataTransfer:0}),kW=Ai(DW),OW=d({},rg,{relatedTarget:0}),XS=Ai(OW),NW=d({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),RW=Ai(NW),zW=d({},sl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),FW=Ai(zW),LW=d({},sl,{data:0}),dN=Ai(LW),UW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PW(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=jW[u])?!!f[u]:!1}function VS(){return PW}var IW=d({},rg,{key:function(u){if(u.key){var f=UW[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Jm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?BW[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VS,charCode:function(u){return u.type==="keypress"?Jm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Jm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),qW=Ai(IW),HW=d({},n1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hN=Ai(HW),GW=d({},rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VS}),YW=Ai(GW),XW=d({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),VW=Ai(XW),WW=d({},n1,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),QW=Ai(WW),ZW=d({},sl,{newState:0,oldState:0}),KW=Ai(ZW),JW=[9,13,27,32],WS=xs&&"CompositionEvent"in window,sg=null;xs&&"documentMode"in document&&(sg=document.documentMode);var eQ=xs&&"TextEvent"in window&&!sg,gN=xs&&(!WS||sg&&8<sg&&11>=sg),pN=" ",mN=!1;function yN(u,f){switch(u){case"keyup":return JW.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vN(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var cf=!1;function tQ(u,f){switch(u){case"compositionend":return vN(f);case"keypress":return f.which!==32?null:(mN=!0,pN);case"textInput":return u=f.data,u===pN&&mN?null:u;default:return null}}function nQ(u,f){if(cf)return u==="compositionend"||!WS&&yN(u,f)?(u=lN(),Km=HS=Oo=null,cf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return gN&&f.locale!=="ko"?null:f.data;default:return null}}var iQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bN(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!iQ[u.type]:f==="textarea"}function xN(u,f,g,m){uf?lf?lf.push(m):lf=[m]:uf=m,f=I1(f,"onChange"),0<f.length&&(g=new t1("onChange","change",null,g,m),u.push({event:g,listeners:f}))}var og=null,ug=null;function rQ(u){e6(u,0)}function i1(u){var f=tg(u);if(tN(f))return u}function SN(u,f){if(u==="change")return f}var EN=!1;if(xs){var QS;if(xs){var ZS="oninput"in document;if(!ZS){var wN=document.createElement("div");wN.setAttribute("oninput","return;"),ZS=typeof wN.oninput=="function"}QS=ZS}else QS=!1;EN=QS&&(!document.documentMode||9<document.documentMode)}function _N(){og&&(og.detachEvent("onpropertychange",AN),ug=og=null)}function AN(u){if(u.propertyName==="value"&&i1(ug)){var f=[];xN(f,ug,u,PS(u)),uN(rQ,f)}}function aQ(u,f,g){u==="focusin"?(_N(),og=f,ug=g,og.attachEvent("onpropertychange",AN)):u==="focusout"&&_N()}function sQ(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return i1(ug)}function oQ(u,f){if(u==="click")return i1(f)}function uQ(u,f){if(u==="input"||u==="change")return i1(f)}function lQ(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Gi=typeof Object.is=="function"?Object.is:lQ;function lg(u,f){if(Gi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var g=Object.keys(u),m=Object.keys(f);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!le.call(f,x)||!Gi(u[x],f[x]))return!1}return!0}function $N(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function MN(u,f){var g=$N(u);u=0;for(var m;g;){if(g.nodeType===3){if(m=u+g.textContent.length,u<=f&&m>=f)return{node:g,offset:f-u};u=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=$N(g)}}function CN(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?CN(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function TN(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Qm(u.document);f instanceof u.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)u=f.contentWindow;else break;f=Qm(u.document)}return f}function KS(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var cQ=xs&&"documentMode"in document&&11>=document.documentMode,ff=null,JS=null,cg=null,eE=!1;function DN(u,f,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;eE||ff==null||ff!==Qm(m)||(m=ff,"selectionStart"in m&&KS(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),cg&&lg(cg,m)||(cg=m,m=I1(JS,"onSelect"),0<m.length&&(f=new t1("onSelect","select",null,f,g),u.push({event:f,listeners:m}),f.target=ff)))}function ol(u,f){var g={};return g[u.toLowerCase()]=f.toLowerCase(),g["Webkit"+u]="webkit"+f,g["Moz"+u]="moz"+f,g}var df={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionrun:ol("Transition","TransitionRun"),transitionstart:ol("Transition","TransitionStart"),transitioncancel:ol("Transition","TransitionCancel"),transitionend:ol("Transition","TransitionEnd")},tE={},kN={};xs&&(kN=document.createElement("div").style,"AnimationEvent"in window||(delete df.animationend.animation,delete df.animationiteration.animation,delete df.animationstart.animation),"TransitionEvent"in window||delete df.transitionend.transition);function ul(u){if(tE[u])return tE[u];if(!df[u])return u;var f=df[u],g;for(g in f)if(f.hasOwnProperty(g)&&g in kN)return tE[u]=f[g];return u}var ON=ul("animationend"),NN=ul("animationiteration"),RN=ul("animationstart"),fQ=ul("transitionrun"),dQ=ul("transitionstart"),hQ=ul("transitioncancel"),zN=ul("transitionend"),FN=new Map,nE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nE.push("scrollEnd");function Pr(u,f){FN.set(u,f),al(f,[u])}var LN=new WeakMap;function mr(u,f){if(typeof u=="object"&&u!==null){var g=LN.get(u);return g!==void 0?g:(f={value:u,source:f,stack:JO(f)},LN.set(u,f),f)}return{value:u,source:f,stack:JO(f)}}var yr=[],hf=0,iE=0;function r1(){for(var u=hf,f=iE=hf=0;f<u;){var g=yr[f];yr[f++]=null;var m=yr[f];yr[f++]=null;var x=yr[f];yr[f++]=null;var E=yr[f];if(yr[f++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&UN(g,x,E)}}function a1(u,f,g,m){yr[hf++]=u,yr[hf++]=f,yr[hf++]=g,yr[hf++]=m,iE|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function rE(u,f,g,m){return a1(u,f,g,m),s1(u)}function gf(u,f){return a1(u,null,null,f),s1(u)}function UN(u,f,g){u.lanes|=g;var m=u.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=u.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(x=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,x&&f!==null&&(x=31-Hi(g),u=E.hiddenUpdates,m=u[x],m===null?u[x]=[f]:m.push(f),f.lane=g|536870912),E):null}function s1(u){if(50<zg)throw zg=0,cw=null,Error(i(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var pf={};function gQ(u,f,g,m){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(u,f,g,m){return new gQ(u,f,g,m)}function aE(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ss(u,f){var g=u.alternate;return g===null?(g=Yi(u.tag,f,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=f,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,f=u.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function BN(u,f){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,f=g.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function o1(u,f,g,m,x,E){var C=0;if(m=u,typeof u=="function")aE(u)&&(C=1);else if(typeof u=="string")C=mZ(u,g,de.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=Yi(31,g,f,x),u.elementType=z,u.lanes=E,u;case v:return ll(g.children,x,E,f);case b:C=8,x|=24;break;case S:return u=Yi(12,g,f,x|2),u.elementType=S,u.lanes=E,u;case M:return u=Yi(13,g,f,x),u.elementType=M,u.lanes=E,u;case D:return u=Yi(19,g,f,x),u.elementType=D,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case A:C=10;break e;case _:C=9;break e;case $:C=11;break e;case T:C=14;break e;case O:C=16,m=null;break e}C=29,g=Error(i(130,u===null?"null":typeof u,"")),m=null}return f=Yi(C,g,f,x),f.elementType=u,f.type=m,f.lanes=E,f}function ll(u,f,g,m){return u=Yi(7,u,m,f),u.lanes=g,u}function sE(u,f,g){return u=Yi(6,u,null,f),u.lanes=g,u}function oE(u,f,g){return f=Yi(4,u.children!==null?u.children:[],u.key,f),f.lanes=g,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var mf=[],yf=0,u1=null,l1=0,vr=[],br=0,cl=null,Es=1,ws="";function fl(u,f){mf[yf++]=l1,mf[yf++]=u1,u1=u,l1=f}function jN(u,f,g){vr[br++]=Es,vr[br++]=ws,vr[br++]=cl,cl=u;var m=Es;u=ws;var x=32-Hi(m)-1;m&=~(1<<x),g+=1;var E=32-Hi(f)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,Es=1<<32-Hi(f)+x|g<<x|m,ws=E+u}else Es=1<<E|g<<x|m,ws=u}function uE(u){u.return!==null&&(fl(u,1),jN(u,1,0))}function lE(u){for(;u===u1;)u1=mf[--yf],mf[yf]=null,l1=mf[--yf],mf[yf]=null;for(;u===cl;)cl=vr[--br],vr[br]=null,ws=vr[--br],vr[br]=null,Es=vr[--br],vr[br]=null}var ai=null,Ft=null,at=!1,dl=null,wa=!1,cE=Error(i(519));function hl(u){var f=Error(i(418,""));throw hg(mr(f,u)),cE}function PN(u){var f=u.stateNode,g=u.type,m=u.memoizedProps;switch(f[Hn]=u,f[_i]=m,g){case"dialog":Ge("cancel",f),Ge("close",f);break;case"iframe":case"object":case"embed":Ge("load",f);break;case"video":case"audio":for(g=0;g<Lg.length;g++)Ge(Lg[g],f);break;case"source":Ge("error",f);break;case"img":case"image":case"link":Ge("error",f),Ge("load",f);break;case"details":Ge("toggle",f);break;case"input":Ge("invalid",f),nN(f,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Wm(f);break;case"select":Ge("invalid",f);break;case"textarea":Ge("invalid",f),rN(f,m.value,m.defaultValue,m.children),Wm(f)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||m.suppressHydrationWarning===!0||r6(f.textContent,g)?(m.popover!=null&&(Ge("beforetoggle",f),Ge("toggle",f)),m.onScroll!=null&&Ge("scroll",f),m.onScrollEnd!=null&&Ge("scrollend",f),m.onClick!=null&&(f.onclick=q1),f=!0):f=!1,f||hl(u)}function IN(u){for(ai=u.return;ai;)switch(ai.tag){case 5:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:ai=ai.return}}function fg(u){if(u!==ai)return!1;if(!at)return IN(u),at=!0,!1;var f=u.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||$w(u.type,u.memoizedProps)),g=!g),g&&Ft&&hl(u),IN(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(f===0){Ft=qr(u.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;u=u.nextSibling}Ft=null}}else f===27?(f=Ft,Vo(u.type)?(u=Dw,Dw=null,Ft=u):Ft=f):Ft=ai?qr(u.stateNode.nextSibling):null;return!0}function dg(){Ft=ai=null,at=!1}function qN(){var u=dl;return u!==null&&(Ci===null?Ci=u:Ci.push.apply(Ci,u),dl=null),u}function hg(u){dl===null?dl=[u]:dl.push(u)}var fE=V(null),gl=null,_s=null;function No(u,f,g){se(fE,f._currentValue),f._currentValue=g}function As(u){u._currentValue=fE.current,ae(fE)}function dE(u,f,g){for(;u!==null;){var m=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,m!==null&&(m.childLanes|=f)):m!==null&&(m.childLanes&f)!==f&&(m.childLanes|=f),u===g)break;u=u.return}}function hE(u,f,g,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var k=E;E=x;for(var j=0;j<f.length;j++)if(k.context===f[j]){E.lanes|=g,k=E.alternate,k!==null&&(k.lanes|=g),dE(E.return,g,u),m||(C=null);break e}E=k.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=g,E=C.alternate,E!==null&&(E.lanes|=g),dE(C,g,u),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===u){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function gg(u,f,g,m){u=null;for(var x=f,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var k=x.type;Gi(x.pendingProps.value,C.value)||(u!==null?u.push(k):u=[k])}}else if(x===It.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(qg):u=[qg])}x=x.return}u!==null&&hE(f,u,g,m),f.flags|=262144}function c1(u){for(u=u.firstContext;u!==null;){if(!Gi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function pl(u){gl=u,_s=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Gn(u){return HN(gl,u)}function f1(u,f){return gl===null&&pl(u),HN(u,f)}function HN(u,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},_s===null){if(u===null)throw Error(i(308));_s=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else _s=_s.next=f;return g}var pQ=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(g,m){u.push(m)}};this.abort=function(){f.aborted=!0,u.forEach(function(g){return g()})}},mQ=e.unstable_scheduleCallback,yQ=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gE(){return{controller:new pQ,data:new Map,refCount:0}}function pg(u){u.refCount--,u.refCount===0&&mQ(yQ,function(){u.controller.abort()})}var mg=null,pE=0,vf=0,bf=null;function vQ(u,f){if(mg===null){var g=mg=[];pE=0,vf=yw(),bf={status:"pending",value:void 0,then:function(m){g.push(m)}}}return pE++,f.then(GN,GN),f}function GN(){if(--pE===0&&mg!==null){bf!==null&&(bf.status="fulfilled");var u=mg;mg=null,vf=0,bf=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function bQ(u,f){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return u.then(function(){m.status="fulfilled",m.value=f;for(var x=0;x<g.length;x++)(0,g[x])(f)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var YN=N.S;N.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&vQ(u,f),YN!==null&&YN(u,f)};var ml=V(null);function mE(){var u=ml.current;return u!==null?u:Et.pooledCache}function d1(u,f){f===null?se(ml,ml.current):se(ml,f.pool)}function XN(){var u=mE();return u===null?null:{parent:an._currentValue,pool:u}}var yg=Error(i(460)),VN=Error(i(474)),h1=Error(i(542)),yE={then:function(){}};function WN(u){return u=u.status,u==="fulfilled"||u==="rejected"}function g1(){}function QN(u,f,g){switch(g=u[g],g===void 0?u.push(f):g!==f&&(f.then(g1,g1),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,KN(u),u;default:if(typeof f.status=="string")f.then(g1,g1);else{if(u=Et,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=f,u.status="pending",u.then(function(m){if(f.status==="pending"){var x=f;x.status="fulfilled",x.value=m}},function(m){if(f.status==="pending"){var x=f;x.status="rejected",x.reason=m}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,KN(u),u}throw vg=f,yg}}var vg=null;function ZN(){if(vg===null)throw Error(i(459));var u=vg;return vg=null,u}function KN(u){if(u===yg||u===h1)throw Error(i(483))}var Ro=!1;function vE(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bE(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function zo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Fo(u,f,g){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(lt&2)!==0){var x=m.pending;return x===null?f.next=f:(f.next=x.next,x.next=f),m.pending=f,f=s1(u),UN(u,null,g),f}return a1(u,m,f,g),s1(u)}function bg(u,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var m=f.lanes;m&=u.pendingLanes,g|=m,f.lanes=g,GO(u,g)}}function xE(u,f){var g=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var C={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,g=g.next}while(g!==null);E===null?x=E=f:E=E.next=f}else x=E=f;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=f}var SE=!1;function xg(){if(SE){var u=bf;if(u!==null)throw u}}function Sg(u,f,g,m){SE=!1;var x=u.updateQueue;Ro=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var j=k,W=j.next;j.next=null,C===null?E=W:C.next=W,C=j;var ne=u.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==C&&(k===null?ne.firstBaseUpdate=W:k.next=W,ne.lastBaseUpdate=j))}if(E!==null){var re=x.baseState;C=0,ne=W=j=null,k=E;do{var Q=k.lane&-536870913,Z=Q!==k.lane;if(Z?(Ve&Q)===Q:(m&Q)===Q){Q!==0&&Q===vf&&(SE=!0),ne!==null&&(ne=ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Te=u,Me=k;Q=f;var mt=g;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){re=Te.call(mt,re,Q);break e}re=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,Q=typeof Te=="function"?Te.call(mt,re,Q):Te,Q==null)break e;re=d({},re,Q);break e;case 2:Ro=!0}}Q=k.callback,Q!==null&&(u.flags|=64,Z&&(u.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(W=ne=Z,j=re):ne=ne.next=Z,C|=Q;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ne===null&&(j=re),x.baseState=j,x.firstBaseUpdate=W,x.lastBaseUpdate=ne,E===null&&(x.shared.lanes=0),Ho|=C,u.lanes=C,u.memoizedState=re}}function JN(u,f){if(typeof u!="function")throw Error(i(191,u));u.call(f)}function eR(u,f){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)JN(g[u],f)}var xf=V(null),p1=V(0);function tR(u,f){u=Os,se(p1,u),se(xf,f),Os=u|f.baseLanes}function EE(){se(p1,Os),se(xf,xf.current)}function wE(){Os=p1.current,ae(xf),ae(p1)}var Lo=0,Be=null,gt=null,Jt=null,m1=!1,Sf=!1,yl=!1,y1=0,Eg=0,Ef=null,xQ=0;function Ht(){throw Error(i(321))}function _E(u,f){if(f===null)return!1;for(var g=0;g<f.length&&g<u.length;g++)if(!Gi(u[g],f[g]))return!1;return!0}function AE(u,f,g,m,x,E){return Lo=E,Be=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,N.H=u===null||u.memoizedState===null?UR:BR,yl=!1,E=g(m,x),yl=!1,Sf&&(E=iR(f,g,m,x)),nR(u),E}function nR(u){N.H=w1;var f=gt!==null&&gt.next!==null;if(Lo=0,Jt=gt=Be=null,m1=!1,Eg=0,Ef=null,f)throw Error(i(300));u===null||mn||(u=u.dependencies,u!==null&&c1(u)&&(mn=!0))}function iR(u,f,g,m){Be=u;var x=0;do{if(Sf&&(Ef=null),Eg=0,Sf=!1,25<=x)throw Error(i(301));if(x+=1,Jt=gt=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}N.H=MQ,E=f(g,m)}while(Sf);return E}function SQ(){var u=N.H,f=u.useState()[0];return f=typeof f.then=="function"?wg(f):f,u=u.useState()[0],(gt!==null?gt.memoizedState:null)!==u&&(Be.flags|=1024),f}function $E(){var u=y1!==0;return y1=0,u}function ME(u,f,g){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~g}function CE(u){if(m1){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}m1=!1}Lo=0,Jt=gt=Be=null,Sf=!1,Eg=y1=0,Ef=null}function $i(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Be.memoizedState=Jt=u:Jt=Jt.next=u,Jt}function en(){if(gt===null){var u=Be.alternate;u=u!==null?u.memoizedState:null}else u=gt.next;var f=Jt===null?Be.memoizedState:Jt.next;if(f!==null)Jt=f,gt=u;else{if(u===null)throw Be.alternate===null?Error(i(467)):Error(i(310));gt=u,u={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Jt===null?Be.memoizedState=Jt=u:Jt=Jt.next=u}return Jt}function TE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wg(u){var f=Eg;return Eg+=1,Ef===null&&(Ef=[]),u=QN(Ef,u,f),f=Be,(Jt===null?f.memoizedState:Jt.next)===null&&(f=f.alternate,N.H=f===null||f.memoizedState===null?UR:BR),u}function v1(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return wg(u);if(u.$$typeof===A)return Gn(u)}throw Error(i(438,String(u)))}function DE(u){var f=null,g=Be.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var m=Be.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(f={data:m.data.map(function(x){return x.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=TE(),Be.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(u),m=0;m<u;m++)g[m]=P;return f.index++,g}function $s(u,f){return typeof f=="function"?f(u):f}function b1(u){var f=en();return kE(f,gt,u)}function kE(u,f,g){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=u.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}f.baseQueue=x=E,m.pending=null}if(E=u.baseState,x===null)u.memoizedState=E;else{f=x.next;var k=C=null,j=null,W=f,ne=!1;do{var re=W.lane&-536870913;if(re!==W.lane?(Ve&re)===re:(Lo&re)===re){var Q=W.revertLane;if(Q===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),re===vf&&(ne=!0);else if((Lo&Q)===Q){W=W.next,Q===vf&&(ne=!0);continue}else re={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(k=j=re,C=E):j=j.next=re,Be.lanes|=Q,Ho|=Q;re=W.action,yl&&g(E,re),E=W.hasEagerState?W.eagerState:g(E,re)}else Q={lane:re,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(k=j=Q,C=E):j=j.next=Q,Be.lanes|=re,Ho|=re;W=W.next}while(W!==null&&W!==f);if(j===null?C=E:j.next=k,!Gi(E,u.memoizedState)&&(mn=!0,ne&&(g=bf,g!==null)))throw g;u.memoizedState=E,u.baseState=C,u.baseQueue=j,m.lastRenderedState=E}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function OE(u){var f=en(),g=f.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var m=g.dispatch,x=g.pending,E=f.memoizedState;if(x!==null){g.pending=null;var C=x=x.next;do E=u(E,C.action),C=C.next;while(C!==x);Gi(E,f.memoizedState)||(mn=!0),f.memoizedState=E,f.baseQueue===null&&(f.baseState=E),g.lastRenderedState=E}return[E,m]}function rR(u,f,g){var m=Be,x=en(),E=at;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=f();var C=!Gi((gt||x).memoizedState,g);C&&(x.memoizedState=g,mn=!0),x=x.queue;var k=oR.bind(null,m,x,u);if(_g(2048,8,k,[u]),x.getSnapshot!==f||C||Jt!==null&&Jt.memoizedState.tag&1){if(m.flags|=2048,wf(9,x1(),sR.bind(null,m,x,g,f),null),Et===null)throw Error(i(349));E||(Lo&124)!==0||aR(m,f,g)}return g}function aR(u,f,g){u.flags|=16384,u={getSnapshot:f,value:g},f=Be.updateQueue,f===null?(f=TE(),Be.updateQueue=f,f.stores=[u]):(g=f.stores,g===null?f.stores=[u]:g.push(u))}function sR(u,f,g,m){f.value=g,f.getSnapshot=m,uR(f)&&lR(u)}function oR(u,f,g){return g(function(){uR(f)&&lR(u)})}function uR(u){var f=u.getSnapshot;u=u.value;try{var g=f();return!Gi(u,g)}catch{return!0}}function lR(u){var f=gf(u,2);f!==null&&Zi(f,u,2)}function NE(u){var f=$i();if(typeof u=="function"){var g=u;if(u=g(),yl){Do(!0);try{g()}finally{Do(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:u},f}function cR(u,f,g,m){return u.baseState=g,kE(u,gt,typeof m=="function"?m:$s)}function EQ(u,f,g,m,x){if(E1(u))throw Error(i(485));if(u=f.action,u!==null){var E={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};N.T!==null?g(!0):E.isTransition=!1,m(E),g=f.pending,g===null?(E.next=f.pending=E,fR(f,E)):(E.next=g.next,f.pending=g.next=E)}}function fR(u,f){var g=f.action,m=f.payload,x=u.state;if(f.isTransition){var E=N.T,C={};N.T=C;try{var k=g(x,m),j=N.S;j!==null&&j(C,k),dR(u,f,k)}catch(W){RE(u,f,W)}finally{N.T=E}}else try{E=g(x,m),dR(u,f,E)}catch(W){RE(u,f,W)}}function dR(u,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){hR(u,f,m)},function(m){return RE(u,f,m)}):hR(u,f,g)}function hR(u,f,g){f.status="fulfilled",f.value=g,gR(f),u.state=g,f=u.pending,f!==null&&(g=f.next,g===f?u.pending=null:(g=g.next,f.next=g,fR(u,g)))}function RE(u,f,g){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do f.status="rejected",f.reason=g,gR(f),f=f.next;while(f!==m)}u.action=null}function gR(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function pR(u,f){return f}function mR(u,f){if(at){var g=Et.formState;if(g!==null){e:{var m=Be;if(at){if(Ft){t:{for(var x=Ft,E=wa;x.nodeType!==8;){if(!E){x=null;break t}if(x=qr(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Ft=qr(x.nextSibling),m=x.data==="F!";break e}}hl(m)}m=!1}m&&(f=g[0])}}return g=$i(),g.memoizedState=g.baseState=f,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pR,lastRenderedState:f},g.queue=m,g=zR.bind(null,Be,m),m.dispatch=g,m=NE(!1),E=BE.bind(null,Be,!1,m.queue),m=$i(),x={state:f,dispatch:null,action:u,pending:null},m.queue=x,g=EQ.bind(null,Be,x,E,g),x.dispatch=g,m.memoizedState=u,[f,g,!1]}function yR(u){var f=en();return vR(f,gt,u)}function vR(u,f,g){if(f=kE(u,f,pR)[0],u=b1($s)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var m=wg(f)}catch(C){throw C===yg?h1:C}else m=f;f=en();var x=f.queue,E=x.dispatch;return g!==f.memoizedState&&(Be.flags|=2048,wf(9,x1(),wQ.bind(null,x,g),null)),[m,E,u]}function wQ(u,f){u.action=f}function bR(u){var f=en(),g=gt;if(g!==null)return vR(f,g,u);en(),f=f.memoizedState,g=en();var m=g.queue.dispatch;return g.memoizedState=u,[f,m,!1]}function wf(u,f,g,m){return u={tag:u,create:g,deps:m,inst:f,next:null},f=Be.updateQueue,f===null&&(f=TE(),Be.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=u.next=u:(m=g.next,g.next=u,u.next=m,f.lastEffect=u),u}function x1(){return{destroy:void 0,resource:void 0}}function xR(){return en().memoizedState}function S1(u,f,g,m){var x=$i();m=m===void 0?null:m,Be.flags|=u,x.memoizedState=wf(1|f,x1(),g,m)}function _g(u,f,g,m){var x=en();m=m===void 0?null:m;var E=x.memoizedState.inst;gt!==null&&m!==null&&_E(m,gt.memoizedState.deps)?x.memoizedState=wf(f,E,g,m):(Be.flags|=u,x.memoizedState=wf(1|f,E,g,m))}function SR(u,f){S1(8390656,8,u,f)}function ER(u,f){_g(2048,8,u,f)}function wR(u,f){return _g(4,2,u,f)}function _R(u,f){return _g(4,4,u,f)}function AR(u,f){if(typeof f=="function"){u=u();var g=f(u);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function $R(u,f,g){g=g!=null?g.concat([u]):null,_g(4,4,AR.bind(null,f,u),g)}function zE(){}function MR(u,f){var g=en();f=f===void 0?null:f;var m=g.memoizedState;return f!==null&&_E(f,m[1])?m[0]:(g.memoizedState=[u,f],u)}function CR(u,f){var g=en();f=f===void 0?null:f;var m=g.memoizedState;if(f!==null&&_E(f,m[1]))return m[0];if(m=u(),yl){Do(!0);try{u()}finally{Do(!1)}}return g.memoizedState=[m,f],m}function FE(u,f,g){return g===void 0||(Lo&1073741824)!==0?u.memoizedState=f:(u.memoizedState=g,u=k5(),Be.lanes|=u,Ho|=u,g)}function TR(u,f,g,m){return Gi(g,f)?g:xf.current!==null?(u=FE(u,g,m),Gi(u,f)||(mn=!0),u):(Lo&42)===0?(mn=!0,u.memoizedState=g):(u=k5(),Be.lanes|=u,Ho|=u,f)}function DR(u,f,g,m,x){var E=I.p;I.p=E!==0&&8>E?E:8;var C=N.T,k={};N.T=k,BE(u,!1,f,g);try{var j=x(),W=N.S;if(W!==null&&W(k,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ne=bQ(j,m);Ag(u,f,ne,Qi(u))}else Ag(u,f,m,Qi(u))}catch(re){Ag(u,f,{then:function(){},status:"rejected",reason:re},Qi())}finally{I.p=E,N.T=C}}function _Q(){}function LE(u,f,g,m){if(u.tag!==5)throw Error(i(476));var x=kR(u).queue;DR(u,x,f,H,g===null?_Q:function(){return OR(u),g(m)})}function kR(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:H},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:g},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function OR(u){var f=kR(u).next.queue;Ag(u,f,{},Qi())}function UE(){return Gn(qg)}function NR(){return en().memoizedState}function RR(){return en().memoizedState}function AQ(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var g=Qi();u=zo(g);var m=Fo(f,u,g);m!==null&&(Zi(m,f,g),bg(m,f,g)),f={cache:gE()},u.payload=f;return}f=f.return}}function $Q(u,f,g){var m=Qi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},E1(u)?FR(f,g):(g=rE(u,f,g,m),g!==null&&(Zi(g,u,m),LR(g,f,m)))}function zR(u,f,g){var m=Qi();Ag(u,f,g,m)}function Ag(u,f,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(E1(u))FR(f,x);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=f.lastRenderedReducer,E!==null))try{var C=f.lastRenderedState,k=E(C,g);if(x.hasEagerState=!0,x.eagerState=k,Gi(k,C))return a1(u,f,x,0),Et===null&&r1(),!1}catch{}finally{}if(g=rE(u,f,x,m),g!==null)return Zi(g,u,m),LR(g,f,m),!0}return!1}function BE(u,f,g,m){if(m={lane:2,revertLane:yw(),action:m,hasEagerState:!1,eagerState:null,next:null},E1(u)){if(f)throw Error(i(479))}else f=rE(u,g,m,2),f!==null&&Zi(f,u,2)}function E1(u){var f=u.alternate;return u===Be||f!==null&&f===Be}function FR(u,f){Sf=m1=!0;var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}function LR(u,f,g){if((g&4194048)!==0){var m=f.lanes;m&=u.pendingLanes,g|=m,f.lanes=g,GO(u,g)}}var w1={readContext:Gn,use:v1,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht},UR={readContext:Gn,use:v1,useCallback:function(u,f){return $i().memoizedState=[u,f===void 0?null:f],u},useContext:Gn,useEffect:SR,useImperativeHandle:function(u,f,g){g=g!=null?g.concat([u]):null,S1(4194308,4,AR.bind(null,f,u),g)},useLayoutEffect:function(u,f){return S1(4194308,4,u,f)},useInsertionEffect:function(u,f){S1(4,2,u,f)},useMemo:function(u,f){var g=$i();f=f===void 0?null:f;var m=u();if(yl){Do(!0);try{u()}finally{Do(!1)}}return g.memoizedState=[m,f],m},useReducer:function(u,f,g){var m=$i();if(g!==void 0){var x=g(f);if(yl){Do(!0);try{g(f)}finally{Do(!1)}}}else x=f;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=$Q.bind(null,Be,u),[m.memoizedState,u]},useRef:function(u){var f=$i();return u={current:u},f.memoizedState=u},useState:function(u){u=NE(u);var f=u.queue,g=zR.bind(null,Be,f);return f.dispatch=g,[u.memoizedState,g]},useDebugValue:zE,useDeferredValue:function(u,f){var g=$i();return FE(g,u,f)},useTransition:function(){var u=NE(!1);return u=DR.bind(null,Be,u.queue,!0,!1),$i().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,g){var m=Be,x=$i();if(at){if(g===void 0)throw Error(i(407));g=g()}else{if(g=f(),Et===null)throw Error(i(349));(Ve&124)!==0||aR(m,f,g)}x.memoizedState=g;var E={value:g,getSnapshot:f};return x.queue=E,SR(oR.bind(null,m,E,u),[u]),m.flags|=2048,wf(9,x1(),sR.bind(null,m,E,g,f),null),g},useId:function(){var u=$i(),f=Et.identifierPrefix;if(at){var g=ws,m=Es;g=(m&~(1<<32-Hi(m)-1)).toString(32)+g,f=""+f+"R"+g,g=y1++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=xQ++,f=""+f+"r"+g.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:UE,useFormState:mR,useActionState:mR,useOptimistic:function(u){var f=$i();f.memoizedState=f.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=BE.bind(null,Be,!0,g),g.dispatch=f,[u,f]},useMemoCache:DE,useCacheRefresh:function(){return $i().memoizedState=AQ.bind(null,Be)}},BR={readContext:Gn,use:v1,useCallback:MR,useContext:Gn,useEffect:ER,useImperativeHandle:$R,useInsertionEffect:wR,useLayoutEffect:_R,useMemo:CR,useReducer:b1,useRef:xR,useState:function(){return b1($s)},useDebugValue:zE,useDeferredValue:function(u,f){var g=en();return TR(g,gt.memoizedState,u,f)},useTransition:function(){var u=b1($s)[0],f=en().memoizedState;return[typeof u=="boolean"?u:wg(u),f]},useSyncExternalStore:rR,useId:NR,useHostTransitionStatus:UE,useFormState:yR,useActionState:yR,useOptimistic:function(u,f){var g=en();return cR(g,gt,u,f)},useMemoCache:DE,useCacheRefresh:RR},MQ={readContext:Gn,use:v1,useCallback:MR,useContext:Gn,useEffect:ER,useImperativeHandle:$R,useInsertionEffect:wR,useLayoutEffect:_R,useMemo:CR,useReducer:OE,useRef:xR,useState:function(){return OE($s)},useDebugValue:zE,useDeferredValue:function(u,f){var g=en();return gt===null?FE(g,u,f):TR(g,gt.memoizedState,u,f)},useTransition:function(){var u=OE($s)[0],f=en().memoizedState;return[typeof u=="boolean"?u:wg(u),f]},useSyncExternalStore:rR,useId:NR,useHostTransitionStatus:UE,useFormState:bR,useActionState:bR,useOptimistic:function(u,f){var g=en();return gt!==null?cR(g,gt,u,f):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:DE,useCacheRefresh:RR},_f=null,$g=0;function _1(u){var f=$g;return $g+=1,_f===null&&(_f=[]),QN(_f,u,f)}function Mg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function A1(u,f){throw f.$$typeof===h?Error(i(525)):(u=Object.prototype.toString.call(f),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function jR(u){var f=u._init;return f(u._payload)}function PR(u){function f(G,q){if(u){var X=G.deletions;X===null?(G.deletions=[q],G.flags|=16):X.push(q)}}function g(G,q){if(!u)return null;for(;q!==null;)f(G,q),q=q.sibling;return null}function m(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function x(G,q){return G=Ss(G,q),G.index=0,G.sibling=null,G}function E(G,q,X){return G.index=X,u?(X=G.alternate,X!==null?(X=X.index,X<q?(G.flags|=67108866,q):X):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function C(G){return u&&G.alternate===null&&(G.flags|=67108866),G}function k(G,q,X,ie){return q===null||q.tag!==6?(q=sE(X,G.mode,ie),q.return=G,q):(q=x(q,X),q.return=G,q)}function j(G,q,X,ie){var pe=X.type;return pe===v?ne(G,q,X.props.children,ie,X.key):q!==null&&(q.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===O&&jR(pe)===q.type)?(q=x(q,X.props),Mg(q,X),q.return=G,q):(q=o1(X.type,X.key,X.props,null,G.mode,ie),Mg(q,X),q.return=G,q)}function W(G,q,X,ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=oE(X,G.mode,ie),q.return=G,q):(q=x(q,X.children||[]),q.return=G,q)}function ne(G,q,X,ie,pe){return q===null||q.tag!==7?(q=ll(X,G.mode,ie,pe),q.return=G,q):(q=x(q,X),q.return=G,q)}function re(G,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=sE(""+q,G.mode,X),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case p:return X=o1(q.type,q.key,q.props,null,G.mode,X),Mg(X,q),X.return=G,X;case y:return q=oE(q,G.mode,X),q.return=G,q;case O:var ie=q._init;return q=ie(q._payload),re(G,q,X)}if(F(q)||Y(q))return q=ll(q,G.mode,X,null),q.return=G,q;if(typeof q.then=="function")return re(G,_1(q),X);if(q.$$typeof===A)return re(G,f1(G,q),X);A1(G,q)}return null}function Q(G,q,X,ie){var pe=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return pe!==null?null:k(G,q,""+X,ie);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return X.key===pe?j(G,q,X,ie):null;case y:return X.key===pe?W(G,q,X,ie):null;case O:return pe=X._init,X=pe(X._payload),Q(G,q,X,ie)}if(F(X)||Y(X))return pe!==null?null:ne(G,q,X,ie,null);if(typeof X.then=="function")return Q(G,q,_1(X),ie);if(X.$$typeof===A)return Q(G,q,f1(G,X),ie);A1(G,X)}return null}function Z(G,q,X,ie,pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return G=G.get(X)||null,k(q,G,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case p:return G=G.get(ie.key===null?X:ie.key)||null,j(q,G,ie,pe);case y:return G=G.get(ie.key===null?X:ie.key)||null,W(q,G,ie,pe);case O:var Pe=ie._init;return ie=Pe(ie._payload),Z(G,q,X,ie,pe)}if(F(ie)||Y(ie))return G=G.get(X)||null,ne(q,G,ie,pe,null);if(typeof ie.then=="function")return Z(G,q,X,_1(ie),pe);if(ie.$$typeof===A)return Z(G,q,X,f1(q,ie),pe);A1(q,ie)}return null}function Te(G,q,X,ie){for(var pe=null,Pe=null,xe=q,Ce=q=0,vn=null;xe!==null&&Ce<X.length;Ce++){xe.index>Ce?(vn=xe,xe=null):vn=xe.sibling;var et=Q(G,xe,X[Ce],ie);if(et===null){xe===null&&(xe=vn);break}u&&xe&&et.alternate===null&&f(G,xe),q=E(et,q,Ce),Pe===null?pe=et:Pe.sibling=et,Pe=et,xe=vn}if(Ce===X.length)return g(G,xe),at&&fl(G,Ce),pe;if(xe===null){for(;Ce<X.length;Ce++)xe=re(G,X[Ce],ie),xe!==null&&(q=E(xe,q,Ce),Pe===null?pe=xe:Pe.sibling=xe,Pe=xe);return at&&fl(G,Ce),pe}for(xe=m(xe);Ce<X.length;Ce++)vn=Z(xe,G,Ce,X[Ce],ie),vn!==null&&(u&&vn.alternate!==null&&xe.delete(vn.key===null?Ce:vn.key),q=E(vn,q,Ce),Pe===null?pe=vn:Pe.sibling=vn,Pe=vn);return u&&xe.forEach(function(Jo){return f(G,Jo)}),at&&fl(G,Ce),pe}function Me(G,q,X,ie){if(X==null)throw Error(i(151));for(var pe=null,Pe=null,xe=q,Ce=q=0,vn=null,et=X.next();xe!==null&&!et.done;Ce++,et=X.next()){xe.index>Ce?(vn=xe,xe=null):vn=xe.sibling;var Jo=Q(G,xe,et.value,ie);if(Jo===null){xe===null&&(xe=vn);break}u&&xe&&Jo.alternate===null&&f(G,xe),q=E(Jo,q,Ce),Pe===null?pe=Jo:Pe.sibling=Jo,Pe=Jo,xe=vn}if(et.done)return g(G,xe),at&&fl(G,Ce),pe;if(xe===null){for(;!et.done;Ce++,et=X.next())et=re(G,et.value,ie),et!==null&&(q=E(et,q,Ce),Pe===null?pe=et:Pe.sibling=et,Pe=et);return at&&fl(G,Ce),pe}for(xe=m(xe);!et.done;Ce++,et=X.next())et=Z(xe,G,Ce,et.value,ie),et!==null&&(u&&et.alternate!==null&&xe.delete(et.key===null?Ce:et.key),q=E(et,q,Ce),Pe===null?pe=et:Pe.sibling=et,Pe=et);return u&&xe.forEach(function(CZ){return f(G,CZ)}),at&&fl(G,Ce),pe}function mt(G,q,X,ie){if(typeof X=="object"&&X!==null&&X.type===v&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case p:e:{for(var pe=X.key;q!==null;){if(q.key===pe){if(pe=X.type,pe===v){if(q.tag===7){g(G,q.sibling),ie=x(q,X.props.children),ie.return=G,G=ie;break e}}else if(q.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===O&&jR(pe)===q.type){g(G,q.sibling),ie=x(q,X.props),Mg(ie,X),ie.return=G,G=ie;break e}g(G,q);break}else f(G,q);q=q.sibling}X.type===v?(ie=ll(X.props.children,G.mode,ie,X.key),ie.return=G,G=ie):(ie=o1(X.type,X.key,X.props,null,G.mode,ie),Mg(ie,X),ie.return=G,G=ie)}return C(G);case y:e:{for(pe=X.key;q!==null;){if(q.key===pe)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){g(G,q.sibling),ie=x(q,X.children||[]),ie.return=G,G=ie;break e}else{g(G,q);break}else f(G,q);q=q.sibling}ie=oE(X,G.mode,ie),ie.return=G,G=ie}return C(G);case O:return pe=X._init,X=pe(X._payload),mt(G,q,X,ie)}if(F(X))return Te(G,q,X,ie);if(Y(X)){if(pe=Y(X),typeof pe!="function")throw Error(i(150));return X=pe.call(X),Me(G,q,X,ie)}if(typeof X.then=="function")return mt(G,q,_1(X),ie);if(X.$$typeof===A)return mt(G,q,f1(G,X),ie);A1(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(g(G,q.sibling),ie=x(q,X),ie.return=G,G=ie):(g(G,q),ie=sE(X,G.mode,ie),ie.return=G,G=ie),C(G)):g(G,q)}return function(G,q,X,ie){try{$g=0;var pe=mt(G,q,X,ie);return _f=null,pe}catch(xe){if(xe===yg||xe===h1)throw xe;var Pe=Yi(29,xe,null,G.mode);return Pe.lanes=ie,Pe.return=G,Pe}finally{}}}var Af=PR(!0),IR=PR(!1),xr=V(null),_a=null;function Uo(u){var f=u.alternate;se(sn,sn.current&1),se(xr,u),_a===null&&(f===null||xf.current!==null||f.memoizedState!==null)&&(_a=u)}function qR(u){if(u.tag===22){if(se(sn,sn.current),se(xr,u),_a===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(_a=u)}}else Bo()}function Bo(){se(sn,sn.current),se(xr,xr.current)}function Ms(u){ae(xr),_a===u&&(_a=null),ae(sn)}var sn=V(0);function $1(u){for(var f=u;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Tw(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function jE(u,f,g,m){f=u.memoizedState,g=g(m,f),g=g==null?f:d({},f,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var PE={enqueueSetState:function(u,f,g){u=u._reactInternals;var m=Qi(),x=zo(m);x.payload=f,g!=null&&(x.callback=g),f=Fo(u,x,m),f!==null&&(Zi(f,u,m),bg(f,u,m))},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var m=Qi(),x=zo(m);x.tag=1,x.payload=f,g!=null&&(x.callback=g),f=Fo(u,x,m),f!==null&&(Zi(f,u,m),bg(f,u,m))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=Qi(),m=zo(g);m.tag=2,f!=null&&(m.callback=f),f=Fo(u,m,g),f!==null&&(Zi(f,u,g),bg(f,u,g))}};function HR(u,f,g,m,x,E,C){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,E,C):f.prototype&&f.prototype.isPureReactComponent?!lg(g,m)||!lg(x,E):!0}function GR(u,f,g,m){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,m),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,m),f.state!==u&&PE.enqueueReplaceState(f,f.state,null)}function vl(u,f){var g=f;if("ref"in f){g={};for(var m in f)m!=="ref"&&(g[m]=f[m])}if(u=u.defaultProps){g===f&&(g=d({},g));for(var x in u)g[x]===void 0&&(g[x]=u[x])}return g}var M1=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function YR(u){M1(u)}function XR(u){console.error(u)}function VR(u){M1(u)}function C1(u,f){try{var g=u.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(m){setTimeout(function(){throw m})}}function WR(u,f,g){try{var m=u.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function IE(u,f,g){return g=zo(g),g.tag=3,g.payload={element:null},g.callback=function(){C1(u,f)},g}function QR(u){return u=zo(u),u.tag=3,u}function ZR(u,f,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;u.payload=function(){return x(E)},u.callback=function(){WR(f,g,m)}}var C=g.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(u.callback=function(){WR(f,g,m),typeof x!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function CQ(u,f,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(f=g.alternate,f!==null&&gg(f,g,x,!0),g=xr.current,g!==null){switch(g.tag){case 13:return _a===null?dw():g.alternate===null&&Lt===0&&(Lt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===yE?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([m]):f.add(m),gw(u,m,x)),!1;case 22:return g.flags|=65536,m===yE?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([m]):g.add(m)),gw(u,m,x)),!1}throw Error(i(435,g.tag))}return gw(u,m,x),dw(),!1}if(at)return f=xr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=x,m!==cE&&(u=Error(i(422),{cause:m}),hg(mr(u,g)))):(m!==cE&&(f=Error(i(423),{cause:m}),hg(mr(f,g))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=mr(m,g),x=IE(u.stateNode,m,x),xE(u,x),Lt!==4&&(Lt=2)),!1;var E=Error(i(520),{cause:m});if(E=mr(E,g),Rg===null?Rg=[E]:Rg.push(E),Lt!==4&&(Lt=2),f===null)return!0;m=mr(m,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,u=x&-x,g.lanes|=u,u=IE(g.stateNode,m,u),xE(g,u),!1;case 1:if(f=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Go===null||!Go.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=QR(x),ZR(x,u,g,m),xE(g,x),!1}g=g.return}while(g!==null);return!1}var KR=Error(i(461)),mn=!1;function kn(u,f,g,m){f.child=u===null?IR(f,null,g,m):Af(f,u.child,g,m)}function JR(u,f,g,m,x){g=g.render;var E=f.ref;if("ref"in m){var C={};for(var k in m)k!=="ref"&&(C[k]=m[k])}else C=m;return pl(f),m=AE(u,f,g,C,E,x),k=$E(),u!==null&&!mn?(ME(u,f,x),Cs(u,f,x)):(at&&k&&uE(f),f.flags|=1,kn(u,f,m,x),f.child)}function e5(u,f,g,m,x){if(u===null){var E=g.type;return typeof E=="function"&&!aE(E)&&E.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=E,t5(u,f,E,m,x)):(u=o1(g.type,null,m,f,f.mode,x),u.ref=f.ref,u.return=f,f.child=u)}if(E=u.child,!QE(u,x)){var C=E.memoizedProps;if(g=g.compare,g=g!==null?g:lg,g(C,m)&&u.ref===f.ref)return Cs(u,f,x)}return f.flags|=1,u=Ss(E,m),u.ref=f.ref,u.return=f,f.child=u}function t5(u,f,g,m,x){if(u!==null){var E=u.memoizedProps;if(lg(E,m)&&u.ref===f.ref)if(mn=!1,f.pendingProps=m=E,QE(u,x))(u.flags&131072)!==0&&(mn=!0);else return f.lanes=u.lanes,Cs(u,f,x)}return qE(u,f,g,m,x)}function n5(u,f,g){var m=f.pendingProps,x=m.children,E=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((f.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,u!==null){for(x=f.child=u.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;f.childLanes=E&~m}else f.childLanes=0,f.child=null;return i5(u,f,m,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&d1(f,E!==null?E.cachePool:null),E!==null?tR(f,E):EE(),qR(f);else return f.lanes=f.childLanes=536870912,i5(u,f,E!==null?E.baseLanes|g:g,g)}else E!==null?(d1(f,E.cachePool),tR(f,E),Bo(),f.memoizedState=null):(u!==null&&d1(f,null),EE(),Bo());return kn(u,f,x,g),f.child}function i5(u,f,g,m){var x=mE();return x=x===null?null:{parent:an._currentValue,pool:x},f.memoizedState={baseLanes:g,cachePool:x},u!==null&&d1(f,null),EE(),qR(f),u!==null&&gg(u,f,m,!0),null}function T1(u,f){var g=f.ref;if(g===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(f.flags|=4194816)}}function qE(u,f,g,m,x){return pl(f),g=AE(u,f,g,m,void 0,x),m=$E(),u!==null&&!mn?(ME(u,f,x),Cs(u,f,x)):(at&&m&&uE(f),f.flags|=1,kn(u,f,g,x),f.child)}function r5(u,f,g,m,x,E){return pl(f),f.updateQueue=null,g=iR(f,m,g,x),nR(u),m=$E(),u!==null&&!mn?(ME(u,f,E),Cs(u,f,E)):(at&&m&&uE(f),f.flags|=1,kn(u,f,g,E),f.child)}function a5(u,f,g,m,x){if(pl(f),f.stateNode===null){var E=pf,C=g.contextType;typeof C=="object"&&C!==null&&(E=Gn(C)),E=new g(m,E),f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=PE,f.stateNode=E,E._reactInternals=f,E=f.stateNode,E.props=m,E.state=f.memoizedState,E.refs={},vE(f),C=g.contextType,E.context=typeof C=="object"&&C!==null?Gn(C):pf,E.state=f.memoizedState,C=g.getDerivedStateFromProps,typeof C=="function"&&(jE(f,g,C,m),E.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&PE.enqueueReplaceState(E,E.state,null),Sg(f,m,E,x),xg(),E.state=f.memoizedState),typeof E.componentDidMount=="function"&&(f.flags|=4194308),m=!0}else if(u===null){E=f.stateNode;var k=f.memoizedProps,j=vl(g,k);E.props=j;var W=E.context,ne=g.contextType;C=pf,typeof ne=="object"&&ne!==null&&(C=Gn(ne));var re=g.getDerivedStateFromProps;ne=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function",k=f.pendingProps!==k,ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k||W!==C)&&GR(f,E,m,C),Ro=!1;var Q=f.memoizedState;E.state=Q,Sg(f,m,E,x),xg(),W=f.memoizedState,k||Q!==W||Ro?(typeof re=="function"&&(jE(f,g,re,m),W=f.memoizedState),(j=Ro||HR(f,g,j,m,Q,W,C))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(f.flags|=4194308)):(typeof E.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=m,f.memoizedState=W),E.props=m,E.state=W,E.context=C,m=j):(typeof E.componentDidMount=="function"&&(f.flags|=4194308),m=!1)}else{E=f.stateNode,bE(u,f),C=f.memoizedProps,ne=vl(g,C),E.props=ne,re=f.pendingProps,Q=E.context,W=g.contextType,j=pf,typeof W=="object"&&W!==null&&(j=Gn(W)),k=g.getDerivedStateFromProps,(W=typeof k=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==re||Q!==j)&&GR(f,E,m,j),Ro=!1,Q=f.memoizedState,E.state=Q,Sg(f,m,E,x),xg();var Z=f.memoizedState;C!==re||Q!==Z||Ro||u!==null&&u.dependencies!==null&&c1(u.dependencies)?(typeof k=="function"&&(jE(f,g,k,m),Z=f.memoizedState),(ne=Ro||HR(f,g,ne,m,Q,Z,j)||u!==null&&u.dependencies!==null&&c1(u.dependencies))?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,Z,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,Z,j)),typeof E.componentDidUpdate=="function"&&(f.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===u.memoizedProps&&Q===u.memoizedState||(f.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===u.memoizedProps&&Q===u.memoizedState||(f.flags|=1024),f.memoizedProps=m,f.memoizedState=Z),E.props=m,E.state=Z,E.context=j,m=ne):(typeof E.componentDidUpdate!="function"||C===u.memoizedProps&&Q===u.memoizedState||(f.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===u.memoizedProps&&Q===u.memoizedState||(f.flags|=1024),m=!1)}return E=m,T1(u,f),m=(f.flags&128)!==0,E||m?(E=f.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),f.flags|=1,u!==null&&m?(f.child=Af(f,u.child,null,x),f.child=Af(f,null,g,x)):kn(u,f,g,x),f.memoizedState=E.state,u=f.child):u=Cs(u,f,x),u}function s5(u,f,g,m){return dg(),f.flags|=256,kn(u,f,g,m),f.child}var HE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function GE(u){return{baseLanes:u,cachePool:XN()}}function YE(u,f,g){return u=u!==null?u.childLanes&~g:0,f&&(u|=Sr),u}function o5(u,f,g){var m=f.pendingProps,x=!1,E=(f.flags&128)!==0,C;if((C=E)||(C=u!==null&&u.memoizedState===null?!1:(sn.current&2)!==0),C&&(x=!0,f.flags&=-129),C=(f.flags&32)!==0,f.flags&=-33,u===null){if(at){if(x?Uo(f):Bo(),at){var k=Ft,j;if(j=k){e:{for(j=k,k=wa;j.nodeType!==8;){if(!k){k=null;break e}if(j=qr(j.nextSibling),j===null){k=null;break e}}k=j}k!==null?(f.memoizedState={dehydrated:k,treeContext:cl!==null?{id:Es,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},j=Yi(18,null,null,0),j.stateNode=k,j.return=f,f.child=j,ai=f,Ft=null,j=!0):j=!1}j||hl(f)}if(k=f.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Tw(k)?f.lanes=32:f.lanes=536870912,null;Ms(f)}return k=m.children,m=m.fallback,x?(Bo(),x=f.mode,k=D1({mode:"hidden",children:k},x),m=ll(m,x,g,null),k.return=f,m.return=f,k.sibling=m,f.child=k,x=f.child,x.memoizedState=GE(g),x.childLanes=YE(u,C,g),f.memoizedState=HE,m):(Uo(f),XE(f,k))}if(j=u.memoizedState,j!==null&&(k=j.dehydrated,k!==null)){if(E)f.flags&256?(Uo(f),f.flags&=-257,f=VE(u,f,g)):f.memoizedState!==null?(Bo(),f.child=u.child,f.flags|=128,f=null):(Bo(),x=m.fallback,k=f.mode,m=D1({mode:"visible",children:m.children},k),x=ll(x,k,g,null),x.flags|=2,m.return=f,x.return=f,m.sibling=x,f.child=m,Af(f,u.child,null,g),m=f.child,m.memoizedState=GE(g),m.childLanes=YE(u,C,g),f.memoizedState=HE,f=x);else if(Uo(f),Tw(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var W=C.dgst;C=W,m=Error(i(419)),m.stack="",m.digest=C,hg({value:m,source:null,stack:null}),f=VE(u,f,g)}else if(mn||gg(u,f,g,!1),C=(g&u.childLanes)!==0,mn||C){if(C=Et,C!==null&&(m=g&-g,m=(m&42)!==0?1:DS(m),m=(m&(C.suspendedLanes|g))!==0?0:m,m!==0&&m!==j.retryLane))throw j.retryLane=m,gf(u,m),Zi(C,u,m),KR;k.data==="$?"||dw(),f=VE(u,f,g)}else k.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=j.treeContext,Ft=qr(k.nextSibling),ai=f,at=!0,dl=null,wa=!1,u!==null&&(vr[br++]=Es,vr[br++]=ws,vr[br++]=cl,Es=u.id,ws=u.overflow,cl=f),f=XE(f,m.children),f.flags|=4096);return f}return x?(Bo(),x=m.fallback,k=f.mode,j=u.child,W=j.sibling,m=Ss(j,{mode:"hidden",children:m.children}),m.subtreeFlags=j.subtreeFlags&65011712,W!==null?x=Ss(W,x):(x=ll(x,k,g,null),x.flags|=2),x.return=f,m.return=f,m.sibling=x,f.child=m,m=x,x=f.child,k=u.child.memoizedState,k===null?k=GE(g):(j=k.cachePool,j!==null?(W=an._currentValue,j=j.parent!==W?{parent:W,pool:W}:j):j=XN(),k={baseLanes:k.baseLanes|g,cachePool:j}),x.memoizedState=k,x.childLanes=YE(u,C,g),f.memoizedState=HE,m):(Uo(f),g=u.child,u=g.sibling,g=Ss(g,{mode:"visible",children:m.children}),g.return=f,g.sibling=null,u!==null&&(C=f.deletions,C===null?(f.deletions=[u],f.flags|=16):C.push(u)),f.child=g,f.memoizedState=null,g)}function XE(u,f){return f=D1({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function D1(u,f){return u=Yi(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function VE(u,f,g){return Af(f,u.child,null,g),u=XE(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function u5(u,f,g){u.lanes|=f;var m=u.alternate;m!==null&&(m.lanes|=f),dE(u.return,f,g)}function WE(u,f,g,m,x){var E=u.memoizedState;E===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=f,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function l5(u,f,g){var m=f.pendingProps,x=m.revealOrder,E=m.tail;if(kn(u,f,m.children,g),m=sn.current,(m&2)!==0)m=m&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&u5(u,g,f);else if(u.tag===19)u5(u,g,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(se(sn,m),x){case"forwards":for(g=f.child,x=null;g!==null;)u=g.alternate,u!==null&&$1(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=f.child,f.child=null):(x=g.sibling,g.sibling=null),WE(f,!1,x,g,E);break;case"backwards":for(g=null,x=f.child,f.child=null;x!==null;){if(u=x.alternate,u!==null&&$1(u)===null){f.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}WE(f,!0,g,null,E);break;case"together":WE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Cs(u,f,g){if(u!==null&&(f.dependencies=u.dependencies),Ho|=f.lanes,(g&f.childLanes)===0)if(u!==null){if(gg(u,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(i(153));if(f.child!==null){for(u=f.child,g=Ss(u,u.pendingProps),f.child=g,g.return=f;u.sibling!==null;)u=u.sibling,g=g.sibling=Ss(u,u.pendingProps),g.return=f;g.sibling=null}return f.child}function QE(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&c1(u)))}function TQ(u,f,g){switch(f.tag){case 3:Qe(f,f.stateNode.containerInfo),No(f,an,u.memoizedState.cache),dg();break;case 27:case 5:ke(f);break;case 4:Qe(f,f.stateNode.containerInfo);break;case 10:No(f,f.type,f.memoizedProps.value);break;case 13:var m=f.memoizedState;if(m!==null)return m.dehydrated!==null?(Uo(f),f.flags|=128,null):(g&f.child.childLanes)!==0?o5(u,f,g):(Uo(f),u=Cs(u,f,g),u!==null?u.sibling:null);Uo(f);break;case 19:var x=(u.flags&128)!==0;if(m=(g&f.childLanes)!==0,m||(gg(u,f,g,!1),m=(g&f.childLanes)!==0),x){if(m)return l5(u,f,g);f.flags|=128}if(x=f.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(sn,sn.current),m)break;return null;case 22:case 23:return f.lanes=0,n5(u,f,g);case 24:No(f,an,u.memoizedState.cache)}return Cs(u,f,g)}function c5(u,f,g){if(u!==null)if(u.memoizedProps!==f.pendingProps)mn=!0;else{if(!QE(u,g)&&(f.flags&128)===0)return mn=!1,TQ(u,f,g);mn=(u.flags&131072)!==0}else mn=!1,at&&(f.flags&1048576)!==0&&jN(f,l1,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var m=f.elementType,x=m._init;if(m=x(m._payload),f.type=m,typeof m=="function")aE(m)?(u=vl(m,u),f.tag=1,f=a5(null,f,m,u,g)):(f.tag=0,f=qE(null,f,m,u,g));else{if(m!=null){if(x=m.$$typeof,x===$){f.tag=11,f=JR(null,f,m,u,g);break e}else if(x===T){f.tag=14,f=e5(null,f,m,u,g);break e}}throw f=U(m)||m,Error(i(306,f,""))}}return f;case 0:return qE(u,f,f.type,f.pendingProps,g);case 1:return m=f.type,x=vl(m,f.pendingProps),a5(u,f,m,x,g);case 3:e:{if(Qe(f,f.stateNode.containerInfo),u===null)throw Error(i(387));m=f.pendingProps;var E=f.memoizedState;x=E.element,bE(u,f),Sg(f,m,null,g);var C=f.memoizedState;if(m=C.cache,No(f,an,m),m!==E.cache&&hE(f,[an],g,!0),xg(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},f.updateQueue.baseState=E,f.memoizedState=E,f.flags&256){f=s5(u,f,m,g);break e}else if(m!==x){x=mr(Error(i(424)),f),hg(x),f=s5(u,f,m,g);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ft=qr(u.firstChild),ai=f,at=!0,dl=null,wa=!0,g=IR(f,null,m,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(dg(),m===x){f=Cs(u,f,g);break e}kn(u,f,m,g)}f=f.child}return f;case 26:return T1(u,f),u===null?(g=g6(f.type,null,f.pendingProps,null))?f.memoizedState=g:at||(g=f.type,u=f.pendingProps,m=H1(Se.current).createElement(g),m[Hn]=f,m[_i]=u,Nn(m,g,u),pn(m),f.stateNode=m):f.memoizedState=g6(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return ke(f),u===null&&at&&(m=f.stateNode=f6(f.type,f.pendingProps,Se.current),ai=f,wa=!0,x=Ft,Vo(f.type)?(Dw=x,Ft=qr(m.firstChild)):Ft=x),kn(u,f,f.pendingProps.children,g),T1(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&at&&((x=m=Ft)&&(m=iZ(m,f.type,f.pendingProps,wa),m!==null?(f.stateNode=m,ai=f,Ft=qr(m.firstChild),wa=!1,x=!0):x=!1),x||hl(f)),ke(f),x=f.type,E=f.pendingProps,C=u!==null?u.memoizedProps:null,m=E.children,$w(x,E)?m=null:C!==null&&$w(x,C)&&(f.flags|=32),f.memoizedState!==null&&(x=AE(u,f,SQ,null,null,g),qg._currentValue=x),T1(u,f),kn(u,f,m,g),f.child;case 6:return u===null&&at&&((u=g=Ft)&&(g=rZ(g,f.pendingProps,wa),g!==null?(f.stateNode=g,ai=f,Ft=null,u=!0):u=!1),u||hl(f)),null;case 13:return o5(u,f,g);case 4:return Qe(f,f.stateNode.containerInfo),m=f.pendingProps,u===null?f.child=Af(f,null,m,g):kn(u,f,m,g),f.child;case 11:return JR(u,f,f.type,f.pendingProps,g);case 7:return kn(u,f,f.pendingProps,g),f.child;case 8:return kn(u,f,f.pendingProps.children,g),f.child;case 12:return kn(u,f,f.pendingProps.children,g),f.child;case 10:return m=f.pendingProps,No(f,f.type,m.value),kn(u,f,m.children,g),f.child;case 9:return x=f.type._context,m=f.pendingProps.children,pl(f),x=Gn(x),m=m(x),f.flags|=1,kn(u,f,m,g),f.child;case 14:return e5(u,f,f.type,f.pendingProps,g);case 15:return t5(u,f,f.type,f.pendingProps,g);case 19:return l5(u,f,g);case 31:return m=f.pendingProps,g=f.mode,m={mode:m.mode,children:m.children},u===null?(g=D1(m,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Ss(u.child,m),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return n5(u,f,g);case 24:return pl(f),m=Gn(an),u===null?(x=mE(),x===null&&(x=Et,E=gE(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),f.memoizedState={parent:m,cache:x},vE(f),No(f,an,x)):((u.lanes&g)!==0&&(bE(u,f),Sg(f,null,null,g),xg()),x=u.memoizedState,E=f.memoizedState,x.parent!==m?(x={parent:m,cache:m},f.memoizedState=x,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=x),No(f,an,m)):(m=E.cache,No(f,an,m),m!==x.cache&&hE(f,[an],g,!0))),kn(u,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Ts(u){u.flags|=4}function f5(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!b6(f)){if(f=xr.current,f!==null&&((Ve&4194048)===Ve?_a!==null:(Ve&62914560)!==Ve&&(Ve&536870912)===0||f!==_a))throw vg=yE,VN;u.flags|=8192}}function k1(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?qO():536870912,u.lanes|=f,Tf|=f)}function Cg(u,f){if(!at)switch(u.tailMode){case"hidden":f=u.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Ot(u){var f=u.alternate!==null&&u.alternate.child===u.child,g=0,m=0;if(f)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=g,f}function DQ(u,f,g){var m=f.pendingProps;switch(lE(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(f),null;case 1:return Ot(f),null;case 3:return g=f.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),As(an),ge(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(fg(f)?Ts(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,qN())),Ot(f),null;case 26:return g=f.memoizedState,u===null?(Ts(f),g!==null?(Ot(f),f5(f,g)):(Ot(f),f.flags&=-16777217)):g?g!==u.memoizedState?(Ts(f),Ot(f),f5(f,g)):(Ot(f),f.flags&=-16777217):(u.memoizedProps!==m&&Ts(f),Ot(f),f.flags&=-16777217),null;case 27:ze(f),g=Se.current;var x=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return Ot(f),null}u=de.current,fg(f)?PN(f):(u=f6(x,m,g),f.stateNode=u,Ts(f))}return Ot(f),null;case 5:if(ze(f),g=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return Ot(f),null}if(u=de.current,fg(f))PN(f);else{switch(x=H1(Se.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}u[Hn]=f,u[_i]=m;e:for(x=f.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}f.stateNode=u;e:switch(Nn(u,g,m),g){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ts(f)}}return Ot(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(typeof m!="string"&&f.stateNode===null)throw Error(i(166));if(u=Se.current,fg(f)){if(u=f.stateNode,g=f.memoizedProps,m=null,x=ai,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[Hn]=f,u=!!(u.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||r6(u.nodeValue,g)),u||hl(f)}else u=H1(u).createTextNode(m),u[Hn]=f,f.stateNode=u}return Ot(f),null;case 13:if(m=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=fg(f),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=f.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Hn]=f}else dg(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ot(f),x=!1}else x=qN(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return f.flags&256?(Ms(f),f):(Ms(f),null)}if(Ms(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=m!==null,u=u!==null&&u.memoizedState!==null,g){m=f.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==u&&g&&(f.child.flags|=8192),k1(f,f.updateQueue),Ot(f),null;case 4:return ge(),u===null&&Sw(f.stateNode.containerInfo),Ot(f),null;case 10:return As(f.type),Ot(f),null;case 19:if(ae(sn),x=f.memoizedState,x===null)return Ot(f),null;if(m=(f.flags&128)!==0,E=x.rendering,E===null)if(m)Cg(x,!1);else{if(Lt!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(E=$1(u),E!==null){for(f.flags|=128,Cg(x,!1),u=E.updateQueue,f.updateQueue=u,k1(f,u),f.subtreeFlags=0,u=g,g=f.child;g!==null;)BN(g,u),g=g.sibling;return se(sn,sn.current&1|2),f.child}u=u.sibling}x.tail!==null&&Kt()>R1&&(f.flags|=128,m=!0,Cg(x,!1),f.lanes=4194304)}else{if(!m)if(u=$1(E),u!==null){if(f.flags|=128,m=!0,u=u.updateQueue,f.updateQueue=u,k1(f,u),Cg(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!at)return Ot(f),null}else 2*Kt()-x.renderingStartTime>R1&&g!==536870912&&(f.flags|=128,m=!0,Cg(x,!1),f.lanes=4194304);x.isBackwards?(E.sibling=f.child,f.child=E):(u=x.last,u!==null?u.sibling=E:f.child=E,x.last=E)}return x.tail!==null?(f=x.tail,x.rendering=f,x.tail=f.sibling,x.renderingStartTime=Kt(),f.sibling=null,u=sn.current,se(sn,m?u&1|2:u&1),f):(Ot(f),null);case 22:case 23:return Ms(f),wE(),m=f.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(f.flags|=8192):m&&(f.flags|=8192),m?(g&536870912)!==0&&(f.flags&128)===0&&(Ot(f),f.subtreeFlags&6&&(f.flags|=8192)):Ot(f),g=f.updateQueue,g!==null&&k1(f,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),m=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(m=f.memoizedState.cachePool.pool),m!==g&&(f.flags|=2048),u!==null&&ae(ml),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),As(an),Ot(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function kQ(u,f){switch(lE(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return As(an),ge(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return ze(f),null;case 13:if(Ms(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(i(340));dg()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return ae(sn),null;case 4:return ge(),null;case 10:return As(f.type),null;case 22:case 23:return Ms(f),wE(),u!==null&&ae(ml),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return As(an),null;case 25:return null;default:return null}}function d5(u,f){switch(lE(f),f.tag){case 3:As(an),ge();break;case 26:case 27:case 5:ze(f);break;case 4:ge();break;case 13:Ms(f);break;case 19:ae(sn);break;case 10:As(f.type);break;case 22:case 23:Ms(f),wE(),u!==null&&ae(ml);break;case 24:As(an)}}function Tg(u,f){try{var g=f.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&u)===u){m=void 0;var E=g.create,C=g.inst;m=E(),C.destroy=m}g=g.next}while(g!==x)}}catch(k){bt(f,f.return,k)}}function jo(u,f,g){try{var m=f.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&u)===u){var C=m.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,x=f;var j=g,W=k;try{W()}catch(ne){bt(x,j,ne)}}}m=m.next}while(m!==E)}}catch(ne){bt(f,f.return,ne)}}function h5(u){var f=u.updateQueue;if(f!==null){var g=u.stateNode;try{eR(f,g)}catch(m){bt(u,u.return,m)}}}function g5(u,f,g){g.props=vl(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(m){bt(u,f,m)}}function Dg(u,f){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof g=="function"?u.refCleanup=g(m):g.current=m}}catch(x){bt(u,f,x)}}function Aa(u,f){var g=u.ref,m=u.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){bt(u,f,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){bt(u,f,x)}else g.current=null}function p5(u){var f=u.type,g=u.memoizedProps,m=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){bt(u,u.return,x)}}function ZE(u,f,g){try{var m=u.stateNode;KQ(m,u.type,g,f),m[_i]=f}catch(x){bt(u,u.return,x)}}function m5(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Vo(u.type)||u.tag===4}function KE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||m5(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Vo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function JE(u,f,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(u),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=q1));else if(m!==4&&(m===27&&Vo(u.type)&&(g=u.stateNode,f=null),u=u.child,u!==null))for(JE(u,f,g),u=u.sibling;u!==null;)JE(u,f,g),u=u.sibling}function O1(u,f,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,f?g.insertBefore(u,f):g.appendChild(u);else if(m!==4&&(m===27&&Vo(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(O1(u,f,g),u=u.sibling;u!==null;)O1(u,f,g),u=u.sibling}function y5(u){var f=u.stateNode,g=u.memoizedProps;try{for(var m=u.type,x=f.attributes;x.length;)f.removeAttributeNode(x[0]);Nn(f,m,g),f[Hn]=u,f[_i]=g}catch(E){bt(u,u.return,E)}}var Ds=!1,Gt=!1,ew=!1,v5=typeof WeakSet=="function"?WeakSet:Set,yn=null;function OQ(u,f){if(u=u.containerInfo,_w=Q1,u=TN(u),KS(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var C=0,k=-1,j=-1,W=0,ne=0,re=u,Q=null;t:for(;;){for(var Z;re!==g||x!==0&&re.nodeType!==3||(k=C+x),re!==E||m!==0&&re.nodeType!==3||(j=C+m),re.nodeType===3&&(C+=re.nodeValue.length),(Z=re.firstChild)!==null;)Q=re,re=Z;for(;;){if(re===u)break t;if(Q===g&&++W===x&&(k=C),Q===E&&++ne===m&&(j=C),(Z=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Z}g=k===-1||j===-1?null:{start:k,end:j}}else g=null}g=g||{start:0,end:0}}else g=null;for(Aw={focusedElem:u,selectionRange:g},Q1=!1,yn=f;yn!==null;)if(f=yn,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,yn=u;else for(;yn!==null;){switch(f=yn,E=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,g=f,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var Te=vl(g.type,x,g.elementType===g.type);u=m.getSnapshotBeforeUpdate(Te,E),m.__reactInternalSnapshotBeforeUpdate=u}catch(Me){bt(g,g.return,Me)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,g=u.nodeType,g===9)Cw(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Cw(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=f.sibling,u!==null){u.return=f.return,yn=u;break}yn=f.return}}function b5(u,f,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Po(u,g),m&4&&Tg(5,g);break;case 1:if(Po(u,g),m&4)if(u=g.stateNode,f===null)try{u.componentDidMount()}catch(C){bt(g,g.return,C)}else{var x=vl(g.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(x,f,u.__reactInternalSnapshotBeforeUpdate)}catch(C){bt(g,g.return,C)}}m&64&&h5(g),m&512&&Dg(g,g.return);break;case 3:if(Po(u,g),m&64&&(u=g.updateQueue,u!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{eR(u,f)}catch(C){bt(g,g.return,C)}}break;case 27:f===null&&m&4&&y5(g);case 26:case 5:Po(u,g),f===null&&m&4&&p5(g),m&512&&Dg(g,g.return);break;case 12:Po(u,g);break;case 13:Po(u,g),m&4&&E5(u,g),m&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=PQ.bind(null,g),aZ(u,g))));break;case 22:if(m=g.memoizedState!==null||Ds,!m){f=f!==null&&f.memoizedState!==null||Gt,x=Ds;var E=Gt;Ds=m,(Gt=f)&&!E?Io(u,g,(g.subtreeFlags&8772)!==0):Po(u,g),Ds=x,Gt=E}break;case 30:break;default:Po(u,g)}}function x5(u){var f=u.alternate;f!==null&&(u.alternate=null,x5(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&NS(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Mt=null,Mi=!1;function ks(u,f,g){for(g=g.child;g!==null;)S5(u,f,g),g=g.sibling}function S5(u,f,g){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Zh,g)}catch{}switch(g.tag){case 26:Gt||Aa(g,f),ks(u,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Gt||Aa(g,f);var m=Mt,x=Mi;Vo(g.type)&&(Mt=g.stateNode,Mi=!1),ks(u,f,g),Bg(g.stateNode),Mt=m,Mi=x;break;case 5:Gt||Aa(g,f);case 6:if(m=Mt,x=Mi,Mt=null,ks(u,f,g),Mt=m,Mi=x,Mt!==null)if(Mi)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(g.stateNode)}catch(E){bt(g,f,E)}else try{Mt.removeChild(g.stateNode)}catch(E){bt(g,f,E)}break;case 18:Mt!==null&&(Mi?(u=Mt,l6(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),Xg(u)):l6(Mt,g.stateNode));break;case 4:m=Mt,x=Mi,Mt=g.stateNode.containerInfo,Mi=!0,ks(u,f,g),Mt=m,Mi=x;break;case 0:case 11:case 14:case 15:Gt||jo(2,g,f),Gt||jo(4,g,f),ks(u,f,g);break;case 1:Gt||(Aa(g,f),m=g.stateNode,typeof m.componentWillUnmount=="function"&&g5(g,f,m)),ks(u,f,g);break;case 21:ks(u,f,g);break;case 22:Gt=(m=Gt)||g.memoizedState!==null,ks(u,f,g),Gt=m;break;default:ks(u,f,g)}}function E5(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Xg(u)}catch(g){bt(f,f.return,g)}}function NQ(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new v5),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new v5),f;default:throw Error(i(435,u.tag))}}function tw(u,f){var g=NQ(u);f.forEach(function(m){var x=IQ.bind(null,u,m);g.has(m)||(g.add(m),m.then(x,x))})}function Xi(u,f){var g=f.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=u,C=f,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(Vo(k.type)){Mt=k.stateNode,Mi=!1;break e}break;case 5:Mt=k.stateNode,Mi=!1;break e;case 3:case 4:Mt=k.stateNode.containerInfo,Mi=!0;break e}k=k.return}if(Mt===null)throw Error(i(160));S5(E,C,x),Mt=null,Mi=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)w5(f,u),f=f.sibling}var Ir=null;function w5(u,f){var g=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Xi(f,u),Vi(u),m&4&&(jo(3,u,u.return),Tg(3,u),jo(5,u,u.return));break;case 1:Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),m&64&&Ds&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Ir;if(Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=u.memoizedState,g===null)if(m===null)if(u.stateNode===null){e:{m=u.type,g=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[eg]||E[Hn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Nn(E,m,g),E[Hn]=u,pn(E),m=E;break e;case"link":var C=y6("link","href",x).get(m+(g.href||""));if(C){for(var k=0;k<C.length;k++)if(E=C[k],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){C.splice(k,1);break t}}E=x.createElement(m),Nn(E,m,g),x.head.appendChild(E);break;case"meta":if(C=y6("meta","content",x).get(m+(g.content||""))){for(k=0;k<C.length;k++)if(E=C[k],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){C.splice(k,1);break t}}E=x.createElement(m),Nn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Hn]=u,pn(E),m=E}u.stateNode=m}else v6(x,u.type,u.stateNode);else u.stateNode=m6(x,m,u.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?v6(x,u.type,u.stateNode):m6(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&ZE(u,u.memoizedProps,g.memoizedProps)}break;case 27:Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),g!==null&&m&4&&ZE(u,u.memoizedProps,g.memoizedProps);break;case 5:if(Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),u.flags&32){x=u.stateNode;try{of(x,"")}catch(Z){bt(u,u.return,Z)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,ZE(u,x,g!==null?g.memoizedProps:x)),m&1024&&(ew=!0);break;case 6:if(Xi(f,u),Vi(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,g=u.stateNode;try{g.nodeValue=m}catch(Z){bt(u,u.return,Z)}}break;case 3:if(X1=null,x=Ir,Ir=G1(f.containerInfo),Xi(f,u),Ir=x,Vi(u),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Xg(f.containerInfo)}catch(Z){bt(u,u.return,Z)}ew&&(ew=!1,_5(u));break;case 4:m=Ir,Ir=G1(u.stateNode.containerInfo),Xi(f,u),Vi(u),Ir=m;break;case 12:Xi(f,u),Vi(u);break;case 13:Xi(f,u),Vi(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(ow=Kt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,tw(u,m)));break;case 22:x=u.memoizedState!==null;var j=g!==null&&g.memoizedState!==null,W=Ds,ne=Gt;if(Ds=W||x,Gt=ne||j,Xi(f,u),Gt=ne,Ds=W,Vi(u),m&8192)e:for(f=u.stateNode,f._visibility=x?f._visibility&-2:f._visibility|1,x&&(g===null||j||Ds||Gt||bl(u)),g=null,f=u;;){if(f.tag===5||f.tag===26){if(g===null){j=g=f;try{if(E=j.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=j.stateNode;var re=j.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){bt(j,j.return,Z)}}}else if(f.tag===6){if(g===null){j=f;try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(Z){bt(j,j.return,Z)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}m&4&&(m=u.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,tw(u,g))));break;case 19:Xi(f,u),Vi(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,tw(u,m)));break;case 30:break;case 21:break;default:Xi(f,u),Vi(u)}}function Vi(u){var f=u.flags;if(f&2){try{for(var g,m=u.return;m!==null;){if(m5(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=KE(u);O1(u,E,x);break;case 5:var C=g.stateNode;g.flags&32&&(of(C,""),g.flags&=-33);var k=KE(u);O1(u,k,C);break;case 3:case 4:var j=g.stateNode.containerInfo,W=KE(u);JE(u,W,j);break;default:throw Error(i(161))}}catch(ne){bt(u,u.return,ne)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function _5(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;_5(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Po(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)b5(u,f.alternate,f),f=f.sibling}function bl(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:jo(4,f,f.return),bl(f);break;case 1:Aa(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&g5(f,f.return,g),bl(f);break;case 27:Bg(f.stateNode);case 26:case 5:Aa(f,f.return),bl(f);break;case 22:f.memoizedState===null&&bl(f);break;case 30:bl(f);break;default:bl(f)}u=u.sibling}}function Io(u,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var m=f.alternate,x=u,E=f,C=E.flags;switch(E.tag){case 0:case 11:case 15:Io(x,E,g),Tg(4,E);break;case 1:if(Io(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){bt(m,m.return,W)}if(m=E,x=m.updateQueue,x!==null){var k=m.stateNode;try{var j=x.shared.hiddenCallbacks;if(j!==null)for(x.shared.hiddenCallbacks=null,x=0;x<j.length;x++)JN(j[x],k)}catch(W){bt(m,m.return,W)}}g&&C&64&&h5(E),Dg(E,E.return);break;case 27:y5(E);case 26:case 5:Io(x,E,g),g&&m===null&&C&4&&p5(E),Dg(E,E.return);break;case 12:Io(x,E,g);break;case 13:Io(x,E,g),g&&C&4&&E5(x,E);break;case 22:E.memoizedState===null&&Io(x,E,g),Dg(E,E.return);break;case 30:break;default:Io(x,E,g)}f=f.sibling}}function nw(u,f){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&pg(g))}function iw(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&pg(u))}function $a(u,f,g,m){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)A5(u,f,g,m),f=f.sibling}function A5(u,f,g,m){var x=f.flags;switch(f.tag){case 0:case 11:case 15:$a(u,f,g,m),x&2048&&Tg(9,f);break;case 1:$a(u,f,g,m);break;case 3:$a(u,f,g,m),x&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&pg(u)));break;case 12:if(x&2048){$a(u,f,g,m),u=f.stateNode;try{var E=f.memoizedProps,C=E.id,k=E.onPostCommit;typeof k=="function"&&k(C,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(j){bt(f,f.return,j)}}else $a(u,f,g,m);break;case 13:$a(u,f,g,m);break;case 23:break;case 22:E=f.stateNode,C=f.alternate,f.memoizedState!==null?E._visibility&2?$a(u,f,g,m):kg(u,f):E._visibility&2?$a(u,f,g,m):(E._visibility|=2,$f(u,f,g,m,(f.subtreeFlags&10256)!==0)),x&2048&&nw(C,f);break;case 24:$a(u,f,g,m),x&2048&&iw(f.alternate,f);break;default:$a(u,f,g,m)}}function $f(u,f,g,m,x){for(x=x&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var E=u,C=f,k=g,j=m,W=C.flags;switch(C.tag){case 0:case 11:case 15:$f(E,C,k,j,x),Tg(8,C);break;case 23:break;case 22:var ne=C.stateNode;C.memoizedState!==null?ne._visibility&2?$f(E,C,k,j,x):kg(E,C):(ne._visibility|=2,$f(E,C,k,j,x)),x&&W&2048&&nw(C.alternate,C);break;case 24:$f(E,C,k,j,x),x&&W&2048&&iw(C.alternate,C);break;default:$f(E,C,k,j,x)}f=f.sibling}}function kg(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=u,m=f,x=m.flags;switch(m.tag){case 22:kg(g,m),x&2048&&nw(m.alternate,m);break;case 24:kg(g,m),x&2048&&iw(m.alternate,m);break;default:kg(g,m)}f=f.sibling}}var Og=8192;function Mf(u){if(u.subtreeFlags&Og)for(u=u.child;u!==null;)$5(u),u=u.sibling}function $5(u){switch(u.tag){case 26:Mf(u),u.flags&Og&&u.memoizedState!==null&&vZ(Ir,u.memoizedState,u.memoizedProps);break;case 5:Mf(u);break;case 3:case 4:var f=Ir;Ir=G1(u.stateNode.containerInfo),Mf(u),Ir=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Og,Og=16777216,Mf(u),Og=f):Mf(u));break;default:Mf(u)}}function M5(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Ng(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];yn=m,T5(m,u)}M5(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)C5(u),u=u.sibling}function C5(u){switch(u.tag){case 0:case 11:case 15:Ng(u),u.flags&2048&&jo(9,u,u.return);break;case 3:Ng(u);break;case 12:Ng(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,N1(u)):Ng(u);break;default:Ng(u)}}function N1(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];yn=m,T5(m,u)}M5(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:jo(8,f,f.return),N1(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,N1(f));break;default:N1(f)}u=u.sibling}}function T5(u,f){for(;yn!==null;){var g=yn;switch(g.tag){case 0:case 11:case 15:jo(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:pg(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,yn=m;else e:for(g=u;yn!==null;){m=yn;var x=m.sibling,E=m.return;if(x5(m),m===g){yn=null;break e}if(x!==null){x.return=E,yn=x;break e}yn=E}}}var RQ={getCacheForType:function(u){var f=Gn(an),g=f.data.get(u);return g===void 0&&(g=u(),f.data.set(u,g)),g}},zQ=typeof WeakMap=="function"?WeakMap:Map,lt=0,Et=null,He=null,Ve=0,ct=0,Wi=null,qo=!1,Cf=!1,rw=!1,Os=0,Lt=0,Ho=0,xl=0,aw=0,Sr=0,Tf=0,Rg=null,Ci=null,sw=!1,ow=0,R1=1/0,z1=null,Go=null,On=0,Yo=null,Df=null,kf=0,uw=0,lw=null,D5=null,zg=0,cw=null;function Qi(){if((lt&2)!==0&&Ve!==0)return Ve&-Ve;if(N.T!==null){var u=vf;return u!==0?u:yw()}return YO()}function k5(){Sr===0&&(Sr=(Ve&536870912)===0||at?IO():536870912);var u=xr.current;return u!==null&&(u.flags|=32),Sr}function Zi(u,f,g){(u===Et&&(ct===2||ct===9)||u.cancelPendingCommit!==null)&&(Of(u,0),Xo(u,Ve,Sr,!1)),Jh(u,g),((lt&2)===0||u!==Et)&&(u===Et&&((lt&2)===0&&(xl|=g),Lt===4&&Xo(u,Ve,Sr,!1)),Ma(u))}function O5(u,f,g){if((lt&6)!==0)throw Error(i(327));var m=!g&&(f&124)===0&&(f&u.expiredLanes)===0||Kh(u,f),x=m?UQ(u,f):hw(u,f,!0),E=m;do{if(x===0){Cf&&!m&&Xo(u,f,0,!1);break}else{if(g=u.current.alternate,E&&!FQ(g)){x=hw(u,f,!1),E=!1;continue}if(x===2){if(E=f,u.errorRecoveryDisabledLanes&E)var C=0;else C=u.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){f=C;e:{var k=u;x=Rg;var j=k.current.memoizedState.isDehydrated;if(j&&(Of(k,C).flags|=256),C=hw(k,C,!1),C!==2){if(rw&&!j){k.errorRecoveryDisabledLanes|=E,xl|=E,x=4;break e}E=Ci,Ci=x,E!==null&&(Ci===null?Ci=E:Ci.push.apply(Ci,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){Of(u,0),Xo(u,f,0,!0);break}e:{switch(m=u,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:Xo(m,f,Sr,!qo);break e;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(x=ow+300-Kt(),10<x)){if(Xo(m,f,Sr,!qo),Ym(m,0,!0)!==0)break e;m.timeoutHandle=o6(N5.bind(null,m,g,Ci,z1,sw,f,Sr,xl,Tf,qo,E,2,-0,0),x);break e}N5(m,g,Ci,z1,sw,f,Sr,xl,Tf,qo,E,0,-0,0)}}break}while(!0);Ma(u)}function N5(u,f,g,m,x,E,C,k,j,W,ne,re,Q,Z){if(u.timeoutHandle=-1,re=f.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Ig={stylesheets:null,count:0,unsuspend:yZ},$5(f),re=bZ(),re!==null)){u.cancelPendingCommit=re(j5.bind(null,u,f,E,g,m,x,C,k,j,ne,1,Q,Z)),Xo(u,E,C,!W);return}j5(u,f,E,g,m,x,C,k,j)}function FQ(u){for(var f=u;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!Gi(E(),x))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Xo(u,f,g,m){f&=~aw,f&=~xl,u.suspendedLanes|=f,u.pingedLanes&=~f,m&&(u.warmLanes|=f),m=u.expirationTimes;for(var x=f;0<x;){var E=31-Hi(x),C=1<<E;m[E]=-1,x&=~C}g!==0&&HO(u,g,f)}function F1(){return(lt&6)===0?(Fg(0),!1):!0}function fw(){if(He!==null){if(ct===0)var u=He.return;else u=He,_s=gl=null,CE(u),_f=null,$g=0,u=He;for(;u!==null;)d5(u.alternate,u),u=u.return;He=null}}function Of(u,f){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,eZ(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),fw(),Et=u,He=g=Ss(u.current,null),Ve=f,ct=0,Wi=null,qo=!1,Cf=Kh(u,f),rw=!1,Tf=Sr=aw=xl=Ho=Lt=0,Ci=Rg=null,sw=!1,(f&8)!==0&&(f|=f&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=f;0<m;){var x=31-Hi(m),E=1<<x;f|=u[x],m&=~E}return Os=f,r1(),g}function R5(u,f){Be=null,N.H=w1,f===yg||f===h1?(f=ZN(),ct=3):f===VN?(f=ZN(),ct=4):ct=f===KR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Wi=f,He===null&&(Lt=1,C1(u,mr(f,u.current)))}function z5(){var u=N.H;return N.H=w1,u===null?w1:u}function F5(){var u=N.A;return N.A=RQ,u}function dw(){Lt=4,qo||(Ve&4194048)!==Ve&&xr.current!==null||(Cf=!0),(Ho&134217727)===0&&(xl&134217727)===0||Et===null||Xo(Et,Ve,Sr,!1)}function hw(u,f,g){var m=lt;lt|=2;var x=z5(),E=F5();(Et!==u||Ve!==f)&&(z1=null,Of(u,f)),f=!1;var C=Lt;e:do try{if(ct!==0&&He!==null){var k=He,j=Wi;switch(ct){case 8:fw(),C=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(f=!0);var W=ct;if(ct=0,Wi=null,Nf(u,k,j,W),g&&Cf){C=0;break e}break;default:W=ct,ct=0,Wi=null,Nf(u,k,j,W)}}LQ(),C=Lt;break}catch(ne){R5(u,ne)}while(!0);return f&&u.shellSuspendCounter++,_s=gl=null,lt=m,N.H=x,N.A=E,He===null&&(Et=null,Ve=0,r1()),C}function LQ(){for(;He!==null;)L5(He)}function UQ(u,f){var g=lt;lt|=2;var m=z5(),x=F5();Et!==u||Ve!==f?(z1=null,R1=Kt()+500,Of(u,f)):Cf=Kh(u,f);e:do try{if(ct!==0&&He!==null){f=He;var E=Wi;t:switch(ct){case 1:ct=0,Wi=null,Nf(u,f,E,1);break;case 2:case 9:if(WN(E)){ct=0,Wi=null,U5(f);break}f=function(){ct!==2&&ct!==9||Et!==u||(ct=7),Ma(u)},E.then(f,f);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:WN(E)?(ct=0,Wi=null,U5(f)):(ct=0,Wi=null,Nf(u,f,E,7));break;case 5:var C=null;switch(He.tag){case 26:C=He.memoizedState;case 5:case 27:var k=He;if(!C||b6(C)){ct=0,Wi=null;var j=k.sibling;if(j!==null)He=j;else{var W=k.return;W!==null?(He=W,L1(W)):He=null}break t}}ct=0,Wi=null,Nf(u,f,E,5);break;case 6:ct=0,Wi=null,Nf(u,f,E,6);break;case 8:fw(),Lt=6;break e;default:throw Error(i(462))}}BQ();break}catch(ne){R5(u,ne)}while(!0);return _s=gl=null,N.H=m,N.A=x,lt=g,He!==null?0:(Et=null,Ve=0,r1(),Lt)}function BQ(){for(;He!==null&&!Zt();)L5(He)}function L5(u){var f=c5(u.alternate,u,Os);u.memoizedProps=u.pendingProps,f===null?L1(u):He=f}function U5(u){var f=u,g=f.alternate;switch(f.tag){case 15:case 0:f=r5(g,f,f.pendingProps,f.type,void 0,Ve);break;case 11:f=r5(g,f,f.pendingProps,f.type.render,f.ref,Ve);break;case 5:CE(f);default:d5(g,f),f=He=BN(f,Os),f=c5(g,f,Os)}u.memoizedProps=u.pendingProps,f===null?L1(u):He=f}function Nf(u,f,g,m){_s=gl=null,CE(f),_f=null,$g=0;var x=f.return;try{if(CQ(u,x,f,g,Ve)){Lt=1,C1(u,mr(g,u.current)),He=null;return}}catch(E){if(x!==null)throw He=x,E;Lt=1,C1(u,mr(g,u.current)),He=null;return}f.flags&32768?(at||m===1?u=!0:Cf||(Ve&536870912)!==0?u=!1:(qo=u=!0,(m===2||m===9||m===3||m===6)&&(m=xr.current,m!==null&&m.tag===13&&(m.flags|=16384))),B5(f,u)):L1(f)}function L1(u){var f=u;do{if((f.flags&32768)!==0){B5(f,qo);return}u=f.return;var g=DQ(f.alternate,f,Os);if(g!==null){He=g;return}if(f=f.sibling,f!==null){He=f;return}He=f=u}while(f!==null);Lt===0&&(Lt=5)}function B5(u,f){do{var g=kQ(u.alternate,u);if(g!==null){g.flags&=32767,He=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(u=u.sibling,u!==null)){He=u;return}He=u=g}while(u!==null);Lt=6,He=null}function j5(u,f,g,m,x,E,C,k,j){u.cancelPendingCommit=null;do U1();while(On!==0);if((lt&6)!==0)throw Error(i(327));if(f!==null){if(f===u.current)throw Error(i(177));if(E=f.lanes|f.childLanes,E|=iE,yW(u,g,E,C,k,j),u===Et&&(He=Et=null,Ve=0),Df=f,Yo=u,kf=g,uw=E,lw=x,D5=m,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,qQ(qm,function(){return G5(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||m){m=N.T,N.T=null,x=I.p,I.p=2,C=lt,lt|=4;try{OQ(u,f,g)}finally{lt=C,I.p=x,N.T=m}}On=1,P5(),I5(),q5()}}function P5(){if(On===1){On=0;var u=Yo,f=Df,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=N.T,N.T=null;var m=I.p;I.p=2;var x=lt;lt|=4;try{w5(f,u);var E=Aw,C=TN(u.containerInfo),k=E.focusedElem,j=E.selectionRange;if(C!==k&&k&&k.ownerDocument&&CN(k.ownerDocument.documentElement,k)){if(j!==null&&KS(k)){var W=j.start,ne=j.end;if(ne===void 0&&(ne=W),"selectionStart"in k)k.selectionStart=W,k.selectionEnd=Math.min(ne,k.value.length);else{var re=k.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Te=k.textContent.length,Me=Math.min(j.start,Te),mt=j.end===void 0?Me:Math.min(j.end,Te);!Z.extend&&Me>mt&&(C=mt,mt=Me,Me=C);var G=MN(k,Me),q=MN(k,mt);if(G&&q&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==q.node||Z.focusOffset!==q.offset)){var X=re.createRange();X.setStart(G.node,G.offset),Z.removeAllRanges(),Me>mt?(Z.addRange(X),Z.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),Z.addRange(X))}}}}for(re=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<re.length;k++){var ie=re[k];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Q1=!!_w,Aw=_w=null}finally{lt=x,I.p=m,N.T=g}}u.current=f,On=2}}function I5(){if(On===2){On=0;var u=Yo,f=Df,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=N.T,N.T=null;var m=I.p;I.p=2;var x=lt;lt|=4;try{b5(u,f.alternate,f)}finally{lt=x,I.p=m,N.T=g}}On=3}}function q5(){if(On===4||On===3){On=0,gn();var u=Yo,f=Df,g=kf,m=D5;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?On=5:(On=0,Df=Yo=null,H5(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(Go=null),kS(g),f=f.stateNode,qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Zh,f,void 0,(f.current.flags&128)===128)}catch{}if(m!==null){f=N.T,x=I.p,I.p=2,N.T=null;try{for(var E=u.onRecoverableError,C=0;C<m.length;C++){var k=m[C];E(k.value,{componentStack:k.stack})}}finally{N.T=f,I.p=x}}(kf&3)!==0&&U1(),Ma(u),x=u.pendingLanes,(g&4194090)!==0&&(x&42)!==0?u===cw?zg++:(zg=0,cw=u):zg=0,Fg(0)}}function H5(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,pg(f)))}function U1(u){return P5(),I5(),q5(),G5()}function G5(){if(On!==5)return!1;var u=Yo,f=uw;uw=0;var g=kS(kf),m=N.T,x=I.p;try{I.p=32>g?32:g,N.T=null,g=lw,lw=null;var E=Yo,C=kf;if(On=0,Df=Yo=null,kf=0,(lt&6)!==0)throw Error(i(331));var k=lt;if(lt|=4,C5(E.current),A5(E,E.current,C,g),lt=k,Fg(0,!1),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Zh,E)}catch{}return!0}finally{I.p=x,N.T=m,H5(u,f)}}function Y5(u,f,g){f=mr(g,f),f=IE(u.stateNode,f,2),u=Fo(u,f,2),u!==null&&(Jh(u,2),Ma(u))}function bt(u,f,g){if(u.tag===3)Y5(u,u,g);else for(;f!==null;){if(f.tag===3){Y5(f,u,g);break}else if(f.tag===1){var m=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Go===null||!Go.has(m))){u=mr(g,u),g=QR(2),m=Fo(f,g,2),m!==null&&(ZR(g,m,f,u),Jh(m,2),Ma(m));break}}f=f.return}}function gw(u,f,g){var m=u.pingCache;if(m===null){m=u.pingCache=new zQ;var x=new Set;m.set(f,x)}else x=m.get(f),x===void 0&&(x=new Set,m.set(f,x));x.has(g)||(rw=!0,x.add(g),u=jQ.bind(null,u,f,g),f.then(u,u))}function jQ(u,f,g){var m=u.pingCache;m!==null&&m.delete(f),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Et===u&&(Ve&g)===g&&(Lt===4||Lt===3&&(Ve&62914560)===Ve&&300>Kt()-ow?(lt&2)===0&&Of(u,0):aw|=g,Tf===Ve&&(Tf=0)),Ma(u)}function X5(u,f){f===0&&(f=qO()),u=gf(u,f),u!==null&&(Jh(u,f),Ma(u))}function PQ(u){var f=u.memoizedState,g=0;f!==null&&(g=f.retryLane),X5(u,g)}function IQ(u,f){var g=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(f),X5(u,g)}function qQ(u,f){return qt(u,f)}var B1=null,Rf=null,pw=!1,j1=!1,mw=!1,Sl=0;function Ma(u){u!==Rf&&u.next===null&&(Rf===null?B1=Rf=u:Rf=Rf.next=u),j1=!0,pw||(pw=!0,GQ())}function Fg(u,f){if(!mw&&j1){mw=!0;do for(var g=!1,m=B1;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,k=m.pingedLanes;E=(1<<31-Hi(42|u)+1)-1,E&=x&~(C&~k),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,Z5(m,E))}else E=Ve,E=Ym(m,m===Et?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Kh(m,E)||(g=!0,Z5(m,E));m=m.next}while(g);mw=!1}}function HQ(){V5()}function V5(){j1=pw=!1;var u=0;Sl!==0&&(JQ()&&(u=Sl),Sl=0);for(var f=Kt(),g=null,m=B1;m!==null;){var x=m.next,E=W5(m,f);E===0?(m.next=null,g===null?B1=x:g.next=x,x===null&&(Rf=g)):(g=m,(u!==0||(E&3)!==0)&&(j1=!0)),m=x}Fg(u)}function W5(u,f){for(var g=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var C=31-Hi(E),k=1<<C,j=x[C];j===-1?((k&g)===0||(k&m)!==0)&&(x[C]=mW(k,f)):j<=f&&(u.expiredLanes|=k),E&=~k}if(f=Et,g=Ve,g=Ym(u,u===f?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,g===0||u===f&&(ct===2||ct===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&Ze(m),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||Kh(u,g)){if(f=g&-g,f===u.callbackPriority)return f;switch(m!==null&&Ze(m),kS(g)){case 2:case 8:g=jO;break;case 32:g=qm;break;case 268435456:g=PO;break;default:g=qm}return m=Q5.bind(null,u),g=qt(g,m),u.callbackPriority=f,u.callbackNode=g,f}return m!==null&&m!==null&&Ze(m),u.callbackPriority=2,u.callbackNode=null,2}function Q5(u,f){if(On!==0&&On!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(U1()&&u.callbackNode!==g)return null;var m=Ve;return m=Ym(u,u===Et?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(O5(u,m,f),W5(u,Kt()),u.callbackNode!=null&&u.callbackNode===g?Q5.bind(null,u):null)}function Z5(u,f){if(U1())return null;O5(u,f,!0)}function GQ(){tZ(function(){(lt&6)!==0?qt(BO,HQ):V5()})}function yw(){return Sl===0&&(Sl=IO()),Sl}function K5(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Zm(""+u)}function J5(u,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,u.id&&g.setAttribute("form",u.id),f.parentNode.insertBefore(g,f),u=new FormData(u),g.parentNode.removeChild(g),u}function YQ(u,f,g,m,x){if(f==="submit"&&g&&g.stateNode===x){var E=K5((x[_i]||null).action),C=m.submitter;C&&(f=(f=C[_i]||null)?K5(f.formAction):C.getAttribute("formAction"),f!==null&&(E=f,C=null));var k=new t1("action","action",null,m,x);u.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Sl!==0){var j=C?J5(x,C):new FormData(x);LE(g,{pending:!0,data:j,method:x.method,action:E},null,j)}}else typeof E=="function"&&(k.preventDefault(),j=C?J5(x,C):new FormData(x),LE(g,{pending:!0,data:j,method:x.method,action:E},E,j))},currentTarget:x}]})}}for(var vw=0;vw<nE.length;vw++){var bw=nE[vw],XQ=bw.toLowerCase(),VQ=bw[0].toUpperCase()+bw.slice(1);Pr(XQ,"on"+VQ)}Pr(ON,"onAnimationEnd"),Pr(NN,"onAnimationIteration"),Pr(RN,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(fQ,"onTransitionRun"),Pr(dQ,"onTransitionStart"),Pr(hQ,"onTransitionCancel"),Pr(zN,"onTransitionEnd"),rf("onMouseEnter",["mouseout","mouseover"]),rf("onMouseLeave",["mouseout","mouseover"]),rf("onPointerEnter",["pointerout","pointerover"]),rf("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lg));function e6(u,f){f=(f&4)!==0;for(var g=0;g<u.length;g++){var m=u[g],x=m.event;m=m.listeners;e:{var E=void 0;if(f)for(var C=m.length-1;0<=C;C--){var k=m[C],j=k.instance,W=k.currentTarget;if(k=k.listener,j!==E&&x.isPropagationStopped())break e;E=k,x.currentTarget=W;try{E(x)}catch(ne){M1(ne)}x.currentTarget=null,E=j}else for(C=0;C<m.length;C++){if(k=m[C],j=k.instance,W=k.currentTarget,k=k.listener,j!==E&&x.isPropagationStopped())break e;E=k,x.currentTarget=W;try{E(x)}catch(ne){M1(ne)}x.currentTarget=null,E=j}}}}function Ge(u,f){var g=f[OS];g===void 0&&(g=f[OS]=new Set);var m=u+"__bubble";g.has(m)||(t6(f,u,2,!1),g.add(m))}function xw(u,f,g){var m=0;f&&(m|=4),t6(g,u,m,f)}var P1="_reactListening"+Math.random().toString(36).slice(2);function Sw(u){if(!u[P1]){u[P1]=!0,VO.forEach(function(g){g!=="selectionchange"&&(WQ.has(g)||xw(g,!1,u),xw(g,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[P1]||(f[P1]=!0,xw("selectionchange",!1,f))}}function t6(u,f,g,m){switch(A6(f)){case 2:var x=EZ;break;case 8:x=wZ;break;default:x=zw}g=x.bind(null,f,g,u),x=void 0,!qS||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(f,g,{capture:!0,passive:x}):u.addEventListener(f,g,!0):x!==void 0?u.addEventListener(f,g,{passive:x}):u.addEventListener(f,g,!1)}function Ew(u,f,g,m,x){var E=m;if((f&1)===0&&(f&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var k=m.stateNode.containerInfo;if(k===x)break;if(C===4)for(C=m.return;C!==null;){var j=C.tag;if((j===3||j===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;k!==null;){if(C=ef(k),C===null)return;if(j=C.tag,j===5||j===6||j===26||j===27){m=E=C;continue e}k=k.parentNode}}m=m.return}uN(function(){var W=E,ne=PS(g),re=[];e:{var Q=FN.get(u);if(Q!==void 0){var Z=t1,Te=u;switch(u){case"keypress":if(Jm(g)===0)break e;case"keydown":case"keyup":Z=qW;break;case"focusin":Te="focus",Z=XS;break;case"focusout":Te="blur",Z=XS;break;case"beforeblur":case"afterblur":Z=XS;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=fN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=kW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=YW;break;case ON:case NN:case RN:Z=RW;break;case zN:Z=VW;break;case"scroll":case"scrollend":Z=TW;break;case"wheel":Z=QW;break;case"copy":case"cut":case"paste":Z=FW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=hN;break;case"toggle":case"beforetoggle":Z=KW}var Me=(f&4)!==0,mt=!Me&&(u==="scroll"||u==="scrollend"),G=Me?Q!==null?Q+"Capture":null:Q;Me=[];for(var q=W,X;q!==null;){var ie=q;if(X=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||X===null||G===null||(ie=ng(q,G),ie!=null&&Me.push(Ug(q,ie,X))),mt)break;q=q.return}0<Me.length&&(Q=new Z(Q,Te,null,g,ne),re.push({event:Q,listeners:Me}))}}if((f&7)===0){e:{if(Q=u==="mouseover"||u==="pointerover",Z=u==="mouseout"||u==="pointerout",Q&&g!==jS&&(Te=g.relatedTarget||g.fromElement)&&(ef(Te)||Te[Jc]))break e;if((Z||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Te=g.relatedTarget||g.toElement,Z=W,Te=Te?ef(Te):null,Te!==null&&(mt=a(Te),Me=Te.tag,Te!==mt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(Z=null,Te=W),Z!==Te)){if(Me=fN,ie="onMouseLeave",G="onMouseEnter",q="mouse",(u==="pointerout"||u==="pointerover")&&(Me=hN,ie="onPointerLeave",G="onPointerEnter",q="pointer"),mt=Z==null?Q:tg(Z),X=Te==null?Q:tg(Te),Q=new Me(ie,q+"leave",Z,g,ne),Q.target=mt,Q.relatedTarget=X,ie=null,ef(ne)===W&&(Me=new Me(G,q+"enter",Te,g,ne),Me.target=X,Me.relatedTarget=mt,ie=Me),mt=ie,Z&&Te)t:{for(Me=Z,G=Te,q=0,X=Me;X;X=zf(X))q++;for(X=0,ie=G;ie;ie=zf(ie))X++;for(;0<q-X;)Me=zf(Me),q--;for(;0<X-q;)G=zf(G),X--;for(;q--;){if(Me===G||G!==null&&Me===G.alternate)break t;Me=zf(Me),G=zf(G)}Me=null}else Me=null;Z!==null&&n6(re,Q,Z,Me,!1),Te!==null&&mt!==null&&n6(re,mt,Te,Me,!0)}}e:{if(Q=W?tg(W):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var pe=SN;else if(bN(Q))if(EN)pe=uQ;else{pe=sQ;var Pe=aQ}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&BS(W.elementType)&&(pe=SN):pe=oQ;if(pe&&(pe=pe(u,W))){xN(re,pe,g,ne);break e}Pe&&Pe(u,Q,W),u==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&US(Q,"number",Q.value)}switch(Pe=W?tg(W):window,u){case"focusin":(bN(Pe)||Pe.contentEditable==="true")&&(ff=Pe,JS=W,cg=null);break;case"focusout":cg=JS=ff=null;break;case"mousedown":eE=!0;break;case"contextmenu":case"mouseup":case"dragend":eE=!1,DN(re,g,ne);break;case"selectionchange":if(cQ)break;case"keydown":case"keyup":DN(re,g,ne)}var xe;if(WS)e:{switch(u){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else cf?yN(u,g)&&(Ce="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Ce="onCompositionStart");Ce&&(gN&&g.locale!=="ko"&&(cf||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&cf&&(xe=lN()):(Oo=ne,HS="value"in Oo?Oo.value:Oo.textContent,cf=!0)),Pe=I1(W,Ce),0<Pe.length&&(Ce=new dN(Ce,u,null,g,ne),re.push({event:Ce,listeners:Pe}),xe?Ce.data=xe:(xe=vN(g),xe!==null&&(Ce.data=xe)))),(xe=eQ?tQ(u,g):nQ(u,g))&&(Ce=I1(W,"onBeforeInput"),0<Ce.length&&(Pe=new dN("onBeforeInput","beforeinput",null,g,ne),re.push({event:Pe,listeners:Ce}),Pe.data=xe)),YQ(re,u,W,g,ne)}e6(re,f)})}function Ug(u,f,g){return{instance:u,listener:f,currentTarget:g}}function I1(u,f){for(var g=f+"Capture",m=[];u!==null;){var x=u,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=ng(u,g),x!=null&&m.unshift(Ug(u,x,E)),x=ng(u,f),x!=null&&m.push(Ug(u,x,E))),u.tag===3)return m;u=u.return}return[]}function zf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function n6(u,f,g,m,x){for(var E=f._reactName,C=[];g!==null&&g!==m;){var k=g,j=k.alternate,W=k.stateNode;if(k=k.tag,j!==null&&j===m)break;k!==5&&k!==26&&k!==27||W===null||(j=W,x?(W=ng(g,E),W!=null&&C.unshift(Ug(g,W,j))):x||(W=ng(g,E),W!=null&&C.push(Ug(g,W,j)))),g=g.return}C.length!==0&&u.push({event:f,listeners:C})}var QQ=/\r\n?/g,ZQ=/\u0000|\uFFFD/g;function i6(u){return(typeof u=="string"?u:""+u).replace(QQ,`
`).replace(ZQ,"")}function r6(u,f){return f=i6(f),i6(u)===f}function q1(){}function pt(u,f,g,m,x,E){switch(g){case"children":typeof m=="string"?f==="body"||f==="textarea"&&m===""||of(u,m):(typeof m=="number"||typeof m=="bigint")&&f!=="body"&&of(u,""+m);break;case"className":Vm(u,"class",m);break;case"tabIndex":Vm(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Vm(u,g,m);break;case"style":sN(u,m,E);break;case"data":if(f!=="object"){Vm(u,"data",m);break}case"src":case"href":if(m===""&&(f!=="a"||g!=="href")){u.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=Zm(""+m),u.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(f!=="input"&&pt(u,f,"name",x.name,x,null),pt(u,f,"formEncType",x.formEncType,x,null),pt(u,f,"formMethod",x.formMethod,x,null),pt(u,f,"formTarget",x.formTarget,x,null)):(pt(u,f,"encType",x.encType,x,null),pt(u,f,"method",x.method,x,null),pt(u,f,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=Zm(""+m),u.setAttribute(g,m);break;case"onClick":m!=null&&(u.onclick=q1);break;case"onScroll":m!=null&&Ge("scroll",u);break;case"onScrollEnd":m!=null&&Ge("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}g=Zm(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""+m):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":m===!0?u.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,m):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(g,m):u.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(g):u.setAttribute(g,m);break;case"popover":Ge("beforetoggle",u),Ge("toggle",u),Xm(u,"popover",m);break;case"xlinkActuate":bs(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":bs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":bs(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":bs(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":bs(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":bs(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":bs(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":bs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":bs(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Xm(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=MW.get(g)||g,Xm(u,g,m))}}function ww(u,f,g,m,x,E){switch(g){case"style":sN(u,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof m=="string"?of(u,m):(typeof m=="number"||typeof m=="bigint")&&of(u,""+m);break;case"onScroll":m!=null&&Ge("scroll",u);break;case"onScrollEnd":m!=null&&Ge("scrollend",u);break;case"onClick":m!=null&&(u.onclick=q1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!WO.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),f=g.slice(2,x?g.length-7:void 0),E=u[_i]||null,E=E!=null?E[g]:null,typeof E=="function"&&u.removeEventListener(f,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(f,m,x);break e}g in u?u[g]=m:m===!0?u.setAttribute(g,""):Xm(u,g,m)}}}function Nn(u,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",u),Ge("load",u);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var C=g[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:pt(u,f,E,C,g,null)}}x&&pt(u,f,"srcSet",g.srcSet,g,null),m&&pt(u,f,"src",g.src,g,null);return;case"input":Ge("invalid",u);var k=E=C=x=null,j=null,W=null;for(m in g)if(g.hasOwnProperty(m)){var ne=g[m];if(ne!=null)switch(m){case"name":x=ne;break;case"type":C=ne;break;case"checked":j=ne;break;case"defaultChecked":W=ne;break;case"value":E=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,f));break;default:pt(u,f,m,ne,g,null)}}nN(u,E,k,j,W,C,x,!1),Wm(u);return;case"select":Ge("invalid",u),m=C=E=null;for(x in g)if(g.hasOwnProperty(x)&&(k=g[x],k!=null))switch(x){case"value":E=k;break;case"defaultValue":C=k;break;case"multiple":m=k;default:pt(u,f,x,k,g,null)}f=E,g=C,u.multiple=!!m,f!=null?sf(u,!!m,f,!1):g!=null&&sf(u,!!m,g,!0);return;case"textarea":Ge("invalid",u),E=x=m=null;for(C in g)if(g.hasOwnProperty(C)&&(k=g[C],k!=null))switch(C){case"value":m=k;break;case"defaultValue":x=k;break;case"children":E=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:pt(u,f,C,k,g,null)}rN(u,m,x,E),Wm(u);return;case"option":for(j in g)if(g.hasOwnProperty(j)&&(m=g[j],m!=null))switch(j){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(u,f,j,m,g,null)}return;case"dialog":Ge("beforetoggle",u),Ge("toggle",u),Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":Ge("load",u);break;case"video":case"audio":for(m=0;m<Lg.length;m++)Ge(Lg[m],u);break;case"image":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"embed":case"source":case"link":Ge("error",u),Ge("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in g)if(g.hasOwnProperty(W)&&(m=g[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:pt(u,f,W,m,g,null)}return;default:if(BS(f)){for(ne in g)g.hasOwnProperty(ne)&&(m=g[ne],m!==void 0&&ww(u,f,ne,m,g,void 0));return}}for(k in g)g.hasOwnProperty(k)&&(m=g[k],m!=null&&pt(u,f,k,m,g,null))}function KQ(u,f,g,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,k=null,j=null,W=null,ne=null;for(Z in g){var re=g[Z];if(g.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=re;default:m.hasOwnProperty(Z)||pt(u,f,Z,null,m,re)}}for(var Q in m){var Z=m[Q];if(re=g[Q],m.hasOwnProperty(Q)&&(Z!=null||re!=null))switch(Q){case"type":E=Z;break;case"name":x=Z;break;case"checked":W=Z;break;case"defaultChecked":ne=Z;break;case"value":C=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,f));break;default:Z!==re&&pt(u,f,Q,Z,m,re)}}LS(u,C,k,j,W,ne,E,x);return;case"select":Z=C=k=Q=null;for(E in g)if(j=g[E],g.hasOwnProperty(E)&&j!=null)switch(E){case"value":break;case"multiple":Z=j;default:m.hasOwnProperty(E)||pt(u,f,E,null,m,j)}for(x in m)if(E=m[x],j=g[x],m.hasOwnProperty(x)&&(E!=null||j!=null))switch(x){case"value":Q=E;break;case"defaultValue":k=E;break;case"multiple":C=E;default:E!==j&&pt(u,f,x,E,m,j)}f=k,g=C,m=Z,Q!=null?sf(u,!!g,Q,!1):!!m!=!!g&&(f!=null?sf(u,!!g,f,!0):sf(u,!!g,g?[]:"",!1));return;case"textarea":Z=Q=null;for(k in g)if(x=g[k],g.hasOwnProperty(k)&&x!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:pt(u,f,k,null,m,x)}for(C in m)if(x=m[C],E=g[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&pt(u,f,C,x,m,E)}iN(u,Q,Z);return;case"option":for(var Te in g)if(Q=g[Te],g.hasOwnProperty(Te)&&Q!=null&&!m.hasOwnProperty(Te))switch(Te){case"selected":u.selected=!1;break;default:pt(u,f,Te,null,m,Q)}for(j in m)if(Q=m[j],Z=g[j],m.hasOwnProperty(j)&&Q!==Z&&(Q!=null||Z!=null))switch(j){case"selected":u.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:pt(u,f,j,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in g)Q=g[Me],g.hasOwnProperty(Me)&&Q!=null&&!m.hasOwnProperty(Me)&&pt(u,f,Me,null,m,Q);for(W in m)if(Q=m[W],Z=g[W],m.hasOwnProperty(W)&&Q!==Z&&(Q!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,f));break;default:pt(u,f,W,Q,m,Z)}return;default:if(BS(f)){for(var mt in g)Q=g[mt],g.hasOwnProperty(mt)&&Q!==void 0&&!m.hasOwnProperty(mt)&&ww(u,f,mt,void 0,m,Q);for(ne in m)Q=m[ne],Z=g[ne],!m.hasOwnProperty(ne)||Q===Z||Q===void 0&&Z===void 0||ww(u,f,ne,Q,m,Z);return}}for(var G in g)Q=g[G],g.hasOwnProperty(G)&&Q!=null&&!m.hasOwnProperty(G)&&pt(u,f,G,null,m,Q);for(re in m)Q=m[re],Z=g[re],!m.hasOwnProperty(re)||Q===Z||Q==null&&Z==null||pt(u,f,re,Q,m,Z)}var _w=null,Aw=null;function H1(u){return u.nodeType===9?u:u.ownerDocument}function a6(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s6(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function $w(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Mw=null;function JQ(){var u=window.event;return u&&u.type==="popstate"?u===Mw?!1:(Mw=u,!0):(Mw=null,!1)}var o6=typeof setTimeout=="function"?setTimeout:void 0,eZ=typeof clearTimeout=="function"?clearTimeout:void 0,u6=typeof Promise=="function"?Promise:void 0,tZ=typeof queueMicrotask=="function"?queueMicrotask:typeof u6<"u"?function(u){return u6.resolve(null).then(u).catch(nZ)}:o6;function nZ(u){setTimeout(function(){throw u})}function Vo(u){return u==="head"}function l6(u,f){var g=f,m=0,x=0;do{var E=g.nextSibling;if(u.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var C=u.ownerDocument;if(g&1&&Bg(C.documentElement),g&2&&Bg(C.body),g&4)for(g=C.head,Bg(g),C=g.firstChild;C;){var k=C.nextSibling,j=C.nodeName;C[eg]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&C.rel.toLowerCase()==="stylesheet"||g.removeChild(C),C=k}}if(x===0){u.removeChild(E),Xg(f);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);Xg(f)}function Cw(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Cw(g),NS(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function iZ(u,f,g,m){for(;u.nodeType===1;){var x=g;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[eg])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=qr(u.nextSibling),u===null)break}return null}function rZ(u,f,g){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=qr(u.nextSibling),u===null))return null;return u}function Tw(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function aZ(u,f){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")f();else{var m=function(){f(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function qr(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var Dw=null;function c6(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return u;f--}else g==="/$"&&f++}u=u.previousSibling}return null}function f6(u,f,g){switch(f=H1(g),u){case"html":if(u=f.documentElement,!u)throw Error(i(452));return u;case"head":if(u=f.head,!u)throw Error(i(453));return u;case"body":if(u=f.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Bg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);NS(u)}var Er=new Map,d6=new Set;function G1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ns=I.d;I.d={f:sZ,r:oZ,D:uZ,C:lZ,L:cZ,m:fZ,X:hZ,S:dZ,M:gZ};function sZ(){var u=Ns.f(),f=F1();return u||f}function oZ(u){var f=tf(u);f!==null&&f.tag===5&&f.type==="form"?OR(f):Ns.r(u)}var Ff=typeof document>"u"?null:document;function h6(u,f,g){var m=Ff;if(m&&typeof f=="string"&&f){var x=pr(f);x='link[rel="'+u+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),d6.has(x)||(d6.add(x),u={rel:u,crossOrigin:g,href:f},m.querySelector(x)===null&&(f=m.createElement("link"),Nn(f,"link",u),pn(f),m.head.appendChild(f)))}}function uZ(u){Ns.D(u),h6("dns-prefetch",u,null)}function lZ(u,f){Ns.C(u,f),h6("preconnect",u,f)}function cZ(u,f,g){Ns.L(u,f,g);var m=Ff;if(m&&u&&f){var x='link[rel="preload"][as="'+pr(f)+'"]';f==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+pr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+pr(g.imageSizes)+'"]')):x+='[href="'+pr(u)+'"]';var E=x;switch(f){case"style":E=Lf(u);break;case"script":E=Uf(u)}Er.has(E)||(u=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:u,as:f},g),Er.set(E,u),m.querySelector(x)!==null||f==="style"&&m.querySelector(jg(E))||f==="script"&&m.querySelector(Pg(E))||(f=m.createElement("link"),Nn(f,"link",u),pn(f),m.head.appendChild(f)))}}function fZ(u,f){Ns.m(u,f);var g=Ff;if(g&&u){var m=f&&typeof f.as=="string"?f.as:"script",x='link[rel="modulepreload"][as="'+pr(m)+'"][href="'+pr(u)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Uf(u)}if(!Er.has(E)&&(u=d({rel:"modulepreload",href:u},f),Er.set(E,u),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Pg(E)))return}m=g.createElement("link"),Nn(m,"link",u),pn(m),g.head.appendChild(m)}}}function dZ(u,f,g){Ns.S(u,f,g);var m=Ff;if(m&&u){var x=nf(m).hoistableStyles,E=Lf(u);f=f||"default";var C=x.get(E);if(!C){var k={loading:0,preload:null};if(C=m.querySelector(jg(E)))k.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},g),(g=Er.get(E))&&kw(u,g);var j=C=m.createElement("link");pn(j),Nn(j,"link",u),j._p=new Promise(function(W,ne){j.onload=W,j.onerror=ne}),j.addEventListener("load",function(){k.loading|=1}),j.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Y1(C,f,m)}C={type:"stylesheet",instance:C,count:1,state:k},x.set(E,C)}}}function hZ(u,f){Ns.X(u,f);var g=Ff;if(g&&u){var m=nf(g).hoistableScripts,x=Uf(u),E=m.get(x);E||(E=g.querySelector(Pg(x)),E||(u=d({src:u,async:!0},f),(f=Er.get(x))&&Ow(u,f),E=g.createElement("script"),pn(E),Nn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function gZ(u,f){Ns.M(u,f);var g=Ff;if(g&&u){var m=nf(g).hoistableScripts,x=Uf(u),E=m.get(x);E||(E=g.querySelector(Pg(x)),E||(u=d({src:u,async:!0,type:"module"},f),(f=Er.get(x))&&Ow(u,f),E=g.createElement("script"),pn(E),Nn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function g6(u,f,g,m){var x=(x=Se.current)?G1(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=Lf(g.href),g=nf(x).hoistableStyles,m=g.get(f),m||(m={type:"style",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=Lf(g.href);var E=nf(x).hoistableStyles,C=E.get(u);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,C),(E=x.querySelector(jg(u)))&&!E._p&&(C.instance=E,C.state.loading=5),Er.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Er.set(u,g),E||pZ(x,u,g,C.state))),f&&m===null)throw Error(i(528,""));return C}if(f&&m!==null)throw Error(i(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Uf(g),g=nf(x).hoistableScripts,m=g.get(f),m||(m={type:"script",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function Lf(u){return'href="'+pr(u)+'"'}function jg(u){return'link[rel="stylesheet"]['+u+"]"}function p6(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function pZ(u,f,g,m){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?m.loading=1:(f=u.createElement("link"),m.preload=f,f.addEventListener("load",function(){return m.loading|=1}),f.addEventListener("error",function(){return m.loading|=2}),Nn(f,"link",g),pn(f),u.head.appendChild(f))}function Uf(u){return'[src="'+pr(u)+'"]'}function Pg(u){return"script[async]"+u}function m6(u,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var m=u.querySelector('style[data-href~="'+pr(g.href)+'"]');if(m)return f.instance=m,pn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),pn(m),Nn(m,"style",x),Y1(m,g.precedence,u),f.instance=m;case"stylesheet":x=Lf(g.href);var E=u.querySelector(jg(x));if(E)return f.state.loading|=4,f.instance=E,pn(E),E;m=p6(g),(x=Er.get(x))&&kw(m,x),E=(u.ownerDocument||u).createElement("link"),pn(E);var C=E;return C._p=new Promise(function(k,j){C.onload=k,C.onerror=j}),Nn(E,"link",m),f.state.loading|=4,Y1(E,g.precedence,u),f.instance=E;case"script":return E=Uf(g.src),(x=u.querySelector(Pg(E)))?(f.instance=x,pn(x),x):(m=g,(x=Er.get(E))&&(m=d({},g),Ow(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),pn(x),Nn(x,"link",m),u.head.appendChild(x),f.instance=x);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(m=f.instance,f.state.loading|=4,Y1(m,g.precedence,u));return f.instance}function Y1(u,f,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var k=m[C];if(k.dataset.precedence===f)E=k;else if(E!==x)break}E?E.parentNode.insertBefore(u,E.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(u,f.firstChild))}function kw(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function Ow(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var X1=null;function y6(u,f,g){if(X1===null){var m=new Map,x=X1=new Map;x.set(g,m)}else x=X1,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(u))return m;for(m.set(u,null),g=g.getElementsByTagName(u),x=0;x<g.length;x++){var E=g[x];if(!(E[eg]||E[Hn]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(f)||"";C=u+C;var k=m.get(C);k?k.push(E):m.set(C,[E])}}return m}function v6(u,f,g){u=u.ownerDocument||u,u.head.insertBefore(g,f==="title"?u.querySelector("head > title"):null)}function mZ(u,f,g){if(g===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function b6(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Ig=null;function yZ(){}function vZ(u,f,g){if(Ig===null)throw Error(i(475));var m=Ig;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=Lf(g.href),E=u.querySelector(jg(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=V1.bind(m),u.then(m,m)),f.state.loading|=4,f.instance=E,pn(E);return}E=u.ownerDocument||u,g=p6(g),(x=Er.get(x))&&kw(g,x),E=E.createElement("link"),pn(E);var C=E;C._p=new Promise(function(k,j){C.onload=k,C.onerror=j}),Nn(E,"link",g),f.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(m.count++,f=V1.bind(m),u.addEventListener("load",f),u.addEventListener("error",f))}}function bZ(){if(Ig===null)throw Error(i(475));var u=Ig;return u.stylesheets&&u.count===0&&Nw(u,u.stylesheets),0<u.count?function(f){var g=setTimeout(function(){if(u.stylesheets&&Nw(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(g)}}:null}function V1(){if(this.count--,this.count===0){if(this.stylesheets)Nw(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var W1=null;function Nw(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,W1=new Map,f.forEach(xZ,u),W1=null,V1.call(u))}function xZ(u,f){if(!(f.state.loading&4)){var g=W1.get(u);if(g)var m=g.get(null);else{g=new Map,W1.set(u,g);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(g.set(C.dataset.precedence,C),m=C)}m&&g.set(null,m)}x=f.instance,C=x.getAttribute("data-precedence"),E=g.get(C)||m,E===m&&g.set(null,x),g.set(C,x),this.count++,m=V1.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),f.state.loading|=4}}var qg={$$typeof:A,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function SZ(u,f,g,m,x,E,C,k){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=TS(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TS(0),this.hiddenUpdates=TS(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function x6(u,f,g,m,x,E,C,k,j,W,ne,re){return u=new SZ(u,f,g,C,k,j,W,re),f=1,E===!0&&(f|=24),E=Yi(3,null,null,f),u.current=E,E.stateNode=u,f=gE(),f.refCount++,u.pooledCache=f,f.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:f},vE(E),u}function S6(u){return u?(u=pf,u):pf}function E6(u,f,g,m,x,E){x=S6(x),m.context===null?m.context=x:m.pendingContext=x,m=zo(f),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=Fo(u,m,f),g!==null&&(Zi(g,u,f),bg(g,u,f))}function w6(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<f?g:f}}function Rw(u,f){w6(u,f),(u=u.alternate)&&w6(u,f)}function _6(u){if(u.tag===13){var f=gf(u,67108864);f!==null&&Zi(f,u,67108864),Rw(u,67108864)}}var Q1=!0;function EZ(u,f,g,m){var x=N.T;N.T=null;var E=I.p;try{I.p=2,zw(u,f,g,m)}finally{I.p=E,N.T=x}}function wZ(u,f,g,m){var x=N.T;N.T=null;var E=I.p;try{I.p=8,zw(u,f,g,m)}finally{I.p=E,N.T=x}}function zw(u,f,g,m){if(Q1){var x=Fw(m);if(x===null)Ew(u,f,m,Z1,g),$6(u,m);else if(AZ(x,u,f,g,m))m.stopPropagation();else if($6(u,m),f&4&&-1<_Z.indexOf(u)){for(;x!==null;){var E=tf(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=rl(E.pendingLanes);if(C!==0){var k=E;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var j=1<<31-Hi(C);k.entanglements[1]|=j,C&=~j}Ma(E),(lt&6)===0&&(R1=Kt()+500,Fg(0))}}break;case 13:k=gf(E,2),k!==null&&Zi(k,E,2),F1(),Rw(E,2)}if(E=Fw(m),E===null&&Ew(u,f,m,Z1,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else Ew(u,f,m,null,g)}}function Fw(u){return u=PS(u),Lw(u)}var Z1=null;function Lw(u){if(Z1=null,u=ef(u),u!==null){var f=a(u);if(f===null)u=null;else{var g=f.tag;if(g===13){if(u=s(f),u!==null)return u;u=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Z1=u,null}function A6(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Im()){case BO:return 2;case jO:return 8;case qm:case cW:return 32;case PO:return 268435456;default:return 32}default:return 32}}var Uw=!1,Wo=null,Qo=null,Zo=null,Hg=new Map,Gg=new Map,Ko=[],_Z="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $6(u,f){switch(u){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Hg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gg.delete(f.pointerId)}}function Yg(u,f,g,m,x,E){return u===null||u.nativeEvent!==E?(u={blockedOn:f,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},f!==null&&(f=tf(f),f!==null&&_6(f)),u):(u.eventSystemFlags|=m,f=u.targetContainers,x!==null&&f.indexOf(x)===-1&&f.push(x),u)}function AZ(u,f,g,m,x){switch(f){case"focusin":return Wo=Yg(Wo,u,f,g,m,x),!0;case"dragenter":return Qo=Yg(Qo,u,f,g,m,x),!0;case"mouseover":return Zo=Yg(Zo,u,f,g,m,x),!0;case"pointerover":var E=x.pointerId;return Hg.set(E,Yg(Hg.get(E)||null,u,f,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Gg.set(E,Yg(Gg.get(E)||null,u,f,g,m,x)),!0}return!1}function M6(u){var f=ef(u.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=s(g),f!==null){u.blockedOn=f,vW(u.priority,function(){if(g.tag===13){var m=Qi();m=DS(m);var x=gf(g,m);x!==null&&Zi(x,g,m),Rw(g,m)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function K1(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var g=Fw(u.nativeEvent);if(g===null){g=u.nativeEvent;var m=new g.constructor(g.type,g);jS=m,g.target.dispatchEvent(m),jS=null}else return f=tf(g),f!==null&&_6(f),u.blockedOn=g,!1;f.shift()}return!0}function C6(u,f,g){K1(u)&&g.delete(f)}function $Z(){Uw=!1,Wo!==null&&K1(Wo)&&(Wo=null),Qo!==null&&K1(Qo)&&(Qo=null),Zo!==null&&K1(Zo)&&(Zo=null),Hg.forEach(C6),Gg.forEach(C6)}function J1(u,f){u.blockedOn===f&&(u.blockedOn=null,Uw||(Uw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$Z)))}var ey=null;function T6(u){ey!==u&&(ey=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ey===u&&(ey=null);for(var f=0;f<u.length;f+=3){var g=u[f],m=u[f+1],x=u[f+2];if(typeof m!="function"){if(Lw(m||g)===null)continue;break}var E=tf(g);E!==null&&(u.splice(f,3),f-=3,LE(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function Xg(u){function f(j){return J1(j,u)}Wo!==null&&J1(Wo,u),Qo!==null&&J1(Qo,u),Zo!==null&&J1(Zo,u),Hg.forEach(f),Gg.forEach(f);for(var g=0;g<Ko.length;g++){var m=Ko[g];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Ko.length&&(g=Ko[0],g.blockedOn===null);)M6(g),g.blockedOn===null&&Ko.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],C=x[_i]||null;if(typeof E=="function")C||T6(g);else if(C){var k=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[_i]||null)k=C.formAction;else if(Lw(x)!==null)continue}else k=C.action;typeof k=="function"?g[m+1]=k:(g.splice(m,3),m-=3),T6(g)}}}function Bw(u){this._internalRoot=u}ty.prototype.render=Bw.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(i(409));var g=f.current,m=Qi();E6(g,m,u,f,null,null)},ty.prototype.unmount=Bw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;E6(u.current,2,null,u,null,null),F1(),f[Jc]=null}};function ty(u){this._internalRoot=u}ty.prototype.unstable_scheduleHydration=function(u){if(u){var f=YO();u={blockedOn:null,target:u,priority:f};for(var g=0;g<Ko.length&&f!==0&&f<Ko[g].priority;g++);Ko.splice(g,0,u),g===0&&M6(u)}};var D6=t.version;if(D6!=="19.1.0")throw Error(i(527,D6,"19.1.0"));I.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var MZ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Zh=ny.inject(MZ),qi=ny}catch{}}return Wg.createRoot=function(u,f){if(!r(u))throw Error(i(299));var g=!1,m="",x=YR,E=XR,C=VR,k=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(m=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(E=f.onCaughtError),f.onRecoverableError!==void 0&&(C=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(k=f.unstable_transitionCallbacks)),f=x6(u,1,!1,null,null,g,m,x,E,C,k,null),u[Jc]=f.current,Sw(u),new Bw(f)},Wg.hydrateRoot=function(u,f,g){if(!r(u))throw Error(i(299));var m=!1,x="",E=YR,C=XR,k=VR,j=null,W=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&(C=g.onCaughtError),g.onRecoverableError!==void 0&&(k=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(j=g.unstable_transitionCallbacks),g.formState!==void 0&&(W=g.formState)),f=x6(u,1,!0,f,g??null,m,x,E,C,k,j,W),f.context=S6(null),g=f.current,m=Qi(),m=DS(m),x=zo(m),x.callback=null,Fo(g,x,m),g=m,f.current.lanes=g,Jh(f,g),Ma(f),u[Jc]=f.current,Sw(u),new ty(f)},Wg.version="19.1.0",Wg}var j6;function UZ(){if(j6)return Iw.exports;j6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Iw.exports=LZ(),Iw.exports}var BZ=UZ();const jZ=[{id:1,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[{firstName:"Jon",lastName:"Smith",timestamp:"2023-01-01T12:00:00Z"}]},{id:2,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[]},{id:3,firstName:"John",lastName:"Smoth",postcode:"SW1A 0AB",DoB:"1990-01-02",history:[]},{id:4,firstName:"David",lastName:"Jones",postcode:"AB11 9CD",DoB:"1989-11-09",history:[]}];var Yw={exports:{}},P6;function PZ(){return P6||(P6=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,r=0;t.Diff=function(a,s){return[a,s]},t.prototype.diff_main=function(a,s,o,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var c=l;if(a==null||s==null)throw new Error("Null input. (diff_main)");if(a==s)return a?[new t.Diff(r,a)]:[];typeof o>"u"&&(o=!0);var d=o,h=this.diff_commonPrefix(a,s),p=a.substring(0,h);a=a.substring(h),s=s.substring(h),h=this.diff_commonSuffix(a,s);var y=a.substring(a.length-h);a=a.substring(0,a.length-h),s=s.substring(0,s.length-h);var v=this.diff_compute_(a,s,d,c);return p&&v.unshift(new t.Diff(r,p)),y&&v.push(new t.Diff(r,y)),this.diff_cleanupMerge(v),v},t.prototype.diff_compute_=function(a,s,o,l){var c;if(!a)return[new t.Diff(i,s)];if(!s)return[new t.Diff(n,a)];var d=a.length>s.length?a:s,h=a.length>s.length?s:a,p=d.indexOf(h);if(p!=-1)return c=[new t.Diff(i,d.substring(0,p)),new t.Diff(r,h),new t.Diff(i,d.substring(p+h.length))],a.length>s.length&&(c[0][0]=c[2][0]=n),c;if(h.length==1)return[new t.Diff(n,a),new t.Diff(i,s)];var y=this.diff_halfMatch_(a,s);if(y){var v=y[0],b=y[1],S=y[2],w=y[3],_=y[4],A=this.diff_main(v,S,o,l),$=this.diff_main(b,w,o,l);return A.concat([new t.Diff(r,_)],$)}return o&&a.length>100&&s.length>100?this.diff_lineMode_(a,s,l):this.diff_bisect_(a,s,l)},t.prototype.diff_lineMode_=function(a,s,o){var l=this.diff_linesToChars_(a,s);a=l.chars1,s=l.chars2;var c=l.lineArray,d=this.diff_main(a,s,!1,o);this.diff_charsToLines_(d,c),this.diff_cleanupSemantic(d),d.push(new t.Diff(r,""));for(var h=0,p=0,y=0,v="",b="";h<d.length;){switch(d[h][0]){case i:y++,b+=d[h][1];break;case n:p++,v+=d[h][1];break;case r:if(p>=1&&y>=1){d.splice(h-p-y,p+y),h=h-p-y;for(var S=this.diff_main(v,b,!1,o),w=S.length-1;w>=0;w--)d.splice(h,0,S[w]);h=h+S.length}y=0,p=0,v="",b="";break}h++}return d.pop(),d},t.prototype.diff_bisect_=function(a,s,o){for(var l=a.length,c=s.length,d=Math.ceil((l+c)/2),h=d,p=2*d,y=new Array(p),v=new Array(p),b=0;b<p;b++)y[b]=-1,v[b]=-1;y[h+1]=0,v[h+1]=0;for(var S=l-c,w=S%2!=0,_=0,A=0,$=0,M=0,D=0;D<d&&!(new Date().getTime()>o);D++){for(var T=-D+_;T<=D-A;T+=2){var O=h+T,z;T==-D||T!=D&&y[O-1]<y[O+1]?z=y[O+1]:z=y[O-1]+1;for(var P=z-T;z<l&&P<c&&a.charAt(z)==s.charAt(P);)z++,P++;if(y[O]=z,z>l)A+=2;else if(P>c)_+=2;else if(w){var B=h+S-T;if(B>=0&&B<p&&v[B]!=-1){var Y=l-v[B];if(z>=Y)return this.diff_bisectSplit_(a,s,z,P,o)}}}for(var R=-D+$;R<=D-M;R+=2){var B=h+R,Y;R==-D||R!=D&&v[B-1]<v[B+1]?Y=v[B+1]:Y=v[B-1]+1;for(var U=Y-R;Y<l&&U<c&&a.charAt(l-Y-1)==s.charAt(c-U-1);)Y++,U++;if(v[B]=Y,Y>l)M+=2;else if(U>c)$+=2;else if(!w){var O=h+S-R;if(O>=0&&O<p&&y[O]!=-1){var z=y[O],P=h+z-O;if(Y=l-Y,z>=Y)return this.diff_bisectSplit_(a,s,z,P,o)}}}}return[new t.Diff(n,a),new t.Diff(i,s)]},t.prototype.diff_bisectSplit_=function(a,s,o,l,c){var d=a.substring(0,o),h=s.substring(0,l),p=a.substring(o),y=s.substring(l),v=this.diff_main(d,h,!1,c),b=this.diff_main(p,y,!1,c);return v.concat(b)},t.prototype.diff_linesToChars_=function(a,s){var o=[],l={};o[0]="";function c(y){for(var v="",b=0,S=-1,w=o.length;S<y.length-1;){S=y.indexOf(`
`,b),S==-1&&(S=y.length-1);var _=y.substring(b,S+1);(l.hasOwnProperty?l.hasOwnProperty(_):l[_]!==void 0)?v+=String.fromCharCode(l[_]):(w==d&&(_=y.substring(b),S=y.length),v+=String.fromCharCode(w),l[_]=w,o[w++]=_),b=S+1}return v}var d=4e4,h=c(a);d=65535;var p=c(s);return{chars1:h,chars2:p,lineArray:o}},t.prototype.diff_charsToLines_=function(a,s){for(var o=0;o<a.length;o++){for(var l=a[o][1],c=[],d=0;d<l.length;d++)c[d]=s[l.charCodeAt(d)];a[o][1]=c.join("")}},t.prototype.diff_commonPrefix=function(a,s){if(!a||!s||a.charAt(0)!=s.charAt(0))return 0;for(var o=0,l=Math.min(a.length,s.length),c=l,d=0;o<c;)a.substring(d,c)==s.substring(d,c)?(o=c,d=o):l=c,c=Math.floor((l-o)/2+o);return c},t.prototype.diff_commonSuffix=function(a,s){if(!a||!s||a.charAt(a.length-1)!=s.charAt(s.length-1))return 0;for(var o=0,l=Math.min(a.length,s.length),c=l,d=0;o<c;)a.substring(a.length-c,a.length-d)==s.substring(s.length-c,s.length-d)?(o=c,d=o):l=c,c=Math.floor((l-o)/2+o);return c},t.prototype.diff_commonOverlap_=function(a,s){var o=a.length,l=s.length;if(o==0||l==0)return 0;o>l?a=a.substring(o-l):o<l&&(s=s.substring(0,o));var c=Math.min(o,l);if(a==s)return c;for(var d=0,h=1;;){var p=a.substring(c-h),y=s.indexOf(p);if(y==-1)return d;h+=y,(y==0||a.substring(c-h)==s.substring(0,h))&&(d=h,h++)}},t.prototype.diff_halfMatch_=function(a,s){if(this.Diff_Timeout<=0)return null;var o=a.length>s.length?a:s,l=a.length>s.length?s:a;if(o.length<4||l.length*2<o.length)return null;var c=this;function d(A,$,M){for(var D=A.substring(M,M+Math.floor(A.length/4)),T=-1,O="",z,P,B,Y;(T=$.indexOf(D,T+1))!=-1;){var R=c.diff_commonPrefix(A.substring(M),$.substring(T)),U=c.diff_commonSuffix(A.substring(0,M),$.substring(0,T));O.length<U+R&&(O=$.substring(T-U,T)+$.substring(T,T+R),z=A.substring(0,M-U),P=A.substring(M+R),B=$.substring(0,T-U),Y=$.substring(T+R))}return O.length*2>=A.length?[z,P,B,Y,O]:null}var h=d(o,l,Math.ceil(o.length/4)),p=d(o,l,Math.ceil(o.length/2)),y;if(!h&&!p)return null;p?h?y=h[4].length>p[4].length?h:p:y=p:y=h;var v,b,S,w;a.length>s.length?(v=y[0],b=y[1],S=y[2],w=y[3]):(S=y[0],w=y[1],v=y[2],b=y[3]);var _=y[4];return[v,b,S,w,_]},t.prototype.diff_cleanupSemantic=function(a){for(var s=!1,o=[],l=0,c=null,d=0,h=0,p=0,y=0,v=0;d<a.length;)a[d][0]==r?(o[l++]=d,h=y,p=v,y=0,v=0,c=a[d][1]):(a[d][0]==i?y+=a[d][1].length:v+=a[d][1].length,c&&c.length<=Math.max(h,p)&&c.length<=Math.max(y,v)&&(a.splice(o[l-1],0,new t.Diff(n,c)),a[o[l-1]+1][0]=i,l--,l--,d=l>0?o[l-1]:-1,h=0,p=0,y=0,v=0,c=null,s=!0)),d++;for(s&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),d=1;d<a.length;){if(a[d-1][0]==n&&a[d][0]==i){var b=a[d-1][1],S=a[d][1],w=this.diff_commonOverlap_(b,S),_=this.diff_commonOverlap_(S,b);w>=_?(w>=b.length/2||w>=S.length/2)&&(a.splice(d,0,new t.Diff(r,S.substring(0,w))),a[d-1][1]=b.substring(0,b.length-w),a[d+1][1]=S.substring(w),d++):(_>=b.length/2||_>=S.length/2)&&(a.splice(d,0,new t.Diff(r,b.substring(0,_))),a[d-1][0]=i,a[d-1][1]=S.substring(0,S.length-_),a[d+1][0]=n,a[d+1][1]=b.substring(_),d++),d++}d++}},t.prototype.diff_cleanupSemanticLossless=function(a){function s(_,A){if(!_||!A)return 6;var $=_.charAt(_.length-1),M=A.charAt(0),D=$.match(t.nonAlphaNumericRegex_),T=M.match(t.nonAlphaNumericRegex_),O=D&&$.match(t.whitespaceRegex_),z=T&&M.match(t.whitespaceRegex_),P=O&&$.match(t.linebreakRegex_),B=z&&M.match(t.linebreakRegex_),Y=P&&_.match(t.blanklineEndRegex_),R=B&&A.match(t.blanklineStartRegex_);return Y||R?5:P||B?4:D&&!O&&z?3:O||z?2:D||T?1:0}for(var o=1;o<a.length-1;){if(a[o-1][0]==r&&a[o+1][0]==r){var l=a[o-1][1],c=a[o][1],d=a[o+1][1],h=this.diff_commonSuffix(l,c);if(h){var p=c.substring(c.length-h);l=l.substring(0,l.length-h),c=p+c.substring(0,c.length-h),d=p+d}for(var y=l,v=c,b=d,S=s(l,c)+s(c,d);c.charAt(0)===d.charAt(0);){l+=c.charAt(0),c=c.substring(1)+d.charAt(0),d=d.substring(1);var w=s(l,c)+s(c,d);w>=S&&(S=w,y=l,v=c,b=d)}a[o-1][1]!=y&&(y?a[o-1][1]=y:(a.splice(o-1,1),o--),a[o][1]=v,b?a[o+1][1]=b:(a.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(a){for(var s=!1,o=[],l=0,c=null,d=0,h=!1,p=!1,y=!1,v=!1;d<a.length;)a[d][0]==r?(a[d][1].length<this.Diff_EditCost&&(y||v)?(o[l++]=d,h=y,p=v,c=a[d][1]):(l=0,c=null),y=v=!1):(a[d][0]==n?v=!0:y=!0,c&&(h&&p&&y&&v||c.length<this.Diff_EditCost/2&&h+p+y+v==3)&&(a.splice(o[l-1],0,new t.Diff(n,c)),a[o[l-1]+1][0]=i,l--,c=null,h&&p?(y=v=!0,l=0):(l--,d=l>0?o[l-1]:-1,y=v=!1),s=!0)),d++;s&&this.diff_cleanupMerge(a)},t.prototype.diff_cleanupMerge=function(a){a.push(new t.Diff(r,""));for(var s=0,o=0,l=0,c="",d="",h;s<a.length;)switch(a[s][0]){case i:l++,d+=a[s][1],s++;break;case n:o++,c+=a[s][1],s++;break;case r:o+l>1?(o!==0&&l!==0&&(h=this.diff_commonPrefix(d,c),h!==0&&(s-o-l>0&&a[s-o-l-1][0]==r?a[s-o-l-1][1]+=d.substring(0,h):(a.splice(0,0,new t.Diff(r,d.substring(0,h))),s++),d=d.substring(h),c=c.substring(h)),h=this.diff_commonSuffix(d,c),h!==0&&(a[s][1]=d.substring(d.length-h)+a[s][1],d=d.substring(0,d.length-h),c=c.substring(0,c.length-h))),s-=o+l,a.splice(s,o+l),c.length&&(a.splice(s,0,new t.Diff(n,c)),s++),d.length&&(a.splice(s,0,new t.Diff(i,d)),s++),s++):s!==0&&a[s-1][0]==r?(a[s-1][1]+=a[s][1],a.splice(s,1)):s++,l=0,o=0,c="",d="";break}a[a.length-1][1]===""&&a.pop();var p=!1;for(s=1;s<a.length-1;)a[s-1][0]==r&&a[s+1][0]==r&&(a[s][1].substring(a[s][1].length-a[s-1][1].length)==a[s-1][1]?(a[s][1]=a[s-1][1]+a[s][1].substring(0,a[s][1].length-a[s-1][1].length),a[s+1][1]=a[s-1][1]+a[s+1][1],a.splice(s-1,1),p=!0):a[s][1].substring(0,a[s+1][1].length)==a[s+1][1]&&(a[s-1][1]+=a[s+1][1],a[s][1]=a[s][1].substring(a[s+1][1].length)+a[s+1][1],a.splice(s+1,1),p=!0)),s++;p&&this.diff_cleanupMerge(a)},t.prototype.diff_xIndex=function(a,s){var o=0,l=0,c=0,d=0,h;for(h=0;h<a.length&&(a[h][0]!==i&&(o+=a[h][1].length),a[h][0]!==n&&(l+=a[h][1].length),!(o>s));h++)c=o,d=l;return a.length!=h&&a[h][0]===n?d:d+(s-c)},t.prototype.diff_prettyHtml=function(a){for(var s=[],o=/&/g,l=/</g,c=/>/g,d=/\n/g,h=0;h<a.length;h++){var p=a[h][0],y=a[h][1],v=y.replace(o,"&amp;").replace(l,"&lt;").replace(c,"&gt;").replace(d,"&para;<br>");switch(p){case i:s[h]='<ins style="background:#e6ffe6;">'+v+"</ins>";break;case n:s[h]='<del style="background:#ffe6e6;">'+v+"</del>";break;case r:s[h]="<span>"+v+"</span>";break}}return s.join("")},t.prototype.diff_text1=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==i&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_text2=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==n&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_levenshtein=function(a){for(var s=0,o=0,l=0,c=0;c<a.length;c++){var d=a[c][0],h=a[c][1];switch(d){case i:o+=h.length;break;case n:l+=h.length;break;case r:s+=Math.max(o,l),o=0,l=0;break}}return s+=Math.max(o,l),s},t.prototype.diff_toDelta=function(a){for(var s=[],o=0;o<a.length;o++)switch(a[o][0]){case i:s[o]="+"+encodeURI(a[o][1]);break;case n:s[o]="-"+a[o][1].length;break;case r:s[o]="="+a[o][1].length;break}return s.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(a,s){for(var o=[],l=0,c=0,d=s.split(/\t/g),h=0;h<d.length;h++){var p=d[h].substring(1);switch(d[h].charAt(0)){case"+":try{o[l++]=new t.Diff(i,decodeURI(p))}catch{throw new Error("Illegal escape in diff_fromDelta: "+p)}break;case"-":case"=":var y=parseInt(p,10);if(isNaN(y)||y<0)throw new Error("Invalid number in diff_fromDelta: "+p);var v=a.substring(c,c+=y);d[h].charAt(0)=="="?o[l++]=new t.Diff(r,v):o[l++]=new t.Diff(n,v);break;default:if(d[h])throw new Error("Invalid diff operation in diff_fromDelta: "+d[h])}}if(c!=a.length)throw new Error("Delta length ("+c+") does not equal source text length ("+a.length+").");return o},t.prototype.match_main=function(a,s,o){if(a==null||s==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,a.length)),a==s?0:a.length?a.substring(o,o+s.length)==s?o:this.match_bitap_(a,s,o):-1},t.prototype.match_bitap_=function(a,s,o){if(s.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(s),c=this;function d(z,P){var B=z/s.length,Y=Math.abs(o-P);return c.Match_Distance?B+Y/c.Match_Distance:Y?1:B}var h=this.Match_Threshold,p=a.indexOf(s,o);p!=-1&&(h=Math.min(d(0,p),h),p=a.lastIndexOf(s,o+s.length),p!=-1&&(h=Math.min(d(0,p),h)));var y=1<<s.length-1;p=-1;for(var v,b,S=s.length+a.length,w,_=0;_<s.length;_++){for(v=0,b=S;v<b;)d(_,o+b)<=h?v=b:S=b,b=Math.floor((S-v)/2+v);S=b;var A=Math.max(1,o-b+1),$=Math.min(o+b,a.length)+s.length,M=Array($+2);M[$+1]=(1<<_)-1;for(var D=$;D>=A;D--){var T=l[a.charAt(D-1)];if(_===0?M[D]=(M[D+1]<<1|1)&T:M[D]=(M[D+1]<<1|1)&T|((w[D+1]|w[D])<<1|1)|w[D+1],M[D]&y){var O=d(_,D-1);if(O<=h)if(h=O,p=D-1,p>o)A=Math.max(1,2*o-p);else break}}if(d(_+1,o)>h)break;w=M}return p},t.prototype.match_alphabet_=function(a){for(var s={},o=0;o<a.length;o++)s[a.charAt(o)]=0;for(var o=0;o<a.length;o++)s[a.charAt(o)]|=1<<a.length-o-1;return s},t.prototype.patch_addContext_=function(a,s){if(s.length!=0){if(a.start2===null)throw Error("patch not initialized");for(var o=s.substring(a.start2,a.start2+a.length1),l=0;s.indexOf(o)!=s.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,o=s.substring(a.start2-l,a.start2+a.length1+l);l+=this.Patch_Margin;var c=s.substring(a.start2-l,a.start2);c&&a.diffs.unshift(new t.Diff(r,c));var d=s.substring(a.start2+a.length1,a.start2+a.length1+l);d&&a.diffs.push(new t.Diff(r,d)),a.start1-=c.length,a.start2-=c.length,a.length1+=c.length+d.length,a.length2+=c.length+d.length}},t.prototype.patch_make=function(a,s,o){var l,c;if(typeof a=="string"&&typeof s=="string"&&typeof o>"u")l=a,c=this.diff_main(l,s,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(a&&typeof a=="object"&&typeof s>"u"&&typeof o>"u")c=a,l=this.diff_text1(c);else if(typeof a=="string"&&s&&typeof s=="object"&&typeof o>"u")l=a,c=s;else if(typeof a=="string"&&typeof s=="string"&&o&&typeof o=="object")l=a,c=o;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var d=[],h=new t.patch_obj,p=0,y=0,v=0,b=l,S=l,w=0;w<c.length;w++){var _=c[w][0],A=c[w][1];switch(!p&&_!==r&&(h.start1=y,h.start2=v),_){case i:h.diffs[p++]=c[w],h.length2+=A.length,S=S.substring(0,v)+A+S.substring(v);break;case n:h.length1+=A.length,h.diffs[p++]=c[w],S=S.substring(0,v)+S.substring(v+A.length);break;case r:A.length<=2*this.Patch_Margin&&p&&c.length!=w+1?(h.diffs[p++]=c[w],h.length1+=A.length,h.length2+=A.length):A.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(h,b),d.push(h),h=new t.patch_obj,p=0,b=S,y=v);break}_!==i&&(y+=A.length),_!==n&&(v+=A.length)}return p&&(this.patch_addContext_(h,b),d.push(h)),d},t.prototype.patch_deepCopy=function(a){for(var s=[],o=0;o<a.length;o++){var l=a[o],c=new t.patch_obj;c.diffs=[];for(var d=0;d<l.diffs.length;d++)c.diffs[d]=new t.Diff(l.diffs[d][0],l.diffs[d][1]);c.start1=l.start1,c.start2=l.start2,c.length1=l.length1,c.length2=l.length2,s[o]=c}return s},t.prototype.patch_apply=function(a,s){if(a.length==0)return[s,[]];a=this.patch_deepCopy(a);var o=this.patch_addPadding(a);s=o+s+o,this.patch_splitMax(a);for(var l=0,c=[],d=0;d<a.length;d++){var h=a[d].start2+l,p=this.diff_text1(a[d].diffs),y,v=-1;if(p.length>this.Match_MaxBits?(y=this.match_main(s,p.substring(0,this.Match_MaxBits),h),y!=-1&&(v=this.match_main(s,p.substring(p.length-this.Match_MaxBits),h+p.length-this.Match_MaxBits),(v==-1||y>=v)&&(y=-1))):y=this.match_main(s,p,h),y==-1)c[d]=!1,l-=a[d].length2-a[d].length1;else{c[d]=!0,l=y-h;var b;if(v==-1?b=s.substring(y,y+p.length):b=s.substring(y,v+this.Match_MaxBits),p==b)s=s.substring(0,y)+this.diff_text2(a[d].diffs)+s.substring(y+p.length);else{var S=this.diff_main(p,b,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(S)/p.length>this.Patch_DeleteThreshold)c[d]=!1;else{this.diff_cleanupSemanticLossless(S);for(var w=0,_,A=0;A<a[d].diffs.length;A++){var $=a[d].diffs[A];$[0]!==r&&(_=this.diff_xIndex(S,w)),$[0]===i?s=s.substring(0,y+_)+$[1]+s.substring(y+_):$[0]===n&&(s=s.substring(0,y+_)+s.substring(y+this.diff_xIndex(S,w+$[1].length))),$[0]!==n&&(w+=$[1].length)}}}}}return s=s.substring(o.length,s.length-o.length),[s,c]},t.prototype.patch_addPadding=function(a){for(var s=this.Patch_Margin,o="",l=1;l<=s;l++)o+=String.fromCharCode(l);for(var l=0;l<a.length;l++)a[l].start1+=s,a[l].start2+=s;var c=a[0],d=c.diffs;if(d.length==0||d[0][0]!=r)d.unshift(new t.Diff(r,o)),c.start1-=s,c.start2-=s,c.length1+=s,c.length2+=s;else if(s>d[0][1].length){var h=s-d[0][1].length;d[0][1]=o.substring(d[0][1].length)+d[0][1],c.start1-=h,c.start2-=h,c.length1+=h,c.length2+=h}if(c=a[a.length-1],d=c.diffs,d.length==0||d[d.length-1][0]!=r)d.push(new t.Diff(r,o)),c.length1+=s,c.length2+=s;else if(s>d[d.length-1][1].length){var h=s-d[d.length-1][1].length;d[d.length-1][1]+=o.substring(0,h),c.length1+=h,c.length2+=h}return o},t.prototype.patch_splitMax=function(a){for(var s=this.Match_MaxBits,o=0;o<a.length;o++)if(!(a[o].length1<=s)){var l=a[o];a.splice(o--,1);for(var c=l.start1,d=l.start2,h="";l.diffs.length!==0;){var p=new t.patch_obj,y=!0;for(p.start1=c-h.length,p.start2=d-h.length,h!==""&&(p.length1=p.length2=h.length,p.diffs.push(new t.Diff(r,h)));l.diffs.length!==0&&p.length1<s-this.Patch_Margin;){var v=l.diffs[0][0],b=l.diffs[0][1];v===i?(p.length2+=b.length,d+=b.length,p.diffs.push(l.diffs.shift()),y=!1):v===n&&p.diffs.length==1&&p.diffs[0][0]==r&&b.length>2*s?(p.length1+=b.length,c+=b.length,y=!1,p.diffs.push(new t.Diff(v,b)),l.diffs.shift()):(b=b.substring(0,s-p.length1-this.Patch_Margin),p.length1+=b.length,c+=b.length,v===r?(p.length2+=b.length,d+=b.length):y=!1,p.diffs.push(new t.Diff(v,b)),b==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(b.length))}h=this.diff_text2(p.diffs),h=h.substring(h.length-this.Patch_Margin);var S=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);S!==""&&(p.length1+=S.length,p.length2+=S.length,p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=S:p.diffs.push(new t.Diff(r,S))),y||a.splice(++o,0,p)}}},t.prototype.patch_toText=function(a){for(var s=[],o=0;o<a.length;o++)s[o]=a[o];return s.join("")},t.prototype.patch_fromText=function(a){var s=[];if(!a)return s;for(var o=a.split(`
`),l=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<o.length;){var d=o[l].match(c);if(!d)throw new Error("Invalid patch string: "+o[l]);var h=new t.patch_obj;for(s.push(h),h.start1=parseInt(d[1],10),d[2]===""?(h.start1--,h.length1=1):d[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(d[2],10)),h.start2=parseInt(d[3],10),d[4]===""?(h.start2--,h.length2=1):d[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(d[4],10)),l++;l<o.length;){var p=o[l].charAt(0);try{var y=decodeURI(o[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+y)}if(p=="-")h.diffs.push(new t.Diff(n,y));else if(p=="+")h.diffs.push(new t.Diff(i,y));else if(p==" ")h.diffs.push(new t.Diff(r,y));else{if(p=="@")break;if(p!=="")throw new Error('Invalid patch mode "'+p+'" in: '+y)}l++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var a,s;this.length1===0?a=this.start1+",0":this.length1==1?a=this.start1+1:a=this.start1+1+","+this.length1,this.length2===0?s=this.start2+",0":this.length2==1?s=this.start2+1:s=this.start2+1+","+this.length2;for(var o=["@@ -"+a+" +"+s+` @@
`],l,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case i:l="+";break;case n:l="-";break;case r:l=" ";break}o[c+1]=l+encodeURI(this.diffs[c][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r}(Yw)),Yw.exports}var IZ=PZ();const NA=eC(IZ);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var qZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),HZ=Object.prototype.hasOwnProperty;function RA(e,t){return HZ.call(e,t)}function zA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)RA(e,r)&&i.push(r);return i}function ir(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function FA(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Rl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function O7(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function LA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(LA(e[t]))return!0}else if(typeof e=="object"){for(var i=zA(e),r=i.length,a=0;a<r;a++)if(LA(e[i[a]]))return!0}}return!1}function I6(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var N7=function(e){qZ(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,I6(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=I6(n,{name:i,index:r,operation:a,tree:s}),l}return t}(Error),Bt=N7,GZ=ir,nd={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Tv(n,this.path);i&&(i=ir(i));var r=Ql(n,{op:"remove",path:this.from}).removed;return Ql(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Tv(n,this.from);return Ql(n,{op:"add",path:this.path,value:ir(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:c0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},YZ={add:function(e,t,n){return FA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:nd.move,copy:nd.copy,test:nd.test,_get:nd._get};function Tv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ql(e,n),n.value}function Ql(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Dv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Tv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=c0(e,t.value),s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=ir(e));var o=t.path||"",l=o.split("/"),c=e,d=1,h=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Dv;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=O7(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[y]===void 0?p=l.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(c)){if(y==="-")y=c.length;else{if(n&&!FA(y))throw new Bt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);FA(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>c.length)throw new Bt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=YZ[t.op].call(t,c,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=nd[t.op].call(t,c,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(c=c[y],n&&d<h&&(!c||typeof c!="object"))throw new Bt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function gx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=ir(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Ql(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function XZ(e,t,n){var i=Ql(e,t);if(i.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Dv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nd[e.op]){if(typeof e.path!="string")throw new Bt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&LA(e.value))throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Bt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Bt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=R7([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function R7(e,t,n){try{if(!Array.isArray(e))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)gx(ir(t),ir(e),n||!0);else{n=n||Dv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Bt)return r;throw r}}function c0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!c0(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!c0(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const VZ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bt,_areEquals:c0,applyOperation:Ql,applyPatch:gx,applyReducer:XZ,deepClone:GZ,getValueByPointer:Tv,validate:R7,validator:Dv},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var nC=new WeakMap,WZ=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),QZ=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ZZ(e){return nC.get(e)}function KZ(e,t){return e.observers.get(t)}function JZ(e,t){e.observers.delete(t.callback)}function eK(e,t){t.unobserve()}function tK(e,t){var n=[],i,r=ZZ(e);if(!r)r=new WZ(e),nC.set(e,r);else{var a=KZ(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=ir(e),t){i.callback=t,i.next=null;var s=function(){UA(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){UA(i),clearTimeout(i.next),JZ(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new QZ(t,i)),i}function UA(e,t){t===void 0&&(t=!1);var n=nC.get(e.object);iC(n.value,e.object,e.patches,"",t),e.patches.length&&gx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function iC(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=zA(t),s=zA(e),o=!1,l=s.length-1;l>=0;l--){var c=s[l],d=e[c];if(RA(t,c)&&!(t[c]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[c];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?iC(d,h,n,i+"/"+Rl(c),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+Rl(c),value:ir(d)}),n.push({op:"replace",path:i+"/"+Rl(c),value:ir(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Rl(c),value:ir(d)}),n.push({op:"remove",path:i+"/"+Rl(c)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!RA(e,c)&&t[c]!==void 0&&n.push({op:"add",path:i+"/"+Rl(c),value:ir(t[c])})}}}function nK(e,t,n){n===void 0&&(n=!1);var i=[];return iC(e,t,i,"",n),i}const iK=Object.freeze(Object.defineProperty({__proto__:null,compare:nK,generate:UA,observe:tK,unobserve:eK},Symbol.toStringTag,{value:"Module"}));Object.assign({},VZ,iK,{JsonPatchError:N7,deepClone:ir,escapePathComponent:Rl,unescapePathComponent:O7});var Xw,q6;function rK(){if(q6)return Xw;q6=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return Xw=function(n,i){var r,a,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),a=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,function o(l,c,d){var h,p,y,v,b,S,w,_,A,$,M,D;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),M=JSON.stringify(l,s),M===void 0)return M;if(w=a-c.length-d,M.length<=w&&(A=M.replace(e,function(T,O){return O||T+" "}),A.length<=w))return A;if(s!=null&&(l=JSON.parse(M),s=void 0),typeof l=="object"&&l!==null){if(_=c+r,y=[],p=0,Array.isArray(l))for($="[",h="]",w=l.length;p<w;p++)y.push(o(l[p],_,p===w-1?0:1)||"null");else for($="{",h="}",S=Object.keys(l),w=S.length;p<w;p++)v=S[p],b=JSON.stringify(v)+": ",D=o(l[v],_,b.length+(p===w-1?0:1)),D!==void 0&&y.push(b+D);if(y.length>0)return[$,r+y.join(`,
`+_),h].join(`
`+c)}return M}(n,"",0)},Xw}var aK=rK();const Vw=eC(aK);function bo(e,t,n){return e.fields=t||[],e.fname=n,e}function sK(e){return e==null?null:e.fname}function z7(e){return e==null?null:e.fields}function F7(e){return e.length===1?oK(e[0]):uK(e)}const oK=e=>function(t){return t[e]},uK=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Wy(e){throw Error(e)}function rC(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Wy("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Wy("Access path missing closing bracket: "+e),i&&Wy("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function aC(e,t,n){const i=rC(e);return e=i.length===1?i[0]:e,bo((n&&n.get||F7)(i),[e],t||e)}const lK=aC("id"),sC=bo(e=>e,[],"identity"),cK=bo(()=>0,[],"zero"),fK=bo(()=>1,[],"one"),dK=bo(()=>!0,[],"true"),hK=bo(()=>!1,[],"false");function gK(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const L7=0,U7=1,B7=2,j7=3,P7=4;function pK(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gK,i=e||L7;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=U7&&n(t||"error","ERROR",arguments),this},warn(){return i>=B7&&n(t||"warn","WARN",arguments),this},info(){return i>=j7&&n(t||"log","INFO",arguments),this},debug(){return i>=P7&&n(t||"log","DEBUG",arguments),this}}}var px=Array.isArray;function lc(e){return e===Object(e)}const H6=e=>e!=="__proto__";function oC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=mK(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;mx(i,a,r[a],s)}return i},{})}function mx(e,t,n,i){if(!H6(t))return;let r,a;if(lc(n)&&!px(n)){a=lc(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?mx(a,r,n[r]):H6(r)&&(a[r]=n[r])}else e[t]=n}function mK(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function ih(e){return e[e.length-1]}function uC(e){return e==null||e===""?null:+e}const I7=e=>t=>e*Math.exp(t),q7=e=>t=>Math.log(e*t),H7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),G7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,kv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function yx(e,t,n,i){const r=n(e[0]),a=n(ih(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function yK(e,t){return yx(e,t,uC,sC)}function vK(e,t){var n=Math.sign(e[0]);return yx(e,t,q7(n),I7(n))}function bK(e,t,n){return yx(e,t,kv(n),kv(1/n))}function xK(e,t,n){return yx(e,t,H7(n),G7(n))}function vx(e,t,n,i,r){const a=i(e[0]),s=i(ih(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function SK(e,t,n){return vx(e,t,n,uC,sC)}function EK(e,t,n){const i=Math.sign(e[0]);return vx(e,t,n,q7(i),I7(i))}function wK(e,t,n,i){return vx(e,t,n,kv(i),kv(1/i))}function _K(e,t,n,i){return vx(e,t,n,H7(i),G7(i))}function AK(e){return 1+~~(new Date(e).getMonth()/3)}function $K(e){return 1+~~(new Date(e).getUTCMonth()/3)}function f0(e){return e!=null?px(e)?e:[e]:[]}function MK(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function bx(e){return typeof e=="function"}const CK="descending";function TK(e,t,n){n=n||{},t=f0(t)||[];const i=[],r=[],a={},s=n.comparator||DK;return f0(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===CK?-1:1),r.push(o=bx(o)?o:aC(o,null,n)),(z7(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:bo(s(r,i),Object.keys(a))}const lC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),DK=(e,t)=>e.length===1?kK(e[0],t[0]):OK(e,t,e.length),kK=(e,t)=>function(n,i){return lC(e(n),e(i))*t},OK=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=lC(a(i),a(r));return s*t[o]});function NK(e){return bx(e)?e:()=>e}function RK(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function cC(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function zK(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function FK(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function qs(e,t){return Object.hasOwn(e,t)}const iy={};function LK(e){let t={},n;function i(a){return qs(t,a)&&t[a]!==iy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===iy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=iy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==iy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function UK(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=ih(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const d=Math.abs(l-t);return c<d&&c<=s?i:d<=s?r:a}function BK(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),cC(i,n)}function jK(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Y7(e){return typeof e=="boolean"}function X7(e){return Object.prototype.toString.call(e)==="[object Date]"}function PK(e){return e&&bx(e[Symbol.iterator])}function V7(e){return typeof e=="number"}function IK(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Js(e){return typeof e=="string"}function qK(e,t,n){e&&(e=t?f0(e).map(o=>o.replace(/\\(.)/g,"$1")):f0(e));const i=e&&e.length,r=n&&n.get||F7,a=o=>r(t?[o]:rC(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return bo(s,e,"key")}function HK(e,t){const n=e[0],i=ih(e),r=+t;return r?r===1?i:n+r*(i-n):n}const GK=1e4;function YK(e){e=+e||GK;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>qs(t,s)||qs(n,s),get:s=>qs(t,s)?t[s]:qs(n,s)?a(s,n[s]):void 0,set:(s,o)=>qs(t,s)?t[s]=o:a(s,o)}}function XK(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,c=0;for(;o<r&&l<a;++c)s[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++c)s[c]=t[o];for(;l<a;++l,++c)s[c]=n[l];return s}function wp(e,t){let n="";for(;--t>=0;)n+=e;return n}function VK(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?wp(r,s)+a:i==="center"?wp(r,~~(s/2))+a+wp(r,Math.ceil(s/2)):a+wp(r,s)}function WK(e){return e&&ih(e)-e[0]||0}function ud(e){return px(e)?"["+e.map(ud)+"]":lc(e)||Js(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QK(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const ZK=e=>V7(e)||X7(e)?e:Date.parse(e);function KK(e,t){return t=t||ZK,e==null||e===""?null:t(e)}function JK(e){return e==null||e===""?null:e+""}function eJ(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function tJ(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function nJ(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}function rh(e,t,n){return e.fields=t||[],e.fname=n,e}function iJ(e){return e.length===1?rJ(e[0]):aJ(e)}const rJ=e=>function(t){return t[e]},aJ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Zl(e){throw Error(e)}function sJ(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Zl("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Zl("Access path missing closing bracket: "+e),i&&Zl("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function oJ(e,t,n){const i=sJ(e);return e=i.length===1?i[0]:e,rh(iJ(i),[e],e)}const xx=oJ("id"),W7=rh(e=>e,[],"identity");rh(()=>0,[],"zero");rh(()=>1,[],"one");const BA=rh(()=>!0,[],"true");rh(()=>!1,[],"false");function uJ(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const lJ=0,Q7=1,cJ=2,fJ=3,dJ=4;function hJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uJ,i=e||lJ;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=Q7&&n("error","ERROR",arguments),this},warn(){return i>=cJ&&n("warn","WARN",arguments),this},info(){return i>=fJ&&n("log","INFO",arguments),this},debug(){return i>=dJ&&n("log","DEBUG",arguments),this}}}var _u=Array.isArray;function Ov(e){return e!=null?_u(e)?e:[e]:[]}function mu(e){return typeof e=="function"}function fC(e){return mu(e)?e:()=>e}function gJ(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Z7(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function pJ(e,t){return Object.hasOwn(e,t)}function K7(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Z7(i,n)}function zl(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}function ah(e,t,n){return e.fields=t||[],e.fname=n,e}function mJ(e){return e.length===1?yJ(e[0]):vJ(e)}const yJ=e=>function(t){return t[e]},vJ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Pa(e){throw Error(e)}function bJ(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Pa("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Pa("Access path missing closing bracket: "+e),i&&Pa("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function J7(e,t,n){const i=bJ(e);return e=i.length===1?i[0]:e,ah(mJ(i),[e],e)}J7("id");const eL=ah(e=>e,[],"identity");ah(()=>0,[],"zero");ah(()=>1,[],"one");ah(()=>!0,[],"true");ah(()=>!1,[],"false");var tL=Array.isArray;function nL(e){return e===Object(e)}function G6(e){return e==null||e===""?null:+e}function dC(e){return typeof e=="function"}function hC(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function iL(e,t){return Object.hasOwn(e,t)}function xJ(e){return Object.prototype.toString.call(e)==="[object Date]"}function SJ(e){return e&&dC(e[Symbol.iterator])}function EJ(e){return typeof e=="number"}function wJ(e){return typeof e=="string"}function gC(e){return tL(e)?"["+e.map(gC)+"]":nL(e)||wJ(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function _J(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const AJ=e=>EJ(e)||xJ(e)?e:Date.parse(e);function $J(e,t){return t=t||AJ,e==null||e===""?null:t(e)}function MJ(e){return e==null||e===""?null:e+""}var Y6={},Ww={},Qw=34,Qg=10,Zw=13;function rL(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function CJ(e,t){var n=rL(e);return function(i,r){return t(n(i),r,e)}}function X6(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ti(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function TJ(e){return e<0?"-"+Ti(-e,6):e>9999?"+"+Ti(e,6):Ti(e,4)}function DJ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":TJ(e.getUTCFullYear())+"-"+Ti(e.getUTCMonth()+1,2)+"-"+Ti(e.getUTCDate(),2)+(r?"T"+Ti(t,2)+":"+Ti(n,2)+":"+Ti(i,2)+"."+Ti(r,3)+"Z":i?"T"+Ti(t,2)+":"+Ti(n,2)+":"+Ti(i,2)+"Z":n||t?"T"+Ti(t,2)+":"+Ti(n,2)+"Z":"")}function kJ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,w){if(y)return y(S,w-1);v=S,y=p?CJ(S,p):rL(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,w,_=v<=0,A=!1;h.charCodeAt(v-1)===Qg&&--v,h.charCodeAt(v-1)===Zw&&--v;function $(){if(_)return Ww;if(A)return A=!1,Y6;var D,T=b,O;if(h.charCodeAt(T)===Qw){for(;b++<v&&h.charCodeAt(b)!==Qw||h.charCodeAt(++b)===Qw;);return(D=b)>=v?_=!0:(O=h.charCodeAt(b++))===Qg?A=!0:O===Zw&&(A=!0,h.charCodeAt(b)===Qg&&++b),h.slice(T+1,D-1).replace(/""/g,'"')}for(;b<v;){if((O=h.charCodeAt(D=b++))===Qg)A=!0;else if(O===Zw)A=!0,h.charCodeAt(b)===Qg&&++b;else if(O!==n)continue;return h.slice(T,D)}return _=!0,h.slice(T,v)}for(;(w=$())!==Ww;){for(var M=[];w!==Y6&&w!==Ww;)M.push(w),w=$();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=X6(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=X6(h)),a(h,p).join(`
`)}function l(h){return h.map(c).join(`
`)}function c(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?DJ(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:c,formatValue:d}}function OJ(e){return e}function NJ(e){if(e==null)return OJ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var c=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;c<d;)h[c]=o[c],++c;return h}}function RJ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function zJ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return V6(e,n)})}:V6(e,t)}function V6(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=aL(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function aL(e,t){var n=NJ(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&RJ(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function l(d){return d.map(o)}function c(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(c)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return c(t)}function FJ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(c,d){var h=e.arcs[c<0?~c:c],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=c,t[d]=p)}),t.forEach(function(c){var d=o(c),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(c),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(c),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[c],i[y.start=h]=r[y.end=p]=y});function o(c){var d=e.arcs[c<0?~c:c],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],c<0?[p,h]:[h,p]}function l(c,d){for(var h in c){var p=c[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(c){n[c<0?~c:c]||a.push([c])}),a}function LJ(e){return aL(e,UJ.apply(this,arguments))}function UJ(e,t,n){var i,r,a;if(arguments.length>1)i=BJ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:FJ(e,i)}}function BJ(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function l(h){h.forEach(o)}function c(h){h.forEach(l)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":c(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function eo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sh(e){let t,n,i;e.length!==2?(t=eo,n=(o,l)=>eo(e(o),l),i=(o,l)=>e(o)-l):(t=e===eo||e===jJ?e:PJ,n=e,i=e);function r(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const h=c+d>>>1;n(o[h],l)<0?c=h+1:d=h}while(c<d)}return c}function a(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const h=c+d>>>1;n(o[h],l)<=0?c=h+1:d=h}while(c<d)}return c}function s(o,l,c=0,d=o.length){const h=r(o,l,c,d-1);return h>c&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:r,center:s,right:a}}function PJ(){return 0}function sL(e){return e===null?NaN:+e}function*IJ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const oL=sh(eo),Au=oL.right,qJ=oL.left;sh(sL).center;function HJ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function GJ(e,t){const n=HJ(e,t);return n&&Math.sqrt(n)}class yi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class W6 extends Map{constructor(t,n=cL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(jA(this,t))}has(t){return super.has(jA(this,t))}set(t,n){return super.set(uL(this,t),n)}delete(t){return super.delete(lL(this,t))}}class Nv extends Set{constructor(t,n=cL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(jA(this,t))}add(t){return super.add(uL(this,t))}delete(t){return super.delete(lL(this,t))}}function jA({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function uL({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function lL({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function cL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function YJ(e,t){return Array.from(t,n=>e[n])}function XJ(e=eo){if(e===eo)return fL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function fL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VJ=Math.sqrt(50),WJ=Math.sqrt(10),QJ=Math.sqrt(2);function Rv(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=VJ?10:a>=WJ?5:a>=QJ?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Rv(e,t,n*2):[o,l,c]}function PA(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Rv(t,e,n):Rv(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(r+c)/-s;else for(let c=0;c<o;++c)l[c]=(r+c)*s;return l}function IA(e,t,n){return t=+t,e=+e,n=+n,Rv(e,t,n)[2]}function $u(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?IA(t,e,n):IA(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Kl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function qA(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function dL(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?fL:XJ(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(c-l/2<0?-1:1),y=Math.max(n,Math.floor(t-c*h/l+p)),v=Math.min(i,Math.floor(t+(l-c)*h/l+p));dL(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Zg(e,n,t),r(e[i],a)>0&&Zg(e,n,i);s<o;){for(Zg(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Zg(e,n,o):(++o,Zg(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Zg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function HA(e,t,n){if(e=Float64Array.from(IJ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return qA(e);if(t>=1)return Kl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Kl(dL(e,a).subarray(0,a+1)),o=qA(e.subarray(a+1));return s+(o-s)*(r-a)}}function hL(e,t,n=sL){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function ZJ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function gL(e,t){return HA(e,.5,t)}function*KJ(e){for(const t of e)yield*t}function pL(e){return Array.from(KJ(e))}function rr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function mL(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function JJ(e,...t){e=new Nv(e),t=t.map(eee);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function eee(e){return e instanceof Nv?e:new Nv(e)}function tee(...e){const t=new Nv;for(const n of e)for(const i of n)t.add(i);return t}function nee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Ed(e){return e=zv(Math.abs(e)),e?e[1]:NaN}function iee(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function ree(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var aee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cc(e){if(!(t=aee.exec(e)))throw new Error("invalid format: "+e);var t;return new pC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cc.prototype=pC.prototype;function pC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function see(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var yL;function oee(e,t){var n=zv(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(yL=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+zv(e,Math.max(0,t+a-1))[0]}function Q6(e,t){var n=zv(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Z6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Q6(e*100,t),r:Q6,s:oee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K6(e){return e}var J6=Array.prototype.map,e4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vL(e){var t=e.grouping===void 0||e.thousands===void 0?K6:iee(J6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?K6:ree(J6.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=cc(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,w=h.width,_=h.comma,A=h.precision,$=h.trim,M=h.type;M==="n"?(_=!0,M="g"):Z6[M]||(A===void 0&&(A=12),$=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var D=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?s:"",O=Z6[M],z=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function P(B){var Y=D,R=T,U,F,N;if(M==="c")R=O(B)+R,B="";else{B=+B;var I=B<0||1/B<0;if(B=isNaN(B)?l:O(Math.abs(B),A),$&&(B=see(B)),I&&+B==0&&v!=="+"&&(I=!1),Y=(I?v==="("?v:o:v==="-"||v==="("?"":v)+Y,R=(M==="s"?e4[8+yL/3]:"")+R+(I&&v==="("?")":""),z){for(U=-1,F=B.length;++U<F;)if(N=B.charCodeAt(U),48>N||N>57){R=(N===46?r+B.slice(U+1):B.slice(U))+R,B=B.slice(0,U);break}}}_&&!S&&(B=t(B,1/0));var H=Y.length+B.length+R.length,K=H<w?new Array(w-H+1).join(p):"";switch(_&&S&&(B=t(K+B,K.length?w-R.length:1/0),K=""),y){case"<":B=Y+B+R+K;break;case"=":B=Y+K+B+R;break;case"^":B=K.slice(0,H=K.length>>1)+Y+B+R+K.slice(H);break;default:B=K+Y+B+R;break}return a(B)}return P.toString=function(){return h+""},P}function d(h,p){var y=c((h=cc(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Ed(p)/3)))*3,b=Math.pow(10,-v),S=e4[8+v/3];return function(w){return y(b*w)+S}}return{format:c,formatPrefix:d}}var ry,Sx,mC;uee({thousands:",",grouping:[3],currency:["$",""]});function uee(e){return ry=vL(e),Sx=ry.format,mC=ry.formatPrefix,ry}function bL(e){return Math.max(0,-Ed(Math.abs(e)))}function xL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ed(t)/3)))*3-Ed(Math.abs(e)))}function SL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ed(t)-Ed(e))+1}function oh(e,t,n){return e.fields=t||[],e.fname=n,e}function lee(e){return e.length===1?cee(e[0]):fee(e)}const cee=e=>function(t){return t[e]},fee=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ld(e){throw Error(e)}function dee(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ld("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ld("Access path missing closing bracket: "+e),i&&ld("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function hee(e,t,n){const i=dee(e);return e=i.length===1?i[0]:e,oh(lee(i),[e],e)}hee("id");oh(e=>e,[],"identity");const Kg=oh(()=>0,[],"zero"),gee=oh(()=>1,[],"one");oh(()=>!0,[],"true");oh(()=>!1,[],"false");var pee=Array.isArray;function EL(e){return e[e.length-1]}function mee(e){return e!=null?pee(e)?e:[e]:[]}function yee(e){return!1}function vee(e){return yee()?e:()=>e}function bee(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function xee(e,t){return Object.hasOwn(e,t)}function See(e){return e&&EL(e)-e[0]||0}function Eee(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}const Kw=new Date,Jw=new Date;function dn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},r.filter=a=>dn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(Kw.setTime(+a),Jw.setTime(+s),e(Kw),e(Jw),Math.floor(n(Kw,Jw))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const wd=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wd);wd.range;const Xs=1e3,Mr=Xs*60,Vs=Mr*60,co=Vs*24,yC=co*7,t4=co*30,e_=co*365,Ws=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xs)},(e,t)=>(t-e)/Xs,e=>e.getUTCSeconds());Ws.range;const Ex=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xs)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getMinutes());Ex.range;const wx=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCMinutes());wx.range;const _x=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xs-e.getMinutes()*Mr)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getHours());_x.range;const Ax=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getUTCHours());Ax.range;const to=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mr)/co,e=>e.getDate()-1);to.range;const yu=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>e.getUTCDate()-1);yu.range;const wL=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>Math.floor(e/co));wL.range;function Nc(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mr)/yC)}const uh=Nc(0),Fv=Nc(1),wee=Nc(2),_ee=Nc(3),_d=Nc(4),Aee=Nc(5),$ee=Nc(6);uh.range;Fv.range;wee.range;_ee.range;_d.range;Aee.range;$ee.range;function Rc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yC)}const lh=Rc(0),Lv=Rc(1),Mee=Rc(2),Cee=Rc(3),Ad=Rc(4),Tee=Rc(5),Dee=Rc(6);lh.range;Lv.range;Mee.range;Cee.range;Ad.range;Tee.range;Dee.range;const d0=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());d0.range;const h0=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());h0.range;const Qa=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qa.range;const Za=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Za.range;function _L(e,t,n,i,r,a){const s=[[Ws,1,Xs],[Ws,5,5*Xs],[Ws,15,15*Xs],[Ws,30,30*Xs],[a,1,Mr],[a,5,5*Mr],[a,15,15*Mr],[a,30,30*Mr],[r,1,Vs],[r,3,3*Vs],[r,6,6*Vs],[r,12,12*Vs],[i,1,co],[i,2,2*co],[n,1,yC],[t,1,t4],[t,3,3*t4],[e,1,e_]];function o(c,d,h){const p=d<c;p&&([c,d]=[d,c]);const y=h&&typeof h.range=="function"?h:l(c,d,h),v=y?y.range(c,+d+1):[];return p?v.reverse():v}function l(c,d,h){const p=Math.abs(d-c)/h,y=sh(([,,S])=>S).right(s,p);if(y===s.length)return e.every($u(c/e_,d/e_,h));if(y===0)return wd.every(Math.max($u(c,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[kee,Oee]=_L(Za,h0,lh,wL,Ax,wx),[Nee,Ree]=_L(Qa,d0,uh,to,_x,Ex),jn="year",Fi="quarter",ni="month",ln="week",Li="date",ei="day",Ka="dayofyear",cr="hours",fr="minutes",Nr="seconds",oa="milliseconds",vC=[jn,Fi,ni,ln,Li,ei,Ka,cr,fr,Nr,oa],t_=vC.reduce((e,t,n)=>(e[t]=1+n,e),{});function bC(e){const t=mee(e).slice(),n={};return t.length||ld("Missing time unit."),t.forEach(r=>{xee(t_,r)?n[r]=1:ld(`Invalid time unit: ${r}.`)}),(n[ln]||n[ei]?1:0)+(n[Fi]||n[ni]||n[Li]?1:0)+(n[Ka]?1:0)>1&&ld(`Incompatible time units: ${e}`),t.sort((r,a)=>t_[r]-t_[a]),t}const zee={[jn]:"%Y ",[Fi]:"Q%q ",[ni]:"%b ",[Li]:"%d ",[ln]:"W%U ",[ei]:"%a ",[Ka]:"%j ",[cr]:"%H:00",[fr]:"00:%M",[Nr]:":%S",[oa]:".%L",[`${jn}-${ni}`]:"%Y-%m ",[`${jn}-${ni}-${Li}`]:"%Y-%m-%d ",[`${cr}-${fr}`]:"%H:%M"};function AL(e,t){const n=bee({},zee,t),i=bC(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const Ul=new Date;function xC(e){return Ul.setFullYear(e),Ul.setMonth(0),Ul.setDate(1),Ul.setHours(0,0,0,0),Ul}function $L(e){return CL(new Date(e))}function ML(e){return GA(new Date(e))}function CL(e){return to.count(xC(e.getFullYear())-1,e)}function GA(e){return uh.count(xC(e.getFullYear())-1,e)}function YA(e){return xC(e).getDay()}function Fee(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function TL(e){return kL(new Date(e))}function DL(e){return XA(new Date(e))}function kL(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return yu.count(t-1,e)}function XA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lh.count(t-1,e)}function VA(e){return Ul.setTime(Date.UTC(e,0,1)),Ul.getUTCDay()}function Lee(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function OL(e,t,n,i,r){const a=t||1,s=EL(e),o=(w,_,A)=>(A=A||w,Uee(n[A],i[A],w===s&&a,_)),l=new Date,c=Eee(e),d=c[jn]?o(jn):vee(2012),h=c[ni]?o(ni):c[Fi]?o(Fi):Kg,p=c[ln]&&c[ei]?o(ei,1,ln+ei):c[ln]?o(ln,1):c[ei]?o(ei,1):c[Li]?o(Li,1):c[Ka]?o(Ka,1):gee,y=c[cr]?o(cr):Kg,v=c[fr]?o(fr):Kg,b=c[Nr]?o(Nr):Kg,S=c[oa]?o(oa):Kg;return function(w){l.setTime(+w);const _=d(l);return r(_,h(l),p(l,_),y(l),v(l),b(l),S(l))}}function Uee(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function $d(e,t,n){return t+e*7-(n+6)%7}const Bee={[jn]:e=>e.getFullYear(),[Fi]:e=>Math.floor(e.getMonth()/3),[ni]:e=>e.getMonth(),[Li]:e=>e.getDate(),[cr]:e=>e.getHours(),[fr]:e=>e.getMinutes(),[Nr]:e=>e.getSeconds(),[oa]:e=>e.getMilliseconds(),[Ka]:e=>CL(e),[ln]:e=>GA(e),[ln+ei]:(e,t)=>$d(GA(e),e.getDay(),YA(t)),[ei]:(e,t)=>$d(1,e.getDay(),YA(t))},jee={[Fi]:e=>3*e,[ln]:(e,t)=>$d(e,0,YA(t))};function NL(e,t){return OL(e,t||1,Bee,jee,Fee)}const Pee={[jn]:e=>e.getUTCFullYear(),[Fi]:e=>Math.floor(e.getUTCMonth()/3),[ni]:e=>e.getUTCMonth(),[Li]:e=>e.getUTCDate(),[cr]:e=>e.getUTCHours(),[fr]:e=>e.getUTCMinutes(),[Nr]:e=>e.getUTCSeconds(),[oa]:e=>e.getUTCMilliseconds(),[Ka]:e=>kL(e),[ln]:e=>XA(e),[ei]:(e,t)=>$d(1,e.getUTCDay(),VA(t)),[ln+ei]:(e,t)=>$d(XA(e),e.getUTCDay(),VA(t))},Iee={[Fi]:e=>3*e,[ln]:(e,t)=>$d(e,0,VA(t))};function RL(e,t){return OL(e,t||1,Pee,Iee,Lee)}const qee={[jn]:Qa,[Fi]:d0.every(3),[ni]:d0,[ln]:uh,[Li]:to,[ei]:to,[Ka]:to,[cr]:_x,[fr]:Ex,[Nr]:Ws,[oa]:wd},Hee={[jn]:Za,[Fi]:h0.every(3),[ni]:h0,[ln]:lh,[Li]:yu,[ei]:yu,[Ka]:yu,[cr]:Ax,[fr]:wx,[Nr]:Ws,[oa]:wd};function ch(e){return qee[e]}function fh(e){return Hee[e]}function zL(e,t,n){return e?e.offset(t,n):void 0}function FL(e,t,n){return zL(ch(e),t,n)}function LL(e,t,n){return zL(fh(e),t,n)}function UL(e,t,n,i){return e?e.range(t,n,i):void 0}function BL(e,t,n,i){return UL(ch(e),t,n,i)}function jL(e,t,n,i){return UL(fh(e),t,n,i)}const _p=1e3,Ap=_p*60,$p=Ap*60,$x=$p*24,Gee=$x*7,n4=$x*30,WA=$x*365,PL=[jn,ni,Li,cr,fr,Nr,oa],Mp=PL.slice(0,-1),Cp=Mp.slice(0,-1),Tp=Cp.slice(0,-1),Yee=Tp.slice(0,-1),Xee=[jn,ln],i4=[jn,ni],IL=[jn],Jg=[[Mp,1,_p],[Mp,5,5*_p],[Mp,15,15*_p],[Mp,30,30*_p],[Cp,1,Ap],[Cp,5,5*Ap],[Cp,15,15*Ap],[Cp,30,30*Ap],[Tp,1,$p],[Tp,3,3*$p],[Tp,6,6*$p],[Tp,12,12*$p],[Yee,1,$x],[Xee,1,Gee],[i4,1,n4],[i4,3,3*n4],[IL,1,WA]];function qL(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(See(t))/n;let r=sh(o=>o[2]).right(Jg,i),a,s;return r===Jg.length?(a=IL,s=$u(t[0]/WA,t[1]/WA,n)):r?(r=Jg[i/Jg[r-1][2]<Jg[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=PL,s=Math.max($u(t[0],t[1],n),1)),{units:a,step:s}}function dh(e,t,n){return e.fields=t||[],e.fname=n,e}function Vee(e){return e.length===1?Wee(e[0]):Qee(e)}const Wee=e=>function(t){return t[e]},Qee=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Yp(e){throw Error(e)}function Zee(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Yp("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Yp("Access path missing closing bracket: "+e),i&&Yp("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Kee(e,t,n){const i=Zee(e);return e=i.length===1?i[0]:e,dh(Vee(i),[e],e)}Kee("id");dh(e=>e,[],"identity");dh(()=>0,[],"zero");dh(()=>1,[],"one");dh(()=>!0,[],"true");dh(()=>!1,[],"false");function Jee(e){return e===Object(e)}function ete(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function r4(e){return typeof e=="string"}function n_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ep(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function HL(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=tp(r),d=np(r),h=tp(a),p=np(a),y=tp(s),v=np(s),b=tp(o),S=np(o),w=tp(l),_=np(l),A={a:I,A:H,b:K,B:L,c:null,d:c4,e:c4,f:wte,g:Nte,G:zte,H:xte,I:Ste,j:Ete,L:GL,m:_te,M:Ate,p:V,q:ae,Q:h4,s:g4,S:$te,u:Mte,U:Cte,V:Tte,w:Dte,W:kte,x:null,X:null,y:Ote,Y:Rte,Z:Fte,"%":d4},$={a:se,A:de,b:be,B:Se,c:null,d:f4,e:f4,f:jte,g:Qte,G:Kte,H:Lte,I:Ute,j:Bte,L:XL,m:Pte,M:Ite,p:It,q:Qe,Q:h4,s:g4,S:qte,u:Hte,U:Gte,V:Yte,w:Xte,W:Vte,x:null,X:null,y:Wte,Y:Zte,Z:Jte,"%":d4},M={a:P,A:B,b:Y,B:R,c:U,d:u4,e:u4,f:mte,g:o4,G:s4,H:l4,I:l4,j:dte,L:pte,m:fte,M:hte,p:z,q:cte,Q:vte,s:bte,S:gte,u:ate,U:ste,V:ote,w:rte,W:ute,x:F,X:N,y:o4,Y:s4,Z:lte,"%":yte};A.x=D(n,A),A.X=D(i,A),A.c=D(t,A),$.x=D(n,$),$.X=D(i,$),$.c=D(t,$);function D(ge,ke){return function(ze){var le=[],qt=-1,Ze=0,Zt=ge.length,gn,Kt,Im;for(ze instanceof Date||(ze=new Date(+ze));++qt<Zt;)ge.charCodeAt(qt)===37&&(le.push(ge.slice(Ze,qt)),(Kt=a4[gn=ge.charAt(++qt)])!=null?gn=ge.charAt(++qt):Kt=gn==="e"?" ":"0",(Im=ke[gn])&&(gn=Im(ze,Kt)),le.push(gn),Ze=qt+1);return le.push(ge.slice(Ze,qt)),le.join("")}}function T(ge,ke){return function(ze){var le=ep(1900,void 0,1),qt=O(le,ge,ze+="",0),Ze,Zt;if(qt!=ze.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ke&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Ze=i_(ep(le.y,0,1)),Zt=Ze.getUTCDay(),Ze=Zt>4||Zt===0?Lv.ceil(Ze):Lv(Ze),Ze=yu.offset(Ze,(le.V-1)*7),le.y=Ze.getUTCFullYear(),le.m=Ze.getUTCMonth(),le.d=Ze.getUTCDate()+(le.w+6)%7):(Ze=n_(ep(le.y,0,1)),Zt=Ze.getDay(),Ze=Zt>4||Zt===0?Fv.ceil(Ze):Fv(Ze),Ze=to.offset(Ze,(le.V-1)*7),le.y=Ze.getFullYear(),le.m=Ze.getMonth(),le.d=Ze.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Zt="Z"in le?i_(ep(le.y,0,1)).getUTCDay():n_(ep(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Zt+5)%7:le.w+le.U*7-(Zt+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,i_(le)):n_(le)}}function O(ge,ke,ze,le){for(var qt=0,Ze=ke.length,Zt=ze.length,gn,Kt;qt<Ze;){if(le>=Zt)return-1;if(gn=ke.charCodeAt(qt++),gn===37){if(gn=ke.charAt(qt++),Kt=M[gn in a4?ke.charAt(qt++):gn],!Kt||(le=Kt(ge,ze,le))<0)return-1}else if(gn!=ze.charCodeAt(le++))return-1}return le}function z(ge,ke,ze){var le=c.exec(ke.slice(ze));return le?(ge.p=d.get(le[0].toLowerCase()),ze+le[0].length):-1}function P(ge,ke,ze){var le=y.exec(ke.slice(ze));return le?(ge.w=v.get(le[0].toLowerCase()),ze+le[0].length):-1}function B(ge,ke,ze){var le=h.exec(ke.slice(ze));return le?(ge.w=p.get(le[0].toLowerCase()),ze+le[0].length):-1}function Y(ge,ke,ze){var le=w.exec(ke.slice(ze));return le?(ge.m=_.get(le[0].toLowerCase()),ze+le[0].length):-1}function R(ge,ke,ze){var le=b.exec(ke.slice(ze));return le?(ge.m=S.get(le[0].toLowerCase()),ze+le[0].length):-1}function U(ge,ke,ze){return O(ge,t,ke,ze)}function F(ge,ke,ze){return O(ge,n,ke,ze)}function N(ge,ke,ze){return O(ge,i,ke,ze)}function I(ge){return s[ge.getDay()]}function H(ge){return a[ge.getDay()]}function K(ge){return l[ge.getMonth()]}function L(ge){return o[ge.getMonth()]}function V(ge){return r[+(ge.getHours()>=12)]}function ae(ge){return 1+~~(ge.getMonth()/3)}function se(ge){return s[ge.getUTCDay()]}function de(ge){return a[ge.getUTCDay()]}function be(ge){return l[ge.getUTCMonth()]}function Se(ge){return o[ge.getUTCMonth()]}function It(ge){return r[+(ge.getUTCHours()>=12)]}function Qe(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var ke=D(ge+="",A);return ke.toString=function(){return ge},ke},parse:function(ge){var ke=T(ge+="",!1);return ke.toString=function(){return ge},ke},utcFormat:function(ge){var ke=D(ge+="",$);return ke.toString=function(){return ge},ke},utcParse:function(ge){var ke=T(ge+="",!0);return ke.toString=function(){return ge},ke}}}var a4={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,tte=/^%/,nte=/[\\^$*+?|[\]().{}]/g;function nt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function ite(e){return e.replace(nte,"\\$&")}function tp(e){return new RegExp("^(?:"+e.map(ite).join("|")+")","i")}function np(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rte(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function ate(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function ste(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function ote(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function ute(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function s4(e,t,n){var i=Tn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function o4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function lte(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function cte(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function fte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function u4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function dte(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function l4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function hte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function gte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function pte(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function mte(e,t,n){var i=Tn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function yte(e,t,n){var i=tte.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function vte(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function bte(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function c4(e,t){return nt(e.getDate(),t,2)}function xte(e,t){return nt(e.getHours(),t,2)}function Ste(e,t){return nt(e.getHours()%12||12,t,2)}function Ete(e,t){return nt(1+to.count(Qa(e),e),t,3)}function GL(e,t){return nt(e.getMilliseconds(),t,3)}function wte(e,t){return GL(e,t)+"000"}function _te(e,t){return nt(e.getMonth()+1,t,2)}function Ate(e,t){return nt(e.getMinutes(),t,2)}function $te(e,t){return nt(e.getSeconds(),t,2)}function Mte(e){var t=e.getDay();return t===0?7:t}function Cte(e,t){return nt(uh.count(Qa(e)-1,e),t,2)}function YL(e){var t=e.getDay();return t>=4||t===0?_d(e):_d.ceil(e)}function Tte(e,t){return e=YL(e),nt(_d.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function Dte(e){return e.getDay()}function kte(e,t){return nt(Fv.count(Qa(e)-1,e),t,2)}function Ote(e,t){return nt(e.getFullYear()%100,t,2)}function Nte(e,t){return e=YL(e),nt(e.getFullYear()%100,t,2)}function Rte(e,t){return nt(e.getFullYear()%1e4,t,4)}function zte(e,t){var n=e.getDay();return e=n>=4||n===0?_d(e):_d.ceil(e),nt(e.getFullYear()%1e4,t,4)}function Fte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nt(t/60|0,"0",2)+nt(t%60,"0",2)}function f4(e,t){return nt(e.getUTCDate(),t,2)}function Lte(e,t){return nt(e.getUTCHours(),t,2)}function Ute(e,t){return nt(e.getUTCHours()%12||12,t,2)}function Bte(e,t){return nt(1+yu.count(Za(e),e),t,3)}function XL(e,t){return nt(e.getUTCMilliseconds(),t,3)}function jte(e,t){return XL(e,t)+"000"}function Pte(e,t){return nt(e.getUTCMonth()+1,t,2)}function Ite(e,t){return nt(e.getUTCMinutes(),t,2)}function qte(e,t){return nt(e.getUTCSeconds(),t,2)}function Hte(e){var t=e.getUTCDay();return t===0?7:t}function Gte(e,t){return nt(lh.count(Za(e)-1,e),t,2)}function VL(e){var t=e.getUTCDay();return t>=4||t===0?Ad(e):Ad.ceil(e)}function Yte(e,t){return e=VL(e),nt(Ad.count(Za(e),e)+(Za(e).getUTCDay()===4),t,2)}function Xte(e){return e.getUTCDay()}function Vte(e,t){return nt(Lv.count(Za(e)-1,e),t,2)}function Wte(e,t){return nt(e.getUTCFullYear()%100,t,2)}function Qte(e,t){return e=VL(e),nt(e.getUTCFullYear()%100,t,2)}function Zte(e,t){return nt(e.getUTCFullYear()%1e4,t,4)}function Kte(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ad(e):Ad.ceil(e),nt(e.getUTCFullYear()%1e4,t,4)}function Jte(){return"+0000"}function d4(){return"%"}function h4(e){return+e}function g4(e){return Math.floor(+e/1e3)}var Bf,SC,WL,EC,QL;ene({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ene(e){return Bf=HL(e),SC=Bf.format,WL=Bf.parse,EC=Bf.utcFormat,QL=Bf.utcParse,Bf}function Dp(e){const t={};return n=>t[n]||(t[n]=e(n))}function tne(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=nne(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function nne(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function ZL(e){const t=Dp(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=cc(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return tne(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=cc(s??",f");const o=$u(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let c;if(s.precision==null)switch(s.type){case"s":return isNaN(c=xL(o,l))||(s.precision=c),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=SL(o,l))||(s.precision=c-(s.type==="e"));break}case"f":case"%":{isNaN(c=bL(o))||(s.precision=c-(s.type==="%")*2);break}}return t(s)}}}let QA;KL();function KL(){return QA=ZL({format:Sx,formatPrefix:mC})}function JL(e){return ZL(vL(e))}function Uv(e){return arguments.length?QA=JL(e):QA}function p4(e,t,n){n=n||{},Jee(n)||Yp(`Invalid time multi-format specifier: ${n}`);const i=t(Nr),r=t(fr),a=t(cr),s=t(Li),o=t(ln),l=t(ni),c=t(Fi),d=t(jn),h=e(n[oa]||".%L"),p=e(n[Nr]||":%S"),y=e(n[fr]||"%I:%M"),v=e(n[cr]||"%I %p"),b=e(n[Li]||n[ei]||"%a %d"),S=e(n[ln]||"%b %d"),w=e(n[ni]||"%B"),_=e(n[Fi]||"%B"),A=e(n[jn]||"%Y");return $=>(i($)<$?h:r($)<$?p:a($)<$?y:s($)<$?v:l($)<$?o($)<$?b:S:d($)<$?c($)<$?w:_:A)($)}function eU(e){const t=Dp(e.format),n=Dp(e.utcFormat);return{timeFormat:i=>r4(i)?t(i):p4(t,ch,i),utcFormat:i=>r4(i)?n(i):p4(n,fh,i),timeParse:Dp(e.parse),utcParse:Dp(e.utcParse)}}let ZA;tU();function tU(){return ZA=eU({format:SC,parse:WL,utcFormat:EC,utcParse:QL})}function nU(e){return eU(HL(e))}function g0(e){return arguments.length?ZA=nU(e):ZA}const KA=(e,t)=>ete({},e,t);function iU(e,t){const n=e?JL(e):Uv(),i=t?nU(t):g0();return KA(n,i)}function wC(e,t){const n=arguments.length;return n&&n!==2&&Yp("defaultLocale expects either zero or two arguments."),n?KA(Uv(e),g0(t)):KA(Uv(),g0())}function ine(){return KL(),tU(),wC()}const rne=/^(data:|([A-Za-z]+:)?\/\/)/,ane=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,sne=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,m4="file://";function one(e,t){return n=>({options:n||{},sanitize:lne,load:une,fileAccess:!1,file:cne(),http:dne(e)})}async function une(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function lne(e,t){t=hC({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=ane.test(e.replace(sne,""));(e==null||typeof e!="string"||!o)&&Pa("Sanitize failure, invalid URI: "+gC(e));const l=rne.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(m4))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(m4.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function cne(e){return fne}async function fne(){Pa("No file system access.")}function dne(e){return e?async function(t,n){const i=hC({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?dC(a[r])?a[r]():a.text():Pa(a.status+""+a.statusText)}:hne}async function hne(){Pa("No HTTP fetch method available.")}const gne=e=>e!=null&&e===e,pne=e=>e==="true"||e==="false"||e===!0||e===!1,mne=e=>!Number.isNaN(Date.parse(e)),rU=e=>!Number.isNaN(+e)&&!(e instanceof Date),yne=e=>rU(e)&&Number.isInteger(+e),JA={boolean:_J,integer:G6,number:G6,date:$J,string:MJ,unknown:eL},ay=[pne,yne,rU,mne],vne=["boolean","integer","number","date"];function aU(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=ay.length,r=ay.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&gne(l)&&!ay[o](l)&&(r[o]=0,++s,s===ay.length))return"string";return vne[r.reduce((a,s)=>a===0?s:a,0)-1]}function sU(e,t){return t.reduce((n,i)=>(n[i]=aU(e,i),n),{})}function y4(e){const t=function(n,i){const r={delimiter:e};return _C(n,i?hC(i,r):r)};return t.responseType="text",t}function _C(e,t){return t.header&&(e=t.header.map(gC).join(t.delimiter)+`
`+e),kJ(t.delimiter).parse(e+"")}_C.responseType="text";function bne(e){return typeof Buffer=="function"&&dC(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function AC(e,t){const n=t&&t.property?J7(t.property):eL;return nL(e)&&!bne(e)?xne(n(e),t):n(JSON.parse(e))}AC.responseType="json";function xne(e,t){return!tL(e)&&SJ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Sne={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function oU(e,t){let n,i,r,a;return e=AC(e,t),t&&t.feature?(n=zJ,r=t.feature):t&&t.mesh?(n=LJ,r=t.mesh,a=Sne[t.filter]):Pa("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):Pa("Invalid TopoJSON object: "+r),i&&i.features||[i]}oU.responseType="json";const Qy={dsv:_C,csv:y4(","),tsv:y4("	"),json:AC,topojson:oU};function $C(e,t){return arguments.length>1?(Qy[e]=t,this):iL(Qy,e)?Qy[e]:null}function uU(e){const t=$C(e);return t&&t.responseType||"text"}function lU(e,t,n,i){t=t||{};const r=$C(t.type||"json");return r||Pa("Unknown data format type: "+t.type),e=r(e,t),t.parse&&Ene(e,t.parse,n,i),iL(e,"columns")&&delete e.columns,e}function Ene(e,t,n,i){if(!e.length)return;const r=g0();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,c,d,h;t==="auto"&&(t=sU(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!JA[v])throw Error("Illegal format pattern: "+y+":"+v);return JA[v]});for(l=0,d=e.length,h=a.length;l<d;++l)for(s=e[l],c=0;c<h;++c)o=a[c],s[o]=p[c](s[o])}const Mx=one(typeof fetch<"u"&&fetch);function Cx(e){const t=e||W7,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function Zy(e,t){try{await t(e)}catch(n){e.error(n)}}const cU=Symbol("vega_id");let wne=1;function Tx(e){return!!(e&&we(e))}function we(e){return e[cU]}function fU(e,t){return e[cU]=t,e}function st(e){const t=e===Object(e)?e:{data:e};return we(t)?t:fU(t,wne++)}function MC(e){return Dx(e,st({}))}function Dx(e,t){for(const n in e)t[n]=e[n];return t}function dU(e,t){return fU(t,we(e))}function zc(e,t){return e?t?(n,i)=>e(n,i)||we(t(n))-we(t(i)):(n,i)=>e(n,i)||we(n)-we(i):null}function hU(e){return e&&e.constructor===Fc}function Fc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:Fc,insert(o){const l=Ov(o),c=l.length;for(let d=0;d<c;++d)e.push(l[d]);return this},remove(o){const l=mu(o)?i:t,c=Ov(o),d=c.length;for(let h=0;h<d;++h)l.push(c[h]);return this},modify(o,l,c){const d={field:l,value:fC(c)};return mu(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return mu(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const c={},d={};let h,p,y,v,b,S;for(h=0,p=l.length;h<p;++h)c[we(l[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],c[we(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],l.forEach(_=>{v(_)&&(c[we(_)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=we(b),c[S]?c[S]=1:o.add.push(st(e[h]));for(h=0,p=l.length;h<p;++h)b=l[h],c[we(b)]<0&&o.rem.push(b);function w(_,A,$){$?_[A]=$(_):o.encode=A,s||(d[we(_)]=_)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=c[we(b)],S>0&&(w(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,l.forEach(_=>{v(_)&&c[we(_)]>0&&w(_,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(_=>c[we(_)]>0):l.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const Ky="_:mod:_";function kx(){Object.defineProperty(this,Ky,{writable:!0,value:{}})}kx.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[Ky];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=_u(n)?1+n.length:-1),r},modified(e,t){const n=this[Ky];if(arguments.length){if(_u(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Ky]={},this}};let _ne=0;const Ane="pulse",$ne=new kx,Mne=1,Cne=2;function xt(e,t,n,i){this.id=++_ne,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function v4(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}xt.prototype={targets(){return this._targets||(this._targets=Cx(xx))},set(e){return this.value!==e?(this.value=e,1):0},skip:v4(Mne),modified:v4(Cne),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new kx,r=this._argops=this._argops||[],a=[];let s,o,l,c;const d=(h,p,y)=>{y instanceof xt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===Ane)Ov(o).forEach(h=>{h instanceof xt?h!==this&&(h.targets().add(this),a.push(h)):Zl("Pulse parameters must be operator instances.")}),this.source=o;else if(_u(o))for(i.set(s,-1,Array(l=o.length)),c=0;c<l;++c)d(s,c,o[c]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||$ne,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Tne(e,t,n,i){let r=1,a;return e instanceof xt?a=e:e&&e.prototype instanceof xt?a=new e:mu(e)?a=new xt(null,e):(r=0,a=new xt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function Dne(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let kne=0;function Ox(e,t,n){this.id=++kne,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function tu(e,t,n){return new Ox(e,t,n)}Ox.prototype={_filter:BA,_apply:W7,targets(){return this._targets||(this._targets=Cx(xx))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=tu(e);return this.targets().add(t),t},apply(e){const t=tu(null,e);return this.targets().add(t),t},merge(){const e=tu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=tu();return this.targets().add(tu(null,null,gJ(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(tu(null,null,()=>n=!0)),t.targets().add(tu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=BA,this._targets=null}};function One(e,t,n,i){const r=this,a=tu(n,i),s=function(c){c.dataflow=r;try{a.receive(c)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Ov(e);const l=o.length;for(let c=0;c<l;++c)o[c].addEventListener(t,s);return a}function Nne(e,t){const n=this.locale();return lU(e,t,n.timeParse,n.utcParse)}function Rne(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function zne(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:uU(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function Fne(e,t,n){const i=this,r=i._pending||Lne(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(BA).insert(a.data||[])),r.done(),a}function Lne(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Une={skip:!0};function Bne(e,t,n,i,r){return(e instanceof xt?Pne:jne)(this,e,t,n,i,r),this}function jne(e,t,n,i,r,a){const s=Z7({},a,Une);let o,l;mu(n)||(n=fC(n)),i===void 0?o=c=>e.touch(n(c)):mu(i)?(l=new xt(null,i,r,!1),o=c=>{l.evaluate(c);const d=n(c),h=l.value;hU(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=c=>e.update(n(c),i,s),t.apply(o)}function Pne(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new xt(null,Ine(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function Ine(e,t){return t=mu(t)?t:fC(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function qne(e){e.rank=++this._rank}function Hne(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&Zl("Cycle detected in dataflow graph.")}const Bv={},Na=1,iu=2,Us=4,Gne=Na|iu,b4=Na|Us,jf=Na|iu|Us,x4=8,ip=16,S4=32,E4=64;function vu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function r_(e,t){const n=[];return zl(e,t,i=>n.push(i)),n}function w4(e,t){const n={};return e.visit(t,i=>{n[we(i)]=1}),i=>n[we(i)]?null:i}function sy(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}vu.prototype={StopPropagation:Bv,ADD:Na,REM:iu,MOD:Us,ADD_REM:Gne,ADD_MOD:b4,ALL:jf,REFLOW:x4,SOURCE:ip,NO_SOURCE:S4,NO_FIELDS:E4,fork(e){return new vu(this.dataflow).init(this,e)},clone(){const e=this.fork(jf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(jf|ip)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new vu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&E4)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&iu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Us?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&S4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||jf;return t&Na&&this.add.length||t&iu&&this.rem.length||t&Us&&this.mod.length},reflow(e){if(e)return this.fork(jf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Us,w4(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return _u(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?_u(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Na&&(n.addF=sy(n.addF,t)),e&iu&&(n.remF=sy(n.remF,t)),e&Us&&(n.modF=sy(n.modF,t)),e&ip&&(n.srcF=sy(n.srcF,t)),n},materialize(e){e=e||jf;const t=this;return e&Na&&t.addF&&(t.add=r_(t.add,t.addF),t.addF=null),e&iu&&t.remF&&(t.rem=r_(t.rem,t.remF),t.remF=null),e&Us&&t.modF&&(t.mod=r_(t.mod,t.modF),t.modF=null),e&ip&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&ip)return zl(n.source,n.srcF,i),n;e&Na&&zl(n.add,n.addF,i),e&iu&&zl(n.rem,n.remF,i),e&Us&&zl(n.mod,n.modF,i);const r=n.source;if(e&x4&&r){const a=n.add.length+n.mod.length;a===r.length||(a?zl(r,w4(n,b4),i):zl(r,n.srcF,i))}return n}};function CC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}K7(CC,vu,{fork(e){const t=new vu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?_u(e)?e.some(i=>n[i]):n[e]:0},filter(){Zl("MultiPulse does not support filtering.")},materialize(){Zl("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function Yne(e,t,n){const i=this,r=[];if(i._pulse)return gU(i);if(i._pending&&await i._pending,t&&await Zy(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new vu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Cx(xx);let s=0,o,l,c;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=Bv),l!==Bv&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),c=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),c&&(i._postrun=[],i.error(c)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await Zy(i,d[h].callback)}return n&&await Zy(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function Xne(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Vne(e,t,n){return this._pulse?gU(this):(this.evaluate(e,t,n),this)}function Wne(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function gU(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Qne(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Zne(e,t){const n=e.source,i=this._clock;return n&&_u(n)?new CC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Kne(this._pulse,n&&n.pulse)}function Kne(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Bv&&(e.source=t.source),e)}const TC={skip:!1,force:!1};function Jne(e,t){const n=t||TC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function eie(e,t,n){const i=n||TC;return(e.set(t)||i.force)&&this.touch(e,i),this}function tie(e,t,n){this.touch(e,n||TC);const i=new vu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function nie(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),pU(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,iie(t,0,e)):i=n,i}}}function pU(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function iie(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,pU(e,i,t,n)}function cd(){this.logger(hJ()),this.logLevel(Q7),this._clock=0,this._rank=0,this._locale=wC();try{this._loader=Mx()}catch{}this._touched=Cx(xx),this._input={},this._pulse=null,this._heap=nie((e,t)=>e.qrank-t.qrank),this._postrun=[]}function rp(e){return function(){return this._log[e].apply(this,arguments)}}cd.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:rp("error"),warn:rp("warn"),info:rp("info"),debug:rp("debug"),logLevel:rp("level"),cleanThreshold:1e4,add:Tne,connect:Dne,rank:qne,rerank:Hne,pulse:tie,touch:Jne,update:eie,changeset:Fc,ingest:Rne,parse:Nne,preload:Fne,request:zne,events:One,on:Bne,evaluate:Yne,run:Vne,runAsync:Xne,runAfter:Wne,_enqueue:Qne,_getPulse:Zne};function J(e,t){xt.call(this,e,null,t)}K7(J,xt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Md={};function mU(e){const t=yU(e);return t&&t.Definition||null}function yU(e){return e=e&&e.toLowerCase(),pJ(Md,e)?Md[e]:null}function ga(e,t,n){return e.fields=t||[],e.fname=n,e}function Ri(e){return e==null?null:e.fname}function Ja(e){return e==null?null:e.fields}function vU(e){return e.length===1?rie(e[0]):aie(e)}const rie=e=>function(t){return t[e]},aie=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Pn(e){throw Error(e)}function bU(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Pn("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Pn("Access path missing closing bracket: "+e),i&&Pn("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function p0(e,t,n){const i=bU(e);return e=i.length===1?i[0]:e,ga((n&&n.get||vU)(i),[e],t||e)}p0("id");const xU=ga(e=>e,[],"identity"),sie=ga(()=>0,[],"zero");ga(()=>1,[],"one");const oie=ga(()=>!0,[],"true");ga(()=>!1,[],"false");var SU=Array.isArray;function EU(e){return e[e.length-1]}function wU(e){return e==null||e===""?null:+e}function ci(e){return e!=null?SU(e)?e:[e]:[]}function _U(e){return typeof e=="function"}const uie="descending";function lie(e,t,n){n=n||{},t=ci(t)||[];const i=[],r=[],a={},s=n.comparator||cie;return ci(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===uie?-1:1),r.push(o=_U(o)?o:p0(o,null,n)),(Ja(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:ga(s(r,i),Object.keys(a))}const DC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),cie=(e,t)=>e.length===1?fie(e[0],t[0]):die(e,t,e.length),fie=(e,t)=>function(n,i){return DC(e(n),e(i))*t},die=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=DC(a(i),a(r));return s*t[o]});function hie(e){return _U(e)?e:()=>e}function kC(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function m0(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function gie(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function V0(e,t){return Object.hasOwn(e,t)}const oy={};function OC(e){let t={},n;function i(a){return V0(t,a)&&t[a]!==oy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===oy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=oy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==oy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return r}function Ue(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),kC(i,n)}function pie(e,t,n){e&&(e=t?ci(e).map(o=>o.replace(/\\(.)/g,"$1")):ci(e));const i=e&&e.length,r=vU,a=o=>r(t?[o]:bU(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return ga(s,e,"key")}function mie(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,c=0;for(;o<r&&l<a;++c)s[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++c)s[c]=t[o];for(;l<a;++l,++c)s[c]=n[l];return s}function yie(e){return e&&EU(e)-e[0]||0}function*AU(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function NC(e,t,n){const i=Float64Array.from(AU(e,n));return i.sort(eo),t.map(r=>hL(i,r))}function RC(e,t){return NC(e,[.25,.5,.75],t)}function zC(e,t){const n=e.length,i=GJ(e,t),r=RC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function $U(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,c,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/i),c=e.minstep||0,o=Math.max(c,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=c&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Rr=Math.random;function vie(e){Rr=e}function MU(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(AU(e,i)),a=r.length,s=t;let o,l,c,d;for(c=0,d=Array(s);c<s;++c){for(o=0,l=0;l<a;++l)o+=r[~~(Rr()*a)];d[c]=o/a}return d.sort(eo),[HA(d,n/2),HA(d,1-n/2)]}function CU(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),c=l,d=l+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(c=(l+c)/2;s<o;++s)a[s]=c;d=h+t,l=h}c=h}for(c=(l+c)/2;s<o;++s)a[s]=c;return n?bie(a,t+t/4):a}function bie(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function xie(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Sie(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Rr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const TU=Math.sqrt(2*Math.PI),Eie=Math.SQRT2;let ap=NaN;function Nx(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(ap===ap)n=ap,ap=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,ap=i*a}return e+n*t}function FC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*TU)}function Rx(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function zx(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Eie*wie(2*e-1)}function wie(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function LC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Nx(n,i),pdf:a=>FC(a,n,i),cdf:a=>Rx(a,n,i),icdf:a=>zx(a,n,i)};return r.mean(e).stdev(t)}function UC(e,t){const n=LC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=zC(e)),r):t},sample(){return e[~~(Rr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function BC(e,t){return e=e||0,t=t??1,Math.exp(e+Nx()*t)}function jC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*TU*e)}function PC(e,t,n){return Rx(Math.log(e),t,n)}function IC(e,t,n){return Math.exp(zx(e,t,n))}function DU(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>BC(n,i),pdf:a=>jC(a,n,i),cdf:a=>PC(a,n,i),icdf:a=>IC(a,n,i)};return r.mean(e).stdev(t)}function kU(e,t){let n=0,i;function r(s){const o=[];let l=0,c;for(c=0;c<n;++c)l+=o[c]=s[c]==null?1:+s[c];for(c=0;c<n;++c)o[c]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Rr();let o=e[n-1],l=i[0],c=0;for(;c<n-1;l+=i[++c])if(s<l){o=e[c];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function qC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rr()}function HC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function YC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function OU(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>qC(n,i),pdf:a=>HC(a,n,i),cdf:a=>GC(a,n,i),icdf:a=>YC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function XC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function W0(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Fx(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,c=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,l+=(d-l)/o,c+=(h-c)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=c;return[a,s,l,c]}function Q0(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function hh(e,t,n,i,r){let a=0,s=0;return Q0(e,t,n,(o,l)=>{const c=l-r(o),d=l-i;a+=c*c,s+=d*d}),1-a/s}function VC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Q0(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=W0(i,r,a,s),c=d=>l[0]+l[1]*d;return{coef:l,predict:c,rSquared:hh(e,t,n,r,c)}}function NU(e,t,n){let i=0,r=0,a=0,s=0,o=0;Q0(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=W0(i,r,a,s),c=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:c,rSquared:hh(e,t,n,r,c)}}function RU(e,t,n){const[i,r,a,s]=Fx(e,t,n);let o=0,l=0,c=0,d=0,h=0,p,y,v;Q0(e,t,n,(_,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,l+=(v-l)/h,c+=(v*y-c)/h,d+=(p*v-d)/h});const[b,S]=W0(l/s,o/s,c/s,d/s),w=_=>Math.exp(b+S*(_-a));return{coef:[Math.exp(b-S*a),S],predict:w,rSquared:hh(e,t,n,s,w)}}function zU(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Q0(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const c=W0(i,r,a,s),d=h=>c[0]*Math.pow(h,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:d,rSquared:hh(e,t,n,o,d)}}function WC(e,t,n){const[i,r,a,s]=Fx(e,t,n),o=i.length;let l=0,c=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,l+=(S-l)/y,c+=(S*v-c)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const w=d-l*l,_=l*w-c*c,A=(p*l-h*c)/_,$=(h*w-p*c)/_,M=-A*l,D=T=>(T=T-a,A*T*T+$*T+M+s);return{coef:[M-$*a+A*a*a+s,$-2*A*a,A],predict:D,rSquared:hh(e,t,n,s,D)}}function FU(e,t,n,i){if(i===0)return XC(e,t,n);if(i===1)return VC(e,t,n);if(i===2)return WC(e,t,n);const[r,a,s,o]=Fx(e,t,n),l=r.length,c=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(c.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(c);const w=Aie(d),_=A=>{A-=s;let $=o+w[0]+w[1]*A+w[2]*A*A;for(p=3;p<h;++p)$+=w[p]*Math.pow(A,p);return $};return{coef:_ie(h,w,-s,o),predict:_,rSquared:hh(e,t,n,o,_)}}function _ie(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function Aie(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const _4=2,A4=1e-12;function LU(e,t,n,i){const[r,a,s,o]=Fx(e,t,n,!0),l=r.length,c=Math.max(2,~~(i*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=_4;){const v=[0,c-1];for(let S=0;S<l;++S){const w=r[S],_=v[0],A=v[1],$=w-r[_]>r[A]-w?_:A;let M=0,D=0,T=0,O=0,z=0;const P=1/Math.abs(r[$]-w||1);for(let R=_;R<=A;++R){const U=r[R],F=a[R],N=$ie(Math.abs(w-U)*P)*p[R],I=U*N;M+=N,D+=I,T+=F*N,O+=F*I,z+=U*I}const[B,Y]=W0(D/M,T/M,O/M,z/M);d[S]=B+Y*w,h[S]=Math.abs(a[S]-d[S]),Mie(r,S+1,v)}if(y===_4)break;const b=gL(h);if(Math.abs(b)<A4)break;for(let S=0,w,_;S<l;++S)w=h[S]/(6*b),p[S]=w>=1?A4:(_=1-w*w)*_}return Cie(r,d,s,o)}function $ie(e){return(e=1-e*e*e)*e*e}function Mie(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function Cie(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],c;for(;s<r;++s)c=e[s]+n,l[0]===c?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[c,t[s]],a.push(l));return l[1]+=i,a}const Tie=.5*Math.PI/180;function Lx(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,c=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)c.push(r(a+b/n*o));return c.push(r(s)),c}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=c[0],p=d[d.length-1];const y=1/o,v=Die(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=l&&kie(h,b,p,y,v)>Tie?d.push(b):(h=p,c.push(p),d.pop()),p=d[d.length-1]}return c}function Die(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function kie(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function Oie(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function e$(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Oie(e)}function UU(e,t,n){return n||e+(t?"_"+t:"")}const a_=()=>{},Nie={init:a_,add:a_,rem:a_,idx:0},y0={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Z0=Object.keys(y0).filter(e=>e!=="__count__");function Rie(e,t){return(n,i)=>kC({name:e,aggregate_param:i,out:n||e},Nie,t)}[...Z0,"__count__"].forEach(e=>{y0[e]=Rie(e,y0[e])});function BU(e,t,n){return y0[e](n,t)}function jU(e,t){return e.idx-t.idx}function zie(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=y0[r]())})};return e.forEach(n),Object.values(t).sort(jU)}function Fie(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Lie(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Uie(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Bie(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function PU(e,t){const n=t||xU,i=zie(e),r=e.slice().sort(jU);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=Fie,a.prototype.add=Lie,a.prototype.rem=Uie,a.prototype.set=Bie,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function QC(e){this._key=e?p0(e):we,this.reset()}const qn=QC.prototype;qn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};qn.add=function(e){this._add.push(e)};qn.rem=function(e){this._rem.push(e)};qn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,c;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(c=e[o])]?s[n(c)]=0:a[l++]=c;return this._rem=[],this._add=a};qn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",V0(n,a)||(n[a]=1,++r);return r};qn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=gie(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};qn.argmin=function(e){return this.extent(e)[0]||{}};qn.argmax=function(e){return this.extent(e)[1]||{}};qn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};qn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};qn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=RC(this.values(),e),this._get=e),this._q};qn.q1=function(e){return this.quartile(e)[0]};qn.q2=function(e){return this.quartile(e)[1]};qn.q3=function(e){return this.quartile(e)[2]};qn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=MU(this.values(),1e3,.05,e),this._get=e),this._ci};qn.ci0=function(e){return this.ci(e)[0]};qn.ci1=function(e){return this.ci(e)[1]};function Mu(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Mu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Z0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ue(Mu,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,c,d,h;for(l in o)for(d=o[l].tuple,c=0;c<r;++c)i[c][h=d[n[c]]]=h}a(e._prev),a(t);function s(o,l,c){const d=n[c],h=i[c++];for(const p in h){const y=o?o+"|"+p:p;l[d]=h[p],c<r?s(y,l,c):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(_){const A=ci(Ja(_)),$=A.length;let M=0,D;for(;M<$;++M)i[D=A[M]]||(i[D]=1,t.push(D))}this._dims=ci(e.groupby),this._dnames=this._dims.map(_=>{const A=Ri(_);return r(_),n.push(A),A}),this.cellkey=e.key?e.key:e$(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],c=a.length,d={};let h,p,y,v,b,S,w;for(c!==s.length&&Pn("Unmatched number of fields and aggregate ops."),w=0;w<c;++w){if(h=a[w],p=s[w],y=o[w]||null,h==null&&p!=="count"&&Pn("Null aggregate field specified."),b=Ri(h),S=UU(p,b,l[w]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(BU(p,y,S))}return this._measures=this._measures.map(_=>PU(_,_.field)),Object.create(null)},cellkey:e$(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new QC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?dU(t.tuple,a):st(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,c,d,h;if(i)for(c in i)l=i[c],(!r||l.num)&&s.push(l.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const jie=1e-14;function ZC(e){J.call(this,null,e)}ZC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ue(ZC,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let c;return e.modified()?(t=t.reflow(!0),c=t.SOURCE):c=t.modified(Ja(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?d=>{const h=i(d);d[o]=h,d[l]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=$U(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(c){let d=wU(t(c));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(jie+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=ga(l,Ja(t),e.name||"bin_"+Ri(t))}});function IU(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,c)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),c&&l&&r.sort(l),a.length&&(r=l?mie(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function KC(e){J.call(this,[],e)}KC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ue(KC,J,{transform(e,t){const n=t.fork(t.ALL),i=IU(we,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(zc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function qU(e){xt.call(this,null,Pie,e)}Ue(qU,xt);function Pie(e){return this.value&&!e.modified()?this.value:lie(e.fields,e.orders)}function JC(e){J.call(this,null,e)}JC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Iie(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ue(JC,J,{transform(e,t){const n=h=>p=>{for(var y=Iie(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],c=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,c;for(o in n)l=i[o],c=n[o]||0,!l&&c?(i[o]=l=st({}),l[r]=o,l[a]=c,s.add.push(l)):c===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==c&&(l[a]=c,s.mod.push(l));return s.modifies(t)}});function e3(e){J.call(this,null,e)}e3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ue(e3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=qie(o,r,a,e.filter||oie)):n.mod=o,n.source=this.value,n.modifies(i)}});function qie(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,c;o<s;++o)for(a[t]=c=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(st(a)),a={},a[t]=c);return r}const $4={kde:UC,mixture:kU,normal:LC,lognormal:DU,uniform:OU},Hie="distributions",M4="function",Gie="field";function HU(e,t){const n=e[M4];V0($4,n)||Pn("Unknown distribution function: "+n);const i=$4[n]();for(const r in e)r===Gie?i.data((e.from||t()).map(e[r])):r===Hie?i[r](e[r].map(a=>HU(a,t))):typeof i[r]===M4&&i[r](e[r]);return i}function t3(e){J.call(this,null,e)}const GU=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Yie={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:GU},{name:"weights",type:"number",array:!0}]};t3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:GU.concat(Yie)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ue(t3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=HU(e.distribution,Xie(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&Pn("Invalid density method: "+s),!e.extent&&!i.data&&Pn("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||m0(i.data()),c=Lx(s,l,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],st(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function Xie(e){return()=>e.materialize(e.SOURCE).source}function YU(e,t){return e?e.map((n,i)=>t[i]||Ri(n)):null}function n3(e,t,n){const i=[],r=h=>h(l);let a,s,o,l,c,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],c=t.map(r),d=a[c],d||(a[c]=d=[],d.dims=c,i.push(d)),d.push(n(l));return i}const XU="bin";function i3(e){J.call(this,null,e)}i3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:XU}]};const Vie=(e,t)=>yie(m0(e,t))/30;Ue(i3,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=n3(t.source,e.groupby,xU),r=e.smooth||!1,a=e.field,s=e.step||Vie(n,a),o=zc((v,b)=>a(v)-a(b)),l=e.as||XU,c=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<c;++p){const v=i[p].sort(o);y=-1;for(const b of CU(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][l]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(l)}});function VU(e){xt.call(this,null,Wie,e),this.modified(!0)}Ue(VU,xt);function Wie(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ga(n=>t(n,e),Ja(t),Ri(t))}function r3(e){J.call(this,[void 0,void 0],e)}r3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ue(r3,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=wU(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=Ri(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function a3(e,t){xt.call(this,e),this.parent=t,this.count=0}Ue(a3,xt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Ux(e){J.call(this,{},e),this._keys=OC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}Ue(Ux,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=V0(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new a3(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=we(l),d=a.get(c);d!==void 0&&(a.delete(c),o(d).rem(l))}),t.visit(t.ADD,l=>{const c=i(l);a.set(we(l),c),o(c).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const c=we(l),d=a.get(c),h=i(l);d===h?o(h).mod(l):(a.set(c,h),o(d).rem(l),o(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(we(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const c=we(l),d=a.get(c),h=i(l);d!==h&&(a.set(c,h),o(d).rem(l),o(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function WU(e){xt.call(this,null,Qie,e)}Ue(WU,xt);function Qie(e){return this.value&&!e.modified()?this.value:SU(e.name)?ci(e.name).map(t=>p0(t)):p0(e.name,e.as)}function s3(e){J.call(this,OC(),e)}s3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ue(s3,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let c=!0;t.visit(t.REM,h=>{const p=we(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?a.push(h):i.set(we(h),1)});function d(h){const p=we(h),y=l(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):c&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(c=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function o3(e){J.call(this,[],e)}o3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ue(o3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=YU(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),c=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<c;++d){for(p=MC(o),h=0;h<s;++h)p[r[h]]=(y=l[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function u3(e){J.call(this,[],e)}u3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ue(u3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Ri),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let d=0,h;d<l;++d)h=MC(c),h[s]=r[d],h[o]=i[d](c),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function l3(e){J.call(this,null,e)}l3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ue(l3,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function QU(e){J.call(this,[],e)}Ue(QU,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=st(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const uy={value:"value",median:gL,mean:ZJ,min:qA,max:Kl},Zie=[];function c3(e){J.call(this,[],e)}c3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Kie(e){var t=e.method||uy.value,n;if(uy[t]==null)Pn("Unrecognized imputation method: "+t);else return t===uy.value?(n=e.value!==void 0?e.value:0,()=>n):uy[t]}function Jie(e){const t=e.field;return n=>n?t(n):NaN}Ue(c3,J,{transform(e,t){var n=t.fork(t.ALL),i=Kie(e),r=Jie(e),a=Ri(e.field),s=Ri(e.key),o=(e.groupby||[]).map(Ri),l=ere(t.source,e.groupby,e.key,e.keyvals),c=[],d=this.value,h=l.domain.length,p,y,v,b,S,w,_,A,$,M;for(S=0,A=l.length;S<A;++S)for(p=l[S],v=p.values,y=NaN,_=0;_<h;++_)if(p[_]==null){for(b=l.domain[_],M={_impute:!0},w=0,$=v.length;w<$;++w)M[o[w]]=v[w];M[s]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,c.push(st(M))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=c,n}});function ere(e,t,n,i){var r=w=>w(S),a=[],s=i?i.slice():[],o={},l={},c,d,h,p,y,v,b,S;for(s.forEach((w,_)=>o[w]=_+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(c=t?t.map(r):Zie)+"",(h=l[d])||(h=l[d]=[],a.push(h),h.values=c),h[y-1]=S;return a.domain=s,a}function f3(e){Mu.call(this,e)}f3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Z0},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ue(f3,Mu,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{kC(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function d3(e){J.call(this,null,e)}d3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ue(d3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=n3(i,e.groupby,e.field),a=(e.groupby||[]).map(Ri),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&Pn("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=m0(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=UC(y,s)[o],b=e.counts?y.length:1,S=d||m0(y);Lx(v,S,h,p).forEach(w=>{const _={};for(let A=0;A<a.length;++A)_[a[A]]=y.dims[A];_[l[0]]=w[0],_[l[1]]=w[1]*b,c.push(st(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function ZU(e){xt.call(this,null,tre,e)}Ue(ZU,xt);function tre(e){return this.value&&!e.modified()?this.value:pie(e.fields,e.flat)}function KU(e){J.call(this,[],e),this._pending=null}Ue(KU,J,{transform(e,t){const n=t.dataflow;return this._pending?s_(this,t,this._pending):nre(e)?t.StopPropagation:e.values?s_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ci(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>s_(this,t,ci(i.data)))}});function nre(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function s_(e,t,n){n.forEach(st);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function h3(e){J.call(this,{},e)}h3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ue(h3,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,c=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&Pn('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&Pn('The "as" parameter has too few output field names.'),d=d||r.map(Ri),h=function(v){for(var b=0,S=0,w,_;b<o;++b)if(_=i.get(n[b](v)),_==null)for(w=0;w<p;++w,++S)v[d[S]]=a;else for(w=0;w<p;++w,++S)v[d[S]]=r[w](_)}):(d||Pn("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?c=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,h),c.modifies(d)}});function JU(e){xt.call(this,null,ire,e)}Ue(JU,xt);function ire(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function eB(e){xt.call(this,null,rre,e)}Ue(eB,xt);function rre(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function tB(e){J.call(this,null,e)}Ue(tB,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function g3(e){Mu.call(this,e)}g3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Z0,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ue(g3,Mu,{_transform:Mu.prototype.transform,transform(e,t){return this._transform(are(e,t),t)}});function are(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Ja(n).concat(Ja(i)),s=ore(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>sre(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function sre(e,t,n,i){return ga(r=>t(r)===e?n(r):NaN,i,e+"")}function ore(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(DC),t?r.slice(0,t):r}function nB(e){Ux.call(this,e)}Ue(nB,Ux,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(we(a),n,t,a);return(e.modified("field")||i&&t.modified(Ja(i)))&&Pn("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(st(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function p3(e){J.call(this,null,e)}p3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ue(p3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=YU(e.fields,e.as||[]),a=i?(o,l)=>ure(o,l,i,r):Dx;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=we(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,st({}));s[we(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[we(o)]))}),n}});function ure(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function iB(e){J.call(this,null,e)}Ue(iB,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function m3(e){J.call(this,null,e)}m3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const lre=1e-14;Ue(m3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=n3(r,e.groupby,e.field),s=(e.groupby||[]).map(Ri),o=[],l=e.step||.01,c=e.probs||rr(l/2,1-lre,l),d=c.length;return a.forEach(h=>{const p=NC(h,c);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=c[y],v[i[1]]=p[y],o.push(st(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function rB(e){J.call(this,null,e)}Ue(rB,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=we(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=MC(r);i[we(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[we(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function y3(e){J.call(this,[],e),this.count=0}y3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ue(y3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[we(h)]=1,d),{});let s=this.value,o=this.count,l=0;function c(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Rr()),p<s.length&&p>=l&&(h=s[p],a[we(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=we(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[we(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[we(d)]||c(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[we(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[we(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[we(d)])),this.count=o,this.value=n.source=s,n}});function v3(e){J.call(this,null,e)}v3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ue(v3,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=rr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,st(a)}),n.add=t.add.concat(this.value),n}});function aB(e){J.call(this,null,e),this.modified(!0)}Ue(aB,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function b3(e){J.call(this,null,e)}const sB=["unit0","unit1"];b3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:vC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:sB}]};Ue(b3,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?fh:ch)(a.unit).offset,o=e.as||sB,l=o[0],c=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ja(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,w;b==null?(v[l]=null,i&&(v[c]=null)):(v[l]=S=w=a(b),i&&(v[c]=w=s(S,d)),S<h&&(h=S),w>p&&(p=w))}),a.start=h,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:qL({extent:e.extent||m0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=bC(i),s=this.value||{},o=(n?RL:NL)(a,r);return o.unit=EU(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function oB(e){J.call(this,OC(),e)}Ue(oB,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function uB(e){J.call(this,null,e)}Ue(uB,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(zc(e.sort)):t.source).map(e.field))}});function cre(e,t,n,i){const r=v0[e](t,n);return{init:r.init||sie,update:function(a,s){s[i]=r.next(a)}}}const v0={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=v0.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Pn("ntile num must be greater than zero.");const n=v0.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Pn("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=fre(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function fre(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const dre=Object.keys(v0);function lB(e){const t=ci(e.ops),n=ci(e.fields),i=ci(e.params),r=ci(e.aggregate_params),a=ci(e.as),s=this.outputs=[],o=this.windows=[],l={},c={},d=[],h=[];let p=!0;function y(v){ci(Ja(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],w=i[b],_=r[b]||null,A=Ri(S),$=UU(v,A,a[b]);if(y(S),s.push($),V0(v0,v))o.push(cre(v,S,w,$));else{if(S==null&&v!=="count"&&Pn("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let M=c[A];M||(M=c[A]=[],M.field=S,h.push(M)),M.push(BU(v,_,$))}}),(d.length||h.length)&&(this.cell=hre(h,d,p)),this.inputs=Object.keys(l)}const cB=lB.prototype;cB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};cB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function hre(e,t,n){e=e.map(l=>PU(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new QC;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let c=0;c<r;++c)a[c].add(a[c].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let c=0;c<r;++c)a[c].rem(a[c].get(l),l)}},i.set=function(l){let c,d;for(o&&o.values(),c=0,d=t.length;c<d;++c)l[t[c]]=i.num;if(!n)for(c=0,d=a.length;c<d;++c)a[c].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function x3(e){J.call(this,{},e),this._mlen=0,this._mods=[]}x3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:dre.concat(Z0)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ue(x3,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=zc(e.sort),r=e$(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new lB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)gre(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=IU(we),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function gre(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,c=a?sh(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||hie(-1)};t.init();for(let h=0;h<l;++h)pre(d,s,h,l),a&&mre(d,c),t.update(d,o[h])}function pre(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function mre(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const yre=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Mu,bin:ZC,collect:KC,compare:qU,countpattern:JC,cross:e3,density:t3,dotbin:i3,expression:VU,extent:r3,facet:Ux,field:WU,filter:s3,flatten:o3,fold:u3,formula:l3,generate:QU,impute:c3,joinaggregate:f3,kde:d3,key:ZU,load:KU,lookup:h3,multiextent:JU,multivalues:eB,params:tB,pivot:g3,prefacet:nB,project:p3,proxy:iB,quantile:m3,relay:rB,sample:y3,sequence:v3,sieve:aB,subflow:a3,timeunit:b3,tupleindex:oB,values:uB,window:x3},Symbol.toStringTag,{value:"Module"}));function gh(e,t,n){return e.fields=t||[],e.fname=n,e}function vre(e){return e.length===1?bre(e[0]):xre(e)}const bre=e=>function(t){return t[e]},xre=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Xp(e){throw Error(e)}function Sre(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Xp("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Xp("Access path missing closing bracket: "+e),i&&Xp("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Ere(e,t,n){const i=Sre(e);return e=i.length===1?i[0]:e,gh(vre(i),[e],e)}Ere("id");gh(e=>e,[],"identity");gh(()=>0,[],"zero");gh(()=>1,[],"one");const fB=gh(()=>!0,[],"true");gh(()=>!1,[],"false");var Iu=Array.isArray;function C4(e){return e===Object(e)}function dB(e){return e[e.length-1]}function hB(e){return e!=null?Iu(e)?e:[e]:[]}function S3(e){return typeof e=="function"}function gB(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Hs(e,t){return Object.hasOwn(e,t)}function wre(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gB(i,n)}function T4(e){return typeof e=="number"}const _re=1e4;function Are(e){e=+e||_re;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Hs(t,s)||Hs(n,s),get:s=>Hs(t,s)?t[s]:Hs(n,s)?a(s,n[s]):void 0,set:(s,o)=>Hs(t,s)?t[s]=o:a(s,o)}}function $re(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function ot(e){return function(){return e}}const D4=Math.abs,Xn=Math.atan2,El=Math.cos,Mre=Math.max,o_=Math.min,Ca=Math.sin,Hl=Math.sqrt,Wn=1e-12,Cd=Math.PI,jv=Cd/2,pB=2*Cd;function Cre(e){return e>1?0:e<-1?Cd:Math.acos(e)}function k4(e){return e>=1?jv:e<=-1?-jv:Math.asin(e)}const t$=Math.PI,n$=2*t$,Fl=1e-6,Tre=n$-Fl;function mB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Dre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let E3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mB:Dre(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,c=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Fl)if(!(Math.abs(h*l-c*d)>Fl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+c*c,S=y*y+v*v,w=Math.sqrt(b),_=Math.sqrt(p),A=a*Math.tan((t$-Math.acos((b+p-S)/(2*w*_)))/2),$=A/_,M=A/w;Math.abs($-1)>Fl&&this._append`L${t+$*d},${n+$*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+M*l},${this._y1=n+M*c}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),c=t+o,d=n+l,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Fl||Math.abs(this._y1-d)>Fl)&&this._append`L${c},${d}`,i&&(p<0&&(p=p%n$+n$),p>Tre?this._append`A${i},${i},0,1,${h},${t-o},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=d}`:p>Fl&&this._append`A${i},${i},0,${+(p>=t$)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Bx(){return new E3}Bx.prototype=E3.prototype;function jx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new E3(t)}function kre(e){return e.innerRadius}function Ore(e){return e.outerRadius}function Nre(e){return e.startAngle}function Rre(e){return e.endAngle}function zre(e){return e&&e.padAngle}function Fre(e,t,n,i,r,a,s,o){var l=n-e,c=i-t,d=s-r,h=o-a,p=h*l-d*c;if(!(p*p<Wn))return p=(d*(t-a)-h*(e-r))/p,[e+p*l,t+p*c]}function ly(e,t,n,i,r,a,s){var o=e-n,l=t-i,c=(s?a:-a)/Hl(o*o+l*l),d=c*l,h=-c*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,w=(y+b)/2,_=v-p,A=b-y,$=_*_+A*A,M=r-a,D=p*b-v*y,T=(A<0?-1:1)*Hl(Mre(0,M*M*$-D*D)),O=(D*A-_*T)/$,z=(-D*_-A*T)/$,P=(D*A+_*T)/$,B=(-D*_+A*T)/$,Y=O-S,R=z-w,U=P-S,F=B-w;return Y*Y+R*R>U*U+F*F&&(O=P,z=B),{cx:O,cy:z,x01:-d,y01:-h,x11:O*(r/M-1),y11:z*(r/M-1)}}function Lre(){var e=kre,t=Ore,n=ot(0),i=null,r=Nre,a=Rre,s=zre,o=null,l=jx(c);function c(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-jv,b=a.apply(this,arguments)-jv,S=D4(b-v),w=b>v;if(o||(o=d=l()),y<p&&(h=y,y=p,p=h),!(y>Wn))o.moveTo(0,0);else if(S>pB-Wn)o.moveTo(y*El(v),y*Ca(v)),o.arc(0,0,y,v,b,!w),p>Wn&&(o.moveTo(p*El(b),p*Ca(b)),o.arc(0,0,p,b,v,w));else{var _=v,A=b,$=v,M=b,D=S,T=S,O=s.apply(this,arguments)/2,z=O>Wn&&(i?+i.apply(this,arguments):Hl(p*p+y*y)),P=o_(D4(y-p)/2,+n.apply(this,arguments)),B=P,Y=P,R,U;if(z>Wn){var F=k4(z/p*Ca(O)),N=k4(z/y*Ca(O));(D-=F*2)>Wn?(F*=w?1:-1,$+=F,M-=F):(D=0,$=M=(v+b)/2),(T-=N*2)>Wn?(N*=w?1:-1,_+=N,A-=N):(T=0,_=A=(v+b)/2)}var I=y*El(_),H=y*Ca(_),K=p*El(M),L=p*Ca(M);if(P>Wn){var V=y*El(A),ae=y*Ca(A),se=p*El($),de=p*Ca($),be;if(S<Cd)if(be=Fre(I,H,se,de,V,ae,K,L)){var Se=I-be[0],It=H-be[1],Qe=V-be[0],ge=ae-be[1],ke=1/Ca(Cre((Se*Qe+It*ge)/(Hl(Se*Se+It*It)*Hl(Qe*Qe+ge*ge)))/2),ze=Hl(be[0]*be[0]+be[1]*be[1]);B=o_(P,(p-ze)/(ke-1)),Y=o_(P,(y-ze)/(ke+1))}else B=Y=0}T>Wn?Y>Wn?(R=ly(se,de,I,H,y,Y,w),U=ly(V,ae,K,L,y,Y,w),o.moveTo(R.cx+R.x01,R.cy+R.y01),Y<P?o.arc(R.cx,R.cy,Y,Xn(R.y01,R.x01),Xn(U.y01,U.x01),!w):(o.arc(R.cx,R.cy,Y,Xn(R.y01,R.x01),Xn(R.y11,R.x11),!w),o.arc(0,0,y,Xn(R.cy+R.y11,R.cx+R.x11),Xn(U.cy+U.y11,U.cx+U.x11),!w),o.arc(U.cx,U.cy,Y,Xn(U.y11,U.x11),Xn(U.y01,U.x01),!w))):(o.moveTo(I,H),o.arc(0,0,y,_,A,!w)):o.moveTo(I,H),!(p>Wn)||!(D>Wn)?o.lineTo(K,L):B>Wn?(R=ly(K,L,V,ae,p,-B,w),U=ly(I,H,se,de,p,-B,w),o.lineTo(R.cx+R.x01,R.cy+R.y01),B<P?o.arc(R.cx,R.cy,B,Xn(R.y01,R.x01),Xn(U.y01,U.x01),!w):(o.arc(R.cx,R.cy,B,Xn(R.y01,R.x01),Xn(R.y11,R.x11),!w),o.arc(0,0,p,Xn(R.cy+R.y11,R.cx+R.x11),Xn(U.cy+U.y11,U.cx+U.x11),w),o.arc(U.cx,U.cy,B,Xn(U.y11,U.x11),Xn(U.y01,U.x01),!w))):o.arc(0,0,p,M,$,w)}if(o.closePath(),d)return o=null,d+""||null}return c.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Cd/2;return[El(h)*d,Ca(h)*d]},c.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ot(+d),c):e},c.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ot(+d),c):t},c.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ot(+d),c):n},c.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ot(+d),c):i},c.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ot(+d),c):r},c.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ot(+d),c):a},c.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ot(+d),c):s},c.context=function(d){return arguments.length?(o=d??null,c):o},c}function yB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vB(e){this._context=e}vB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function w3(e){return new vB(e)}function bB(e){return e[0]}function xB(e){return e[1]}function SB(e,t){var n=ot(!0),i=null,r=w3,a=null,s=jx(o);e=typeof e=="function"?e:e===void 0?bB:ot(e),t=typeof t=="function"?t:t===void 0?xB:ot(t);function o(l){var c,d=(l=yB(l)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),c=0;c<=d;++c)!(c<d&&n(h=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,c,l),+t(h,c,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:ot(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:ot(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ot(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function EB(e,t,n){var i=null,r=ot(!0),a=null,s=w3,o=null,l=jx(c);e=typeof e=="function"?e:e===void 0?bB:ot(+e),t=typeof t=="function"?t:ot(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xB:ot(+n);function c(h){var p,y,v,b=(h=yB(h)).length,S,w=!1,_,A=new Array(b),$=new Array(b);for(a==null&&(o=s(_=l())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===w)if(w=!w)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],$[v]);o.lineEnd(),o.areaEnd()}w&&(A[p]=+e(S,p,h),$[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):$[p]))}if(_)return o=null,_+""||null}function d(){return SB().defined(r).curve(s).context(a)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),i=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),c):e},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ot(+h),c):i},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ot(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(i).y(t)},c.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ot(!!h),c):r},c.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),c):s},c.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),c):a},c}const Ure={draw(e,t){const n=Hl(t/Cd);e.moveTo(n,0),e.arc(0,0,n,0,pB)}};function Bre(e,t){let n=null,i=jx(r);e=typeof e=="function"?e:ot(e||Ure),t=typeof t=="function"?t:ot(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ot(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ot(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function Cu(){}function Pv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Px(e){this._context=e}Px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jre(e){return new Px(e)}function wB(e){this._context=e}wB.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pre(e){return new wB(e)}function _B(e){this._context=e}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ire(e){return new _B(e)}function AB(e,t){this._basis=new Px(e),this._beta=t}AB.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const qre=function e(t){function n(i){return t===1?new Px(i):new AB(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Iv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _3(e,t){this._context=e,this._k=(1-t)/6}_3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Iv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hre=function e(t){function n(i){return new _3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function A3(e,t){this._context=e,this._k=(1-t)/6}A3.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gre=function e(t){function n(i){return new A3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function $3(e,t){this._context=e,this._k=(1-t)/6}$3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yre=function e(t){function n(i){return new $3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function M3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Wn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Wn){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function $B(e,t){this._context=e,this._alpha=t}$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:M3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xre=function e(t){function n(i){return t?new $B(i,t):new _3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function MB(e,t){this._context=e,this._alpha=t}MB.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:M3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vre=function e(t){function n(i){return t?new MB(i,t):new A3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function CB(e,t){this._context=e,this._alpha=t}CB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:M3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wre=function e(t){function n(i){return t?new CB(i,t):new $3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function TB(e){this._context=e}TB.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Qre(e){return new TB(e)}function O4(e){return e<0?-1:1}function N4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(O4(a)+O4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function R4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function u_(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function qv(e){this._context=e}qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u_(this,this._t0,R4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,u_(this,R4(this,n=N4(this,e,t)),n);break;default:u_(this,this._t0,n=N4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function DB(e){this._context=new kB(e)}(DB.prototype=Object.create(qv.prototype)).point=function(e,t){qv.prototype.point.call(this,t,e)};function kB(e){this._context=e}kB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function Zre(e){return new qv(e)}function Kre(e){return new DB(e)}function OB(e){this._context=e}OB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=z4(e),r=z4(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function z4(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function Jre(e){return new OB(e)}function Ix(e,t){this._context=e,this._t=t}Ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function eae(e){return new Ix(e,.5)}function tae(e){return new Ix(e,0)}function nae(e){return new Ix(e,1)}function bu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const iae=()=>typeof Image<"u"?Image:null;function ph(e,t,n){return e.fields=t||[],e.fname=n,e}function rae(e){return e.length===1?aae(e[0]):sae(e)}const aae=e=>function(t){return t[e]},sae=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Jy(e){throw Error(e)}function oae(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Jy("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Jy("Access path missing closing bracket: "+e),i&&Jy("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function uae(e,t,n){const i=oae(e);return e=i.length===1?i[0]:e,ph(rae(i),[e],e)}uae("id");ph(e=>e,[],"identity");ph(()=>0,[],"zero");ph(()=>1,[],"one");ph(()=>!0,[],"true");ph(()=>!1,[],"false");var C3=Array.isArray;function lae(e){return e===Object(e)}function Tu(e){return e[e.length-1]}function cae(e){return e==null||e===""?null:+e}function fae(e){return e!=null?C3(e)?e:[e]:[]}function dae(e){return!1}function hae(e){return dae()?e:()=>e}function gae(e){return typeof e=="number"}function NB(e){return typeof e=="string"}function pae(e){return e&&Tu(e)-e[0]||0}function mae(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function as(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const i$=Symbol("implicit");function T3(){var e=new W6,t=[],n=[],i=i$;function r(a){let s=e.get(a);if(s===void 0){if(i!==i$)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new W6;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return T3(t,n).unknown(i)},as.apply(r,arguments),r}function mh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function K0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Hu(){}var fc=.7,Td=1/fc,fd="\\s*([+-]?\\d+)\\s*",b0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yae=/^#([0-9a-f]{3,8})$/,vae=new RegExp(`^rgb\\(${fd},${fd},${fd}\\)$`),bae=new RegExp(`^rgb\\(${Ia},${Ia},${Ia}\\)$`),xae=new RegExp(`^rgba\\(${fd},${fd},${fd},${b0}\\)$`),Sae=new RegExp(`^rgba\\(${Ia},${Ia},${Ia},${b0}\\)$`),Eae=new RegExp(`^hsl\\(${b0},${Ia},${Ia}\\)$`),wae=new RegExp(`^hsla\\(${b0},${Ia},${Ia},${b0}\\)$`),F4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mh(Hu,x0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:L4,formatHex:L4,formatHex8:_ae,formatHsl:Aae,formatRgb:U4,toString:U4});function L4(){return this.rgb().formatHex()}function _ae(){return this.rgb().formatHex8()}function Aae(){return RB(this).formatHsl()}function U4(){return this.rgb().formatRgb()}function x0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yae.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?B4(t):n===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vae.exec(e))?new Sn(t[1],t[2],t[3],1):(t=bae.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xae.exec(e))?cy(t[1],t[2],t[3],t[4]):(t=Sae.exec(e))?cy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eae.exec(e))?I4(t[1],t[2]/100,t[3]/100,1):(t=wae.exec(e))?I4(t[1],t[2]/100,t[3]/100,t[4]):F4.hasOwnProperty(e)?B4(F4[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function B4(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function cy(e,t,n,i){return i<=0&&(e=t=n=NaN),new Sn(e,t,n,i)}function D3(e){return e instanceof Hu||(e=x0(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function Du(e,t,n,i){return arguments.length===1?D3(e):new Sn(e,t,n,i??1)}function Sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}mh(Sn,Du,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Jl(this.r),Jl(this.g),Jl(this.b),Hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j4,formatHex:j4,formatHex8:$ae,formatRgb:P4,toString:P4}));function j4(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}`}function $ae(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}${Gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function P4(){const e=Hv(this.opacity);return`${e===1?"rgb(":"rgba("}${Jl(this.r)}, ${Jl(this.g)}, ${Jl(this.b)}${e===1?")":`, ${e})`}`}function Hv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gl(e){return e=Jl(e),(e<16?"0":"")+e.toString(16)}function I4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kr(e,t,n,i)}function RB(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);if(e instanceof Hu||(e=x0(e)),!e)return new Kr;if(e instanceof Kr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new Kr(s,o,l,e.opacity)}function Gv(e,t,n,i){return arguments.length===1?RB(e):new Kr(e,t,n,i??1)}function Kr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mh(Kr,Gv,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Sn(l_(e>=240?e-240:e+120,r,i),l_(e,r,i),l_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Kr(q4(this.h),fy(this.s),fy(this.l),Hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hv(this.opacity);return`${e===1?"hsl(":"hsla("}${q4(this.h)}, ${fy(this.s)*100}%, ${fy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function q4(e){return e=(e||0)%360,e<0?e+360:e}function fy(e){return Math.max(0,Math.min(1,e||0))}function l_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zB=Math.PI/180,FB=180/Math.PI,Yv=18,LB=.96422,UB=1,BB=.82521,jB=4/29,dd=6/29,PB=3*dd*dd,Mae=dd*dd*dd;function IB(e){if(e instanceof qa)return new qa(e.l,e.a,e.b,e.opacity);if(e instanceof Qs)return qB(e);e instanceof Sn||(e=D3(e));var t=h_(e.r),n=h_(e.g),i=h_(e.b),r=c_((.2225045*t+.7168786*n+.0606169*i)/UB),a,s;return t===n&&n===i?a=s=r:(a=c_((.4360747*t+.3850649*n+.1430804*i)/LB),s=c_((.0139322*t+.0971045*n+.7141733*i)/BB)),new qa(116*r-16,500*(a-r),200*(r-s),e.opacity)}function Xv(e,t,n,i){return arguments.length===1?IB(e):new qa(e,t,n,i??1)}function qa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}mh(qa,Xv,K0(Hu,{brighter(e){return new qa(this.l+Yv*(e??1),this.a,this.b,this.opacity)},darker(e){return new qa(this.l-Yv*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=LB*f_(t),e=UB*f_(e),n=BB*f_(n),new Sn(d_(3.1338561*t-1.6168667*e-.4906146*n),d_(-.9787684*t+1.9161415*e+.033454*n),d_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function c_(e){return e>Mae?Math.pow(e,1/3):e/PB+jB}function f_(e){return e>dd?e*e*e:PB*(e-jB)}function d_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function h_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Cae(e){if(e instanceof Qs)return new Qs(e.h,e.c,e.l,e.opacity);if(e instanceof qa||(e=IB(e)),e.a===0&&e.b===0)return new Qs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*FB;return new Qs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Vv(e,t,n,i){return arguments.length===1?Cae(e):new Qs(e,t,n,i??1)}function Qs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function qB(e){if(isNaN(e.h))return new qa(e.l,0,0,e.opacity);var t=e.h*zB;return new qa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mh(Qs,Vv,K0(Hu,{brighter(e){return new Qs(this.h,this.c,this.l+Yv*(e??1),this.opacity)},darker(e){return new Qs(this.h,this.c,this.l-Yv*(e??1),this.opacity)},rgb(){return qB(this).rgb()}}));var HB=-.14861,k3=1.78277,O3=-.29227,qx=-.90649,S0=1.97294,H4=S0*qx,G4=S0*k3,Y4=k3*O3-qx*HB;function Tae(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);e instanceof Sn||(e=D3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(Y4*i+H4*t-G4*n)/(Y4+H4-G4),a=i-r,s=(S0*(n-r)-O3*a)/qx,o=Math.sqrt(s*s+a*a)/(S0*r*(1-r)),l=o?Math.atan2(s,a)*FB-120:NaN;return new ec(l<0?l+360:l,o,r,e.opacity)}function r$(e,t,n,i){return arguments.length===1?Tae(e):new ec(e,t,n,i??1)}function ec(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mh(ec,r$,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*zB,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Sn(255*(t+n*(HB*i+k3*r)),255*(t+n*(O3*i+qx*r)),255*(t+n*(S0*i)),this.opacity)}}));function GB(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function YB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return GB((n-i/t)*t,s,r,a,o)}}function XB(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return GB((n-i/t)*t,r,a,s,o)}}const Hx=e=>()=>e;function VB(e,t){return function(n){return e+n*t}}function Dae(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Gx(e,t){var n=t-e;return n?VB(e,n>180||n<-180?n-360*Math.round(n/360):n):Hx(isNaN(e)?t:e)}function kae(e){return(e=+e)==1?En:function(t,n){return n-t?Dae(t,n,e):Hx(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?VB(e,n):Hx(isNaN(e)?t:e)}const a$=function e(t){var n=kae(t);function i(r,a){var s=n((r=Du(r)).r,(a=Du(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),c=En(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=c(d),r+""}}return i.gamma=e,i}(1);function WB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=Du(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var Oae=WB(YB),Nae=WB(XB);function N3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function QB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rae(e,t){return(QB(t)?N3:ZB)(e,t)}function ZB(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Gu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function KB(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Qr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function JB(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Gu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var s$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g_=new RegExp(s$.source,"g");function zae(e){return function(){return e}}function Fae(e){return function(t){return e(t)+""}}function ej(e,t){var n=s$.lastIndex=g_.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=s$.exec(e))&&(r=g_.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Qr(i,r)})),n=g_.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Fae(l[0].x):zae(t):(t=l.length,function(c){for(var d=0,h;d<t;++d)o[(h=l[d]).i]=h.x(c);return o.join("")})}function Gu(e,t){var n=typeof t,i;return t==null||n==="boolean"?Hx(t):(n==="number"?Qr:n==="string"?(i=x0(t))?(t=i,a$):ej:t instanceof x0?a$:t instanceof Date?KB:QB(t)?N3:Array.isArray(t)?ZB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JB:Qr)(e,t)}function Lae(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Uae(e,t){var n=Gx(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function J0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var X4=180/Math.PI,o$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tj(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*X4,skewX:Math.atan(l)*X4,scaleX:s,scaleY:o}}var dy;function Bae(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?o$:tj(t.a,t.b,t.c,t.d,t.e,t.f)}function jae(e){return e==null||(dy||(dy=document.createElementNS("http://www.w3.org/2000/svg","g")),dy.setAttribute("transform",e),!(e=dy.transform.baseVal.consolidate()))?o$:(e=e.matrix,tj(e.a,e.b,e.c,e.d,e.e,e.f))}function nj(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function a(c,d,h,p,y,v){if(c!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Qr(c,h)},{i:b-2,x:Qr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(c,d,h,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Qr(c,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(c,d,h,p){c!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Qr(c,d)}):d&&h.push(r(h)+"skewX("+d+i)}function l(c,d,h,p,y,v){if(c!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Qr(c,h)},{i:b-2,x:Qr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(c,d){var h=[],p=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,p),s(c.rotate,d.rotate,h,p),o(c.skewX,d.skewX,h,p),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,p),c=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var Pae=nj(Bae,"px, ","px)","deg)"),Iae=nj(jae,", ",")",")"),qae=1e-12;function V4(e){return((e=Math.exp(e))+1/e)/2}function Hae(e){return((e=Math.exp(e))-1/e)/2}function Gae(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yae=function e(t,n,i){function r(a,s){var o=a[0],l=a[1],c=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-l,b=y*y+v*v,S,w;if(b<qae)w=Math.log(p/c)/t,S=function(T){return[o+T*y,l+T*v,c*Math.exp(t*T*w)]};else{var _=Math.sqrt(b),A=(p*p-c*c+i*b)/(2*c*n*_),$=(p*p-c*c-i*b)/(2*p*n*_),M=Math.log(Math.sqrt(A*A+1)-A),D=Math.log(Math.sqrt($*$+1)-$);w=(D-M)/t,S=function(T){var O=T*w,z=V4(M),P=c/(n*_)*(z*Gae(t*O+M)-Hae(M));return[o+P*y,l+P*v,c*z/V4(t*O+M)]}}return S.duration=w*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r}(Math.SQRT2,2,4);function ij(e){return function(t,n){var i=e((t=Gv(t)).h,(n=Gv(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Xae=ij(Gx);var Vae=ij(En);function Wae(e,t){var n=En((e=Xv(e)).l,(t=Xv(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function rj(e){return function(t,n){var i=e((t=Vv(t)).h,(n=Vv(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Qae=rj(Gx);var Zae=rj(En);function aj(e){return function t(n){n=+n;function i(r,a){var s=e((r=r$(r)).h,(a=r$(a)).h),o=En(r.s,a.s),l=En(r.l,a.l),c=En(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=c(d),r+""}}return i.gamma=t,i}(1)}const Kae=aj(Gx);var Jae=aj(En);function R3(e,t){t===void 0&&(t=e,e=Gu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function ese(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const tse=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Gu,interpolateArray:Rae,interpolateBasis:YB,interpolateBasisClosed:XB,interpolateCubehelix:Kae,interpolateCubehelixLong:Jae,interpolateDate:KB,interpolateDiscrete:Lae,interpolateHcl:Qae,interpolateHclLong:Zae,interpolateHsl:Xae,interpolateHslLong:Vae,interpolateHue:Uae,interpolateLab:Wae,interpolateNumber:Qr,interpolateNumberArray:N3,interpolateObject:JB,interpolateRgb:a$,interpolateRgbBasis:Oae,interpolateRgbBasisClosed:Nae,interpolateRound:J0,interpolateString:ej,interpolateTransformCss:Pae,interpolateTransformSvg:Iae,interpolateZoom:Yae,piecewise:R3,quantize:ese},Symbol.toStringTag,{value:"Module"}));function nse(e){return function(){return e}}function u$(e){return+e}var W4=[0,1];function Ni(e){return e}function l$(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:nse(isNaN(t)?NaN:.5)}function ise(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function rse(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=l$(r,i),a=n(s,a)):(i=l$(i,r),a=n(a,s)),function(o){return a(i(o))}}function ase(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=l$(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=Au(e,o,1,i)-1;return a[l](r[l](o))}}function em(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yx(){var e=W4,t=W4,n=Gu,i,r,a,s=Ni,o,l,c;function d(){var p=Math.min(e.length,t.length);return s!==Ni&&(s=ise(e[0],e[p-1])),o=p>2?ase:rse,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((c||(c=o(t,e.map(i),Qr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,u$),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=J0,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Ni,d()):s!==Ni},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function sj(){return Yx()(Ni,Ni)}function oj(e,t,n,i){var r=$u(e,t,n),a;switch(i=cc(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=xL(r,s))&&(i.precision=a),mC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=SL(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=bL(r))&&(i.precision=a-(i.type==="%")*2);break}}return Sx(i)}function Lc(e){var t=e.domain;return e.ticks=function(n){var i=t();return PA(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return oj(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,c,d=10;for(o<s&&(c=s,s=o,o=c,c=r,r=a,a=c);d-- >0;){if(c=IA(s,o,n),c===l)return i[r]=s,i[a]=o,t(i);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function uj(){var e=sj();return e.copy=function(){return em(e,uj())},as.apply(e,arguments),Lc(e)}function lj(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,u$),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return lj(e).unknown(t)},e=arguments.length?Array.from(e,u$):[0,1],Lc(n)}function cj(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function Q4(e){return Math.log(e)}function Z4(e){return Math.exp(e)}function sse(e){return-Math.log(-e)}function ose(e){return-Math.exp(-e)}function use(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lse(e){return e===10?use:e===Math.E?Math.exp:t=>Math.pow(e,t)}function cse(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function K4(e){return(t,n)=>-e(-t,n)}function z3(e){const t=e(Q4,Z4),n=t.domain;let i=10,r,a;function s(){return r=cse(i),a=lse(i),n()[0]<0?(r=K4(r),a=K4(a),e(sse,ose)):e(Q4,Z4),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let c=l[0],d=l[l.length-1];const h=d<c;h&&([c,d]=[d,c]);let p=r(c),y=r(d),v,b;const S=o==null?10:+o;let w=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),c>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<c)){if(b>d)break;w.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<c)){if(b>d)break;w.push(b)}w.length*2<S&&(w=PA(c,d,S))}else w=PA(p,y,Math.min(y-p,S)).map(a);return h?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=cc(l)).precision==null&&(l.trim=!0),l=Sx(l)),o===1/0)return l;const c=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=c?l(d):""}},t.nice=()=>n(cj(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function fj(){const e=z3(Yx()).domain([1,10]);return e.copy=()=>em(e,fj()).base(e.base()),as.apply(e,arguments),e}function J4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ez(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function F3(e){var t=1,n=e(J4(t),ez(t));return n.constant=function(i){return arguments.length?e(J4(t=+i),ez(t)):t},Lc(n)}function dj(){var e=F3(Yx());return e.copy=function(){return em(e,dj()).constant(e.constant())},as.apply(e,arguments)}function tz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fse(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function dse(e){return e<0?-e*e:e*e}function L3(e){var t=e(Ni,Ni),n=1;function i(){return n===1?e(Ni,Ni):n===.5?e(fse,dse):e(tz(n),tz(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Lc(t)}function U3(){var e=L3(Yx());return e.copy=function(){return em(e,U3()).exponent(e.exponent())},as.apply(e,arguments),e}function hse(){return U3.apply(null,arguments).exponent(.5)}function hj(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=hL(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[Au(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(eo),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return hj().domain(e).range(t).unknown(i)},as.apply(a,arguments)}function gj(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[Au(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,i[0]]:c>=n?[i[n-1],t]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return gj().domain([e,t]).range(r).unknown(a)},as.apply(Lc(s),arguments)}function pj(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[Au(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return pj().domain(e).range(t).unknown(n)},as.apply(r,arguments)}function gse(e){return new Date(e)}function pse(e){return e instanceof Date?+e:+new Date(+e)}function B3(e,t,n,i,r,a,s,o,l,c){var d=sj(),h=d.invert,p=d.domain,y=c(".%L"),v=c(":%S"),b=c("%I:%M"),S=c("%I %p"),w=c("%a %d"),_=c("%b %d"),A=c("%B"),$=c("%Y");function M(D){return(l(D)<D?y:o(D)<D?v:s(D)<D?b:a(D)<D?S:i(D)<D?r(D)<D?w:_:n(D)<D?A:$)(D)}return d.invert=function(D){return new Date(h(D))},d.domain=function(D){return arguments.length?p(Array.from(D,pse)):p().map(gse)},d.ticks=function(D){var T=p();return e(T[0],T[T.length-1],D??10)},d.tickFormat=function(D,T){return T==null?M:c(T)},d.nice=function(D){var T=p();return(!D||typeof D.range!="function")&&(D=t(T[0],T[T.length-1],D??10)),D?p(cj(T,D)):d},d.copy=function(){return em(d,B3(e,t,n,i,r,a,s,o,l,c))},d}function mse(){return as.apply(B3(Nee,Ree,Qa,d0,uh,to,_x,Ex,Ws,SC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yse(){return as.apply(B3(kee,Oee,Za,h0,lh,yu,Ax,wx,Ws,EC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xx(){var e=0,t=1,n,i,r,a,s=Ni,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),c):[s(0),s(1)]}}return c.range=d(Gu),c.rangeRound=d(J0),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),c}}function Yu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function j3(){var e=Lc(Xx()(Ni));return e.copy=function(){return Yu(e,j3())},qu.apply(e,arguments)}function mj(){var e=z3(Xx()).domain([1,10]);return e.copy=function(){return Yu(e,mj()).base(e.base())},qu.apply(e,arguments)}function yj(){var e=F3(Xx());return e.copy=function(){return Yu(e,yj()).constant(e.constant())},qu.apply(e,arguments)}function P3(){var e=L3(Xx());return e.copy=function(){return Yu(e,P3()).exponent(e.exponent())},qu.apply(e,arguments)}function vse(){return P3.apply(null,arguments).exponent(.5)}function Vx(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,c=Ni,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),c(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(c=b,y):c};function v(b){return function(S){var w,_,A;return arguments.length?([w,_,A]=S,c=R3(b,[w,_,A]),y):[c(0),c(.5),c(1)]}}return y.range=v(Gu),y.rangeRound=v(J0),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function vj(){var e=Lc(Vx()(Ni));return e.copy=function(){return Yu(e,vj())},qu.apply(e,arguments)}function bj(){var e=z3(Vx()).domain([.1,1,10]);return e.copy=function(){return Yu(e,bj()).base(e.base())},qu.apply(e,arguments)}function xj(){var e=F3(Vx());return e.copy=function(){return Yu(e,xj()).constant(e.constant())},qu.apply(e,arguments)}function I3(){var e=L3(Vx());return e.copy=function(){return Yu(e,I3()).exponent(e.exponent())},qu.apply(e,arguments)}function bse(){return I3.apply(null,arguments).exponent(.5)}function ss(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const xse=ss("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sse=ss("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ese=ss("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),wse=ss("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),_se=ss("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ase=ss("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$se=ss("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Mse=ss("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Cse=ss("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Tse=ss("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function q3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Dse="identity",Dd="linear",fo="log",tm="pow",nm="sqrt",Wx="symlog",dc="time",hc="utc",Ha="sequential",yh="diverging",kd="quantile",Qx="quantize",Zx="threshold",H3="ordinal",c$="point",Sj="band",G3="bin-ordinal",hn="continuous",im="discrete",rm="discretizing",Ur="interpolating",Y3="temporal";function kse(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Ose(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,c;for(r<i&&(o=i,i=r,r=o),l=0,c=n.length;l<c;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function X3(){const e=T3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,c=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=q3(h,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*c,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=rr(h).map(w=>b+r*w);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),o=l,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],w,_,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return w=Math.max(0,Au(y,b)-1),_=b===S?w:Au(y,S)-1,b-y[w]>a+1e-10&&++w,p&&(A=w,w=v-_,_=v-A),w>_?void 0:t().slice(w,_+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return X3().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(c)},d()}function Ej(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Ej(t())},e}function Nse(){return Ej(X3().paddingInner(1))}var Rse=Array.prototype.map;function zse(e){return Rse.call(e,cae)}const Fse=Array.prototype.slice;function wj(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Au(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=zse(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Fse.call(i),n):t.slice()},n.tickFormat=function(i,r){return oj(e[0],Tu(e),i??10,r)},n.copy=function(){return wj().domain(n.domain()).range(n.range())},n}const Wv=new Map,_j=Symbol("vega_scale");function Aj(e){return e[_j]=!0,e}function nz(e){return e&&e[_j]===!0}function Lse(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?kse(a):a.invertExtent?Ose(a):void 0),a.type=e,Aj(a)};return i.metadata=mae(fae(n)),i}function it(e,t,n){return arguments.length>1?(Wv.set(e,Lse(e,t,n)),this):$j(e)?Wv.get(e):void 0}it(Dse,lj);it(Dd,uj,hn);it(fo,fj,[hn,fo]);it(tm,U3,hn);it(nm,hse,hn);it(Wx,dj,hn);it(dc,mse,[hn,Y3]);it(hc,yse,[hn,Y3]);it(Ha,j3,[hn,Ur]);it(`${Ha}-${Dd}`,j3,[hn,Ur]);it(`${Ha}-${fo}`,mj,[hn,Ur,fo]);it(`${Ha}-${tm}`,P3,[hn,Ur]);it(`${Ha}-${nm}`,vse,[hn,Ur]);it(`${Ha}-${Wx}`,yj,[hn,Ur]);it(`${yh}-${Dd}`,vj,[hn,Ur]);it(`${yh}-${fo}`,bj,[hn,Ur,fo]);it(`${yh}-${tm}`,I3,[hn,Ur]);it(`${yh}-${nm}`,bse,[hn,Ur]);it(`${yh}-${Wx}`,xj,[hn,Ur]);it(kd,hj,[rm,kd]);it(Qx,gj,rm);it(Zx,pj,rm);it(G3,wj,[im,rm]);it(H3,T3,im);it(Sj,X3,im);it(c$,Nse,im);function $j(e){return Wv.has(e)}function Uc(e,t){const n=Wv.get(e);return n&&n.metadata[t]}function V3(e){return Uc(e,hn)}function Od(e){return Uc(e,im)}function f$(e){return Uc(e,rm)}function Mj(e){return Uc(e,fo)}function Use(e){return Uc(e,Y3)}function Cj(e){return Uc(e,Ur)}function Tj(e){return Uc(e,kd)}const Bse=["clamp","base","constant","exponent"];function Dj(e,t){const n=t[0],i=Tu(t)-n;return function(r){return e(n+r*i)}}function Kx(e,t,n){return R3(W3(t||"rgb",n),e)}function kj(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function Oj(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?hae(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=it(a)().domain([t,n]).range([0,1]),Bse.forEach(o=>e[o]?s[o](e[o]()):0),s)}function W3(e,t){const n=tse[jse(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function jse(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Pse={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ise={accent:Sse,category10:xse,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ese,observable10:wse,paired:_se,pastel1:Ase,pastel2:$se,set1:Mse,set2:Cse,set3:Tse,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Nj(e){if(C3(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function Rj(e,t){for(const n in e)Q3(n,t(e[n]))}const iz={};Rj(Ise,Nj);Rj(Pse,e=>Kx(Nj(e)));function Q3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(iz[e]=t,this):iz[e]}const ev="symbol",qse="discrete",Hse="gradient",Gse=e=>C3(e)?e.map(t=>String(t)):String(e),Yse=(e,t)=>e[1]-t[1],Xse=(e,t)=>t[1]-e[1];function Z3(e,t,n){let i;return gae(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(pae(e.domain())/n||1)+1))),lae(t)&&(i=t.step,t=t.interval),NB(t)&&(t=e.type===dc?ch(t):e.type==hc?fh(t):Jy("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function zj(e,t,n){let i=e.range(),r=i[0],a=Tu(i),s=Yse;if(r>a&&(i=a,a=r,r=i,s=Xse),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Tu(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=o)}return t}function K3(e,t){return e.bins?zj(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function Fj(e,t,n,i,r,a){const s=t.type;let o=Gse;if(s===dc||r===dc)o=e.timeFormat(i);else if(s===hc||r===hc)o=e.utcFormat(i);else if(Mj(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const c=Lj(t,n,!1);o=d=>c(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function Lj(e,t,n){const i=K3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let c=l/Math.pow(r,Math.round(Math.log(l)/a));return c*r<r-.5&&(c*=r),c<=s};return n?i.filter(o):o}const d$={[kd]:"quantiles",[Qx]:"thresholds",[Zx]:"domain"},Uj={[kd]:"quantiles",[Qx]:"domain"};function Bj(e,t){return e.bins?Qse(e.bins):e.type===fo?Lj(e,t,!0):d$[e.type]?Wse(e[d$[e.type]]()):K3(e,t)}function Vse(e,t,n){const i=t[Uj[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function Wse(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Qse(e){const t=e.slice(0,-1);return t.max=Tu(e),t}const Zse=e=>d$[e.type]||e.bins;function jj(e,t,n,i,r,a,s){const o=Uj[t.type]&&a!==dc&&a!==hc?Vse(e,t,r):Fj(e,t,n,r,a,s);return i===ev&&Zse(t)?Kse(o):i===qse?Jse(o):eoe(o)}const Kse=e=>(t,n,i)=>{const r=rz(i[n+1],rz(i.max,1/0)),a=az(t,e),s=az(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},rz=(e,t)=>e??t,Jse=e=>(t,n)=>n?e(t):null,eoe=e=>t=>e(t),az=(e,t)=>Number.isFinite(e)?t(e):null;function toe(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Tu(t),a=r-i;if(e.type===Zx){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function noe(e,t,n,i){const r=i||t.type;return NB(n)&&Use(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===dc?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===hc?e.utcFormat("%A, %d %B %Y, %X UTC"):jj(e,t,5,null,n,i,!0)}function Pj(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=noe(e,t,n.format,n.formatType);if(f$(t.type)){const a=Bj(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Od(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Tu(a))}`}}let Ij=0;function ioe(){Ij=0}const Qv="p_";function J3(e){return e&&e.gradient}function qj(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?Qv:"";return r||(r=e.id="gradient_"+Ij++,i==="radial"?(e.x1=Ta(e.x1,.5),e.y1=Ta(e.y1,.5),e.r1=Ta(e.r1,0),e.x2=Ta(e.x2,.5),e.y2=Ta(e.y2,.5),e.r2=Ta(e.r2,.5),a=Qv):(e.x1=Ta(e.x1,0),e.y1=Ta(e.y1,0),e.x2=Ta(e.x2,1),e.y2=Ta(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Ta(e,t){return e??t}function Hj(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const sz={basis:{curve:jre},"basis-closed":{curve:Pre},"basis-open":{curve:Ire},bundle:{curve:qre,tension:"beta",value:.85},cardinal:{curve:Hre,tension:"tension",value:0},"cardinal-open":{curve:Yre,tension:"tension",value:0},"cardinal-closed":{curve:Gre,tension:"tension",value:0},"catmull-rom":{curve:Xre,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Vre,tension:"alpha",value:.5},"catmull-rom-open":{curve:Wre,tension:"alpha",value:.5},linear:{curve:w3},"linear-closed":{curve:Qre},monotone:{horizontal:Kre,vertical:Zre},natural:{curve:Jre},step:{curve:eae},"step-after":{curve:nae},"step-before":{curve:tae}};function eT(e,t,n){var i=Hs(sz,e)&&sz[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const roe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},aoe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,soe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ooe=/^((\s+,?\s*)|(,\s*))/,uoe=/^[01]/;function Nd(e){const t=[];return(e.match(aoe)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=roe[a],o=loe(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let c=s;c<l;c+=s)t.push([r,...o.slice(c,c+s)])}}),t}function loe(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?uoe:soe,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(ooe);l!==null&&(r+=l[0].length)}return i}const ku=Math.PI/180,coe=1e-14,Bl=Math.PI/2,Fa=Math.PI*2,Pf=Math.sqrt(3)/2;var p_={},m_={},Gj=[].join;function foe(e,t,n,i,r,a,s,o,l){const c=Gj.call(arguments);if(p_[c])return p_[c];const d=s*ku,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(l-t)*.5,v=p*(l-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,w=h/n,_=-h/i,A=p/i,$=S*o+w*l,M=_*o+A*l,D=S*e+w*t,T=_*e+A*t;let z=1/((D-$)*(D-$)+(T-M)*(T-M))-.25;z<0&&(z=0);let P=Math.sqrt(z);a==r&&(P=-P);const B=.5*($+D)-P*(T-M),Y=.5*(M+T)+P*(D-$),R=Math.atan2(M-Y,$-B);let F=Math.atan2(T-Y,D-B)-R;F<0&&a===1?F+=Fa:F>0&&a===0&&(F-=Fa);const N=Math.ceil(Math.abs(F/(Bl+.001))),I=[];for(let H=0;H<N;++H){const K=R+H*F/N,L=R+(H+1)*F/N;I[H]=[B,Y,K,L,n,i,h,p]}return p_[c]=I}function doe(e){const t=Gj.call(e);if(m_[t])return m_[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7];const d=c*s,h=-l*o,p=l*s,y=c*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),w=Math.sin(a),_=.5*(a-r),A=Math.sin(_*.5),$=8/3*A*A/Math.sin(_),M=n+v-$*b,D=i+b+$*v,T=n+S,O=i+w,z=T+$*w,P=O-$*S;return m_[t]=[d*M+h*D,p*M+y*D,d*z+h*P,p*z+y*P,d*T+h*O,p*T+y*O]}const wr=["l",0,0,0,0,0,0,0];function hoe(e,t,n){const i=wr[0]=e[0];if(i==="a"||i==="A")wr[1]=t*e[1],wr[2]=n*e[2],wr[3]=e[3],wr[4]=e[4],wr[5]=e[5],wr[6]=t*e[6],wr[7]=n*e[7];else if(i==="h"||i==="H")wr[1]=t*e[1];else if(i==="v"||i==="V")wr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)wr[r]=(r%2==1?t:n)*e[r];return wr}function E0(e,t,n,i,r,a){var s,o=null,l=0,c=0,d=0,h=0,p,y,v,b,S=0,w=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var _=0,A=t.length;_<A;++_){switch(s=t[_],(r!==1||a!==1)&&(s=hoe(s,r,a)),s[0]){case"l":l+=s[1],c+=s[2],e.lineTo(l+n,c+i);break;case"L":l=s[1],c=s[2],e.lineTo(l+n,c+i);break;case"h":l+=s[1],e.lineTo(l+n,c+i);break;case"H":l=s[1],e.lineTo(l+n,c+i);break;case"v":c+=s[1],e.lineTo(l+n,c+i);break;case"V":c=s[1],e.lineTo(l+n,c+i);break;case"m":l+=s[1],c+=s[2],S=l,w=c,e.moveTo(l+n,c+i);break;case"M":l=s[1],c=s[2],S=l,w=c,e.moveTo(l+n,c+i);break;case"c":p=l+s[5],y=c+s[6],d=l+s[3],h=c+s[4],e.bezierCurveTo(l+s[1]+n,c+s[2]+i,d+n,h+i,p+n,y+i),l=p,c=y;break;case"C":l=s[5],c=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,l+n,c+i);break;case"s":p=l+s[3],y=c+s[4],d=2*l-d,h=2*c-h,e.bezierCurveTo(d+n,h+i,l+s[1]+n,c+s[2]+i,p+n,y+i),d=l+s[1],h=c+s[2],l=p,c=y;break;case"S":p=s[3],y=s[4],d=2*l-d,h=2*c-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),l=p,c=y,d=s[1],h=s[2];break;case"q":p=l+s[3],y=c+s[4],d=l+s[1],h=c+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,c=y,d=s[1],h=s[2];break;case"t":p=l+s[1],y=c+s[2],o[0].match(/[QqTt]/)===null?(d=l,h=c):o[0]==="t"?(d=2*l-v,h=2*c-b):o[0]==="q"&&(d=2*l-d,h=2*c-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y,d=l+s[1],h=c+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,h=2*c-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y;break;case"a":oz(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+c+i]),l+=s[6],c+=s[7];break;case"A":oz(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],c=s[7];break;case"z":case"Z":l=S,c=w,e.closePath();break}o=s}}function oz(e,t,n,i){const r=foe(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=doe(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const uz=.5773502691896257,lz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n,r=i-n*uz,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n,r=i-n*uz;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Yj(e){return Hs(lz,e)?lz[e]:goe(e)}var y_={};function goe(e){if(!Hs(y_,e)){const t=Nd(e);y_[e]={draw:function(n,i){E0(n,t,0,0,Math.sqrt(i)/2)}}}return y_[e]}const eu=.448084975506;function poe(e){return e.x}function moe(e){return e.y}function yoe(e){return e.width}function voe(e){return e.height}function Rs(e){return typeof e=="function"?e:()=>+e}function hy(e,t,n){return Math.max(t,Math.min(e,n))}function Xj(){var e=poe,t=moe,n=yoe,i=voe,r=Rs(0),a=r,s=r,o=r,l=null;function c(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),w=+i.call(this,d),_=Math.min(S,w)/2,A=hy(+r.call(this,d),0,_),$=hy(+a.call(this,d),0,_),M=hy(+s.call(this,d),0,_),D=hy(+o.call(this,d),0,_);if(l||(l=y=Bx()),A<=0&&$<=0&&M<=0&&D<=0)l.rect(v,b,S,w);else{var T=v+S,O=b+w;l.moveTo(v+A,b),l.lineTo(T-$,b),l.bezierCurveTo(T-eu*$,b,T,b+eu*$,T,b+$),l.lineTo(T,O-D),l.bezierCurveTo(T,O-eu*D,T-eu*D,O,T-D,O),l.lineTo(v+M,O),l.bezierCurveTo(v+eu*M,O,v,O-eu*M,v,O-M),l.lineTo(v,b+A),l.bezierCurveTo(v,b+eu*A,v+eu*A,b,v+A,b),l.closePath()}if(y)return l=null,y+""||null}return c.x=function(d){return arguments.length?(e=Rs(d),c):e},c.y=function(d){return arguments.length?(t=Rs(d),c):t},c.width=function(d){return arguments.length?(n=Rs(d),c):n},c.height=function(d){return arguments.length?(i=Rs(d),c):i},c.cornerRadius=function(d,h,p,y){return arguments.length?(r=Rs(d),a=h!=null?Rs(h):r,o=p!=null?Rs(p):r,s=y!=null?Rs(y):a,c):r},c.context=function(d){return arguments.length?(l=d??null,c):l},c}function Vj(){var e,t,n,i,r=null,a,s,o,l;function c(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var w=Math.hypot(b,S),_=(b/=w)*l,A=(S/=w)*l,$=Math.atan2(S,b);r.moveTo(s-_,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,$-Math.PI,$),r.lineTo(s+_,o+A),r.arc(s,o,l,$,$+Math.PI)}else r.arc(h,p,v,0,Fa);r.closePath()}else a=1;s=h,o=p,l=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=Bx()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&c(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function am(e,t){return e??t}const sm=e=>e.x||0,om=e=>e.y||0,boe=e=>e.width||0,xoe=e=>e.height||0,Soe=e=>(e.x||0)+(e.width||0),Eoe=e=>(e.y||0)+(e.height||0),woe=e=>e.startAngle||0,_oe=e=>e.endAngle||0,Aoe=e=>e.padAngle||0,$oe=e=>e.innerRadius||0,Moe=e=>e.outerRadius||0,Coe=e=>e.cornerRadius||0,Toe=e=>am(e.cornerRadiusTopLeft,e.cornerRadius)||0,Doe=e=>am(e.cornerRadiusTopRight,e.cornerRadius)||0,koe=e=>am(e.cornerRadiusBottomRight,e.cornerRadius)||0,Ooe=e=>am(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Noe=e=>am(e.size,64),Roe=e=>e.size||1,Jx=e=>e.defined!==!1,zoe=e=>Yj(e.shape||"circle"),Foe=Lre().startAngle(woe).endAngle(_oe).padAngle(Aoe).innerRadius($oe).outerRadius(Moe).cornerRadius(Coe),Loe=EB().x(sm).y1(om).y0(Eoe).defined(Jx),Uoe=EB().y(om).x1(sm).x0(Soe).defined(Jx),Boe=SB().x(sm).y(om).defined(Jx),joe=Xj().x(sm).y(om).width(boe).height(xoe).cornerRadius(Toe,Doe,koe,Ooe),Poe=Bre().type(zoe).size(Noe),Ioe=Vj().x(sm).y(om).defined(Jx).size(Roe);function tT(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function qoe(e,t){return Foe.context(e)(t)}function Hoe(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Uoe:Loe).curve(eT(i,n.orient,n.tension)).context(e)(t)}function Goe(e,t){const n=t[0],i=n.interpolate||"linear";return Boe.curve(eT(i,n.orient,n.tension)).context(e)(t)}function vh(e,t,n,i){return joe.context(e)(t,n,i)}function Yoe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Xoe(e,t){return Poe.context(e)(t)}function Voe(e,t){return Ioe.context(e)(t)}var Wj=1;function Woe(){Wj=1}function nT(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+Wj++),s=r.clipping[a]||(r.clipping[a]={id:a});return S3(i)?s.path=i(null):tT(n)?s.path=vh(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function rn(e){this.clear(),e&&this.union(e)}rn.prototype={clone(){return new rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+c,l*i+o*r+d,o*i-l*s+c,l*i+o*s+d,o*a-l*r+c,l*a+o*r+d,o*a-l*s+c,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function e2(e){this.mark=e,this.bounds=this.bounds||new rn}function t2(e){e2.call(this,e),this.items=this.items||[]}wre(t2,e2);class Qj{constructor(t){this._pending=0,this._loader=t||Mx()}pending(){return this._pending}sanitizeURL(t){const n=this;return cz(n),n._loader.sanitize(t,{context:"href"}).then(i=>(sp(n),i)).catch(()=>(sp(n),null))}loadImage(t){const n=this,i=iae();return cz(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Hs(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>sp(n),s.onerror=()=>sp(n),s.src=a,s}).catch(r=>(sp(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function cz(e){e._pending+=1}function sp(e){e._pending-=1}function xo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Qoe(t,i):0))}return e}function Qoe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Zoe=Fa-1e-8;let n2,tv,nv,Yl,h$,iv,g$,p$;const ou=(e,t)=>n2.add(e,t),rv=(e,t)=>ou(tv=e,nv=t),fz=e=>ou(e,n2.y1),dz=e=>ou(n2.x1,e),jl=(e,t)=>h$*e+g$*t,Pl=(e,t)=>iv*e+p$*t,v_=(e,t)=>ou(jl(e,t),Pl(e,t)),b_=(e,t)=>rv(jl(e,t),Pl(e,t));function um(e,t){return n2=e,t?(Yl=t*ku,h$=p$=Math.cos(Yl),iv=Math.sin(Yl),g$=-iv):(h$=p$=1,Yl=iv=g$=0),Koe}const Koe={beginPath(){},closePath(){},moveTo:b_,lineTo:b_,rect(e,t,n,i){Yl?(v_(e+n,t),v_(e+n,t+i),v_(e,t+i),b_(e,t)):(ou(e+n,t+i),rv(e,t))},quadraticCurveTo(e,t,n,i){const r=jl(e,t),a=Pl(e,t),s=jl(n,i),o=Pl(n,i);hz(tv,r,s,fz),hz(nv,a,o,dz),rv(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=jl(e,t),o=Pl(e,t),l=jl(n,i),c=Pl(n,i),d=jl(r,a),h=Pl(r,a);gz(tv,s,l,d,fz),gz(nv,o,c,h,dz),rv(d,h)},arc(e,t,n,i,r,a){if(i+=Yl,r+=Yl,tv=n*Math.cos(r)+e,nv=n*Math.sin(r)+t,Math.abs(r-i)>Zoe)ou(e-n,t-n),ou(e+n,t+n);else{const s=c=>ou(n*Math.cos(c)+e,n*Math.sin(c)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%Fa,i<0&&(i+=Fa),r=r%Fa,r<0&&(r+=Fa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Fa,o=i-i%Bl,l=0;l<4&&o>r;++l,o-=Bl)s(o);else for(o=i-i%Bl+Bl,l=0;l<4&&o<r;++l,o=o+Bl)s(o)}}};function hz(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function gz(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,c=0,d;Math.abs(a)>coe?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,c=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(pz(l,e,t,n,i)),0<c&&c<1&&r(pz(c,e,t,n,i))}function pz(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var xu=(xu=bu(1,1))?xu.getContext("2d"):null;const m$=new rn;function iT(e){return function(t,n){if(!xu)return!0;e(xu,t),m$.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=m$;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(xu.isPointInPath(l,o))return!0;return!1}}function rT(e,t){return t.contains(e.x||0,e.y||0)}function Zj(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(m$.set(n,i,n+r,i+a))}function Kj(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return id(t,n,i,r,a)}function id(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,c=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-c,v=-(a-t)),S===1&&(y=c,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Rd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Gr(e,t){return e??t}function mz(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Joe(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Gr(t.x1,.5)*i,n.y1+Gr(t.y1,.5)*r,Math.max(i,r)*Gr(t.r1,0),n.x1+Gr(t.x2,.5)*i,n.y1+Gr(t.y2,.5)*r,Math.max(i,r)*Gr(t.r2,.5));else{const s=Gr(t.x1,0),o=Gr(t.y1,0),l=Gr(t.x2,1),c=Gr(t.y2,0);if(s===l||o===c||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+c*r);else{const d=bu(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=mz(h.createLinearGradient(s,o,l,c),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return mz(a,t.stops)}function Jj(e,t,n){return J3(n)?Joe(e,n,t.bounds):n}function Zv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Jj(e,t,t.fill),!0):!1}var eue=[];function zd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Jj(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||eue),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function tue(e,t){return e.zindex-t.zindex||e.index-t.index}function aT(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(tue)}function ua(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=aT(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Kv(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=aT(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function sT(e){return function(t,n,i){ua(n,r=>{(!i||i.intersects(r.bounds))&&eP(e,t,r,r)})}}function nue(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&eP(e,t,n.items[0],n.items)}}function eP(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Rd(t,n),n.fill&&Zv(t,n,r)&&t.fill(),n.stroke&&zd(t,n,r)&&t.stroke()))}function i2(e){return e=e||fB,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Kv(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function lm(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,c,d;return l&&(c=s.strokeWidth,d=s.strokeCap,n.lineWidth=c??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function oT(e){return i2(lm(e))}function tc(e,t){return"translate("+e+","+t+")"}function uT(e){return"rotate("+e+")"}function iue(e,t){return"scale("+e+","+t+")"}function tP(e){return tc(e.x||0,e.y||0)}function rue(e){return tc(e.x||0,e.y||0)+(e.angle?" "+uT(e.angle):"")}function aue(e){return tc(e.x||0,e.y||0)+(e.angle?" "+uT(e.angle):"")+(e.scaleX||e.scaleY?" "+iue(e.scaleX||1,e.scaleY||1):"")}function lT(e,t,n){function i(s,o){s("transform",rue(o)),s("d",t(null,o))}function r(s,o){return t(um(s,o.angle),o),xo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,c=o.y||0,d=o.angle||0;s.translate(l,c),d&&s.rotate(d*=ku),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:sT(a),pick:oT(a),isect:n||iT(a)}}var sue=lT("arc",qoe);function oue(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function uue(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function lue(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function cT(e,t,n){function i(l,c){var d=c.mark.items;d.length&&l("d",t(null,d))}function r(l,c){var d=c.items;return d.length===0?l:(t(um(l),d),xo(l,d[0]))}function a(l,c){l.beginPath(),t(l,c)}const s=lm(a);function o(l,c,d,h,p,y){var v=c.items,b=c.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,h*=l.pixelRatio,s(l,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:nue(a),pick:o,isect:rT,tip:n}}var cue=cT("area",Hoe,oue);function fue(e,t){var n=t.clip;e.save(),S3(n)?(e.beginPath(),n(e),e.clip()):nP(e,t.group)}function nP(e,t){e.beginPath(),tT(t)?vh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function iP(e){const t=Gr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function due(e,t){e("transform",tP(t))}function rP(e,t){const n=iP(t);e("d",vh(null,t,n,n))}function hue(e,t){e("class","background"),e("aria-hidden",!0),rP(e,t)}function gue(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?rP(e,t):e("d","")}function pue(e,t,n){const i=t.clip?nT(n,t,t):null;e("clip-path",i)}function mue(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),xo(e,t),e.translate(t.x||0,t.y||0)}function w0(e,t,n,i){const r=iP(t);e.beginPath(),vh(e,t,(n||0)+r,(i||0)+r)}const yue=lm(w0),vue=lm(w0,!1),bue=lm(w0,!0);function xue(e,t,n,i){ua(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(w0(e,r,a,s),Rd(e,r),r.fill&&Zv(e,r,l)&&e.fill(),r.stroke&&!o&&zd(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&nP(e,r),n&&n.translate(-a,-s),ua(r,c=>{(c.marktype==="group"||i==null||i.includes(c.marktype))&&this.draw(e,c,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(w0(e,r,a,s),Rd(e,r),zd(e,r,l)&&e.stroke())})}function Sue(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return Kv(t,l=>{let c,d,h;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,h=l.y||0;const y=d+(l.width||0),v=h+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&tT(l)&&!bue(e,l,s,o))return e.restore(),null;const S=l.strokeForeground,w=t.interactive!==!1;return w&&S&&l.stroke&&vue(e,l,s,o)?(e.restore(),l):(c=Kv(l,_=>Eue(_,d,h)?this.pick(_,n,i,d,h):null),!c&&w&&(l.fill||!S&&l.stroke)&&yue(e,l,s,o)&&(c=l),e.restore(),c||null)})}function Eue(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var wue={type:"group",tag:"g",nested:!1,attr:due,bound:mue,draw:xue,pick:Sue,isect:Zj,content:pue,background:hue,foreground:gue},_0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function fT(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function dT(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function hT(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function r2(e,t){return e==="center"?t/2:e==="right"?t:0}function a2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function _ue(e,t,n){const i=fT(t,n),r=dT(t,i),a=hT(t,i),s=(t.x||0)-r2(t.align,r),o=(t.y||0)-a2(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,_0["xmlns:xlink"],"xlink:href"),e("transform",tc(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Aue(e,t){const n=t.image,i=dT(t,n),r=hT(t,n),a=(t.x||0)-r2(t.align,i),s=(t.y||0)-a2(t.baseline,r);return e.set(a,s,a+i,s+r)}function $ue(e,t,n){ua(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=fT(i,this);let a=dT(i,r),s=hT(i,r);if(a===0||s===0)return;let o=(i.x||0)-r2(i.align,a),l=(i.y||0)-a2(i.baseline,s),c,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Rd(e,i),e.globalAlpha=(c=i.opacity)!=null?c:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var Mue={type:"image",tag:"image",nested:!1,attr:_ue,bound:Aue,draw:$ue,pick:i2(),isect:fB,get:fT,xOffset:r2,yOffset:a2},Cue=cT("line",Goe,uue);function Tue(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",aue(t)),e("d",t.path)}function av(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*ku,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Nd(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),E0(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):E0(e,l,i,r,a,s)}function Due(e,t){return av(um(e,t.angle),t)?e.set(0,0,0,0):xo(e,t,!0)}var kue={type:"path",tag:"path",nested:!1,attr:Tue,bound:Due,draw:sT(av),pick:oT(av),isect:iT(av)};function Oue(e,t){e("d",vh(null,t))}function Nue(e,t){var n,i;return xo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function yz(e,t){e.beginPath(),vh(e,t)}var Rue={type:"rect",tag:"path",nested:!1,attr:Oue,bound:Nue,draw:sT(yz),pick:oT(yz),isect:Zj};function zue(e,t){e("transform",tP(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Fue(e,t){var n,i;return xo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function aP(e,t,n){var i,r,a,s;return t.stroke&&zd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function Lue(e,t,n){ua(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&aP(e,i,r)&&(Rd(e,i),e.stroke())}})}function Uue(e,t,n,i){return e.isPointInStroke?aP(e,t,1)&&e.isPointInStroke(n,i):!1}var Bue={type:"rule",tag:"line",nested:!1,attr:zue,bound:Fue,draw:Lue,pick:i2(Uue),isect:Kj},jue=lT("shape",Yoe),Pue=lT("symbol",Xoe,rT);const vz=Are();var sr={height:os,measureWidth:gT,estimateWidth:Jv,width:Jv,canvas:sP};sP(!0);function sP(e){sr.width=e&&xu?gT:Jv}function Jv(e,t){return oP(Nu(e,t),os(e))}function oP(e,t){return~~(.8*e.length*t)}function gT(e,t){return os(e)<=0||!(t=Nu(e,t))?0:uP(t,s2(e))}function uP(e,t){const n=`(${t}) ${e}`;let i=vz.get(n);return i===void 0&&(xu.font=t,i=xu.measureText(e).width,vz.set(n,i)),i}function os(e){return e.fontSize!=null?+e.fontSize||0:11}function Ou(e){return e.lineHeight!=null?e.lineHeight:os(e)+2}function Iue(e){return Iu(e)?e.length>1?e:e[0]:e}function cm(e){return Iue(e.lineBreak&&e.text&&!Iu(e.text)?e.text.split(e.lineBreak):e.text)}function pT(e){const t=cm(e);return(Iu(t)?t.length-1:0)*Ou(e)}function Nu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Hue(e,n):n}function que(e){if(sr.width===gT){const t=s2(e);return n=>uP(n,t)}else if(sr.width===Jv){const t=os(e);return n=>oP(n,t)}else return t=>sr.width(e,t)}function Hue(e,t){var n=+e.limit,i=que(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function fm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function s2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+os(e)+"px "+fm(e,t)}function mT(e){var t=e.baseline,n=os(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ou(e):t==="line-bottom"?.29*n-.5*Ou(e):0)}const Gue={left:"start",center:"middle",right:"end"},Vp=new rn;function o2(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Bl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Vp.x1=t,Vp.y1=n,Vp}function Yue(e,t){var n=t.dx||0,i=(t.dy||0)+mT(t),r=o2(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",Gue[t.align]||"start"),o?(l=tc(a,s)+" "+uT(o),(n||i)&&(l+=" "+tc(n,i))):l=tc(a+n,s+i),e("transform",l)}function yT(e,t,n){var i=sr.height(t),r=t.align,a=o2(t),s=a.x1,o=a.y1,l=t.dx||0,c=(t.dy||0)+mT(t)-Math.round(.8*i),d=cm(t),h;if(Iu(d)?(i+=Ou(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,sr.width(t,y)),0)):h=sr.width(t,d),r==="center"?l-=h/2:r==="right"&&(l-=h),e.set(l+=s,c+=o,l+h,c+i),t.angle&&!n)e.rotate(t.angle*ku,s,o);else if(n===2)return e.rotatedPoints(t.angle*ku,s,o);return e}function Xue(e,t,n){ua(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,c,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=s2(i),e.textAlign=i.align||"left",a=o2(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*ku),s=o=0),s+=i.dx||0,o+=(i.dy||0)+mT(i),d=cm(i),Rd(e,i),Iu(d))for(c=Ou(i),l=0;l<d.length;++l)h=Nu(i,d[l]),i.fill&&Zv(e,i,r)&&e.fillText(h,s,o),i.stroke&&zd(e,i,r)&&e.strokeText(h,s,o),o+=c;else h=Nu(i,d),i.fill&&Zv(e,i,r)&&e.fillText(h,s,o),i.stroke&&zd(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function Vue(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=o2(t),o=s.x1,l=s.y1,c=yT(Vp,t,1),d=-t.angle*ku,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*l),v=p*r+h*a+(l-p*o-h*l);return c.contains(y,v)}function Wue(e,t){const n=yT(Vp,e,2);return id(t,n[0],n[1],n[2],n[3])||id(t,n[0],n[1],n[4],n[5])||id(t,n[4],n[5],n[6],n[7])||id(t,n[2],n[3],n[6],n[7])}var Que={type:"text",tag:"text",nested:!1,attr:Yue,bound:yT,draw:Xue,pick:i2(Vue),isect:Wue},Zue=cT("trail",Voe,lue),dr={arc:sue,area:cue,group:wue,image:Mue,line:Cue,path:kue,rect:Rue,rule:Bue,shape:jue,symbol:Pue,text:Que,trail:Zue};function y$(e,t,n){var i=dr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new rn),e,n)}var bz={mark:null};function lP(e,t,n){var i=dr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,c,d;if(i.nested)return s?c=a[0]:(bz.mark=e,c=bz),d=y$(c,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new rn,s)for(o=0,l=a.length;o<l;++o)t.union(y$(a[o],r,n));return e.bounds=t}const Kue=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function cP(e,t){return JSON.stringify(e,Kue,t)}function fP(e){const t=typeof e=="string"?JSON.parse(e):e;return dP(t)}function dP(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&dP(n[r]);return t&&lP(e),e}class hP{constructor(t){arguments.length?this.root=fP(t):(this.root=xz({marktype:"group",name:"root",role:"frame"}),this.root.items=[new t2(this.root)])}toJSON(t){return cP(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=xz(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function xz(e,t){const n={bounds:new rn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function uu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function vT(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function un(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=uu(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Ar(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function gP(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function u2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Jue(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=dr[r.marktype]).tip){for(s=u2(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let bT=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Mx(),this._tooltip=n||ele}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=uu(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Jue(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,c=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,c+=t.y||0;return{x:l,y:c,width:s,height:o,left:l,top:c,right:l+s,bottom:c+o}}};function ele(e,t,n,i){e.element().setAttribute("title",i||"")}class dm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Qj(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const tle="keydown",nle="keypress",ile="keyup",pP="dragenter",sv="dragleave",mP="dragover",v$="pointerdown",rle="pointerup",eb="pointermove",ov="pointerout",yP="pointerover",b$="mousedown",ale="mouseup",vP="mousemove",tb="mouseout",bP="mouseover",nb="click",sle="dblclick",ole="wheel",xP="mousewheel",ib="touchstart",rb="touchmove",ab="touchend",ule=[tle,nle,ile,pP,sv,mP,v$,rle,eb,ov,yP,b$,ale,vP,tb,bP,nb,sle,ole,xP,ib,rb,ab],x$=eb,Wp=tb,S$=nb;class hm extends bT{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ule,this.pointermove=Ez([eb,vP],[yP,bP],[ov,tb]),this.dragover=Ez([mP],[pP],[sv]),this.pointerout=wz([ov,tb]),this.dragleave=wz([sv])}initialize(t,n,i){return this._canvas=t&&vT(t,"canvas"),[nb,b$,v$,eb,ov,sv].forEach(r=>Sz(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(xP,t)}pointerdown(t){this._down=this._active,this.fire(v$,t)}mousedown(t){this._down=this._active,this.fire(b$,t)}click(t){this._down===this._active&&(this.fire(nb,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ib,t,!0)}touchmove(t){this.fire(rb,t,!0)}touchend(t){this.fire(ab,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===S$&&r&&r.href?this.handleHref(n,r,r.href):(t===x$||t===Wp)&&this.handleTooltip(n,r,t!==Wp),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(Sz(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=u2(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return dr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const lle=e=>e===ib||e===rb||e===ab?[ib,rb,ab]:[e];function Sz(e,t){lle(t).forEach(n=>cle(e,n))}function cle(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function kp(e,t,n){t.forEach(i=>e.fire(i,n))}function Ez(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?kp(this,e,i):((!r||!r.exit)&&kp(this,n,i),this._active=a,kp(this,t,i),kp(this,e,i))}}function wz(e){return function(t){kp(this,e,t),this._active=null}}function fle(){return typeof window<"u"&&window.devicePixelRatio||1}function dle(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?fle():r;e.width=t*l,e.height=n*l;for(const c in a)o[c]=a[c];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class sb extends dm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new rn,this._tempb=new rn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:bu(1,1,this._options.type),t&&this._canvas&&(Ar(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)dle(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||Xp("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=hle(r,a,s);i.save();const c=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):gle(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,c,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=dr[n.marktype];n.clip&&fue(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const hle=(e,t,n)=>new rn().set(0,0,t,n).translate(-e[0],-e[1]);function gle(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class SP extends bT{constructor(t,n){super(t,n);const i=this;i._hrefHandler=x_(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=x_(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Wp)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(S$,this._hrefHandler),r.removeEventListener(x$,this._tooltipHandler),r.removeEventListener(Wp,this._tooltipHandler)),this._svg=r=t&&vT(t,"svg"),r&&(r.addEventListener(S$,this._hrefHandler),r.addEventListener(x$,this._tooltipHandler),r.addEventListener(Wp,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:x_(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const x_=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},EP="aria-hidden",xT="aria-label",ST="role",ET="aria-roledescription",wP="graphics-object",wT="graphics-symbol",_P=(e,t,n)=>({[ST]:e,[ET]:t,[xT]:n||void 0}),ple=$re(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),_z={axis:{desc:"axis",caption:vle},legend:{desc:"legend",caption:ble},"title-text":{desc:"title",caption:e=>`Title text '${$z(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${$z(e)}'`}},Az={ariaRole:ST,ariaRoleDescription:ET,description:xT};function AP(e,t){const n=t.aria===!1;if(e(EP,n||void 0),n||t.description==null)for(const i in Az)e(Az[i],void 0);else{const i=t.mark.marktype;e(xT,t.description),e(ST,t.ariaRole||(i==="group"?wP:wT)),e(ET,t.ariaRoleDescription||`${i} mark`)}}function $P(e){return e.aria===!1?{[EP]:!0}:ple[e.role]?null:_z[e.role]?yle(e,_z[e.role]):mle(e)}function mle(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return _P(n?wP:wT,`${t} mark container`,e.description)}function yle(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return _P(t.role||wT,t.desc,n.description||i(n))}catch{return null}}function $z(e){return hB(e.text).join(" ")}function vle(e){const t=e.datum,n=e.orient,i=t.title?MP(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Od(o)?"discrete":o} scale with ${Pj(s,a,e)}`}function ble(e){const t=e.datum,n=t.title?MP(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return Sle(i)+(n?` titled '${n}'`:"")+` for ${xle(a)} with ${Pj(l,o,e)}`}function MP(e){try{return hB(dB(e.items).items[0].text).join(" ")}catch{return null}}function xle(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+dB(e)}function Sle(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const CP=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ele=e=>CP(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function _T(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,c)=>(c!=null&&(t+=` ${l}="${Ele(c)}"`),o),o={open(l){a(l),t="<"+l;for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=CP(l),o),toString:()=>e};return o}const TP=e=>DP(_T(),e)+"";function DP(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):DP(e,i)}return e.close()}const ob={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ub={blend:"mix-blend-mode"},kP={fill:"none","stroke-miterlimit":10},op=0,Mz="http://www.w3.org/2000/xmlns/",on=_0.xmlns;class AT extends dm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=un(t,0,"svg",on),this._svg.setAttributeNS(Mz,"xmlns",on),this._svg.setAttributeNS(Mz,"xmlns:xlink",_0["xmlns:xlink"]),this._svg.setAttribute("version",_0.version),this._svg.setAttribute("class","marks"),Ar(t,1),this._root=un(this._svg,op,"g",on),lu(this._root,kP),Ar(this._svg,op+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(lu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=un(t,op,"rect",on),lu(i,{width:this._width,height:this._height,fill:n}));const r=TP(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ar(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,c;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=dr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,Cz(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(s,c._svg,c)):i._svg&&(c=i._svg.parentNode,c&&c.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Cz(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=dr[s],l=n.interactive===!1?"none":null,c=o.tag==="g",d=Tz(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Ar(d,0),n._svg;d.setAttribute("class",gP(n));const h=$P(n);for(const b in h)ui(d,b,h[b]);c||ui(d,"pointer-events",l),ui(d,"clip-path",n.clip?nT(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),w=Tz(b,d,p,o.tag,a);S&&(this._update(o,w,b),c&&Ale(this,w,b,r)),p=w,++y};return o.nested?n.items.length&&v(n.items[0]):ua(n,v),Ar(d,y),d}_update(t,n,i){Zs=n,Kn=n.__values__,AP(Qp,i),t.attr(Qp,i,this);const r=Mle[t.type];r&&r.call(this,t,n,i),Zs&&this.style(Zs,i)}style(t,n){if(n!=null){for(const i in ob){let r=i==="font"?fm(n):n[i];if(r===Kn[i])continue;const a=ob[i];r==null?t.removeAttribute(a):(J3(r)&&(r=qj(r,this._defs.gradient,OP())),t.setAttribute(a,r+"")),Kn[i]=r}for(const i in ub)uv(t,ub[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=un(t,op+1,"defs",on)),r=wle(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=un(t,op+1,"defs",on)),r=_le(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Ar(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Cz(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function wle(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=un(e,n++,"pattern",on);lu(s,{id:Qv+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=un(s,0,"rect",on),lu(s,{width:1,height:1,fill:`url(${OP()}#${t.id})`}),e=un(e,n++,"radialGradient",on),lu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=un(e,n++,"linearGradient",on),lu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=un(e,i,"stop",on),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Ar(e,i),n}function _le(e,t,n){let i;return e=un(e,n,"clipPath",on),e.setAttribute("id",t.id),t.path?(i=un(e,0,"path",on),i.setAttribute("d",t.path)):(i=un(e,0,"rect",on),lu(i,{x:0,y:0,width:t.width,height:t.height})),Ar(e,1),n+1}function Ale(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;ua(n,s=>{r=e.mark(t,s,r,i),++a}),Ar(t,1+a)}function Tz(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=uu(s,i,on),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=uu(s,"path",on);a.appendChild(o),o.__data__=e;const l=uu(s,"g",on);a.appendChild(l),l.__data__=e;const c=uu(s,"path",on);a.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(a.ownerSVGElement!==r||$le(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function $le(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Zs=null,Kn=null;const Mle={group(e,t,n){const i=Zs=t.childNodes[2];Kn=i.__values__,e.foreground(Qp,n,this),Kn=t.__values__,Zs=t.childNodes[1],e.content(Qp,n,this);const r=Zs=t.childNodes[0];e.background(Qp,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Kn.events&&(ui(i,"pointer-events",a),ui(r,"pointer-events",a),Kn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;ui(i,"display",null),this.style(r,n),ui(r,"stroke",null),s&&(n.fill=null),Kn=i.__values__,this.style(i,n),s&&(n.fill=s),Zs=null}else ui(i,"display","none")},image(e,t,n){n.smooth===!1?(uv(t,"image-rendering","optimizeSpeed"),uv(t,"image-rendering","pixelated")):uv(t,"image-rendering",null)},text(e,t,n){const i=cm(n);let r,a,s,o;Iu(i)?(a=i.map(l=>Nu(n,l)),r=a.join(`
`),r!==Kn.text&&(Ar(t,0),s=t.ownerDocument,o=Ou(n),a.forEach((l,c)=>{const d=uu(s,"tspan",on);d.__data__=n,d.textContent=l,c&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Kn.text=r)):(a=Nu(n,i),a!==Kn.text&&(t.textContent=a,Kn.text=a)),ui(t,"font-family",fm(n)),ui(t,"font-size",os(n)+"px"),ui(t,"font-style",n.fontStyle),ui(t,"font-variant",n.fontVariant),ui(t,"font-weight",n.fontWeight)}};function Qp(e,t,n){t!==Kn[e]&&(n?Cle(Zs,e,t,n):ui(Zs,e,t),Kn[e]=t)}function uv(e,t,n){n!==Kn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Kn[t]=n)}function lu(e,t){for(const n in t)ui(e,n,t[n])}function ui(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Cle(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function OP(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class NP extends dm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=_T();n.open("svg",gB({},_0,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",kP,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=dr[n.marktype],r=i.tag,a=[AP,i.attr];t.open("g",{class:gP(n),"clip-path":n.clip?nT(this,n,n.group):null},$P(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const c=cm(o);if(Iu(c)){const d={x:0,dy:Ou(o)};for(let h=0;h<c.length;++h)t.open("tspan",h?d:null).text(Nu(o,c[h])).close()}else t.text(Nu(o,c))}else if(r==="g"){const c=o.strokeForeground,d=o.fill,h=o.stroke;c&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),ua(o,p=>this.mark(t,p)),t.close(),c&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):ua(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,c,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Tle(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Qv+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Tle(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=fm(t),e["font-size"]=os(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in ob){let o=t[s];const l=ob[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(J3(o)&&(o=qj(o,r.gradient,"")),e[l]=o)}for(const s in ub){const o=t[s];o!=null&&(a=a||[],a.push(`${ub[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Vr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Dle(e){Vr.svgMarkTypes=e.svgMarkTypes??["text"],Vr.svgOnTop=e.svgOnTop??!0,Vr.debug=e.debug??!1}class E$ extends dm{constructor(t){super(t),this._svgRenderer=new AT(t),this._canvasRenderer=new sb(t)}initialize(t,n,i,r,a){this._root_el=un(t,0,"div");const s=un(this._root_el,0,"div"),o=un(this._root_el,1,"div");return this._root_el.style.position="relative",Vr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Vr.svgOnTop?o:s,this._canvasEl=Vr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Vr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Vr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Vr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Vr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class RP extends hm{constructor(t,n){super(t,n)}initialize(t,n,i){const r=un(un(t,0,"div"),Vr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const zP="canvas",FP="hybrid",LP="png",UP="svg",BP="none",cu={Canvas:zP,PNG:LP,SVG:UP,Hybrid:FP,None:BP},gc={};gc[zP]=gc[LP]={renderer:sb,headless:sb,handler:hm};gc[UP]={renderer:AT,headless:NP,handler:SP};gc[FP]={renderer:E$,headless:E$,handler:RP};gc[BP]={};function l2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(gc[e]=t,this):gc[e]}function jP(e,t,n){const i=[],r=new rn().union(t),a=e.marktype;return a?PP(e,r,n,i):a==="group"?IP(e,r,n,i):Xp("Intersect scene must be mark node or group item.")}function PP(e,t,n,i){if(kle(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)IP(r[o],t,n,i);else for(const l=dr[a].isect;o<s;++o){const c=r[o];qP(c,t,l)&&i.push(c)}}return i}function kle(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function IP(e,t,n,i){n&&n(e.mark)&&qP(e,t,dr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)PP(r[l],t,n,i);t.translate(s,o)}return i}function qP(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const S_=new rn;function HP(e){const t=e.clip;if(S3(t))t(um(S_.clear()));else if(t)S_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(S_)}const Ole=1e-9;function $T(e,t,n){return e===t?!0:n==="path"?GP(e,t):e instanceof Date&&t instanceof Date?+e==+t:T4(e)&&T4(t)?Math.abs(e-t)<=Ole:!e||!t||!C4(e)&&!C4(t)?e==t:Nle(e,t)}function GP(e,t){return $T(Nd(e),Nd(t))}function Nle(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!$T(e[r],t[r],r))return!1;return typeof e==typeof t}function Rle(){Woe(),ioe()}function bh(e,t,n){return e.fields=t||[],e.fname=n,e}function zle(e){return e.length===1?Fle(e[0]):Lle(e)}const Fle=e=>function(t){return t[e]},Lle=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function E_(e){throw Error(e)}function Ule(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||E_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&E_("Access path missing closing bracket: "+e),i&&E_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Ble(e,t,n){const i=Ule(e);return e=i.length===1?i[0]:e,bh(zle(i),[e],e)}Ble("id");bh(e=>e,[],"identity");bh(()=>0,[],"zero");bh(()=>1,[],"one");bh(()=>!0,[],"true");bh(()=>!1,[],"false");function jle(e){return e===Object(e)}function w_(e){return e[e.length-1]}function Ple(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function xh(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ple(i,n)}const Fd="top",Jr="left",ea="right",Ru="bottom",Ile="top-left",qle="top-right",Hle="bottom-left",Gle="bottom-right",MT="start",w$="middle",li="end",Yle="x",Xle="y",c2="group",CT="axis",TT="title",Vle="frame",Wle="scope",DT="legend",YP="row-header",XP="row-footer",VP="row-title",WP="column-header",QP="column-footer",ZP="column-title",Qle="padding",Zle="symbol",KP="fit",JP="fit-x",eI="fit-y",Kle="pad",kT="none",gy="all",_$="each",OT="flush",fu="column",du="row";function tI(e){J.call(this,null,e)}xh(tI,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=dr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=py(i,s),i.items.forEach(c=>{c.bounds.clear().union(o)});else if(r===c2||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),o.clear(),i.items.forEach(c=>o.union(py(c,s))),i.role){case CT:case DT:case TT:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{o.union(py(c,s))}),t.visit(t.MOD,c=>{l=l||o.alignsWith(c.bounds),n.dirty(c),o.union(py(c,s))}),l&&(o.clear(),i.items.forEach(c=>o.union(c.bounds)));return HP(i),t.modifies("bounds")}});function py(e,t,n){return t(e.bounds.clear(),e,n)}const Dz=":vega_identifier:";function NT(e){J.call(this,0,e)}NT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};xh(NT,J,{transform(e,t){const n=Jle(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Jle(e){return e._signals[Dz]||(e._signals[Dz]=e.add(0))}function nI(e){J.call(this,null,e)}xh(nI,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,ece(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===c2?t2:e2;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function ece(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function iI(e){J.call(this,null,e)}const kz={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!rI(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},rI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Oz=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(rI(r,a=e[n].bounds,t))return!0},tce=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},nce=(e,t,n)=>{var i=e.range(),r=new rn;return t===Fd||t===Ru?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},Nz=e=>(e.forEach(t=>t.opacity=1),e),Rz=(e,t)=>e.reflow(t.modified()).modifies("opacity");xh(iI,J,{transform(e,t){const n=kz[e.method]||kz.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(Nz(r),t=Rz(t,e)),t;if(r=r.filter(tce),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=Nz(r),t=Rz(t,e),a.length>=3&&Oz(a,i)){do a=n(a,i);while(a.length>=3&&Oz(a,i));a.length<3&&!w_(r).opacity&&(a.length>1&&(w_(a).opacity=0),w_(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=nce(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function aI(e){J.call(this,null,e)}xh(aI,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Qn=new rn;function rd(e,t,n){return e[t]===n?0:(e[t]=n,1)}function ice(e){var t=e.items[0].orient;return t===Jr||t===ea}function rce(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ace(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=rce(a),c=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,S=r.bounds,w=v&&pT(v),_=0,A=0,$,M;switch(Qn.clear().union(S),S.clear(),($=l[0])>-1&&S.union(r.items[$].bounds),($=l[1])>-1&&S.union(r.items[$].bounds),o){case Fd:_=h||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(c,0),v&&my(e,v,M,b,w,0,-1,S);break;case Jr:_=-d,A=h||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,c),v&&my(e,v,M,b,w,1,-1,S);break;case ea:_=n+d,A=h||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,c),v&&my(e,v,M,b,w,1,1,S);break;case Ru:_=h||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(c,M),v&&my(e,v,M,b,0,0,1,S);break;default:_=r.x,A=r.y}return xo(S.translate(_,A),r),rd(r,"x",_+s)|rd(r,"y",A+s)&&(r.bounds=Qn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function my(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const c=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=c):h=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-d,-h)),e.dirty(t)}o.union(l)}const zz=(e,t)=>Math.floor(Math.min(e,t)),Fz=(e,t)=>Math.ceil(Math.max(e,t));function sce(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===c2)switch(r.role){case CT:case DT:case TT:break;case YP:s.rowheaders.push(...a);break;case XP:s.rowfooters.push(...a);break;case WP:s.colheaders.push(...a);break;case QP:s.colfooters.push(...a);break;case VP:s.rowtitle=a[0];break;case ZP:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function oce(e){return new rn().set(0,0,e.width||0,e.height||0)}function uce(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ct(e,t,n){const i=jle(e)?e[t]:e;return i??(n!==void 0?n:0)}function Lz(e){return e<0?Math.ceil(-e):0}function sI(e,t,n){var i=!n.nodirty,r=n.bounds===OT?oce:uce,a=Qn.set(0,0,0,0),s=Ct(n.align,fu),o=Ct(n.align,du),l=Ct(n.padding,fu),c=Ct(n.padding,du),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),w=Array(h),_=0,A=Array(p),$=Array(p),M=Array(p),D,T,O,z,P,B,Y,R,U,F,N;for(T=0;T<d;++T)v[T]=0;for(T=0;T<h;++T)w[T]=0;for(T=0;T<p;++T)B=t[T],P=M[T]=r(B),B.x=B.x||0,A[T]=0,B.y=B.y||0,$[T]=0,O=T%d,z=~~(T/d),b=Math.max(b,Y=Math.ceil(P.x2)),_=Math.max(_,R=Math.ceil(P.y2)),v[O]=Math.max(v[O],Y),w[z]=Math.max(w[z],R),y[T]=l+Lz(P.x1),S[T]=c+Lz(P.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(s===_$)for(O=1;O<d;++O){for(N=0,T=O;T<p;T+=d)N<y[T]&&(N=y[T]);for(T=O;T<p;T+=d)y[T]=N+v[O-1]}else if(s===gy){for(N=0,T=0;T<p;++T)T%d&&N<y[T]&&(N=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=N+b)}else for(s=!1,O=1;O<d;++O)for(T=O;T<p;T+=d)y[T]+=v[O-1];if(o===_$)for(z=1;z<h;++z){for(N=0,T=z*d,D=T+d;T<D;++T)N<S[T]&&(N=S[T]);for(T=z*d;T<D;++T)S[T]=N+w[z-1]}else if(o===gy){for(N=0,T=d;T<p;++T)N<S[T]&&(N=S[T]);for(T=d;T<p;++T)S[T]=N+_}else for(o=!1,z=1;z<h;++z)for(T=z*d,D=T+d;T<D;++T)S[T]+=w[z-1];for(U=0,T=0;T<p;++T)U=y[T]+(T%d?U:0),A[T]+=U-t[T].x;for(O=0;O<d;++O)for(F=0,T=O;T<p;T+=d)F+=S[T],$[T]+=F-t[T].y;if(s&&Ct(n.center,fu)&&h>1)for(T=0;T<p;++T)P=s===gy?b:v[T%d],U=P-M[T].x2-t[T].x-A[T],U>0&&(A[T]+=U/2);if(o&&Ct(n.center,du)&&d!==1)for(T=0;T<p;++T)P=o===gy?_:w[~~(T/d)],F=P-M[T].y2-t[T].y-$[T],F>0&&($[T]+=F/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],$[T]));switch(U=Ct(n.anchor,Yle),F=Ct(n.anchor,Xle),Ct(n.anchor,fu)){case li:U-=a.width();break;case w$:U-=a.width()/2}switch(Ct(n.anchor,du)){case li:F-=a.height();break;case w$:F-=a.height()/2}for(U=Math.round(U),F=Math.round(F),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)B=t[T],B.x+=A[T]+=U,B.y+=$[T]+=F,a.union(B.mark.bounds.union(B.bounds.translate(A[T],$[T]))),i&&e.dirty(B);return a}function lce(e,t,n){var i=sce(t),r=i.marks,a=n.bounds===OT?cce:fce,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),c=l*o,d,h,p,y,v,b,S;const w=sI(e,r,n);w.empty()&&w.set(0,0,0,0),i.rowheaders&&(b=Ct(n.headerBand,du,null),d=yy(e,i.rowheaders,r,o,l,-Ct(s,"rowHeader"),zz,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Ct(n.headerBand,fu,null),h=yy(e,i.colheaders,r,o,o,-Ct(s,"columnHeader"),zz,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Ct(n.footerBand,du,null),p=yy(e,i.rowfooters,r,o,l,Ct(s,"rowFooter"),Fz,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Ct(n.footerBand,fu,null),y=yy(e,i.colfooters,r,o,o,Ct(s,"columnFooter"),Fz,1,a,"y2",c-o,1,o,b)),i.rowtitle&&(v=Ct(n.titleAnchor,du),S=Ct(s,"rowTitle"),S=v===li?p+S:d-S,b=Ct(n.titleBand,du,.5),Uz(e,i.rowtitle,S,0,w,b)),i.coltitle&&(v=Ct(n.titleAnchor,fu),S=Ct(s,"columnTitle"),S=v===li?y+S:h-S,b=Ct(n.titleBand,fu,.5),Uz(e,i.coltitle,S,1,w,b))}function cce(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function fce(e,t){return e.bounds[t]}function yy(e,t,n,i,r,a,s,o,l,c,d,h,p,y){var v=n.length,b=0,S=0,w,_,A,$,M,D,T,O,z;if(!v)return b;for(w=d;w<v;w+=h)n[w]&&(b=s(b,l(n[w],c)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,_=0,$=t.length;_<$;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(w=d,_=0,$=t.length;_<$;++_,w+=h){for(D=t[_],M=D.mark.bounds,A=w;A>=0&&(T=n[A])==null;A-=p);o?(O=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),z=b):(O=b,z=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(D.bounds.translate(O-(D.x||0),z-(D.y||0))),D.x=O,D.y=z,e.dirty(D),S=s(S,M[c])}return S}function Uz(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function dce(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function hce(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function gce(e,t,n,i,r,a,s){const o=dce(n,t),l=hce(e,o("offset",0)),c=o("anchor",MT),d=c===li?1:c===w$?.5:0,h={align:_$,bounds:o("bounds",OT),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Jr:h.anchor={x:Math.floor(i.x1)-l,column:li,y:d*(s||i.height()+2*i.y1),row:c};break;case ea:h.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:c};break;case Fd:h.anchor={y:Math.floor(r.y1)-l,row:li,x:d*(a||r.width()+2*r.x1),column:c};break;case Ru:h.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:c};break;case Ile:h.anchor={x:l,y:l};break;case qle:h.anchor={x:a-l,y:l,column:li};break;case Hle:h.anchor={x:l,y:s-l,row:li};break;case Gle:h.anchor={x:a-l,y:s-l,column:li,row:li};break}return h}function pce(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,c;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),yce(e,n,n.items[0].items[0]),a=mce(n,a),l=2*n.padding,c=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),c=Math.ceil(a.height()+c)),i.type===Zle&&vce(n.items[0].items[0].items[0].items),r!==kT&&(n.x=s=0,n.y=o=0),n.width=l,n.height=c,xo(a.set(s,o,s+l,o+c),n),n.mark.bounds.clear().union(a),n}function mce(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function yce(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&up(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,c=i-s.x,d=i-s.y;switch(s.orient){case Jr:r+=Math.ceil(s.bounds.width())+l;break;case ea:case Ru:break;default:a+=s.bounds.height()+l}switch((r||a)&&up(e,n,r,a),s.orient){case Jr:d+=If(t,n,s,o,1,1);break;case ea:c+=If(t,n,s,li,0,0)+l,d+=If(t,n,s,o,1,1);break;case Ru:c+=If(t,n,s,o,0,0),d+=If(t,n,s,li,-1,0,1)+l;break;default:c+=If(t,n,s,o,0,0)}(c||d)&&up(e,s,c,d),(c=Math.round(s.bounds.x1-i))<0&&(up(e,n,-c,0),up(e,s,-c,0))}}function If(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,c=o&&(a||!l)&&!s?t.items[0]:t,d=c.bounds[r?"y2":"x2"]-e.padding,h=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:pT(n);return Math.round(i===MT?h:i===li?p-y:.5*(d-y))}function up(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function vce(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function bce(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,c=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Jr||o===ea?i:n,v=0,b=0,S=0,w=0,_=0,A;if(s!==c2?o===Jr?(v=r.y2,y=r.y1):o===ea?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Jr&&(v=i,y=0),A=l===MT?v:l===li?y:(v+y)/2,p&&p.text){switch(o){case Fd:case Ru:_=h.bounds.height()+d;break;case Jr:w=h.bounds.width()+d;break;case ea:w=-h.bounds.width()-d;break}Qn.clear().union(p.bounds),Qn.translate(w-(p.x||0),_-(p.y||0)),rd(p,"x",w)|rd(p,"y",_)&&(e.dirty(p),p.bounds.clear().union(Qn),p.mark.bounds.clear().union(Qn),e.dirty(p)),Qn.clear().union(p.bounds)}else Qn.clear();switch(Qn.union(h.bounds),o){case Fd:b=A,S=r.y1-Qn.height()-c;break;case Jr:b=r.x1-Qn.width()-c,S=A;break;case ea:b=r.x2+Qn.width()+c,S=A;break;case Ru:b=A,S=r.y2+c;break;default:b=a.x,S=a.y}return rd(a,"x",b)|rd(a,"y",S)&&(Qn.translate(b,S),e.dirty(a),a.bounds.clear().union(Qn),t.bounds.clear().union(Qn),e.dirty(a)),a.bounds}function oI(e){J.call(this,null,e)}xh(oI,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&lce(n,i,e.layout),Sce(n,i,e)}),xce(e.mark.group)?t.reflow():t}});function xce(e){return e&&e.mark.role!=="legend-entry"}function Sce(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new rn().set(0,0,r,a),o=s.clone(),l=s.clone(),c=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case CT:y=ice(h)?o:l,y.union(ace(e,h,r,a));break;case TT:d=h;break;case DT:c.push(pce(e,h));break;case Vle:case Wle:case YP:case XP:case VP:case WP:case QP:case ZP:o.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(c.length){const S={};c.forEach(w=>{p=w.orient||ea,p!==kT&&(S[p]||(S[p]=[])).push(w)});for(const w in S){const _=S[w];sI(e,_,gce(_,w,n.legends,o,l,r,a))}c.forEach(w=>{const _=w.bounds;if(_.equals(w._bounds)||(w.bounds=w._bounds,e.dirty(w),w.bounds=_,e.dirty(w)),n.autosize&&(n.autosize.type===KP||n.autosize.type===JP||n.autosize.type===eI))switch(w.orient){case Jr:case ea:s.add(_.x1,0).add(_.x2,0);break;case Fd:case Ru:s.add(0,_.y1).add(0,_.y2)}else s.union(_)})}s.union(o).union(l),d&&s.union(bce(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Ece(e,t,s,n)}function Ece(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Qle){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===kT?(c=0,h=0,l=s,d=o):a===KP?(l=Math.max(0,s-c-p),d=Math.max(0,o-h-y)):a===JP?(l=Math.max(0,s-c-p),o=d+h+y):a===eI?(s=l+c+p,d=Math.max(0,o-h-y)):a===Kle&&(s=l+c+p,o=d+h+y),e._resizeView(s,o,l,d,[c,h],r.resize)}const wce=Object.freeze(Object.defineProperty({__proto__:null,bound:tI,identifier:NT,mark:nI,overlap:iI,render:aI,viewlayout:oI},Symbol.toStringTag,{value:"Module"}));function Sh(e,t,n){return e.fields=t||[],e.fname=n,e}function _ce(e){return e.length===1?Ace(e[0]):$ce(e)}const Ace=e=>function(t){return t[e]},$ce=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function no(e){throw Error(e)}function Mce(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||no("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&no("Access path missing closing bracket: "+e),i&&no("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Cce(e,t,n){const i=Mce(e);return e=i.length===1?i[0]:e,Sh(_ce(i),[e],e)}Cce("id");const Tce=Sh(e=>e,[],"identity");Sh(()=>0,[],"zero");const uI=Sh(()=>1,[],"one");Sh(()=>!0,[],"true");const wl=Sh(()=>!1,[],"false");var gm=Array.isArray;function Dce(e){return e===Object(e)}function nc(e){return e[e.length-1]}function kce(e){return e==null||e===""?null:+e}const Oce=e=>t=>e*Math.exp(t),Nce=e=>t=>Math.log(e*t),Rce=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),zce=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Bz=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function f2(e,t,n,i,r){const a=i(e[0]),s=i(nc(e)),o=(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function Fce(e,t,n){return f2(e,t,n,kce,Tce)}function Lce(e,t,n){const i=Math.sign(e[0]);return f2(e,t,n,Nce(i),Oce(i))}function jz(e,t,n,i){return f2(e,t,n,Bz(i),Bz(1/i))}function Uce(e,t,n,i){return f2(e,t,n,Rce(i),zce(i))}function Su(e){return typeof e=="function"}function Bce(e){return Su(e)?e:()=>e}function jce(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Pce(e,t){return Object.hasOwn(e,t)}const vy={};function lI(e){let t={},n;function i(a){return Pce(t,a)&&t[a]!==vy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===vy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=vy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==vy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function So(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),jce(i,n)}function cI(e){return typeof e=="string"}function fI(e){return gm(e)?"["+e.map(fI)+"]":Dce(e)||cI(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Ice(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function dI(e){J.call(this,null,e)}So(dI,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=Z3(a,s,e.minstep),l=e.format||Fj(n,a,o,e.formatSpecifier,e.formatType,!!e.values),c=e.values?zj(a,e.values,o):K3(a,o);return r&&(i.rem=r),r=c.map((d,h)=>st({index:h/(c.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(st({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function hI(e){J.call(this,null,e)}function qce(){return st({})}function Hce(e){const t=lI().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}So(hI,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||qce,a=e.key||we,s=this.value;return gm(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&no("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Hce(a)),t.visit(t.ADD,o=>{const l=a(o);let c=s.get(l);c?c.exit?(s.empty--,i.add.push(c)):i.mod.push(c):(c=r(o),s.set(l,c),i.add.push(c)),c.datum=o,c.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),c=s.get(l);c&&(c.datum=o,i.mod.push(c))}),t.visit(t.REM,o=>{const l=a(o),c=s.get(l);o===c.datum&&!c.exit&&(i.rem.push(c),c.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function gI(e){J.call(this,null,e)}So(gI,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(gm(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||wl,l=r.enter||wl,c=r.exit||wl,d=(a&&!s?r[a]:o)||wl;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),o(h,e)}),n.modifies(l.output),n.modifies(o.output),d!==wl&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&c!==wl&&(t.visit(t.REM,h=>{c(h,e)}),n.modifies(c.output)),s||d!==wl){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function pI(e){J.call(this,[],e)}So(pI,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||ev,s=e.scale,o=+e.limit,l=Z3(s,e.count==null?5:e.count,e.minstep),c=!!e.values||a===ev,d=e.format||jj(n,s,l,a,e.formatSpecifier,e.formatType,c),h=e.values||Bj(s,l),p,y,v,b,S;return r&&(i.rem=r),a===ev?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,Su(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((w,_)=>Math.max(w,v(_,e)),0)):v=Bce(b=v||8),r=r.map((w,_)=>st({index:_,label:d(w,_,r),value:w,offset:b,size:v(w,e)})),S&&(S=h[r.length],r.push(st({index:r.length,label:`${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===Hse?(p=s.domain(),y=Oj(s,p[0],nc(p)),h.length<3&&!e.values&&p[0]!==nc(p)&&(h=[p[0],nc(p)]),r=h.map((w,_)=>st({index:_,label:d(w,_,h),value:w,perc:y(w)}))):(v=h.length-1,y=toe(s),r=h.map((w,_)=>st({index:_,label:d(w,_,h),value:w,perc:_?y(w):0,perc2:_===v?1:y(h[_+1])}))),i.source=r,i.add=r,this.value=r,i}});const Gce=e=>e.source.x,Yce=e=>e.source.y,Xce=e=>e.target.x,Vce=e=>e.target.y;function RT(e){J.call(this,{},e)}RT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};So(RT,J,{transform(e,t){var n=e.sourceX||Gce,i=e.sourceY||Yce,r=e.targetX||Xce,a=e.targetY||Vce,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",c=Pz.get(l+"-"+o)||Pz.get(l);return c||no("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=c(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const mI=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Wce=(e,t,n,i)=>mI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),yI=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Qce=(e,t,n,i)=>yI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),vI=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Zce=(e,t,n,i)=>vI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Kce=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Jce=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,efe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},tfe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},nfe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},ife=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},Pz=lI({line:mI,"line-radial":Wce,arc:yI,"arc-radial":Qce,curve:vI,"curve-radial":Zce,"orthogonal-horizontal":Kce,"orthogonal-vertical":Jce,"orthogonal-radial":efe,"diagonal-horizontal":tfe,"diagonal-vertical":nfe,"diagonal-radial":ife});function zT(e){J.call(this,null,e)}zT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};So(zT,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||uI,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,c=l.map(a),d=c.length,h=s,p=(o-s)/mL(c),y=rr(d),v,b,S;for(e.sort&&y.sort((w,_)=>c[w]-c[_]),v=0;v<d;++v)S=c[y[v]],b=l[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=c,t.reflow(e.modified()).modifies(n)}});const rfe=5;function afe(e){const t=e.type;return!e.bins&&(t===Dd||t===tm||t===nm)}function bI(e){return V3(e)&&e!==Ha}const sfe=Ice(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function xI(e){J.call(this,null,e),this.modified(!0)}So(xI,J,{transform(e,t){var n=t.dataflow,i=this.value,r=ofe(e);(!i||r!==i.type)&&(this.value=i=it(r)());for(r in e)if(!sfe[r]){if(r==="padding"&&bI(i.type))continue;Su(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return hfe(i,e,dfe(i,e,lfe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ofe(e){var t=e.type,n="",i;return t===Ha?Ha+"-"+Dd:(ufe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ha+"-":i===3?yh+"-":""),(n+t||Dd).toLowerCase())}function ufe(e){const t=e.type;return V3(t)&&t!==dc&&t!==hc&&(e.scheme||e.range&&e.range.length&&e.range.every(cI))}function lfe(e,t,n){const i=cfe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&afe(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const c=l>r[o]?o+1:l<r[0]?0:o;c!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(c,0,l)}return bI(a)&&t.padding&&r[0]!==nc(r)&&(r=ffe(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(SI(a,r,n)),a===H3&&e.unknown(t.domainImplicit?i$:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Z3(e,t.nice)||null),r.length}function cfe(e,t,n){return t?(e.domain(SI(e.type,t,n)),t.length):-1}function ffe(e,t,n,i,r,a){var s=Math.abs(nc(n)-n[0]),o=s/(s-2*i),l=e===fo?Lce(t,null,o):e===nm?jz(t,null,o,.5):e===tm?jz(t,null,o,r||1):e===Wx?Uce(t,null,o,a||1):Fce(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function SI(e,t,n){if(Mj(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+fI(t))}return t}function dfe(e,t,n){let i=t.bins;if(i&&!gm(i)){const r=e.domain(),a=r[0],s=nc(r),o=i.step;let l=i.start==null?a:i.start,c=i.stop==null?s:i.stop;o||no("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),c>s&&(c=o*Math.floor(s/o)),i=rr(l,c+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===G3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function hfe(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=gfe(i,t,n);else if(t.scheme&&(a=pfe(i,t,n),Su(a))){if(e.interpolator)return e.interpolator(a);no(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&Cj(i))return e.interpolator(Kx(A$(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(W3(t.interpolate,t.interpolateGamma)):Su(e.round)?e.round(r):Su(e.rangeRound)&&e.interpolate(r?J0:Gu),a&&e.range(A$(a,t.reverse))}function gfe(e,t,n){e!==Sj&&e!==c$&&no("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===c$?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*q3(n,r,i)]}function pfe(e,t,n){var i=t.schemeExtent,r,a;return gm(t.scheme)?a=Kx(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=Q3(r),a||no(`Unrecognized scheme name: ${t.scheme}`)),n=e===Zx?n+1:e===G3?n-1:e===kd||e===Qx?+t.schemeCount||rfe:n,Cj(e)?Iz(a,i,t.reverse):Su(a)?kj(Iz(a,i),n):e===H3?a:a.slice(0,n)}function Iz(e,t,n){return Su(e)&&(t||n)?Dj(e,A$(t||[0,1],n)):e}function A$(e,t){return t?e.slice().reverse():e}function EI(e){J.call(this,null,e)}So(EI,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(zc(e.sort)),this.modified(n),t}});const qz="zero",wI="center",_I="normalize",AI=["y0","y1"];function FT(e){J.call(this,null,e)}FT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:qz,values:[qz,wI,_I]},{name:"as",type:"string",array:!0,length:2,default:AI}]};So(FT,J,{transform(e,t){var n=e.as||AI,i=n[0],r=n[1],a=zc(e.sort),s=e.field||uI,o=e.offset===wI?mfe:e.offset===_I?yfe:vfe,l,c,d,h;for(l=bfe(t.source,e.groupby,a,s),c=0,d=l.length,h=l.max;c<d;++c)o(l[c],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function mfe(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function yfe(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,c=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(c+=Math.abs(n(d)))}function vfe(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,c,d;l<o;++l)d=e[l],c=+n(d),c<0?(d[i]=s,d[r]=s+=c):(d[i]=a,d[r]=a+=c)}function bfe(e,t,n,i){var r=[],a=b=>b(d),s,o,l,c,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,c=r.length;h<c;++h){for(p=r[h],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const xfe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:dI,datajoin:hI,encode:gI,legendentries:pI,linkpath:RT,pie:zT,scale:xI,sortitems:EI,stack:FT},Symbol.toStringTag,{value:"Module"}));function Eh(e,t,n){return e.fields=t||[],e.fname=n,e}function Sfe(e){return e==null?null:e.fname}function lv(e){return e==null?null:e.fields}function Efe(e){return e.length===1?wfe(e[0]):_fe(e)}const wfe=e=>function(t){return t[e]},_fe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Eu(e){throw Error(e)}function Afe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Eu("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Eu("Access path missing closing bracket: "+e),i&&Eu("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function $I(e,t,n){const i=Afe(e);return e=i.length===1?i[0]:e,Eh(Efe(i),[e],e)}$I("id");const A0=Eh(e=>e,[],"identity"),$fe=Eh(()=>0,[],"zero"),Mfe=Eh(()=>1,[],"one");Eh(()=>!0,[],"true");Eh(()=>!1,[],"false");var LT=Array.isArray;function UT(e){return e!=null?LT(e)?e:[e]:[]}function ho(e){return typeof e=="function"}function $0(e){return ho(e)?e:()=>e}function MI(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Cfe(e,t){let n=0,i,r,a,s;if(e&&(i=e.length)){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function us(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),MI(i,n)}function Hz(e){return typeof e=="number"}function Tfe(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}var Ae=1e-6,lb=1e-12,Ie=Math.PI,jt=Ie/2,cb=Ie/4,bi=Ie*2,Yt=180/Ie,je=Ie/180,Xe=Math.abs,wh=Math.atan,zr=Math.atan2,$e=Math.cos,by=Math.ceil,CI=Math.exp,$$=Math.hypot,fb=Math.log,__=Math.pow,_e=Math.sin,Cr=Math.sign||function(e){return e>0?1:e<0?-1:0},xi=Math.sqrt,BT=Math.tan;function TI(e){return e>1?0:e<-1?Ie:Math.acos(e)}function Ui(e){return e>1?jt:e<-1?-jt:Math.asin(e)}function Un(){}function db(e,t){e&&Yz.hasOwnProperty(e.type)&&Yz[e.type](e,t)}var Gz={Feature:function(e,t){db(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)db(n[i].geometry,t)}},Yz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){M$(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)M$(n[i],t,0)},Polygon:function(e,t){Xz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Xz(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)db(n[i],t)}};function M$(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Xz(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)M$(e[n],t,1);t.polygonEnd()}function Gs(e,t){e&&Gz.hasOwnProperty(e.type)?Gz[e.type](e,t):db(e,t)}var hb=new yi,gb=new yi,DI,kI,C$,T$,D$,es={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){hb=new yi,es.lineStart=Dfe,es.lineEnd=kfe},polygonEnd:function(){var e=+hb;gb.add(e<0?bi+e:e),this.lineStart=this.lineEnd=this.point=Un},sphere:function(){gb.add(bi)}};function Dfe(){es.point=Ofe}function kfe(){OI(DI,kI)}function Ofe(e,t){es.point=OI,DI=e,kI=t,e*=je,t*=je,C$=e,T$=$e(t=t/2+cb),D$=_e(t)}function OI(e,t){e*=je,t*=je,t=t/2+cb;var n=e-C$,i=n>=0?1:-1,r=i*n,a=$e(t),s=_e(t),o=D$*s,l=T$*a+o*$e(r),c=o*i*_e(r);hb.add(zr(c,l)),C$=e,T$=a,D$=s}function Nfe(e){return gb=new yi,Gs(e,es),gb*2}function pb(e){return[zr(e[1],e[0]),Ui(e[2])]}function pc(e){var t=e[0],n=e[1],i=$e(n);return[i*$e(t),i*_e(t),_e(n)]}function xy(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ld(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function A_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sy(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mb(e){var t=xi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Nt,ki,Ut,er,Ll,NI,RI,hd,Zp,ru,go,js={point:k$,lineStart:Vz,lineEnd:Wz,polygonStart:function(){js.point=FI,js.lineStart=Rfe,js.lineEnd=zfe,Zp=new yi,es.polygonStart()},polygonEnd:function(){es.polygonEnd(),js.point=k$,js.lineStart=Vz,js.lineEnd=Wz,hb<0?(Nt=-(Ut=180),ki=-(er=90)):Zp>Ae?er=90:Zp<-Ae&&(ki=-90),go[0]=Nt,go[1]=Ut},sphere:function(){Nt=-(Ut=180),ki=-(er=90)}};function k$(e,t){ru.push(go=[Nt=e,Ut=e]),t<ki&&(ki=t),t>er&&(er=t)}function zI(e,t){var n=pc([e*je,t*je]);if(hd){var i=Ld(hd,n),r=[i[1],-i[0],0],a=Ld(r,i);mb(a),a=pb(a);var s=e-Ll,o=s>0?1:-1,l=a[0]*Yt*o,c,d=Xe(s)>180;d^(o*Ll<l&&l<o*e)?(c=a[1]*Yt,c>er&&(er=c)):(l=(l+360)%360-180,d^(o*Ll<l&&l<o*e)?(c=-a[1]*Yt,c<ki&&(ki=c)):(t<ki&&(ki=t),t>er&&(er=t))),d?e<Ll?Ji(Nt,e)>Ji(Nt,Ut)&&(Ut=e):Ji(e,Ut)>Ji(Nt,Ut)&&(Nt=e):Ut>=Nt?(e<Nt&&(Nt=e),e>Ut&&(Ut=e)):e>Ll?Ji(Nt,e)>Ji(Nt,Ut)&&(Ut=e):Ji(e,Ut)>Ji(Nt,Ut)&&(Nt=e)}else ru.push(go=[Nt=e,Ut=e]);t<ki&&(ki=t),t>er&&(er=t),hd=n,Ll=e}function Vz(){js.point=zI}function Wz(){go[0]=Nt,go[1]=Ut,js.point=k$,hd=null}function FI(e,t){if(hd){var n=e-Ll;Zp.add(Xe(n)>180?n+(n>0?360:-360):n)}else NI=e,RI=t;es.point(e,t),zI(e,t)}function Rfe(){es.lineStart()}function zfe(){FI(NI,RI),es.lineEnd(),Xe(Zp)>Ae&&(Nt=-(Ut=180)),go[0]=Nt,go[1]=Ut,hd=null}function Ji(e,t){return(t-=e)<0?t+360:t}function Ffe(e,t){return e[0]-t[0]}function Qz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Lfe(e){var t,n,i,r,a,s,o;if(er=Ut=-(Nt=ki=1/0),ru=[],Gs(e,js),n=ru.length){for(ru.sort(Ffe),t=1,i=ru[0],a=[i];t<n;++t)r=ru[t],Qz(i,r[0])||Qz(i,r[1])?(Ji(i[0],r[1])>Ji(i[0],i[1])&&(i[1]=r[1]),Ji(r[0],i[1])>Ji(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Ji(i[1],r[0]))>s&&(s=o,Nt=r[0],Ut=i[1])}return ru=go=null,Nt===1/0||ki===1/0?[[NaN,NaN],[NaN,NaN]]:[[Nt,ki],[Ut,er]]}var Op,yb,vb,bb,xb,Sb,Eb,wb,O$,N$,R$,LI,UI,fi,di,hi,ta={sphere:Un,point:jT,lineStart:Zz,lineEnd:Kz,polygonStart:function(){ta.lineStart=jfe,ta.lineEnd=Pfe},polygonEnd:function(){ta.lineStart=Zz,ta.lineEnd=Kz}};function jT(e,t){e*=je,t*=je;var n=$e(t);pm(n*$e(e),n*_e(e),_e(t))}function pm(e,t,n){++Op,vb+=(e-vb)/Op,bb+=(t-bb)/Op,xb+=(n-xb)/Op}function Zz(){ta.point=Ufe}function Ufe(e,t){e*=je,t*=je;var n=$e(t);fi=n*$e(e),di=n*_e(e),hi=_e(t),ta.point=Bfe,pm(fi,di,hi)}function Bfe(e,t){e*=je,t*=je;var n=$e(t),i=n*$e(e),r=n*_e(e),a=_e(t),s=zr(xi((s=di*a-hi*r)*s+(s=hi*i-fi*a)*s+(s=fi*r-di*i)*s),fi*i+di*r+hi*a);yb+=s,Sb+=s*(fi+(fi=i)),Eb+=s*(di+(di=r)),wb+=s*(hi+(hi=a)),pm(fi,di,hi)}function Kz(){ta.point=jT}function jfe(){ta.point=Ife}function Pfe(){BI(LI,UI),ta.point=jT}function Ife(e,t){LI=e,UI=t,e*=je,t*=je,ta.point=BI;var n=$e(t);fi=n*$e(e),di=n*_e(e),hi=_e(t),pm(fi,di,hi)}function BI(e,t){e*=je,t*=je;var n=$e(t),i=n*$e(e),r=n*_e(e),a=_e(t),s=di*a-hi*r,o=hi*i-fi*a,l=fi*r-di*i,c=$$(s,o,l),d=Ui(c),h=c&&-d/c;O$.add(h*s),N$.add(h*o),R$.add(h*l),yb+=d,Sb+=d*(fi+(fi=i)),Eb+=d*(di+(di=r)),wb+=d*(hi+(hi=a)),pm(fi,di,hi)}function qfe(e){Op=yb=vb=bb=xb=Sb=Eb=wb=0,O$=new yi,N$=new yi,R$=new yi,Gs(e,ta);var t=+O$,n=+N$,i=+R$,r=$$(t,n,i);return r<lb&&(t=Sb,n=Eb,i=wb,yb<Ae&&(t=vb,n=bb,i=xb),r=$$(t,n,i),r<lb)?[NaN,NaN]:[zr(n,t)*Yt,Ui(i/r)*Yt]}function z$(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function F$(e,t){return Xe(e)>Ie&&(e-=Math.round(e/bi)*bi),[e,t]}F$.invert=F$;function jI(e,t,n){return(e%=bi)?t||n?z$(e8(e),t8(t,n)):e8(e):t||n?t8(t,n):F$}function Jz(e){return function(t,n){return t+=e,Xe(t)>Ie&&(t-=Math.round(t/bi)*bi),[t,n]}}function e8(e){var t=Jz(e);return t.invert=Jz(-e),t}function t8(e,t){var n=$e(e),i=_e(e),r=$e(t),a=_e(t);function s(o,l){var c=$e(l),d=$e(o)*c,h=_e(o)*c,p=_e(l),y=p*n+d*i;return[zr(h*r-y*a,d*n-p*i),Ui(y*r+h*a)]}return s.invert=function(o,l){var c=$e(l),d=$e(o)*c,h=_e(o)*c,p=_e(l),y=p*r-h*a;return[zr(h*r+p*a,d*n+y*i),Ui(y*n-d*i)]},s}function Hfe(e){e=jI(e[0]*je,e[1]*je,e.length>2?e[2]*je:0);function t(n){return n=e(n[0]*je,n[1]*je),n[0]*=Yt,n[1]*=Yt,n}return t.invert=function(n){return n=e.invert(n[0]*je,n[1]*je),n[0]*=Yt,n[1]*=Yt,n},t}function Gfe(e,t,n,i,r,a){if(n){var s=$e(t),o=_e(t),l=i*n;r==null?(r=t+i*bi,a=t-l/2):(r=n8(s,r),a=n8(s,a),(i>0?r<a:r>a)&&(r+=i*bi));for(var c,d=r;i>0?d>a:d<a;d-=l)c=pb([s,-o*$e(d),-o*_e(d)]),e.point(c[0],c[1])}}function n8(e,t){t=pc(t),t[0]-=e,mb(t);var n=TI(-t[1]);return((-t[2]<0?-n:n)+bi-Ae)%bi}function PI(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Un,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function cv(e,t){return Xe(e[0]-t[0])<Ae&&Xe(e[1]-t[1])<Ae}function Ey(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function II(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],w=v[b],_;if(cv(S,w)){if(!S[2]&&!w[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}w[0]+=2*Ae}a.push(_=new Ey(S,v,null,!0)),s.push(_.o=new Ey(S,null,_,!1)),a.push(_=new Ey(w,v,null,!1)),s.push(_.o=new Ey(w,null,_,!0))}}),!!a.length){for(s.sort(t),i8(a),i8(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var c=a[0],d,h;;){for(var p=c,y=!0;p.v;)if((p=p.n)===c)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function i8(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function $_(e){return Xe(e[0])<=Ie?e[0]:Cr(e[0])*((Xe(e[0])+Ie)%bi-Ie)}function Yfe(e,t){var n=$_(t),i=t[1],r=_e(i),a=[_e(n),-$e(n),0],s=0,o=0,l=new yi;r===1?i=jt+Ae:r===-1&&(i=-jt-Ae);for(var c=0,d=e.length;c<d;++c)if(p=(h=e[c]).length)for(var h,p,y=h[p-1],v=$_(y),b=y[1]/2+cb,S=_e(b),w=$e(b),_=0;_<p;++_,v=$,S=D,w=T,y=A){var A=h[_],$=$_(A),M=A[1]/2+cb,D=_e(M),T=$e(M),O=$-v,z=O>=0?1:-1,P=z*O,B=P>Ie,Y=S*D;if(l.add(zr(Y*z*_e(P),w*T+Y*$e(P))),s+=B?O+z*bi:O,B^v>=n^$>=n){var R=Ld(pc(y),pc(A));mb(R);var U=Ld(a,R);mb(U);var F=(B^O>=0?-1:1)*Ui(U[2]);(i>F||i===F&&(R[0]||R[1]))&&(o+=B^O>=0?1:-1)}}return(s<-Ae||s<Ae&&l<-lb)^o&1}function qI(e,t,n,i){return function(r){var a=t(r),s=PI(),o=t(s),l=!1,c,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=w,p.lineStart=_,p.lineEnd=A,d=[],c=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=pL(d);var $=Yfe(c,i);d.length?(l||(r.polygonStart(),l=!0),II(d,Vfe,$,n,r)):$&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,M){e($,M)&&r.point($,M)}function v($,M){a.point($,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function w($,M){h.push([$,M]),o.point($,M)}function _(){o.lineStart(),h=[]}function A(){w(h[0][0],h[0][1]),o.lineEnd();var $=o.clean(),M=s.result(),D,T=M.length,O,z,P;if(h.pop(),c.push(h),h=null,!!T){if($&1){if(z=M[0],(O=z.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<O;++D)r.point((P=z[D])[0],P[1]);r.lineEnd()}return}T>1&&$&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(Xfe))}}return p}}function Xfe(e){return e.length>1}function Vfe(e,t){return((e=e.x)[0]<0?e[1]-jt-Ae:jt-e[1])-((t=t.x)[0]<0?t[1]-jt-Ae:jt-t[1])}const r8=qI(function(){return!0},Wfe,Zfe,[-Ie,-jt]);function Wfe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Ie:-Ie,l=Xe(a-t);Xe(l-Ie)<Ae?(e.point(t,n=(n+s)/2>0?jt:-jt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Ie&&(Xe(t-i)<Ae&&(t-=i*Ae),Xe(a-o)<Ae&&(a-=o*Ae),n=Qfe(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Qfe(e,t,n,i){var r,a,s=_e(e-n);return Xe(s)>Ae?wh((_e(t)*(a=$e(i))*_e(n)-_e(i)*(r=$e(t))*_e(e))/(r*a*s)):(t+i)/2}function Zfe(e,t,n,i){var r;if(e==null)r=n*jt,i.point(-Ie,r),i.point(0,r),i.point(Ie,r),i.point(Ie,0),i.point(Ie,-r),i.point(0,-r),i.point(-Ie,-r),i.point(-Ie,0),i.point(-Ie,r);else if(Xe(e[0]-t[0])>Ae){var a=e[0]<t[0]?Ie:-Ie;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Kfe(e){var t=$e(e),n=2*je,i=t>0,r=Xe(t)>Ae;function a(d,h,p,y){Gfe(y,e,n,p,d,h)}function s(d,h){return $e(d)*$e(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,w){var _=[S,w],A,$=s(S,w),M=i?$?0:c(S,w):$?c(S+(S<0?Ie:-Ie),w):0;if(!h&&(v=y=$)&&d.lineStart(),$!==y&&(A=l(h,_),(!A||cv(h,A)||cv(_,A))&&(_[2]=1)),$!==y)b=0,$?(d.lineStart(),A=l(_,h),d.point(A[0],A[1])):(A=l(h,_),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^$){var D;!(M&p)&&(D=l(_,h,!0))&&(b=0,i?(d.lineStart(),d.point(D[0][0],D[0][1]),d.point(D[1][0],D[1][1]),d.lineEnd()):(d.point(D[1][0],D[1][1]),d.lineEnd(),d.lineStart(),d.point(D[0][0],D[0][1],3)))}$&&(!h||!cv(h,_))&&d.point(_[0],_[1]),h=_,y=$,p=M},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function l(d,h,p){var y=pc(d),v=pc(h),b=[1,0,0],S=Ld(y,v),w=xy(S,S),_=S[0],A=w-_*_;if(!A)return!p&&d;var $=t*w/A,M=-t*_/A,D=Ld(b,S),T=Sy(b,$),O=Sy(S,M);A_(T,O);var z=D,P=xy(T,z),B=xy(z,z),Y=P*P-B*(xy(T,T)-1);if(!(Y<0)){var R=xi(Y),U=Sy(z,(-P-R)/B);if(A_(U,T),U=pb(U),!p)return U;var F=d[0],N=h[0],I=d[1],H=h[1],K;N<F&&(K=F,F=N,N=K);var L=N-F,V=Xe(L-Ie)<Ae,ae=V||L<Ae;if(!V&&H<I&&(K=I,I=H,H=K),ae?V?I+H>0^U[1]<(Xe(U[0]-F)<Ae?I:H):I<=U[1]&&U[1]<=H:L>Ie^(F<=U[0]&&U[0]<=N)){var se=Sy(z,(-P+R)/B);return A_(se,T),[U,pb(se)]}}}function c(d,h){var p=i?e:Ie-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return qI(s,o,a,i?[0,-e]:[-Ie,e-Ie])}function Jfe(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],c=t[1],d=0,h=1,p=l-s,y=c-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var Np=1e9,wy=-Np;function HI(e,t,n,i){function r(c,d){return e<=c&&c<=n&&t<=d&&d<=i}function a(c,d,h,p){var y=0,v=0;if(c==null||(y=s(c,h))!==(v=s(d,h))||l(c,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(c,d){return Xe(c[0]-e)<Ae?d>0?0:3:Xe(c[0]-n)<Ae?d>0?2:1:Xe(c[1]-t)<Ae?d>0?1:0:d>0?3:2}function o(c,d){return l(c.x,d.x)}function l(c,d){var h=s(c,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-c[1]:h===1?c[0]-d[0]:h===2?c[1]-d[1]:d[0]-c[0]}return function(c){var d=c,h=PI(),p,y,v,b,S,w,_,A,$,M,D,T={point:O,lineStart:Y,lineEnd:R,polygonStart:P,polygonEnd:B};function O(F,N){r(F,N)&&d.point(F,N)}function z(){for(var F=0,N=0,I=y.length;N<I;++N)for(var H=y[N],K=1,L=H.length,V=H[0],ae,se,de=V[0],be=V[1];K<L;++K)ae=de,se=be,V=H[K],de=V[0],be=V[1],se<=i?be>i&&(de-ae)*(i-se)>(be-se)*(e-ae)&&++F:be<=i&&(de-ae)*(i-se)<(be-se)*(e-ae)&&--F;return F}function P(){d=h,p=[],y=[],D=!0}function B(){var F=z(),N=D&&F,I=(p=pL(p)).length;(N||I)&&(c.polygonStart(),N&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),I&&II(p,o,F,a,c),c.polygonEnd()),d=c,p=y=v=null}function Y(){T.point=U,y&&y.push(v=[]),M=!0,$=!1,_=A=NaN}function R(){p&&(U(b,S),w&&$&&h.rejoin(),p.push(h.result())),T.point=O,$&&d.lineEnd()}function U(F,N){var I=r(F,N);if(y&&v.push([F,N]),M)b=F,S=N,w=I,M=!1,I&&(d.lineStart(),d.point(F,N));else if(I&&$)d.point(F,N);else{var H=[_=Math.max(wy,Math.min(Np,_)),A=Math.max(wy,Math.min(Np,A))],K=[F=Math.max(wy,Math.min(Np,F)),N=Math.max(wy,Math.min(Np,N))];Jfe(H,K,e,t,n,i)?($||(d.lineStart(),d.point(H[0],H[1])),d.point(K[0],K[1]),I||d.lineEnd(),D=!1):I&&(d.lineStart(),d.point(F,N),D=!1)}_=F,A=N,$=I}return T}}function a8(e,t,n){var i=rr(e,t-Ae,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function s8(e,t,n){var i=rr(e,t-Ae,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function ede(){var e,t,n,i,r,a,s,o,l=10,c=l,d=90,h=360,p,y,v,b,S=2.5;function w(){return{type:"MultiLineString",coordinates:_()}}function _(){return rr(by(i/d)*d,n,d).map(v).concat(rr(by(o/h)*h,s,h).map(b)).concat(rr(by(t/l)*l,e,l).filter(function(A){return Xe(A%d)>Ae}).map(p)).concat(rr(by(a/c)*c,r,c).filter(function(A){return Xe(A%h)>Ae}).map(y))}return w.lines=function(){return _().map(function(A){return{type:"LineString",coordinates:A}})},w.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},w.extent=function(A){return arguments.length?w.extentMajor(A).extentMinor(A):w.extentMinor()},w.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),w.precision(S)):[[i,o],[n,s]]},w.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),w.precision(S)):[[t,a],[e,r]]},w.step=function(A){return arguments.length?w.stepMajor(A).stepMinor(A):w.stepMinor()},w.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],w):[d,h]},w.stepMinor=function(A){return arguments.length?(l=+A[0],c=+A[1],w):[l,c]},w.precision=function(A){return arguments.length?(S=+A,p=a8(a,r,90),y=s8(t,e,S),v=a8(o,s,90),b=s8(i,n,S),w):S},w.extentMajor([[-180,-90+Ae],[180,90-Ae]]).extentMinor([[-180,-80-Ae],[180,80+Ae]])}const M0=e=>e;var M_=new yi,L$=new yi,GI,YI,U$,B$,Ys={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){Ys.lineStart=tde,Ys.lineEnd=ide},polygonEnd:function(){Ys.lineStart=Ys.lineEnd=Ys.point=Un,M_.add(Xe(L$)),L$=new yi},result:function(){var e=M_/2;return M_=new yi,e}};function tde(){Ys.point=nde}function nde(e,t){Ys.point=XI,GI=U$=e,YI=B$=t}function XI(e,t){L$.add(B$*e-U$*t),U$=e,B$=t}function ide(){XI(GI,YI)}var Ud=1/0,_b=Ud,C0=-Ud,Ab=C0,$b={point:rde,lineStart:Un,lineEnd:Un,polygonStart:Un,polygonEnd:Un,result:function(){var e=[[Ud,_b],[C0,Ab]];return C0=Ab=-(_b=Ud=1/0),e}};function rde(e,t){e<Ud&&(Ud=e),e>C0&&(C0=e),t<_b&&(_b=t),t>Ab&&(Ab=t)}var j$=0,P$=0,Rp=0,Mb=0,Cb=0,ad=0,I$=0,q$=0,zp=0,VI,WI,La,Ua,$r={point:mc,lineStart:o8,lineEnd:u8,polygonStart:function(){$r.lineStart=ode,$r.lineEnd=ude},polygonEnd:function(){$r.point=mc,$r.lineStart=o8,$r.lineEnd=u8},result:function(){var e=zp?[I$/zp,q$/zp]:ad?[Mb/ad,Cb/ad]:Rp?[j$/Rp,P$/Rp]:[NaN,NaN];return j$=P$=Rp=Mb=Cb=ad=I$=q$=zp=0,e}};function mc(e,t){j$+=e,P$+=t,++Rp}function o8(){$r.point=ade}function ade(e,t){$r.point=sde,mc(La=e,Ua=t)}function sde(e,t){var n=e-La,i=t-Ua,r=xi(n*n+i*i);Mb+=r*(La+e)/2,Cb+=r*(Ua+t)/2,ad+=r,mc(La=e,Ua=t)}function u8(){$r.point=mc}function ode(){$r.point=lde}function ude(){QI(VI,WI)}function lde(e,t){$r.point=QI,mc(VI=La=e,WI=Ua=t)}function QI(e,t){var n=e-La,i=t-Ua,r=xi(n*n+i*i);Mb+=r*(La+e)/2,Cb+=r*(Ua+t)/2,ad+=r,r=Ua*e-La*t,I$+=r*(La+e),q$+=r*(Ua+t),zp+=r*3,mc(La=e,Ua=t)}function ZI(e){this._context=e}ZI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,bi);break}}},result:Un};var H$=new yi,C_,KI,JI,Fp,Lp,T0={point:Un,lineStart:function(){T0.point=cde},lineEnd:function(){C_&&eq(KI,JI),T0.point=Un},polygonStart:function(){C_=!0},polygonEnd:function(){C_=null},result:function(){var e=+H$;return H$=new yi,e}};function cde(e,t){T0.point=eq,KI=Fp=e,JI=Lp=t}function eq(e,t){Fp-=e,Lp-=t,H$.add(xi(Fp*Fp+Lp*Lp)),Fp=e,Lp=t}let l8,Tb,c8,f8;class d8{constructor(t){this._append=t==null?tq:fde(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==c8||this._append!==Tb){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,c8=i,Tb=this._append,f8=this._,this._=r}this._+=f8;break}}}result(){const t=this._;return this._="",t.length?t:null}}function tq(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function fde(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return tq;if(t!==l8){const n=10**t;l8=t,Tb=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Tb}function nq(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Gs(o,r(a))),a.result()}return s.area=function(o){return Gs(o,r(Ys)),Ys.result()},s.measure=function(o){return Gs(o,r(T0)),T0.result()},s.bounds=function(o){return Gs(o,r($b)),$b.result()},s.centroid=function(o){return Gs(o,r($r)),$r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,M0):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new d8(n)):new ZI(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new d8(n)),s},s.projection(e).digits(n).context(t)}function d2(e){return function(t){var n=new G$;for(var i in e)n[i]=e[i];return n.stream=t,n}}function G$(){}G$.prototype={constructor:G$,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PT(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Gs(n,e.stream($b)),t($b.result()),i!=null&&e.clipExtent(i),e}function h2(e,t,n){return PT(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function IT(e,t,n){return h2(e,[[0,0],t],n)}function qT(e,t,n){return PT(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function HT(e,t,n){return PT(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var h8=16,dde=$e(30*je);function g8(e,t){return+t?gde(e,t):hde(e)}function hde(e){return d2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gde(e,t){function n(i,r,a,s,o,l,c,d,h,p,y,v,b,S){var w=c-i,_=d-r,A=w*w+_*_;if(A>4*t&&b--){var $=s+p,M=o+y,D=l+v,T=xi($*$+M*M+D*D),O=Ui(D/=T),z=Xe(Xe(D)-1)<Ae||Xe(a-h)<Ae?(a+h)/2:zr(M,$),P=e(z,O),B=P[0],Y=P[1],R=B-i,U=Y-r,F=_*R-w*U;(F*F/A>t||Xe((w*R+_*U)/A-.5)>.3||s*p+o*y+l*v<dde)&&(n(i,r,a,s,o,l,B,Y,z,$/=T,M/=T,D,b,S),S.point(B,Y),n(B,Y,z,$,M,D,c,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,l,c,d,h,p,y,v,b,S={point:w,lineStart:_,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=_}};function w(O,z){O=e(O,z),i.point(O[0],O[1])}function _(){h=NaN,S.point=A,i.lineStart()}function A(O,z){var P=pc([O,z]),B=e(O,z);n(h,p,d,y,v,b,h=B[0],p=B[1],d=O,y=P[0],v=P[1],b=P[2],h8,i),i.point(h,p)}function $(){S.point=w,i.lineEnd()}function M(){_(),S.point=D,S.lineEnd=T}function D(O,z){A(r=O,z),a=h,s=p,o=y,l=v,c=b,S.point=A}function T(){n(h,p,d,y,v,b,a,s,r,o,l,c,h8,i),S.lineEnd=$,$()}return S}}var pde=d2({point:function(e,t){this.stream.point(e*je,t*je)}});function mde(e){return d2({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function yde(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function p8(e,t,n,i,r,a){if(!a)return yde(e,t,n,i,r);var s=$e(a),o=_e(a),l=s*e,c=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[l*b-c*S+t,n-c*b-l*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ls(e){return iq(function(){return e})()}function iq(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,c=0,d,h=0,p=1,y=1,v=null,b=r8,S=null,w,_,A,$=M0,M=.5,D,T,O,z,P;function B(F){return O(F[0]*je,F[1]*je)}function Y(F){return F=O.invert(F[0],F[1]),F&&[F[0]*Yt,F[1]*Yt]}B.stream=function(F){return z&&P===F?z:z=pde(mde(d)(b(D($(P=F)))))},B.preclip=function(F){return arguments.length?(b=F,v=void 0,U()):b},B.postclip=function(F){return arguments.length?($=F,S=w=_=A=null,U()):$},B.clipAngle=function(F){return arguments.length?(b=+F?Kfe(v=F*je):(v=null,r8),U()):v*Yt},B.clipExtent=function(F){return arguments.length?($=F==null?(S=w=_=A=null,M0):HI(S=+F[0][0],w=+F[0][1],_=+F[1][0],A=+F[1][1]),U()):S==null?null:[[S,w],[_,A]]},B.scale=function(F){return arguments.length?(n=+F,R()):n},B.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],R()):[i,r]},B.center=function(F){return arguments.length?(a=F[0]%360*je,s=F[1]%360*je,R()):[a*Yt,s*Yt]},B.rotate=function(F){return arguments.length?(o=F[0]%360*je,l=F[1]%360*je,c=F.length>2?F[2]%360*je:0,R()):[o*Yt,l*Yt,c*Yt]},B.angle=function(F){return arguments.length?(h=F%360*je,R()):h*Yt},B.reflectX=function(F){return arguments.length?(p=F?-1:1,R()):p<0},B.reflectY=function(F){return arguments.length?(y=F?-1:1,R()):y<0},B.precision=function(F){return arguments.length?(D=g8(T,M=F*F),U()):xi(M)},B.fitExtent=function(F,N){return h2(B,F,N)},B.fitSize=function(F,N){return IT(B,F,N)},B.fitWidth=function(F,N){return qT(B,F,N)},B.fitHeight=function(F,N){return HT(B,F,N)};function R(){var F=p8(n,0,0,p,y,h).apply(null,t(a,s)),N=p8(n,i-F[0],r-F[1],p,y,h);return d=jI(o,l,c),T=z$(t,N),O=z$(d,T),D=g8(T,M),U()}function U(){return z=P=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&Y,R()}}function GT(e){var t=0,n=Ie/3,i=iq(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*je,n=a[1]*je):[t*Yt,n*Yt]},r}function vde(e){var t=$e(e);function n(i,r){return[i*t,_e(r)/t]}return n.invert=function(i,r){return[i/t,Ui(r*t)]},n}function bde(e,t){var n=_e(e),i=(n+_e(t))/2;if(Xe(i)<Ae)return vde(e);var r=1+n*(2*i-n),a=xi(r)/i;function s(o,l){var c=xi(r-2*i*_e(l))/i;return[c*_e(o*=i),a-c*$e(o)]}return s.invert=function(o,l){var c=a-l,d=zr(o,Xe(c))*Cr(c);return c*i<0&&(d-=Ie*Cr(o)*Cr(c)),[d/i,Ui((r-(o*o+c*c)*i*i)/(2*i))]},s}function Db(){return GT(bde).scale(155.424).center([0,33.6442])}function rq(){return Db().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xde(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Sde(){var e,t,n=rq(),i,r=Db().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Db().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=xde([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(c),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ae,b+.12*y+Ae],[v-.214*y-Ae,b+.234*y-Ae]]).stream(c),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ae,b+.166*y+Ae],[v-.115*y-Ae,b+.234*y-Ae]]).stream(c),h()},d.fitExtent=function(p,y){return h2(d,p,y)},d.fitSize=function(p,y){return IT(d,p,y)},d.fitWidth=function(p,y){return qT(d,p,y)},d.fitHeight=function(p,y){return HT(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function aq(e){return function(t,n){var i=$e(t),r=$e(n),a=e(i*r);return a===1/0?[2,0]:[a*r*_e(t),a*_e(n)]}}function mm(e){return function(t,n){var i=xi(t*t+n*n),r=e(i),a=_e(r),s=$e(r);return[zr(t*a,i*s),Ui(i&&n*a/i)]}}var sq=aq(function(e){return xi(2/(1+e))});sq.invert=mm(function(e){return 2*Ui(e/2)});function Ede(){return ls(sq).scale(124.75).clipAngle(180-.001)}var oq=aq(function(e){return(e=TI(e))&&e/_e(e)});oq.invert=mm(function(e){return e});function wde(){return ls(oq).scale(79.4188).clipAngle(180-.001)}function g2(e,t){return[e,fb(BT((jt+t)/2))]}g2.invert=function(e,t){return[e,2*wh(CI(t))-jt]};function _de(){return uq(g2).scale(961/bi)}function uq(e){var t=ls(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,c;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=l=c=null:(s=+h[0][0],o=+h[0][1],l=+h[1][0],c=+h[1][1]),d()):s==null?null:[[s,o],[l,c]]};function d(){var h=Ie*i(),p=t(Hfe(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===g2?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,l),c]]:[[s,Math.max(p[1]-h,o)],[l,Math.min(p[1]+h,c)]])}return d()}function _y(e){return BT((jt+e)/2)}function Ade(e,t){var n=$e(e),i=e===t?_e(e):fb(n/$e(t))/fb(_y(t)/_y(e)),r=n*__(_y(e),i)/i;if(!i)return g2;function a(s,o){r>0?o<-jt+Ae&&(o=-jt+Ae):o>jt-Ae&&(o=jt-Ae);var l=r/__(_y(o),i);return[l*_e(i*s),r-l*$e(i*s)]}return a.invert=function(s,o){var l=r-o,c=Cr(i)*xi(s*s+l*l),d=zr(s,Xe(l))*Cr(l);return l*i<0&&(d-=Ie*Cr(s)*Cr(l)),[d/i,2*wh(__(r/c,1/i))-jt]},a}function $de(){return GT(Ade).scale(109.5).parallels([30,30])}function kb(e,t){return[e,t]}kb.invert=kb;function Mde(){return ls(kb).scale(152.63)}function Cde(e,t){var n=$e(e),i=e===t?_e(e):(n-$e(t))/(t-e),r=n/i+e;if(Xe(i)<Ae)return kb;function a(s,o){var l=r-o,c=i*s;return[l*_e(c),r-l*$e(c)]}return a.invert=function(s,o){var l=r-o,c=zr(s,Xe(l))*Cr(l);return l*i<0&&(c-=Ie*Cr(s)*Cr(l)),[c/i,r-Cr(i)*xi(s*s+l*l)]},a}function Tde(){return GT(Cde).scale(131.154).center([0,13.9389])}var Kp=1.340264,Jp=-.081106,e0=893e-6,t0=.003796,Ob=xi(3)/2,Dde=12;function lq(e,t){var n=Ui(Ob*_e(t)),i=n*n,r=i*i*i;return[e*$e(n)/(Ob*(Kp+3*Jp*i+r*(7*e0+9*t0*i))),n*(Kp+Jp*i+r*(e0+t0*i))]}lq.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<Dde&&(o=n*(Kp+Jp*i+r*(e0+t0*i))-t,l=Kp+3*Jp*i+r*(7*e0+9*t0*i),n-=s=o/l,i=n*n,r=i*i*i,!(Xe(s)<lb));++a);return[Ob*e*(Kp+3*Jp*i+r*(7*e0+9*t0*i))/$e(n),Ui(_e(n)/Ob)]};function kde(){return ls(lq).scale(177.158)}function cq(e,t){var n=$e(t),i=$e(e)*n;return[n*_e(e)/i,_e(t)/i]}cq.invert=mm(wh);function Ode(){return ls(cq).scale(144.049).clipAngle(60)}function Nde(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,c,d,h,p=1,y=1,v=d2({point:function($,M){var D=A([$,M]);this.stream.point(D[0],D[1])}}),b=M0,S,w;function _(){return p=e*i,y=e*r,S=w=null,A}function A($){var M=$[0]*p,D=$[1]*y;if(a){var T=D*s-M*o;M=M*s+D*o,D=T}return[M+t,D+n]}return A.invert=function($){var M=$[0]-t,D=$[1]-n;if(a){var T=D*s+M*o;M=M*s-D*o,D=T}return[M/p,D/y]},A.stream=function($){return S&&w===$?S:S=v(b(w=$))},A.postclip=function($){return arguments.length?(b=$,l=c=d=h=null,_()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(l=c=d=h=null,M0):HI(l=+$[0][0],c=+$[0][1],d=+$[1][0],h=+$[1][1]),_()):l==null?null:[[l,c],[d,h]]},A.scale=function($){return arguments.length?(e=+$,_()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],_()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*je,o=_e(a),s=$e(a),_()):a*Yt},A.reflectX=function($){return arguments.length?(i=$?-1:1,_()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,_()):r<0},A.fitExtent=function($,M){return h2(A,$,M)},A.fitSize=function($,M){return IT(A,$,M)},A.fitWidth=function($,M){return qT(A,$,M)},A.fitHeight=function($,M){return HT(A,$,M)},A}function fq(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}fq.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Xe(r)>Ae&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Rde(){return ls(fq).scale(175.295)}function dq(e,t){return[$e(t)*_e(e),_e(t)]}dq.invert=mm(Ui);function zde(){return ls(dq).scale(249.5).clipAngle(90+Ae)}function hq(e,t){var n=$e(t),i=1+$e(e)*n;return[n*_e(e)/i,_e(t)/i]}hq.invert=mm(function(e){return 2*wh(e)});function Fde(){return ls(hq).scale(250).clipAngle(142)}function gq(e,t){return[fb(BT((jt+t)/2)),-e]}gq.invert=function(e,t){return[-t,2*wh(CI(e))-jt]};function Lde(){var e=uq(gq),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Ude=Math.abs,Y$=Math.cos,Nb=Math.sin,Bde=1e-6,pq=Math.PI,X$=pq/2,m8=jde(2);function y8(e){return e>1?X$:e<-1?-X$:Math.asin(e)}function jde(e){return e>0?Math.sqrt(e):0}function Pde(e,t){var n=e*Nb(t),i=30,r;do t-=r=(t+Nb(t)-n)/(1+Y$(t));while(Ude(r)>Bde&&--i>0);return t/2}function Ide(e,t,n){function i(r,a){return[e*r*Y$(a=Pde(n,a)),t*Nb(a)]}return i.invert=function(r,a){return a=y8(a/t),[r/(e*Y$(a)),y8((2*a+Nb(2*a))/n)]},i}var qde=Ide(m8/X$,m8,pq);function Hde(){return ls(qde).scale(169.529)}const Gde=nq(),V$=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Yde(e,t){return function n(){const i=t();return i.type=e,i.path=nq().projection(i),i.copy=i.copy||function(){const r=n();return V$.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},Aj(i)}}function YT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Rb[e]=Yde(e,t),this):Rb[e]||null}function mq(e){return e&&e.path||Gde}const Rb={albers:rq,albersusa:Sde,azimuthalequalarea:Ede,azimuthalequidistant:wde,conicconformal:$de,conicequalarea:Db,conicequidistant:Tde,equalEarth:kde,equirectangular:Mde,gnomonic:Ode,identity:Nde,mercator:_de,mollweide:Hde,naturalEarth1:Rde,orthographic:zde,stereographic:Fde,transversemercator:Lde};for(const e in Rb)YT(e,Rb[e]);function Xde(){}const zs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function yq(){var e=1,t=1,n=o;function i(l,c){return c.map(d=>r(l,d))}function r(l,c){var d=[],h=[];return a(l,c,p=>{n(p,l,c),Vde(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Wde((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:d}}function a(l,c,d){var h=[],p=[],y,v,b,S,w,_;for(y=v=-1,S=l[0]>=c,zs[S<<1].forEach(A);++y<e-1;)b=S,S=l[y+1]>=c,zs[b|S<<1].forEach(A);for(zs[S<<0].forEach(A);++v<t-1;){for(y=-1,S=l[v*e+e]>=c,w=l[v*e]>=c,zs[S<<1|w<<2].forEach(A);++y<e-1;)b=S,S=l[v*e+e+y+1]>=c,_=w,w=l[v*e+y+1]>=c,zs[b|S<<1|w<<2|_<<3].forEach(A);zs[S|w<<3].forEach(A)}for(y=-1,w=l[v*e]>=c,zs[w<<2].forEach(A);++y<e-1;)_=w,w=l[v*e+y+1]>=c,zs[w<<2|_<<3].forEach(A);zs[w<<3].forEach(A);function A($){var M=[$[0][0]+y,$[0][1]+v],D=[$[1][0]+y,$[1][1]+v],T=s(M),O=s(D),z,P;(z=p[T])?(P=h[O])?(delete p[z.end],delete h[P.start],z===P?(z.ring.push(D),d(z.ring)):h[z.start]=p[P.end]={start:z.start,end:P.end,ring:z.ring.concat(P.ring)}):(delete p[z.end],z.ring.push(D),p[z.end=O]=z):(z=h[O])?(P=p[T])?(delete h[z.start],delete p[P.end],z===P?(z.ring.push(D),d(z.ring)):h[P.start]=p[z.end]={start:P.start,end:z.end,ring:P.ring.concat(z.ring)}):(delete h[z.start],z.ring.unshift(M),h[z.start=T]=z):h[T]=p[O]={start:T,end:O,ring:[M,D]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,c,d){l.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,w=c[b*e+v];p>0&&p<e&&v===p&&(S=c[b*e+v-1],h[0]=p+(d-S)/(w-S)-.5),y>0&&y<t&&b===y&&(S=c[(b-1)*e+v],h[1]=y+(d-S)/(w-S)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),d=Math.floor(l[1]);return c>=0&&d>=0||Eu("invalid size"),e=c,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:Xde,i):n===o},i}function Vde(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Wde(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Qde(e,t[n]))return r;return 0}function Qde(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],c=l[0],d=l[1],h=e[o],p=h[0],y=h[1];if(Zde(l,h,t))return 0;d>i!=y>i&&n<(p-c)*(i-d)/(y-d)+c&&(r=-r)}return r}function Zde(e,t,n){var i;return Kde(e,t,n)&&Jde(e[i=+(e[0]===t[0])],n[i],t[i])}function Kde(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Jde(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function vq(e,t,n){return function(i){var r=Cfe(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?$u(a,s,e):o/(e+1);return rr(a+l,s,l)}}function XT(e){J.call(this,null,e)}XT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};us(XT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||A0,a=yq().smooth(e.smooth!==!1),s=e.thresholds||ehe(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(c=>{const d=r(c),h=a.size([d.width,d.height])(d.values,LT(s)?s:s(d.values));the(h,d,c,e),h.forEach(p=>{l.push(Dx(c,st(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ehe(e,t,n){const i=vq(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Kl(t(r).values)))}function the(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(ho(r)&&(r=r(n,i)),ho(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(Hz(r)?r:r[0])||1,o=(Hz(r)?r:r[1])||1,l=a&&a[0]||0,c=a&&a[1]||0;e.forEach(bq(t,s,o,l,c))}function bq(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(h){h.forEach(c)}function c(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(l),h}}function v8(e,t,n){const i=e>=0?e:zC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function T_(e){return ho(e)?e:$0(+e)}function xq(){var e=l=>l[0],t=l=>l[1],n=Mfe,i=[-1,-1],r=960,a=500,s=2;function o(l,c){const d=v8(i[0],l,e)>>s,h=v8(i[1],l,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),w=new Float32Array(v*b);let _=S;l.forEach($=>{const M=p+(+e($)>>s),D=y+(+t($)>>s);M>=0&&M<v&&D>=0&&D<b&&(S[M+D*v]+=+n($))}),d>0&&h>0?(qf(v,b,S,w,d),Hf(v,b,w,S,h),qf(v,b,S,w,d),Hf(v,b,w,S,h),qf(v,b,S,w,d),Hf(v,b,w,S,h)):d>0?(qf(v,b,S,w,d),qf(v,b,w,S,d),qf(v,b,S,w,d),_=w):h>0&&(Hf(v,b,S,w,h),Hf(v,b,w,S,h),Hf(v,b,S,w,h),_=w);const A=c?Math.pow(2,-2*s):1/mL(_);for(let $=0,M=v*b;$<M;++$)_[$]*=A;return{values:_,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=T_(l),o):e},o.y=function(l){return arguments.length?(t=T_(l),o):t},o.weight=function(l){return arguments.length?(n=T_(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var c=+l[0],d=+l[1];return c>=0&&d>=0||Eu("invalid size"),r=c,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||Eu("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=UT(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Eu("invalid bandwidth"),i=l,o):i},o}function qf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function Hf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function VT(e){J.call(this,null,e)}VT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const nhe=["x","y","weight","size","cellSize","bandwidth"];function Sq(e,t){return nhe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}us(VT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=ihe(i,e.groupby),a=(e.groupby||[]).map(Sfe),s=Sq(xq(),e),o=e.as||"grid",l=[];function c(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return l=r.map(d=>st(c({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ihe(e,t){var n=[],i=d=>d(o),r,a,s,o,l,c;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),c=r[l],c||(r[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function WT(e){J.call(this,null,e)}WT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};us(WT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=yq().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||vq(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=Sq(xq(),e)(r,!0),l=bq(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=LT(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(st),n}});const W$="Feature",QT="FeatureCollection",rhe="MultiPoint";function ZT(e){J.call(this,null,e)}ZT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};us(ZT,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&A0,l=t.ADD,c;c=e.modified()||t.changed(t.REM)||t.modified(lv(o))||a&&t.modified(lv(a))||s&&t.modified(lv(s)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:W$,geometry:{type:rhe,coordinates:i}})),this.value={type:QT,features:n}}});function KT(e){J.call(this,null,e)}KT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};us(KT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||A0,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=mq(e.projection),n.materialize().reflow()):s=r===A0||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=ahe(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function ahe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function JT(e){J.call(this,null,e)}JT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};us(JT,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function c(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(a)}});function eD(e){J.call(this,null,e)}eD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};us(eD,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=she(mq(e.projection),e.field||$I("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function she(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function tD(e){J.call(this,[],e),this.generator=ede()}tD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};us(tD,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)ho(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(dU(n[0],r)):t.add.push(st(r)),n[0]=r,t}});function nD(e){J.call(this,null,e)}nD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};us(nD,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||A0,a=uhe(e.opacity,e),s=ohe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Kl(n.map(c=>Kl(r(c).values))):0};return n.forEach(c=>{const d=r(c),h=MI({},c,l);i||(h.$max=Kl(d.values||[])),c[o]=lhe(d,h,s.dep?s:$0(s(h)),a.dep?a:$0(a(h)))}),t.reflow(!0).modifies(o)}});function ohe(e,t){let n;return ho(e)?(n=i=>Du(e(i,t)),n.dep=Eq(e)):n=$0(Du(e||"#888")),n}function uhe(e,t){let n;return ho(e)?(n=i=>e(i,t),n.dep=Eq(e)):e?n=$0(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Eq(e){if(!ho(e))return!1;const t=Tfe(lv(e));return t.$x||t.$y||t.$value||t.$max}function lhe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,c=e.y2||a,d=e.values,h=d?S=>d[S]:$fe,p=bu(l-s,c-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,c-o),b=v.data;for(let S=o,w=0;S<c;++S){t.$y=S-o;for(let _=s,A=S*r;_<l;++_,w+=4){t.$x=_-s,t.$value=h(_+A);const $=n(t);b[w+0]=$.r,b[w+1]=$.g,b[w+2]=$.b,b[w+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function wq(e){J.call(this,null,e),this.modified(!0)}us(wq,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=fhe(e.type),V$.forEach(i=>{e[i]!=null&&b8(n,i,e[i])})):V$.forEach(i=>{e.modified(i)&&b8(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&che(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function che(e,t){const n=dhe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function fhe(e){const t=YT((e||"mercator").toLowerCase());return t||Eu("Unrecognized projection type: "+e),t()}function b8(e,t,n){ho(e[t])&&e[t](n)}function dhe(e){return e=UT(e),e.length===1?e[0]:{type:QT,features:e.reduce((t,n)=>t.concat(hhe(n)),[])}}function hhe(e){return e.type===QT?e.features:UT(e).filter(t=>t!=null).map(t=>t.type===W$?t:{type:W$,geometry:t})}const ghe=Object.freeze(Object.defineProperty({__proto__:null,contour:WT,geojson:ZT,geopath:KT,geopoint:JT,geoshape:eD,graticule:tD,heatmap:nD,isocontour:XT,kde2d:VT,projection:wq},Symbol.toStringTag,{value:"Module"}));function _h(e,t,n){return e.fields=t||[],e.fname=n,e}function phe(e){return e==null?null:e.fields}function mhe(e){return e.length===1?yhe(e[0]):vhe(e)}const yhe=e=>function(t){return t[e]},vhe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function fv(e){throw Error(e)}function bhe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||fv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&fv("Access path missing closing bracket: "+e),i&&fv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function xhe(e,t,n){const i=bhe(e);return e=i.length===1?i[0]:e,_h(mhe(i),[e],e)}xhe("id");_h(e=>e,[],"identity");_h(()=>0,[],"zero");_h(()=>1,[],"one");_h(()=>!0,[],"true");_h(()=>!1,[],"false");var She=Array.isArray;function Ehe(e){return e!=null?She(e)?e:[e]:[]}function iD(e){return typeof e=="function"}function whe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function _he(e,t){return Object.hasOwn(e,t)}function Ahe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),whe(i,n)}function $he(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,c=0;for(a=0;a<s;++a)o=n[a],l+=o.x,c+=o.y;for(l=(l/s-e)*i,c=(c/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=c}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Mhe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return _q(this.cover(t,n),t,n,e)}function _q(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,c=e._x1,d=e._y1,h,p,y,v,b,S,w,_;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+c)/2))?o=h:c=h,(S=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[w=S<<1|b]))return r[w]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[w]=s:e._root=s,e;do r=r?r[w]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+c)/2))?o=h:c=h,(S=n>=(p=(l+d)/2))?l=p:d=p;while((w=S<<1|b)===(_=(v>=p)<<1|y>=h));return r[_]=a,r[w]=s,e}function Che(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,c=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<c&&(c=a),a>h&&(h=a));if(l>d||c>h)return this;for(this.cover(l,c).cover(d,h),n=0;n<i;++n)_q(this,s[n],o[n],e[n]);return this}function The(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,c;n>e||e>=r||i>t||t>=a;)switch(c=(t<i)<<1|e<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Dhe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function khe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function gi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Ohe(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,c,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new gi(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(l=v.x1)<r||(c=v.y1)<a))if(y.length){var S=(s+l)/2,w=(o+c)/2;p.push(new gi(y[3],S,w,l,c),new gi(y[2],s,w,S,c),new gi(y[1],S,o,l,w),new gi(y[0],s,o,S,w)),(b=(t>=w)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var _=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=_*_+A*A;if($<n){var M=Math.sqrt(n=$);r=e-M,a=t-M,d=e+M,h=t+M,i=y.data}}return i}function Nhe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,c=this._y1,d,h,p,y,v,b,S,w;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=h>=(y=(o+c)/2))?o=y:c=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,w=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[w]=n:this._root=n),this):(this._root=a,this)}function Rhe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function zhe(){return this._root}function Fhe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Lhe(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new gi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var c=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new gi(r,c,d,o,l)),(r=i[2])&&t.push(new gi(r,a,d,c,l)),(r=i[1])&&t.push(new gi(r,c,s,o,d)),(r=i[0])&&t.push(new gi(r,a,s,c,d))}return this}function Uhe(e){var t=[],n=[],i;for(this._root&&t.push(new gi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,c=i.y1,d=(s+l)/2,h=(o+c)/2;(a=r[0])&&t.push(new gi(a,s,o,d,h)),(a=r[1])&&t.push(new gi(a,d,o,l,h)),(a=r[2])&&t.push(new gi(a,s,h,d,c)),(a=r[3])&&t.push(new gi(a,d,h,l,c))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Bhe(e){return e[0]}function jhe(e){return arguments.length?(this._x=e,this):this._x}function Phe(e){return e[1]}function Ihe(e){return arguments.length?(this._y=e,this):this._y}function rD(e,t,n){var i=new aD(t??Bhe,n??Phe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function aD(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function x8(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ei=rD.prototype=aD.prototype;Ei.copy=function(){var e=new aD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=x8(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=x8(i));return e};Ei.add=Mhe;Ei.addAll=Che;Ei.cover=The;Ei.data=Dhe;Ei.extent=khe;Ei.find=Ohe;Ei.remove=Nhe;Ei.removeAll=Rhe;Ei.root=zhe;Ei.size=Fhe;Ei.visit=Lhe;Ei.visitAfter=Uhe;Ei.x=jhe;Ei.y=Ihe;function pi(e){return function(){return e}}function hu(e){return(e()-.5)*1e-6}function qhe(e){return e.x+e.vx}function Hhe(e){return e.y+e.vy}function Ghe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=pi(e==null?1:+e));function s(){for(var c,d=t.length,h,p,y,v,b,S,w=0;w<a;++w)for(h=rD(t,qhe,Hhe).visitAfter(o),c=0;c<d;++c)p=t[c],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(_);function _(A,$,M,D,T){var O=A.data,z=A.r,P=b+z;if(O){if(O.index>p.index){var B=y-O.x-O.vx,Y=v-O.y-O.vy,R=B*B+Y*Y;R<P*P&&(B===0&&(B=hu(i),R+=B*B),Y===0&&(Y=hu(i),R+=Y*Y),R=(P-(R=Math.sqrt(R)))/R*r,p.vx+=(B*=R)*(P=(z*=z)/(S+z)),p.vy+=(Y*=R)*P,O.vx-=B*(P=1-P),O.vy-=Y*P)}return}return $>y+P||D<y-P||M>v+P||T<v-P}}function o(c){if(c.data)return c.r=n[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function l(){if(t){var c,d=t.length,h;for(n=new Array(d),c=0;c<d;++c)h=t[c],n[h.index]=+e(h,c,t)}}return s.initialize=function(c,d){t=c,i=d,l()},s.iterations=function(c){return arguments.length?(a=+c,s):a},s.strength=function(c){return arguments.length?(r=+c,s):r},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:pi(+c),l(),s):e},s}function Yhe(e){return e.index}function S8(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Xhe(e){var t=Yhe,n=h,i,r=pi(30),a,s,o,l,c,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var w=0,_=e.length;w<d;++w)for(var A=0,$,M,D,T,O,z,P;A<_;++A)$=e[A],M=$.source,D=$.target,T=D.x+D.vx-M.x-M.vx||hu(c),O=D.y+D.vy-M.y-M.vy||hu(c),z=Math.sqrt(T*T+O*O),z=(z-a[A])/z*S*i[A],T*=z,O*=z,D.vx-=T*(P=l[A]),D.vy-=O*P,M.vx+=T*(P=1-P),M.vy+=O*P}function y(){if(s){var S,w=s.length,_=e.length,A=new Map(s.map((M,D)=>[t(M,D,s),M])),$;for(S=0,o=new Array(w);S<_;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=S8(A,$.source)),typeof $.target!="object"&&($.target=S8(A,$.target)),o[$.source.index]=(o[$.source.index]||0)+1,o[$.target.index]=(o[$.target.index]||0)+1;for(S=0,l=new Array(_);S<_;++S)$=e[S],l[S]=o[$.source.index]/(o[$.source.index]+o[$.target.index]);i=new Array(_),v(),a=new Array(_),b()}}function v(){if(s)for(var S=0,w=e.length;S<w;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,w=e.length;S<w;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,w){s=S,c=w,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:pi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:pi(+S),b(),p):r},p}var Vhe={value:()=>{}};function Aq(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new dv(n)}function dv(e){this._=e}function Whe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}dv.prototype=Aq.prototype={constructor:dv,on:function(e,t){var n=this._,i=Whe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Qhe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=E8(n[r],e.name,t);else if(t==null)for(r in n)n[r]=E8(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dv(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Qhe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function E8(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Vhe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Bd=0,Up=0,lp=0,$q=1e3,zb,Bp,Fb=0,yc=0,p2=0,D0=typeof performance=="object"&&performance.now?performance:Date,Mq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sD(){return yc||(Mq(Zhe),yc=D0.now()+p2)}function Zhe(){yc=0}function Lb(){this._call=this._time=this._next=null}Lb.prototype=Cq.prototype={constructor:Lb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sD():+n)+(t==null?0:+t),!this._next&&Bp!==this&&(Bp?Bp._next=this:zb=this,Bp=this),this._call=e,this._time=n,Q$()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q$())}};function Cq(e,t,n){var i=new Lb;return i.restart(e,t,n),i}function Khe(){sD(),++Bd;for(var e=zb,t;e;)(t=yc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bd}function w8(){yc=(Fb=D0.now())+p2,Bd=Up=0;try{Khe()}finally{Bd=0,ege(),yc=0}}function Jhe(){var e=D0.now(),t=e-Fb;t>$q&&(p2-=t,Fb=e)}function ege(){for(var e,t=zb,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zb=n);Bp=e,Q$(i)}function Q$(e){if(!Bd){Up&&(Up=clearTimeout(Up));var t=e-yc;t>24?(e<1/0&&(Up=setTimeout(w8,e-D0.now()-p2)),lp&&(lp=clearInterval(lp))):(lp||(Fb=D0.now(),lp=setInterval(Jhe,$q)),Bd=1,Mq(w8))}}function tge(e,t,n){var i=new Lb,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?sD():+o,i._restart(function l(c){c+=r,i._restart(l,r+=s,o),a(c)},s,o)},i.restart(e,t,n),i)}const nge=1664525,ige=1013904223,_8=4294967296;function rge(){let e=1;return()=>(e=(nge*e+ige)%_8)/_8}function age(e){return e.x}function sge(e){return e.y}var oge=10,uge=Math.PI*(3-Math.sqrt(5));function lge(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=Cq(h),c=Aq("tick","end"),d=rge();e==null&&(e=[]);function h(){p(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function p(b){var S,w=e.length,_;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function($){$(n)}),S=0;S<w;++S)_=e[S],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return t}function y(){for(var b=0,S=e.length,w;b<S;++b){if(w=e[b],w.index=b,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var _=oge*Math.sqrt(.5+b),A=b*uge;w.x=_*Math.cos(A),w.y=_*Math.sin(A)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,w){var _=0,A=e.length,$,M,D,T,O;for(w==null?w=1/0:w*=w,_=0;_<A;++_)T=e[_],$=b-T.x,M=S-T.y,D=$*$+M*M,D<w&&(O=T,w=D);return O},on:function(b,S){return arguments.length>1?(c.on(b,S),t):c.on(b)}}}function cge(){var e,t,n,i,r=pi(-30),a,s=1,o=1/0,l=.81;function c(y){var v,b=e.length,S=rD(e,age,sge).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,w=0,_,A,$;if(y.length){for(_=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,w+=S,_+=S*b.x,A+=S*b.y);y.x=_/w,y.y=A/w}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var w=y.x-t.x,_=y.y-t.y,A=S-v,$=w*w+_*_;if(A*A/l<$)return $<o&&(w===0&&(w=hu(n),$+=w*w),_===0&&(_=hu(n),$+=_*_),$<s&&($=Math.sqrt(s*$)),t.vx+=w*y.value*i/$,t.vy+=_*y.value*i/$),!0;if(y.length||$>=o)return;(y.data!==t||y.next)&&(w===0&&(w=hu(n),$+=w*w),_===0&&(_=hu(n),$+=_*_),$<s&&($=Math.sqrt(s*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=w*A,t.vy+=_*A);while(y=y.next)}return c.initialize=function(y,v){e=y,n=v,d()},c.strength=function(y){return arguments.length?(r=typeof y=="function"?y:pi(+y),d(),c):r},c.distanceMin=function(y){return arguments.length?(s=y*y,c):Math.sqrt(s)},c.distanceMax=function(y){return arguments.length?(o=y*y,c):Math.sqrt(o)},c.theta=function(y){return arguments.length?(l=y*y,c):Math.sqrt(l)},c}function fge(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(o){for(var l=0,c=n.length,d;l<c;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:pi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:pi(+o),s(),a):e},a}function dge(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(o){for(var l=0,c=n.length,d;l<c;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:pi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:pi(+o),s(),a):e},a}const A8={center:$he,collide:Ghe,nbody:cge,link:Xhe,x:fge,y:dge},jp="forces",Z$=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],hge=["static","iterations"],Tq=["x","y","vx","vy"];function oD(e){J.call(this,null,e)}oD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Tq}]};Ahe(oD,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Z$),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&Dq(n,e,0,t)):(this.value=n=pge(t.source,e),n.on("tick",gge(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(hge)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,c=o.length,d;l<c;++l)if(d=o[l],!(d.name!==jp||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Tq)}});function gge(e,t){return()=>e.touch(t).run()}function pge(e,t){const n=lge(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),Dq(n,t,!0).on("end",()=>a=!0)}function Dq(e,t,n,i){var r=Ehe(t.forces),a,s,o,l;for(a=0,s=Z$.length;a<s;++a)o=Z$[a],o!==jp&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=jp+a,o=n||t.modified(jp,a)?yge(r[a]):i&&mge(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(jp+a,null);return e.numForces=r.length,e}function mge(e,t){var n,i;for(n in e)if(iD(i=e[n])&&t.modified(phe(i)))return 1;return 0}function yge(e){var t,n;_he(A8,e.force)||fv("Unrecognized force: "+e.force),t=A8[e.force]();for(n in e)iD(t[n])&&vge(t[n],e[n],e);return t}function vge(e,t,n){e(iD(t)?i=>t(i,n):t)}const bge=Object.freeze(Object.defineProperty({__proto__:null,force:oD},Symbol.toStringTag,{value:"Module"}));function Ah(e,t,n){return e.fields=t||[],e.fname=n,e}function xge(e){return e.length===1?Sge(e[0]):Ege(e)}const Sge=e=>function(t){return t[e]},Ege=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Ga(e){throw Error(e)}function wge(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Ga("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Ga("Access path missing closing bracket: "+e),i&&Ga("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function _ge(e,t,n){const i=wge(e);return e=i.length===1?i[0]:e,Ah(xge(i),[e],e)}_ge("id");Ah(e=>e,[],"identity");Ah(()=>0,[],"zero");const Age=Ah(()=>1,[],"one"),$ge=Ah(()=>!0,[],"true");Ah(()=>!1,[],"false");var Mge=Array.isArray;function Cge(e){return e!=null?Mge(e)?e:[e]:[]}function Tge(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function kq(e,t){return Object.hasOwn(e,t)}function Xu(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Tge(i,n)}function Dge(e,t){return e.parent===t.parent?1:2}function kge(e){return e.reduce(Oge,0)/e.length}function Oge(e,t){return e+t.x}function Nge(e){return 1+e.reduce(Rge,0)}function Rge(e,t){return Math.max(e,t.y)}function zge(e){for(var t;t=e.children;)e=t[0];return e}function Fge(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Lge(){var e=Dge,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=kge(y),p.y=Nge(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=zge(a),c=Fge(a),d=l.x-e(l,c)/2,h=c.x+e(c,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Uge(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Bge(){return this.eachAfter(Uge)}function jge(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Pge(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Ige(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function qge(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Hge(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Gge(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Yge(e){for(var t=this,n=Xge(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Xge(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Vge(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Wge(){return Array.from(this)}function Qge(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Zge(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Kge(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function uD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tpe)):t===void 0&&(t=epe);for(var n=new jd(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new jd(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(Oq)}function Jge(){return uD(this).eachBefore(npe)}function epe(e){return e.children}function tpe(e){return Array.isArray(e)?e[1]:null}function npe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Oq(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jd(e){this.data=e,this.depth=this.height=0,this.parent=null}jd.prototype=uD.prototype={constructor:jd,count:Bge,each:jge,eachAfter:Ige,eachBefore:Pge,find:qge,sum:Hge,sort:Gge,path:Yge,ancestors:Vge,descendants:Wge,leaves:Qge,links:Zge,copy:Jge,[Symbol.iterator]:Kge};function hv(e){return e==null?null:Nq(e)}function Nq(e){if(typeof e!="function")throw new Error;return e}function Il(){return 0}function Jf(e){return function(){return e}}const ipe=1664525,rpe=1013904223,$8=4294967296;function ape(){let e=1;return()=>(e=(ipe*e+rpe)%$8)/$8}function spe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ope(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function upe(e,t){for(var n=0,i=(e=ope(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&Rq(s,a)?++n:(s=cpe(r=lpe(r,a)),n=0);return s}function lpe(e,t){var n,i;if(D_(t,e))return[t];for(n=0;n<e.length;++n)if(Ay(t,e[n])&&D_(Pp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Ay(Pp(e[n],e[i]),t)&&Ay(Pp(e[n],t),e[i])&&Ay(Pp(e[i],t),e[n])&&D_(zq(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Ay(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function Rq(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function D_(e,t){for(var n=0;n<t.length;++n)if(!Rq(e,t[n]))return!1;return!0}function cpe(e){switch(e.length){case 1:return fpe(e[0]);case 2:return Pp(e[0],e[1]);case 3:return zq(e[0],e[1],e[2])}}function fpe(e){return{x:e.x,y:e.y,r:e.r}}function Pp(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,c=s-i,d=o-r,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*d)/2,y:(i+s+c/h*d)/2,r:(h+r+o)/2}}function zq(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,c=n.x,d=n.y,h=n.r,p=i-s,y=i-c,v=r-o,b=r-d,S=l-a,w=h-a,_=i*i+r*r-a*a,A=_-s*s-o*o+l*l,$=_-c*c-d*d+h*h,M=y*v-p*b,D=(v*$-b*A)/(M*2)-i,T=(b*S-v*w)/M,O=(y*A-p*$)/(M*2)-r,z=(p*w-y*S)/M,P=T*T+z*z-1,B=2*(a+D*T+O*z),Y=D*D+O*O-a*a,R=-(Math.abs(P)>1e-6?(B+Math.sqrt(B*B-4*P*Y))/(2*P):Y/B);return{x:i+D+T*R,y:r+O+z*R,r:R}}function M8(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,c=i*i+s*s;c?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(c+l-a)/(2*c),o=Math.sqrt(Math.max(0,l/c-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(c+a-l)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function C8(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function T8(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function $y(e){this._=e,this.next=null,this.previous=null}function dpe(e,t){if(!(a=(e=spe(e)).length))return 0;var n,i,r,a,s,o,l,c,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;M8(i,n,r=e[2]),n=new $y(n),i=new $y(i),r=new $y(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){M8(n._,i._,r=e[l]),r=new $y(r),c=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(C8(c._,r._)){i=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(C8(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(c!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=T8(n);(r=r.next)!==i;)(o=T8(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=upe(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function hpe(e){return Math.sqrt(e.value)}function gpe(){var e=null,t=1,n=1,i=Il;function r(a){const s=ape();return a.x=t/2,a.y=n/2,e?a.eachBefore(D8(e)).eachAfter(k_(i,.5,s)).eachBefore(k8(1)):a.eachBefore(D8(hpe)).eachAfter(k_(Il,1,s)).eachAfter(k_(i,a.r/Math.min(t,n),s)).eachBefore(k8(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=hv(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Jf(+a),r):i},r}function D8(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function k_(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=dpe(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function k8(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Fq(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ym(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,c=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*c}function ppe(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(Fq),s}function a(s,o){return function(l){l.children&&ym(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var c=l.x0,d=l.y0,h=l.x1-n,p=l.y1-n;h<c&&(c=h=(c+h)/2),p<d&&(d=p=(d+p)/2),l.x0=c,l.y0=d,l.x1=h,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var mpe={depth:-1},O8={},O_={};function ype(e){return e.id}function vpe(e){return e.parentId}function N8(){var e=ype,t=vpe,n;function i(r){var a=Array.from(r),s=e,o=t,l,c,d,h,p,y,v,b,S=new Map;if(n!=null){const w=a.map(($,M)=>bpe(n($,M,r))),_=w.map(R8),A=new Set(w).add("");for(const $ of _)A.has($)||(A.add($),w.push($),_.push(R8($)),a.push(O_));s=($,M)=>w[M],o=($,M)=>_[M]}for(d=0,l=a.length;d<l;++d)c=a[d],y=a[d]=new jd(c),(v=s(c,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?O8:y)),(v=o(c,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===O8)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===O_&&h.children.length===1;)h=h.children[0],--l;for(let w=a.length-1;w>=0&&(y=a[w],y.data===O_);--w)y.data=null}if(h.parent=mpe,h.eachBefore(function(w){w.depth=w.parent.depth+1,--l}).eachBefore(Oq),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=hv(r),i):e},i.parentId=function(r){return arguments.length?(t=hv(r),i):t},i.path=function(r){return arguments.length?(n=hv(r),i):n},i}function bpe(e){e=`${e}`;let t=e.length;return K$(e,t-1)&&!K$(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function R8(e){let t=e.length;if(t<2)return"";for(;--t>1&&!K$(e,t););return e.slice(0,t)}function K$(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function xpe(e,t){return e.parent===t.parent?1:2}function N_(e){var t=e.children;return t?t[0]:e.t}function R_(e){var t=e.children;return t?t[t.length-1]:e.t}function Spe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Epe(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function wpe(e,t,n){return e.a.parent===t.parent?e.a:n}function gv(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}gv.prototype=Object.create(jd.prototype);function _pe(e){for(var t=new gv(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new gv(a[s],s)),r.parent=n;return(t.parent=new gv(null,0)).children=[t],t}function Ape(){var e=xpe,t=1,n=1,i=null;function r(c){var d=_pe(c);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)c.eachBefore(l);else{var h=c,p=c,y=c;c.eachBefore(function(_){_.x<h.x&&(h=_),_.x>p.x&&(p=_),_.depth>y.depth&&(y=_)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),w=n/(y.depth||1);c.eachBefore(function(_){_.x=(_.x+b)*S,_.y=_.depth*w})}return c}function a(c){var d=c.children,h=c.parent.children,p=c.i?h[c.i-1]:null;if(d){Epe(c);var y=(d[0].z+d[d.length-1].z)/2;p?(c.z=p.z+e(c._,p._),c.m=c.z-y):c.z=y}else p&&(c.z=p.z+e(c._,p._));c.parent.A=o(c,p,c.parent.A||h[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,d,h){if(d){for(var p=c,y=c,v=d,b=p.parent.children[0],S=p.m,w=y.m,_=v.m,A=b.m,$;v=R_(v),p=N_(p),v&&p;)b=N_(b),y=R_(y),y.a=c,$=v.z+_-p.z-S+e(v._,p._),$>0&&(Spe(wpe(v,c,h),c,$),S+=$,w+=$),_+=v.m,S+=p.m,A+=b.m,w+=y.m;v&&!R_(y)&&(y.t=v,y.m+=_-w),p&&!N_(b)&&(b.t=p,b.m+=S-A,h=c)}return h}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}function m2(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,c=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*c}var Lq=(1+Math.sqrt(5))/2;function Uq(e,t,n,i,r,a){for(var s=[],o=t.children,l,c,d=0,h=0,p=o.length,y,v,b=t.value,S,w,_,A,$,M,D;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(w=_=S,M=Math.max(v/y,y/v)/(b*e),D=S*S*M,$=Math.max(_/D,D/w);h<p;++h){if(S+=c=o[h].value,c<w&&(w=c),c>_&&(_=c),D=S*S*M,A=Math.max(_/D,D/w),A>$){S-=c;break}$=A}s.push(l={value:S,dice:y<v,children:o.slice(d,h)}),l.dice?ym(l,n,i,r,b?i+=v*S/b:a):m2(l,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const Bq=function e(t){function n(i,r,a,s,o){Uq(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Lq);function $pe(){var e=Bq,t=!1,n=1,i=1,r=[0],a=Il,s=Il,o=Il,l=Il,c=Il;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(Fq),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,w=p.y1-y;S<v&&(v=S=(v+S)/2),w<b&&(b=w=(b+w)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=w,p.children&&(y=r[p.depth+1]=a(p)/2,v+=c(p)-y,b+=s(p)-y,S-=o(p)-y,w-=l(p)-y,S<v&&(v=S=(v+S)/2),w<b&&(b=w=(b+w)/2),e(p,v,b,S,w))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=Nq(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Jf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Jf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Jf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Jf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:Jf(+p),d):c},d}function Mpe(e,t,n,i,r){var a=e.children,s,o=a.length,l,c=new Array(o+1);for(c[0]=l=s=0;s<o;++s)c[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,w){if(h>=p-1){var _=a[h];_.x0=v,_.y0=b,_.x1=S,_.y1=w;return}for(var A=c[h],$=y/2+A,M=h+1,D=p-1;M<D;){var T=M+D>>>1;c[T]<$?M=T+1:D=T}$-c[M-1]<c[M]-$&&h+1<M&&--M;var O=c[M]-A,z=y-O;if(S-v>w-b){var P=y?(v*z+S*O)/y:S;d(h,M,O,v,b,P,w),d(M,p,z,P,b,S,w)}else{var B=y?(b*z+w*O)/y:w;d(h,M,O,v,b,S,B),d(M,p,z,v,B,S,w)}}}function Cpe(e,t,n,i,r){(e.depth&1?m2:ym)(e,t,n,i,r)}const Tpe=function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,c,d,h,p=-1,y,v=l.length,b=i.value;++p<v;){for(c=l[p],d=c.children,h=c.value=0,y=d.length;h<y;++h)c.value+=d[h].value;c.dice?ym(c,r,a,s,b?a+=(o-a)*c.value/b:o):m2(c,r,a,b?r+=(s-r)*c.value/b:s,o),b-=c.value}else i._squarify=l=Uq(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Lq);function J$(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function lD(e){J.call(this,null,e)}lD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Dpe=e=>e.values;Xu(lD,J,{transform(e,t){t.source||Ga("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Tx(s.data)&&r.rem.push(s.data)}),this.value=a=uD({values:Cge(e.keys).reduce((s,o)=>(s.key(o),s),kpe()).entries(r.source)},Dpe),n&&a.each(s=>{s.children&&(s=st(s.data),r.add.push(s),r.source.push(s))}),J$(a,we,we)),r.source.root=a,r}});function kpe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},c={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=l[h])?y.push(p):l[h]=[p];for(h in l)c[h]=n(l[h],a);return c}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function Eo(e){J.call(this,null,e)}const Ope=(e,t)=>e.parent===t.parent?1:2;Xu(Eo,J,{transform(e,t){(!t.source||!t.source.root)&&Ga(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(zc(e.sort,s=>s.data)),Npe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Ope:Age);try{this.value=n(r)}catch(s){Ga(s)}return r.each(s=>Rpe(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function Npe(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Rpe(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const eM=["x","y","r","depth","children"];function cD(e){Eo.call(this,e)}cD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eM.length,default:eM}]};Xu(cD,Eo,{layout:gpe,params:["radius","size","padding"],fields:eM});const tM=["x0","y0","x1","y1","depth","children"];function fD(e){Eo.call(this,e)}fD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tM.length,default:tM}]};Xu(fD,Eo,{layout:ppe,params:["size","round","padding"],fields:tM});function dD(e){J.call(this,null,e)}dD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Xu(dD,J,{transform(e,t){t.source||Ga("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?J$(N8().id(e.key).parentId(e.parentKey)(r.source),e.key,$ge):J$(N8()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const z8={tidy:Ape,cluster:Lge},nM=["x","y","depth","children"];function hD(e){Eo.call(this,e)}hD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:nM.length,default:nM}]};Xu(hD,Eo,{layout(e){const t=e||"tidy";if(kq(z8,t))return z8[t]();Ga("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:nM});function gD(e){J.call(this,[],e)}gD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Xu(gD,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||Ga("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[we(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[we(o)]&&a[we(l)]&&r.add.push(st({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[we(s)]=1),n.forEach(s=>{(a[we(s.source)]||a[we(s.target)])&&r.mod.push(s)})),r}});const F8={binary:Mpe,dice:ym,slice:m2,slicedice:Cpe,squarify:Bq,resquarify:Tpe},iM=["x0","y0","x1","y1","depth","children"];function pD(e){Eo.call(this,e)}pD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:iM.length,default:iM}]};Xu(pD,Eo,{layout(){const e=$pe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{kq(F8,t)?e.tile(F8[t]):Ga("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:iM});const zpe=Object.freeze(Object.defineProperty({__proto__:null,nest:lD,pack:cD,partition:fD,stratify:dD,tree:hD,treelinks:gD,treemap:pD},Symbol.toStringTag,{value:"Module"}));function $h(e,t,n){return e.fields=t||[],e.fname=n,e}function Fpe(e){return e.length===1?Lpe(e[0]):Upe(e)}const Lpe=e=>function(t){return t[e]},Upe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function pv(e){throw Error(e)}function Bpe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||pv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&pv("Access path missing closing bracket: "+e),i&&pv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function jpe(e,t,n){const i=Bpe(e);return e=i.length===1?i[0]:e,$h(Fpe(i),[e],e)}jpe("id");$h(e=>e,[],"identity");$h(()=>0,[],"zero");$h(()=>1,[],"one");$h(()=>!0,[],"true");$h(()=>!1,[],"false");var Ppe=Array.isArray;function L8(e){return e!=null?Ppe(e)?e:[e]:[]}function Ipe(e){return typeof e=="function"}function qpe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Hpe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),qpe(i,n)}const z_=4278190080;function Gpe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Ype(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=bu(a,s).getContext("2d"),c=bu(a,s).getContext("2d"),d=o&&bu(a,s).getContext("2d");n.forEach(O=>mv(l,O,!1)),mv(c,t,!1),o&&mv(d,t,!0);const h=F_(l,a,s),p=F_(c,a,s),y=o&&F_(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,w,_,A,$,M,D,T;for(w=0;w<s;++w)for(S=0;S<a;++S)$=w*a+S,M=h[$]&z_,T=p[$]&z_,D=o&&y[$]&z_,(M||D||T)&&(_=e(S),A=e(w),!r&&(M||T)&&v.set(_,A),o&&(M||D)&&b.set(_,A));return[v,b]}function F_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function mv(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>mv(e,a.items,n))}):dr[i].draw(e,{items:n?t.map(Xpe):t})}function Xpe(e){const t=Dx(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Fs=5,si=31,k0=32,au=new Uint32Array(k0+1),Zr=new Uint32Array(k0+1);Zr[0]=0;au[0]=~Zr[0];for(let e=1;e<=k0;++e)Zr[e]=Zr[e-1]<<1|1,au[e]=~Zr[e];function Vpe(e,t){const n=new Uint32Array(~~((e*t+k0)/k0));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Fs]&1<<(o&si)},set:(a,s)=>{const o=s*e+a;i(o>>>Fs,1<<(o&si))},clear:(a,s)=>{const o=s*e+a;r(o>>>Fs,~(1<<(o&si)))},getRange:(a,s,o,l)=>{let c=l,d,h,p,y;for(;c>=s;--c)if(d=c*e+a,h=c*e+o,p=d>>>Fs,y=h>>>Fs,p===y){if(n[p]&au[d&si]&Zr[(h&si)+1])return!0}else{if(n[p]&au[d&si]||n[y]&Zr[(h&si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let c,d,h,p,y;for(;s<=l;++s)if(c=s*e+a,d=s*e+o,h=c>>>Fs,p=d>>>Fs,h===p)i(h,au[c&si]&Zr[(d&si)+1]);else for(i(h,au[c&si]),i(p,Zr[(d&si)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let c,d,h,p,y;for(;s<=l;++s)if(c=s*e+a,d=s*e+o,h=c>>>Fs,p=d>>>Fs,h===p)r(h,Zr[c&si]|au[(d&si)+1]);else for(r(h,Zr[c&si]),r(p,au[(d&si)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Wpe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>Vpe(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Qpe(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,c=s.datum.fontSize,d=sr.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,w,_;for(let A=0;A<l;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,w=(v+b)/2,_=Math.abs(y-p+b-v),_>=h&&(h=_,s.x=S,s.y=w);return S=d/2,w=c/2,p=s.x-S,y=s.x+S,v=s.y-w,b=s.y+w,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function Ub(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function gu(e,t,n,i,r,a,s,o){const l=r*a/(i*2),c=e(t-l),d=e(t+l),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(c,h,d,p)||s.getRange(c,h,d,p)||o&&o.getRange(c,h,d,p)}function Zpe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(c,d,h,p,y){const v=e.invert(c),b=e.invert(d);let S=h,w=a,_;if(!Ub(v,b,p,y,r,a)&&!gu(e,v,b,y,p,S,s,o)&&!gu(e,v,b,y,p,y,s,null)){for(;w-S>=1;)_=(S+w)/2,gu(e,v,b,y,p,_,s,o)?w=_:S=_;if(S>h)return[v,b,S,!0]}}return function(c){const d=c.datum.datum.items[i].items,h=d.length,p=c.datum.fontSize,y=sr.width(c.datum,c.datum.text);let v=n?p:0,b=!1,S=!1,w=0,_,A,$,M,D,T,O,z,P,B,Y,R,U,F,N,I,H;for(let K=0;K<h;++K){for(_=d[K].x,$=d[K].y,A=d[K].x2===void 0?_:d[K].x2,M=d[K].y2===void 0?$:d[K].y2,_>A&&(H=_,_=A,A=H),$>M&&(H=$,$=M,M=H),P=e(_),Y=e(A),B=~~((P+Y)/2),R=e($),F=e(M),U=~~((R+F)/2),O=B;O>=P;--O)for(z=U;z>=R;--z)I=l(O,z,v,y,p),I&&([c.x,c.y,v,b]=I);for(O=B;O<=Y;++O)for(z=U;z<=F;++z)I=l(O,z,v,y,p),I&&([c.x,c.y,v,b]=I);!b&&!n&&(N=Math.abs(A-_+M-$),D=(_+A)/2,T=($+M)/2,N>=w&&!Ub(D,T,y,p,r,a)&&!gu(e,D,T,p,y,p,s,null)&&(w=N,c.x=D,c.y=T,S=!0))}return b||S?(D=y/2,T=p/2,s.setRange(e(c.x-D),e(c.y-T),e(c.x+D),e(c.y+T)),c.align="center",c.baseline="middle",!0):!1}}const Kpe=[-1,-1,1,1],Jpe=[-1,1,-1,1];function e0e(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(c){const d=c.datum.datum.items[i].items,h=d.length,p=c.datum.fontSize,y=sr.width(c.datum,c.datum.text),v=[];let b=n?p:0,S=!1,w=!1,_=0,A,$,M,D,T,O,z,P,B,Y,R,U;for(let F=0;F<h;++F){for(A=d[F].x,M=d[F].y,$=d[F].x2===void 0?A:d[F].x2,D=d[F].y2===void 0?M:d[F].y2,v.push([e((A+$)/2),e((M+D)/2)]);v.length;)if([z,P]=v.pop(),!(s.get(z,P)||o.get(z,P)||l.get(z,P))){l.set(z,P);for(let N=0;N<4;++N)T=z+Kpe[N],O=P+Jpe[N],l.outOfBounds(T,O,T,O)||v.push([T,O]);if(T=e.invert(z),O=e.invert(P),B=b,Y=a,!Ub(T,O,y,p,r,a)&&!gu(e,T,O,p,y,B,s,o)&&!gu(e,T,O,p,y,p,s,null)){for(;Y-B>=1;)R=(B+Y)/2,gu(e,T,O,p,y,R,s,o)?Y=R:B=R;B>b&&(c.x=T,c.y=O,b=B,S=!0)}}!S&&!n&&(U=Math.abs($-A+D-M),T=(A+$)/2,O=(M+D)/2,U>=_&&!Ub(T,O,y,p,r,a)&&!gu(e,T,O,p,y,p,s,null)&&(_=U,c.x=T,c.y=O,w=!0))}return S||w?(T=y/2,O=p/2,s.setRange(e(c.x-T),e(c.y-O),e(c.x+T),e(c.y+O)),c.align="center",c.baseline="middle",!0):!1}}const t0e=["right","center","left"],n0e=["bottom","middle","top"];function i0e(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(c){const d=c.boundary,h=c.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=c.textWidth??0,y,v,b,S,w,_,A,$,M,D,T,O,z,P,B;for(let Y=0;Y<l;++Y){if(y=(n[Y]&3)-1,v=(n[Y]>>>2&3)-1,b=y===0&&v===0||i[Y]<0,S=y&&v?Math.SQRT1_2:1,w=i[Y]<0?-1:1,_=d[1+y]+i[Y]*y*S,T=d[4+v]+w*h*v/2+i[Y]*v*S,$=T-h/2,M=T+h/2,O=e(_),P=e($),B=e(M),!p)if(U8(O,O,P,B,s,o,_,_,$,M,d,b))p=sr.width(c.datum,c.datum.text);else continue;if(D=_+w*p*y/2,_=D-p/2,A=D+p/2,O=e(_),z=e(A),U8(O,z,P,B,s,o,_,A,$,M,d,b))return c.x=y?y*w<0?A:_:D,c.y=v?v*w<0?M:$:T,c.align=t0e[y*w+1],c.baseline=n0e[v*w+1],s.setRange(O,P,z,B),!0}return!1}}function U8(e,t,n,i,r,a,s,o,l,c,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const L_=0,U_=4,B_=8,j_=0,P_=1,I_=2,r0e={"top-left":L_+j_,top:L_+P_,"top-right":L_+I_,left:U_+j_,middle:U_+P_,right:U_+I_,"bottom-left":B_+j_,bottom:B_+P_,"bottom-right":B_+I_},a0e={naive:Qpe,"reduced-search":Zpe,floodfill:e0e};function s0e(e,t,n,i,r,a,s,o,l,c,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=o0e(i,h),y=u0e(r,h),v=l0e(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,S=b==="area",w=c0e(v,b,o,l),_=c===null||c===1/0,A=S&&d==="naive";let $=-1,M=-1;const D=e.map(P=>{const B=_?sr.width(P,P.text):void 0;return $=Math.max($,B),M=Math.max(M,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:w(P),textWidth:B}});c=c===null||c===1/0?Math.max($,M)+Math.max(...i):c;const T=Wpe(t[0],t[1],c);let O;if(!A){n&&D.sort((Y,R)=>n(Y.datum,R.datum));let P=!1;for(let Y=0;Y<y.length&&!P;++Y)P=y[Y]===5||p[Y]<0;const B=(v&&s||S)&&e.map(Y=>Y.datum);O=a.length||B?Ype(T,B||[],a,P,S):Gpe(T,s&&D)}const z=S?a0e[d](T,O,s,l):i0e(T,O,y,p);return D.forEach(P=>P.opacity=+z(P)),D}function o0e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function u0e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=r0e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function l0e(e){return e&&e.mark&&e.mark.marktype}function c0e(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const rM=["x","y","opacity","align","baseline"],jq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mD(e){J.call(this,null,e)}mD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:jq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:rM.length,default:rM}]};Hpe(mD,J,{transform(e,t){function n(a){const s=e[a];return Ipe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&pv("Size parameter should be specified as a [width, height] array.");const r=e.as||rM;return s0e(t.materialize(t.SOURCE).source||[],e.size,e.sort,L8(e.offset==null?1:e.offset),L8(e.anchor||jq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const f0e=Object.freeze(Object.defineProperty({__proto__:null,label:mD},Symbol.toStringTag,{value:"Module"}));function Mh(e,t,n){return e.fields=t||[],e.fname=n,e}function gd(e){return e==null?null:e.fname}function d0e(e){return e.length===1?h0e(e[0]):g0e(e)}const h0e=e=>function(t){return t[e]},g0e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function yv(e){throw Error(e)}function p0e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||yv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&yv("Access path missing closing bracket: "+e),i&&yv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function m0e(e,t,n){const i=p0e(e);return e=i.length===1?i[0]:e,Mh(d0e(i),[e],e)}m0e("id");Mh(e=>e,[],"identity");Mh(()=>0,[],"zero");Mh(()=>1,[],"one");Mh(()=>!0,[],"true");Mh(()=>!1,[],"false");function y0e(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function v0e(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function b0e(e,t){return Object.hasOwn(e,t)}function Pq(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),y0e(i,n)}function Iq(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,c;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),c=r[l],c||(r[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function yD(e){J.call(this,null,e)}yD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Pq(yD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Iq(i,e.groupby),a=(e.groupby||[]).map(gd),s=a.length,o=e.as||[gd(e.x),gd(e.y)],l=[];r.forEach(c=>{LU(c,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=c.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],l.push(st(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const aM={constant:XC,linear:VC,log:NU,exp:RU,pow:zU,quad:WC,poly:FU},x0e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function vD(e){J.call(this,null,e)}vD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(aM)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Pq(vD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Iq(i,e.groupby),a=(e.groupby||[]).map(gd),s=e.method||"linear",o=e.order==null?3:e.order,l=x0e(s,o),c=e.as||[gd(e.x),gd(e.y)],d=aM[s],h=[];let p=e.extent;b0e(aM,s)||yv("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(st({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||v0e(y,e.x),w=_=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[c[0]]=_[0],A[c[1]]=_[1],h.push(st(A))};s==="linear"||s==="constant"?S.forEach(_=>w([_,b.predict(_)])):Lx(b.predict,S,25,200).forEach(w)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const S0e=Object.freeze(Object.defineProperty({__proto__:null,loess:yD,regression:vD},Symbol.toStringTag,{value:"Module"}));function Ch(e,t,n){return e.fields=t||[],e.fname=n,e}function E0e(e){return e.length===1?w0e(e[0]):_0e(e)}const w0e=e=>function(t){return t[e]},_0e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function q_(e){throw Error(e)}function A0e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||q_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&q_("Access path missing closing bracket: "+e),i&&q_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function $0e(e,t,n){const i=A0e(e);return e=i.length===1?i[0]:e,Ch(E0e(i),[e],e)}$0e("id");Ch(e=>e,[],"identity");Ch(()=>0,[],"zero");Ch(()=>1,[],"one");Ch(()=>!0,[],"true");Ch(()=>!1,[],"false");function M0e(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function C0e(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),M0e(i,n)}const io=11102230246251565e-32,Vn=134217729,T0e=(3+8*io)*io;function H_(e,t,n,i,r){let a,s,o,l,c=t[0],d=i[0],h=0,p=0;d>c==d>-c?(a=c,c=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>c==d>-c?(s=c+a,o=a-(s-c),c=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>c==d>-c?(s=a+c,l=s-a,o=a-(s-l)+(c-l),c=t[++h]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+c,l=s-a,o=a-(s-l)+(c-l),c=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function D0e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function vm(e){return new Float64Array(e)}const k0e=(3+16*io)*io,O0e=(2+12*io)*io,N0e=(9+64*io)*io*io,Gf=vm(4),B8=vm(8),j8=vm(12),P8=vm(16),oi=vm(4);function R0e(e,t,n,i,r,a,s){let o,l,c,d,h,p,y,v,b,S,w,_,A,$,M,D,T,O;const z=e-r,P=n-r,B=t-a,Y=i-a;$=z*Y,p=Vn*z,y=p-(p-z),v=z-y,p=Vn*Y,b=p-(p-Y),S=Y-b,M=v*S-($-y*b-v*b-y*S),D=B*P,p=Vn*B,y=p-(p-B),v=B-y,p=Vn*P,b=p-(p-P),S=P-b,T=v*S-(D-y*b-v*b-y*S),w=M-T,h=M-w,Gf[0]=M-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,Gf[1]=A-(w+h)+(h-D),O=_+w,h=O-_,Gf[2]=_-(O-h)+(w-h),Gf[3]=O;let R=D0e(4,Gf),U=O0e*s;if(R>=U||-R>=U||(h=e-z,o=e-(z+h)+(h-r),h=n-P,c=n-(P+h)+(h-r),h=t-B,l=t-(B+h)+(h-a),h=i-Y,d=i-(Y+h)+(h-a),o===0&&l===0&&c===0&&d===0)||(U=N0e*s+T0e*Math.abs(R),R+=z*d+Y*o-(B*c+P*l),R>=U||-R>=U))return R;$=o*Y,p=Vn*o,y=p-(p-o),v=o-y,p=Vn*Y,b=p-(p-Y),S=Y-b,M=v*S-($-y*b-v*b-y*S),D=l*P,p=Vn*l,y=p-(p-l),v=l-y,p=Vn*P,b=p-(p-P),S=P-b,T=v*S-(D-y*b-v*b-y*S),w=M-T,h=M-w,oi[0]=M-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const F=H_(4,Gf,4,oi,B8);$=z*d,p=Vn*z,y=p-(p-z),v=z-y,p=Vn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),D=B*c,p=Vn*B,y=p-(p-B),v=B-y,p=Vn*c,b=p-(p-c),S=c-b,T=v*S-(D-y*b-v*b-y*S),w=M-T,h=M-w,oi[0]=M-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const N=H_(F,B8,4,oi,j8);$=o*d,p=Vn*o,y=p-(p-o),v=o-y,p=Vn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),D=l*c,p=Vn*l,y=p-(p-l),v=l-y,p=Vn*c,b=p-(p-c),S=c-b,T=v*S-(D-y*b-v*b-y*S),w=M-T,h=M-w,oi[0]=M-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const I=H_(N,j8,4,oi,P8);return P8[I-1]}function My(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,c=Math.abs(s+o);return Math.abs(l)>=k0e*c?l:-R0e(e,t,n,i,r,a,c)}const I8=Math.pow(2,-52),Cy=new Uint32Array(512);class Bb{static from(t,n=B0e,i=j0e){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new Bb(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,c=-1/0,d=-1/0;for(let z=0;z<s;z++){const P=t[2*z],B=t[2*z+1];P<o&&(o=P),B<l&&(l=B),P>c&&(c=P),B>d&&(d=B),this._ids[z]=z}const h=(o+c)/2,p=(l+d)/2;let y,v,b;for(let z=0,P=1/0;z<s;z++){const B=G_(h,p,t[2*z],t[2*z+1]);B<P&&(y=z,P=B)}const S=t[2*y],w=t[2*y+1];for(let z=0,P=1/0;z<s;z++){if(z===y)continue;const B=G_(S,w,t[2*z],t[2*z+1]);B<P&&B>0&&(v=z,P=B)}let _=t[2*v],A=t[2*v+1],$=1/0;for(let z=0;z<s;z++){if(z===y||z===v)continue;const P=L0e(S,w,_,A,t[2*z],t[2*z+1]);P<$&&(b=z,$=P)}let M=t[2*b],D=t[2*b+1];if($===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];sd(this._ids,this._dists,0,s-1);const z=new Uint32Array(s);let P=0;for(let B=0,Y=-1/0;B<s;B++){const R=this._ids[B],U=this._dists[R];U>Y&&(z[P++]=R,Y=U)}this.hull=z.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(My(S,w,_,A,M,D)<0){const z=v,P=_,B=A;v=b,_=M,A=D,b=z,M=P,D=B}const T=U0e(S,w,_,A,M,D);this._cx=T.x,this._cy=T.y;for(let z=0;z<s;z++)this._dists[z]=G_(t[2*z],t[2*z+1],T.x,T.y);sd(this._ids,this._dists,0,s-1),this._hullStart=y;let O=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,w)]=y,a[this._hashKey(_,A)]=v,a[this._hashKey(M,D)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let z=0,P,B;z<this._ids.length;z++){const Y=this._ids[z],R=t[2*Y],U=t[2*Y+1];if(z>0&&Math.abs(R-P)<=I8&&Math.abs(U-B)<=I8||(P=R,B=U,Y===y||Y===v||Y===b))continue;let F=0;for(let L=0,V=this._hashKey(R,U);L<this._hashSize&&(F=a[(V+L)%this._hashSize],!(F!==-1&&F!==i[F]));L++);F=n[F];let N=F,I;for(;I=i[N],My(R,U,t[2*N],t[2*N+1],t[2*I],t[2*I+1])>=0;)if(N=I,N===F){N=-1;break}if(N===-1)continue;let H=this._addTriangle(N,Y,i[N],-1,-1,r[N]);r[Y]=this._legalize(H+2),r[N]=H,O++;let K=i[N];for(;I=i[K],My(R,U,t[2*K],t[2*K+1],t[2*I],t[2*I+1])<0;)H=this._addTriangle(K,Y,I,r[Y],-1,r[K]),r[Y]=this._legalize(H+2),i[K]=K,O--,K=I;if(N===F)for(;I=n[N],My(R,U,t[2*I],t[2*I+1],t[2*N],t[2*N+1])<0;)H=this._addTriangle(I,Y,N,-1,r[N],r[I]),this._legalize(H+2),r[I]=H,i[N]=N,O--,N=I;this._hullStart=n[Y]=N,i[N]=n[K]=Y,i[Y]=K,a[this._hashKey(R,U)]=Y,a[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(O);for(let z=0,P=this._hullStart;z<O;z++)this.hull[z]=P,P=i[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(z0e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=Cy[--a];continue}const c=o-o%3,d=l+(t+1)%3,h=c+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(F0e(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const w=i[h];if(w===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,w),this._link(o,i[s]),this._link(s,h);const _=c+(o+1)%3;a<Cy.length&&(Cy[a++]=_)}else{if(a===0)break;t=Cy[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function z0e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function G_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function F0e(e,t,n,i,r,a,s,o){const l=e-s,c=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=l*l+c*c,b=d*d+h*h,S=p*p+y*y;return l*(h*S-b*y)-c*(d*S-b*p)+v*(d*y-h*p)<0}function L0e(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,c=a-t,d=s*s+o*o,h=l*l+c*c,p=.5/(s*c-o*l),y=(c*d-o*h)*p,v=(s*h-l*d)*p;return y*y+v*v}function U0e(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,c=a-t,d=s*s+o*o,h=l*l+c*c,p=.5/(s*c-o*l),y=e+(c*d-o*h)*p,v=t+(s*h-l*d)*p;return{x:y,y:v}}function sd(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;cp(e,r,a),t[e[n]]>t[e[i]]&&cp(e,n,i),t[e[a]]>t[e[i]]&&cp(e,a,i),t[e[n]]>t[e[a]]&&cp(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;cp(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(sd(e,t,a,i),sd(e,t,n,s-1)):(sd(e,t,n,s-1),sd(e,t,a,i))}}function cp(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function B0e(e){return e[0]}function j0e(e){return e[1]}const q8=1e-6;class Xl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>q8||Math.abs(this._y1-a)>q8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class sM{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let P0e=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,w=i.length,_,A;b<w;b+=3,S+=2){const $=i[b]*2,M=i[b+1]*2,D=i[b+2]*2,T=t[$],O=t[$+1],z=t[M],P=t[M+1],B=t[D],Y=t[D+1],R=z-T,U=P-O,F=B-T,N=Y-O,I=(R*N-U*F)*2;if(Math.abs(I)<1e-9){if(a===void 0){a=s=0;for(const K of n)a+=t[K*2],s+=t[K*2+1];a/=n.length,s/=n.length}const H=1e9*Math.sign((a-T)*N-(s-O)*F);_=(T+B)/2-H*N,A=(O+Y)/2+H*F}else{const H=1/I,K=R*R+U*U,L=F*F+N*N;_=T+(N*K-U*L)*H,A=O+(R*L-F*K)*H}o[S]=_,o[S+1]=A}let l=n[n.length-1],c,d=l*4,h,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],c=d,h=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[c+2]=r[d]=y-v,r[c+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Xl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],w=s[v],_=s[v+1];this._renderSegment(b,S,w,_,t)}let l,c=a[a.length-1];for(let d=0;d<a.length;++d){l=c,c=a[d];const h=Math.floor(r[c]/3)*2,p=s[h],y=s[h+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Xl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Xl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new sM;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const c=Math.floor(l/3);if(o.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],c,d=this._regioncode(o,l),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],c=d,d=this._regioncode(o,l),c===0&&d===0)h=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,S,w,_;if(c===0){if((v=this._clipSegment(a,s,o,l,c,d))===null)continue;[b,S,w,_]=v}else{if((v=this._clipSegment(o,l,a,s,d,c))===null)continue;[w,_,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(w,_),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(w,_):r=[w,_]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,c,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):d&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=c,a=this._regioncode(t,n)):(i=l,r=c,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let c=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);c<d;c+=2)h=p,p=this._edgecode(o[c],o[c+1]),h&&p&&(c=this._edge(t,h,p,o,c),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const I0e=2*Math.PI,Yf=Math.pow;function q0e(e){return e[0]}function H0e(e){return e[1]}function G0e(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Y0e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class bD{static from(t,n=q0e,i=H0e,r){return new bD("length"in t?X0e(t,n,i,r):Float64Array.from(V0e(t,n,i,r)))}constructor(t){this._delaunator=new Bb(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&G0e(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Y0e(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new Bb(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,c=r.length;l<c;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new P0e(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=n[t];if(l===-1)return;let c=l,d=-1;do{if(yield d=s[c],c=c%3===2?c-2:c+1,s[c]!==t)return;if(c=a[c],c===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let d=t,h=Yf(n-c[t*2],2)+Yf(i-c[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=Yf(n-c[v*2],2)+Yf(i-c[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&Yf(n-c[y*2],2)+Yf(i-c[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Xl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const c=a[s]*2,d=a[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Xl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,I0e)}return i&&i.value()}renderHull(t){const n=t==null?t=new Xl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new sM;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Xl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new sM;return this.renderTriangle(t,n),n.value()}}function X0e(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*V0e(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function xD(e){J.call(this,null,e)}xD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const W0e=[-1e5,-1e5,1e5,1e5];C0e(xD,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:W0e;const a=this.value=bD.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!Z0e(l)?Q0e(l):null}return t.reflow(e.modified()).modifies(n)}});function Q0e(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Z0e(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const K0e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:xD},Symbol.toStringTag,{value:"Module"}));function Th(e,t,n){return e.fields=t||[],e.fname=n,e}function J0e(e){return e.length===1?eme(e[0]):tme(e)}const eme=e=>function(t){return t[e]},tme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function vv(e){throw Error(e)}function nme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||vv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&vv("Access path missing closing bracket: "+e),i&&vv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function ime(e,t,n){const i=nme(e);return e=i.length===1?i[0]:e,Th(J0e(i),[e],e)}ime("id");Th(e=>e,[],"identity");Th(()=>0,[],"zero");Th(()=>1,[],"one");Th(()=>!0,[],"true");Th(()=>!1,[],"false");function oM(e){return typeof e=="function"}function rme(e){return oM(e)?e:()=>e}function ame(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function sme(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function ome(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ame(i,n)}var Y_=Math.PI/180,Ip=64,bv=2048;function ume(){var e=[256,256],t,n,i,r,a,s,o,l=qq,c=[],d=Math.random,h={};h.layout=function(){for(var v=p(bu()),b=gme((e[0]>>5)*e[1]),S=null,w=c.length,_=-1,A=[],$=c.map(D=>({text:t(D),font:n(D),style:r(D),weight:a(D),rotate:s(D),size:~~(i(D)+1e-14),padding:o(D),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:D})).sort((D,T)=>T.size-D.size);++_<w;){var M=$[_];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,lme(v,M,$,_),M.hasText&&y(b,M,S)&&(A.push(M),S?fme(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ip<<5)/b,v.height=bv/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var w=b.x,_=b.y,A=Math.hypot(e[0],e[1]),$=l(e),M=d()<.5?1:-1,D=-M,T,O,z;(T=$(D+=M))&&(O=~~T[0],z=~~T[1],!(Math.min(Math.abs(O),Math.abs(z))>=A));)if(b.x=w+O,b.y=_+z,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!cme(b,v,e[0]))&&(!S||dme(b,S))){for(var P=b.sprite,B=b.width>>5,Y=e[0]>>5,R=b.x-(B<<4),U=R&127,F=32-U,N=b.y1-b.y0,I=(b.y+b.y0)*Y+(R>>5),H,K=0;K<N;K++){H=0;for(var L=0;L<=B;L++)v[I+L]|=H<<F|(L<B?(H=P[K*B+L])>>>U:0);I+=Y}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(c=v,h):c},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=_l(v),h):n},h.fontStyle=function(v){return arguments.length?(r=_l(v),h):r},h.fontWeight=function(v){return arguments.length?(a=_l(v),h):a},h.rotate=function(v){return arguments.length?(s=_l(v),h):s},h.text=function(v){return arguments.length?(t=_l(v),h):t},h.spiral=function(v){return arguments.length?(l=pme[v]||v,h):l},h.fontSize=function(v){return arguments.length?(i=_l(v),h):i},h.padding=function(v){return arguments.length?(o=_l(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function lme(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ip<<5)/a,bv/a);var s=0,o=0,l=0,c=n.length,d,h,p,y,v;for(--i;++i<c;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*Y_),S=Math.cos(t.rotate*Y_),w=d*S,_=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(w+$),Math.abs(w-$))+31>>5<<5,p=~~Math.max(Math.abs(_+A),Math.abs(_-A))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=Ip<<5&&(s=0,o+=l,l=0),o+p>=bv)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*Y_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var M=r.getImageData(0,0,(Ip<<5)/a,bv/a).data,D=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)D[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var T=0,O=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var z=h*v+(y>>5),P=M[(o+v)*(Ip<<5)+(s+y)<<2]?1<<31-y%32:0;D[z]|=P,T|=P}T?O=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+O,t.sprite=D.slice(0,(t.y1-t.y0)*h)}}}function cme(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),d,h=0;h<l;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[c+p])return!0;c+=n}return!1}function fme(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function dme(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function qq(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hme(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function gme(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function _l(e){return typeof e=="function"?e:function(){return e}}var pme={archimedean:qq,rectangular:hme};const Hq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],mme=["text","font","rotate","fontSize","fontStyle","fontWeight"];function SD(e){J.call(this,ume(),e)}SD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Hq}]};ome(SD,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&vv("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return oM(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||mme.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||Hq;let o=e.fontSize||14,l;if(oM(o)?l=e.fontSizeRange:o=rme(o),l){const v=o,b=it("sqrt")().domain(sme(r,v)).range(l);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const c=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Rr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=c.length;for(let v=0,b,S;v<y;++v)b=c[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const yme=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:SD},Symbol.toStringTag,{value:"Module"}));function Dh(e,t,n){return e.fields=t||[],e.fname=n,e}function vme(e){return e.length===1?bme(e[0]):xme(e)}const bme=e=>function(t){return t[e]},xme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function X_(e){throw Error(e)}function Sme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||X_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&X_("Access path missing closing bracket: "+e),i&&X_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Eme(e,t,n){const i=Sme(e);return e=i.length===1?i[0]:e,Dh(vme(i),[e],e)}Eme("id");Dh(e=>e,[],"identity");Dh(()=>0,[],"zero");Dh(()=>1,[],"one");Dh(()=>!0,[],"true");Dh(()=>!1,[],"false");function wme(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Gq(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),wme(i,n)}const _me=e=>new Uint8Array(e),Ame=e=>new Uint16Array(e),n0=e=>new Uint32Array(e);function $me(){let e=8,t=[],n=n0(0),i=Ty(0,e),r=Ty(0,e);return{data:()=>t,seen:()=>n=Mme(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,c;s<l;++s)c=a[s],c._index=o++,t.push(c)},remove(a,s){const o=t.length,l=Array(o-a),c=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)l[h]=t[h],c[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?c[h]=-1:(c[h]=p,i[p]=i[h],r[p]=r[h],l[p]=d,d._index=p++),i[h]=0;return t=l,c},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=Ty(a,e,i),r=Ty(a,e))}}}function Mme(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ty(e,t,n){const i=(t<257?_me:t<65537?Ame:n0)(e);return n&&i.set(n),i}function H8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,c=o[0],d=o[1],h=l.length;let p;for(p=0;p<c;++p)a[l[p]]|=i;for(p=d;p<h;++p)a[l[p]]|=i;return s}}}function G8(){let e=n0(0),t=[],n=0;function i(o,l,c){if(!l.length)return[];const d=n,h=l.length,p=n0(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(l[S]),p[S]=S;if(y=Cme(y,p),d)v=t,b=e,t=Array(d+h),e=n0(d+h),Tme(c,v,b,d,y,p,h,t,e);else{if(c>0)for(S=0;S<h;++S)p[S]+=c;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,l){const c=n;let d,h,p;for(h=0;!l[e[h]]&&h<c;++h);for(p=h;h<c;++h)l[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=c-o}function a(o){for(let l=0,c=n;l<c;++l)e[l]=o[e[l]]}function s(o,l){let c;return l?c=l.length:(l=t,c=n),[qJ(l,o[0],0,c),Au(l,o[1],0,c)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Cme(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),YJ(e,t)}function Tme(e,t,n,i,r,a,s,o,l){let c=0,d=0,h;for(h=0;c<i&&d<s;++h)t[c]<r[d]?(o[h]=t[c],l[h]=n[c++]):(o[h]=r[d],l[h]=a[d++]+e);for(;c<i;++c,++h)o[h]=t[c],l[h]=n[c];for(;d<s;++d,++h)o[h]=r[d],l[h]=a[d]+e}function ED(e){J.call(this,$me(),e),this._indices=null,this._dims=null}ED.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Gq(ED,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,c;for(;o<s;++o)l=n[o].fname,c=r[l]||(r[l]=G8()),a.push(H8(c,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),c=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,w,_,A,$,M,D,T;if(c.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for($={},_=t.mod,M=0,D=_.length;M<D;++M)$[_[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!s[M]||e.modified("fields",M)||t.modified(T.fields))&&(w=T.fname,(b=v[w])||(a[w]=S=G8(),v[w]=b=S.insert(T,t.source,0)),s[M]=H8(S,M,r[M]).onAdd(b,l));for(M=0,D=o.data().length;M<D;++M)A[M]||(c[M]!==l[M]?h.push(M):$[M]&&l[M]!==d&&p.push(M));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},c=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),w=r.prev(),_=r.all();for(y=0;y<h;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)w[p]=_,S[p]!==_&&c.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,c;for(o=0,l=s.length;o<l;++o)c=s[o]._index,r[c]!==a&&n.push(c)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},c=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&c.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,c;for(n.filters=0,c=0;c<s;++c)e.modified("query",c)&&(l=c,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(c=0,o=0;c<s;++c)e.modified("query",c)&&(o|=i[c].one,this.incrementAll(i[c],r[c],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),c=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=c[0],v=c[1],b=e.one;let S,w,_;if(h<y)for(S=h,w=Math.min(y,p);S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(h>y)for(S=y,w=Math.min(h,v);S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;if(p>v)for(S=Math.max(h,v),w=p;S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(p<v)for(S=Math.max(y,p),w=v;S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),c=l[0],d=l[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(c<h)for(v=c,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(c>h)for(v=h,b=Math.min(c,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(c,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function wD(e){J.call(this,null,e)}wD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Gq(wD,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),c=d=>o[d]&n?null:s[d];return a.filter(a.MOD,c),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^l[d]&n))?s[d]:null})):(a.filter(a.ADD,c),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>c(d._index))}});const Dme=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ED,resolvefilter:wD},Symbol.toStringTag,{value:"Module"}));function kh(e,t,n){return e.fields=t||[],e.fname=n,e}function kme(e){return e.length===1?Ome(e[0]):Nme(e)}const Ome=e=>function(t){return t[e]},Nme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Ya(e){throw Error(e)}function Rme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Ya("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Ya("Access path missing closing bracket: "+e),i&&Ya("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function zme(e,t,n){const i=Rme(e);return e=i.length===1?i[0]:e,kh(kme(i),[e],e)}zme("id");kh(e=>e,[],"identity");kh(()=>0,[],"zero");kh(()=>1,[],"one");const Fme=kh(()=>!0,[],"true");kh(()=>!1,[],"false");var Bc=Array.isArray;function bm(e){return e===Object(e)}function Lme(e){return e!=null?Bc(e)?e:[e]:[]}function Ume(e){return typeof e=="function"}function Y8(e){return Ume(e)?e:()=>e}function Bme(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function jb(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function _D(e,t){return Object.hasOwn(e,t)}function jme(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),jb(i,n)}function Yq(e){return Object.prototype.toString.call(e)==="[object Date]"}function Pb(e){return typeof e=="string"}function Xq(e){return Bc(e)?"["+e.map(Xq)+"]":bm(e)||Pb(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Pme(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function Oh(e,t,n){return e.fields=t||[],e.fname=n,e}function Ime(e){return e.length===1?qme(e[0]):Hme(e)}const qme=e=>function(t){return t[e]},Hme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ro(e){throw Error(e)}function Gme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ro("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ro("Access path missing closing bracket: "+e),i&&ro("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Vq(e,t,n){const i=Gme(e);return e=i.length===1?i[0]:e,Oh(Ime(i),[e],e)}Vq("id");const AD=Oh(e=>e,[],"identity");Oh(()=>0,[],"zero");Oh(()=>1,[],"one");const Wq=Oh(()=>!0,[],"true");Oh(()=>!1,[],"false");var po=Array.isArray;function Ib(e){return e===Object(e)}function zu(e){return e[e.length-1]}function $D(e){return e==null||e===""?null:+e}const Qq=e=>t=>e*Math.exp(t),Zq=e=>t=>Math.log(e*t),Kq=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Jq=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,qb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function y2(e,t,n,i){const r=n(e[0]),a=n(zu(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function Yme(e,t){return y2(e,t,$D,AD)}function Xme(e,t){var n=Math.sign(e[0]);return y2(e,t,Zq(n),Qq(n))}function Vme(e,t,n){return y2(e,t,qb(n),qb(1/n))}function Wme(e,t,n){return y2(e,t,Kq(n),Jq(n))}function v2(e,t,n,i,r){const a=i(e[0]),s=i(zu(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function Qme(e,t,n){return v2(e,t,n,$D,AD)}function Zme(e,t,n){const i=Math.sign(e[0]);return v2(e,t,n,Zq(i),Qq(i))}function Kme(e,t,n,i){return v2(e,t,n,qb(i),qb(1/i))}function Jme(e,t,n,i){return v2(e,t,n,Kq(i),Jq(i))}function e1e(e){return 1+~~(new Date(e).getMonth()/3)}function t1e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Hb(e){return e!=null?po(e)?e:[e]:[]}function n1e(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function eH(e){return typeof e=="function"}const i1e=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function MD(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function r1e(e,t){let n=0,i,r,a,s;if(e&&(i=e.length)){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function b2(e,t){return Object.hasOwn(e,t)}function a1e(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=zu(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const d=Math.abs(l-t);return c<d&&c<=s?i:d<=s?r:a}function s1e(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function o1e(e){return typeof e=="boolean"}function tH(e){return Object.prototype.toString.call(e)==="[object Date]"}function nH(e){return typeof e=="number"}function iH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Nh(e){return typeof e=="string"}function u1e(e,t){const n=e[0],i=zu(e),r=+t;return r?r===1?i:n+r*(i-n):n}function Dy(e,t){let n="";for(;--t>=0;)n+=e;return n}function l1e(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?Dy(r,s)+a:i==="center"?Dy(r,~~(s/2))+a+Dy(r,Math.ceil(s/2)):a+Dy(r,s)}function c1e(e){return e&&zu(e)-e[0]||0}function O0(e){return po(e)?"["+e.map(O0)+"]":Ib(e)||Nh(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function f1e(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const d1e=e=>nH(e)||tH(e)?e:Date.parse(e);function h1e(e,t){return t=t||d1e,e==null||e===""?null:t(e)}function g1e(e){return e==null||e===""?null:e+""}function p1e(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Rh(e,t,n){return e.fields=t||[],e.fname=n,e}function m1e(e){return e.length===1?y1e(e[0]):v1e(e)}const y1e=e=>function(t){return t[e]},v1e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function na(e){throw Error(e)}function b1e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||na("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&na("Access path missing closing bracket: "+e),i&&na("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function x1e(e,t,n){const i=b1e(e);return e=i.length===1?i[0]:e,Rh(m1e(i),[e],e)}x1e("id");Rh(e=>e,[],"identity");Rh(()=>0,[],"zero");Rh(()=>1,[],"one");Rh(()=>!0,[],"true");Rh(()=>!1,[],"false");function X8(e){return typeof e=="function"}function ky(e,t){return Object.hasOwn(e,t)}function S1e(e){return typeof e=="string"}function V8(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}const E1e="RawCode",vc="Literal",w1e="Property",_1e="Identifier",A1e="ArrayExpression",$1e="BinaryExpression",rH="CallExpression",M1e="ConditionalExpression",C1e="LogicalExpression",T1e="MemberExpression",D1e="ObjectExpression",k1e="UnaryExpression";function pa(e){this.type=e}pa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=O1e(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function O1e(e){switch(e.type){case A1e:return e.elements;case $1e:case C1e:return[e.left,e.right];case rH:return[e.callee].concat(e.arguments);case M1e:return[e.test,e.consequent,e.alternate];case T1e:return[e.object,e.property];case D1e:return e.properties;case w1e:return[e.key,e.value];case k1e:return[e.argument];case _1e:case vc:case E1e:default:return[]}}var cs,ye,te,ii,dt,x2=1,xm=2,bc=3,Vu=4,S2=5,jc=6,Di=7,Sm=8,N1e=9;cs={};cs[x2]="Boolean";cs[xm]="<end>";cs[bc]="Identifier";cs[Vu]="Keyword";cs[S2]="Null";cs[jc]="Numeric";cs[Di]="Punctuator";cs[Sm]="String";cs[N1e]="RegularExpression";var R1e="ArrayExpression",z1e="BinaryExpression",F1e="CallExpression",L1e="ConditionalExpression",aH="Identifier",U1e="Literal",B1e="LogicalExpression",j1e="MemberExpression",P1e="ObjectExpression",I1e="Property",q1e="UnaryExpression",wn="Unexpected token %0",H1e="Unexpected number",G1e="Unexpected string",Y1e="Unexpected identifier",X1e="Unexpected reserved word",V1e="Unexpected end of input",uM="Invalid regular expression",V_="Invalid regular expression: missing /",sH="Octal literals are not allowed in strict mode.",W1e="Duplicate data property in object literal not allowed in strict mode",Bn="ILLEGAL",N0="Disabled.",Q1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Z1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function E2(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ps(e){return e>=48&&e<=57}function CD(e){return"0123456789abcdefABCDEF".includes(e)}function i0(e){return"01234567".includes(e)}function K1e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function R0(e){return e===10||e===13||e===8232||e===8233}function Em(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Q1e.test(String.fromCharCode(e))}function Gb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Z1e.test(String.fromCharCode(e))}const J1e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function oH(){for(;te<ii;){const e=ye.charCodeAt(te);if(K1e(e)||R0(e))++te;else break}}function lM(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<ii&&CD(ye[te])?(i=ye[te++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):tt({},wn,Bn);return String.fromCharCode(r)}function eye(){var e,t,n,i;for(e=ye[te],t=0,e==="}"&&tt({},wn,Bn);te<ii&&(e=ye[te++],!!CD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&tt({},wn,Bn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function uH(){var e,t;for(e=ye.charCodeAt(te++),t=String.fromCharCode(e),e===92&&(ye.charCodeAt(te)!==117&&tt({},wn,Bn),++te,e=lM("u"),(!e||e==="\\"||!Em(e.charCodeAt(0)))&&tt({},wn,Bn),t=e);te<ii&&(e=ye.charCodeAt(te),!!Gb(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ye.charCodeAt(te)!==117&&tt({},wn,Bn),++te,e=lM("u"),(!e||e==="\\"||!Gb(e.charCodeAt(0)))&&tt({},wn,Bn),t+=e);return t}function tye(){var e,t;for(e=te++;te<ii;){if(t=ye.charCodeAt(te),t===92)return te=e,uH();if(Gb(t))++te;else break}return ye.slice(e,te)}function nye(){var e,t,n;return e=te,t=ye.charCodeAt(te)===92?uH():tye(),t.length===1?n=bc:J1e.hasOwnProperty(t)?n=Vu:t==="null"?n=S2:t==="true"||t==="false"?n=x2:n=bc,{type:n,value:t,start:e,end:te}}function W_(){var e=te,t=ye.charCodeAt(te),n,i=ye[te],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:Di,value:String.fromCharCode(t),start:e,end:te};default:if(n=ye.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:Di,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,ye.charCodeAt(te)===61&&++te,{type:Di,value:ye.slice(e,te),start:e,end:te}}}if(s=ye.substr(te,4),s===">>>=")return te+=4,{type:Di,value:s,start:e,end:te};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return te+=3,{type:Di,value:a,start:e,end:te};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return te+=2,{type:Di,value:r,start:e,end:te};if(r==="//"&&tt({},wn,Bn),"<>=!+-*%&|^/".includes(i))return++te,{type:Di,value:i,start:e,end:te};tt({},wn,Bn)}function iye(e){let t="";for(;te<ii&&CD(ye[te]);)t+=ye[te++];return t.length===0&&tt({},wn,Bn),Em(ye.charCodeAt(te))&&tt({},wn,Bn),{type:jc,value:parseInt("0x"+t,16),start:e,end:te}}function rye(e){let t="0"+ye[te++];for(;te<ii&&i0(ye[te]);)t+=ye[te++];return(Em(ye.charCodeAt(te))||Ps(ye.charCodeAt(te)))&&tt({},wn,Bn),{type:jc,value:parseInt(t,8),octal:!0,start:e,end:te}}function W8(){var e,t,n;if(n=ye[te],E2(Ps(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=ye[te++],n=ye[te],e==="0"){if(n==="x"||n==="X")return++te,iye(t);if(i0(n))return rye(t);n&&Ps(n.charCodeAt(0))&&tt({},wn,Bn)}for(;Ps(ye.charCodeAt(te));)e+=ye[te++];n=ye[te]}if(n==="."){for(e+=ye[te++];Ps(ye.charCodeAt(te));)e+=ye[te++];n=ye[te]}if(n==="e"||n==="E")if(e+=ye[te++],n=ye[te],(n==="+"||n==="-")&&(e+=ye[te++]),Ps(ye.charCodeAt(te)))for(;Ps(ye.charCodeAt(te));)e+=ye[te++];else tt({},wn,Bn);return Em(ye.charCodeAt(te))&&tt({},wn,Bn),{type:jc,value:parseFloat(e),start:t,end:te}}function aye(){var e="",t,n,i,r,a=!1;for(t=ye[te],E2(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<ii;)if(i=ye[te++],i===t){t="";break}else if(i==="\\")if(i=ye[te++],!i||!R0(i.charCodeAt(0)))switch(i){case"u":case"x":ye[te]==="{"?(++te,e+=eye()):e+=lM(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:i0(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),te<ii&&i0(ye[te])&&(a=!0,r=r*8+"01234567".indexOf(ye[te++]),"0123".includes(i)&&te<ii&&i0(ye[te])&&(r=r*8+"01234567".indexOf(ye[te++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&ye[te]===`
`&&++te;else{if(R0(i.charCodeAt(0)))break;e+=i}return t!==""&&tt({},wn,Bn),{type:Sm,value:e,octal:a,start:n,end:te}}function sye(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";tt({},uM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{tt({},uM)}try{return new RegExp(e,t)}catch{return null}}function oye(){var e,t,n,i,r;for(e=ye[te],E2(e==="/","Regular expression literal must start with a slash"),t=ye[te++],n=!1,i=!1;te<ii;)if(e=ye[te++],t+=e,e==="\\")e=ye[te++],R0(e.charCodeAt(0))&&tt({},V_),t+=e;else if(R0(e.charCodeAt(0)))tt({},V_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||tt({},V_),r=t.substr(1,t.length-2),{value:r,literal:t}}function uye(){var e,t,n;for(t="",n="";te<ii&&(e=ye[te],!!Gb(e.charCodeAt(0)));)++te,e==="\\"&&te<ii?tt({},wn,Bn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&tt({},uM,n),{value:n,literal:t}}function lye(){var e,t,n,i;return dt=null,oH(),e=te,t=oye(),n=uye(),i=sye(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function cye(e){return e.type===bc||e.type===Vu||e.type===x2||e.type===S2}function lH(){if(oH(),te>=ii)return{type:xm,start:te,end:te};const e=ye.charCodeAt(te);return Em(e)?nye():e===40||e===41||e===59?W_():e===39||e===34?aye():e===46?Ps(ye.charCodeAt(te+1))?W8():W_():Ps(e)?W8():W_()}function Oi(){const e=dt;return te=e.end,dt=lH(),te=e.end,e}function cH(){const e=te;dt=lH(),te=e}function fye(e){const t=new pa(R1e);return t.elements=e,t}function Q8(e,t,n){const i=new pa(e==="||"||e==="&&"?B1e:z1e);return i.operator=e,i.left=t,i.right=n,i}function dye(e,t){const n=new pa(F1e);return n.callee=e,n.arguments=t,n}function hye(e,t,n){const i=new pa(L1e);return i.test=e,i.consequent=t,i.alternate=n,i}function TD(e){const t=new pa(aH);return t.name=e,t}function qp(e){const t=new pa(U1e);return t.value=e.value,t.raw=ye.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Z8(e,t,n){const i=new pa(j1e);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function gye(e){const t=new pa(P1e);return t.properties=e,t}function K8(e,t,n){const i=new pa(I1e);return i.key=t,i.value=n,i.kind=e,i}function pye(e,t){const n=new pa(q1e);return n.operator=e,n.argument=t,n.prefix=!0,n}function tt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(E2(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=te,n.description=r,n}function w2(e){e.type===xm&&tt(e,V1e),e.type===jc&&tt(e,H1e),e.type===Sm&&tt(e,G1e),e.type===bc&&tt(e,Y1e),e.type===Vu&&tt(e,X1e),tt(e,wn,e.value)}function ri(e){const t=Oi();(t.type!==Di||t.value!==e)&&w2(t)}function At(e){return dt.type===Di&&dt.value===e}function Q_(e){return dt.type===Vu&&dt.value===e}function mye(){const e=[];for(te=dt.start,ri("[");!At("]");)At(",")?(Oi(),e.push(null)):(e.push(xc()),At("]")||ri(","));return Oi(),fye(e)}function J8(){te=dt.start;const e=Oi();return e.type===Sm||e.type===jc?(e.octal&&tt(e,sH),qp(e)):TD(e.value)}function yye(){var e,t,n,i;if(te=dt.start,e=dt,e.type===bc)return n=J8(),ri(":"),i=xc(),K8("init",n,i);if(e.type===xm||e.type===Di)w2(e);else return t=J8(),ri(":"),i=xc(),K8("init",t,i)}function vye(){var e=[],t,n,i,r={},a=String;for(te=dt.start,ri("{");!At("}");)t=yye(),t.key.type===aH?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?tt({},W1e):r[i]=!0,e.push(t),At("}")||ri(",");return ri("}"),gye(e)}function bye(){ri("(");const e=DD();return ri(")"),e}const xye={if:1};function Sye(){var e,t,n;if(At("("))return bye();if(At("["))return mye();if(At("{"))return vye();if(e=dt.type,te=dt.start,e===bc||xye[dt.value])n=TD(Oi().value);else if(e===Sm||e===jc)dt.octal&&tt(dt,sH),n=qp(Oi());else{if(e===Vu)throw new Error(N0);e===x2?(t=Oi(),t.value=t.value==="true",n=qp(t)):e===S2?(t=Oi(),t.value=null,n=qp(t)):At("/")||At("/=")?(n=qp(lye()),cH()):w2(Oi())}return n}function Eye(){const e=[];if(ri("("),!At(")"))for(;te<ii&&(e.push(xc()),!At(")"));)ri(",");return ri(")"),e}function wye(){te=dt.start;const e=Oi();return cye(e)||w2(e),TD(e.value)}function _ye(){return ri("."),wye()}function Aye(){ri("[");const e=DD();return ri("]"),e}function $ye(){var e,t,n;for(e=Sye();;)if(At("."))n=_ye(),e=Z8(".",e,n);else if(At("("))t=Eye(),e=dye(e,t);else if(At("["))n=Aye(),e=Z8("[",e,n);else break;return e}function eF(){const e=$ye();if(dt.type===Di&&(At("++")||At("--")))throw new Error(N0);return e}function xv(){var e,t;if(dt.type!==Di&&dt.type!==Vu)t=eF();else{if(At("++")||At("--"))throw new Error(N0);if(At("+")||At("-")||At("~")||At("!"))e=Oi(),t=xv(),t=pye(e.value,t);else{if(Q_("delete")||Q_("void")||Q_("typeof"))throw new Error(N0);t=eF()}}return t}function tF(e){let t=0;if(e.type!==Di&&e.type!==Vu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Mye(){var e,t,n,i,r,a,s,o,l,c;if(e=dt,l=xv(),i=dt,r=tF(i),r===0)return l;for(i.prec=r,Oi(),t=[e,dt],s=xv(),a=[l,i,s];(r=tF(dt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=Q8(o,l,s),a.push(n);i=Oi(),i.prec=r,a.push(i),t.push(dt),n=xv(),a.push(n)}for(c=a.length-1,n=a[c],t.pop();c>1;)t.pop(),n=Q8(a[c-1].value,a[c-2],n),c-=2;return n}function xc(){var e,t,n;return e=Mye(),At("?")&&(Oi(),t=xc(),ri(":"),n=xc(),e=hye(e,t,n)),e}function DD(){const e=xc();if(At(","))throw new Error(N0);return e}function kD(e){ye=e,te=0,ii=ye.length,dt=null,cH();const t=DD();if(dt.type!==xm)throw new Error("Unexpect token after expression.");return t}var fH={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function dH(e){function t(s,o,l,c){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(c<0?"":c===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return c=>t(s,c,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&na("Missing arguments to clamp function."),s.length>3&&na("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&na("Missing arguments to if function."),s.length>3&&na("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function Cye(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function hH(e){e=e||{};const t=e.allowed?V8(e.allowed):{},n=e.forbidden?V8(e.forbidden):{},i=e.constants||fH,r=(e.functions||dH)(h),a=e.globalvar,s=e.fieldvar,o=X8(a)?a:v=>`${a}["${v}"]`;let l={},c={},d=0;function h(v){if(S1e(v))return v;const b=p[v.type];return b==null&&na("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:ky(n,b)?na("Illegal identifier: "+b):ky(i,b)?i[b]:ky(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const w=h(v.property);return S===s&&(c[Cye(w)]=1),b&&(d-=1),S+(b?"."+w:"["+w+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&na("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,w=ky(r,b)&&r[b];return w||na("Unrecognized function: "+b),X8(w)?w(S):w+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},b}return y.functions=r,y.constants=i,y}function zh(e,t,n){return e.fields=t||[],e.fname=n,e}function Tye(e){return e.length===1?Dye(e[0]):kye(e)}const Dye=e=>function(t){return t[e]},kye=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Sv(e){throw Error(e)}function Oye(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Sv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Sv("Access path missing closing bracket: "+e),i&&Sv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function OD(e,t,n){const i=Oye(e);return e=i.length===1?i[0]:e,zh(Tye(i),[e],e)}OD("id");zh(e=>e,[],"identity");zh(()=>0,[],"zero");zh(()=>1,[],"one");zh(()=>!0,[],"true");zh(()=>!1,[],"false");var cM=Array.isArray;function Nye(e){return e[e.length-1]}function Vl(e){return e==null||e===""?null:+e}function nF(e){return e!=null?cM(e)?e:[e]:[]}function Rye(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function iF(e,t){return Object.hasOwn(e,t)}function Oy(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Z_(e){return Object.prototype.toString.call(e)==="[object Date]"}const rF=Symbol("vega_selection_getter");function gH(e){return(!e.getter||!e.getter[rF])&&(e.getter=OD(e.field),e.getter[rF]=!0),e.getter}const ND="intersect",aF="union",zye="vlMulti",Fye="vlPoint",sF="or",Lye="and",za="_vgsid_",z0=OD(za),Uye="E",Bye="R",jye="R-E",Pye="R-LE",Iye="R-RE",qye="E-LT",Hye="E-LTE",Gye="E-GT",Yye="E-GTE",Xye="E-VALID",Vye="E-ONE",Yb="index:unit";function oF(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=gH(o)(e),Z_(s)&&(s=Vl(s)),Z_(i[a])&&(i[a]=Vl(i[a])),cM(i[a])&&Z_(i[a][0])&&(i[a]=i[a].map(Vl)),o.type===Uye){if(cM(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Bye){if(!Oy(s,i[a]))return!1}else if(o.type===Iye){if(!Oy(s,i[a],!0,!1))return!1}else if(o.type===jye){if(!Oy(s,i[a],!1,!1))return!1}else if(o.type===Pye){if(!Oy(s,i[a],!1,!0))return!1}else if(o.type===qye){if(s>=i[a])return!1}else if(o.type===Hye){if(s>i[a])return!1}else if(o.type===Gye){if(s<=i[a])return!1}else if(o.type===Yye){if(s<i[a])return!1}else if(o.type===Xye){if(s===null||isNaN(s))return!1}else if(o.type===Vye&&i[a].indexOf(s)===-1)return!1;return!0}function Wye(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[Yb]&&i[Yb].value:void 0,s=n===ND,o=r.length,l=0,c,d,h,p,y;l<o;++l)if(c=r[l],a&&s){if(d=d||{},h=d[p=c.unit]||0,h===-1)continue;if(y=oF(t,c),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=oF(t,c),s^y)return y;return o&&s}const pH=sh(z0),Qye=pH.left,Zye=pH.right;function Kye(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[Yb]&&i[Yb].value:void 0,s=n===ND,o=z0(t),l=Qye(r,o);if(l===r.length||z0(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(Zye(r,o)-l<a.size)return!1}return!0}function Jye(e,t){return e.map(n=>Rye(t.fields?{values:t.fields.map(i=>gH(i)(n.datum))}:{[za]:z0(n.datum)},t))}function eve(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},c,d,h,p,y,v,b,S,w,_,A=a.length,$=0,M,D;$<A;++$)if(c=a[$],p=c.unit,d=c.fields,h=c.values,d&&h){for(M=0,D=d.length;M<D;++M)y=d[M],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),l[y.field]=w=y.type.charAt(0),_=K_[`${w}_union`],b[p]=_(S,nF(h[M]));n&&(S=o[p]||(o[p]=[]),S.push(nF(h).reduce((T,O,z)=>(T[d[z].field]=O,T),{})))}else y=za,v=z0(c),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[za]:v}));if(t=t||aF,s[za]?s[za]=K_[`${za}_${t}`](...Object.values(s[za])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(O=>s[T][O]).reduce((O,z)=>O===void 0?z:K_[`${l[T]}_${t}`](O,z))}),a=Object.keys(o),n&&a.length){const T=i?Fye:zye;s[T]=t===aF?{[sF]:a.reduce((O,z)=>(O.push(...o[z]),O),[])}:{[Lye]:a.map(O=>({[sF]:o[O]}))}}return s}var K_={[`${za}_union`]:tee,[`${za}_intersect`]:JJ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Vl(t[0]),i=Vl(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Vl(t[0]),i=Vl(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const tve=":",nve="@";function RD(e,t,n,i){t[0].type!==vc&&Sv("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Nye(t).value,s="unit",o=nve+s,l=tve+r;a===ND&&!iF(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),iF(i,l)||(i[l]=n.getData(r).tuplesRef())}function mH(e){const t=this.context.data[e];return t?t.values.value:[]}function ive(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function rve(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Wq).insert(t)),1}function ave(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const wm=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},sve=wm("format"),yH=wm("timeFormat"),ove=wm("utcFormat"),uve=wm("timeParse"),lve=wm("utcParse"),Ny=new Date(2e3,0,1);function _2(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ny.setYear(2e3),Ny.setMonth(e),Ny.setDate(t),yH.call(this,Ny,n))}function cve(e){return _2.call(this,e,1,"%B")}function fve(e){return _2.call(this,e,1,"%b")}function dve(e){return _2.call(this,0,2+e,"%A")}function hve(e){return _2.call(this,0,2+e,"%a")}const gve=":",pve="@",fM="%",vH="$";function zD(e,t,n,i){t[0].type!==vc&&ro("First argument to data functions must be a string literal.");const r=t[0].value,a=gve+r;if(!b2(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function mve(e,t,n,i){t[0].type!==vc&&ro("First argument to indata must be a string literal."),t[1].type!==vc&&ro("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=pve+a;b2(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function vi(e,t,n,i){if(t[0].type===vc)uF(n,i,t[0].value);else for(e in n.scales)uF(n,i,e)}function uF(e,t,n){const i=fM+n;if(!b2(t,i))try{t[i]=e.scaleRef(n)}catch{}}function fs(e,t){if(Nh(e)){const n=t.scales[e];return n&&nz(n.value)?n.value:void 0}else if(eH(e))return nz(e)?e:void 0}function yve(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=vi,n._range=vi,n._scale=vi;const i=r=>"_["+(r.type===vc?O0(fM+r.value):O0(fM)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function FD(e,t){return function(n,i,r){if(n){const a=fs(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const vve=FD("area",Nfe),bve=FD("bounds",Lfe),xve=FD("centroid",qfe);function Sve(e,t){const n=fs(e,(t||this).context);return n&&n.scale()}function Eve(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function LD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function wve(){return LD(this.context.dataflow,"warn",arguments)}function _ve(){return LD(this.context.dataflow,"info",arguments)}function Ave(){return LD(this.context.dataflow,"debug",arguments)}function J_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dM(e){const t=Du(e),n=J_(t.r),i=J_(t.g),r=J_(t.b);return .2126*n+.7152*i+.0722*r}function $ve(e,t){const n=dM(e),i=dM(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Mve(){const e=[].slice.call(arguments);return e.unshift({}),MD(...e)}function bH(e,t){return e===t||e!==e&&t!==t?!0:po(e)?po(t)&&e.length===t.length?Cve(e,t):!1:Ib(e)&&Ib(t)?xH(e,t):!1}function Cve(e,t){for(let n=0,i=e.length;n<i;++n)if(!bH(e[n],t[n]))return!1;return!0}function xH(e,t){for(const n in e)if(!bH(e[n],t[n]))return!1;return!0}function lF(e){return t=>xH(e,t)}function Tve(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,c=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<c)&&(o.changes=d=s.changeset(),d.stamp=c,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(h=n===!0?Wq:po(n)||Tx(n)?n:lF(n),d.remove(h)),t&&d.insert(t),i&&(h=lF(i),l.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Dve(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function kve(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const cF={};function Ove(e,t){const n=cF[t]||(cF[t]=Vq(t));return po(e)?e.map(n):n(e)}function A2(e){return po(e)||ArrayBuffer.isView(e)?e:null}function UD(e){return A2(e)||(Nh(e)?e:null)}function Nve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return A2(e).join(...n)}function Rve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return UD(e).indexOf(...n)}function zve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return UD(e).lastIndexOf(...n)}function Fve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return UD(e).slice(...n)}function Lve(e,t,n){return eH(n)&&ro("Function argument passed to replace."),!Nh(t)&&!iH(t)&&ro("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Uve(e){return A2(e).slice().reverse()}function Bve(e){return A2(e).slice().sort(i1e)}function jve(e,t,n){return q3(e||0,t||0,n||0)}function Pve(e,t){const n=fs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Ive(e,t){const n=fs(e,(t||this).context);return n?n.copy():void 0}function qve(e,t){const n=fs(e,(t||this).context);return n?n.domain():[]}function Hve(e,t,n){const i=fs(e,(n||this).context);return i?po(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Gve(e,t){const n=fs(e,(t||this).context);return n&&n.range?n.range():[]}function Yve(e,t,n){const i=fs(e,(n||this).context);return i?i(t):void 0}function Xve(e,t,n,i,r){e=fs(e,(r||this).context);const a=Hj(t,n);let s=e.domain(),o=s[0],l=zu(s),c=AD;return l-o?c=Oj(e,o,l):e=(e.interpolator?it("sequential")().interpolator(e.interpolator()):it("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==zu(s)&&s.push(l)),s.forEach(d=>a.stop(c(d),e(d))),a}function Vve(e,t,n){const i=fs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Wve(e){let t=null;return function(n){return n?E0(n,t=t||Nd(e)):e}}const SH=e=>e.data;function EH(e,t){const n=mH.call(t,e);return n.root&&n.root.lookup||{}}function Qve(e,t,n){const i=EH(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(SH):void 0}function Zve(e,t){const n=EH(e,this)[t];return n?n.ancestors().map(SH):void 0}const wH=()=>typeof window<"u"&&window||null;function Kve(){const e=wH();return e?e.screen:{}}function Jve(){const e=wH();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ebe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function _H(e,t,n){if(!e)return[];const[i,r]=e,a=new rn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return jP(s,a,tbe(t))}function tbe(e){let t=null;if(e){const n=Hb(e.marktype),i=Hb(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function nbe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Hb(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function ibe(e){return Hb(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function rbe(e,t,n){const{x:i,y:r,mark:a}=n,s=new rn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),c<s.y1&&(s.y1=c),c>s.y2&&(s.y2=c);return s.translate(i,r),_H([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>abe(l.x,l.y,t))}function abe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,c]=n[r];c>t!=o>t&&e<(s-l)*(t-c)/(o-c)+l&&i++}return i&1}const F0={random(){return Rr()},cumulativeNormal:Rx,cumulativeLogNormal:PC,cumulativeUniform:GC,densityNormal:FC,densityLogNormal:jC,densityUniform:HC,quantileNormal:zx,quantileLogNormal:IC,quantileUniform:YC,sampleNormal:Nx,sampleLogNormal:BC,sampleUniform:qC,isArray:po,isBoolean:o1e,isDate:tH,isDefined(e){return e!==void 0},isNumber:nH,isObject:Ib,isRegExp:iH,isString:Nh,isTuple:Tx,isValid(e){return e!=null&&e===e},toBoolean:f1e,toDate(e){return h1e(e)},toNumber:$D,toString:g1e,indexof:Rve,join:Nve,lastindexof:zve,replace:Lve,reverse:Uve,sort:Bve,slice:Fve,flush:a1e,lerp:u1e,merge:Mve,pad:l1e,peek:zu,pluck:Ove,span:c1e,inrange:s1e,truncate:p1e,rgb:Du,lab:Xv,hcl:Vv,hsl:Gv,luminance:dM,contrast:$ve,sequence:rr,format:sve,utcFormat:ove,utcParse:lve,utcOffset:LL,utcSequence:jL,timeFormat:yH,timeParse:uve,timeOffset:FL,timeSequence:BL,timeUnitSpecifier:AL,monthFormat:cve,monthAbbrevFormat:fve,dayFormat:dve,dayAbbrevFormat:hve,quarter:e1e,utcquarter:t1e,week:ML,utcweek:DL,dayofyear:$L,utcdayofyear:TL,warn:wve,info:_ve,debug:Ave,extent(e){return r1e(e)},inScope:Eve,intersect:_H,clampRange:n1e,pinchDistance:Dve,pinchAngle:kve,screen:Kve,containerSize:ebe,windowSize:Jve,bandspace:jve,setdata:rve,pathShape:Wve,panLinear:Yme,panLog:Xme,panPow:Vme,panSymlog:Wme,zoomLinear:Qme,zoomLog:Zme,zoomPow:Kme,zoomSymlog:Jme,encode:ave,modify:Tve,lassoAppend:nbe,lassoPath:ibe,intersectLasso:rbe},sbe=["view","item","group","xy","x","y"],obe="event.vega.",AH="this.",BD={},$H={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${O0(vH+e)}]`,functions:ube,constants:fH,visitors:BD},hM=hH($H);function ube(e){const t=dH(e);sbe.forEach(n=>t[n]=obe+n);for(const n in F0)t[n]=AH+n;return MD(t,yve(e,F0,BD)),t}function Qt(e,t,n){return arguments.length===1?F0[e]:(F0[e]=t,n&&(BD[e]=n),hM&&(hM.functions[e]=AH+e),this)}Qt("bandwidth",Pve,vi);Qt("copy",Ive,vi);Qt("domain",qve,vi);Qt("range",Gve,vi);Qt("invert",Hve,vi);Qt("scale",Yve,vi);Qt("gradient",Xve,vi);Qt("geoArea",vve,vi);Qt("geoBounds",bve,vi);Qt("geoCentroid",xve,vi);Qt("geoShape",Vve,vi);Qt("geoScale",Sve,vi);Qt("indata",ive,mve);Qt("data",mH,zD);Qt("treePath",Qve,zD);Qt("treeAncestors",Zve,zD);Qt("vlSelectionTest",Wye,RD);Qt("vlSelectionIdTest",Kye,RD);Qt("vlSelectionResolve",eve,RD);Qt("vlSelectionTuples",Jye);function ts(e,t){const n={};let i;try{e=Nh(e)?e:O0(e)+"",i=kD(e)}catch{ro("Expression parse error: "+e)}i.visit(a=>{if(a.type!==rH)return;const s=a.callee.name,o=$H.visitors[s];o&&o(s,a.arguments,t,n)});const r=hM(i);return r.globals.forEach(a=>{const s=vH+a;!b2(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:MD({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function ds(e,t,n){return e.fields=t||[],e.fname=n,e}function lbe(e){return e==null?null:e.fields}function MH(e){return e.length===1?cbe(e[0]):fbe(e)}const cbe=e=>function(t){return t[e]},fbe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ic(e){throw Error(e)}function CH(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ic("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ic("Access path missing closing bracket: "+e),i&&ic("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function jD(e,t,n){const i=CH(e);return e=i.length===1?i[0]:e,ds((n&&n.get||MH)(i),[e],t||e)}jD("id");ds(e=>e,[],"identity");ds(()=>0,[],"zero");ds(()=>1,[],"one");const dbe=ds(()=>!0,[],"true");ds(()=>!1,[],"false");var PD=Array.isArray;function ID(e){return e===Object(e)}function L0(e){return e!=null?PD(e)?e:[e]:[]}function hbe(e){return typeof e=="function"}const gbe="descending";function pbe(e,t,n){n=n||{},t=L0(t)||[];const i=[],r=[],a={},s=n.comparator||mbe;return L0(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===gbe?-1:1),r.push(o=hbe(o)?o:jD(o,null,n)),(lbe(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:ds(s(r,i),Object.keys(a))}const TH=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),mbe=(e,t)=>e.length===1?ybe(e[0],t[0]):vbe(e,t,e.length),ybe=(e,t)=>function(n,i){return TH(e(n),e(i))*t},vbe=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=TH(a(i),a(r));return s*t[o]});function bbe(e,t){return Object.hasOwn(e,t)}function xbe(e){return typeof e=="string"}function Sbe(e,t,n){e&&(e=t?L0(e).map(o=>o.replace(/\\(.)/g,"$1")):L0(e));const i=e&&e.length,r=n&&n.get||MH,a=o=>r(t?[o]:CH(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return ds(s,e,"key")}function gM(e){return PD(e)?"["+e.map(gM)+"]":ID(e)||xbe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function DH(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function Ebe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const wbe=DH(["rule"]),fF=DH(["group","image","rect"]);function _be(e,t){let n="";return wbe[t]||(e.x2&&(e.x?(fF[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(fF[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function qD(e){return(e+"").toLowerCase()}function Abe(e){return qD(e)==="operator"}function $be(e){return qD(e)==="collect"}function fp(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Mbe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Cbe={operator:(e,t)=>fp(e,["_"],t.code),parameter:(e,t)=>fp(e,["datum","_"],t.code),event:(e,t)=>fp(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return fp(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+gM(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=_be(i,n),r+="return m;",fp(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(gM).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,c;return a.path?(l=`a${a.path}`,c=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,c=`this.f${s}(b)`),Mbe(l,c,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Tbe(e){const t=this;Abe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Dbe(e){const t=this;if(e.params){const n=t.get(e.id);n||ic("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function kbe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=PD(r)?r.map(a=>dF(a,n,t)):dF(r,n,t)}return t}function dF(e,t,n){if(!e||!ID(e))return e;for(let i=0,r=hF.length,a;i<r;++i)if(a=hF[i],bbe(e,a.key))return a.parse(e,t,n);return e}var hF=[{key:"$ref",parse:Obe},{key:"$key",parse:Rbe},{key:"$expr",parse:Nbe},{key:"$field",parse:zbe},{key:"$encode",parse:Lbe},{key:"$compare",parse:Fbe},{key:"$context",parse:Ube},{key:"$subflow",parse:Bbe},{key:"$tupleid",parse:jbe}];function Obe(e,t){return t.get(e.$ref)||ic("Operator not defined: "+e.$ref)}function Nbe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ds(t.parameterExpression(e.$expr),e.$fields))}function Rbe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Sbe(e.$key,e.$flat,t.expr.codegen))}function zbe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=jD(e.$field,e.$name,t.expr.codegen))}function Fbe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=L0(e.$compare).map(r=>r&&r.$tupleid?we:r);return t.fn[n]||(t.fn[n]=pbe(i,e.$order,t.expr.codegen))}function Lbe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=ds(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Ube(e,t){return t}function Bbe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function jbe(){return we}function Pbe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ic("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Ibe(e){var t=this,n=ID(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ic("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const qbe={skip:!0};function Hbe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function Gbe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],qbe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(dbe).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function kH(e,t,n,i){return new OH(e,t,n,i)}function OH(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Cbe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function gF(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}OH.prototype=gF.prototype={fork(){const e=new gF(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),$be(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[qD(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ebe,parseOperator:Tbe,parseOperatorParameters:Dbe,parseParameters:kbe,parseStream:Pbe,parseUpdate:Ibe,getState:Hbe,setState:Gbe};function Ybe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),NH(t,e.description()))}function NH(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Xbe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const eA="default";function Vbe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:eA,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Pb(r)?r:r.user:eA,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Pb(i)||(r=i.item,i=i.user),pM(e,i&&i!==eA?i:r||i),r},{cursor:t})}function pM(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Xb(e,t){var n=e._runtime.data;return _D(n,t)||Ya("Unrecognized data set: "+t),n[t]}function Wbe(e,t){return arguments.length<2?Xb(this,e).values.value:$2.call(this,e,Fc().remove(Fme).insert(t))}function $2(e,t){hU(t)||Ya("Second argument to changes must be a changeset.");const n=Xb(this,e);return n.modified=!0,this.pulse(n.input,t)}function Qbe(e,t){return $2.call(this,e,Fc().insert(t))}function Zbe(e,t){return $2.call(this,e,Fc().remove(t))}function RH(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function zH(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function M2(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Kbe(e){var t=M2(e),n=RH(e),i=zH(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Jbe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=M2(e),s=t.changedTouches?t.changedTouches[0]:t,a=u2(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=exe(e,n,a),t}function exe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;Pb(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:Y8(e),item:Y8(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const pF="view",txe="timer",nxe="window",ixe={trap:!1};function rxe(e){const t=jb({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{Bc(i[a])&&(i[a]=Pme(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function FH(e,t,n,i){e._eventListeners.push({type:n,sources:Lme(t),handler:i})}function axe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Ry(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||bm(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function sxe(e,t,n){var i=this,r=new Ox(n),a=function(c,d){i.runAsync(null,()=>{e===pF&&axe(i,t)&&c.preventDefault(),r.receive(Jbe(i,c,d))})},s;if(e===txe)Ry(i,"timer",t)&&i.timer(a,t);else if(e===pF)Ry(i,"view",t)&&i.addEventListener(t,a,ixe);else if(e===nxe?Ry(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Ry(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);FH(i,s,t,a)}return r}function mF(e){return e.item}function yF(e){return e.item.mark.source}function vF(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function oxe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",mF),yF,vF(e)),this.on(this.events("view","pointerout",mF),yF,vF(t)),this}function uxe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function or(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const lxe="vega-bind",cxe="vega-bind-name",fxe="vega-bind-radio";function dxe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=Bme(i.debounce,r.update))),(i.input==null&&i.element?hxe:pxe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function hxe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),FH(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(gxe(r))}}function gxe(e){return typeof Event<"u"?new Event(e):{type:e}}function pxe(e,t,n,i){const r=i.signal(n.signal),a=or("div",{class:lxe}),s=n.input==="radio"?a:a.appendChild(or("label"));s.appendChild(or("span",{class:cxe},n.name||n.signal)),t.appendChild(a);let o=mxe;switch(n.input){case"checkbox":o=yxe;break;case"select":o=vxe;break;case"radio":o=bxe;break;case"range":o=xxe;break}o(e,s,n,r)}function mxe(e,t,n,i){const r=or("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function yxe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=or("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function vxe(e,t,n,i){const r=or("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};Vb(s,i)&&(l.selected=!0),r.appendChild(or("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(Vb(n.options[o],s)){r.selectedIndex=o;return}}}function bxe(e,t,n,i){const r=or("span",{class:fxe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};Vb(s,i)&&(l.checked=!0);const c=or("input",l);c.addEventListener("change",()=>e.update(s));const d=or("label",{},(a[o]||s)+"");return d.prepend(c),r.appendChild(d),c}),e.set=s=>{const o=e.elements,l=o.length;for(let c=0;c<l;++c)Vb(o[c].value,s)&&(o[c].checked=!0)}}function xxe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||$u(a,r,100),o=or("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=or("span",{},+i);t.appendChild(o),t.appendChild(l);const c=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",c),o.addEventListener("change",c),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function Vb(e,t){return e===t||e+""==t+""}function LH(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,RH(e),zH(e),M2(e),r,a).background(e.background())}function HD(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Sxe(e,t,n,i){const r=new i(e.loader(),HD(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,M2(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Exe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=l2(i);e=n._el=e?tA(n,e,!0):null,Ybe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||hm,o=e?a.renderer:a.headless;return n._renderer=o?LH(n,n._renderer,e,o):null,n._handler=Sxe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=tA(n,t,!0):e.appendChild(or("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=tA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{dxe(n,l.element||t,l)})),n}function tA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const dp=e=>+e||0,wxe=e=>({top:e,bottom:e,left:e,right:e});function bF(e){return bm(e)?{top:dp(e.top),bottom:dp(e.bottom),left:dp(e.left),right:dp(e.right)}:wxe(dp(e))}async function GD(e,t,n,i){const r=l2(t),a=r&&r.headless;return a||Ya("Unrecognized renderer type: "+t),await e.runAsync(),LH(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function _xe(e,t){e!==cu.Canvas&&e!==cu.SVG&&e!==cu.PNG&&Ya("Unrecognized image type: "+e);const n=await GD(this,e,t);return e===cu.SVG?Axe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Axe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $xe(e,t){return(await GD(this,cu.Canvas,e,t)).canvas()}async function Mxe(e){return(await GD(this,cu.SVG,e)).svg()}function Cxe(e,t,n){return kH(e,Md,F0,n).parse(t)}function Txe(e){var t=this._runtime.scales;return _D(t,e)||Ya("Unrecognized scale or projection: "+e),t[e].value}var UH="width",BH="height",YD="padding",xF={skip:!0};function jH(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===YD?i.left+i.right:0)}function PH(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===YD?i.top+i.bottom:0)}function Dxe(e){var t=e._signals,n=t[UH],i=t[BH],r=t[YD];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=jH(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=PH(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function kxe(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(UH,n,xF),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(BH,i,xF),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function Oxe(e){return this._runtime.getState(e||{data:Nxe,signals:Rxe,recurse:!0})}function Nxe(e,t){return t.modified&&Bc(t.input.value)&&!e.startsWith("_:vega:_")}function Rxe(e,t){return!(e==="parent"||t instanceof Md.proxy)}function zxe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Fxe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(tge(n,t))}function Lxe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Uxe(i))}function Uxe(e){return e==null?"":Bc(e)?IH(e):bm(e)&&!Yq(e)?Bxe(e):e+""}function Bxe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Bc(n)?IH(n):qH(n))}).join(`
`)}function IH(e){return"["+e.map(qH).join(", ")+"]"}function qH(e){return Bc(e)?"[]":bm(e)&&!Yq(e)?"{}":e}function jxe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function HH(e,t){const n=this;if(t=t||{},cd.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=jb({},e.locale,t.locale);n.locale(iU(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||cu.Canvas,n._scenegraph=new hP;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Lxe,n._redraw=!0,n._handler=new hm().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=rxe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Cxe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:jb({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=jH(n,n._width),n._viewHeight=PH(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Dxe(n),Xbe(n),Vbe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function zy(e,t){return _D(e._signals,t)?e._signals[t]:Ya("Unrecognized signal name: "+Xq(t))}function GH(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function SF(e,t,n,i){let r=GH(n,i);return r||(r=HD(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function EF(e,t,n){const i=GH(t,n);return i&&t._targets.remove(i),e}jme(HH,cd,{async evaluate(e,t,n){if(await cd.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Kbe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&Zy(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&NH(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=zy(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",bF(e)):bF(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(l2(e)||Ya("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(cd.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(zy(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:kxe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=HD(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return SF(this,e,zy(this,e),t)},removeSignalListener(e,t){return EF(this,zy(this,e),t)},addDataListener(e,t){return SF(this,e,Xb(this,e).values,t)},removeDataListener(e,t){return EF(this,Xb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=pM(this,null);this._globalCursor=!!e,t&&pM(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Fxe,events:sxe,finalize:uxe,hover:oxe,data:Wbe,change:$2,insert:Qbe,remove:Zbe,scale:Txe,initialize:Exe,toImageURL:_xe,toCanvas:$xe,toSVG:Mxe,getState:Oxe,setState:zxe,_watchPixelRatio:jxe});function Fh(e,t,n){return e.fields=t||[],e.fname=n,e}function Pxe(e){return e.length===1?Ixe(e[0]):qxe(e)}const Ixe=e=>function(t){return t[e]},qxe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Fe(e){throw Error(e)}function YH(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Fe("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Fe("Access path missing closing bracket: "+e),i&&Fe("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Hxe(e,t,n){const i=YH(e);return e=i.length===1?i[0]:e,Fh(Pxe(i),[e],e)}Hxe("id");Fh(e=>e,[],"identity");Fh(()=>0,[],"zero");Fh(()=>1,[],"one");Fh(()=>!0,[],"true");Fh(()=>!1,[],"false");var _n=Array.isArray;function wt(e){return e===Object(e)}const wF=e=>e!=="__proto__";function Gxe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=Yxe(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;XH(i,a,r[a],s)}return i},{})}function XH(e,t,n,i){if(!wF(t))return;let r,a;if(wt(n)&&!_n(n)){a=wt(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?XH(a,r,n[r]):wF(r)&&(a[r]=n[r])}else e[t]=n}function Yxe(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function r0(e){return e[e.length-1]}function Jn(e){return e!=null?_n(e)?e:[e]:[]}function Pt(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function tr(e,t){return Object.hasOwn(e,t)}function la(e){return typeof e=="string"}function Ne(e){return _n(e)?"["+e.map(Ne)+"]":wt(e)||la(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}const Xxe="view",Wb="[",Qb="]",VH="{",WH="}",Vxe=":",QH=",",Wxe="@",Qxe=">",Zxe=/[[\]{}]/,Kxe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let ZH,KH;function Wu(e,t,n){return ZH=t||Xxe,KH=n||Kxe,JH(e.trim()).map(mM)}function Jxe(e){return KH[e]}function a0(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function JH(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=a0(e,r,QH,Wb+VH,Qb+WH),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function mM(e){return e[0]==="["?e2e(e):t2e(e)}function e2e(e){const t=e.length;let n=1,i;if(n=a0(e,n,Qb,Wb,Qb),n===t)throw"Empty between selector: "+e;if(i=JH(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Qxe)throw"Expected '>' after between selector: "+e;i=i.map(mM);const r=mM(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function t2e(e){const t={source:ZH},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,c;if(e[s-1]===WH){if(o=e.lastIndexOf(VH),o>=0){try{i=n2e(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===Wxe&&(r=++o),l=a0(e,o,Vxe),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=a0(e,o,Wb),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),c=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=a0(e,o,Qb),o===s)throw"Unmatched left bracket: "+e;if(c.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==Wb)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||Zxe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Jxe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),c!=null&&(t.filter=c),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function n2e(e){const t=e.split(QH);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function i2e(e){return wt(e)?e:{type:e||"pad"}}const hp=e=>+e||0,r2e=e=>({top:e,bottom:e,left:e,right:e});function a2e(e){return wt(e)?e.signal?e:{top:hp(e.top),bottom:hp(e.bottom),left:hp(e.left),right:hp(e.right)}:r2e(hp(e))}const An=e=>wt(e)&&!_n(e)?Pt({},e):{value:e};function _F(e,t,n,i){return n!=null?(wt(n)&&!_n(n)||_n(n)&&n.length&&wt(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function In(e,t,n){for(const i in t)_F(e,i,t[i]);for(const i in n)_F(e,i,n[i],"update")}function Lh(e,t,n){for(const i in t)n&&tr(n,i)||(e[i]=Pt(e[i]||{},t[i]));return e}function ed(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const XD="mark",VD="frame",WD="scope",s2e="axis",o2e="axis-domain",u2e="axis-grid",l2e="axis-label",c2e="axis-tick",f2e="axis-title",d2e="legend",h2e="legend-band",g2e="legend-entry",p2e="legend-gradient",eG="legend-label",m2e="legend-symbol",y2e="legend-title",v2e="title",b2e="title-text",x2e="title-subtitle";function S2e(e,t,n,i,r){const a={},s={};let o,l,c,d;l="lineBreak",t==="text"&&r[l]!=null&&!ed(l,e)&&nA(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===VD?r.group:n===XD?Pt({},r.mark,r[t]):null;for(l in d)c=ed(l,e)||(l==="fill"||l==="stroke")&&(ed("fill",e)||ed("stroke",e)),c||nA(a,l,d[l]);Jn(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)ed(y,e)||nA(a,y,p[y])}),e=Pt({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=Pt(s,e.enter),o&&(e.update=Pt(o,e.update)),e}function nA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const tG=e=>la(e)?Ne(e):e.signal?`(${e.signal})`:nG(e);function C2(e){if(e.gradient!=null)return w2e(e);let t=e.signal?`(${e.signal})`:e.color?E2e(e.color):e.field!=null?nG(e.field):e.value!==void 0?Ne(e.value):void 0;return e.scale!=null&&(t=_2e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Ev(e.exponent)})`),e.mult!=null&&(t+=`*${Ev(e.mult)}`),e.offset!=null&&(t+=`+${Ev(e.offset)}`),e.round&&(t=`round(${t})`),t}const Fy=(e,t,n,i)=>`(${e}(${[t,n,i].map(C2).join(",")})+'')`;function E2e(e){return e.c?Fy("hcl",e.h,e.c,e.l):e.h||e.s?Fy("hsl",e.h,e.s,e.l):e.l||e.a?Fy("lab",e.l,e.a,e.b):e.r||e.g||e.b?Fy("rgb",e.r,e.g,e.b):null}function w2e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ne(n));for(;t.length&&r0(t)==null;)t.pop();return t.unshift(tG(e.gradient)),`gradient(${t.join(",")})`}function Ev(e){return wt(e)?"("+C2(e)+")":e}function nG(e){return iG(wt(e)?e:{datum:e})}function iG(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):Fe("Invalid field reference: "+Ne(e));return e.signal||(i=la(i)?YH(i).map(Ne).join("]["):iG(i)),t+"["+i+"]"}function _2e(e,t){const n=tG(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Ev(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function A2e(e){let t="";return e.forEach(n=>{const i=C2(n);t+=n.test?`(${n.test})?${i}:`:i}),r0(t)===":"&&(t+="null"),t}function rG(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=S2e(e,t,n,i,r.config);for(const o in e)s[o]=$2e(e[o],t,a,r);return a}function $2e(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=C2e(M2e(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function M2e(e){return _n(e)?A2e(e):C2(e)}function C2e(e,t,n,i){const r=ts(e,t);return r.$fields.forEach(a=>i[a]=1),Pt(n,r.$params),r.$expr}const T2e="outer",D2e=["value","update","init","react","bind"];function AF(e,t){Fe(e+' for "outer" push: '+Ne(t))}function aG(e,t){const n=e.name;if(e.push===T2e)t.signals[n]||AF("No prior signal definition",n),D2e.forEach(i=>{e[i]!==void 0&&AF("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function yM(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function T2(e,t,n,i){return new yM(e,t,n,i)}function Zb(e,t){return T2("operator",e,t)}function Ee(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function U0(e,t){return t?{$field:e,$name:t}:{$field:e}}const vM=U0("key");function $F(e,t){return{$compare:e,$order:t}}function k2e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const O2e="ascending",N2e="descending";function R2e(e){return wt(e)?(e.order===N2e?"-":"+")+D2(e.op,e.field):""}function D2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const QD="scope",bM="view";function fn(e){return e&&e.signal}function z2e(e){return e&&e.expr}function wv(e){if(fn(e))return!0;if(wt(e)){for(const t in e)if(wv(e[t]))return!0}return!1}function Wr(e,t){return e??t}function rc(e){return e&&e.signal||e}const MF="timer";function B0(e,t){return(e.merge?L2e:e.stream?U2e:e.type?B2e:Fe("Invalid stream specification: "+Ne(e)))(e,t)}function F2e(e){return e===QD?bM:e||bM}function L2e(e,t){const n=e.merge.map(r=>B0(r,t)),i=ZD({merge:n},e,t);return t.addStream(i).id}function U2e(e,t){const n=B0(e.stream,t),i=ZD({stream:n},e,t);return t.addStream(i).id}function B2e(e,t){let n;e.type===MF?(n=t.event(MF,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(F2e(e.source),e.type);const i=ZD({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function ZD(e,t,n){let i=t.between;return i&&(i.length!==2&&Fe('Stream "between" parameter must have 2 entries: '+Ne(t)),e.between=[B0(i[0],n),B0(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(j2e(t.marktype,t.markname,t.markrole)),t.source===QD&&i.push("inScope(event.item)"),i.length&&(e.filter=ts("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function j2e(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const P2e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function I2e(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||Fe("Signal update missing events specification."),la(a)&&(a=Wu(a,t.isSubscope()?QD:bM)),a=Jn(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[H2e(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&Fe("Signal encode and update are mutually exclusive."),s="encode(item(),"+Ne(i)+")"),r.update=la(s)?ts(s,t):s.expr!=null?ts(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:P2e,$params:{$value:t.signalRef(s.signal)}}:Fe("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(Pt(q2e(l,t),r)))}function q2e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):B0(e,t)}}function H2e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function G2e(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?Fe("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=ts(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>I2e(r,t,n.id))}const vt=e=>(t,n,i)=>T2(e,n,t||void 0,i),sG=vt("aggregate"),Y2e=vt("axisticks"),oG=vt("bound"),ma=vt("collect"),CF=vt("compare"),X2e=vt("datajoin"),uG=vt("encode"),V2e=vt("expression"),W2e=vt("facet"),Q2e=vt("field"),Z2e=vt("key"),K2e=vt("legendentries"),J2e=vt("load"),eSe=vt("mark"),tSe=vt("multiextent"),nSe=vt("multivalues"),iSe=vt("overlap"),rSe=vt("params"),lG=vt("prefacet"),aSe=vt("projection"),sSe=vt("proxy"),oSe=vt("relay"),cG=vt("render"),uSe=vt("scale"),Pc=vt("sieve"),lSe=vt("sortitems"),fG=vt("viewlayout"),cSe=vt("values");let fSe=0;const dG={min:"min",max:"max",count:"sum"};function dSe(e,t){const n=e.type||"linear";$j(n)||Fe("Unrecognized scale type: "+Ne(n)),t.addScale(e.name,{type:n,domain:void 0})}function hSe(e,t){const n=t.getScale(e.name).params;let i;n.domain=hG(e.domain,e,t),e.range!=null&&(n.range=pG(e,t,n)),e.interpolate!=null&&wSe(e.interpolate,n),e.nice!=null&&(n.nice=ESe(e.nice,t)),e.bins!=null&&(n.bins=SSe(e.bins,t));for(i in e)tr(n,i)||i==="name"||(n[i]=Tr(e[i],t))}function Tr(e,t){return wt(e)?e.signal?t.signalRef(e.signal):Fe("Unsupported object: "+Ne(e)):e}function _v(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Tr(n,t))}function k2(e){Fe("Can not find data set: "+Ne(e))}function hG(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Fe("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(_n(e)?gSe:e.fields?mSe:pSe)(e,t,n)}function gSe(e,t,n){return e.map(i=>Tr(i,n))}function pSe(e,t,n){const i=n.getData(e.data);return i||k2(e.data),Od(t.type)?i.valuesRef(n,e.field,gG(e.sort,!1)):Tj(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function mSe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=la(s)?{data:i,field:s}:_n(s)||s.signal?ySe(s,n):s,a.push(s),a),[]);return(Od(t.type)?vSe:Tj(t.type)?bSe:xSe)(e,n,r)}function ySe(e,t){const n="_:vega:_"+fSe++,i=ma({});if(_n(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Ne(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Pc({})]),{data:n,field:"data"}}function vSe(e,t,n){const i=gG(e.sort,!0);let r,a;const s=n.map(c=>{const d=t.getData(c.data);return d||k2(c.data),d.countsRef(t,c.field,i)}),o={groupby:vM,pulse:s};i&&(r=i.op||"count",a=i.field?D2(r,i.field):"count",o.ops=[dG[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(sG(o));const l=t.add(ma({pulse:Ee(r)}));return a=t.add(cSe({field:vM,sort:t.sortRef(i),pulse:Ee(l)})),Ee(a)}function gG(e,t){return e&&(!e.field&&!e.op?wt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Fe("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!dG[e.op]&&Fe("Multiple domain scales can not be sorted using "+e.op)),e}function bSe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||k2(r.data),a.domainRef(t,r.field)});return Ee(t.add(nSe({values:i})))}function xSe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||k2(r.data),a.extentRef(t,r.field)});return Ee(t.add(tSe({extents:i})))}function SSe(e,t){return e.signal||_n(e)?_v(e,t):t.objectProperty(e)}function ESe(e,t){return e.signal?t.signalRef(e.signal):wt(e)?{interval:Tr(e.interval),step:Tr(e.step)}:Tr(e)}function wSe(e,t){t.interpolate=Tr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Tr(e.gamma))}function pG(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(la(r)){if(i&&tr(i,r))return e=Pt({},e,{range:i[r]}),pG(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Od(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Fe("Unrecognized scale range value: "+Ne(r))}else if(r.scheme){n.scheme=_n(r.scheme)?_v(r.scheme,t):Tr(r.scheme,t),r.extent&&(n.schemeExtent=_v(r.extent,t)),r.count&&(n.schemeCount=Tr(r.count,t));return}else if(r.step){n.rangeStep=Tr(r.step,t);return}else{if(Od(e.type)&&!_n(r))return hG(r,e,t);_n(r)||Fe("Unsupported range type: "+Ne(r))}return r.map(a=>(_n(a)?_v:Tr)(a,t))}function _Se(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=xM(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=xM(n[r],r,t));t.addProjection(e.name,i)}function xM(e,t,n){return _n(e)?e.map(i=>xM(i,t,n)):wt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Fe("Unsupported parameter object: "+Ne(e)):e}const ya="top",Uh="left",Bh="right",Fu="bottom",mG="center",ASe="vertical",$Se="start",MSe="middle",CSe="end",SM="index",KD="label",TSe="offset",Pd="perc",DSe="perc2",kr="value",_m="guide-label",JD="guide-title",kSe="group-title",OSe="group-subtitle",TF="symbol",Av="gradient",EM="discrete",wM="size",NSe="shape",RSe="fill",zSe="stroke",FSe="strokeWidth",LSe="strokeDash",USe="opacity",ek=[wM,NSe,RSe,zSe,FSe,LSe,USe],Am={name:1,style:1,interactive:1},We={value:0},Or={value:1},O2="group",yG="rect",tk="rule",BSe="symbol",Ic="text";function j0(e){return e.type=O2,e.interactive=e.interactive||!1,e}function Ii(e,t){const n=(i,r)=>Wr(e[i],Wr(t[i],r));return n.isVertical=i=>ASe===Wr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Wr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Wr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Wr(e.columns,Wr(t.columns,+n.isVertical(!0))),n}function vG(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function jSe(e,t,n){const i=t.config.style[n];return i&&i[e]}function N2(e,t,n){return`item.anchor === '${$Se}' ? ${e} : item.anchor === '${CSe}' ? ${t} : ${n}`}const nk=N2(Ne(Uh),Ne(Bh),Ne(mG));function PSe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},wt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function bG(e,t){return t?e?wt(e)?Object.assign({},e,{offset:bG(e.offset,t)}):{value:e,offset:t}:t:e}function hr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Lh(e.encode,t,Am)):e.interactive=!1,e}function ISe(e,t,n,i){const r=Ii(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,c,d,h,p;a?(c=[0,1],d=[0,0],h=s,p=o):(c=[0,0],d=[1,0],h=o,p=s);const y={enter:l={opacity:We,x:We,y:We,width:An(h),height:An(p)},update:Pt({},l,{opacity:Or,fill:{gradient:t,start:c,stop:d}}),exit:{opacity:We}};return In(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),hr({type:yG,role:p2e,encode:y},i)}function qSe(e,t,n,i,r){const a=Ii(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let c,d,h,p,y="";s?(c="y",h="y2",d="x",p="width",y="1-"):(c="x",h="x2",d="y",p="height");const v={opacity:We,fill:{scale:t,field:kr}};v[c]={signal:y+"datum."+Pd,mult:l},v[d]=We,v[h]={signal:y+"datum."+DSe,mult:l},v[p]=An(o);const b={enter:v,update:Pt({},v,{opacity:Or}),exit:{opacity:We}};return In(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),hr({type:yG,role:h2e,key:kr,from:r,encode:b},i)}const HSe=`datum.${Pd}<=0?"${Uh}":datum.${Pd}>=1?"${Bh}":"${mG}"`,GSe=`datum.${Pd}<=0?"${Fu}":datum.${Pd}>=1?"${ya}":"${MSe}"`;function DF(e,t,n,i){const r=Ii(e,t),a=r.isVertical(),s=An(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),c,d,h,p,y="";const v={enter:c={opacity:We},update:d={opacity:Or,text:{field:KD}},exit:{opacity:We}};return In(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Wr(e.labelLimit,t.gradientLabelLimit)}),a?(c.align={value:"left"},c.baseline=d.baseline={signal:GSe},h="y",p="x",y="1-"):(c.align=d.align={signal:HSe},c.baseline={value:"top"},h="x",p="y"),c[h]=d[h]={signal:y+"datum."+Pd,mult:o},c[p]=d[p]=s,s.offset=Wr(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+SM}:void 0,hr({type:Ic,role:eG,style:_m,key:kr,from:i,encode:v,overlap:l},n)}function YSe(e,t,n,i,r){const a=Ii(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,c=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${TSe} : datum.${wM}`,y=c?An(c):{field:wM},v=`datum.${SM}`,b=`max(1, ${r})`;let S,w,_,A,$;y.mult=.5,S={enter:w={opacity:We,x:{signal:p,mult:.5,offset:d},y},update:_={opacity:Or,x:w.x,y:w.y},exit:{opacity:We}};let M=null,D=null;e.fill||(M=t.symbolBaseFillColor,D=t.symbolBaseStrokeColor),In(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",D),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),ek.forEach(P=>{e[P]&&(_[P]=w[P]={scale:e[P],field:kr})});const T=hr({type:BSe,role:m2e,key:kr,from:h,clip:c?!0:void 0,encode:S},n.symbols),O=An(d);O.offset=a("labelOffset"),S={enter:w={opacity:We,x:{signal:p,offset:O},y},update:_={opacity:Or,text:{field:KD},x:w.x,y:w.y},exit:{opacity:We}},In(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const z=hr({type:Ic,role:eG,style:_m,key:kr,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!c},width:We,height:c?An(c):We,opacity:We},exit:{opacity:We},update:_={opacity:Or,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,_.row.signal=`${v}%${A}`,_.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(_.row.signal=`floor(${v} / ${b})`,_.column.signal=`${v} % ${b}`,$={field:v}),_.column.signal=`(${r})?${_.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:SM}},j0({role:WD,from:i,encode:Lh(S,s,Am),marks:[T,z],name:l,interactive:o,sort:$})}function XSe(e,t){const n=Ii(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ik='item.orient === "left"',rk='item.orient === "right"',R2=`(${ik} || ${rk})`,VSe=`datum.vgrad && ${R2}`,WSe=N2('"top"','"bottom"','"middle"'),QSe=N2('"right"','"left"','"center"'),ZSe=`datum.vgrad && ${rk} ? (${QSe}) : (${R2} && !(datum.vgrad && ${ik})) ? "left" : ${nk}`,KSe=`item._anchor || (${R2} ? "middle" : "start")`,JSe=`${VSe} ? (${ik} ? -90 : 90) : 0`,eEe=`${R2} ? (datum.vgrad ? (${rk} ? "bottom" : "top") : ${WSe}) : "top"`;function tEe(e,t,n,i){const r=Ii(e,t),a={enter:{opacity:We},update:{opacity:Or,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:We}};return In(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:KSe},angle:{signal:JSe},align:{signal:ZSe},baseline:{signal:eEe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),hr({type:Ic,role:y2e,style:JD,from:i,encode:a},n)}function nEe(e,t){let n;return wt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+kF(e.path)+")":e.sphere&&(n="geoShape("+kF(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function kF(e){return wt(e)&&e.signal?e.signal:Ne(e)}function xG(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===O2?WD:t||XD}function iEe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||xG(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function rEe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ak(e,t){const n=mU(e.type);n||Fe("Unrecognized transform type: "+Ne(e.type));const i=T2(n.type.toLowerCase(),null,SG(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function SG(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=aEe(s,t,n)}return i}function aEe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return sEe(e,t,n);if(r===void 0){e.required&&Fe("Missing required "+Ne(t.type)+" parameter: "+Ne(e.name));return}else{if(i==="param")return oEe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!fn(r)?r.map(a=>OF(e,a,n)):OF(e,r,n)}function OF(e,t,n){const i=e.type;if(fn(t))return RF(i)?Fe("Expression references can not be signals."):iA(i)?n.fieldRef(t):zF(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||iA(i);return r&&uEe(t)?n.exprRef(t.expr,t.as):r&&lEe(t)?U0(t.field,t.as):RF(i)?ts(t,n):cEe(i)?Ee(n.getData(t).values):iA(i)?U0(t):zF(i)?n.compareRef(t):t}}function sEe(e,t,n){return la(t.from)||Fe('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function oEe(e,t,n){const i=t[e.name];return e.array?(_n(i)||Fe("Expected an array of sub-parameters. Instead: "+Ne(i)),i.map(r=>NF(e,r,n))):NF(e,i,n)}function NF(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||Fe("Unsupported parameter: "+Ne(t));const a=Pt(SG(r,t,n),r.key);return Ee(n.add(rSe(a)))}const uEe=e=>e&&e.expr,lEe=e=>e&&e.field,cEe=e=>e==="data",RF=e=>e==="expr",iA=e=>e==="field",zF=e=>e==="compare";function fEe(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||Fe("Only group marks can be faceted."),i.field!=null?s=o=$v(i,n):(e.data?o=Ee(n.getData(e.data).aggregate):(a=ak(Pt({type:"aggregate",groupby:Jn(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=$v(i,n),s=o=Ee(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Ee(n.add(ma(null,[{}]))),s||(s=$v(e,n)),{key:r,pulse:s,parent:o}}function $v(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ee(t.getData(e.data).output)}function Sc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Sc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ee(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new Sc(e,a,r,i,s)};function EG(e){return la(e)?e:null}function FF(e,t,n){const i=D2(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function gp(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=R2e(a);let c=EG(r),d,h;if(c!=null&&(e=t.scope,c=c+(l?"|"+l:""),d=o[c]),!d){const p=a?{field:vM,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Ee(t.output)};l&&(p.sort=e.sortRef(a)),h=e.add(T2(i,void 0,p)),s&&(t.index[r]=h),d=Ee(h),c!=null&&(o[c]=d)}return d}Sc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=EG(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&FF(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ee(i.output)},n&&n.field&&FF(e,l,n),o=e.add(sG(l)),s=e.add(ma({pulse:Ee(o)})),s={agg:o,ref:Ee(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Ee(this.values)},extentRef(e,t){return gp(e,this,"extent","extent",t,!1)},domainRef(e,t){return gp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return gp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return gp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return gp(e,this,"indata","tupleindex",t,!0,!0)}};function dEe(e,t,n){const i=e.from.facet,r=i.name,a=$v(i,t);let s;i.name||Fe("Facet must have a name: "+Ne(i)),i.data||Fe("Facet must reference a data set: "+Ne(i)),i.field?s=t.add(lG({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(W2e({key:t.keyRef(i.groupby),group:Ee(t.proxy(n.parent)),pulse:a})):Fe("Facet must specify groupby or field: "+Ne(i));const o=t.fork(),l=o.add(ma()),c=o.add(Pc({pulse:Ee(l)}));o.addData(r,new Sc(o,l,l,c)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function hEe(e,t,n){const i=t.add(lG({pulse:n.pulse})),r=t.fork();r.add(Pc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function wG(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(Zb()),c="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=ts(c,t);l.update=d.$expr,l.params=d.$params}function z2(e,t){const n=xG(e),i=e.type===O2,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===WD||n===VD,o,l,c,d,h,p,y;const v=n===XD||s||r,b=fEe(e.from,i,t);l=t.add(X2e({key:b.key||(e.key?U0(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Ee(l);l=c=t.add(ma({pulse:S})),l=t.add(eSe({markdef:iEe(e),interactive:rEe(e.interactive,t),clip:nEe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ee(l)}));const w=Ee(l);l=d=t.add(uG(rG(e.encode,e.type,n,e.style,t,{mod:!1,pulse:w}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(D=>{const T=ak(D,t),O=T.metadata;(O.generates||O.changes)&&Fe("Mark transforms should not generate new data."),O.nomod||(d.params.mod=!0),T.params.pulse=Ee(l),t.add(l=T)}),e.sort&&(l=t.add(lSe({sort:t.compareRef(e.sort),pulse:Ee(l)})));const _=Ee(l);(r||s)&&(s=t.add(fG({layout:t.objectProperty(e.layout),legends:t.legends,mark:w,pulse:_})),p=Ee(s));const A=t.add(oG({mark:w,pulse:p||_}));y=Ee(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(_,p||y,S),r?dEe(e,t,b):v?hEe(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=gEe(a,y,t));const $=t.add(cG({pulse:y})),M=t.add(Pc({pulse:Ee($)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Sc(t,c,$,M)),e.on&&e.on.forEach(D=>{(D.insert||D.remove||D.toggle)&&Fe("Marks only support modify triggers."),wG(D,t,h)}))}function gEe(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:fn(a)?n.signalRef(a.signal):a,method:fn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=fn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Ee(n.add(iSe(s)))}function pEe(e,t){const n=t.config.legend,i=e.encode||{},r=Ii(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,c={};let d=0,h,p,y;ek.forEach(A=>e[A]?(c[A]=e[A],d=d||e[A]):0),d||Fe("Missing valid scale for legend.");const v=mEe(e,t.scaleType(d)),b={title:e.title!=null,scales:c,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Ee(t.add(ma(null,[b]))),w={enter:{x:{value:0},y:{value:0}}},_=Ee(t.add(K2e(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===Av?(y=[ISe(e,d,n,i.gradient),DF(e,n,i.labels,_)],p.count=p.count||t.signalRef(`max(2,2*floor((${rc(r.gradientLength())})/100))`)):v===EM?y=[qSe(e,d,n,i.gradient,_),DF(e,n,i.labels,_)]:(h=XSe(e,n),y=[YSe(e,n,i,_,rc(h.columns))],p.size=bEe(e,t,y[0].marks)),y=[j0({role:g2e,from:S,encode:w,marks:y,layout:h,interactive:o})],b.title&&y.push(tEe(e,n,i.title,S)),z2(j0({role:d2e,from:S,encode:Lh(vEe(r,e,n),a,Am),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function mEe(e,t){let n=e.type||TF;return!e.type&&yEe(e)===1&&(e.fill||e.stroke)&&(n=V3(t)?Av:f$(t)?EM:TF),n!==Av?n:f$(t)?EM:Av}function yEe(e){return ek.reduce((t,n)=>t+(e[n]?1:0),0)}function vEe(e,t,n){const i={enter:{},update:{}};return In(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function bEe(e,t,n){const i=rc(LF("size",e,n)),r=rc(LF("strokeWidth",e,n)),a=rc(xEe(n[1].encode,t,_m));return ts(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function LF(e,t,n){return t[e]?`scale("${t[e]}",datum)`:vG(e,n[0].encode)}function xEe(e,t,n){return vG("fontSize",e)||jSe("fontSize",t,n)}const SEe=`item.orient==="${Uh}"?-90:item.orient==="${Bh}"?90:0`;function EEe(e,t){e=la(e)?{text:e}:e;const n=Ii(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],c={},d=Ee(t.add(ma(null,[c])));return l.push(AEe(e,n,wEe(e),d)),e.subtitle&&l.push($Ee(e,n,i.subtitle,d)),z2(j0({role:v2e,from:d,encode:_Ee(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function wEe(e){const t=e.encode;return t&&t.title||Pt({name:e.name,interactive:e.interactive,style:e.style},t)}function _Ee(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:nk},angle:{signal:SEe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Lh(n,t,Am)}function AEe(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Ic,role:b2e,style:kSe,from:i,encode:s},n)}function $Ee(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Ic,role:x2e,style:OSe,from:i,encode:s},n)}function MEe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(ak(i,t))}),e.on&&e.on.forEach(i=>{wG(i,t,e.name)}),t.addDataPipeline(e.name,CEe(e,t,n))}function CEe(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,c,d,h;for(e.values?fn(e.values)||wv(e.format)?(i.push(UF(t,e)),i.push(r=Al())):i.push(r=Al({$ingest:e.values,$format:e.format})):e.url?wv(e.url)||wv(e.format)?(i.push(UF(t,e)),i.push(r=Al())):i.push(r=Al({$request:e.url,$format:e.format})):e.source&&(r=o=Jn(e.source).map(p=>Ee(t.getData(p).output)),i.push(null)),l=0,c=n.length;l<c;++l)d=n[l],h=d.metadata,!r&&!h.source&&i.push(r=Al()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(c=o.length-1,i[0]=oSe({derive:a,pulse:c?o:o[0]}),(a||c)&&i.splice(1,0,Al())),r||i.push(Al()),i.push(Pc({})),i}function Al(e){const t=ma({},e);return t.metadata={source:!0},t}function UF(e,t){return J2e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const _G=e=>e===Fu||e===ya,F2=(e,t,n)=>fn(e)?OEe(e.signal,t,n):e===Uh||e===ya?t:n,$n=(e,t,n)=>fn(e)?DEe(e.signal,t,n):_G(e)?t:n,aa=(e,t,n)=>fn(e)?kEe(e.signal,t,n):_G(e)?n:t,AG=(e,t,n)=>fn(e)?NEe(e.signal,t,n):e===ya?{value:t}:{value:n},TEe=(e,t,n)=>fn(e)?REe(e.signal,t,n):e===Bh?{value:t}:{value:n},DEe=(e,t,n)=>$G(`${e} === '${ya}' || ${e} === '${Fu}'`,t,n),kEe=(e,t,n)=>$G(`${e} !== '${ya}' && ${e} !== '${Fu}'`,t,n),OEe=(e,t,n)=>sk(`${e} === '${Uh}' || ${e} === '${ya}'`,t,n),NEe=(e,t,n)=>sk(`${e} === '${ya}'`,t,n),REe=(e,t,n)=>sk(`${e} === '${Bh}'`,t,n),$G=(e,t,n)=>(t=t!=null?An(t):t,n=n!=null?An(n):n,BF(t)&&BF(n)?(t=t?t.signal||Ne(t.value):null,n=n?n.signal||Ne(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pt({test:e},t)].concat(n||[])),BF=e=>e==null||Object.keys(e).length===1,sk=(e,t,n)=>({signal:`${e} ? (${od(t)}) : (${od(n)})`}),zEe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Uh}' ? (${od(i)}) : `:"")+(n!=null?`${e} === '${Fu}' ? (${od(n)}) : `:"")+(r!=null?`${e} === '${Bh}' ? (${od(r)}) : `:"")+(t!=null?`${e} === '${ya}' ? (${od(t)}) : `:"")+"(null)"}),od=e=>fn(e)?e.signal:e==null?null:Ne(e),FEe=(e,t)=>t===0?0:fn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},pd=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Xf(e,t,n,i){let r;if(t&&tr(t,e))return t[e];if(tr(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[JD][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[_m][r]}return null}function jF(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function LEe(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,c;if(fn(s)){const h=jF([n.axisX,n.axisY]),p=jF([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(c of h)o[c]=$n(s,Xf(c,n.axisX,r,i),Xf(c,n.axisY,r,i));l={};for(c of p)l[c]=zEe(s.signal,Xf(c,n.axisTop,r,i),Xf(c,n.axisBottom,r,i),Xf(c,n.axisLeft,r,i),Xf(c,n.axisRight,r,i))}else o=s===ya||s===Fu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?Pt({},r,o,l,a):r}function UEe(e,t,n,i){const r=Ii(e,t),a=e.orient;let s,o;const l={enter:s={opacity:We},update:o={opacity:Or},exit:{opacity:We}};In(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const c=PF(e,0),d=PF(e,1);return s.x=o.x=$n(a,c,We),s.x2=o.x2=$n(a,d),s.y=o.y=aa(a,c,We),s.y2=o.y2=aa(a,d),hr({type:tk,role:o2e,from:i,encode:l},n)}function PF(e,t){return{scale:e.scale,range:t}}function BEe(e,t,n,i,r){const a=Ii(e,t),s=e.orient,o=e.gridScale,l=F2(s,1,-1),c=jEe(e.offset,l);let d,h,p;const y={enter:d={opacity:We},update:p={opacity:Or},exit:h={opacity:We}};In(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:kr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=$n(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:l,offset:c}:{value:0,offset:c},w=o?{scale:o,range:1,mult:l,offset:c}:Pt(b,{mult:l,offset:c});return d.x=p.x=$n(s,v,S),d.y=p.y=aa(s,v,S),d.x2=p.x2=aa(s,w),d.y2=p.y2=$n(s,w),h.x=$n(s,v),h.y=aa(s,v),hr({type:tk,role:u2e,key:kr,from:i,encode:y},n)}function jEe(e,t){if(t!==1)if(!wt(e))e=fn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pt({},e);for(;n.mult!=null;)if(wt(n.mult))n=n.mult=Pt({},n.mult);else return n.mult=fn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function PEe(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=F2(o,-1,1);let c,d,h;const p={enter:c={opacity:We},update:h={opacity:Or},exit:d={opacity:We}};In(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=An(r);y.mult=l;const v={scale:e.scale,field:kr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=c.y=$n(o,We,v),h.y2=c.y2=$n(o,y),d.x=$n(o,v),h.x=c.x=aa(o,We,v),h.x2=c.x2=aa(o,y),d.y=aa(o,v),hr({type:tk,role:c2e,key:kr,from:i,encode:p},n)}function rA(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function IEe(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=e.scale,c=F2(o,-1,1),d=rc(s("labelFlush")),h=rc(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=An(r);S.mult=c,S.offset=An(s("labelPadding")||0),S.offset.mult=c;const w={scale:l,field:kr,band:.5,offset:bG(a.offset,s("labelOffset"))},_=$n(o,v?rA(l,d,'"left"','"right"','"center"'):{value:"center"},TEe(o,"left","right")),A=$n(o,AG(o,"bottom","top"),v?rA(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=rA(l,d,`-(${h})`,h,0);v=v&&h;const M={opacity:We,x:$n(o,w,S),y:aa(o,w,S)},D={enter:M,update:b={opacity:Or,text:{field:KD},x:M.x,y:M.y,align:_,baseline:A},exit:{opacity:We,x:M.x,y:M.y}};In(D,{dx:!p&&v?$n(o,$):null,dy:!y&&v?aa(o,$):null}),In(D,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const T=s("labelBound");let O=s("labelOverlap");return O=O||T?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:T?{scale:l,orient:o,tolerance:T}:null}:void 0,b.align!==_&&(b.align=pd(b.align,_)),b.baseline!==A&&(b.baseline=pd(b.baseline,A)),hr({type:Ic,role:l2e,style:_m,key:kr,from:i,encode:D,overlap:O},n)}function qEe(e,t,n,i){const r=Ii(e,t),a=e.orient,s=F2(a,-1,1);let o,l;const c={enter:o={opacity:We,anchor:An(r("titleAnchor",null)),align:{signal:nk}},update:l=Pt({},o,{opacity:Or,text:An(e.title)}),exit:{opacity:We}},d={signal:`lerp(range("${e.scale}"), ${N2(0,1,.5)})`};return l.x=$n(a,d),l.y=aa(a,d),o.angle=$n(a,We,FEe(s,90)),o.baseline=$n(a,AG(a,Fu,ya),{value:Fu}),l.angle=o.angle,l.baseline=o.baseline,In(c,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),HEe(r,a,c,n),c.update.align=pd(c.update.align,o.align),c.update.angle=pd(c.update.angle,o.angle),c.update.baseline=pd(c.update.baseline,o.baseline),hr({type:Ic,role:f2e,style:JD,from:i,encode:c},n)}function HEe(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=pd(An(o),n.update[l]),!1):!ed(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?An(s):$n(t,An(s),An(a))}function GEe(e,t){const n=LEe(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=Ii(e,n),c=PSe(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Ee(t.add(ma({},[d]))),p=Ee(t.add(Y2e({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(BEe(e,n,i.grid,p,c)),d.ticks&&(v=l("tickSize"),y.push(PEe(e,n,i.ticks,p,v,c))),d.labels&&(v=d.ticks?v:0,y.push(IEe(e,n,i.labels,p,v,c))),d.domain&&y.push(UEe(e,n,i.domain,h)),d.title&&y.push(qEe(e,n,i.title,h)),z2(j0({role:s2e,from:h,encode:Lh(YEe(l,e),r,Am),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function YEe(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),offset:e("offset")||0,position:Wr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function MG(e,t,n){const i=Jn(e.signals),r=Jn(e.scales);return n||i.forEach(a=>aG(a,t)),Jn(e.projections).forEach(a=>_Se(a,t)),r.forEach(a=>dSe(a,t)),Jn(e.data).forEach(a=>MEe(a,t)),r.forEach(a=>hSe(a,t)),(n||i).forEach(a=>G2e(a,t)),Jn(e.axes).forEach(a=>GEe(a,t)),Jn(e.marks).forEach(a=>z2(a,t)),Jn(e.legends).forEach(a=>pEe(a,t)),e.title&&EEe(e.title,t),t.parseLambdas(),t}const XEe=e=>Lh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function VEe(e,t){const n=t.config,i=Ee(t.root=t.add(Zb())),r=WEe(e,n);r.forEach(c=>aG(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ma()),s=t.add(uG(rG(XEe(e.encode),O2,VD,e.style,t,{pulse:Ee(a)}))),o=t.add(fG({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ee(s)}));t.operators.pop(),t.pushState(Ee(s),Ee(o),null),MG(e,t,r),t.operators.push(o);let l=t.add(oG({mark:i,pulse:Ee(o)}));return l=t.add(cG({pulse:Ee(l)})),l=t.add(Pc({pulse:Ee(l)})),t.addData("root",new Sc(t,a,a,l)),t}function pp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function WEe(e,t){const n=s=>Wr(e[s],t[s]),i=[pp("background",n("background")),pp("autosize",i2e(n("autosize"))),pp("padding",a2e(n("padding"))),pp("width",n("width")||0),pp("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return Jn(e.signals).forEach(s=>{tr(r,s.name)?s=Pt(r[s.name],s):i.push(s),a[s.name]=s}),Jn(t.signals).forEach(s=>{!tr(a,s.name)&&!tr(r,s.name)&&i.push(s)}),i}function CG(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function IF(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}CG.prototype=IF.prototype={parse(e){return MG(e,this)},fork(){return new IF(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof yM?Ee(e):e;return this.add(sSe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ee(this.add(Pc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ee(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return r0(this._parent)},encode(){return r0(this._encode)},lookup(){return r0(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(la(e))return U0(e,t);e.signal||Fe("Unsupported field reference: "+Ne(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ee(this.add(Q2e(r)))}return i},compareRef(e){let t=!1;const n=a=>fn(a)?(t=!0,this.signalRef(a.signal)):z2e(a)?(t=!0,this.exprRef(a.expr)):a,i=Jn(e.field).map(n),r=Jn(e.order).map(n);return t?Ee(this.add(CF({fields:i,orders:r}))):$F(i,r)},keyRef(e,t){let n=!1;const i=a=>fn(a)?(n=!0,Ee(r[a.signal])):a,r=this.signals;return e=Jn(e).map(i),n?Ee(this.add(Z2e({fields:e,flat:t}))):k2e(e,t)},sortRef(e){if(!e)return e;const t=D2(e.op,e.field),n=e.order||O2e;return n.signal?Ee(this.add(CF({fields:t,orders:this.signalRef(n.signal)}))):$F(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return tr(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Fe("Duplicate signal name: "+Ne(e));const n=t instanceof yM?t:this.add(Zb(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Fe("Unrecognized signal name: "+Ne(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ee(this.signals[e]):(tr(this.lambdas,e)||(this.lambdas[e]=this.add(Zb(null))),Ee(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=ts(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!wt(e)?e:this.signalRef(e.signal||ok(e))},exprRef(e,t){const n={expr:ts(e,this)};return t&&(n.expr.$name=t),Ee(this.add(V2e(n)))},addBinding(e,t){this.bindings||Fe("Nested signals do not support binding: "+Ne(e)),this.bindings.push(Pt({signal:e},t))},addScaleProj(e,t){tr(this.scales,e)&&Fe("Duplicate scale or projection name: "+Ne(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,uSe(t))},addProjection(e,t){this.addScaleProj(e,aSe(t))},getScale(e){return this.scales[e]||Fe("Unrecognized scale name: "+Ne(e)),this.scales[e]},scaleRef(e){return Ee(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return tr(this.data,e)&&Fe("Duplicate data set name: "+Ne(e)),this.data[e]=t},getData(e){return this.data[e]||Fe("Undefined data set name: "+Ne(e)),this.data[e]},addDataPipeline(e,t){return tr(this.data,e)&&Fe("Duplicate data set name: "+Ne(e)),this.addData(e,Sc.fromEntries(this,t))}};function ok(e){return(_n(e)?QEe:ZEe)(e)}function QEe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(wt(r)?r.signal||ok(r):Ne(r))}return n+"]"}function ZEe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+Ne(i)+":"+(wt(r)?r.signal||ok(r):Ne(r));return t+"}"}function KEe(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function JEe(e,t,n){return wt(e)||Fe("Input Vega specification must be an object."),t=Gxe(KEe(),t,e.config),VEe(e,new CG(t,n)).toRuntime()}var ewe="6.1.2";cC(Md,yre,wce,xfe,ghe,bge,f0e,zpe,S0e,K0e,yme,Dme);const twe=ewe,nwe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:rn,CanvasHandler:hm,CanvasRenderer:sb,DATE:Li,DAY:ei,DAYOFYEAR:Ka,Dataflow:cd,Debug:P7,Error:U7,EventStream:Ox,Gradient:Hj,GroupItem:t2,HOURS:cr,Handler:bT,HybridHandler:RP,HybridRenderer:E$,Info:j7,Item:e2,MILLISECONDS:oa,MINUTES:fr,MONTH:ni,Marks:dr,MultiPulse:CC,None:L7,Operator:xt,Parameters:kx,Pulse:vu,QUARTER:Fi,RenderType:cu,Renderer:dm,ResourceLoader:Qj,SECONDS:Nr,SVGHandler:SP,SVGRenderer:AT,SVGStringRenderer:NP,Scenegraph:hP,TIME_UNITS:vC,Transform:J,View:HH,WEEK:ln,Warn:B7,YEAR:jn,accessor:bo,accessorFields:z7,accessorName:sK,array:f0,ascending:lC,bandwidthNRD:zC,bin:$U,bootstrapCI:MU,boundClip:HP,boundContext:um,boundItem:y$,boundMark:lP,boundStroke:xo,changeset:Fc,clampRange:MK,codegenExpression:hH,compare:TK,constant:NK,cumulativeLogNormal:PC,cumulativeNormal:Rx,cumulativeUniform:GC,dayofyear:$L,debounce:RK,defaultLocale:wC,definition:mU,densityLogNormal:jC,densityNormal:FC,densityUniform:HC,domChild:un,domClear:Ar,domCreate:uu,domFind:vT,dotbin:CU,error:Wy,expressionFunction:Qt,extend:cC,extent:zK,extentIndex:FK,falsy:hK,fastmap:LK,field:aC,flush:UK,font:s2,fontFamily:fm,fontSize:os,format:Qy,formatLocale:Uv,formats:$C,hasOwnProperty:qs,id:lK,identity:sC,inferType:aU,inferTypes:sU,ingest:st,inherits:BK,inrange:jK,interpolate:W3,interpolateColors:Kx,interpolateRange:Dj,intersect:jP,intersectBoxLine:id,intersectPath:iT,intersectPoint:rT,intersectRule:Kj,isArray:px,isBoolean:Y7,isDate:X7,isFunction:bx,isIterable:PK,isNumber:V7,isObject:lc,isRegExp:IK,isString:Js,isTuple:Tx,key:qK,lerp:HK,lineHeight:Ou,loader:Mx,locale:iU,logger:pK,lruCache:YK,markup:_T,merge:XK,mergeConfig:oC,multiLineOffset:pT,one:fK,pad:VK,panLinear:yK,panLog:vK,panPow:bK,panSymlog:xK,parse:JEe,parseExpression:kD,parseSelector:Wu,path:Bx,pathCurves:eT,pathEqual:GP,pathParse:Nd,pathRectangle:Xj,pathRender:E0,pathSymbols:Yj,pathTrail:Vj,peek:ih,point:u2,projection:YT,quantileLogNormal:IC,quantileNormal:zx,quantileUniform:YC,quantiles:NC,quantizeInterpolator:kj,quarter:AK,quartiles:RC,get random(){return Rr},randomInteger:Sie,randomKDE:UC,randomLCG:xie,randomLogNormal:DU,randomMixture:kU,randomNormal:LC,randomUniform:OU,read:lU,regressionConstant:XC,regressionExp:RU,regressionLinear:VC,regressionLoess:LU,regressionLog:NU,regressionPoly:FU,regressionPow:zU,regressionQuad:WC,renderModule:l2,repeat:wp,resetDefaultLocale:ine,resetSVGDefIds:Rle,responseType:uU,runtimeContext:kH,sampleCurve:Lx,sampleLogNormal:BC,sampleNormal:Nx,sampleUniform:qC,scale:it,sceneEqual:$T,sceneFromJSON:fP,scenePickVisit:Kv,sceneToJSON:cP,sceneVisit:ua,sceneZOrder:aT,scheme:Q3,serializeXML:TP,setHybridRendererOptions:Dle,setRandom:vie,span:WK,splitAccessPath:rC,stringValue:ud,textMetrics:sr,timeBin:qL,timeFloor:NL,timeFormatLocale:g0,timeInterval:ch,timeOffset:FL,timeSequence:BL,timeUnitSpecifier:AL,timeUnits:bC,toBoolean:QK,toDate:KK,toNumber:uC,toSet:eJ,toString:JK,transform:yU,transforms:Md,truncate:tJ,truthy:dK,tupleid:we,typeParsers:JA,utcFloor:RL,utcInterval:fh,utcOffset:LL,utcSequence:jL,utcdayofyear:TL,utcquarter:$K,utcweek:DL,version:twe,visitArray:nJ,week:ML,writeConfig:mx,zero:cK,zoomLinear:SK,zoomLog:EK,zoomPow:wK,zoomSymlog:_K},Symbol.toStringTag,{value:"Module"}));function jh(e,t,n){return e.fields=t||[],e.fname=n,e}function iwe(e){return e.length===1?rwe(e[0]):awe(e)}const rwe=e=>function(t){return t[e]},awe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function aA(e){throw Error(e)}function swe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||aA("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&aA("Access path missing closing bracket: "+e),i&&aA("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function owe(e,t,n){const i=swe(e);return e=i.length===1?i[0]:e,jh(iwe(i),[e],e)}owe("id");jh(e=>e,[],"identity");jh(()=>0,[],"zero");jh(()=>1,[],"one");jh(()=>!0,[],"true");jh(()=>!1,[],"false");var uwe=Array.isArray;function qF(e){return e===Object(e)}const lwe=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function cwe(e){return typeof e=="string"}function fwe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var dwe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},hwe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},gwe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const pwe=Array.prototype.slice,$l=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,pwe.call(t,1))},mwe=(e,t,n,i,r,a,s)=>new Date(e,t||0,n??1,i||0,r||0,a||0,s||0);var ywe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:mwe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return $l("join",arguments)},indexof:function(){return $l("indexOf",arguments)},lastindexof:function(){return $l("lastIndexOf",arguments)},slice:function(){return $l("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(lwe),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return $l("substring",arguments,String)},split:function(){return $l("split",arguments,String)},replace:function(){return $l("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const vwe=["view","item","group","xy","x","y"],_M=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&_M.add(setImmediate);const bwe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:dwe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),_M.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||ywe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>hwe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>gwe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,_M.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function mp(e,t,n,i,r,a){const s=o=>bwe[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,vwe.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var xwe={operator(e,t){const n=t.ast,i=e.functions;return r=>mp(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>mp(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>mp(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return mp(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let c=0,d;for(const h in i)d=mp(i[h].ast,r,o,l,void 0,s),s[h]!==d&&(s[h]=d,c=1);return n!=="rule"&&fwe(s,i,a),c}}};function Ph(e,t,n){return e.fields=t||[],e.fname=n,e}function Swe(e){return e.length===1?Ewe(e[0]):wwe(e)}const Ewe=e=>function(t){return t[e]},wwe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function sA(e){throw Error(e)}function qc(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||sA("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&sA("Access path missing closing bracket: "+e),i&&sA("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function _we(e,t,n){const i=qc(e);return e=i.length===1?i[0]:e,Ph(Swe(i),[e],e)}_we("id");const Awe=Ph(e=>e,[],"identity");Ph(()=>0,[],"zero");Ph(()=>1,[],"one");Ph(()=>!0,[],"true");Ph(()=>!1,[],"false");function $we(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Mwe=1,TG=2,Cwe=3,Twe=4;function Dwe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$we,i=e;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=Mwe&&n("error","ERROR",arguments),this},warn(){return i>=TG&&n("warn","WARN",arguments),this},info(){return i>=Cwe&&n("log","INFO",arguments),this},debug(){return i>=Twe&&n("log","DEBUG",arguments),this}}}var me=Array.isArray;function Je(e){return e===Object(e)}const HF=e=>e!=="__proto__";function DG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=kwe(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;L2(i,a,r[a],s)}return i},{})}function L2(e,t,n,i){if(!HF(t))return;let r,a;if(Je(n)&&!me(n)){a=Je(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?L2(a,r,n[r]):HF(r)&&(a[r]=n[r])}else e[t]=n}function kwe(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Xt(e){return e!=null?me(e)?e:[e]:[]}function Owe(e){return typeof e=="function"}function tn(e,t){return Object.hasOwn(e,t)}function $m(e){return typeof e=="boolean"}function Dt(e){return typeof e=="number"}function Re(e){return typeof e=="string"}function Ke(e){return me(e)?"["+e.map(Ke)+"]":Je(e)||Re(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var Nwe="6.2.0",Rwe={version:Nwe};function uk(e){return ue(e,"or")}function lk(e){return ue(e,"and")}function ck(e){return ue(e,"not")}function Mv(e,t){if(ck(e))Mv(e.not,t);else if(lk(e))for(const n of e.and)Mv(n,t);else if(uk(e))for(const n of e.or)Mv(n,t);else t(e)}function md(e,t){return ck(e)?{not:md(e.not,t)}:lk(e)?{and:e.and.map(n=>md(n,t))}:uk(e)?{or:e.or.map(n=>md(n,t))}:t(e)}const De=structuredClone;function kG(e){throw new Error(e)}function Id(e,t){const n={};for(const i of t)tn(e,i)&&(n[i]=e[i]);return n}function ur(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ut(e)).join(",")})`};function Ye(e){if(Dt(e))return e;const t=Re(e)?e:ut(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function AM(e){return e===!1||e===null}function qe(e,t){return e.includes(t)}function qd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function fk(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function OG(e,...t){for(const n of t)zwe(e,n??{});return e}function zwe(e,t){for(const n of oe(t))L2(e,n,t[n],!0)}function Ba(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Fwe(e,t){const n=oe(e),i=oe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function NG(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function dk(e,t){for(const n of e)if(t.has(n))return!0;return!1}function $M(e){const t=new Set;for(const n of e){const r=qc(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function hk(e,t){return e===void 0||t===void 0?!0:dk($M(e),$M(t))}function St(e){return oe(e).length===0}const oe=Object.keys,nn=Object.values,Lu=Object.entries;function P0(e){return e===!0||e===!1}function Tt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function s0(e,t){return ck(e)?`!(${s0(e.not,t)})`:lk(e)?`(${e.and.map(n=>s0(n,t)).join(") && (")})`:uk(e)?`(${e.or.map(n=>s0(n,t)).join(") || (")})`:t(e)}function Kb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Kb(e[n],t)&&delete e[n],St(e)}function Mm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function gk(e,t="datum"){const n=qc(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(Ke).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function RG(e,t="datum"){return`${t}[${Ke(qc(e).join("."))}]`}function ft(e){return`datum['${e.replaceAll("'","\\'")}']`}function Lwe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Fr(e){return`${qc(e).map(Lwe).join("\\.")}`}function Ec(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Ih(e){return`${qc(e).join(".")}`}function Hd(e){return e?qc(e).length:0}function Vt(...e){return e.find(t=>t!==void 0)}let zG=42;function FG(e){const t=++zG;return e?String(e)+t:t}function Uwe(){zG=42}function LG(e){return UG(e)?e:`__${e}`}function UG(e){return e.startsWith("__")}function I0(e){if(e!==void 0)return(e%360+360)%360}function U2(e){return Dt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const GF=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==GF.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==GF.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ut(e){const t=[];return function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],c=n(i[l]);c&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${c}`)}return t.splice(s,1),`{${a}}`}(e)}function ue(e,t){return Je(e)&&tn(e,t)&&e[t]!==void 0}const ao="row",so="column",B2="facet",kt="x",Dn="y",va="x2",hs="y2",Qu="xOffset",qh="yOffset",ba="radius",wo="radius2",Br="theta",_o="theta2",xa="latitude",Sa="longitude",Ea="latitude2",Lr="longitude2",Zu="time",Bi="color",gs="fill",ps="stroke",ji="shape",Ao="size",Hc="angle",$o="opacity",Ku="fillOpacity",Ju="strokeOpacity",el="strokeWidth",tl="strokeDash",Cm="text",Gd="order",Tm="detail",j2="key",wc="tooltip",P2="href",I2="url",q2="description",Bwe={x:1,y:1,x2:1,y2:1},BG={theta:1,theta2:1,radius:1,radius2:1};function jG(e){return tn(BG,e)}const pk={longitude:1,longitude2:1,latitude:1,latitude2:1};function PG(e){switch(e){case xa:return"y";case Ea:return"y2";case Sa:return"x";case Lr:return"x2"}}function IG(e){return tn(pk,e)}const jwe=oe(pk),mk={...Bwe,...BG,...pk,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function yd(e){return e===Bi||e===gs||e===ps}const qG={row:1,column:1,facet:1},Dr=oe(qG),yk={...mk,...qG},Pwe=oe(yk),{order:RNe,detail:zNe,tooltip:FNe,...Iwe}=yk,{row:LNe,column:UNe,facet:BNe,...qwe}=Iwe;function Hwe(e){return tn(qwe,e)}function HG(e){return tn(yk,e)}const Gwe=[va,hs,Ea,Lr,_o,wo];function GG(e){return Gc(e)!==e}function Gc(e){switch(e){case va:return kt;case hs:return Dn;case Ea:return xa;case Lr:return Sa;case _o:return Br;case wo:return ba}return e}function Uu(e){if(jG(e))switch(e){case Br:return"startAngle";case _o:return"endAngle";case ba:return"outerRadius";case wo:return"innerRadius"}return e}function ms(e){switch(e){case kt:return va;case Dn:return hs;case xa:return Ea;case Sa:return Lr;case Br:return _o;case ba:return wo}}function Pi(e){switch(e){case kt:case va:return"width";case Dn:case hs:return"height"}}function YG(e){switch(e){case kt:return"xOffset";case Dn:return"yOffset";case va:return"x2Offset";case hs:return"y2Offset";case Br:return"thetaOffset";case ba:return"radiusOffset";case _o:return"theta2Offset";case wo:return"radius2Offset"}}function vk(e){switch(e){case kt:return"xOffset";case Dn:return"yOffset"}}function Ywe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Xwe=oe(mk),{x:jNe,y:PNe,x2:INe,y2:qNe,xOffset:HNe,yOffset:GNe,latitude:YNe,longitude:XNe,latitude2:VNe,longitude2:WNe,theta:QNe,theta2:ZNe,radius:KNe,radius2:JNe,...bk}=mk,Vwe=oe(bk),xk={x:1,y:1},Mo=oe(xk);function Wt(e){return tn(xk,e)}const Sk={theta:1,radius:1},Wwe=oe(Sk);function H2(e){return e==="width"?kt:Dn}const XG={xOffset:1,yOffset:1};function Dm(e){return tn(XG,e)}const Qwe={time:1};function oA(e){return e in Qwe}const{text:eRe,tooltip:tRe,href:nRe,url:iRe,description:rRe,detail:aRe,key:sRe,order:oRe,...VG}=bk,Zwe=oe(VG);function Kwe(e){return tn(bk,e)}function Jwe(e){switch(e){case Bi:case gs:case ps:case Ao:case ji:case $o:case el:case tl:return!0;case Ku:case Ju:case Hc:case Zu:return!1}}const WG={...xk,...Sk,...XG,...VG},Ek=oe(WG);function ys(e){return tn(WG,e)}function e_e(e,t){return n_e(e)[t]}const QG={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:uRe,...t_e}=QG;function n_e(e){switch(e){case Bi:case gs:case ps:case q2:case Tm:case j2:case wc:case P2:case Gd:case $o:case Ku:case Ju:case el:case B2:case ao:case so:return QG;case kt:case Dn:case Qu:case qh:case xa:case Sa:case Zu:return t_e;case va:case hs:case Ea:case Lr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ao:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case tl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ji:return{point:"always",geoshape:"always"};case Cm:return{text:"always"};case Hc:return{point:"always",square:"always",text:"always"};case I2:return{image:"always"};case Br:return{text:"always",arc:"always"};case ba:return{text:"always",arc:"always"};case _o:case wo:return{arc:"always"}}}function uA(e){switch(e){case kt:case Dn:case Br:case ba:case Qu:case qh:case Ao:case Hc:case el:case $o:case Ku:case Ju:case Zu:case va:case hs:case _o:case wo:return;case B2:case ao:case so:case ji:case tl:case Cm:case wc:case P2:case I2:case q2:return"discrete";case Bi:case gs:case ps:return"flexible";case xa:case Sa:case Ea:case Lr:case Tm:case j2:case Gd:return}}const i_e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},r_e={count:1,min:1,max:1};function mo(e){return ue(e,"argmin")}function nl(e){return ue(e,"argmax")}function wk(e){return Re(e)&&tn(i_e,e)}const a_e=new Set(["count","valid","missing","distinct"]);function G2(e){return Re(e)&&a_e.has(e)}function s_e(e){return Re(e)&&qe(["min","max"],e)}const o_e=new Set(["count","sum","distinct","valid","missing"]),u_e=new Set(["mean","average","median","q1","q3","min","max"]);function ZG(e){return $m(e)&&(e=iS(e,void 0)),`bin${oe(e).map(t=>Y2(e[t])?Tt(`_${t}_${Lu(e[t])}`):Tt(`_${t}_${e[t]}`)).join("")}`}function _t(e){return e===!0||Yc(e)&&!e.binned}function Rn(e){return e==="binned"||Yc(e)&&e.binned===!0}function Yc(e){return Je(e)}function Y2(e){return ue(e,"param")}function YF(e){switch(e){case ao:case so:case Ao:case Bi:case gs:case ps:case el:case $o:case Ku:case Ju:case ji:return 6;case tl:return 4;default:return 10}}function km(e){return ue(e,"expr")}function zn(e,{level:t}={level:0}){const n=oe(e||{}),i={};for(const r of n)i[r]=t===0?nr(e[r]):zn(e[r],{level:t-1});return i}function KG(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:c,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},w={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},_={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=Id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:w,subtitle:_}}function su(e){return Re(e)||me(e)&&Re(e[0])}function ve(e){return ue(e,"signal")}function Xc(e){return ue(e,"step")}function l_e(e){return me(e)?!1:ue(e,"fields")&&!ue(e,"data")}function c_e(e){return me(e)?!1:ue(e,"fields")&&ue(e,"data")}function Ks(e){return me(e)?!1:ue(e,"field")&&ue(e,"data")}const f_e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},d_e=oe(f_e),h_e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},MM=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],g_e="  ";function JG(e){const t=me(e.condition)?e.condition.map(XF):XF(e.condition);return{...nr(e),condition:t}}function nr(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function XF(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function $t(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return ve(e)?e:e!==void 0?{value:e}:void 0}function p_e(e){return ve(e)?e.signal:Ke(e)}function VF(e){return ve(e)?e.signal:Ke(e.value)}function ia(e){return ve(e)?e.signal:e==null?null:Ke(e)}function m_e(e,t,n){for(const i of n){const r=ns(i,t.markDef,t.config);r!==void 0&&(e[i]=$t(r))}return e}function eY(e){return[].concat(e.type,e.style??[])}function yt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ue(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:ns(e,t,n,i)}function ns(e,t,n,{vgChannel:i}={}){const r=CM(e,t,n.style);return Vt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function CM(e,t,n){return tY(e,eY(t),n)}function tY(e,t,n){t=Xt(t);let i;for(const r of t){const a=n[r];ue(a,e)&&(i=a[e])}return i}function nY(e,t){return Xt(e).reduce((n,i)=>(n.field.push(he(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function iY(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function rY(e,t){return ar(e,t)||!t?e:e?[...Xt(e),...Xt(t)].join(", "):t}function aY(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((su(n)||ve(n))&&(su(i)||ve(i)))return{explicit:e.explicit,value:rY(n,i)};if(su(n)||ve(n))return{explicit:e.explicit,value:n};if(su(i)||ve(i))return{explicit:e.explicit,value:i};if(!su(n)&&!ve(n)&&!su(i)&&!ve(i))return{explicit:e.explicit,value:iY(n,i)};throw new Error("It should never reach here")}function _k(e){return`Invalid specification ${ut(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const y_e='Autosize "fit" only works for single views and layered views.';function WF(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function QF(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function ZF(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pi(e)}.`:'Dropping "fit" because spec has discrete size.'}function Ak(e){return`Unknown field for ${e}. Cannot calculate view size.`}function KF(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function v_e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function b_e(e){return`The "nearest" transform is not supported for ${e} marks.`}function sY(e){return`Selection not supported for ${e} yet.`}function x_e(e){return`Cannot find a selection named "${e}".`}const S_e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",E_e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",w_e="Legend bindings are only supported for selections over an individual field or encoding channel.";function __e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function A_e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const $_e="The same selection must be used to override scale domains in a layered view.",M_e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function C_e(e){return`Unknown repeated value "${e}".`}function JF(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const T_e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",$k="Animation involving facet, layer, or concat is currently unsupported.";function D_e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ud(e)}.`}function k_e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ud(t)} encoding found for selection ${ud(n.param)}. Using "field": ${ud(i)}.`}const O_e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function N_e(e){return`Unrecognized parse "${e}".`}function e9(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const R_e="Attempt to add the same child twice.";function z_e(e){return`Ignoring an invalid transform: ${ut(e)}.`}const F_e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function t9(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function L_e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ut(t)} is overridden by a child projection ${ut(n)}.`}const U_e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function B_e(e){return`${e}Offset dropped because ${e} is continuous`}function j_e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ut(n)}}.`}function oY(e){return`Invalid field type "${e}".`}function P_e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function I_e(e){return`Invalid aggregation operator "${e}".`}function uY(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function q_e(e){return`Position range does not support relative band size for ${e}.`}function TM(e,t){return`Dropping ${ut(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const H_e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function X2(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function G_e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Y_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function X_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function V_e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function lA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function W_e(e){return`The ${e} for range marks cannot be an expression`}function Q_e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Z_e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function K_e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function J_e(e){return`Cannot use the relative band size with ${e} scale.`}function eAe(e){return`Using unaggregated domain with raw field has no effect (${ut(e)}).`}function tAe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nAe(e){return`Unaggregated domain is currently unsupported for log scale (${ut(e)}).`}function iAe(e){return`Cannot apply size to non-oriented mark "${e}".`}function rAe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function aAe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function lY(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function cY(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function sAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ut(n)} and ${ut(i)}). Using ${ut(n)}.`}function oAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ut(n)} and ${ut(i)}). Using the union of the two domains.`}function uAe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function lAe(e){return`Dropping sort property ${ut(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const n9="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cAe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",fAe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",dAe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function hAe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function gAe(e){return`Stack is applied to a non-linear scale (${e}).`}function pAe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Jb(e,t){return`Invalid ${e}: ${ut(t)}.`}function mAe(e){return`Dropping day from datetime ${ut(e)} as day cannot be combined with other units.`}function yAe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function vAe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function bAe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function i9(e){return`1D error band does not support ${e}.`}function fY(e){return`Channel ${e} is required for "binned" bin.`}function xAe(e){return`Channel ${e} should not be used with "binned" bin.`}function SAe(e){return`Domain for ${e} is required for threshold scale.`}const dY=Dwe(TG);let _c=dY;function EAe(e){return _c=e,_c}function wAe(){return _c=dY,_c}function Mk(...e){_c.error(...e)}function ce(...e){_c.warn(...e)}function _Ae(...e){_c.debug(...e)}function Vc(e){if(e&&Je(e)){for(const t of Tk)if(ue(e,t))return!0}return!1}const hY=["january","february","march","april","may","june","july","august","september","october","november","december"],AAe=hY.map(e=>e.substr(0,3)),gY=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],$Ae=gY.map(e=>e.substr(0,3));function MAe(e){if(U2(e)&&(e=+e),Dt(e))return e>4&&ce(Jb("quarter",e)),e-1;throw new Error(Jb("quarter",e))}function CAe(e){if(U2(e)&&(e=+e),Dt(e))return e-1;{const t=e.toLowerCase(),n=hY.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=AAe.indexOf(i);if(r!==-1)return r;throw new Error(Jb("month",e))}}function TAe(e){if(U2(e)&&(e=+e),Dt(e))return e%7;{const t=e.toLowerCase(),n=gY.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=$Ae.indexOf(i);if(r!==-1)return r;throw new Error(Jb("day",e))}}function Ck(e,t){const n=[];if(t&&e.day!==void 0&&oe(e).length>1&&(ce(mAe(e)),e=De(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?CAe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?MAe(e.quarter):e.quarter;n.push(Dt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?TAe(e.day):e.day;n.push(Dt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Ac(e){const n=Ck(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function DAe(e){const n=Ck(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function kAe(e){const t=Ck(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const pY={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Tk=oe(pY);function OAe(e){return qs(pY,e)}function Wc(e){return Je(e)?e.binned:mY(e)}function mY(e){return e?.startsWith("binned")}function Dk(e){return e.startsWith("utc")}function NAe(e){return e.substring(3)}const RAe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function V2(e){return Tk.filter(t=>vY(e,t))}function yY(e){const t=V2(e);return t[t.length-1]}function vY(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function zAe(e,t,{end:n}={end:!1}){const i=gk(t),r=Dk(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of Tk)vY(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),DAe(o)}function bY(e){if(!e)return;const t=V2(e);return`timeUnitSpecifier(${ut(t)}, ${ut(RAe)})`}function FAe(e,t,n){if(!e)return;const i=bY(e);return`${n||Dk(e)?"utc":"time"}Format(${t}, ${i})`}function Mn(e){if(!e)return;let t;return Re(e)?mY(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Je(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Dk(t.unit)&&(t.utc=!0,t.unit=NAe(t.unit)),t}function LAe(e){const{utc:t,...n}=Mn(e);return n.unit?(t?"utc":"")+oe(n).map(i=>Tt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${oe(n).map(i=>Tt(`_${i}_${n[i]}`)).join("")}`}function xY(e,t=n=>n){const n=Mn(e),i=yY(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=SY(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Ac(o))} - ${t(Ac(r))}`}}const UAe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function BAe(e){return qs(UAe,e)}function SY(e,t=1){if(BAe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function jAe(e){return ue(e,"param")}function kk(e){return!!e?.field&&e.equal!==void 0}function Ok(e){return!!e?.field&&e.lt!==void 0}function Nk(e){return!!e?.field&&e.lte!==void 0}function Rk(e){return!!e?.field&&e.gt!==void 0}function zk(e){return!!e?.field&&e.gte!==void 0}function Fk(e){if(e?.field){if(me(e.range)&&e.range.length===2)return!0;if(ve(e.range))return!0}return!1}function Lk(e){return!!e?.field&&(me(e.oneOf)||me(e.in))}function PAe(e){return!!e?.field&&e.valid!==void 0}function EY(e){return Lk(e)||kk(e)||Fk(e)||Ok(e)||Rk(e)||Nk(e)||zk(e)}function Da(e,t){return rS(e,{timeUnit:t,wrapTime:!0})}function IAe(e,t){return e.map(n=>Da(n,t))}function wY(e,t=!0){const{field:n}=e,i=Mn(e.timeUnit),{unit:r,binned:a}=i||{},s=he(e,{expr:"datum"}),o=r?`time(${a?s:zAe(r,n)})`:s;if(kk(e))return`${o}===${Da(e.equal,r)}`;if(Ok(e)){const l=e.lt;return`${o}<${Da(l,r)}`}else if(Rk(e)){const l=e.gt;return`${o}>${Da(l,r)}`}else if(Nk(e)){const l=e.lte;return`${o}<=${Da(l,r)}`}else if(zk(e)){const l=e.gte;return`${o}>=${Da(l,r)}`}else{if(Lk(e))return`indexof([${IAe(e.oneOf,r).join(",")}], ${o}) !== -1`;if(PAe(e))return W2(o,e.valid);if(Fk(e)){const{range:l}=zn(e),c=ve(l)?{signal:`${l.signal}[0]`}:l[0],d=ve(l)?{signal:`${l.signal}[1]`}:l[1];if(c!==null&&d!==null&&t)return`inrange(${o}, [${Da(c,r)}, ${Da(d,r)}])`;const h=[];return c!==null&&h.push(`${o} >= ${Da(c,r)}`),d!==null&&h.push(`${o} <= ${Da(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ut(e)}`)}function W2(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function qAe(e){return EY(e)&&e.timeUnit?{...e,timeUnit:Mn(e.timeUnit)}:e}const Om={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function HAe(e){return e==="quantitative"||e==="temporal"}function _Y(e){return e==="ordinal"||e==="nominal"}const $c=Om.quantitative,Uk=Om.ordinal,Yd=Om.temporal,Bk=Om.nominal,Hh=Om.geojson;function GAe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case $c:return"quantitative";case"t":case Yd:return"temporal";case"o":case Uk:return"ordinal";case"n":case Bk:return"nominal";case Hh:return"geojson"}}const Fn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},DM={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function YAe(e,t){const n=DM[e],i=DM[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const XAe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function r9(e){return XAe[e]}const AY=new Set(["linear","log","pow","sqrt","symlog"]),$Y=new Set([...AY,"time","utc"]);function MY(e){return AY.has(e)}const CY=new Set(["quantile","quantize","threshold"]),VAe=new Set([...$Y,...CY,"sequential","identity"]),WAe=new Set(["ordinal","bin-ordinal","point","band"]);function Cn(e){return WAe.has(e)}function ca(e){return VAe.has(e)}function ja(e){return $Y.has(e)}function Xd(e){return CY.has(e)}const QAe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function ZAe(e){return!Re(e)&&ue(e,"name")}function TY(e){return ue(e,"param")}function KAe(e){return ue(e,"unionWith")}function JAe(e){return Je(e)&&"field"in e}const e$e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:lRe,domain:cRe,range:fRe,rangeMax:dRe,rangeMin:hRe,scheme:gRe,...t$e}=e$e,n$e=oe(t$e);function kM(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ja(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ja(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ja(e);case"nice":return ja(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ca(e)&&!qe(["log","time","utc","threshold","quantile"],e)}}function DY(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return yd(e)?void 0:K_e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function i$e(e,t){return qe([Uk,Bk],t)?e===void 0||Cn(e):t===Yd?qe([Fn.TIME,Fn.UTC,void 0],e):t===$c?MY(e)||Xd(e)||e===void 0:!0}function r$e(e,t,n=!1){if(!ys(e))return!1;switch(e){case kt:case Dn:case Qu:case qh:case Br:case ba:return ja(t)||t==="band"?!0:t==="point"?!n:!1;case Zu:return qe(["linear","band"],t);case Ao:case el:case $o:case Ku:case Ju:case Hc:return ja(t)||Xd(t)||qe(["band","point","ordinal"],t);case Bi:case gs:case ps:return t!=="band";case tl:case ji:return t==="ordinal"||Xd(t)}}function a$e(e){return Je(e)&&"value"in e}const wi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},kY=wi.arc,Q2=wi.area,Z2=wi.bar,s$e=wi.image,K2=wi.line,J2=wi.point,o$e=wi.rect,ex=wi.rule,OY=wi.text,jk=wi.tick,u$e=wi.trail,Pk=wi.circle,Ik=wi.square,NY=wi.geoshape;function il(e){return["line","area","trail"].includes(e)}function q0(e){return["rect","bar","image","arc","tick"].includes(e)}const l$e=new Set(oe(wi));function is(e){return ue(e,"type")}const c$e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],f$e=["fill","fillOpacity"],d$e=[...c$e,...f$e],h$e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},a9=oe(h$e),cA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],g$e={area:["line","point"],bar:cA,rect:cA,line:["point"],tick:["bandSize","thickness",...cA]},p$e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},m$e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},RY=oe(m$e);function Mc(e){return ue(e,"band")}const y$e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},v$e=5,qk={binSpacing:0,continuousBandSize:v$e,minBandSize:.25,timeUnitBandPosition:.5},b$e={...qk,binSpacing:1},x$e={...qk,thickness:1};function S$e(e){return is(e)?e.type:e}function zY(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Hk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ca(i)||r)return"always-valid";const a=zY(yt("invalid",e,t),{isPath:il(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function E$e(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function FY({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function LY({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=da(t),l=G2(o?.aggregate),c=Hk({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&c==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:W2(he(o,{expr:"datum"}),!1),...w$e(d,n,i)}}}function w$e(e,t,n){if(a$e(e)){const{value:i}=e;return ve(i)?{signal:i.signal}:{value:i}}return FY({scale:t,scaleName:n,mode:"zeroOrMin"})}function Gk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=Gc(t),l=Yk(e),c=LY({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return c!==void 0?[c,l]:l}function _$e(e){const{datum:t}=e;return Vc(t)?Ac(t):`${ut(t)}`}function ac(e,t,n,i){const r={};if(t&&(r.scale=t),vs(e)){const{datum:a}=e;Vc(a)?r.signal=Ac(a):ve(a)?r.signal=a.signal:km(a)?r.signal=a.expr:r.value=a}else r.field=he(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function tx({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!ve(s)&&0<s&&s<1?"datum":void 0,l=he(t,{expr:o,suffix:r}),c=n!==void 0?he(n,{expr:o}):he(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?l:c;d.field=h}else{const h=ve(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${c}`:`${1-s} * ${l} + ${s} * ${c}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function A$e({scaleName:e,fieldDef:t}){const n=he(t,{expr:"datum"}),i=he(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function Yk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:c,bandPosition:d}){if(t){if(Oe(t)){const h=s?.get("type");if(Si(t)){d??=Bu({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(_t(p)||d&&y&&v===Yd)return o?.impute?ac(t,a,{binSuffix:"mid"},{offset:l}):d&&!Cn(h)?tx({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):ac(t,a,Lm(t,e)?{binSuffix:"range"}:{},{offset:l});if(Rn(p)){if(fe(n))return tx({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});ce(fY(e===kt?va:hs))}}return ac(t,a,Cn(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(fa(t)){const h=t.value,p=l?{offset:l}:{};return{...o0(e,h),...p}}}return Owe(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function o0(e,t){return qe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:qe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:$t(t)}function Cc(e){return e&&e!=="number"&&e!=="time"}function UY(e,t,n){return`${e}(${t}${n?`, ${ut(n)}`:""})`}function Xk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Cc(n))return ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=BY(e,i,r),o=Vd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ra({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ra({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&fe(e)&&e.timeUnit===void 0)return ra({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function l(c){return fe(c)?Mn(c.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Qd(e)){const{unit:c,utc:d}=l(e),h=M$e({field:s,timeUnit:c,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||Qc(e)&&e.scale?.type===Fn.UTC});return h?{signal:h}:void 0}if(t=OM({type:o,specifiedFormat:t,config:a,normalizeStack:r}),fe(e)&&_t(e.bin)){const c=he(e,{expr:i,binSuffix:"end"});return{signal:Nm(s,c,t,n,a)}}else return t||Vd(e)==="quantitative"?{signal:`${IY(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function BY(e,t,n){return fe(e)?n?`${he(e,{expr:t,suffix:"end"})}-${he(e,{expr:t,suffix:"start"})}`:he(e,{expr:t}):_$e(e)}function ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=BY(e,i,r),s!=="datum.value"&&fe(e)&&_t(e.bin)){const o=he(e,{expr:i,binSuffix:"end"});return{signal:Nm(s,o,t,n,a)}}return{signal:UY(n,s,t)}}function jY(e,t,n,i,r,a){if(!(Re(i)&&Cc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Vd(e)==="quantitative"&&(r.normalizedNumberFormatType&&Wd(e)&&e.stack==="normalize"||r.numberFormatType))){if(Wd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return OM({type:"quantitative",config:r,normalizeStack:!0});if(Qd(e)){const s=fe(e)?Mn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:$$e({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return OM({type:t,specifiedFormat:n,config:r})}}function PY(e,t,n){if(e&&(ve(e)||e==="number"||e==="time"))return e;if(Qd(t)&&n!=="time"&&n!=="utc")return fe(t)&&Mn(t?.timeUnit)?.utc?"utc":"time"}function OM({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Re(t))return t;if(e===$c)return i?n.normalizedNumberFormat:n.numberFormat}function $$e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:bY(t)}:i?void 0:n.timeFormat)}function IY(e,t){return`format(${e}, "${t||""}")`}function s9(e,t,n,i){return Cc(n)?UY(n,e,t):IY(e,(Re(t)?t:void 0)??i.numberFormat)}function Nm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return Nm(e,t,r.numberFormat,r.numberFormatType,r);const a=s9(e,n,i,r),s=s9(t,n,i,r);return`${W2(e,!1)} ? "null" : ${a} + "${g_e}" + ${s}`}function M$e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${ut(n)})`:(n=Re(n)?n:r,`${a?"utc":"time"}Format(${e}, ${ut(n)})`):FAe(t,e,a)}const eS="min",C$e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function o9(e){return tn(C$e,e)}function T$e(e){return ue(e,"encoding")}function oo(e){return e&&(e.op==="count"||ue(e,"field"))}function qY(e){return e&&me(e)}function Rm(e){return ue(e,"row")||ue(e,"column")}function Vk(e){return ue(e,"header")}function tS(e){return ue(e,"facet")}function D$e(e){return ue(e,"param")}function k$e(e){return!Re(e)&&ue(e,"repeat")}function u9(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Wk(e){return ue(e,"sort")}function Bu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Oe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(fe(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return ns("timeUnitBandPosition",n,i);if(_t(a))return .5}}function HY({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=Pi(e),l=yt(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(fe(t)){const{timeUnit:c,bin:d}=t;if(c&&!n)return{band:ns("timeUnitBandSize",i,r)};if(_t(d)&&!Cn(a))return{band:1}}if(q0(i.type))return a?Cn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function GY(e,t,n,i){return _t(e.bin)||e.timeUnit&&Si(e)&&e.type==="temporal"?Bu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function YY(e){return ue(e,"sort")&&!ue(e,"field")}function zm(e){return ue(e,"condition")}function nS(e){const t=e?.condition;return!!t&&!me(t)&&fe(t)}function Fm(e){const t=e?.condition;return!!t&&!me(t)&&Oe(t)}function O$e(e){const t=e?.condition;return!!t&&(me(t)||fa(t))}function fe(e){return ue(e,"field")||e?.aggregate==="count"}function Vd(e){return e?.type}function vs(e){return ue(e,"datum")}function pu(e){return Si(e)&&!ix(e)||nx(e)}function l9(e){return Si(e)&&e.type==="quantitative"&&!e.bin||nx(e)}function nx(e){return vs(e)&&Dt(e.datum)}function Oe(e){return fe(e)||vs(e)}function Si(e){return e&&(ue(e,"field")||e.aggregate==="count")&&ue(e,"type")}function fa(e){return ue(e,"value")}function Qc(e){return ue(e,"scale")||ue(e,"sort")}function Wd(e){return ue(e,"axis")||ue(e,"stack")||ue(e,"impute")}function XY(e){return ue(e,"legend")}function VY(e){return ue(e,"format")||ue(e,"formatType")}function N$e(e){return ur(e,["legend","axis","header","scale"])}function R$e(e){return ue(e,"op")}function he(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(F$e(e))n=LG("count");else{let s;if(!t.nofn)if(R$e(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:c}=e;_t(o)?(s=ZG(o),r=(t.binSuffix??"")+(t.suffix??"")):l?nl(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):mo(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):c&&!Wc(c)&&(s=LAe(c),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Ih(n):t.expr?RG(n,t.expr)+a:Fr(n)+a}function ix(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return fe(e)&&!!e.bin;case"temporal":return!1}throw new Error(oY(e.type))}function z$e(e){return Qc(e)&&Xd(e.scale?.type)}function F$e(e){return e.aggregate==="count"}function L$e(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(_t(i))return`${n} (binned)`;if(r&&!Wc(r)){const s=Mn(r)?.unit;if(s)return`${n} (${V2(s).join("-")})`}else if(a)return nl(a)?`${n} for max ${a.argmax}`:mo(a)?`${n} for min ${a.argmin}`:`${Mm(a)} of ${n}`;return n}function U$e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(nl(t))return`${r} for argmax(${t.argmax})`;if(mo(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Wc(i)?Mn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||_t(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const WY=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return U$e(e);default:return L$e(e,t)}};let QY=WY;function ZY(e){QY=e}function B$e(){ZY(WY)}function vd(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=Qk(e)?.title;if(!fe(e))return r??e.title;const a=e,s=i?Zk(a,t):void 0;return n?Vt(r,a.title,s):r??a.title??s}function Qk(e){if(Wd(e)&&e.axis)return e.axis;if(XY(e)&&e.legend)return e.legend;if(Vk(e)&&e.header)return e.header}function Zk(e,t){return QY(e,t)}function rx(e){if(VY(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Qk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function j$e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Wk(e)&&me(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!nl(n)&&!mo(n))return"quantitative";if(Qc(e)&&e.scale?.type)switch(DM[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function da(e){if(fe(e))return e;if(nS(e))return e.condition}function cn(e){if(Oe(e))return e;if(Fm(e))return e.condition}function KY(e,t,n,i={}){if(Re(e)||Dt(e)||$m(e)){const r=Re(e)?"string":Dt(e)?"number":"boolean";return ce(j_e(t,r,e)),{value:e}}return Oe(e)?ax(e,t,n,i):Fm(e)?{...e,condition:ax(e.condition,t,n,i)}:e}function ax(e,t,n,i){if(VY(e)){const{format:r,formatType:a,...s}=e;if(Cc(a)&&!n.customFormatTypes)return ce(t9(t)),ax(s,t,n,i)}else{const r=Wd(e)?"axis":XY(e)?"legend":Vk(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Cc(s)&&!n.customFormatTypes)return ce(t9(t)),ax({...e,[r]:o},t,n,i)}}return fe(e)?Kk(e,t,i):P$e(e)}function P$e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Dt(n)?"quantitative":Re(n)?"nominal":Vc(n)?"temporal":void 0,{...e,type:t}}function Kk(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!wk(i)&&!nl(i)&&!mo(i)&&(ce(I_e(i)),delete o.aggregate),r&&(o.timeUnit=Mn(r)),s&&(o.field=`${s}`),_t(a)&&(o.bin=iS(a,t)),Rn(a)&&!Wt(t)&&ce(xAe(t)),Si(o)){const{type:l}=o,c=GAe(l);l!==c&&(o.type=c),l!=="quantitative"&&G2(i)&&(ce(P_e(l,i)),o.type="quantitative")}else if(!GG(t)){const l=j$e(o,t);o.type=l}if(Si(o)){const{compatible:l,warning:c}=I$e(o,t)||{};l===!1&&ce(c)}if(Wk(o)&&Re(o.sort)){const{sort:l}=o;if(o9(l))return{...o,sort:{encoding:l}};const c=l.substring(1);if(l.charAt(0)==="-"&&o9(c))return{...o,sort:{encoding:c,order:"descending"}}}if(Vk(o)){const{header:l}=o;if(l){const{orient:c,...d}=l;if(c)return{...o,header:{...d,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return o}function iS(e,t){return $m(e)?{maxbins:YF(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:YF(t)}:e}const Vf={compatible:!0};function I$e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ao:case so:case B2:return ix(e)?Vf:{compatible:!1,warning:Y_e(t)};case kt:case Dn:case Qu:case qh:case Bi:case gs:case ps:case Cm:case Tm:case j2:case wc:case P2:case I2:case Hc:case Br:case ba:case q2:return Vf;case Sa:case Lr:case xa:case Ea:return n!==$c?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Vf;case $o:case Ku:case Ju:case el:case Ao:case _o:case wo:case va:case hs:case Zu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Vf;case ji:case tl:return!ix(e)&&!z$e(e)?{compatible:!1,warning:X_e(t)}:Vf;case Gd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Vf}}function Qd(e){const{formatType:t}=rx(e);return t==="time"||!t&&q$e(e)}function q$e(e){return e&&(e.type==="temporal"||fe(e)&&!!e.timeUnit)}function rS(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Mn(t)?.unit;let s=a||n==="temporal",o;return km(e)?o=e.expr:ve(e)?o=e.signal:Vc(e)?(s=!0,o=Ac(e)):(Re(e)||Dt(e))&&s&&(o=`datetime(${ut(e)})`,OAe(a)&&(Dt(e)&&e<1e4||Re(e)&&isNaN(Date.parse(e)))&&(o=Ac({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:ut(e)}function JY(e,t){const{type:n}=e;return t.map(i=>{const r=fe(e)&&!Wc(e.timeUnit)?e.timeUnit:void 0,a=rS(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Lm(e,t){return _t(e.bin)?ys(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const c9={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Um(e){return e?.condition}const eX=["domain","grid","labels","ticks","title"],H$e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},tX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},G$e={...tX,style:1,labelExpr:1,encoding:1};function f9(e){return tn(G$e,e)}const Y$e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},nX=oe(Y$e);function Co(e){return ue(e,"mark")}class aS{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Co(t)?S$e(t.mark)===this.name:!1}}function sc(e,t){const n=e?.[t];return n?me(n)?qd(n,i=>!!i.field):fe(n)||nS(n):!1}function iX(e,t){const n=e?.[t];return n?me(n)?qd(n,i=>!!i.field):fe(n)||vs(n)||Fm(n):!1}function rX(e,t){if(Wt(t)){const n=e[t];if((fe(n)||vs(n))&&(_Y(n.type)||fe(n)&&n.timeUnit)){const i=vk(t);return iX(e,i)}}return!1}function aX(e){return qd(Pwe,t=>{if(sc(e,t)){const n=e[t];if(me(n))return qd(n,i=>!!i.aggregate);{const i=da(n);return i&&!!i.aggregate}}return!1})}function sX(e,t){const n=[],i=[],r=[],a=[],s={};return Jk(e,(o,l)=>{if(fe(o)){const{field:c,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=Qk(o)?.title;let S=he(o,{forAs:!0});const w={...b?[]:{title:vd(o,t,{allowDisabling:!0})},...y,field:S};if(d){let _;if(nl(d)?(_="argmax",S=he({op:"argmax",field:d.argmax},{forAs:!0}),w.field=`${S}.${c}`):mo(d)?(_="argmin",S=he({op:"argmin",field:d.argmin},{forAs:!0}),w.field=`${S}.${c}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(_=d),_){const A={op:_,as:S};c&&(A.field=c),a.push(A)}}else if(n.push(S),Si(o)&&_t(h)){if(i.push({bin:h,field:c,as:S}),n.push(he(o,{binSuffix:"end"})),Lm(o,l)&&n.push(he(o,{binSuffix:"range"})),Wt(l)){const _={field:`${S}_end`};s[`${l}2`]=_}w.bin="binned",GG(l)||(w.type=$c)}else if(p&&!Wc(p)){r.push({timeUnit:p,field:c,as:S});const _=Si(o)&&o.type!==Yd&&"time";_&&(l===Cm||l===wc?w.formatType=_:Kwe(l)?w.legend={formatType:_,...w.legend}:Wt(l)&&(w.axis={formatType:_,...w.axis}))}s[l]=w}else n.push(c),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function X$e(e,t,n){const i=e_e(t,n);if(i){if(i==="binned"){const r=e[t===va?kt:Dn];return!!(fe(r)&&fe(e[t])&&Rn(r.bin))}}else return!1;return!0}function V$e(e,t,n,i){const r={};for(const a of oe(e))HG(a)||ce(G_e(a));for(let a of Xwe){if(!e[a])continue;const s=e[a];if(Dm(a)){const o=Ywe(a),l=r[o];if(fe(l)&&HAe(l.type)&&fe(s)&&!l.timeUnit){ce(B_e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ce(U_e),a=Br),!X$e(e,a,t)){ce(X2(a,t));continue}if(a===Ao&&t==="line"&&da(e[a])?.aggregate){ce(H_e);continue}if(a===Bi&&(n?"fill"in e:"stroke"in e)){ce(uY("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===Tm||a===Gd&&!me(s)&&!fa(s)||a===wc&&me(s)){if(s){if(a===Gd){const o=e[a];if(YY(o)){r[a]=o;continue}}r[a]=Xt(s).reduce((o,l)=>(fe(l)?o.push(Kk(l,a)):ce(TM(l,a)),o),[])}}else{if(a===wc&&s===null)r[a]=null;else if(!fe(s)&&!vs(s)&&!fa(s)&&!zm(s)&&!ve(s)){ce(TM(s,a));continue}r[a]=KY(s,a,i)}}return r}function sS(e,t){const n={};for(const i of oe(e)){const r=KY(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function W$e(e){const t=[];for(const n of oe(e))if(sc(e,n)){const i=e[n],r=Xt(i);for(const a of r)fe(a)?t.push(a):nS(a)&&t.push(a.condition)}return t}function Jk(e,t,n){if(e)for(const i of oe(e)){const r=e[i];if(me(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Q$e(e,t,n,i){return e?oe(e).reduce((r,a)=>{const s=e[a];return me(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function oX(e,t){return oe(t).reduce((n,i)=>{switch(i){case kt:case Dn:case P2:case q2:case I2:case va:case hs:case Qu:case qh:case Br:case _o:case ba:case wo:case Zu:case xa:case Sa:case Ea:case Lr:case Cm:case ji:case Hc:case wc:return n;case Gd:if(e==="line"||e==="trail")return n;case Tm:case j2:{const r=t[i];if(me(r)||fe(r))for(const a of Xt(r))a.aggregate||n.push(he(a,{}));return n}case Ao:if(e==="trail")return n;case Bi:case gs:case ps:case $o:case Ku:case Ju:case tl:case el:{const r=da(t[i]);return r&&!r.aggregate&&n.push(he(r,{})),n}}},[])}function Z$e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(me(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return me(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function NM(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${eO(t)}`:"";return{field:s+t.field,type:t.type,title:ve(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=W$e(n).map(N$e);return{tooltip:[...r,...Ba(a,Ye)]}}function eO(e){const{title:t,field:n}=e;return Vt(t,n)}function tO(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:c,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=eO(n);return uX(e,o,r,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Re(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function uX(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...is(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...$m(e[t])?{}:e[t]}}]:[]}function lX(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Ly(a,n),continuousAxisChannelDef2:Ly(s,n),continuousAxisChannelDefError:Ly(o,n),continuousAxisChannelDefError2:Ly(l,n),continuousAxis:r}}function Ly(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ce(bAe(n,t)),i}else return e}function cX(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(is(n)&&n.orient)return n.orient;if(pu(r)){if(pu(a)){const s=fe(r)&&r.aggregate,o=fe(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Qd(a)&&!Qd(r)?"horizontal":"vertical"}return"horizontal"}else{if(pu(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const sx="boxplot",K$e=["box","median","outliers","rule","ticks"],J$e=new aS(sx,dX);function fX(e){return Dt(e)?"tukey":e}function dX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=is(n)?n:{type:n};r&&ce(sY("boxplot"));const l=o.extent??t.boxplot.extent,c=yt("size",o,t),d=o.invalid,h=fX(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:w,aggregate:_,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:D}=eMe(e,l,t),T=Ih(b.field),{color:O,size:z,...P}=A,B=Kt=>tO(o,S,b,Kt,t.boxplot),Y=B(P),R=B(A),U=(Je(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=B({...P,...z?{size:z}:{},color:{condition:{test:`${ft(`lower_box_${b.field}`)} >= ${ft(`upper_box_${b.field}`)}`,...O||{value:U}}}}),N=NM([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),I={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},H=h==="min-max"?N:NM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),K=[...Y({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:H}),...Y({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:H}),...Y({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:H}),...Y({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:H})],L=[...h!=="tukey"?K:[],...R({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...F({partName:"median",mark:{type:"tick",invalid:d,...Je(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:N})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:L};const V=ft(`lower_box_${b.field}`),ae=ft(`upper_box_${b.field}`),se=`(${ae} - ${V})`,de=`${V} - ${l} * ${se}`,be=`${ae} + ${l} * ${se}`,Se=ft(b.field),It={joinaggregate:hX(b.field),groupby:w},Qe={transform:[{filter:`(${de} <= ${Se}) && (${Se} <= ${be})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},..._],groupby:w}],layer:K},{tooltip:ge,...ke}=P,{scale:ze,axis:le}=b,qt=eO(b),Ze=uX(o,"outliers",t.boxplot,{transform:[{filter:`(${Se} < ${de}) || (${Se} > ${be})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...qt!==void 0?{title:qt}:{},...ze!==void 0?{scale:ze}:{},...le!==void 0?{axis:le}:{}},...ke,...O?{color:O}:{},...D?{tooltip:D}:{}}})[0];let Zt;const gn=[...p,...y,It];return Ze?Zt={transform:gn,layer:[Ze,Qe]}:(Zt=Qe,Zt.transform.unshift(...gn)),{...s,layer:[Zt,{transform:v,layer:L}]}}function hX(e){const t=Ih(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function eMe(e,t,n){const i=cX(e,sx),{continuousAxisChannelDef:r,continuousAxis:a}=lX(e,i,sx),s=r.field,o=Ih(s),l=fX(t),c=[...hX(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${ft(`upper_box_${o}`)} - ${ft(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${ft(`upper_box_${o}`)} + ${ft(`iqr_${o}`)} * ${t}, ${ft(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${ft(`lower_box_${o}`)} - ${ft(`iqr_${o}`)} * ${t}, ${ft(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Z$e(p),{bins:b,timeUnits:S,aggregate:w,groupby:_,encoding:A}=sX(v,n),$=i==="vertical"?"horizontal":"vertical",M=i,D=[...b,...S,{aggregate:[...w,...c],groupby:_},...d];return{bins:b,timeUnits:S,transform:D,groupby:_,aggregate:w,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:y}}const nO="errorbar",tMe=["ticks","rule"],nMe=new aS(nO,gX);function gX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:c}=pX(e,nO,t);delete a.size;const d=tO(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:c}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function iMe(e,t){const{encoding:n}=e;if(rMe(n))return{orient:cX(e,t),inputType:"raw"};const i=aMe(n),r=sMe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Oe(o)&&Oe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Oe(o)){if(pu(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Oe(l)){if(pu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,c=n.yError,d=n.yError2;if(Oe(l)&&!Oe(o))throw new Error(`${t} cannot have xError2 without xError`);if(Oe(d)&&!Oe(c))throw new Error(`${t} cannot have yError2 without yError`);if(Oe(o)&&Oe(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Oe(o)){if(pu(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Oe(c)){if(pu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function rMe(e){return(Oe(e.x)||Oe(e.y))&&!Oe(e.x2)&&!Oe(e.y2)&&!Oe(e.xError)&&!Oe(e.xError2)&&!Oe(e.yError)&&!Oe(e.yError2)}function aMe(e){return Oe(e.x2)||Oe(e.y2)}function sMe(e){return Oe(e.xError)||Oe(e.xError2)||Oe(e.yError)||Oe(e.yError2)}function pX(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=is(i)?i:{type:i};a&&ce(sY(t));const{orient:c,inputType:d}=iMe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=lX(e,c,t),{errorBarSpecificAggregate:S,postAggregateCalculates:w,tooltipSummary:_,tooltipTitleWithFieldName:A}=oMe(l,h,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:D,[b==="x"?"xError2":"yError2"]:T,...O}=r,{bins:z,timeUnits:P,aggregate:B,groupby:Y,encoding:R}=sX(O,n),U=[...B,...S],F=d!=="raw"?[]:Y,N=NM(_,h,R,A);return{transform:[...o.transform??[],...z,...P,...U.length===0?[]:[{aggregate:U,groupby:F}],...w],groupby:F,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:R,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:N}}function oMe(e,t,n,i,r,a,s,o){let l=[],c=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ce(vAe(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],c=[{calculate:`${ft(`center_${d}`)} + ${ft(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${ft(`center_${d}`)} - ${ft(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:Mm(y)},{fieldPrefix:"upper_",titlePrefix:d9(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:d9(y,v,"-")}],p=!0;else{let b,S,w;v==="ci"?(b="mean",S="ci0",w="ci1"):(b="median",S="q1",w="q3"),l=[{op:S,field:d,as:`lower_${d}`},{op:w,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:vd({field:d,aggregate:w,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:vd({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:vd({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ce(yAe(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],c=[{calculate:ft(n.field),as:`upper_${d}`},{calculate:ft(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],c=[{calculate:`${ft(d)} + ${ft(i.field)}`,as:`upper_${d}`}],r?c.push({calculate:`${ft(d)} + ${ft(r.field)}`,as:`lower_${d}`}):c.push({calculate:`${ft(d)} - ${ft(i.field)}`,as:`lower_${d}`}));for(const y of c)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Ec(Ec(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function d9(e,t,n){return`${Mm(e)} ${n} ${t}`}const iO="errorband",uMe=["band","borders"],lMe=new aS(iO,mX);function mX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=pX(e,iO,t),c=s,d=tO(c,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):c.interpolate?ce(i9("interpolate")):c.tension&&ce(i9("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const yX={};function rO(e,t,n){const i=new aS(e,t);yX[e]={normalizer:i,parts:n}}function cMe(){return oe(yX)}rO(sx,dX,K$e);rO(nO,gX,tMe);rO(iO,mX,uMe);const fMe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],vX={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},bX={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},dMe=oe(vX),hMe=oe(bX),gMe={header:1,headerRow:1,headerColumn:1,headerFacet:1},xX=oe(gMe),SX=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],pMe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},mMe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ha="_vgsid_",yMe={point:{on:"click",fields:[ha],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function aO(e){return e==="legend"||!!e?.legend}function fA(e){return aO(e)&&Je(e)}function sO(e){return!!e?.select}function EX(e){const t=[];for(const n of e||[]){if(sO(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function vMe(e){return oS(e)||uO(e)||oO(e)}function oO(e){return ue(e,"concat")}function oS(e){return ue(e,"vconcat")}function uO(e){return ue(e,"hconcat")}function wX({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rs(e){return ue(e,"step")}function h9(e){return ue(e,"view")||ue(e,"width")||ue(e,"height")}const g9=20,bMe={align:1,bounds:1,center:1,columns:1,spacing:1},xMe=oe(bMe);function SMe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(tS(e)&&!Rm(e.facet)||oO(e))&&(r.columns=s),oS(e)&&(r.columns=1);for(const o of xMe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=Dt(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function RM(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function zM(e,t){const n=ox(e,t);return rs(n)?n.step:_X}function ox(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Vt(n,{step:e.step})}const _X=20,EMe={continuousWidth:300,continuousHeight:300,step:_X},wMe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:EMe,mark:p$e,arc:{},area:{},bar:b$e,circle:{},geoshape:{},image:{},line:{},point:{},rect:qk,rule:{color:"black"},square:{},text:{color:"black"},tick:x$e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:QAe,projection:{},legend:pMe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:yMe,style:{},title:{},facet:{spacing:g9},concat:{spacing:g9},normalizedNumberFormat:".0%"},Ls=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],p9={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},m9={blue:Ls[0],orange:Ls[1],red:Ls[2],teal:Ls[3],green:Ls[4],yellow:Ls[5],purple:Ls[6],pink:Ls[7],brown:Ls[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function _Me(e={}){return{signals:[{name:"color",value:Je(e)?{...m9,...e}:m9}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function AMe(e){return{signals:[{name:"fontSize",value:Je(e)?{...p9,...e}:p9}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $Me(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function AX(e){const t=oe(e||{}),n={};for(const i of t){const r=e[i];n[i]=Um(r)?JG(r):nr(r)}return n}function MMe(e){const t=oe(e),n={};for(const i of t)n[i]=AX(e[i]);return n}const CMe=[...RY,...nX,...xX,"background","padding","legend","lineBreak","scale","style","title","view"];function $X(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=DG({},De(wMe),n?$Me(n):{},t?_Me(t):{},i?AMe(i):{},a||{});r&&L2(s,"selection",r,!0);const o=ur(s,CMe);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=nr(s[l]));for(const l of RY)s[l]&&(o[l]=zn(s[l]));for(const l of nX)s[l]&&(o[l]=AX(s[l]));for(const l of xX)s[l]&&(o[l]=zn(s[l]));if(s.legend&&(o.legend=zn(s.legend)),s.scale){const{invalid:l,...c}=s.scale,d=zn(l,{level:1});o.scale={...zn(c),...oe(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=MMe(s.style)),s.title&&(o.title=zn(s.title)),s.view&&(o.view=zn(s.view)),o}const TMe=new Set(["view",...l$e]),DMe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],kMe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...g$e};function OMe(e){e=De(e);for(const t of DMe)delete e[t];if(e.axis)for(const t in e.axis)Um(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of fMe)delete e.legend[t];if(e.mark){for(const t of a9)delete e.mark[t];e.mark.tooltip&&Je(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(EX(e.params)),delete e.params);for(const t of TMe){for(const i of a9)delete e[t][i];const n=kMe[t];if(n)for(const i of n)delete e[t][i];RMe(e,t)}for(const t of cMe())delete e[t];NMe(e);for(const t in e)Je(e[t])&&St(e[t])&&delete e[t];return St(e)?void 0:e}function NMe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=KG(e.title);St(t)||(e.style["group-title"]={...e.style["group-title"],...t}),St(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),St(i)?delete e.title:e.title=i}function RMe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};St(a)||(e.style[n??t]=a),delete e[t]}function uS(e){return ue(e,"layer")}function zMe(e){return ue(e,"repeat")}function FMe(e){return!me(e.repeat)&&ue(e.repeat,"layer")}class lO{map(t,n){return tS(t)?this.mapFacet(t,n):zMe(t)?this.mapRepeat(t,n):uO(t)?this.mapHConcat(t,n):oS(t)?this.mapVConcat(t,n):oO(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(uS(t))return this.mapLayer(t,n);if(Co(t))return this.mapUnit(t,n);throw new Error(_k(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const LMe={zero:1,center:1,normalize:1};function UMe(e){return tn(LMe,e)}const BMe=new Set([kY,Z2,Q2,ex,J2,Pk,Ik,K2,OY,jk]),jMe=new Set([Z2,Q2,kY]);function Wf(e){return fe(e)&&Vd(e)==="quantitative"&&!e.bin}function y9(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(fe(s)&&fe(o))if(Wf(s)&&Wf(o)){if(s.stack)return t;if(o.stack)return r;const l=fe(s)&&!!s.aggregate,c=fe(o)&&!!o.aggregate;if(l!==c)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Wf(s))return t;if(Wf(o))return r}else{if(Wf(s))return a&&n==="vertical"?void 0:t;if(Wf(o))return a&&n==="horizontal"?void 0:r}}function PMe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function MX(e,t){const n=is(e)?e:{type:e},i=n.type;if(!BMe.has(i))return null;const r=y9(t,"x",n)||y9(t,"theta",n);if(!r)return null;const a=t[r],s=fe(a)?he(a,{}):void 0,o=PMe(r),l=[],c=new Set;if(t[o]){const b=t[o],S=fe(b)?he(b,{}):void 0;S&&S!==s&&(l.push(o),c.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=fe(h)?he(h,{}):void 0;p&&p!==s&&(l.push(d),c.add(p));const y=Vwe.reduce((b,S)=>{if(S!=="tooltip"&&sc(t,S)){const w=t[S];for(const _ of Xt(w)){const A=da(_);if(A.aggregate)continue;const $=he(A,{});(!$||!c.has($))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?$m(a.stack)?v=a.stack?"zero":null:v=a.stack:jMe.has(i)&&(v="zero"),!v||!UMe(v)||aX(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Fn.LINEAR&&a?.stack&&ce(gAe(a.scale.type)),Oe(t[ms(r)])?(a.stack!==void 0&&ce(hAe(r)),null):(fe(a)&&a.aggregate&&!o_e.has(a.aggregate)&&ce(pAe(a.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:r,impute:a.impute===null?!1:il(i),stackBy:y,offset:v}))}function CX(e,t,n){const i=zn(e),r=yt("orient",i,n);if(i.orient=GMe(i.type,t,r),r!==void 0&&r!==i.orient&&ce(Z_e(i.orient,r)),i.type==="bar"&&i.orient){const l=yt("cornerRadiusEnd",i,n);if(l!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:y$e[i.orient];for(const d of c)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=yt("opacity",i,n),s=yt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=qMe(i.type,t)),yt("cursor",i,n)===void 0&&(i.cursor=IMe(i,t,n)),i}function IMe(e,t,n){return t.href||e.href||yt("href",e,n)?"pointer":e.cursor}function qMe(e,t){if(qe([J2,jk,Pk,Ik],e)&&!aX(t))return .7}function HMe(e,t,{graticule:n}){if(n)return!1;const i=ns("filled",e,t),r=e.type;return Vt(i,r!==J2&&r!==K2&&r!==ex)}function GMe(e,t,n){switch(e){case J2:case Pk:case Ik:case OY:case o$e:case s$e:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case Z2:if(fe(i)&&(Rn(i.bin)||fe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(fe(r)&&(Rn(r.bin)||fe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(fe(i)&&i.type===$c&&!_t(i.bin)||nx(i))&&fe(r)&&Rn(r.bin)?"horizontal":"vertical";if(!s)return(fe(r)&&r.type===$c&&!_t(r.bin)||nx(r))&&fe(i)&&Rn(i.bin)?"vertical":"horizontal"}case ex:if(a&&!(fe(i)&&Rn(i.bin))&&s&&!(fe(r)&&Rn(r.bin)))return;case Q2:if(s)return fe(r)&&Rn(r.bin)?"horizontal":"vertical";if(a)return fe(i)&&Rn(i.bin)?"vertical":"horizontal";if(e===ex){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case K2:case jk:{const o=l9(i),l=l9(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const c=Si(i)&&i.type===Yd,d=Si(r)&&r.type===Yd;if(c&&!d)return"vertical";if(!c&&d)return"horizontal"}return}}return"vertical"}function YMe(e){const{point:t,line:n,...i}=e;return oe(i).length>1?i:i.type}function XMe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ur(e[t],["point","line"])});return e}function dA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Je(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Je(t.point)?t.point:{}:void 0}function v9(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class VMe{name="path-overlay";hasMatchingType(t,n){if(Co(t)){const{mark:i,encoding:r}=t,a=is(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!dA(a,n[a.type],r);case"area":return!!dA(a,n[a.type],r)||!!v9(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:c,...d}=t,h=sS(c,r),p=is(o)?o:{type:o},y=dA(p,r[p.type],h),v=p.type==="area"&&v9(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:YMe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ur(h,["shape"])}],S=MX(CX(p,h,r),h);let w=h;if(S){const{fieldChannel:_,offset:A}=S;w={...h,[_]:{...h[_],...A?{stack:A}:{}}}}return w=ur(w,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...Id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:w}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Id(p,["clip","tooltip"]),...y},encoding:w}),i({...d,layer:b},{...n,config:XMe(r)})}}function WMe(e,t){return t?Rm(e)?DX(e,t):TX(e,t):e}function hA(e,t){return t?DX(e,t):e}function FM(e,t,n){const i=t[e];if(k$e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ce(C_e(i.repeat));return}return t}function TX(e,t){if(e=FM("field",e,t),e!==void 0){if(e===null)return null;if(Wk(e)&&oo(e.sort)){const n=FM("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function b9(e,t){if(fe(e))return TX(e,t);{const n=FM("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function x9(e,t){if(Oe(e)){const n=b9(e,t);if(n)return n;if(zm(e))return{condition:e.condition}}else{if(Fm(e)){const n=b9(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function DX(e,t){const n={};for(const i in e)if(ue(e,i)){const r=e[i];if(me(r))n[i]=r.map(a=>x9(a,t)).filter(a=>a);else{const a=x9(r,t);a!==void 0&&(n[i]=a)}}return n}class QMe{name="RuleForRangedLine";hasMatchingType(t){if(Co(t)){const{encoding:n,mark:i}=t;if(i==="line"||is(i)&&i.type==="line")for(const r of Gwe){const a=Gc(r),s=n[a];if(n[r]&&(fe(s)&&!Rn(s.bin)||vs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ce(Q_e(!!r.x2,!!r.y2)),i({...t,mark:Je(a)?{...a,type:"rule"}:"rule"},n)}}class ZMe extends lO{nonFacetUnitNormalizers=[J$e,nMe,lMe,new VMe,new QMe];map(t,n){if(Co(t)){const i=sc(t.encoding,ao),r=sc(t.encoding,so),a=sc(t.encoding,B2);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=hA(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return FMe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:l}=i,{repeater:c={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:r}},n):{...a,layer:l.map(h=>{const p={...c,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Tt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!me(i)&&t.columns&&(t=ur(t,["columns"]),ce(JF("repeat")));const o=[],{repeater:l={},repeaterPrefix:c=""}=n,d=!me(i)&&i.row||[l?l.row:null],h=!me(i)&&i.column||[l?l.column:null],p=me(i)&&i||[l?l.repeat:null];for(const v of p)for(const b of d)for(const S of h){const w={repeat:v,row:b,column:S,layer:l.layer},_=`${(r.name?`${r.name}_`:"")+c}child__${me(i)?`${Tt(v)}`:(i.row?`row_${Tt(b)}`:"")+(i.column?`column_${Tt(S)}`:"")}`,A=this.map(r,{...n,repeater:w,repeaterPrefix:_});A.name=_,o.push(ur(A,["data"]))}const y=me(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return Rm(i)&&t.columns&&(t=ur(t,["columns"]),ce(JF("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=E9({parentProjection:s,projection:r}),c=S9({parentEncoding:a,encoding:hA(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:l,projection:c,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),w=hA(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...l?{width:l}:{},...d?{height:d}:{},...h?{view:h}:{},...c?{projection:c}:{},mark:o,encoding:w,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ce(V_e([...i?[ao]:[],...r?[so]:[]]));const s={},o={};for(const l of[ao,so]){const c=t[l];if(c){const{align:d,center:h,spacing:p,columns:y,...v}=c;s[l]=v;for(const b of["align","center","spacing"])c[b]!==void 0&&(o[b]??={},o[b][l]=c[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:l,columns:c,...d}=a;return{facetMapping:WMe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,l={...r,parentEncoding:S9({parentEncoding:n,encoding:a,layer:!0}),parentProjection:E9({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}},l)}}function S9({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...oe(e),...oe(t)]);for(const a of r){const s=t[a],o=e[a];if(Oe(s)){const l={...o,...s};i[a]=l}else Fm(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||fa(o)||ve(o)||Oe(o)||me(o))&&(i[a]=o)}}else i=t;return!i||St(i)?void 0:i}function E9(e){const{parentProjection:t,projection:n}=e;return t&&n&&ce(L_e({parentProjection:t,projection:n})),n??t}function cO(e){return ue(e,"filter")}function KMe(e){return ue(e,"stop")}function kX(e){return ue(e,"lookup")}function JMe(e){return ue(e,"data")}function eCe(e){return ue(e,"param")}function tCe(e){return ue(e,"pivot")}function nCe(e){return ue(e,"density")}function iCe(e){return ue(e,"quantile")}function rCe(e){return ue(e,"regression")}function aCe(e){return ue(e,"loess")}function sCe(e){return ue(e,"sample")}function oCe(e){return ue(e,"window")}function uCe(e){return ue(e,"joinaggregate")}function lCe(e){return ue(e,"flatten")}function cCe(e){return ue(e,"calculate")}function OX(e){return ue(e,"bin")}function fCe(e){return ue(e,"impute")}function dCe(e){return ue(e,"timeUnit")}function hCe(e){return ue(e,"aggregate")}function gCe(e){return ue(e,"stack")}function pCe(e){return ue(e,"fold")}function mCe(e){return ue(e,"extent")&&!ue(e,"density")&&!ue(e,"regression")}function yCe(e){return e.map(t=>cO(t)?{filter:md(t.filter,qAe)}:t)}class vCe extends lO{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=w9(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=w9(t,n),t.encoding){const i={};for(const[r,a]of Lu(t.encoding))i[r]=NX(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Lu(i).map(([a,s])=>{const{init:o,bind:l,empty:c,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=c!=="none";for(const h of nn(n.selectionPredicates[a]??{}))h.empty=c!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function w9(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(cO(a))return{filter:LM(a,t)};if(OX(a)&&Yc(a.bin))return{...a,bin:RX(a.bin)};if(kX(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function NX(e,t){const n=De(e);if(fe(n)&&Yc(n.bin)&&(n.bin=RX(n.bin)),Qc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(zm(n))if(me(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:LM(i,t)}});else{const{selection:i,param:r,test:a,...s}=NX(n.condition,t);n.condition=r?n.condition:{...s,test:LM(n.condition,t)}}return n}function RX(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function LM(e,t){const n=i=>md(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):md(e.test||e.filter,i=>i.selection?n(i.selection):i)}class UM extends lO{map(t,n){const i=n.selections??[];if(t.params&&!Co(t)){const r=[];for(const a of t.params)sO(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(Re(o)&&(o===t.name||r.includes(o))||me(o)&&o.map(l=>r.indexOf(l)).every((l,c,d)=>l!==-1&&(c===0||l>d[c-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=UM.prototype[e];UM.prototype[e]=function(n,i){return t.call(this,n,bCe(n,i))}}function bCe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function zX(e,t){t===void 0&&(t=$X(e.config));const n=wCe(e,t),{width:i,height:r}=e,a=_Ce(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const xCe=new ZMe,SCe=new vCe,ECe=new UM;function wCe(e,t={}){const n={config:t};return ECe.map(xCe.map(SCe.map(e,n),n),n)}function _9(e){return Re(e)?{type:e}:e??{}}function _Ce(e,t,n){let{width:i,height:r}=t;const a=Co(e)||uS(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ce(WF("width")),i=void 0),r=="container"&&(ce(WF("height")),r=void 0));const o={type:"pad",...s,...n?_9(n.autosize):{},..._9(e.autosize)};if(o.type==="fit"&&!a&&(ce(y_e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&ce(QF("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&ce(QF("height")),!ar(o,{type:"pad"}))return o}function ACe(e){return["fit","fit-x","fit-y"].includes(e)}function $Ce(e){return e?`fit-${H2(e)}`:"fit"}const MCe=["background","padding"];function A9(e,t){const n={};for(const i of MCe)e&&e[i]!==void 0&&(n[i]=nr(e[i]));return t&&(n.params=e.params),n}class To{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new To(De(this.explicit),De(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Vt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of oe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function Ki(e){return{explicit:!1,value:e}}function FX(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:lS(t,n,i,r)}}function lS(e,t,n,i){return e.explicit&&t.explicit&&ce(sAe(n,i,e.value,t.value)),e}function ju(e,t,n,i,r=lS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class CCe extends To{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Zd(e){return ue(e,"url")}function H0(e){return ue(e,"values")}function LX(e){return ue(e,"name")&&!Zd(e)&&!H0(e)&&!wu(e)}function wu(e){return e&&(UX(e)||BX(e)||fO(e))}function UX(e){return ue(e,"sequence")}function BX(e){return ue(e,"sphere")}function fO(e){return ue(e,"graticule")}var zt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(zt||(zt={}));function jX({invalid:e,isPath:t}){switch(zY(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function TCe(e){const{marks:t,scales:n}=jX(e);return t===n?zt.Main:n==="include-invalid-values"?zt.PreFilterInvalid:zt.PostFilterInvalid}class ht{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ce(R_e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class zi extends ht{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${FG()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function gA(e){return e.as!==void 0}function $9(e){return`${e}_end`}class Xa extends ht{timeUnits;clone(){return new Xa(null,De(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:l}=a;if(l){let c;if(Wc(l)){if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=Bu({fieldDef:a,markDef:h,config:p});(q0(d)||y)&&(c={timeUnit:Mn(l),field:o})}}else c={as:he(a,{forAs:!0}),field:o,timeUnit:l};if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=Bu({fieldDef:a,markDef:h,config:p});q0(d)&&Wt(s)&&y!==.5&&(c.rectBandPosition=y)}c&&(r[Ye(c)]=c)}return r},{});return St(i)?null:new Xa(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Mn(i),s={...r,timeUnit:a};return new Xa(t,{[Ye(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Lu(this.timeUnits)){const a=gA(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(nn(this.timeUnits).map(t=>gA(t)?t.as:$9(t.field)))}dependentFields(){return new Set(nn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ye(this.timeUnits)}`}assemble(){const t=[];for(const n of nn(this.timeUnits)){const{rectBandPosition:i}=n,r=Mn(n.timeUnit);if(gA(n)){const{field:a,as:s}=n,{unit:o,utc:l,...c}=r,d=[s,`${s}_end`];t.push({field:Fr(a),type:"timeunit",...o?{units:V2(o)}:{},...l?{timezone:"utc"}:{},...c,as:d}),t.push(...M9(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=PX({timeUnit:r,field:s}),l=$9(s);t.push({type:"formula",expr:o,as:l}),t.push(...M9([s,l],i,r))}}return t}}const cS="offsetted_rect_start",fS="offsetted_rect_end";function PX({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=yY(i),{part:s,step:o}=SY(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${ft(t)}, ${n?-o:o})`}function M9([e,t],n,i){if(n!==void 0&&n!==.5){const r=ft(e),a=ft(t);return[{type:"formula",expr:C9([PX({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${cS}`},{type:"formula",expr:C9([r,a],n+.5),as:`${e}_${fS}`}]}return[]}function C9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Bm="_tuple_fields";class DCe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const kCe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new DCe,a={},s={},o=new Set,l=(v,b)=>{const S=b==="visual"?v.channel:v.field;let w=Tt(`${i}_${S}`);for(let _=1;o.has(w);_++)w=Tt(`${i}_${S}_${_}`);return o.add(w),{[b]:w}},c=t.type,d=e.config.selection[c],h=n.value!==void 0?Xt(n.value):null;let{fields:p,encodings:y}=Je(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(Je(v))for(const b of oe(v))Hwe(b)?(y||(y=[])).push(b):c==="interval"?(ce(M_e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){ce(v_e(v,b.aggregate));continue}else if(!S){ce(KF(v));continue}if(b.timeUnit&&!Wc(b.timeUnit)){S=e.vgField(v);const w={timeUnit:b.timeUnit,as:S,field:b.field};s[Ye(w)]=w}if(!a[S]){const w=c==="interval"&&ys(v)&&ca(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",_={field:S,channel:v,type:w,index:r.items.length};_.signals={...l(_,"data"),...l(_,"visual")},r.items.push(a[S]=_),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ha,IG(v)?(_.geoChannel=v,_.channel=PG(v),r.hasChannel[_.channel]=a[S]):r.hasChannel[v]=a[S]}}else ce(KF(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ha}h&&(t.init=h.map(v=>r.items.map(b=>Je(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),St(s)||(r.timeUnit=new Xa(null,s))},signals:(e,t,n)=>{const i=t.name+Bm;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(GX)})}},IX="_curr",Cv="anim_value",td="anim_clock",BM="eased_anim_clock",qX="min_extent",HX="max_range_extent",pA="last_tick_at",mA="is_playing",OCe=1/60*1e3,NCe=(e,t)=>[{name:BM,update:td},{name:`${e}_domain`,init:`domain('${t}')`},{name:qX,init:`extent(${e}_domain)[0]`},{name:HX,init:`extent(range('${t}'))[1]`},{name:Cv,update:`invert('${t}', ${BM})`}],RCe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Va(t)&&(n=n.concat([{name:td,init:"0",on:[{events:{type:"timer",throttle:OCe},update:`${mA} ? (${td} + (now() - ${pA}) > ${HX} ? 0 : ${td} + (now() - ${pA})) : ${td}`}]},{name:pA,init:"now()",on:[{events:[{signal:td},{signal:mA}],update:"now()"}]},{name:mA,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Bm,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=nn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+bd):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let c=`unit: ${oc(e)}, `;if(t.project.hasSelectionId)c+=`${ha}: ${s}[${Ke(ha)}]`;else if(Va(t))c+=`fields: ${r}, values: [${Cv} ? ${Cv} : ${qX}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${Ke(e.vgField(h.channel,{}))}], ${s}[${Ke(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${Ke(h.field)}]`).join(", ");c+=`fields: ${r}, values: [${d}]`}if(Va(t))return n.concat(NCe(t.name,e.scaleName(Zu)),[{name:i+vo,on:[{events:[{signal:BM},{signal:Cv}],update:`{${c}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+vo,on:d?[{events:d,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}}};function GX(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Fr(r.field),r}function Tc(e,t=!0,n=Awe){if(me(e)){const i=e.map(r=>Tc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Vc(e))return n(t?Ac(e):kAe(e));return t?n(ut(e)):e}function zCe(e,t){for(const n of nn(e.component.selection??{})){const i=n.name;let r=`${i}${vo}, ${n.resolve==="global"?"true":`{unit: ${oc(e)}}`}`;for(const a of hS)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+u3e,on:[{events:{signal:n.name+vo},update:`modify(${Ke(n.name+Dc)}, ${r})`}]})}return dO(t)}function FCe(e,t){if(e.component.selection&&oe(e.component.selection).length){const n=Ke(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Wu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return dO(t)}function LCe(e,t){let n=!1;for(const i of nn(e.component.selection??{})){const r=i.name,a=Ke(r+Dc);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${uV}(${a}, ${Ke(o)}${l}`})}n=!0;for(const o of hS)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),dO(t)}function UCe(e,t){const n=[],i=[],r=oc(e,{escape:!1});for(const a of nn(e.component.selection??{})){const s={name:a.name+Dc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ha}}]),a.init){const l=a.project.items.map(GX);s.values=a.project.hasSelectionId?a.init.map(c=>({unit:r,[ha]:Tc(c,!1)[0]})):a.init.map(c=>({unit:r,fields:l,values:Tc(c,!1)}))}if([...n,...t].filter(l=>l.name===a.name+Dc).length||n.push(s),Va(a)&&t.length){const l=e.lookupDataSource(e.getDataName(zt.Main)),c=t.find(h=>h.name===l),d=c.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){c.transform=c.transform.filter(p=>p!==d);const h={name:c.name+IX,source:c.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function YX(e,t){for(const n of nn(e.component.selection??{}))for(const i of hS)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function BCe(e,t){for(const n of e.children)Rt(n)&&(t=YX(n,t));return t}function jCe(e,t,n,i){const r=hV(e,t.param,t);return{signal:ca(n.get("type"))&&me(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function dO(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const uo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ys(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&ce(E_e),!a||!ca(s)){ce(S_e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||PM(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(uV))r.update=`{${i.map(s=>`${Ke(Fr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${Ke(Fr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!PM(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function jM(e,t){return`domain(${Ke(e.scaleName(t))})`}function PM(e){return e.parent&&Wh(e.parent)&&(!e.parent.parent||PM(e.parent.parent))}const bd="_brush",XX="_scale_trigger",yp="geo_interval_init_tick",VX="_init",PCe="_center",ICe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...lc(n.select)?n.select:{}};i.fields=[ha],i.encodings||(i.encodings=n.value?oe(n.value):[Sa,xa]),n.select={type:"interval",...i}}if(t.translate&&!uo.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ke(t.name+bd)}`;for(const r of t.events){if(!r.between){ce(`${r} is not an ordered event stream for interval selections.`);continue}const a=Xt(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+vo,a=nn(t.project.hasChannel).filter(o=>o.channel===kt||o.channel===Dn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(qCe(e,t,l,s?.[l.index])),[])),e.hasProjection){const o=Ke(e.projectionName()),l=e.projectionName()+PCe,{x:c,y:d}=t.project.hasChannel,h=c?.signals.visual,p=d?.signals.visual,y=c?s?.[c.index]:`${l}[0]`,v=d?s?.[d.index]:`${l}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+VX,init:`[scale(${o}, [${c?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${c?y[1]:y}, ${d?v[1]:v}])]`}),(!c||!d)&&(n.find(D=>D.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const w=`intersect(${S}, {markname: ${Ke(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${oc(e)}}`,A=`vlSelectionTuples(${w}, ${_})`,$=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...s?[{signal:yp}]:[]],update:A}]})}else{if(!uo.defined(t)){const c=i+XX,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=Ke(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),w=ca(S)?"+":"";return`(!isArray(${y}) || (${w}invert(${b}, ${v})[0] === ${w}${y}[0] && ${w}invert(${b}, ${v})[1] === ${w}${y}[1]))`});d.length&&n.push({name:c,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${c} : {}`}]})}const o=a.map(c=>c.signals.data),l=`unit: ${oc(e)}, fields: ${i+Bm}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Tc(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Rt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===yp).length||n.unshift({name:yp,value:null,on:[{events:"timer{1}",update:`${yp} === null ? {} : ${yp}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,l=`data(${Ke(t.name+Dc)})`;if(uo.defined(t)||!r&&!a)return n;const c={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of oe(c))c[S]=[{test:`${l}.length && ${l}[0].unit === ${oc(e)}`,...c[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=oe(y).reduce((S,w)=>(S[w]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(_=>_).join(" && "),value:y[w]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+bd}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:c}},...n,{name:i+bd,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...c,...v}}}]}};function qCe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=Ke(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,c=e.getSizeSignalRef(a===kt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${c})]`}],[]);if(r){const p=n.signals.data,y=uo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Tc(i,!0,l)}:{value:[]};return h.push({events:{signal:t.name+XX},update:ca(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Tc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===kt?0:1,y=t.name+VX,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Gh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=zm(t)&&t.condition;let s=[];a&&(s=Xt(a).map(c=>{const d=r(c);if(D$e(c)){const{param:h,empty:p}=c;return{test:dV(e,{param:h,empty:p}),...d}}else return{test:cx(e,c.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function hO(e,t="text"){const n=e.encoding[t];return Gh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>dS(i,e.config),invalidValueRef:void 0})}function dS(e,t,n="datum"){if(e){if(fa(e))return $t(e.value);if(Oe(e)){const{format:i,formatType:r}=rx(e);return Xk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function WX(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(me(s))return{tooltip:T9({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Gh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:c=>{const d=dS(c,r,o);if(d)return d;if(c===null)return;let h=yt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),Re(h))return{value:h};if(Je(h))return ve(h)?h:h.content==="encoding"?T9(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function QX(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,h){const p=Gc(h),y=Si(d)?d:{...d,type:e[p].type},v=y.title||Zk(y,r),b=Xt(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Wt(h)){const w=h==="x"?"x2":"y2",_=da(e[w]);if(Rn(y.bin)&&_){const A=he(y,{expr:s}),$=he(_,{expr:s}),{format:M,formatType:D}=rx(y);S=Nm(A,$,M,D,r),a.add(w)}}if((Wt(h)||h===Br||h===ba)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:w,formatType:_}=rx(y);S=Xk({fieldOrDatumDef:y,format:w,formatType:_,expr:s,config:r,normalizeStack:!0}).signal}S??=dS(y,r,s).signal,o.push({channel:h,key:b,value:S})}Jk(e,(d,h)=>{fe(d)?l(d,h):nS(d)&&l(d.condition,h)});const c={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!c[h]&&(c[h]=p);return c}function T9(e,t,n,{reactiveGeom:i}={}){const r=QX(e,t,n,{reactiveGeom:i}),a=Lu(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function HCe(e){const{markDef:t,config:n}=e,i=yt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...GCe(e),...YCe(e)}}function GCe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=yt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:tn(h_e,t)?{}:{ariaRoleDescription:{value:t}}}function YCe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Gh({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>dS(l,e.config),invalidValueRef:void 0});const s=yt("description",n,i);if(s!=null)return{description:$t(s)};if(i.aria===!1)return{};const o=QX(t,r,i);if(!St(o))return{description:{signal:Lu(o).map(([l,c],d)=>`"${d>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function Ln(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const c=r[e];o===void 0&&(l??=yt(e,i,a,{vgChannel:s,ignoreVgConfig:!zm(c)}),l!==void 0&&(o=$t(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=LY({...d,scaleChannel:e,channelDef:c});return Gh({model:t,channelDef:c,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>Yk({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function ZX(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??yt("filled",n,r),o=qe(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=yt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,c=yt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...l?{fill:$t(l)}:{},...c?{stroke:$t(c)}:{}};return n.color&&(s?n.fill:n.stroke)&&ce(uY("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Ln("color",e,{vgChannel:d,defaultValue:s?l:c}),...Ln("fill",e,{defaultValue:i.fill?l:void 0}),...Ln("stroke",e,{defaultValue:i.stroke?c:void 0})}}function XCe(e){const{encoding:t,mark:n}=e,i=t.order;return!il(n)&&fa(i)?Gh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>$t(r.value),invalidValueRef:void 0}):{}}function Kd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:Yk({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:$t(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function mi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],c=r[ms(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=Kd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=gO({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!l&&Wt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:VCe({channel:e,channelDef:l,channel2Def:c,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function VCe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Oe(n)&&r&&t===r.fieldChannel){if(fe(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return tx({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return ac(n,i,{suffix:"end"},{offset:a})}return Gk(e)}function gO({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=Gc(n),l=Uu(n),c=yt(n,a,s,{vgChannel:l});if(c!==void 0)return o0(n,c);switch(t){case"zeroOrMin":return D9({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return D9({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Pi(n)],mult:.5}}}}function D9({mainChannel:e,config:t,...n}){const i=FY(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const WCe={left:"x",center:"xc",right:"x2"},QCe={top:"y",middle:"yc",bottom:"y2"};function KX(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Uu(e);const r=e==="x"?"align":"baseline",a=yt(r,t,n);let s;return ve(a)?(ce(W_e(r)),s=void 0):s=a,e==="x"?WCe[s||(i==="top"?"left":"center")]:QCe[s||i]}function ux(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?JX(e,t,{defaultPos:n,defaultPos2:i}):mi(e,t,{defaultPos:n})}function JX(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ms(e),o=Pi(e),l=ZCe(t,i,s),c=l[o]?KX(e,r,a):Uu(e);return{...mi(e,t,{defaultPos:n,vgChannel:c}),...l}}function ZCe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=Gc(n),c=Pi(n),d=Uu(n),h=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?Kd({channel:n,markDef:a,encoding:i,model:e}):Kd({channel:l,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Pi(n),w=e.markDef[S];return w!=null?{[S]:{value:w}}:{[d]:{field:e.getName(n)}}}const b=KCe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:Uy(n,a)||Uy(n,{[n]:CM(n,a,o.style),[c]:CM(c,a,o.style)})||Uy(n,o[r])||Uy(n,o.mark)||{[d]:gO({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function KCe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:c}){return Oe(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?ac(t,a,{suffix:"start"},{offset:l}):Gk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:c})}function Uy(e,t){const n=Pi(e),i=Uu(e);if(t[i]!==void 0)return{[i]:o0(e,t[i])};if(t[e]!==void 0)return{[i]:o0(e,t[e])};if(t[n]){const r=t[n];if(Mc(r))ce(q_e(n));else return{[n]:o0(e,r)}}}function yo(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ms(t),o=Pi(t),l=i[t],c=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??yt("size",r,n,{vgChannel:o}),v=YG(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return fe(l)&&(_t(l.bin)||Rn(l.bin)||l.timeUnit&&!c)&&!(y&&!Mc(y))&&!i[v]&&!Cn(h)?t3e({fieldDef:l,fieldDef2:c,channel:t,model:e}):(Oe(l)&&Cn(h)||b)&&!c?e3e(l,t,e):JX(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function JCe(e,t,n,i,r,a,s){if(Mc(r))if(n){const l=n.get("type");if(l==="band"){let c=`bandwidth('${t}')`;r.band!==1&&(c=`${r.band} * ${c}`);const d=ns("minBandSize",{type:s},i);return{signal:d?`max(${ia(d)}, ${c})`:c}}else r.band!==1&&(ce(J_e(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(ve(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Xc(l)&&Dt(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Vt(l,s==="tick"?h:s==="bar"?c:d);if(ve(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(Dt(p))return{signal:`${1-p} * ${e}`}}return{value:zM(i.view,e)-2}}function e3e(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),c=n.getScaleComponent(t),d=Pi(t),h=ms(t),p=YG(t),y=n.scaleName(p),v=n.getScaleComponent(vk(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Ln("size",n,{vgChannel:d,defaultRef:$t(i.size)}):ce(iAe(i.type)));const w=!!S,_=HY({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(c||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:JCe(d,y||l,v||c,a,_,!!e,i.type)};const A=(c||v)?.get("type")==="band"&&Mc(_)&&!w?"top":"middle",$=KX(t,i,a,A),M=$==="xc"||$==="yc",{offset:D,offsetType:T}=Kd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),O=Gk({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:c,stack:s,offset:D,defaultRef:gO({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:M?T==="encoding"?0:.5:ve(_)?{signal:`(1-${_})/2`}:Mc(_)?(1-_.band)/2:0});if(d)return{[$]:O,...S};{const z=Uu(h),P=S[d],B=D?{...P,offset:D}:P;return{[$]:O,[z]:me(O)?[O[0],{...O[1],offset:B}]:{...O,offset:B}}}}function k9(e,t,n,i,r,a,s){if(jG(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(ve(n)||ve(r)||ve(i)||a){const c=ia(n),d=ia(r),h=ia(i),p=ia(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=h?`${h} + `:"",S=c?`(${c} ? -1 : 1) * `:"",w=d?`(${d} + ${v})`:v;return{signal:b+S+w}}else return r=r||0,i+(n?-r-l:+r+l)}function t3e({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),c=o?o.get("type"):void 0,d=o.get("reverse"),h=HY({channel:n,fieldDef:e,markDef:a,config:r,scaleType:c}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Wt(n)?yt("binSpacing",a,r)??0:0,b=ms(n),S=Uu(n),w=Uu(b),_=ns("minBandSize",a,r),{offset:A}=Kd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:$}=Kd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),M=A$e({fieldDef:e,scaleName:l}),D=k9(n,v,d,y,A,_,M),T=k9(b,v,d,y,$??A,_,M),O=ve(h)?{signal:`(1-${h.signal})/2`}:Mc(h)?(1-h.band)/2:.5,z=Bu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(_t(e.bin)||e.timeUnit){const P=e.timeUnit&&z!==.5;return{[w]:O9({fieldDef:e,scaleName:l,bandPosition:O,offset:T,useRectOffsetField:P}),[S]:O9({fieldDef:e,scaleName:l,bandPosition:ve(O)?{signal:`1-${O.signal}`}:1-O,offset:D,useRectOffsetField:P})}}else if(Rn(e.bin)){const P=ac(e,l,{},{offset:T});if(fe(t))return{[w]:P,[S]:ac(t,l,{},{offset:D})};if(Yc(e.bin)&&e.bin.step)return{[w]:P,[S]:{signal:`scale("${l}", ${he(e,{expr:"datum"})} + ${e.bin.step})`,offset:D}}}ce(fY(b))}function O9({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return tx({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:cS,endSuffix:fS}:{}})}const n3e=new Set(["aria","width","height"]);function jr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?ZX(e):{};return{...i3e(e.markDef,t),...N9("fill",n),...N9("stroke",i),...Ln("opacity",e),...Ln("fillOpacity",e),...Ln("strokeOpacity",e),...Ln("strokeWidth",e),...Ln("strokeDash",e),...XCe(e),...WX(e),...hO(e,"href"),...HCe(e)}}function N9(e,t){return t?{[e]:t}:{}}function i3e(e,t){return d_e.reduce((n,i)=>(!n3e.has(i)&&ue(e,i)&&t[i]!=="ignore"&&(n[i]=$t(e[i])),n),{})}function pO(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!ys(a)||!(s=e.getScaleType(a)))return;const o=G2(r.aggregate),l=Hk({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(E$e(l)){const c=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});c&&i.add(c)}}),i.size>0)return{defined:{signal:[...i].map(a=>W2(a,!0)).join(" && ")}}}function R9(e,t){if(t!==void 0)return{[e]:$t(t)}}const yA="voronoi",eV={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(yA)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(il(a))return ce(b_e(a)),n;const s={name:e.getName(yA),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...WX(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((c,d)=>{const h=c.name??"";h===e.component.mark[0].name?o=d:h.includes(yA)&&(l=!0)}),l||n.splice(o+1,0,s),n}},tV={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!aO(e.bind),parse:(e,t,n)=>lV(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=eV.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,c)=>{const d=Tt(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Tc(s[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${Ke(l.field)}] : null`}]:[],bind:a[l.field]??a[l.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(c=>c.name===i+vo),s=i+Bm,o=r.items.map(c=>Tt(`${i}_${c.field}`)),l=o.map(c=>`${c} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},lx="_toggle",nV={defined:e=>e.type==="point"&&!Va(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+lx,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+vo,i=t.name+lx;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${oc(e)}}, `}${i} ? ${n} : null`}},r3e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Va(e),parse:(e,t)=>{t.clear&&(t.clear=Re(t.clear)?Wu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(tV.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Tt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+vo);i(r,"null"),nV.defined(t)&&(r=n.findIndex(a=>a.name===t.name+lx),i(r,"false"))}return n}},iV={defined:e=>{const t=e.resolve==="global"&&e.bind&&aO(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ha;return t&&!n&&ce(w_e),t&&n},parse:(e,t,n)=>{const i=De(n);if(i.select=Re(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},lV(t,i),lc(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Xt(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=fA(t.bind)?t.bind.legend:"click",a=Re(r)?Wu(r,"view"):Xt(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=fA(t.bind)&&t.bind.legend,a=s=>o=>{const l=De(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Tt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+vo),s=i+Bm,o=r.items.filter(p=>p.hasLegend).map(p=>Tt(`${i}_${Tt(p.field)}_legend`)),c=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:c}):o.length>0&&(a.update=c,delete a.value,delete a.on);const d=n.find(p=>p.name===i+lx),h=fA(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function a3e(e,t,n){const i=e.fieldDef(t)?.field;for(const r of nn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&iV.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const rV="_translate_anchor",aV="_translate_delta",s3e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=uo.defined(t),a=i+rV,{x:s,y:o}=t.project.hasChannel;let l=Wu(t.translate,"scope");return r||(l=l.map(c=>(c.between[0].markname=i+bd,c))),n.push({name:a,value:{},on:[{events:l.map(c=>c.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?jM(e,kt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?jM(e,Dn):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+aV,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&z9(e,t,s,"width",n),o!==void 0&&z9(e,t,o,"height",n),n}};function z9(e,t,n,i,r){const a=t.name,s=a+rV,o=a+aV,l=n.channel,c=uo.defined(t),d=r.find(M=>M.name===n.signals[c?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p?.get("type"),v=p?.get("reverse"),b=c?l===kt?v?"":"-":v?"-":"":"",S=`${s}.extent_${l}`,w=`${b}${o}.${l} / ${c?`${h}`:`span(${S})`}`,_=!c||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=c?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${_}(${S}, ${w}${A})`;d.on.push({events:{signal:o},update:c?$:`clampRange(${$}, 0, ${h})`})}const sV="_zoom_anchor",oV="_zoom_delta",o3e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=uo.defined(t),a=i+oV,{x:s,y:o}=t.project.hasChannel,l=Ke(e.scaleName(kt)),c=Ke(e.scaleName(Dn));let d=Wu(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+bd,h))),n.push({name:i+sV,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&F9(e,t,s,"width",n),o!==void 0&&F9(e,t,o,"height",n),n}};function F9(e,t,n,i,r){const a=t.name,s=n.channel,o=uo.defined(t),l=r.find(_=>_.name===n.signals[o?"data":"visual"]),c=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?jM(e,s):l.name,y=a+oV,v=`${a}${sV}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${b}(${p}, ${v}, ${y}${S})`;l.on.push({events:{signal:y},update:o?w:`clampRange(${w}, 0, ${c})`})}const Dc="_store",vo="_tuple",u3e="_modify",uV="vlSelectionResolve",hS=[RCe,ICe,kCe,nV,tV,uo,iV,r3e,s3e,o3e,eV];function l3e(e){let t=e.parent;for(;t&&!lr(t);)t=t.parent;return t}function oc(e,{escape:t}={escape:!0}){let n=t?Ke(e.name):e.name;const i=l3e(e);if(i){const{facet:r}=i;for(const a of Dr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${Ke(i.vgField(a))}])`)}return n}function mO(e){return nn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function lV(e,t){(Js(t.select)||!t.select.on)&&delete e.events,(Js(t.select)||!t.select.clear)&&delete e.clear,(Js(t.select)||!t.select.toggle)&&delete e.toggle}function Va(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function IM(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...IM(e.object)),t.push(...IM(e.property))),t)}function cV(e){return e.object.type==="MemberExpression"?cV(e.object):e.object.name==="datum"}function fV(e){const t=kD(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&cV(i)&&n.add(IM(i).slice(1).join("."))}),n}class Yh extends ht{model;filter;expr;_dependentFields;clone(){return new Yh(null,this.model,De(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=cx(this.model,this.filter,this),this._dependentFields=fV(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function c3e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Tt(a.name),o=a.select,l=Re(o)?o:o.type,c=Je(o)?De(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(c.mark={...d.mark,...c.mark}),(c[y]===void 0||c[y]===!0)&&(c[y]=De(d[y]??c[y])));const h=n[s]={...c,name:s,type:l,init:a.value,bind:a.bind,events:Re(c.on)?Wu(c.on,"scope"):Xt(De(c.on))};if(Va(h)&&(r++,r>1)){delete n[s];continue}const p=De(a);for(const y of hS)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&ce(T_e),n}function dV(e,t,n,i="datum"){const r=Re(t)?t:t.param,a=Tt(r),s=Ke(a+Dc);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",c=o.resolve==="global"?")":`, ${Ke(o.resolve)})`,d=`${l}${s}, ${i}${c}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function hV(e,t,n){const i=Tt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&ce(D_e(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,ce(k_e(o,r,n,a))):a=o[0].field}return`${s.name}[${Ke(Fr(a))}]`}function f3e(e,t){for(const[n,i]of Lu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new zi(new Yh(t,e,{param:n}),r,zt.Lookup,e.component.data.outputNodeRefCounts)}}function cx(e,t,n){return s0(t,i=>Re(i)?i:jAe(i)?dV(e,i,n):wY(i))}function d3e(e,t){if(e)return me(e)&&!su(e)?e.map(n=>Zk(n,t)).join(", "):e}function vA(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Hp(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:c,...d}=e.combine();if(!r){for(const h in d){const p=h,y=H$e[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(Um(v)){const{condition:b,...S}=v,w=Xt(b),_=c9[p];if(_){const{vgProp:A,part:$}=_,M=[...w.map(D=>{const{test:T,...O}=D;return{test:cx(null,T),...O}}),S];vA(d,$,A,M),delete d[p]}else if(_===null){const A={signal:w.map($=>{const{test:M,...D}=$;return`${cx(null,M)} ? ${VF(D)} : `}).join("")+VF(S)};d[p]=A}}else if(ve(v)){const b=c9[p];if(b){const{vgProp:S,part:w}=b;vA(d,w,S,v),delete d[p]}}qe(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},St(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Vt(c,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&ve(d.encode.labels.update.text)&&(p=Ec(o,"datum.label",d.encode.labels.update.text.signal)),vA(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of eX)e.hasAxisPart(p)||delete d.encode[p];St(d.encode)&&delete d.encode}const h=d3e(l,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Vt(c,0)}}}}function gV(e){const{axes:t}=e.component,n=[];for(const i of Mo)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function h3e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Hp(r,"grid",t)),...i.map(r=>Hp(r,"grid",t)),...n.map(r=>Hp(r,"main",t)),...i.map(r=>Hp(r,"main",t))].filter(r=>r)}function L9(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...oe(s),...oe(o)]),c={};for(const d of l.values())c[d]={signal:`${i.signal} === "${a}" ? ${ia(s[d])} : ${ia(o[d])}`};return c}return t[r]})])}function g3e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:MY(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=ve(n)?"axisOrient":`axis${Mm(n)}`,o=[...r,...r.map(c=>a+c.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:L9(o,i,e,n),vgAxisConfig:L9(l,i,e,n),axisConfigStyle:p3e([...l,...o],i)}}function p3e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Xt(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function qM(e,t,n,i={}){const r=tY(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const U9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??m3e(n,e),gridScale:({model:e,channel:t})=>y3e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||mV(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||pV(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??b3e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??x3e(t.type,n,fe(t)&&!!t.timeUnit,fe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??E3e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??w3e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=yV(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return iY(r?[u9(r)]:[],fe(s)?[u9(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>_3e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??A3e(n,t)};function m3e(e,t){return!Cn(e)&&fe(t)&&!_t(t?.bin)&&!Rn(t?.bin)}function y3e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function v3e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return ve(a)?a:I0(a);{const{configValue:s}=qM("labelAngle",i,t?.style,r);return s!==void 0?I0(s):n===kt&&qe([Bk,Uk],e.type)&&!(fe(e)&&e.timeUnit)?270:void 0}}function HM(e){return`(((${e.signal} % 360) + 360) % 360)`}function pV(e,t,n,i){if(e!==void 0)if(n==="x"){if(ve(e)){const r=HM(e),a=ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ve(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ve(e)){const r=HM(e),a=ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(ve(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function mV(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(ve(e)){const s=HM(e),o=ve(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(ve(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function b3e(e,t){if(t==="x"&&qe(["quantitative","temporal"],e))return!0}function x3e(e,t,n,i){if(n&&!Je(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function S3e(e){return e==="x"?"bottom":"left"}function E3e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Cn(t)&&t!=="log"){if(fe(e)){if(_t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&qe(["month","hours","day","quarter"],Mn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function w3e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(fe(t)){const{timeUnit:n}=t;if(n){const i=xY(n);if(i)return{signal:i}}}}function yV(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return rY(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function _3e(e,t){const n=e.values;if(me(n))return JY(t,n);if(ve(n))return n}function A3e(e,t){return e==="rect"&&ix(t)?1:0}class Jd extends ht{transform;_dependentFields;clone(){return new Jd(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=fV(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Qc(i)&&qY(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((c,d)=>`${wY({field:a,timeUnit:s,equal:c})} ? ${d} : `).join("")+o.length;t=new Jd(t,{calculate:l,as:eh(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ye(this.transform)}`}}function eh(e,t,n){return he(e,{prefix:t,suffix:"sort_index",...n})}function gS(e,t){return qe(["top","bottom"],t)?"column":qe(["left","right"],t)||e==="row"?"row":"column"}function th(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Vt((t||{})[e],r[e],n.header[e])}function pS(e,t,n,i){const r={};for(const a of e){const s=th(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const yO=["row","column"],vO=["header","footer"];function $3e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=pS(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=gS(t,o),c=I0(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...bV(c,l),...vV(l,c,a),...xV(i,r,t,dMe,vX)}}}function vV(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=mV(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function bV(e,t){const n=pV(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function M3e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of vO)if(n[r])for(const a of n[r]){const s=T3e(e,t,r,n,a);s!=null&&i.push(s)}return i}function C3e(e,t){const{sort:n}=e;return oo(n)?{field:he(n,{expr:"datum"}),order:n.order??"ascending"}:me(n)?{field:eh(e,t,{expr:"datum"}),order:"ascending"}:{field:he(e,{expr:"datum"}),order:n??"ascending"}}function GM(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=pS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=Xk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=gS(t,o);return{text:{signal:l?Ec(Ec(l,"datum.label",c),"datum.value",he(e,{expr:"parent"})):c},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...bV(a,d),...vV(d,a,s),...xV(n,e,t,hMe,bX)}}function T3e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=pS(["labelOrient"],s.header,o,t);(t==="row"&&!qe(["top","bottom"],h)||t==="column"&&!qe(["left","right"],h))&&(a=GM(s,t,o))}const l=lr(e)&&!Rm(e.facet),c=r.axes,d=c?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:C3e(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:c}:{}}}}return null}const D3e={column:{start:0,end:1},row:{start:1,end:0}};function k3e(e,t){return D3e[t][e]}function O3e(e,t){const n={};for(const i of Dr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=pS(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=gS(i,s),l=k3e(a,o);l!==void 0&&(n[o]=l)}}return St(n)?void 0:n}function xV(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=th(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function bO(e){return[...By(e,"width"),...By(e,"height"),...By(e,"childWidth"),...By(e,"childHeight")]}function By(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(Cn(s)&&Xc(o)){const l=e.scaleName(n);return lr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[B9(l,o)]:[B9(l,o),{name:r,update:SV(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=RM(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function B9(e,t){const n=`${e}_step`;return ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function SV(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Vt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ia(s)}, ${ia(a)}) * ${e}_step`}function EV(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function wV(e,t){return oe(e).reduce((n,i)=>({...n,...Gh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>$t(r.value),invalidValueRef:void 0})}),{})}function _V(e,t){if(lr(t))return e==="theta"?"independent":"shared";if(Wh(t))return"shared";if($O(t))return Wt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function xO(e,t){const n=e.scale[t],i=Wt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ce(uAe(t)),"independent"):e[i][t]||"shared"}const N3e={...mMe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},AV=oe(N3e);class R3e extends To{}const j9={symbols:z3e,gradient:F3e,labels:L3e,entries:U3e};function z3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:c}=n,d=s.filled&&c!=="trail";let h={...m_e({},n,d$e),...ZX(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?$V(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Bi)delete h.fill;else if(ue(h.fill,"field"))y?delete h.fill:(h.fill=$t(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=$t(b??1));else if(me(h.fill)){const S=YM(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=$t(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Bi)delete h.stroke;else if(ue(h.stroke,"field")||v)delete h.stroke;else if(me(h.stroke)){const S=Vt(YM(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==$o){const S=fe(t)&&CV(n,r,t);S?h.opacity=[{test:S,...$t(b??1)},$t(l.legend.unselectedOpacity)]:b&&(h.opacity=$t(b))}return h={...h,...e},St(h)?void 0:h}function F3e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const c=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?$V(s.opacity)||a.opacity:void 0;return c&&(o.opacity=$t(c)),o={...o,...e},St(o)?void 0:o}function L3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=fe(t)?CV(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:c,formatType:d}=a;let h;Cc(d)?h=ra({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:d,config:s}):c===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=ra({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&fe(t)&&t.timeUnit===void 0&&(h=ra({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return St(p)?void 0:p}function U3e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function $V(e){return MV(e,(t,n)=>Math.max(t,n.value))}function YM(e){return MV(e,(t,n)=>Vt(t,n.value))}function MV(e,t){if(O$e(e))return Xt(e.condition).reduce(t,e.value);if(fa(e))return e.value}function CV(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=Ke(n.field);return i.map(a=>`(!length(data(${Ke(Tt(a)+Dc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const P9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return jY(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return PY(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??G3e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Y3e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??j3e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>vd(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(yd(n)&&ja(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>B3e(t,e)};function B3e(e,t){const n=e.values;if(me(n))return JY(t,n);if(ve(n))return n}function j3e(e,t,n,i){if(t!=="shape"){const r=YM(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function P3e(e){const{legend:t}=e;return Vt(t.type,I3e(e))}function I3e({channel:e,timeUnit:t,scaleType:n}){if(yd(e)){if(qe(["quarter","month","day"],t))return"symbol";if(ja(n))return"gradient"}return"symbol"}function q3e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??H3e(n,t)}function H3e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function G3e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(ja(r))return n==="horizontal"?i==="top"||i==="bottom"?I9(t,"width",s,a):s:I9(t,"height",l,o)}function I9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function Y3e(e){if(qe(["quantile","threshold","log","symlog"],e))return"greedy"}function TV(e){const t=Rt(e)?X3e(e):Z3e(e);return e.component.legends=t,t}function X3e(e){const{encoding:t}=e,n={};for(const i of[Bi,...SX]){const r=cn(t[i]);!r||!e.getScaleComponent(i)||i===ji&&fe(r)&&r.type===Hh||(n[i]=Q3e(e,i))}return n}function V3e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function W3e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function Q3e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new R3e({},V3e(e,t));a3e(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const c=e.getScaleComponent(t).get("type"),d=cn(r[t]),h=fe(d)?Mn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=P3e({legend:n,channel:t,timeUnit:h,scaleType:c}),v=q3e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:c,orient:p,legendType:y,direction:v};for(const $ of AV){if(y==="gradient"&&$.startsWith("symbol")||y==="symbol"&&$.startsWith("gradient"))continue;const M=$ in P9?P9[$](b):n[$];if(M!==void 0){const D=W3e(M,$,n,e.fieldDef(t));(D||a.legend[$]===void 0)&&o.set($,M,D)}}const S=n?.encoding??{},w=o.get("selections"),_={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const M=wV(S[$]??{},e),D=$ in j9?j9[$](M,A):M;D!==void 0&&!St(D)&&(_[$]={...w?.length&&fe(d)?{name:`${Tt(d.field)}_legend_${$}`}:{},...w?.length?{interactive:!!w}:{},update:D})}return St(_)||o.set("encode",_,!!n?.encoding),o}function Z3e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){TV(i);for(const r of oe(i.component.legends))n.legend[r]=xO(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=DV(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of oe(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function DV(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of AV){const s=ju(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,l)=>{switch(a){case"symbolType":return K3e(o,l);case"title":return aY(o,l);case"type":return r=!0,Ki("symbol")}return lS(o,l,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&Kb(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Kb(e.explicit,["encode","gradient"])),e}function K3e(e,t){return t.value==="circle"?t:e}function J3e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function kV(e){const t=e.component.legends,n={};for(const r of oe(t)){const a=e.getScaleComponent(r),s=ut(a.get("domains"));if(n[s])for(const o of n[s])DV(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return nn(n).flat().map(r=>eTe(r,e.config)).filter(r=>r!==void 0)}function eTe(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of SX)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&ve(a.encode.labels.update.text)&&(s=Ec(i,"datum.label",a.encode.labels.update.text.signal)),J3e(a,"labels","text",{signal:s})}return a}}function tTe(e){return Wh(e)||$O(e)?nTe(e):OV(e)}function nTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),OV(e))}function OV(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=ve(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return qe(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const iTe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class NV extends To{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function RV(e){e.component.projection=Rt(e)?rTe(e):oTe(e)}function rTe(e){if(e.hasProjection){const t=zn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?aTe(e):void 0,a=new NV(e.projectionName(!0),{...zn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function aTe(e){const t=[],{encoding:n}=e;for(const i of[[Sa,xa],[Lr,Ea]])(cn(n[i[0]])||cn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ji)&&e.typedFieldDef(ji).type===Hh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zt.Main)),t}function sTe(e,t){const n=fk(iTe,r=>!!(!tn(e.explicit,r)&&!tn(t.explicit,r)||tn(e.explicit,r)&&tn(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function oTe(e){if(e.children.length===0)return;let t;for(const i of e.children)RV(i);const n=fk(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=sTe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new NV(i,t.specifiedProjection,t.size,De(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function uTe(e,t,n,i){if(Lm(t,n)){const r=Rt(e)?e.axis(n)??e.legend(n)??{}:{},a=he(t,{expr:"datum"}),s=he(t,{expr:"datum",binSuffix:"end"});return{formulaAs:he(t,{binSuffix:"range",forAs:!0}),formula:Nm(a,s,r.format,r.formatType,i)}}return{}}function zV(e,t){return`${ZG(e)}_${t}`}function lTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function SO(e,t,n){const i=iS(n,void 0)??{},r=zV(i,t);return e.getName(`${r}_bins`)}function cTe(e){return"as"in e}function q9(e,t,n){let i,r;cTe(e)?i=Re(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[he(e,{forAs:!0}),he(e,{binSuffix:"end",forAs:!0})];const a={...iS(t,void 0)},s=zV(a,e.field),{signal:o,extentSignal:l}=lTe(n,s);if(Y2(a.extent)){const d=a.extent;r=hV(n,d.param,d),delete a.extent}const c={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:c}}class Wa extends ht{bins;clone(){return new Wa(null,De(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Si(a)&&_t(a.bin)){const{key:o,binComponent:l}=q9(a,a.bin,n);r[o]={...l,...r[o],...uTe(n,a,s,n.config)}}return r},{});return St(i)?null:new Wa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=q9(n,n.bin,i);return new Wa(t,{[r]:a})}merge(t,n){for(const i of oe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ba([...this.bins[i].as,...t.bins[i].as],Ye)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(nn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(nn(this.bins).map(t=>t.field))}hash(){return`Bin ${Ye(this.bins)}`}assemble(){return nn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:Fr(t.field),as:i,signal:t.signal,...Y2(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:Fr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of r)for(let c=0;c<2;c++)n.push({type:"formula",expr:he({field:i[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function fTe(e,t,n,i){const r=Rt(i)?i.encoding[ms(t)]:void 0;if(Si(n)&&Rt(i)&&GY(n,r,i.markDef,i.config)){e.add(he(n,{})),e.add(he(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,l=Bu({fieldDef:n,markDef:s,config:o});q0(a)&&l!==.5&&Wt(t)&&(e.add(he(n,{suffix:cS})),e.add(he(n,{suffix:fS}))),n.bin&&Lm(n,t)&&e.add(he(n,{binSuffix:"range"}))}else if(IG(t)){const a=PG(t);e.add(i.getName(a))}else e.add(he(n));return Qc(n)&&JAe(n.scale?.range)&&e.add(n.scale.range.field),e}function dTe(e,t){for(const n of oe(t)){const i=t[n];for(const r of oe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class sa extends ht{dimensions;measures;clone(){return new sa(null,new Set(this.dimensions),De(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:l,field:c}=s;if(l)if(l==="count")r["*"]??={},r["*"].count=new Set([he(s,{forAs:!0})]);else{if(mo(l)||nl(l)){const d=mo(l)?"argmin":"argmax",h=l[d];r[h]??={},r[h][d]=new Set([he({op:d,field:h},{forAs:!0})])}else r[c]??={},r[c][l]=new Set([he(s,{forAs:!0})]);ys(o)&&n.scaleDomain(o)==="unaggregated"&&(r[c]??={},r[c].min=new Set([he({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([he({field:c,aggregate:"max"},{forAs:!0})]))}else fTe(a,o,s,n)}),a.size+oe(r).length===0)?null:new sa(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:l}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([l||he(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(l||he(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+oe(r).length===0?null:new sa(t,i,r)}merge(t){return NG(this.dimensions,t.dimensions)?(dTe(this.measures,t.measures),!0):(_Ae("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...oe(this.measures)])}producedFields(){const t=new Set;for(const n of oe(this.measures))for(const i of oe(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ye({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of oe(this.measures))for(const s of oe(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:Fr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Fr),ops:t,fields:n,as:i}}}class Xh extends ht{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Dr){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]={name:n.getName(`${a}_domain`),fields:[he(s),..._t(o)?[he(s,{binSuffix:"end"})]:[]],...oo(l)?{sortField:l}:me(l)?{sortIndexField:eh(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Dr)this[n]&&(t+=` ${n.charAt(0)}:${Ye(this[n])}`);return t}get fields(){const t=[];for(const n of Dr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Dr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Mo){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Cn(r)&&Xc(a)){const s=mS(this.childModel,n),o=AO(s);o?t[n]=o:ce(Ak(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:c}=this[t];if(l){const{op:d=eS,field:h}=l;a.push(h),s.push(d),o.push(he(l,{forAs:!0}))}else c&&(a.push(c),s.push("max"),o.push(c));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const l of yO){for(const c of vO){const d=i[l]?.[c]??[];for(const h of d)if(h.axes?.length>0){a[l]=!0;break}}if(a[l]){const c=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[so,ao])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function H9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function hTe(e,t){const n=gk(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=H9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=H9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ce(N_e(t)),null}function gTe(e){const t={};return Mv(e.filter,n=>{if(EY(n)){let i=null;kk(n)?i=nr(n.equal):Nk(n)?i=nr(n.lte):Ok(n)?i=nr(n.lt):Rk(n)?i=nr(n.gt):zk(n)?i=nr(n.gte):Fk(n)?i=n.range[0]:Lk(n)&&(i=(n.oneOf??n.in)[0]),i&&(Vc(i)?t[n.field]="date":Dt(i)?t[n.field]="number":Re(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function pTe(e){const t={};function n(i){Qd(i)?t[i.field]="date":i.type==="quantitative"&&s_e(i.aggregate)?t[i.field]="number":Hd(i.field)>1?i.field in t||(t[i.field]="flatten"):Qc(i)&&oo(i.sort)&&Hd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Rt(e)||lr(e))&&e.forEachFieldDef((i,r)=>{if(Si(i))n(i);else{const a=Gc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Rt(e)){const{mark:i,markDef:r,encoding:a}=e;if(il(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];fe(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function mTe(e){const t={};if(Rt(e)&&e.component.selection)for(const n of oe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&Hd(r.field)>1&&(t[r.field]="flatten")}return t}class ti extends ht{_parse;clone(){return new ti(null,De(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ye(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!wu(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of oe(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:ce(e9(o,i[o],l.value)))}for(const o of oe(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:ce(e9(o,n[o],l)))}const a=new To(n,i);r.copyAll(a);const s={};for(const o of oe(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return oe(s).length===0||r.parseNothing?null:new ti(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of oe(this._parse)){const i=this._parse[n];Hd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(oe(this._parse))}dependentFields(){return new Set(oe(this._parse))}assembleTransforms(t=!1){return oe(this._parse).filter(n=>t?Hd(n)>1:!0).map(n=>{const i=hTe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Ih(n)}:null}).filter(n=>n!==null)}}class Pu extends ht{clone(){return new Pu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ha])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ha}}}class jm extends ht{params;clone(){return new jm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ye(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Pm extends ht{params;clone(){return new Pm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ye(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kc extends ht{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(wu(t)||(n=t.format?{...ur(t.format,["parse"])}:{}),H0(t))this._data={values:t.values};else if(Zd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];qe(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else BX(t)?this._data={values:[{type:"Sphere"}]}:(LX(t)||wu(t))&&(this._data={});this._generator=wu(t),t.name&&(this._name=t.name),n&&!St(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function EO(e){return e instanceof kc||e instanceof jm||e instanceof Pm}class wO{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Zc extends wO{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class _O extends wO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class yTe extends _O{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of oe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class vTe extends _O{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&mO(t)}run(t){t instanceof Pu&&(this.requiresSelectionId&&(EO(t.parent)||t.parent instanceof sa||t.parent instanceof ti)||(this.setModified(),t.remove()))}}class bTe extends wO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Xa&&(i=t.producedFields(),dk(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class xTe extends _O{constructor(){super()}run(t){t instanceof zi&&!t.isRequired()&&(this.setModified(),t.remove())}}class STe extends Zc{run(t){if(!EO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ti)if(t instanceof ti)this.setModified(),t.merge(n);else{if(hk(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class ETe extends Zc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ti);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of oe(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!St(r)){this.setModified();const s=new ti(t,r);for(const o of n){if(o instanceof ti)for(const l of oe(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof ti&&oe(o.parse).length===0&&o.remove()}}}}}class wTe extends Zc{run(t){t instanceof zi||t.numChildren()>0||t instanceof Xh||t instanceof kc||(this.setModified(),t.remove())}}class _Te extends Zc{run(t){const n=t.children.filter(r=>r instanceof Xa),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class ATe extends Zc{run(t){const n=t.children.filter(r=>r instanceof sa),i={};for(const r of n){const a=Ye(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of oe(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class $Te extends Zc{model;constructor(t){super(),this.model=t}run(t){const n=!(EO(t)||t instanceof Yh||t instanceof ti||t instanceof Pu),i=[],r=[];for(const a of t.children)a instanceof Wa&&(n&&!hk(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Wa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class MTe extends Zc{run(t){const n=[...t.children];if(!qd(n,s=>s instanceof zi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof zi){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof zi)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Kc extends ht{transform;clone(){return new Kc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??he(t)}hash(){return`JoinAggregateTransform ${Ye(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class nh extends ht{filter;clone(){return new nh(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((c,d,h)=>{const p=ys(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=Hk({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:G2(v)});b!=="show"&&b!=="always-valid"&&(c[d.field]=d)}return c},{});return oe(l).length?new nh(t,l):null}dependentFields(){return new Set(oe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ye(this.filter)}`}assemble(){const t=oe(this.filter).reduce((n,i)=>{const r=this.filter[i],a=he(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${XM(a)}))`):r.type==="quantitative"&&n.push(XM(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function XM(e){return`isValid(${e}) && isFinite(+${e})`}function CTe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=he(i);return r&&t.push(r),t},[])}function TTe(e){return me(e)&&e.every(t=>Re(t))&&e.length>1}class lo extends ht{_stack;clone(){return new lo(null,De(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),l.push(Vt(h.order,"ascending"));const c={field:o,order:l};let d;return TTe(a)?d=a:Re(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new lo(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:c,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:l}=i,c=a.map(y=>{const v=r[y];return da(v)}).filter(y=>!!y),d=CTe(n),h=n.encoding.order;let p;if(me(h)||fe(h))p=nY(h);else{const y=YY(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new lo(t,{dimensionFieldDefs:c,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ye(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[he(r,{binSuffix:"mid"})]:[he(r,{}),he(r,{binSuffix:"end"})]:[he(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:c}=this._stack;if(l)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=he(d,{expr:"datum"}),v=he(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${XM(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:he(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:he(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:c,offset:o}),t}}class Vh extends ht{transform;clone(){return new Vh(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??he(t)}hash(){return`WindowTransform ${Ye(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>wk(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),l.push(h.order??"ascending");const c={field:o,order:l},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:c,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function DTe(e){function t(n){if(!(n instanceof Xh)){const i=n.clone();if(i instanceof zi){const r=WM+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof sa||i instanceof lo||i instanceof Vh||i instanceof Kc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function VM(e){if(e instanceof Xh)if(e.numChildren()===1&&!(e.children[0]instanceof zi)){const t=e.children[0];(t instanceof sa||t instanceof lo||t instanceof Vh||t instanceof Kc)&&t.addDimensions(e.fields),t.swapWithParent(),VM(e)}else{const t=e.model.component.data.main;FV(t);const n=DTe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(VM)}function FV(e){if(e instanceof zi&&e.type===zt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Xh||(t.swapWithParent(),FV(e))}}const WM="scale_",jy=5;function QM(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!QM(t.children))return!1}return!0}function Hr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function G9(e,t,n){let i=e.sources,r=!1;return r=Hr(new xTe,i)||r,r=Hr(new vTe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Hr(new wTe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Hr(new STe,i)||r,r=Hr(new $Te(t),i)||r,r=Hr(new bTe,i)||r,r=Hr(new ETe,i)||r,r=Hr(new ATe,i)||r,r=Hr(new _Te,i)||r,r=Hr(new yTe,i)||r,r=Hr(new MTe,i)||r),e.sources=i,r}function kTe(e,t){QM(e.sources);let n=0,i=0;for(let r=0;r<jy&&G9(e,t,!0);r++)n++;e.sources.map(VM);for(let r=0;r<jy&&G9(e,t,!1);r++)i++;QM(e.sources),Math.max(n,i)===jy&&ce(`Maximum optimization runs(${jy}) reached.`)}class xn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new xn(()=>t(n))}}function LV(e){Rt(e)?OTe(e):NTe(e)}function OTe(e){const t=e.component.scales;for(const n of oe(t)){const i=zTe(e,n);if(t[n].setWithExplicit("domains",i),LTe(e,n),e.component.data.isFaceted){let a=e;for(;!lr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Ks(o)&&(o.data=WM+o.data.replace(WM,""))}}}function NTe(e){for(const n of e.children)LV(n);const t=e.component.scales;for(const n of oe(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=ju(i,s.getWithExplicit("domains"),"domains","scale",ZM);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&ce($_e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function RTe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=Y9(t,n);if(!r){ce(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=Y9(t,n);if(r)return"unaggregated"}return e}function zTe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=RTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&cn(i.x2)?cn(i.x)?ju(nu(n,r,e,"x"),nu(n,r,e,"x2"),"domain","scale",ZM):nu(n,r,e,"x2"):t==="y"&&cn(i.y2)?cn(i.y)?ju(nu(n,r,e,"y"),nu(n,r,e,"y2"),"domain","scale",ZM):nu(n,r,e,"y2"):nu(n,r,e,t)}function FTe(e,t,n){return e.map(i=>({signal:`{data: ${rS(i,{timeUnit:n,type:t})}}`}))}function bA(e,t,n){const i=Mn(n)?.unit;return t==="temporal"||i?FTe(e,t,i):[e]}function nu(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,c=cn(r[i]),{type:d}=c,h=c.timeUnit,p=TCe({invalid:ns("invalid",a,o),isPath:il(s)});if(KAe(t)){const b=nu(e,void 0,n,i),S=bA(t.unionWith,d,h);return Ra([...S,...b.value])}else{if(ve(t))return Ra([t]);if(t&&t!=="unaggregated"&&!TY(t))return Ra(bA(t,d,h))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Ki([[0,1]]);const b=n.requestDataName(p);return Ki([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ys(i)&&fe(c)?UTe(n,i,e):void 0;if(vs(c)){const b=bA([c.datum],d,h);return Ki(b)}const v=c;if(t==="unaggregated"){const{field:b}=c;return Ki([{data:n.requestDataName(p),field:he({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:he({field:b,aggregate:"max"})}])}else if(_t(v.bin)){if(Cn(e))return Ki(e==="bin-ordinal"?[]:[{data:P0(y)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(i,Lm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Je(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(_t(b)){const S=SO(n,v.field,b);return Ki([new xn(()=>{const w=n.getSignalName(S);return`[${w}.start, ${w}.stop]`})])}else return Ki([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&qe(["time","utc"],e)){const b=r[ms(i)];if(GY(v,b,a,o)){const S=n.requestDataName(p),w=Bu({fieldDef:v,fieldDef2:b,markDef:a,config:o}),_=q0(s)&&w!==.5&&Wt(i);return Ki([{data:S,field:n.vgField(i,_?{suffix:cS}:{})},{data:S,field:n.vgField(i,{suffix:_?fS:"end"})}])}}return Ki(y?[{data:P0(y)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function xA(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":eS),...i?{field:Fr(i)}:{},...r?{order:r}:{}}}function LTe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=TY(i)?i:void 0,s=Yc(r)&&Y2(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function UTe(e,t,n){if(!Cn(n))return;const i=e.fieldDef(t),r=i.sort;if(qY(r))return{op:"min",field:eh(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(oo(r)){const o=a&&!s.has(r.field);return xA(r,o)}else if(T$e(r)){const{encoding:o,order:l}=r,c=e.fieldDef(o),{aggregate:d,field:h}=c,p=a&&!s.has(h);if(mo(d)||nl(d))return xA({field:he(c),order:l},p);if(wk(d)||!d)return xA({op:d,field:h,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(qe(["ascending",void 0],r))return!0}}function Y9(e,t){const{aggregate:n,type:i}=e;return n?Re(n)&&!u_e.has(n)?{valid:!1,reason:tAe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:nAe(e)}:{valid:!0}:{valid:!1,reason:eAe(e)}}function ZM(e,t,n,i){return e.explicit&&t.explicit&&ce(oAe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function BTe(e){const t=Ba(e.map(s=>{if(Ks(s)){const{sort:o,...l}=s;return l}return s}),Ye),n=Ba(e.map(s=>{if(Ks(s)){const o=s.sort;return o!==void 0&&!P0(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ye);if(t.length===0)return;if(t.length===1){const s=e[0];if(Ks(s)&&n.length>0){let o=n[0];if(n.length>1){ce(n9);const l=n.filter(c=>Je(c)&&"op"in c&&c.op!=="min");n.every(c=>Je(c)&&"op"in c)&&l.length===1?o=l[0]:o=!0}else if(Je(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Ba(n.map(s=>P0(s)||!("op"in s)||Re(s.op)&&tn(r_e,s.op)?s:(ce(lAe(s)),!0)),Ye);let r;i.length===1?r=i[0]:i.length>1&&(ce(n9),r=!0);const a=Ba(e.map(s=>Ks(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function AO(e){if(Ks(e)&&Re(e.field))return e.field;if(l_e(e)){let t;for(const n of e.fields)if(Ks(n)&&Re(n.field)){if(!t)t=n.field;else if(t!==n.field)return ce(cAe),t}return ce(fAe),t}else if(c_e(e)){ce(dAe);const t=e.fields[0];return Re(t)?t:void 0}}function mS(e,t){const i=e.component.scales[t].get("domains").map(r=>(Ks(r)&&(r.data=e.lookupDataSource(r.data)),r));return BTe(i)}function UV(e){return Wh(e)||$O(e)?e.children.reduce((t,n)=>t.concat(UV(n)),X9(e)):X9(e)}function X9(e){return oe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:c,reverse:d,...h}=r,p=jTe(r.range,a,n,e),y=mS(e,n),v=o?jCe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function jTe(e,t,n,i){if(Wt(n)){if(Xc(e))return{step:{signal:`${t}_step`}}}else if(Je(e)&&Ks(e))return{...e,data:i.lookupDataSource(e.data)};return e}class BV extends To{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(qe([Fn.LOG,Fn.TIME,Fn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&qe([Fn.LINEAR,Fn.SQRT,Fn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(me(o)){const l=o[0],c=o[o.length-1];if(Dt(l)&&Dt(c))if(l<=0&&c>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const PTe=["range","scheme"];function ITe(e){const t=e.component.scales;for(const n of Ek){const i=t[n];if(!i)continue;const r=qTe(n,e);i.setWithExplicit("range",r)}}function V9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Pi(t),s=e.getName(a);if(Je(i)&&i.binned&&i.step!==void 0)return new xn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(_t(i)){const o=SO(e,r,i);return new xn(()=>{const l=e.getSignalName(o),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${c})`})}}}function qTe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of PTe)if(n[h]!==void 0){const p=kM(a,h),y=DY(e,h);if(!p)ce(lY(a,h,e));else if(y)ce(y);else switch(h){case"range":{const v=n.range;if(me(v)){if(Wt(e))return Ra(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),w=t.getSignalName.bind(t);return xn.fromName(w,S)}return b}))}else if(Je(v))return Ra({data:t.requestDataName(zt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ra(v)}case"scheme":return Ra(HTe(n[h]))}}const s=e===kt||e==="xOffset"?"width":"height",o=i[s];if(rs(o)){if(Wt(e))if(Cn(a)){const h=PV(o,t,e);if(h)return Ra({step:h})}else ce(cY(s));else if(Dm(e)){const h=e===Qu?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=IV(o,a);if(v)return Ra(v)}}}const{rangeMin:l,rangeMax:c}=n,d=GTe(e,t);return(l!==void 0||c!==void 0)&&kM(a,"rangeMin")&&me(d)&&d.length===2?Ra([l??d[0],c??d[1]]):Ki(d)}function HTe(e){return ZAe(e)?{scheme:e.name,...ur(e,["name"])}:{scheme:e}}function jV(e,t,n,{center:i}={}){const r=Pi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Dn&&ca(n)?i?[xn.fromName(o=>`${s(o)}/2`,a),xn.fromName(o=>`-${s(o)}/2`,a)]:[xn.fromName(s,a),0]:i?[xn.fromName(o=>`-${s(o)}/2`,a),xn.fromName(o=>`${s(o)}/2`,a)]:[0,xn.fromName(s,a)]}function GTe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=cn(a[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:d}=t.specifiedScales[e];switch(e){case kt:case Dn:{if(qe(["point","band"],l)){const h=qV(e,n,i.view);if(rs(h))return{step:PV(h,t,e)}}return jV(e,t,l)}case Qu:case qh:return YTe(e,t,l);case Ao:{const h=WTe(r,i),p=QTe(r,n,t,i);return Xd(l)?VTe(h,p,XTe(l,i,c,e)):[h,p]}case Br:return[0,Math.PI*2];case Hc:return[0,360];case ba:return[0,new xn(()=>{const h=t.getSignalName(lr(t.parent)?"child_width":"width"),p=t.getSignalName(lr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Zu:return{step:1e3/i.scale.framesPerSecond};case el:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case tl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ji:return"symbol";case Bi:case gs:case ps:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case $o:case Ku:case Ju:return[i.scale.minOpacity,i.scale.maxOpacity]}}function PV(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=vk(n),s=i[a];if(wX({step:e,offsetIsDiscrete:Oe(s)&&_Y(s.type)})==="offset"&&iX(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${p_e(h)})`}}else return e.step}function IV(e,t){if(wX({step:e,offsetIsDiscrete:Cn(t)})==="offset")return{step:e.step}}function YTe(e,t,n){const i=e===Qu?"x":"y",r=t.getScaleComponent(i);if(!r)return jV(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const c=qV(i,t.size,t.config.view);if(rs(c)){const d=IV(c,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const c=t.encoding[i];if(fe(c)&&c.timeUnit){const d=xY(c.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Bu({fieldDef:c,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(h){const v=ve(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=ve(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return kG(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function qV(e,t,n){const i=e===kt?"width":"height",r=t[i];return r||ox(n,i)}function XTe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&me(n)?n.length+1:(ce(SAe(i)),3)}}function VTe(e,t,n){const i=()=>{const r=ia(t),a=ia(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return ve(t)?new xn(i):{signal:i()}}function WTe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(X2("size",e))}const W9=.95;function QTe(e,t,n,i){const r={x:V9(n,"x"),y:V9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=Q9(t,r,i.view);return Dt(a)?a-1:new xn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=Q9(t,r,i.view);return Dt(a)?Math.pow(W9*a,2):new xn(()=>`pow(${W9} * ${a.signal}, 2)`)}}throw new Error(X2("size",e))}function Q9(e,t,n){const i=rs(e.width)?e.width.step:zM(n,"width"),r=rs(e.height)?e.height.step:zM(n,"height");return t.x||t.y?new xn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function HV(e,t){Rt(e)?ZTe(e,t):YV(e,t)}function ZTe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of oe(n)){const l=s[o],c=n[o],d=e.getScaleComponent(o),h=cn(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=kM(y,t),w=DY(o,t);if(p!==void 0&&(S?w&&ce(w):ce(lY(y,t,o))),S&&w===void 0)if(p!==void 0){const _=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":Vc(l[t])||A==="temporal"||_?c.set(t,{signal:rS(l[t],{type:A,timeUnit:_})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const _=ue(Z9,t)?Z9[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:rX(r,o),hasSecondaryRangeChannel:!!r[ms(o)]}):i.scale[t];_!==void 0&&c.set(t,_,!1)}}}const Z9={bins:({model:e,fieldOrDatumDef:t})=>fe(t)?KTe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>JTe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>eDe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>tDe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>nDe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>iDe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=fe(e)?e.sort:void 0;return rDe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>aDe(e,t,n,i,r,a.scale,s)};function GV(e){Rt(e)?ITe(e):YV(e,"range")}function YV(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?GV(i):HV(i,t);for(const i of oe(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=ju(r,o,t,"scale",FX((l,c)=>{switch(t){case"range":return l.step&&c.step?l.step-c.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function KTe(e,t){const n=t.bin;if(_t(n)){const i=SO(e,t.field,n);return new xn(()=>e.getSignalName(i))}else if(Rn(n)&&Yc(n)&&n.step!==void 0)return{step:n.step}}function JTe(e,t){if(qe([Bi,gs,ps],e)&&t!=="nominal")return"hcl"}function eDe(e,t,n,i,r,a){if(!(da(a)?.bin||me(n)||r!=null||i!=null||qe([Fn.TIME,Fn.UTC],e)))return Wt(t)?!0:void 0}function tDe(e,t,n,i,r,a){if(Wt(e)){if(ja(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(fe(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Fn.POINT)return n.pointPadding}}function nDe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:c,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Vt(s,n==="bar"?o:n==="tick"?c:l)}else if(Dm(t)&&i===Fn.BAND)return r.offsetBandPaddingInner}}function iDe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Fn.BAND)return Vt(s,ve(i)?{signal:`${i.signal}/2`}:i/2)}else if(Dm(t)){if(n===Fn.POINT)return .5;if(n===Fn.BAND)return r.offsetBandPaddingOuter}}}function rDe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ca(e)&&t==="descending"?ve(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ca(e)&&t==="descending")return!0}function aDe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&ca(r)){if(me(n)){const l=n[0],c=n[n.length-1];if(Dt(l)&&l<=0&&Dt(c)&&c>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Xd(r))return!0;if(!(fe(t)&&t.bin)&&qe([...Mo,...Wwe],e)){const{orient:l,type:c}=i;return qe(["bar","area","line","trail"],c)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:qe(["bar","area"],c)&&!s?!0:a?.zero}return!1}function sDe(e,t,n,i,r=!1){const a=oDe(t,n,i,r),{type:s}=e;return ys(t)?s!==void 0?r$e(t,s)?fe(n)&&!i$e(s,n.type)?(ce(aAe(s,a)),a):s:(ce(rAe(t,s,a)),a):a:null}function oDe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(yd(e)||uA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ce(lA(e,"ordinal")),"ordinal";if(oA(e))return"band";if(Wt(e)||Dm(e)){if(qe(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in Sk)return"band";const r=n[Pi(e)];return Mc(r)||Wd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return yd(e)?"time":uA(e)==="discrete"?(ce(lA(e,"temporal")),"ordinal"):fe(t)&&t.timeUnit&&Mn(t.timeUnit).utc?"utc":oA(e)?"band":"time";case"quantitative":return yd(e)?fe(t)&&_t(t.bin)?"bin-ordinal":"linear":uA(e)==="discrete"?(ce(lA(e,"quantitative")),"ordinal"):oA(e)?"band":"linear";case"geojson":return}throw new Error(oY(t.type))}function uDe(e,{ignoreRange:t}={}){XV(e),LV(e);for(const n of n$e)HV(e,n);t||GV(e)}function XV(e){Rt(e)?e.component.scales=lDe(e):e.component.scales=fDe(e)}function lDe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of Ek){const s=cn(t[a]);if(s&&n===NY&&a===ji&&s.type===Hh)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const l=rX(t,a),c=sDe(o,a,s,i,l);r[a]=new BV(e.scaleName(`${a}`,!0),{value:c,explicit:o.type===c})}}return r}const cDe=FX((e,t)=>r9(e)-r9(t));function fDe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){XV(r);for(const a of oe(r.component.scales))if(i.scale[a]??=_V(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?YAe(s.value,o.value)?n[a]=ju(s,o,"type","scale",cDe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of oe(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new BV(a,s);for(const o of e.children){const l=o.component.scales[r];l&&(o.renameScale(l.get("name"),a),l.merged=!0)}}return t}class SA{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Rt(e){return e?.type==="unit"}function lr(e){return e?.type==="facet"}function $O(e){return e?.type==="concat"}function Wh(e){return e?.type==="layer"}class MO{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=zn(o),this.name=t.name??r,this.title=su(t.title)?{text:t.title}:t.title?zn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new SA,this.projectionNameMap=i?i.projectionNameMap:new SA,this.signalNameMap=i?i.signalNameMap:new SA,this.data=t.data,this.description=t.description,this.transforms=yCe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:SMe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:tS(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new To,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?De(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){uDe(this)}parseProjection(){RV(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){TV(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of oe(i)){const s=i[a];s!==void 0&&(r[a]=$t(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=$t(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:St(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=O3e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Dr)t[i].title&&n.push($3e(this,i));for(const i of yO)n=n.concat(M3e(this,i));return n}assembleAxes(){return h3e(this.component.axes,this.config)}assembleLegends(){return kV(this)}assembleProjections(){return tTe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...KG(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return qe(["unit","layer"],this.type)?qe(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",St(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||lr(this.parent)?UV(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Tt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(lr(this.parent)){const n=EV(t),i=H2(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Cn(a)&&Xc(s)){const o=r.get("name"),l=mS(this,i),c=AO(l);if(c){const d=he({aggregate:"distinct",field:c},{expr:"datum"});return{signal:SV(o,r,d)}}else return ce(Ak(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(HG(t)&&ys(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(x_e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class VV extends MO{vgField(t,n={}){const i=this.fieldDef(t);if(i)return he(i,n)}reduceFieldDef(t,n){return Q$e(this.getMapping(),(i,r,a)=>{const s=da(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){Jk(this.getMapping(),(i,r)=>{const a=da(i);a&&t(a,r)},n)}}class yS extends ht{transform;clone(){return new yS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ye(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class vS extends ht{transform;clone(){return new vS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ye(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class bS extends ht{transform;clone(){return new bS(this.parent,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ye(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class xS extends ht{transform;clone(){return new xS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ye(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class xd extends ht{fields;geojson;signal;clone(){return new xd(null,De(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Sa,xa],[Lr,Ea]]){const a=r.map(s=>{const o=cn(n.encoding[s]);return fe(o)?o.field:vs(o)?{expr:`${o.datum}`}:fa(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new xd(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ji)){const r=n.typedFieldDef(ji);r.type===Hh&&(t=new xd(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Re);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ye(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class G0 extends ht{projection;fields;as;clone(){return new G0(null,this.projection,De(this.fields),De(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Sa,xa],[Lr,Ea]]){const r=i.map(s=>{const o=cn(n.encoding[s]);return fe(o)?o.field:vs(o)?{expr:`${o.datum}`}:fa(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Lr?"2":"";(r[0]||r[1])&&(t=new G0(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Re))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ye(this.fields)} ${Ye(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class uc extends ht{transform;clone(){return new uc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new uc(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(fe(r)&&fe(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:c,frame:d,keyvals:h}=s.impute,p=oX(n.mark,i);return new uc(t,{impute:s.field,key:o.field,...l?{method:l}:{},...c!==void 0?{value:c}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Ye(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:KMe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const c={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,c,d]}else return[l]}}class SS extends ht{transform;clone(){return new SS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ye(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Y0 extends ht{transform;secondary;clone(){return new Y0(null,De(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(JMe(s)){let l=ZV(s.data,a);l||(l=new kc(s.data),a.push(l));const c=n.getName(`lookup_${r}`);o=new zi(l,c,zt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=o}else if(eCe(s)){const l=s.param;i={as:l,...i};let c;try{c=n.getSelectionComponent(Tt(l),l)}catch{throw new Error(__e(l))}if(o=c.materialized,!o)throw new Error(A_e(l))}return new Y0(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Xt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ye({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Xt(this.transform.as)}:{}};else{let n=this.transform.as;Re(n)||(ce(F_e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class ES extends ht{transform;clone(){return new ES(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ye(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class wS extends ht{transform;clone(){return new wS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ye(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class _S extends ht{transform;clone(){return new _S(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ye(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class AS extends ht{transform;clone(){return new AS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ye(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function WV(e){let t=0;function n(i,r){if(i instanceof kc&&!i.isGenerator&&!Zd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ti&&(i.parent instanceof kc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Xh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof jm||i instanceof Pm||i instanceof nh||i instanceof Yh||i instanceof Jd||i instanceof G0||i instanceof sa||i instanceof Y0||i instanceof Vh||i instanceof Kc||i instanceof xS||i instanceof bS||i instanceof yS||i instanceof SS||i instanceof ES||i instanceof wS||i instanceof Pu||i instanceof AS||i instanceof _S||i instanceof vS)&&r.transform.push(i.assemble()),(i instanceof Wa||i instanceof Xa||i instanceof uc||i instanceof lo||i instanceof xd)&&r.transform.push(...i.assemble()),i instanceof zi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof zi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof zi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function dDe(e){const t=[],n=WV(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function hDe(e,t){const n=[],i=WV(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function gDe(e){return e==="top"||e==="left"||ve(e)?"header":"footer"}function pDe(e){for(const t of Dr)mDe(e,t);K9(e,"x"),K9(e,"y")}function mDe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=th("title",null,i,t);let l=vd(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(l=me(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=th("labelOrient",s.header,i,t),d=s.header!==null?Vt(s.header?.labels,i.header.labels,!0):!1,h=qe(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[h]:t==="facet"?[]:[QV(e,t,d)]}}}function QV(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function K9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=xO(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=gDe(o.get("orient"));s[l]??=[QV(e,a,!1)];const c=Hp(o,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),o.mainExtracted=!0}}}}function yDe(e){CO(e),fx(e,"width"),fx(e,"height")}function vDe(e){CO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";fx(e,t),fx(e,n)}function CO(e){for(const t of e.children)t.parseLayoutSize()}function fx(e,t){const n=EV(t),i=H2(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),c=r.scale[i]??_V(i,e);if(c==="independent"&&l.value==="step"){s=void 0;break}if(s){if(c==="independent"&&s.value!==l.value){s=void 0;break}s=ju(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function bDe(e){const{size:t,component:n}=e;for(const i of Mo){const r=Pi(i);if(t[r]){const a=t[r];n.layoutSize.set(r,rs(a)?"step":a,!0)}else{const a=xDe(e,r);n.layoutSize.set(r,a,!1)}}}function xDe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Cn(a)){const o=ox(i.view,t);return Xc(s)||rs(o)?"step":o}else return RM(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return RM(i.view,t);{const a=ox(i.view,t);return rs(a)?a.step:a}}}function KM(e,t,n){return he(t,{suffix:`by_${he(e)}`,...n})}class u0 extends VV{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=NO(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Rm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=oe(t),i={};for(const r of n){if(![ao,so].includes(r)){ce(X2(r,"facet"));break}const a=t[r];if(a.field===void 0){ce(TM(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Kk(t,n);return i.header?i.header=zn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ue(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=$S(this),this.child.parseData()}parseLayoutSize(){CO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,nn(this.component.selection).some(t=>Va(t))&&Mk($k)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),pDe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Dr)for(const i of vO){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=th("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const l=gS(n,o);t.titleAnchor??={},t.titleAnchor[l]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??={},t[l][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof u0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof u0?{...this.channelHasField("column")?{encode:{update:{columns:{field:he(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof u0){if(this.child.channelHasField("column")){const r=he(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Mo){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(Cn(s)&&Xc(o)){const l=mS(this.child,r),c=AO(l);c?(t.push(c),n.push("distinct"),i.push(`distinct_${c}`)):ce(Ak(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of Dr){const h=this.facet[d];if(h){l.push(he(h));const{bin:p,sort:y}=h;if(_t(p)&&l.push(he(h,{binSuffix:"end"})),oo(y)){const{field:v,op:b=eS}=y,S=KM(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(me(y)){const v=eh(h,d);a.push(v),s.push("max"),o.push(v)}}}const c=!!i&&!!r;return{name:t,data:n,groupby:l,...c||a.length>0?{aggregate:{...c?{cross:c}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?oo(i.sort)?[KM(i,i.sort,{expr:"datum"})]:me(i.sort)?[eh(i,t,{expr:"datum"})]:[he(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(oo(r)?r.order:!me(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return GM(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of yO)if(t[r]){const a=th("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return GM(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=dDe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Dr.map(l=>this.facetSortFields(l)).flat(),order:Dr.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(FCe(this,[]))}]}getMapping(){return this.facet}}function SDe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(oo(a.sort)){const{field:s,op:o=eS}=a.sort;e=r=new Kc(e,{joinaggregate:[{op:o,field:s,as:KM(a,a.sort,{forAs:!0})}],groupby:[he(a)]})}return r}return null}function ZV(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(H0(e)&&H0(i)){if(ar(e.values,i.values))return n}else if(Zd(e)&&Zd(i)){if(e.url===i.url)return n}else if(LX(e)&&e.name===n.dataName)return n}}return null}function EDe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new kc({values:[]});return t.push(i),i}const n=ZV(e.data,t);if(n)return wu(e.data)||(n.data.format=OG({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new kc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function wDe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(cCe(r))s=e=new Jd(e,r),a="derived";else if(cO(r)){const o=gTe(r);s=e=ti.makeWithAncestors(e,{},o,n)??e,e=new Yh(e,t,r.filter)}else if(OX(r))s=e=Wa.makeFromTransform(e,r,t),a="number";else if(dCe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new ti(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Xa.makeFromTransform(e,r);else if(hCe(r))s=e=sa.makeFromTransform(e,r),a="number",mO(t)&&(e=new Pu(e));else if(kX(r))s=e=Y0.make(e,t,r,i++),a="derived";else if(oCe(r))s=e=new Vh(e,r),a="number";else if(uCe(r))s=e=new Kc(e,r),a="number";else if(gCe(r))s=e=lo.makeFromTransform(e,r),a="derived";else if(pCe(r))s=e=new xS(e,r),a="derived";else if(mCe(r))s=e=new vS(e,r),a="derived";else if(lCe(r))s=e=new bS(e,r),a="derived";else if(tCe(r))s=e=new _S(e,r),a="derived";else if(sCe(r))e=new AS(e,r);else if(fCe(r))s=e=uc.makeFromTransform(e,r),a="derived";else if(nCe(r))s=e=new yS(e,r),a="derived";else if(iCe(r))s=e=new ES(e,r),a="derived";else if(rCe(r))s=e=new wS(e,r),a="derived";else if(aCe(r))s=e=new SS(e,r),a="derived";else{ce(z_e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function $S(e){let t=EDe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(wu(r)||Zd(r)||H0(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new CCe;wu(r)?(UX(r)?t=new Pm(t,r.sequence):fO(r)&&(t=new jm(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=ti.makeExplicit(t,e,s)??t,t=new Pu(t);const o=e.parent&&Wh(e.parent);(Rt(e)||lr(e))&&o&&(t=Wa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=wDe(t,e,s));const l=mTe(e),c=pTe(e);t=ti.makeWithAncestors(t,{},{...l,...c},s)??t,Rt(e)&&(t=xd.parseAll(t,e),t=G0.parseAll(t,e)),(Rt(e)||lr(e))&&(o||(t=Wa.makeFromEncoding(t,e)??t),t=Xa.makeFromEncoding(t,e)??t,t=Jd.parseAllForSortIndex(t,e));const d=t=Py(zt.Raw,e,t);if(Rt(e)){const S=sa.makeFromEncoding(t,e);S&&(t=S,mO(e)&&(t=new Pu(t))),t=uc.makeFromEncoding(t,e)??t,t=lo.makeFromEncoding(t,e)??t}let h,p;if(Rt(e)){const{markDef:S,mark:w,config:_}=e,A=yt("invalid",S,_),{marks:$,scales:M}=p=jX({invalid:A,isPath:il(w)});$!==M&&M==="include-invalid-values"&&(h=t=Py(zt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=nh.make(t,e,p)??t)}const y=t=Py(zt.Main,e,t);let v;if(Rt(e)&&p){const{marks:S,scales:w}=p;S==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=nh.make(t,e,p)??t,v=t=Py(zt.PostFilterInvalid,e,t))}Rt(e)&&f3e(e,y);let b=null;if(lr(e)){const S=e.getName("facet");t=SDe(t,e.facet)??t,b=new Xh(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function Py(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new zi(n,a,e,r);return i[a]=s,s}class _De extends MO{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ce(O_e),this.children=this.getChildren(t).map((a,s)=>NO(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=$S(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Va(t))&&Mk($k)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return oS(t)?t.vconcat:uO(t)?t.hconcat:t.concat}parseLayoutSize(){vDe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=bO(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function ADe(e){return e===!1||e===null}const $De={disable:1,gridScale:1,scale:1,...tX,labelExpr:1,encode:1},KV=oe($De);class TO extends To{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new TO(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!ADe(this.get(t))}hasOrientSignalRef(){return ve(this.explicit.orient)}}function MDe(e,t,n){const{encoding:i,config:r}=e,a=cn(i[t])??cn(i[ms(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(Cc(l))return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(Vd(a)==="quantitative"){if(Wd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Vd(a)==="temporal"&&r.timeFormatType&&fe(a)&&!a.timeUnit)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function CDe(e){return Mo.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[zDe(n,e)]),t),{})}const TDe={bottom:"top",top:"bottom",left:"right",right:"left"};function DDe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of oe(r.component.axes))n.axis[a]=xO(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=kDe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of Mo){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!ve(o)){if(i[o]>0&&!l){const c=TDe[o];i[o]>i[c]&&s.set("orient",c,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function kDe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=ODe(r,a)}}}else return t.map(n=>n.clone());return e}function ODe(e,t){for(const n of KV){const i=ju(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return aY(r,a);case"gridScale":return{explicit:r.explicit,value:Vt(r.value,a.value)}}return lS(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function NDe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ve(n.labelAngle)?n.labelAngle:I0(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===yV(i,r))return!0}return e===n[t]}const RDe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function zDe(e,t){let n=t.axis(e);const i=new TO,r=cn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||S3e(e),l=t.getScaleComponent(e).get("type"),c=g3e(e,l,o,t.config),d=n!==void 0?!n:qM("disable",s.style,n?.style,c).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=v3e(r,n,e,s.style,c),p=PY(n.formatType,r,l),y=jY(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const w of KV){const _=w in U9?U9[w](v):f9(w)?n[w]:void 0,A=_!==void 0,$=NDe(_,w,n,t,e);if(A&&$)i.set(w,_,$);else{const{configValue:M=void 0,configFrom:D=void 0}=f9(w)&&w!=="values"?qM(w,s.style,n.style,c):{},T=M!==void 0;A&&!T?i.set(w,_,$):(D!=="vgAxisConfig"||RDe.has(w)&&T||Um(M)||ve(M))&&i.set(w,M,!1)}}const b=n.encoding??{},S=eX.reduce((w,_)=>{if(!i.hasAxisPart(_))return w;const A=wV(b[_]??{},t),$=_==="labels"?MDe(t,e,A):A;return $!==void 0&&!St($)&&(w[_]={update:$}),w},{});return St(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function FDe({encoding:e,size:t}){for(const n of Mo){const i=Pi(n);rs(t[i])&&pu(e[n])&&(delete t[i],ce(cY(i)))}return t}const LDe={vgMark:"arc",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...yo(e,"radius"),...yo(e,"theta")})},UDe={vgMark:"area",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ux("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...ux("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...pO(e)})},BDe={vgMark:"rect",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y")})},jDe={vgMark:"shape",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&fe(n)&&n.type===Hh?{field:he(n,{expr:"datum"})}:{}}]}},PDe={vgMark:"image",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y"),...hO(e,"url")})},IDe={vgMark:"line",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e,{vgChannel:"strokeWidth"}),...pO(e)})},qDe={vgMark:"trail",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e),...pO(e)})};function DO(e,t){const{config:n}=e;return{...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e),...Ln("angle",e),...HDe(e,n,t)}}function HDe(e,t,n){return n?{shape:{value:n}}:Ln("shape",e)}const GDe={vgMark:"symbol",encodeEntry:e=>DO(e)},YDe={vgMark:"symbol",encodeEntry:e=>DO(e,"circle")},XDe={vgMark:"symbol",encodeEntry:e=>DO(e,"square")},VDe={vgMark:"rect",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y")})},WDe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ux("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...ux("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ln("size",e,{vgChannel:"strokeWidth"})}}},QDe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...jr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...hO(e),...Ln("size",e,{vgChannel:"fontSize"}),...Ln("angle",e),...R9("align",ZDe(e.markDef,n,t)),...R9("baseline",KDe(e.markDef,n,t)),...mi("radius",e,{defaultPos:null}),...mi("theta",e,{defaultPos:null})}}};function ZDe(e,t,n){if(yt("align",e,n)===void 0)return"center"}function KDe(e,t,n){if(yt("baseline",e,n)===void 0)return"middle"}const JDe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,r),...mi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:$t(yt("thickness",n,t))}}},Iy={arc:LDe,area:UDe,bar:BDe,circle:YDe,geoshape:jDe,image:PDe,line:IDe,point:GDe,rect:VDe,rule:WDe,square:XDe,text:QDe,tick:JDe,trail:qDe};function eke(e){if(qe([K2,Q2,u$e],e.mark)){const t=oX(e.mark,e.encoding);if(t.length>0)return tke(e,t)}else if(e.mark===Z2){const t=MM.some(n=>yt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return nke(e)}return kO(e)}const J9="faceted_path_";function tke(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:J9+e.requestDataName(zt.Main),data:e.requestDataName(zt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:kO(e,{fromPrefix:J9})}]}const e7="stack_group_";function nke(e){const[t]=kO(e,{fromPrefix:e7}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...Id(t.encode.update,["y","yc","y2","height",...MM]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ur(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ur(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of MM){const d=ns(c,e.markDef,e.config);t.encode.update[c]?(a[c]=t.encode.update[c],delete t.encode.update[c]):d&&(a[c]=$t(d)),d&&(t.encode.update[c]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),h=he(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(he(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const h=ns(d,e.markDef,e.config);return h!==void 0?{...c,[d]:$t(h)}:c}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zt.Main),name:e7+e.requestDataName(zt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function ike(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!me(s)&&fa(s)&&AM(s.value)||!s&&AM(yt("order",r,a)))){if((me(s)||fe(s))&&!n)return nY(s,{expr:"datum"});if(il(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(fe(l))return{field:o}}}}function kO(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Vt(i.clip,rke(e),ake(e)),o=eY(i),l=r.key,c=ike(e),d=ske(e),h=yt("aria",i,a),p=Iy[n].postEncodingTransform?Iy[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Iy[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(zt.Main)},encode:{update:Iy[n].encodeEntry(e)},...p?{transform:p}:{}}]}function rke(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function ake(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ske(e){if(!e.component.selection)return null;const t=oe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=oe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class JV extends VV{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,h9(t)?t.view:void 0);const s=is(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=HMe(s,a,{graticule:t.data&&fO(t.data)}));const l=this.encoding=V$e(t.encoding||{},o,s.filled,a);this.markDef=CX(s,l,a),this.size=FDe({encoding:l,size:h9(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=MX(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(c=>sO(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===NY,i=t&&jwe.some(r=>Oe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Ek.reduce((i,r)=>{const a=cn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=zn(t);return me(n)&&(r.domain=n.map(nr)),me(i)&&(r.range=i.map(nr)),r}initAxes(t){return Mo.reduce((n,i)=>{const r=t[i];if(Oe(r)||i===kt&&Oe(t.x2)||i===Dn&&Oe(t.y2)){const a=Oe(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=oe(t),i={};for(const r of n){const a=t[r];i[r]=Um(a)?JG(a):nr(a)}return i}initLegends(t){return Zwe.reduce((n,i)=>{const r=cn(t[i]);if(r&&Jwe(i)){const a=r.legend;n[i]=a&&zn(a)}return n},{})}parseData(){this.component.data=$S(this)}parseLayoutSize(){bDe(this)}parseSelections(){this.component.selection=c3e(this,this.selection)}parseMarkGroup(){this.component.mark=eke(this)}parseAxesAndHeaders(){this.component.axes=CDe(this)}assembleSelectionTopLevelSignals(t){return LCe(this,t)}assembleSignals(){return[...gV(this),...zCe(this,[])]}assembleSelectionData(t){return UCe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return bO(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+IX)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Wh(this.parent))&&(t=YX(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return sc(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return da(n)}typedFieldDef(t){const n=this.fieldDef(t);return Si(n)?n:null}}class OO extends MO{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(uS(o))return new OO(o,this,this.getName(`layer_${l}`),s,a);if(Co(o))return new JV(o,this,this.getName(`layer_${l}`),s,a);throw new Error(_k(o))})}parseData(){this.component.data=$S(this);for(const t of this.children)t.parseData()}parseLayoutSize(){yDe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Va(t))&&Mk($k)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){DDe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),gV(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),bO(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Xt(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return BCe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),kV(this))}}function NO(e,t,n,i,r){if(tS(e))return new u0(e,t,n,r);if(uS(e))return new OO(e,t,n,i,r);if(Co(e))return new JV(e,t,n,i,r);if(vMe(e))return new _De(e,t,n,r);throw new Error(_k(e))}function oke(e,t={}){t.logger&&EAe(t.logger),t.fieldTitle&&ZY(t.fieldTitle);try{const n=$X(DG(t.config,e.config)),i=zX(e,n),r=NO(i,null,"",void 0,n);return r.parse(),kTe(r.component.data,r),{spec:lke(r,uke(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&wAe(),t.fieldTitle&&B$e()}}function uke(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Re(t)&&(t={type:t}),r&&a&&ACe(t.type)){if(r==="step"&&a==="step")ce(ZF()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";ce(ZF(H2(s)));const o=s==="width"?"height":"width";t.type=$Ce(o)}}return{...oe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...A9(n,!1),...A9(e,!0)}}function lke(e,t,n={},i){const r=e.config?OMe(e.config):void 0,a=hDe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),c=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...c?{style:c}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...EX(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const cke=Rwe.version,fke=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Hd,accessPathWithDatum:gk,accessWithDatumToUnescapedPath:ft,compile:oke,contains:qe,deepEqual:ar,deleteNestedProperty:Kb,duplicate:De,entries:Lu,every:fk,fieldIntersection:hk,flatAccessWithDatum:RG,getFirstDefined:Vt,hasIntersection:dk,hasProperty:ue,hash:Ye,internalField:LG,isBoolean:P0,isEmpty:St,isEqual:Fwe,isInternalField:UG,isNullOrFalse:AM,isNumeric:U2,keys:oe,logicalExpr:s0,mergeDeep:OG,never:kG,normalize:zX,normalizeAngle:I0,omit:ur,pick:Id,prefixGenerator:$M,removePathFromField:Ih,replaceAll:Ec,replacePathInField:Fr,resetIdCounter:Uwe,setEqual:NG,some:qd,stringify:ut,titleCase:Mm,unique:Ba,uniqueId:FG,vals:nn,varName:Tt,version:cke},Symbol.toStringTag,{value:"Module"}));function eW(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var dke="2.15.0",hke={version:dke};const Qf="#fff",t7="#888",gke={background:"#333",view:{stroke:t7},title:{color:Qf,subtitleColor:Qf},style:{"guide-label":{fill:Qf},"guide-title":{fill:Qf}},axis:{domainColor:Qf,gridColor:t7,tickColor:Qf}},Ml="#4572a7",pke={background:"#fff",arc:{fill:Ml},area:{fill:Ml},line:{stroke:Ml,strokeWidth:2},path:{stroke:Ml},rect:{fill:Ml},shape:{stroke:Ml},symbol:{fill:Ml,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Cl="#30a2da",EA="#cbcbcb",mke="#999",yke="#333",n7="#f0f0f0",i7="#333",vke={arc:{fill:Cl},area:{fill:Cl},axis:{domainColor:EA,grid:!0,gridColor:EA,gridWidth:1,labelColor:mke,labelFontSize:10,titleColor:yke,tickColor:EA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:n7,group:{fill:n7},legend:{labelColor:i7,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:i7,titleFontSize:14,titlePadding:10},line:{stroke:Cl,strokeWidth:2},path:{stroke:Cl,strokeWidth:.5},rect:{fill:Cl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Cl},bar:{binSpacing:2,fill:Cl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Tl="#000",bke={group:{fill:"#e5e5e5"},arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},xke=22,Ske="normal",r7="Benton Gothic, sans-serif",a7=11.5,Eke="normal",Dl="#82c6df",wA="Benton Gothic Bold, sans-serif",s7="normal",o7=13,vp={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},wke={background:"#ffffff",title:{anchor:"start",color:"#000000",font:wA,fontSize:xke,fontWeight:Ske},arc:{fill:Dl},area:{fill:Dl},line:{stroke:Dl,strokeWidth:2},path:{stroke:Dl},rect:{fill:Dl},shape:{stroke:Dl},symbol:{fill:Dl,size:30},axis:{labelFont:r7,labelFontSize:a7,labelFontWeight:Eke,titleFont:wA,titleFontSize:o7,titleFontWeight:s7},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:r7,labelFontSize:a7,symbolType:"square",titleFont:wA,titleFontSize:o7,titleFontWeight:s7},range:{category:vp["category-6"],diverging:vp["fireandice-6"],heatmap:vp["fire-7"],ordinal:vp["fire-7"],ramp:vp["fire-7"]}},kl="#ab5787",qy="#979797",_ke={background:"#f9f9f9",arc:{fill:kl},area:{fill:kl},line:{stroke:kl},path:{stroke:kl},rect:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:30},axis:{domainColor:qy,domainWidth:.5,gridWidth:.2,labelColor:qy,tickColor:qy,tickWidth:.2,titleColor:qy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ol="#3e5c69",Ake={background:"#fff",arc:{fill:Ol},area:{fill:Ol},line:{stroke:Ol},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{fill:Ol},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},_r="#1696d2",u7="#000000",$ke="#FFFFFF",Hy="Lato",_A="Lato",Mke="Lato",Cke="#DEDDDD",Tke=18,bp={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Dke={background:$ke,title:{anchor:"start",fontSize:Tke,font:Hy},axisX:{domain:!0,domainColor:u7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:_A,labelAngle:0,tickColor:u7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Hy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Cke,gridWidth:1,labelFontSize:12,labelFont:_A,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Hy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:_A,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Hy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:bp["six-groups-cat-1"],diverging:bp["diverging-colors"],heatmap:bp["diverging-colors"],ordinal:bp["six-groups-seq"],ramp:bp["shades-blue"]},area:{fill:_r},rect:{fill:_r},line:{color:_r,stroke:_r,strokeWidth:5},trail:{color:_r,stroke:_r,strokeWidth:0,size:1},path:{stroke:_r,strokeWidth:.5},point:{filled:!0},text:{font:Mke,color:_r,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:_r,stroke:null}},arc:{fill:_r},shape:{stroke:_r},symbol:{fill:_r,size:30}},Nl="#3366CC",l7="#ccc",Gy="Arial, sans-serif",kke={arc:{fill:Nl},area:{fill:Nl},path:{stroke:Nl},rect:{fill:Nl},shape:{stroke:Nl},symbol:{stroke:Nl},circle:{fill:Nl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Gy,fontSize:12},"guide-title":{font:Gy,fontSize:12},"group-title":{font:Gy,fontSize:12}},title:{font:Gy,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:l7,tickColor:l7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},RO=e=>e*(1/3+1),c7=RO(9),f7=RO(10),d7=RO(12),xp="Segoe UI",h7="wf_standard-font, helvetica, arial, sans-serif",g7="#252423",Sp="#605E5C",p7="transparent",Oke="#C8C6C4",Yr="#118DFF",Nke="#12239E",Rke="#E66C37",zke="#6B007B",Fke="#E044A7",Lke="#744EC2",Uke="#D9B300",Bke="#D64550",tW=Yr,nW="#DEEFFF",m7=[nW,tW],jke=[nW,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",tW],Pke={view:{stroke:p7},background:p7,font:xp,header:{titleFont:h7,titleFontSize:d7,titleColor:g7,labelFont:xp,labelFontSize:f7,labelColor:Sp},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Sp,labelFontSize:c7,titleFont:h7,titleColor:g7,titleFontSize:d7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Oke,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Yr},line:{stroke:Yr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:xp,fontSize:c7,fill:Sp},arc:{fill:Yr},area:{fill:Yr,line:!0,opacity:.6},path:{stroke:Yr},rect:{fill:Yr},point:{fill:Yr,filled:!0,size:75},shape:{stroke:Yr},symbol:{fill:Yr,strokeWidth:1.5,size:50},legend:{titleFont:xp,titleFontWeight:"bold",titleColor:Sp,labelFont:xp,labelFontSize:f7,labelColor:Sp,symbolType:"circle",symbolSize:75},range:{category:[Yr,Nke,Rke,zke,Fke,Lke,Uke,Bke],diverging:m7,heatmap:m7,ordinal:jke}},AA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ike='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$A=400,Yy={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},qke=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Hke=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function MS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=Yy.gridBg[e],r=Yy.textPrimary[e],a=Yy.textSecondary[e],s=n==="dark"?qke:Hke,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:AA,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:Ike,labelFontWeight:$A,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Yy.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:AA,fill:a,fontWeight:$A},"guide-title":{font:AA,fill:a,fontWeight:$A}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Gke=MS({theme:"white",background:"#ffffff"}),Yke=MS({theme:"g10",background:"#f4f4f4"}),Xke=MS({theme:"g90",background:"#262626"}),Vke=MS({theme:"g100",background:"#161616"}),Wke=hke.version,Qke=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Yke,carbong100:Vke,carbong90:Xke,carbonwhite:Gke,dark:gke,excel:pke,fivethirtyeight:vke,ggplot2:bke,googlecharts:kke,latimes:wke,powerbi:Pke,quartz:_ke,urbaninstitute:Dke,version:Wke,vox:Ake},Symbol.toStringTag,{value:"Module"}));function Zke(e,t,n,i){if(uwe(e))return`[${e.map(r=>t(cwe(r)?r:y7(r,n))).join(", ")}]`;if(qF(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const c of l){let d=o[c];d!==void 0&&(qF(d)&&(d=y7(d,n)),r+=`<tr><td class="key">${t(c)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Kke(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function y7(e,t){return JSON.stringify(e,Kke(t))}var Jke=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const iW="vg-tooltip-element",eOe={offsetX:10,offsetY:10,id:iW,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:tOe,maxDepth:2,formatTooltip:Zke,baseURL:""};function tOe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function nOe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Jke.toString().replace(iW,e)}function iOe(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:r,y:a}}class rOe{constructor(t){this.options={...eOe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=nOe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=iOe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var MA={};function aOe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CA,v7;function sOe(){return v7||(v7=1,CA=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),CA}var oOe=rt;rt.Node=Oc;rt.create=rt;function rt(e){var t=this;if(t instanceof rt||(t=new rt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}rt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};rt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};rt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};rt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)lOe(this,arguments[e]);return this.length};rt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)cOe(this,arguments[e]);return this.length};rt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};rt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};rt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};rt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};rt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};rt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};rt.prototype.map=function(e,t){t=t||this;for(var n=new rt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};rt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new rt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};rt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};rt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};rt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};rt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};rt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new rt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};rt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new rt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};rt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var a=[],i=0;r&&i<t;i++)a.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=uOe(this,r,n[i]);return a};rt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function uOe(e,t,n){var i=t===e.head?new Oc(n,null,t,e):new Oc(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function lOe(e,t){e.tail=new Oc(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function cOe(e,t){e.head=new Oc(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Oc(e,t,n,i){if(!(this instanceof Oc))return new Oc(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{sOe()(rt)}catch{}const fOe=oOe,ql=Symbol("max"),Is=Symbol("length"),Zf=Symbol("lengthCalculator"),l0=Symbol("allowStale"),Wl=Symbol("maxAge"),Bs=Symbol("dispose"),b7=Symbol("noDisposeOnSet"),bn=Symbol("lruList"),Xr=Symbol("cache"),rW=Symbol("updateAgeOnGet"),TA=()=>1;class dOe{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ql]=t.max||1/0;const n=t.length||TA;if(this[Zf]=typeof n!="function"?TA:n,this[l0]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Wl]=t.maxAge||0,this[Bs]=t.dispose,this[b7]=t.noDisposeOnSet||!1,this[rW]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ql]=t||1/0,Ep(this)}get max(){return this[ql]}set allowStale(t){this[l0]=!!t}get allowStale(){return this[l0]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Wl]=t,Ep(this)}get maxAge(){return this[Wl]}set lengthCalculator(t){typeof t!="function"&&(t=TA),t!==this[Zf]&&(this[Zf]=t,this[Is]=0,this[bn].forEach(n=>{n.length=this[Zf](n.value,n.key),this[Is]+=n.length})),Ep(this)}get lengthCalculator(){return this[Zf]}get length(){return this[Is]}get itemCount(){return this[bn].length}rforEach(t,n){n=n||this;for(let i=this[bn].tail;i!==null;){const r=i.prev;x7(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[bn].head;i!==null;){const r=i.next;x7(this,t,i,n),i=r}}keys(){return this[bn].toArray().map(t=>t.key)}values(){return this[bn].toArray().map(t=>t.value)}reset(){this[Bs]&&this[bn]&&this[bn].length&&this[bn].forEach(t=>this[Bs](t.key,t.value)),this[Xr]=new Map,this[bn]=new fOe,this[Is]=0}dump(){return this[bn].map(t=>dx(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[bn]}set(t,n,i){if(i=i||this[Wl],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,a=this[Zf](n,t);if(this[Xr].has(t)){if(a>this[ql])return Sd(this,this[Xr].get(t)),!1;const l=this[Xr].get(t).value;return this[Bs]&&(this[b7]||this[Bs](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[Is]+=a-l.length,l.length=a,this.get(t),Ep(this),!0}const s=new hOe(t,n,a,r,i);return s.length>this[ql]?(this[Bs]&&this[Bs](t,n),!1):(this[Is]+=s.length,this[bn].unshift(s),this[Xr].set(t,this[bn].head),Ep(this),!0)}has(t){if(!this[Xr].has(t))return!1;const n=this[Xr].get(t).value;return!dx(this,n)}get(t){return DA(this,t,!0)}peek(t){return DA(this,t,!1)}pop(){const t=this[bn].tail;return t?(Sd(this,t),t.value):null}del(t){Sd(this,this[Xr].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],a=r.e||0;if(a===0)this.set(r.k,r.v);else{const s=a-n;s>0&&this.set(r.k,r.v,s)}}}prune(){this[Xr].forEach((t,n)=>DA(this,n,!1))}}const DA=(e,t,n)=>{const i=e[Xr].get(t);if(i){const r=i.value;if(dx(e,r)){if(Sd(e,i),!e[l0])return}else n&&(e[rW]&&(i.value.now=Date.now()),e[bn].unshiftNode(i));return r.value}},dx=(e,t)=>{if(!t||!t.maxAge&&!e[Wl])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Wl]&&n>e[Wl]},Ep=e=>{if(e[Is]>e[ql])for(let t=e[bn].tail;e[Is]>e[ql]&&t!==null;){const n=t.prev;Sd(e,t),t=n}},Sd=(e,t)=>{if(t){const n=t.value;e[Bs]&&e[Bs](n.key,n.value),e[Is]-=n.length,e[Xr].delete(n.key),e[bn].removeNode(t)}};class hOe{constructor(t,n,i,r,a){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=a||0}}const x7=(e,t,n,i)=>{let r=n.value;dx(e,r)&&(Sd(e,n),e[l0]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var gOe=dOe;const pOe=Object.freeze({loose:!0}),mOe=Object.freeze({}),yOe=e=>e?typeof e!="object"?pOe:e:mOe;var zO=yOe,JM={exports:{}};const aW=256,vOe=Number.MAX_SAFE_INTEGER||9007199254740991,bOe=16,xOe=aW-6;var FO={MAX_LENGTH:aW,MAX_SAFE_COMPONENT_LENGTH:bOe,MAX_SAFE_BUILD_LENGTH:xOe,MAX_SAFE_INTEGER:vOe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const SOe=typeof process=="object"&&MA&&MA.NODE_DEBUG&&/\bsemver\b/i.test(MA.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var CS=SOe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=FO,a=CS;t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],c=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[h,i]],y=b=>{for(const[S,w]of p)b=b.split(`${S}*`).join(`${S}{0,${w}}`).split(`${S}+`).join(`${S}{1,${w}}`);return b},v=(b,S,w)=>{const _=y(S),A=d++;a(b,A,S),c[b]=A,l[A]=S,s[A]=new RegExp(S,w?"g":void 0),o[A]=new RegExp(_,w?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),v("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${h}+`),v("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),v("FULL",`^${l[c.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),v("LOOSE",`^${l[c.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),v("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),v("COERCERTL",l[c.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(JM,JM.exports);var LO=JM.exports;const S7=/^[0-9]+$/,EOe=(e,t)=>{const n=S7.test(e),i=S7.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var wOe={compareIdentifiers:EOe};const Xy=CS,{MAX_LENGTH:E7,MAX_SAFE_INTEGER:Vy}=FO,{safeRe:w7,t:_7}=LO,_Oe=zO,{compareIdentifiers:Kf}=wOe;let AOe=class ka{constructor(t,n){if(n=_Oe(n),t instanceof ka){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>E7)throw new TypeError(`version is longer than ${E7} characters`);Xy("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?w7[_7.LOOSE]:w7[_7.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Vy||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vy||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vy||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const a=+r;if(a>=0&&a<Vy)return a}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Xy("SemVer.compare",this.version,this.options,t),!(t instanceof ka)){if(typeof t=="string"&&t===this.version)return 0;t=new ka(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ka||(t=new ka(t,this.options)),Kf(this.major,t.major)||Kf(this.minor,t.minor)||Kf(this.patch,t.patch)}comparePre(t){if(t instanceof ka||(t=new ka(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(Xy("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kf(i,r)}while(++n)}compareBuild(t){t instanceof ka||(t=new ka(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(Xy("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kf(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let a=[n,r];i===!1&&(a=[n]),Kf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var UO=AOe;const A7=UO,$Oe=(e,t,n)=>new A7(e,n).compare(new A7(t,n));var Qh=$Oe;const MOe=Qh,COe=(e,t,n)=>MOe(e,t,n)===0;var TOe=COe;const DOe=Qh,kOe=(e,t,n)=>DOe(e,t,n)!==0;var OOe=kOe;const NOe=Qh,ROe=(e,t,n)=>NOe(e,t,n)>0;var zOe=ROe;const FOe=Qh,LOe=(e,t,n)=>FOe(e,t,n)>=0;var UOe=LOe;const BOe=Qh,jOe=(e,t,n)=>BOe(e,t,n)<0;var POe=jOe;const IOe=Qh,qOe=(e,t,n)=>IOe(e,t,n)<=0;var HOe=qOe;const GOe=TOe,YOe=OOe,XOe=zOe,VOe=UOe,WOe=POe,QOe=HOe,ZOe=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return GOe(e,n,i);case"!=":return YOe(e,n,i);case">":return XOe(e,n,i);case">=":return VOe(e,n,i);case"<":return WOe(e,n,i);case"<=":return QOe(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var KOe=ZOe,kA,$7;function JOe(){if($7)return kA;$7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}kA=t;const n=zO,{safeRe:i,t:r}=LO,a=KOe,s=CS,o=UO,l=sW();return kA}var OA,M7;function sW(){if(M7)return OA;M7=1;class e{constructor(U,F){if(F=i(F),U instanceof e)return U.loose===!!F.loose&&U.includePrerelease===!!F.includePrerelease?U:new e(U.raw,F);if(U instanceof r)return this.raw=U.value,this.set=[[U]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=U.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(I=>!v(I[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&b(I[0])){this.set=[I];break}}}this.format()}format(){return this.range=this.set.map(U=>U.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(U){const N=((this.options.includePrerelease&&p)|(this.options.loose&&y))+":"+U,I=n.get(N);if(I)return I;const H=this.options.loose,K=H?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];U=U.replace(K,B(this.options.includePrerelease)),a("hyphen replace",U),U=U.replace(o[l.COMPARATORTRIM],c),a("comparator trim",U),U=U.replace(o[l.TILDETRIM],d),a("tilde trim",U),U=U.replace(o[l.CARETTRIM],h),a("caret trim",U);let L=U.split(" ").map(de=>w(de,this.options)).join(" ").split(/\s+/).map(de=>P(de,this.options));H&&(L=L.filter(de=>(a("loose invalid filter",de,this.options),!!de.match(o[l.COMPARATORLOOSE])))),a("range list",L);const V=new Map,ae=L.map(de=>new r(de,this.options));for(const de of ae){if(v(de))return[de];V.set(de.value,de)}V.size>1&&V.has("")&&V.delete("");const se=[...V.values()];return n.set(N,se),se}intersects(U,F){if(!(U instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>S(N,F)&&U.set.some(I=>S(I,F)&&N.every(H=>I.every(K=>H.intersects(K,F)))))}test(U){if(!U)return!1;if(typeof U=="string")try{U=new s(U,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(Y(this.set[F],U,this.options))return!0;return!1}}OA=e;const t=gOe,n=new t({max:1e3}),i=zO,r=JOe(),a=CS,s=UO,{safeRe:o,t:l,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:h}=LO,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:y}=FO,v=R=>R.value==="<0.0.0-0",b=R=>R.value==="",S=(R,U)=>{let F=!0;const N=R.slice();let I=N.pop();for(;F&&N.length;)F=N.every(H=>I.intersects(H,U)),I=N.pop();return F},w=(R,U)=>(a("comp",R,U),R=M(R,U),a("caret",R),R=A(R,U),a("tildes",R),R=T(R,U),a("xrange",R),R=z(R,U),a("stars",R),R),_=R=>!R||R.toLowerCase()==="x"||R==="*",A=(R,U)=>R.trim().split(/\s+/).map(F=>$(F,U)).join(" "),$=(R,U)=>{const F=U.loose?o[l.TILDELOOSE]:o[l.TILDE];return R.replace(F,(N,I,H,K,L)=>{a("tilde",R,N,I,H,K,L);let V;return _(I)?V="":_(H)?V=`>=${I}.0.0 <${+I+1}.0.0-0`:_(K)?V=`>=${I}.${H}.0 <${I}.${+H+1}.0-0`:L?(a("replaceTilde pr",L),V=`>=${I}.${H}.${K}-${L} <${I}.${+H+1}.0-0`):V=`>=${I}.${H}.${K} <${I}.${+H+1}.0-0`,a("tilde return",V),V})},M=(R,U)=>R.trim().split(/\s+/).map(F=>D(F,U)).join(" "),D=(R,U)=>{a("caret",R,U);const F=U.loose?o[l.CARETLOOSE]:o[l.CARET],N=U.includePrerelease?"-0":"";return R.replace(F,(I,H,K,L,V)=>{a("caret",R,I,H,K,L,V);let ae;return _(H)?ae="":_(K)?ae=`>=${H}.0.0${N} <${+H+1}.0.0-0`:_(L)?H==="0"?ae=`>=${H}.${K}.0${N} <${H}.${+K+1}.0-0`:ae=`>=${H}.${K}.0${N} <${+H+1}.0.0-0`:V?(a("replaceCaret pr",V),H==="0"?K==="0"?ae=`>=${H}.${K}.${L}-${V} <${H}.${K}.${+L+1}-0`:ae=`>=${H}.${K}.${L}-${V} <${H}.${+K+1}.0-0`:ae=`>=${H}.${K}.${L}-${V} <${+H+1}.0.0-0`):(a("no pr"),H==="0"?K==="0"?ae=`>=${H}.${K}.${L}${N} <${H}.${K}.${+L+1}-0`:ae=`>=${H}.${K}.${L}${N} <${H}.${+K+1}.0-0`:ae=`>=${H}.${K}.${L} <${+H+1}.0.0-0`),a("caret return",ae),ae})},T=(R,U)=>(a("replaceXRanges",R,U),R.split(/\s+/).map(F=>O(F,U)).join(" ")),O=(R,U)=>{R=R.trim();const F=U.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return R.replace(F,(N,I,H,K,L,V)=>{a("xRange",R,N,I,H,K,L,V);const ae=_(H),se=ae||_(K),de=se||_(L),be=de;return I==="="&&be&&(I=""),V=U.includePrerelease?"-0":"",ae?I===">"||I==="<"?N="<0.0.0-0":N="*":I&&be?(se&&(K=0),L=0,I===">"?(I=">=",se?(H=+H+1,K=0,L=0):(K=+K+1,L=0)):I==="<="&&(I="<",se?H=+H+1:K=+K+1),I==="<"&&(V="-0"),N=`${I+H}.${K}.${L}${V}`):se?N=`>=${H}.0.0${V} <${+H+1}.0.0-0`:de&&(N=`>=${H}.${K}.0${V} <${H}.${+K+1}.0-0`),a("xRange return",N),N})},z=(R,U)=>(a("replaceStars",R,U),R.trim().replace(o[l.STAR],"")),P=(R,U)=>(a("replaceGTE0",R,U),R.trim().replace(o[U.includePrerelease?l.GTE0PRE:l.GTE0],"")),B=R=>(U,F,N,I,H,K,L,V,ae,se,de,be,Se)=>(_(N)?F="":_(I)?F=`>=${N}.0.0${R?"-0":""}`:_(H)?F=`>=${N}.${I}.0${R?"-0":""}`:K?F=`>=${F}`:F=`>=${F}${R?"-0":""}`,_(ae)?V="":_(se)?V=`<${+ae+1}.0.0-0`:_(de)?V=`<${ae}.${+se+1}.0-0`:be?V=`<=${ae}.${se}.${de}-${be}`:R?V=`<${ae}.${se}.${+de+1}-0`:V=`<=${V}`,`${F} ${V}`.trim()),Y=(R,U,F)=>{for(let N=0;N<R.length;N++)if(!R[N].test(U))return!1;if(U.prerelease.length&&!F.includePrerelease){for(let N=0;N<R.length;N++)if(a(R[N].semver),R[N].semver!==r.ANY&&R[N].semver.prerelease.length>0){const I=R[N].semver;if(I.major===U.major&&I.minor===U.minor&&I.patch===U.patch)return!0}return!1}return!0};return OA}const eNe=sW(),tNe=(e,t,n)=>{try{t=new eNe(t,n)}catch{return!1}return t.test(e)};var nNe=tNe,oW=aOe(nNe);function iNe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(c){c.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var rNe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function uW(e,...t){for(const n of t)aNe(e,n);return e}function aNe(e,t){for(const n of Object.keys(t))mx(e,n,t[n],!0)}const Oa=nwe;let X0=fke;const C7=typeof window<"u"?window:void 0;X0===void 0&&C7?.vl?.compile&&(X0=C7.vl);const sNe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},oNe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Gp={vega:"Vega","vega-lite":"Vega-Lite"},hx={vega:Oa.version,"vega-lite":X0?X0.version:"not available"},uNe={vega:e=>e,"vega-lite":(e,t)=>X0.compile(e,{config:t}).spec},lNe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,cNe="chart-wrapper";function fNe(e){return typeof e=="function"}function T7(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Gp[i]} JSON Source`}function dNe(e,t){if(e.$schema){const n=eW(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Gp[n.library]}, but mode argument sets ${Gp[t]??t}.`);const i=n.library;return oW(hx[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Gp[i]} ${n.version}, but the current version of ${Gp[i]} is v${hx[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function lW(e){return!!(e&&"load"in e)}function D7(e){return lW(e)?e:Oa.loader(e)}function hNe(e){const t=e.usermeta?.embedOptions??{};return Js(t.defaultStyle)&&(t.defaultStyle=!1),t}async function gNe(e,t,n={}){let i,r;Js(t)?(r=D7(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=hNe(i),s=a.loader;(!r||s)&&(r=D7(n.loader??s));const o=await k7(a,r),l=await k7(n,r),c={...uW(l,o),config:oC(l.config??{},o.config??{})};return await mNe(e,i,c,r)}async function k7(e,t){const n=Js(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Js(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function pNe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function mNe(e,t,n={},i){const r=n.theme?oC(Qke[n.theme],n.config??{}):n.config,a=Y7(n.actions)?n.actions:uW({},sNe,n.actions??{}),s={...oNe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Oa.Warn,c=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:D,rootContainer:T}=pNe(d);if(!D.getElementById(M)){const O=document.createElement("style");O.id=M,O.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?rNe.toString():n.defaultStyle,T.appendChild(O)}}const h=dNe(t,n.mode);let p=uNe[h](t,r);if(h==="vega-lite"&&p.$schema){const M=eW(p.$schema);oW(hx.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${hx.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(cNe),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):gx(p,v,!0,!1).newDocument),n.formatLocale&&Oa.formatLocale(n.formatLocale),n.timeFormatLocale&&Oa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const D=n.expressionFunctions[M];"fn"in D?Oa.expressionFunction(M,D.fn,D.visitor):D instanceof Function&&Oa.expressionFunction(M,D)}const{ast:b}=n,S=Oa.parse(p,h==="vega-lite"?{}:r,{ast:b}),w=new(n.viewClass||Oa.View)(S,{loader:i,logLevel:l,renderer:o,...b?{expr:Oa.expressionInterpreter??n.expr??xwe}:{}});if(w.addSignalListener("autosize",(M,D)=>{const{type:T}=D;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:D}=n,T=M&&!lW(M)?M?.baseURL:void 0,O=fNe(D)?D:new rOe({baseURL:T,...D===!0?{}:D}).call;w.tooltip(O)}let{hover:_}=n;if(_===void 0&&(_=h==="vega"),_){const{hoverSet:M,updateSet:D}=typeof _=="boolean"?{}:_;w.hover(M,D)}n&&(n.width!=null&&w.width(n.width),n.height!=null&&w.height(n.height),n.padding!=null&&w.padding(n.padding)),await w.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const O=document.createElement("summary");O.innerHTML=lNe,T.append(O),A=z=>{T.contains(z.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const D=document.createElement("div");if(M.append(D),D.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const O=s[`${T.toUpperCase()}_ACTION`],z=document.createElement("a"),P=lc(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;z.text=O,z.href="#",z.target="_blank",z.download=`${c}.${T}`,z.addEventListener("mousedown",async function(B){B.preventDefault();const Y=await w.toImageURL(T,P);this.href=Y}),D.append(z)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(O){T7(Vw(t),n.sourceHeader??"",n.sourceFooter??"",h),O.preventDefault()}),D.append(T)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(O){T7(Vw(p),n.sourceHeader??"",n.sourceFooter??"","vega"),O.preventDefault()}),D.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",O=document.createElement("a");O.text=s.EDITOR_ACTION,O.href="#",O.addEventListener("click",function(z){iNe(window,T,{config:r,mode:h,renderer:o,spec:Vw(t)}),z.preventDefault()}),D.append(O)}}function $(){A&&document.removeEventListener("click",A),w.finalize()}return{view:w,spec:t,vgSpec:p,finalize:$,embedOptions:n}}const yNe="https://vega.github.io/schema/vega/v6.json",vNe="A node-link diagram with force-directed layout, depicting character co-occurrence in the novel Les Misrables.",bNe=700,xNe=500,SNe=0,ENe="none",wNe=[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{name:"nodeRadius",value:22,bind:{input:"range",min:1,max:50,step:1}},{name:"nodeCharge",value:-30,bind:{input:"range",min:-100,max:10,step:1}},{name:"linkDistance",value:100,bind:{input:"range",min:5,max:100,step:1}},{name:"static",value:!1,bind:{input:"checkbox"}},{name:"scoreThreshold",value:0,bind:{input:"range",min:0,max:30,step:1,name:"Score Threshold:"}},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"symbol:pointerout[!event.buttons], window:pointerup",update:"false"},{events:"symbol:pointerover",update:"fix || true"},{events:"[symbol:pointerdown, window:pointerup] > window:pointermove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"symbol:pointerover",update:"fix === true ? item() : node"}]},{name:"restart",value:0,on:[{events:{signal:"fix"},update:"restart + 1"},{events:{signal:"scoreThreshold"},update:"restart + 1"}]},{name:"clickedLink",value:null,on:[{events:"path:click",update:"item()"}]}],_Ne=[],ANe=[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"category10"}},{name:"linkColor",type:"linear",domain:[0,10,24,30],range:["red","red","green","green"]}],$Ne=[{name:"nodes",type:"symbol",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{signal:"datum.group === 0 ? '#808080' : scale('color', datum.group)"},stroke:{value:"white"}},update:{size:{signal:"2 * nodeRadius * nodeRadius"},cursor:{value:"pointer"},tooltip:{signal:"datum"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},static:{signal:"static"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide",radius:{signal:"nodeRadius"}},{force:"nbody",strength:{signal:"nodeCharge"}},{force:"link",links:"link-data",distance:{signal:"linkDistance"}}]}]},{type:"path",from:{data:"link-data"},interactive:!0,encode:{enter:{stroke:{value:"#ccc"},strokeWidth:{value:3}},update:{stroke:{scale:"linkColor",field:"value"},tooltip:{signal:"datum"}},hover:{stroke:{value:"darkgreen"}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]},{type:"text",from:{data:"nodes"},zindex:2,encode:{enter:{align:{value:"center"},baseline:{value:"middle"},fontSize:{value:12},fontWeight:{value:"bold"},fill:{value:"white"},text:{field:"datum.id"},x:{field:"x"},y:{field:"y"}},update:{x:{field:"x"},y:{field:"y"}}}}],MNe={$schema:yNe,description:vNe,width:bNe,height:xNe,padding:SNe,autosize:ENe,signals:wNe,data:_Ne,scales:ANe,marks:$Ne};function CNe(e,t){const n=new NA,i=["firstName","lastName","postcode","DoB"];let r=0;return i.forEach(a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",l=n.diff_main(s,o);r+=l.filter(c=>c[0]!==0).length}),30-r}function TNe({allRecords:e,clusters:t,onEdgeClick:n}){const i=Zn.useRef(null),r=Zn.useRef(null);return Zn.useEffect(()=>{if(!e||!i.current)return;const a=new Map;t.forEach((c,d)=>{c.forEach(h=>{a.set(h.id,d+1)})});const s=e.map(c=>({...c,group:a.get(c.id)||0})),o=[];for(let c=0;c<e.length;c++)for(let d=c+1;d<e.length;d++){const h=s[c].group,p=s[d].group;let y=!1;if((h===0||p===0||h===p)&&(y=!0),y){const v=CNe(e[c],e[d]);o.push({source:c,target:d,value:v})}}const l={...MNe,data:[{name:"node-data",values:s},{name:"links-raw",values:o},{name:"link-data",source:"links-raw",transform:[{type:"filter",expr:"datum.value >= scoreThreshold"}]}]};return gNe(i.current,l,{actions:!0}).then(c=>{r.current=c.view,n&&r.current.addSignalListener("clickedLink",(d,h)=>{n(h)}),document.querySelectorAll(".vg-tooltip").forEach(d=>d.parentNode.removeChild(d))}).catch(console.error),()=>{if(r.current&&n)try{r.current.removeSignalListener("clickedLink",n)}catch{}}},[e,t,n]),ee.jsxs(ee.Fragment,{children:[ee.jsx("h2",{children:"Cluster Relationship Viewer"}),ee.jsx("div",{ref:i})]})}function DNe(){const[e,t]=Zn.useState(jZ),[n,i]=Zn.useState([[]]),[r,a]=Zn.useState(new Set),[s,o]=Zn.useState(new Set),[l,c]=Zn.useState(new Set),[d,h]=Zn.useState(!1),[p,y]=Zn.useState([null,null]),[v,b]=Zn.useState({}),[S,w]=Zn.useState(30);Zn.useEffect(()=>{h(l.size>0)},[l]);const _=[...e,...n.flat()].sort((R,U)=>R.id-U.id);Zn.useEffect(()=>{p[0]&&p[1]?Y():w(30)},[p]);const A=R=>{if(R&&R.datum){const{source:U,target:F}=R.datum;y([U.datum,F.datum])}},$=R=>{const U=new Set(s);U.has(R)?U.delete(R):U.add(R),o(U)},M=()=>Math.random().toString(36).substring(2,8),D=R=>{const U=e.filter(I=>r.has(I.id)),F=n.map((I,H)=>H===R?[...I,...U]:I),N={...v};N[R]||(N[R]=M()),b(N),i(F),t(e.filter(I=>!r.has(I.id))),a(new Set)},T=()=>{const R=[],U=n.map(F=>F.filter(I=>s.has(I.id)?(R.push(I),!1):!0)).filter(F=>F.length>0);t(F=>[...F,...R].sort((I,H)=>I.id-H.id)),i(U),o(new Set)},O=()=>{const R=e.filter(H=>r.has(H.id)),U=[...R],F=[...n,U],N={...v},I=n.length;R.length>0&&(N[I]=M()),b(N),i(F),R.length>0&&(t(e.filter(H=>!r.has(H.id))),a(new Set))},z=R=>{const U=new Set(l);U.has(R)?U.delete(R):U.add(R),c(U)},P=(R,U)=>{const F=[...p];F[U]&&F[U].id===R.id?F[U]=null:F[U]=R,y(F)},B=R=>{if(p[0]&&p[1]){const U=new NA,F=p[0][R],N=p[1][R],I=U.diff_main(F,N);return U.diff_cleanupSemantic(I),U.diff_prettyHtml(I).replace(/background:#ffe6e6/g,"background:#ffaaaa").replace(/background:#e6ffe6/g,"background:#aaffaa")}return""},Y=()=>{let R=0;const U=["firstName","lastName","postcode","DoB"],F=new NA;console.log("Calculating Match Weight for:",p[0],p[1]),U.forEach(I=>{const H=p[0][I]?.toString()||"",K=p[1][I]?.toString()||"";console.log(`Field: ${I}, Text1: ${H}, Text2: ${K}`);const L=F.diff_main(H,K);console.log(`Diff for ${I}:`,L),R+=L.filter(V=>V[0]!==0).length,console.log(`Total Differences after ${I}: ${R}`)});const N=30-R;console.log("Final Match Weight:",N),w(N)};return ee.jsxs("div",{className:"app-container",children:[ee.jsxs("div",{className:"left-column",children:[ee.jsx("h2",{children:"Unresolved Records"}),ee.jsxs("table",{children:[ee.jsx("thead",{children:ee.jsxs("tr",{children:[ee.jsx("th",{}),ee.jsx("th",{})," ",ee.jsx("th",{children:"ID"}),ee.jsx("th",{children:"First Name"}),ee.jsx("th",{children:"Last Name"}),d&&ee.jsx("th",{children:"Timestamp"}),ee.jsxs("th",{children:["Select for",ee.jsx("br",{}),"compare"]})]})}),ee.jsx("tbody",{children:e.map(R=>ee.jsxs(OZ.Fragment,{children:[ee.jsxs("tr",{children:[ee.jsx("td",{children:ee.jsx("input",{type:"checkbox",checked:r.has(R.id),onChange:()=>{const U=new Set(r);U.has(R.id)?U.delete(R.id):U.add(R.id),a(U)}})}),ee.jsx("td",{children:R.history&&R.history.length>0&&ee.jsx("button",{className:"history-toggle-button",onClick:()=>z(R.id),children:""})}),ee.jsx("td",{children:R.id}),ee.jsx("td",{children:R.firstName}),ee.jsx("td",{children:R.lastName}),d&&ee.jsx("td",{})," ",ee.jsxs("td",{children:[ee.jsx("button",{onClick:()=>P(R,0),className:p[0]&&p[0].id===R.id?"selected":"",children:"1"}),ee.jsx("button",{onClick:()=>P(R,1),className:p[1]&&p[1].id===R.id?"selected":"",children:"2"})]})]},R.id),l.has(R.id)&&R.history&&R.history.length>0&&R.history.map((U,F)=>ee.jsxs("tr",{className:"history-row",children:[ee.jsx("td",{}),ee.jsx("td",{}),ee.jsx("td",{})," ",ee.jsx("td",{children:U.firstName}),ee.jsx("td",{children:U.lastName}),ee.jsx("td",{className:"history-timestamp",children:new Date(U.timestamp).toLocaleString()})]},`${R.id}-hist-${F}`))]},R.id))})]})]}),ee.jsx("div",{className:"controls",children:ee.jsx("button",{disabled:!s.size,onClick:T,children:""})}),ee.jsxs("div",{className:"right-column",children:[ee.jsx("h2",{children:"Clusters"}),n.map((R,U)=>ee.jsxs("div",{className:"cluster-card",children:[ee.jsxs("h3",{children:["Cluster #",U+1]}),ee.jsxs("table",{children:[ee.jsx("thead",{children:ee.jsxs("tr",{children:[ee.jsx("th",{}),ee.jsx("th",{children:"ID"}),ee.jsx("th",{children:"First Name"}),ee.jsx("th",{children:"Last Name"}),ee.jsxs("th",{children:["Select for",ee.jsx("br",{}),"compare"]})]})}),ee.jsx("tbody",{children:R.map(F=>ee.jsxs("tr",{children:[ee.jsx("td",{children:ee.jsx("input",{type:"checkbox",checked:s.has(F.id),onChange:()=>$(F.id)})}),ee.jsx("td",{children:F.id}),ee.jsx("td",{children:F.firstName}),ee.jsx("td",{children:F.lastName}),ee.jsxs("td",{children:[ee.jsx("button",{onClick:()=>P(F,0),className:p[0]&&p[0].id===F.id?"selected":"",children:"1"}),ee.jsx("button",{onClick:()=>P(F,1),className:p[1]&&p[1].id===F.id?"selected":"",children:"2"})]})]},F.id))})]}),ee.jsx("button",{disabled:!r.size,onClick:()=>D(U),children:"Add selected to this cluster "})]},U)),ee.jsx("button",{onClick:O,className:"add-new-cluster-button",children:"Add New Cluster"})]}),ee.jsxs("div",{className:"comparison-table-container",children:[ee.jsx("h2",{children:"Detailed comparison"}),p[0]&&p[1]&&ee.jsxs("p",{children:["Match Weight: ",S]}),ee.jsxs("table",{children:[ee.jsx("thead",{children:ee.jsxs("tr",{children:[ee.jsx("th",{children:"Slot"}),ee.jsx("th",{children:"ID"}),ee.jsx("th",{children:"First Name"}),ee.jsx("th",{children:"Last Name"}),ee.jsx("th",{children:"Postcode"}),ee.jsx("th",{children:"DoB"})]})}),ee.jsxs("tbody",{children:[ee.jsxs("tr",{children:[ee.jsx("td",{children:"1"}),p[0]?ee.jsxs(ee.Fragment,{children:[ee.jsx("td",{children:p[0].id}),ee.jsx("td",{children:p[0].firstName}),ee.jsx("td",{children:p[0].lastName}),ee.jsx("td",{children:p[0].postcode}),ee.jsx("td",{children:p[0].DoB})]}):ee.jsx("td",{colSpan:"5",children:"Empty"})]}),ee.jsxs("tr",{children:[ee.jsx("td",{children:"2"}),p[1]?ee.jsxs(ee.Fragment,{children:[ee.jsx("td",{children:p[1].id}),ee.jsx("td",{children:p[1].firstName}),ee.jsx("td",{children:p[1].lastName}),ee.jsx("td",{children:p[1].postcode}),ee.jsx("td",{children:p[1].DoB})]}):ee.jsx("td",{colSpan:"5",children:"Empty"})]}),p[0]&&p[1]&&ee.jsx(ee.Fragment,{children:ee.jsxs("tr",{children:[ee.jsx("td",{children:"Diff"}),ee.jsx("td",{}),ee.jsx("td",{dangerouslySetInnerHTML:{__html:B("firstName")}}),ee.jsx("td",{dangerouslySetInnerHTML:{__html:B("lastName")}}),ee.jsx("td",{dangerouslySetInnerHTML:{__html:B("postcode")}}),ee.jsx("td",{dangerouslySetInnerHTML:{__html:B("DoB")}})]})})]})]})]}),ee.jsx("button",{className:"done-button",onClick:()=>console.log("Clusters",n),children:"Done"}),ee.jsxs("div",{className:"debug-output-container",children:[ee.jsx("h2",{children:"Debug Output"}),ee.jsxs("table",{children:[ee.jsx("thead",{children:ee.jsxs("tr",{children:[ee.jsx("th",{children:"ID"}),ee.jsx("th",{children:"Manual override"})]})}),ee.jsxs("tbody",{children:[e.map(R=>ee.jsxs("tr",{children:[ee.jsx("td",{children:R.id}),ee.jsx("td",{children:"N/A"})]},R.id)),n.map((R,U)=>R.map(F=>ee.jsxs("tr",{children:[ee.jsx("td",{children:F.id}),ee.jsx("td",{children:v[U]})]},F.id)))]})]})]}),ee.jsx("div",{className:"cluster-viewer-container",children:ee.jsx(TNe,{allRecords:_,clusters:n,onEdgeClick:A})})]})}BZ.createRoot(document.getElementById("root")).render(ee.jsx(Zn.StrictMode,{children:ee.jsx(DNe,{})}));</script>
    <style rel="stylesheet" crossorigin>.app-container{display:grid;grid-template-columns:1fr auto 1fr;gap:1rem;padding:1rem;font-family:monospace}.left-column,.right-column{border:1px solid #ccc;padding:1rem}.cluster-card{border:1px solid purple;padding:1rem;margin-bottom:1rem}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}.history-row td{background-color:#f0f0f0}.history-timestamp{font-size:.8em;color:#666}.done-button{position:fixed;top:1rem;right:1rem}.comparison-table-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem}.comparison-table-container p{font-size:1.2em;font-weight:700;margin-bottom:.5rem}button.selected{background-color:#a8d8a8}.debug-output-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #e0e0e0;padding:1rem;color:#888;background-color:#f8f8f8}.debug-output-container table,.debug-output-container th,.debug-output-container td{border:1px solid #e0e0e0}.cluster-viewer-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem;background-color:#fff}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
