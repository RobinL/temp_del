<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function o3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ZA={exports:{}},_0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO;function YW(){if(wO)return _0;wO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return _0.Fragment=t,_0.jsx=n,_0.jsxs=n,_0}var CO;function XW(){return CO||(CO=1,ZA.exports=YW()),ZA.exports}var ue=XW(),KA={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function VW(){if(DO)return Ge;DO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(R){return R===null||typeof R!="object"?null:(R=h&&R[h]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function E(R,V,se){this.props=R,this.context=V,this.refs=b,this.updater=se||y}E.prototype.isReactComponent={},E.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function S(){}S.prototype=E.prototype;function _(R,V,se){this.props=R,this.context=V,this.refs=b,this.updater=se||y}var w=_.prototype=new S;w.constructor=_,v(w,E.prototype),w.isPureReactComponent=!0;var C=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function D(R,V,se,oe,ge,Se){return se=Se.ref,{$$typeof:e,type:R,key:V,ref:se!==void 0?se:null,props:Se}}function F(R,V){return D(R.type,V,void 0,void 0,void 0,R.props)}function O(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function U(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(se){return V[se]})}var z=/\/+/g;function G(R,V){return typeof R=="object"&&R!==null&&R.key!=null?U(""+R.key):V.toString(36)}function B(){}function j(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(B,B):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function I(R,V,se,oe,ge){var Se=typeof R;(Se==="undefined"||Se==="boolean")&&(R=null);var De=!1;if(R===null)De=!0;else switch(Se){case"bigint":case"string":case"number":De=!0;break;case"object":switch(R.$$typeof){case e:case t:De=!0;break;case d:return De=R._init,I(De(R._payload),V,se,oe,ge)}}if(De)return ge=ge(R),De=oe===""?"."+G(R,0):oe,C(ge)?(se="",De!=null&&(se=De.replace(z,"$&/")+"/"),I(ge,V,se,"",function(ye){return ye})):ge!=null&&(O(ge)&&(ge=F(ge,se+(ge.key==null||R&&R.key===ge.key?"":(""+ge.key).replace(z,"$&/")+"/")+De)),V.push(ge)),1;De=0;var en=oe===""?".":oe+":";if(C(R))for(var at=0;at<R.length;at++)oe=R[at],Se=en+G(oe,at),De+=I(oe,V,se,Se,ge);else if(at=p(R),typeof at=="function")for(R=at.call(R),at=0;!(oe=R.next()).done;)oe=oe.value,Se=en+G(oe,at++),De+=I(oe,V,se,Se,ge);else if(Se==="object"){if(typeof R.then=="function")return I(j(R),V,se,oe,ge);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return De}function N(R,V,se){if(R==null)return R;var oe=[],ge=0;return I(R,oe,"","",function(Se){return V.call(se,Se,ge++)}),oe}function q(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(se){(R._status===0||R._status===-1)&&(R._status=1,R._result=se)},function(se){(R._status===0||R._status===-1)&&(R._status=2,R._result=se)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var Y=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function J(){}return Ge.Children={map:N,forEach:function(R,V,se){N(R,function(){V.apply(this,arguments)},se)},count:function(R){var V=0;return N(R,function(){V++}),V},toArray:function(R){return N(R,function(V){return V})||[]},only:function(R){if(!O(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ge.Component=E,Ge.Fragment=n,Ge.Profiler=r,Ge.PureComponent=_,Ge.StrictMode=i,Ge.Suspense=l,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(R){return $.H.useMemoCache(R)}},Ge.cache=function(R){return function(){return R.apply(null,arguments)}},Ge.cloneElement=function(R,V,se){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var oe=v({},R.props),ge=R.key,Se=void 0;if(V!=null)for(De in V.ref!==void 0&&(Se=void 0),V.key!==void 0&&(ge=""+V.key),V)!T.call(V,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&V.ref===void 0||(oe[De]=V[De]);var De=arguments.length-2;if(De===1)oe.children=se;else if(1<De){for(var en=Array(De),at=0;at<De;at++)en[at]=arguments[at+2];oe.children=en}return D(R.type,ge,void 0,void 0,Se,oe)},Ge.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},Ge.createElement=function(R,V,se){var oe,ge={},Se=null;if(V!=null)for(oe in V.key!==void 0&&(Se=""+V.key),V)T.call(V,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ge[oe]=V[oe]);var De=arguments.length-2;if(De===1)ge.children=se;else if(1<De){for(var en=Array(De),at=0;at<De;at++)en[at]=arguments[at+2];ge.children=en}if(R&&R.defaultProps)for(oe in De=R.defaultProps,De)ge[oe]===void 0&&(ge[oe]=De[oe]);return D(R,Se,void 0,void 0,null,ge)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(R){return{$$typeof:o,render:R}},Ge.isValidElement=O,Ge.lazy=function(R){return{$$typeof:d,_payload:{_status:-1,_result:R},_init:q}},Ge.memo=function(R,V){return{$$typeof:f,type:R,compare:V===void 0?null:V}},Ge.startTransition=function(R){var V=$.T,se={};$.T=se;try{var oe=R(),ge=$.S;ge!==null&&ge(se,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(J,Y)}catch(Se){Y(Se)}finally{$.T=V}},Ge.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ge.use=function(R){return $.H.use(R)},Ge.useActionState=function(R,V,se){return $.H.useActionState(R,V,se)},Ge.useCallback=function(R,V){return $.H.useCallback(R,V)},Ge.useContext=function(R){return $.H.useContext(R)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(R,V){return $.H.useDeferredValue(R,V)},Ge.useEffect=function(R,V,se){var oe=$.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(R,V)},Ge.useId=function(){return $.H.useId()},Ge.useImperativeHandle=function(R,V,se){return $.H.useImperativeHandle(R,V,se)},Ge.useInsertionEffect=function(R,V){return $.H.useInsertionEffect(R,V)},Ge.useLayoutEffect=function(R,V){return $.H.useLayoutEffect(R,V)},Ge.useMemo=function(R,V){return $.H.useMemo(R,V)},Ge.useOptimistic=function(R,V){return $.H.useOptimistic(R,V)},Ge.useReducer=function(R,V,se){return $.H.useReducer(R,V,se)},Ge.useRef=function(R){return $.H.useRef(R)},Ge.useState=function(R){return $.H.useState(R)},Ge.useSyncExternalStore=function(R,V,se){return $.H.useSyncExternalStore(R,V,se)},Ge.useTransition=function(){return $.H.useTransition()},Ge.version="19.1.0",Ge}var $O;function u3(){return $O||($O=1,KA.exports=VW()),KA.exports}var Si=u3();const WW=o3(Si);var JA={exports:{}},w0={},eS={exports:{}},tS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MO;function QW(){return MO||(MO=1,function(e){function t(N,q){var Y=N.length;N.push(q);e:for(;0<Y;){var J=Y-1>>>1,R=N[J];if(0<r(R,q))N[J]=q,N[Y]=R,Y=J;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var q=N[0],Y=N.pop();if(Y!==q){N[0]=Y;e:for(var J=0,R=N.length,V=R>>>1;J<V;){var se=2*(J+1)-1,oe=N[se],ge=se+1,Se=N[ge];if(0>r(oe,Y))ge<R&&0>r(Se,oe)?(N[J]=Se,N[ge]=Y,J=ge):(N[J]=oe,N[se]=Y,J=se);else if(ge<R&&0>r(Se,Y))N[J]=Se,N[ge]=Y,J=ge;else break e}}return q}function r(N,q){var Y=N.sortIndex-q.sortIndex;return Y!==0?Y:N.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function C(N){for(var q=n(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=N)i(f),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(f)}}function $(N){if(b=!1,C(N),!v)if(n(l)!==null)v=!0,T||(T=!0,G());else{var q=n(f);q!==null&&I($,q.startTime-N)}}var T=!1,D=-1,F=5,O=-1;function U(){return E?!0:!(e.unstable_now()-O<F)}function z(){if(E=!1,T){var N=e.unstable_now();O=N;var q=!0;try{e:{v=!1,b&&(b=!1,_(D),D=-1),y=!0;var Y=p;try{t:{for(C(N),h=n(l);h!==null&&!(h.expirationTime>N&&U());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var R=J(h.expirationTime<=N);if(N=e.unstable_now(),typeof R=="function"){h.callback=R,C(N),q=!0;break t}h===n(l)&&i(l),C(N)}else i(l);h=n(l)}if(h!==null)q=!0;else{var V=n(f);V!==null&&I($,V.startTime-N),q=!1}}break e}finally{h=null,p=Y,y=!1}q=void 0}}finally{q?G():T=!1}}}var G;if(typeof w=="function")G=function(){w(z)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,j=B.port2;B.port1.onmessage=z,G=function(){j.postMessage(null)}}else G=function(){S(z,0)};function I(N,q){D=S(function(){N(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Y=p;p=q;try{return N()}finally{p=Y}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(N,q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=p;p=N;try{return q()}finally{p=Y}},e.unstable_scheduleCallback=function(N,q,Y){var J=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?J+Y:J):Y=J,N){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=Y+R,N={id:d++,callback:q,priorityLevel:N,startTime:Y,expirationTime:R,sortIndex:-1},Y>J?(N.sortIndex=Y,t(f,N),n(l)===null&&N===n(f)&&(b?(_(D),D=-1):b=!0,I($,Y-J))):(N.sortIndex=R,t(l,N),v||y||(v=!0,T||(T=!0,G()))),N},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(N){var q=p;return function(){var Y=p;p=q;try{return N.apply(this,arguments)}finally{p=Y}}}}(tS)),tS}var TO;function ZW(){return TO||(TO=1,eS.exports=QW()),eS.exports}var nS={exports:{}},ri={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function KW(){if(kO)return ri;kO=1;var e=u3();function t(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ri.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ri.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(l,f,null,d)},ri.flushSync=function(l){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=f,i.p=d,i.d.f()}},ri.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},ri.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},ri.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ri.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},ri.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ri.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},ri.requestFormReset=function(l){i.d.r(l)},ri.unstable_batchedUpdates=function(l,f){return l(f)},ri.useFormState=function(l,f,d){return s.H.useFormState(l,f,d)},ri.useFormStatus=function(){return s.H.useHostTransitionStatus()},ri.version="19.1.0",ri}var FO;function JW(){if(FO)return nS.exports;FO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nS.exports=KW(),nS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OO;function eQ(){if(OO)return w0;OO=1;var e=ZW(),t=u3(),n=JW();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function s(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var c=u.alternate;if(!c){if(c=a(u),c===null)throw Error(i(188));return c!==u?null:u}for(var g=u,m=c;;){var x=g.return;if(x===null)break;var A=x.alternate;if(A===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===g)return o(x),u;if(A===m)return o(x),c;A=A.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=A;else{for(var M=!1,k=x.child;k;){if(k===g){M=!0,g=x,m=A;break}if(k===m){M=!0,m=x,g=A;break}k=k.sibling}if(!M){for(k=A.child;k;){if(k===g){M=!0,g=A,m=x;break}if(k===m){M=!0,m=A,g=x;break}k=k.sibling}if(!M)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:c}function f(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=f(u),c!==null)return c;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function G(u){return u===null||typeof u!="object"?null:(u=z&&u[z]||u["@@iterator"],typeof u=="function"?u:null)}var B=Symbol.for("react.client.reference");function j(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===B?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case $:return"Suspense";case T:return"SuspenseList";case O:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case w:return(u.displayName||"Context")+".Provider";case _:return(u._context.displayName||"Context")+".Consumer";case C:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case D:return c=u.displayName||null,c!==null?c:j(u.type)||"Memo";case F:c=u._payload,u=u._init;try{return j(u(c))}catch{}}return null}var I=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},J=[],R=-1;function V(u){return{current:u}}function se(u){0>R||(u.current=J[R],J[R]=null,R--)}function oe(u,c){R++,J[R]=u.current,u.current=c}var ge=V(null),Se=V(null),De=V(null),en=V(null);function at(u,c){switch(oe(De,c),oe(Se,u),oe(ge,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?J6(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=J6(c),u=eO(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}se(ge),oe(ge,u)}function ye(){se(ge),se(Se),se(De)}function Ie(u){u.memoizedState!==null&&oe(en,u);var c=ge.current,g=eO(c,u.type);c!==g&&(oe(Se,u),oe(ge,g))}function qe(u){Se.current===u&&(se(ge),se(Se)),en.current===u&&(se(en),b0._currentValue=Y)}var fe=Object.prototype.hasOwnProperty,tn=e.unstable_scheduleCallback,st=e.unstable_cancelCallback,cn=e.unstable_shouldYield,Cn=e.unstable_requestPaint,fn=e.unstable_now,pm=e.unstable_getCurrentPriorityLevel,Ok=e.unstable_ImmediatePriority,Nk=e.unstable_UserBlockingPriority,mm=e.unstable_NormalPriority,DX=e.unstable_LowPriority,Rk=e.unstable_IdlePriority,$X=e.log,MX=e.unstable_setDisableYieldValue,Dh=null,or=null;function Bo(u){if(typeof $X=="function"&&MX(u),or&&typeof or.setStrictMode=="function")try{or.setStrictMode(Dh,u)}catch{}}var ur=Math.clz32?Math.clz32:FX,TX=Math.log,kX=Math.LN2;function FX(u){return u>>>=0,u===0?32:31-(TX(u)/kX|0)|0}var ym=256,vm=4194304;function ul(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function bm(u,c,g){var m=u.pendingLanes;if(m===0)return 0;var x=0,A=u.suspendedLanes,M=u.pingedLanes;u=u.warmLanes;var k=m&134217727;return k!==0?(m=k&~A,m!==0?x=ul(m):(M&=k,M!==0?x=ul(M):g||(g=k&~u,g!==0&&(x=ul(g))))):(k=m&~A,k!==0?x=ul(k):M!==0?x=ul(M):g||(g=m&~u,g!==0&&(x=ul(g)))),x===0?0:c!==0&&c!==x&&(c&A)===0&&(A=x&-x,g=c&-c,A>=g||A===32&&(g&4194048)!==0)?c:x}function $h(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function OX(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zk(){var u=ym;return ym<<=1,(ym&4194048)===0&&(ym=256),u}function Bk(){var u=vm;return vm<<=1,(vm&62914560)===0&&(vm=4194304),u}function Ix(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function Mh(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function NX(u,c,g,m,x,A){var M=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var k=u.entanglements,L=u.expirationTimes,W=u.hiddenUpdates;for(g=M&~g;0<g;){var ie=31-ur(g),ae=1<<ie;k[ie]=0,L[ie]=-1;var Q=W[ie];if(Q!==null)for(W[ie]=null,ie=0;ie<Q.length;ie++){var Z=Q[ie];Z!==null&&(Z.lane&=-536870913)}g&=~ae}m!==0&&Lk(u,m,0),A!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=A&~(M&~c))}function Lk(u,c,g){u.pendingLanes|=c,u.suspendedLanes&=~c;var m=31-ur(c);u.entangledLanes|=c,u.entanglements[m]=u.entanglements[m]|1073741824|g&4194090}function Uk(u,c){var g=u.entangledLanes|=c;for(u=u.entanglements;g;){var m=31-ur(g),x=1<<m;x&c|u[m]&c&&(u[m]|=c),g&=~x}}function jx(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Px(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Ik(){var u=q.p;return u!==0?u:(u=window.event,u===void 0?32:bO(u.type))}function RX(u,c){var g=q.p;try{return q.p=u,c()}finally{q.p=g}}var Lo=Math.random().toString(36).slice(2),ni="__reactFiber$"+Lo,Ii="__reactProps$"+Lo,Zc="__reactContainer$"+Lo,qx="__reactEvents$"+Lo,zX="__reactListeners$"+Lo,BX="__reactHandles$"+Lo,jk="__reactResources$"+Lo,Th="__reactMarker$"+Lo;function Hx(u){delete u[ni],delete u[Ii],delete u[qx],delete u[zX],delete u[BX]}function Kc(u){var c=u[ni];if(c)return c;for(var g=u.parentNode;g;){if(c=g[Zc]||g[ni]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(u=rO(u);u!==null;){if(g=u[ni])return g;u=rO(u)}return c}u=g,g=u.parentNode}return null}function Jc(u){if(u=u[ni]||u[Zc]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function kh(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function ef(u){var c=u[jk];return c||(c=u[jk]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Dn(u){u[Th]=!0}var Pk=new Set,qk={};function ll(u,c){tf(u,c),tf(u+"Capture",c)}function tf(u,c){for(qk[u]=c,u=0;u<c.length;u++)Pk.add(c[u])}var LX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hk={},Gk={};function UX(u){return fe.call(Gk,u)?!0:fe.call(Hk,u)?!1:LX.test(u)?Gk[u]=!0:(Hk[u]=!0,!1)}function xm(u,c,g){if(UX(c))if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+g)}}function Em(u,c,g){if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+g)}}function Ns(u,c,g,m){if(m===null)u.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(c,g,""+m)}}var Gx,Yk;function nf(u){if(Gx===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Gx=c&&c[1]||"",Yk=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gx+u+Yk}var Yx=!1;function Xx(u,c){if(!u||Yx)return"";Yx=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var Q=Z}Reflect.construct(u,[],ae)}else{try{ae.call()}catch(Z){Q=Z}u.call(ae.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ae=u())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),M=A[0],k=A[1];if(M&&k){var L=M.split(`
`),W=k.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===W.length)for(m=L.length-1,x=W.length-1;1<=m&&0<=x&&L[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==W[x]){var ie=`
`+L[m].replace(" at new "," at ");return u.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",u.displayName)),ie}while(1<=m&&0<=x);break}}}finally{Yx=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?nf(g):""}function IX(u){switch(u.tag){case 26:case 27:case 5:return nf(u.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 15:return Xx(u.type,!1);case 11:return Xx(u.type.render,!1);case 1:return Xx(u.type,!0);case 31:return nf("Activity");default:return""}}function Xk(u){try{var c="";do c+=IX(u),u=u.return;while(u);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function kr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Vk(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function jX(u){var c=Vk(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),m=""+u[c];if(!u.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,A=g.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return x.call(this)},set:function(M){m=""+M,A.call(this,M)}}),Object.defineProperty(u,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function Am(u){u._valueTracker||(u._valueTracker=jX(u))}function Wk(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return u&&(m=Vk(u)?u.checked?"true":"false":u.value),u=m,u!==g?(c.setValue(u),!0):!1}function Sm(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var PX=/[\n"\\]/g;function Fr(u){return u.replace(PX,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Vx(u,c,g,m,x,A,M,k){u.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?u.type=M:u.removeAttribute("type"),c!=null?M==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+kr(c)):u.value!==""+kr(c)&&(u.value=""+kr(c)):M!=="submit"&&M!=="reset"||u.removeAttribute("value"),c!=null?Wx(u,M,kr(c)):g!=null?Wx(u,M,kr(g)):m!=null&&u.removeAttribute("value"),x==null&&A!=null&&(u.defaultChecked=!!A),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?u.name=""+kr(k):u.removeAttribute("name")}function Qk(u,c,g,m,x,A,M,k){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(u.type=A),c!=null||g!=null){if(!(A!=="submit"&&A!=="reset"||c!=null))return;g=g!=null?""+kr(g):"",c=c!=null?""+kr(c):g,k||c===u.value||(u.value=c),u.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=k?u.checked:!!m,u.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(u.name=M)}function Wx(u,c,g){c==="number"&&Sm(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function rf(u,c,g,m){if(u=u.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=c.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&m&&(u[g].defaultSelected=!0)}else{for(g=""+kr(g),c=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}c!==null||u[x].disabled||(c=u[x])}c!==null&&(c.selected=!0)}}function Zk(u,c,g){if(c!=null&&(c=""+kr(c),c!==u.value&&(u.value=c),g==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=g!=null?""+kr(g):""}function Kk(u,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(I(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=kr(c),u.defaultValue=g,m=u.textContent,m===g&&m!==""&&m!==null&&(u.value=m)}function af(u,c){if(c){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=c;return}}u.textContent=c}var qX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jk(u,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":m?u.setProperty(c,g):typeof g!="number"||g===0||qX.has(c)?c==="float"?u.cssFloat=g:u[c]=(""+g).trim():u[c]=g+"px"}function eF(u,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&Jk(u,x,m)}else for(var A in c)c.hasOwnProperty(A)&&Jk(u,A,c[A])}function Qx(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _m(u){return GX.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Zx=null;function Kx(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var sf=null,of=null;function tF(u){var c=Jc(u);if(c&&(u=c.stateNode)){var g=u[Ii]||null;e:switch(u=c.stateNode,c.type){case"input":if(Vx(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Fr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==u&&m.form===u.form){var x=m[Ii]||null;if(!x)throw Error(i(90));Vx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===u.form&&Wk(m)}break e;case"textarea":Zk(u,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&rf(u,!!g.multiple,c,!1)}}}var Jx=!1;function nF(u,c,g){if(Jx)return u(c,g);Jx=!0;try{var m=u(c);return m}finally{if(Jx=!1,(sf!==null||of!==null)&&(l1(),sf&&(c=sf,u=of,of=sf=null,tF(c),u)))for(c=0;c<u.length;c++)tF(u[c])}}function Fh(u,c){var g=u.stateNode;if(g===null)return null;var m=g[Ii]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eE=!1;if(Rs)try{var Oh={};Object.defineProperty(Oh,"passive",{get:function(){eE=!0}}),window.addEventListener("test",Oh,Oh),window.removeEventListener("test",Oh,Oh)}catch{eE=!1}var Uo=null,tE=null,wm=null;function iF(){if(wm)return wm;var u,c=tE,g=c.length,m,x="value"in Uo?Uo.value:Uo.textContent,A=x.length;for(u=0;u<g&&c[u]===x[u];u++);var M=g-u;for(m=1;m<=M&&c[g-m]===x[A-m];m++);return wm=x.slice(u,1<m?1-m:void 0)}function Cm(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function Dm(){return!0}function rF(){return!1}function ji(u){function c(g,m,x,A,M){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=A,this.target=M,this.currentTarget=null;for(var k in u)u.hasOwnProperty(k)&&(g=u[k],this[k]=g?g(A):A[k]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Dm:rF,this.isPropagationStopped=rF,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Dm)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Dm)},persist:function(){},isPersistent:Dm}),c}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$m=ji(cl),Nh=d({},cl,{view:0,detail:0}),YX=ji(Nh),nE,iE,Rh,Mm=d({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aE,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Rh&&(Rh&&u.type==="mousemove"?(nE=u.screenX-Rh.screenX,iE=u.screenY-Rh.screenY):iE=nE=0,Rh=u),nE)},movementY:function(u){return"movementY"in u?u.movementY:iE}}),aF=ji(Mm),XX=d({},Mm,{dataTransfer:0}),VX=ji(XX),WX=d({},Nh,{relatedTarget:0}),rE=ji(WX),QX=d({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),ZX=ji(QX),KX=d({},cl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),JX=ji(KX),eV=d({},cl,{data:0}),sF=ji(eV),tV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rV(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=iV[u])?!!c[u]:!1}function aE(){return rV}var aV=d({},Nh,{key:function(u){if(u.key){var c=tV[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=Cm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?nV[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aE,charCode:function(u){return u.type==="keypress"?Cm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Cm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),sV=ji(aV),oV=d({},Mm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oF=ji(oV),uV=d({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aE}),lV=ji(uV),cV=d({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fV=ji(cV),dV=d({},Mm,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),hV=ji(dV),gV=d({},cl,{newState:0,oldState:0}),pV=ji(gV),mV=[9,13,27,32],sE=Rs&&"CompositionEvent"in window,zh=null;Rs&&"documentMode"in document&&(zh=document.documentMode);var yV=Rs&&"TextEvent"in window&&!zh,uF=Rs&&(!sE||zh&&8<zh&&11>=zh),lF=" ",cF=!1;function fF(u,c){switch(u){case"keyup":return mV.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dF(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var uf=!1;function vV(u,c){switch(u){case"compositionend":return dF(c);case"keypress":return c.which!==32?null:(cF=!0,lF);case"textInput":return u=c.data,u===lF&&cF?null:u;default:return null}}function bV(u,c){if(uf)return u==="compositionend"||!sE&&fF(u,c)?(u=iF(),wm=tE=Uo=null,uf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return uF&&c.locale!=="ko"?null:c.data;default:return null}}var xV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hF(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!xV[u.type]:c==="textarea"}function gF(u,c,g,m){sf?of?of.push(m):of=[m]:sf=m,c=p1(c,"onChange"),0<c.length&&(g=new $m("onChange","change",null,g,m),u.push({event:g,listeners:c}))}var Bh=null,Lh=null;function EV(u){V6(u,0)}function Tm(u){var c=kh(u);if(Wk(c))return u}function pF(u,c){if(u==="change")return c}var mF=!1;if(Rs){var oE;if(Rs){var uE="oninput"in document;if(!uE){var yF=document.createElement("div");yF.setAttribute("oninput","return;"),uE=typeof yF.oninput=="function"}oE=uE}else oE=!1;mF=oE&&(!document.documentMode||9<document.documentMode)}function vF(){Bh&&(Bh.detachEvent("onpropertychange",bF),Lh=Bh=null)}function bF(u){if(u.propertyName==="value"&&Tm(Lh)){var c=[];gF(c,Lh,u,Kx(u)),nF(EV,c)}}function AV(u,c,g){u==="focusin"?(vF(),Bh=c,Lh=g,Bh.attachEvent("onpropertychange",bF)):u==="focusout"&&vF()}function SV(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Tm(Lh)}function _V(u,c){if(u==="click")return Tm(c)}function wV(u,c){if(u==="input"||u==="change")return Tm(c)}function CV(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var lr=typeof Object.is=="function"?Object.is:CV;function Uh(u,c){if(lr(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!fe.call(c,x)||!lr(u[x],c[x]))return!1}return!0}function xF(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function EF(u,c){var g=xF(u);u=0;for(var m;g;){if(g.nodeType===3){if(m=u+g.textContent.length,u<=c&&m>=c)return{node:g,offset:c-u};u=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=xF(g)}}function AF(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?AF(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function SF(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=Sm(u.document);c instanceof u.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)u=c.contentWindow;else break;c=Sm(u.document)}return c}function lE(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var DV=Rs&&"documentMode"in document&&11>=document.documentMode,lf=null,cE=null,Ih=null,fE=!1;function _F(u,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;fE||lf==null||lf!==Sm(m)||(m=lf,"selectionStart"in m&&lE(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ih&&Uh(Ih,m)||(Ih=m,m=p1(cE,"onSelect"),0<m.length&&(c=new $m("onSelect","select",null,c,g),u.push({event:c,listeners:m}),c.target=lf)))}function fl(u,c){var g={};return g[u.toLowerCase()]=c.toLowerCase(),g["Webkit"+u]="webkit"+c,g["Moz"+u]="moz"+c,g}var cf={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},dE={},wF={};Rs&&(wF=document.createElement("div").style,"AnimationEvent"in window||(delete cf.animationend.animation,delete cf.animationiteration.animation,delete cf.animationstart.animation),"TransitionEvent"in window||delete cf.transitionend.transition);function dl(u){if(dE[u])return dE[u];if(!cf[u])return u;var c=cf[u],g;for(g in c)if(c.hasOwnProperty(g)&&g in wF)return dE[u]=c[g];return u}var CF=dl("animationend"),DF=dl("animationiteration"),$F=dl("animationstart"),$V=dl("transitionrun"),MV=dl("transitionstart"),TV=dl("transitioncancel"),MF=dl("transitionend"),TF=new Map,hE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hE.push("scrollEnd");function sa(u,c){TF.set(u,c),ll(c,[u])}var kF=new WeakMap;function Or(u,c){if(typeof u=="object"&&u!==null){var g=kF.get(u);return g!==void 0?g:(c={value:u,source:c,stack:Xk(c)},kF.set(u,c),c)}return{value:u,source:c,stack:Xk(c)}}var Nr=[],ff=0,gE=0;function km(){for(var u=ff,c=gE=ff=0;c<u;){var g=Nr[c];Nr[c++]=null;var m=Nr[c];Nr[c++]=null;var x=Nr[c];Nr[c++]=null;var A=Nr[c];if(Nr[c++]=null,m!==null&&x!==null){var M=m.pending;M===null?x.next=x:(x.next=M.next,M.next=x),m.pending=x}A!==0&&FF(g,x,A)}}function Fm(u,c,g,m){Nr[ff++]=u,Nr[ff++]=c,Nr[ff++]=g,Nr[ff++]=m,gE|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function pE(u,c,g,m){return Fm(u,c,g,m),Om(u)}function df(u,c){return Fm(u,null,null,c),Om(u)}function FF(u,c,g){u.lanes|=g;var m=u.alternate;m!==null&&(m.lanes|=g);for(var x=!1,A=u.return;A!==null;)A.childLanes|=g,m=A.alternate,m!==null&&(m.childLanes|=g),A.tag===22&&(u=A.stateNode,u===null||u._visibility&1||(x=!0)),u=A,A=A.return;return u.tag===3?(A=u.stateNode,x&&c!==null&&(x=31-ur(g),u=A.hiddenUpdates,m=u[x],m===null?u[x]=[c]:m.push(c),c.lane=g|536870912),A):null}function Om(u){if(50<f0)throw f0=0,EA=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var hf={};function kV(u,c,g,m){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(u,c,g,m){return new kV(u,c,g,m)}function mE(u){return u=u.prototype,!(!u||!u.isReactComponent)}function zs(u,c){var g=u.alternate;return g===null?(g=cr(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function OF(u,c){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function Nm(u,c,g,m,x,A){var M=0;if(m=u,typeof u=="function")mE(u)&&(M=1);else if(typeof u=="string")M=OW(u,g,ge.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case O:return u=cr(31,g,c,x),u.elementType=O,u.lanes=A,u;case v:return hl(g.children,x,A,c);case b:M=8,x|=24;break;case E:return u=cr(12,g,c,x|2),u.elementType=E,u.lanes=A,u;case $:return u=cr(13,g,c,x),u.elementType=$,u.lanes=A,u;case T:return u=cr(19,g,c,x),u.elementType=T,u.lanes=A,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case S:case w:M=10;break e;case _:M=9;break e;case C:M=11;break e;case D:M=14;break e;case F:M=16,m=null;break e}M=29,g=Error(i(130,u===null?"null":typeof u,"")),m=null}return c=cr(M,g,c,x),c.elementType=u,c.type=m,c.lanes=A,c}function hl(u,c,g,m){return u=cr(7,u,m,c),u.lanes=g,u}function yE(u,c,g){return u=cr(6,u,null,c),u.lanes=g,u}function vE(u,c,g){return c=cr(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var gf=[],pf=0,Rm=null,zm=0,Rr=[],zr=0,gl=null,Bs=1,Ls="";function pl(u,c){gf[pf++]=zm,gf[pf++]=Rm,Rm=u,zm=c}function NF(u,c,g){Rr[zr++]=Bs,Rr[zr++]=Ls,Rr[zr++]=gl,gl=u;var m=Bs;u=Ls;var x=32-ur(m)-1;m&=~(1<<x),g+=1;var A=32-ur(c)+x;if(30<A){var M=x-x%5;A=(m&(1<<M)-1).toString(32),m>>=M,x-=M,Bs=1<<32-ur(c)+x|g<<x|m,Ls=A+u}else Bs=1<<A|g<<x|m,Ls=u}function bE(u){u.return!==null&&(pl(u,1),NF(u,1,0))}function xE(u){for(;u===Rm;)Rm=gf[--pf],gf[pf]=null,zm=gf[--pf],gf[pf]=null;for(;u===gl;)gl=Rr[--zr],Rr[zr]=null,Ls=Rr[--zr],Rr[zr]=null,Bs=Rr[--zr],Rr[zr]=null}var xi=null,Vt=null,mt=!1,ml=null,ja=!1,EE=Error(i(519));function yl(u){var c=Error(i(418,""));throw qh(Or(c,u)),EE}function RF(u){var c=u.stateNode,g=u.type,m=u.memoizedProps;switch(c[ni]=u,c[Ii]=m,g){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(g=0;g<h0.length;g++)Je(h0[g],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Je("invalid",c),Qk(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Am(c);break;case"select":Je("invalid",c);break;case"textarea":Je("invalid",c),Kk(c,m.value,m.defaultValue,m.children),Am(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||K6(c.textContent,g)?(m.popover!=null&&(Je("beforetoggle",c),Je("toggle",c)),m.onScroll!=null&&Je("scroll",c),m.onScrollEnd!=null&&Je("scrollend",c),m.onClick!=null&&(c.onclick=m1),c=!0):c=!1,c||yl(u)}function zF(u){for(xi=u.return;xi;)switch(xi.tag){case 5:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:xi=xi.return}}function jh(u){if(u!==xi)return!1;if(!mt)return zF(u),mt=!0,!1;var c=u.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||BA(u.type,u.memoizedProps)),g=!g),g&&Vt&&yl(u),zF(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(c===0){Vt=ua(u.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;u=u.nextSibling}Vt=null}}else c===27?(c=Vt,tu(u.type)?(u=jA,jA=null,Vt=u):Vt=c):Vt=xi?ua(u.stateNode.nextSibling):null;return!0}function Ph(){Vt=xi=null,mt=!1}function BF(){var u=ml;return u!==null&&(Hi===null?Hi=u:Hi.push.apply(Hi,u),ml=null),u}function qh(u){ml===null?ml=[u]:ml.push(u)}var AE=V(null),vl=null,Us=null;function Io(u,c,g){oe(AE,c._currentValue),c._currentValue=g}function Is(u){u._currentValue=AE.current,se(AE)}function SE(u,c,g){for(;u!==null;){var m=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),u===g)break;u=u.return}}function _E(u,c,g,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var A=x.dependencies;if(A!==null){var M=x.child;A=A.firstContext;e:for(;A!==null;){var k=A;A=x;for(var L=0;L<c.length;L++)if(k.context===c[L]){A.lanes|=g,k=A.alternate,k!==null&&(k.lanes|=g),SE(A.return,g,u),m||(M=null);break e}A=k.next}}else if(x.tag===18){if(M=x.return,M===null)throw Error(i(341));M.lanes|=g,A=M.alternate,A!==null&&(A.lanes|=g),SE(M,g,u),M=null}else M=x.child;if(M!==null)M.return=x;else for(M=x;M!==null;){if(M===u){M=null;break}if(x=M.sibling,x!==null){x.return=M.return,M=x;break}M=M.return}x=M}}function Hh(u,c,g,m){u=null;for(var x=c,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var M=x.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var k=x.type;lr(x.pendingProps.value,M.value)||(u!==null?u.push(k):u=[k])}}else if(x===en.current){if(M=x.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(b0):u=[b0])}x=x.return}u!==null&&_E(c,u,g,m),c.flags|=262144}function Bm(u){for(u=u.firstContext;u!==null;){if(!lr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function bl(u){vl=u,Us=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function ii(u){return LF(vl,u)}function Lm(u,c){return vl===null&&bl(u),LF(u,c)}function LF(u,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},Us===null){if(u===null)throw Error(i(308));Us=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else Us=Us.next=c;return g}var FV=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(g,m){u.push(m)}};this.abort=function(){c.aborted=!0,u.forEach(function(g){return g()})}},OV=e.unstable_scheduleCallback,NV=e.unstable_NormalPriority,yn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wE(){return{controller:new FV,data:new Map,refCount:0}}function Gh(u){u.refCount--,u.refCount===0&&OV(NV,function(){u.controller.abort()})}var Yh=null,CE=0,mf=0,yf=null;function RV(u,c){if(Yh===null){var g=Yh=[];CE=0,mf=$A(),yf={status:"pending",value:void 0,then:function(m){g.push(m)}}}return CE++,c.then(UF,UF),c}function UF(){if(--CE===0&&Yh!==null){yf!==null&&(yf.status="fulfilled");var u=Yh;Yh=null,mf=0,yf=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function zV(u,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return u.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var IF=N.S;N.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&RV(u,c),IF!==null&&IF(u,c)};var xl=V(null);function DE(){var u=xl.current;return u!==null?u:Nt.pooledCache}function Um(u,c){c===null?oe(xl,xl.current):oe(xl,c.pool)}function jF(){var u=DE();return u===null?null:{parent:yn._currentValue,pool:u}}var Xh=Error(i(460)),PF=Error(i(474)),Im=Error(i(542)),$E={then:function(){}};function qF(u){return u=u.status,u==="fulfilled"||u==="rejected"}function jm(){}function HF(u,c,g){switch(g=u[g],g===void 0?u.push(c):g!==c&&(c.then(jm,jm),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,YF(u),u;default:if(typeof c.status=="string")c.then(jm,jm);else{if(u=Nt,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,YF(u),u}throw Vh=c,Xh}}var Vh=null;function GF(){if(Vh===null)throw Error(i(459));var u=Vh;return Vh=null,u}function YF(u){if(u===Xh||u===Im)throw Error(i(483))}var jo=!1;function ME(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TE(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Po(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function qo(u,c,g){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(xt&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=Om(u),FF(u,null,g),c}return Fm(u,m,c,g),Om(u)}function Wh(u,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,Uk(u,g)}}function kE(u,c){var g=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var M={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};A===null?x=A=M:A=A.next=M,g=g.next}while(g!==null);A===null?x=A=c:A=A.next=c}else x=A=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}var FE=!1;function Qh(){if(FE){var u=yf;if(u!==null)throw u}}function Zh(u,c,g,m){FE=!1;var x=u.updateQueue;jo=!1;var A=x.firstBaseUpdate,M=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var L=k,W=L.next;L.next=null,M===null?A=W:M.next=W,M=L;var ie=u.alternate;ie!==null&&(ie=ie.updateQueue,k=ie.lastBaseUpdate,k!==M&&(k===null?ie.firstBaseUpdate=W:k.next=W,ie.lastBaseUpdate=L))}if(A!==null){var ae=x.baseState;M=0,ie=W=L=null,k=A;do{var Q=k.lane&-536870913,Z=Q!==k.lane;if(Z?(it&Q)===Q:(m&Q)===Q){Q!==0&&Q===mf&&(FE=!0),ie!==null&&(ie=ie.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Be=u,Re=k;Q=c;var $t=g;switch(Re.tag){case 1:if(Be=Re.payload,typeof Be=="function"){ae=Be.call($t,ae,Q);break e}ae=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Re.payload,Q=typeof Be=="function"?Be.call($t,ae,Q):Be,Q==null)break e;ae=d({},ae,Q);break e;case 2:jo=!0}}Q=k.callback,Q!==null&&(u.flags|=64,Z&&(u.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ie===null?(W=ie=Z,L=ae):ie=ie.next=Z,M|=Q;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ie===null&&(L=ae),x.baseState=L,x.firstBaseUpdate=W,x.lastBaseUpdate=ie,A===null&&(x.shared.lanes=0),Zo|=M,u.lanes=M,u.memoizedState=ae}}function XF(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function VF(u,c){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)XF(g[u],c)}var vf=V(null),Pm=V(0);function WF(u,c){u=Xs,oe(Pm,u),oe(vf,c),Xs=u|c.baseLanes}function OE(){oe(Pm,Xs),oe(vf,vf.current)}function NE(){Xs=Pm.current,se(vf),se(Pm)}var Ho=0,Xe=null,Ct=null,dn=null,qm=!1,bf=!1,El=!1,Hm=0,Kh=0,xf=null,BV=0;function nn(){throw Error(i(321))}function RE(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!lr(u[g],c[g]))return!1;return!0}function zE(u,c,g,m,x,A){return Ho=A,Xe=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,N.H=u===null||u.memoizedState===null?F5:O5,El=!1,A=g(m,x),El=!1,bf&&(A=ZF(c,g,m,x)),QF(u),A}function QF(u){N.H=Qm;var c=Ct!==null&&Ct.next!==null;if(Ho=0,dn=Ct=Xe=null,qm=!1,Kh=0,xf=null,c)throw Error(i(300));u===null||$n||(u=u.dependencies,u!==null&&Bm(u)&&($n=!0))}function ZF(u,c,g,m){Xe=u;var x=0;do{if(bf&&(xf=null),Kh=0,bf=!1,25<=x)throw Error(i(301));if(x+=1,dn=Ct=null,u.updateQueue!=null){var A=u.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}N.H=HV,A=c(g,m)}while(bf);return A}function LV(){var u=N.H,c=u.useState()[0];return c=typeof c.then=="function"?Jh(c):c,u=u.useState()[0],(Ct!==null?Ct.memoizedState:null)!==u&&(Xe.flags|=1024),c}function BE(){var u=Hm!==0;return Hm=0,u}function LE(u,c,g){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~g}function UE(u){if(qm){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}qm=!1}Ho=0,dn=Ct=Xe=null,bf=!1,Kh=Hm=0,xf=null}function Pi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Xe.memoizedState=dn=u:dn=dn.next=u,dn}function hn(){if(Ct===null){var u=Xe.alternate;u=u!==null?u.memoizedState:null}else u=Ct.next;var c=dn===null?Xe.memoizedState:dn.next;if(c!==null)dn=c,Ct=u;else{if(u===null)throw Xe.alternate===null?Error(i(467)):Error(i(310));Ct=u,u={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},dn===null?Xe.memoizedState=dn=u:dn=dn.next=u}return dn}function IE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jh(u){var c=Kh;return Kh+=1,xf===null&&(xf=[]),u=HF(xf,u,c),c=Xe,(dn===null?c.memoizedState:dn.next)===null&&(c=c.alternate,N.H=c===null||c.memoizedState===null?F5:O5),u}function Gm(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Jh(u);if(u.$$typeof===w)return ii(u)}throw Error(i(438,String(u)))}function jE(u){var c=null,g=Xe.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=Xe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=IE(),Xe.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(u),m=0;m<u;m++)g[m]=U;return c.index++,g}function js(u,c){return typeof c=="function"?c(u):c}function Ym(u){var c=hn();return PE(c,Ct,u)}function PE(u,c,g){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=u.baseQueue,A=m.pending;if(A!==null){if(x!==null){var M=x.next;x.next=A.next,A.next=M}c.baseQueue=x=A,m.pending=null}if(A=u.baseState,x===null)u.memoizedState=A;else{c=x.next;var k=M=null,L=null,W=c,ie=!1;do{var ae=W.lane&-536870913;if(ae!==W.lane?(it&ae)===ae:(Ho&ae)===ae){var Q=W.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ae===mf&&(ie=!0);else if((Ho&Q)===Q){W=W.next,Q===mf&&(ie=!0);continue}else ae={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(k=L=ae,M=A):L=L.next=ae,Xe.lanes|=Q,Zo|=Q;ae=W.action,El&&g(A,ae),A=W.hasEagerState?W.eagerState:g(A,ae)}else Q={lane:ae,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(k=L=Q,M=A):L=L.next=Q,Xe.lanes|=ae,Zo|=ae;W=W.next}while(W!==null&&W!==c);if(L===null?M=A:L.next=k,!lr(A,u.memoizedState)&&($n=!0,ie&&(g=yf,g!==null)))throw g;u.memoizedState=A,u.baseState=M,u.baseQueue=L,m.lastRenderedState=A}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function qE(u){var c=hn(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var m=g.dispatch,x=g.pending,A=c.memoizedState;if(x!==null){g.pending=null;var M=x=x.next;do A=u(A,M.action),M=M.next;while(M!==x);lr(A,c.memoizedState)||($n=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),g.lastRenderedState=A}return[A,m]}function KF(u,c,g){var m=Xe,x=hn(),A=mt;if(A){if(g===void 0)throw Error(i(407));g=g()}else g=c();var M=!lr((Ct||x).memoizedState,g);M&&(x.memoizedState=g,$n=!0),x=x.queue;var k=t5.bind(null,m,x,u);if(e0(2048,8,k,[u]),x.getSnapshot!==c||M||dn!==null&&dn.memoizedState.tag&1){if(m.flags|=2048,Ef(9,Xm(),e5.bind(null,m,x,g,c),null),Nt===null)throw Error(i(349));A||(Ho&124)!==0||JF(m,c,g)}return g}function JF(u,c,g){u.flags|=16384,u={getSnapshot:c,value:g},c=Xe.updateQueue,c===null?(c=IE(),Xe.updateQueue=c,c.stores=[u]):(g=c.stores,g===null?c.stores=[u]:g.push(u))}function e5(u,c,g,m){c.value=g,c.getSnapshot=m,n5(c)&&i5(u)}function t5(u,c,g){return g(function(){n5(c)&&i5(u)})}function n5(u){var c=u.getSnapshot;u=u.value;try{var g=c();return!lr(u,g)}catch{return!0}}function i5(u){var c=df(u,2);c!==null&&pr(c,u,2)}function HE(u){var c=Pi();if(typeof u=="function"){var g=u;if(u=g(),El){Bo(!0);try{g()}finally{Bo(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:u},c}function r5(u,c,g,m){return u.baseState=g,PE(u,Ct,typeof m=="function"?m:js)}function UV(u,c,g,m,x){if(Wm(u))throw Error(i(485));if(u=c.action,u!==null){var A={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){A.listeners.push(M)}};N.T!==null?g(!0):A.isTransition=!1,m(A),g=c.pending,g===null?(A.next=c.pending=A,a5(c,A)):(A.next=g.next,c.pending=g.next=A)}}function a5(u,c){var g=c.action,m=c.payload,x=u.state;if(c.isTransition){var A=N.T,M={};N.T=M;try{var k=g(x,m),L=N.S;L!==null&&L(M,k),s5(u,c,k)}catch(W){GE(u,c,W)}finally{N.T=A}}else try{A=g(x,m),s5(u,c,A)}catch(W){GE(u,c,W)}}function s5(u,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){o5(u,c,m)},function(m){return GE(u,c,m)}):o5(u,c,g)}function o5(u,c,g){c.status="fulfilled",c.value=g,u5(c),u.state=g,c=u.pending,c!==null&&(g=c.next,g===c?u.pending=null:(g=g.next,c.next=g,a5(u,g)))}function GE(u,c,g){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,u5(c),c=c.next;while(c!==m)}u.action=null}function u5(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function l5(u,c){return c}function c5(u,c){if(mt){var g=Nt.formState;if(g!==null){e:{var m=Xe;if(mt){if(Vt){t:{for(var x=Vt,A=ja;x.nodeType!==8;){if(!A){x=null;break t}if(x=ua(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){Vt=ua(x.nextSibling),m=x.data==="F!";break e}}yl(m)}m=!1}m&&(c=g[0])}}return g=Pi(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l5,lastRenderedState:c},g.queue=m,g=M5.bind(null,Xe,m),m.dispatch=g,m=HE(!1),A=QE.bind(null,Xe,!1,m.queue),m=Pi(),x={state:c,dispatch:null,action:u,pending:null},m.queue=x,g=UV.bind(null,Xe,x,A,g),x.dispatch=g,m.memoizedState=u,[c,g,!1]}function f5(u){var c=hn();return d5(c,Ct,u)}function d5(u,c,g){if(c=PE(u,c,l5)[0],u=Ym(js)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Jh(c)}catch(M){throw M===Xh?Im:M}else m=c;c=hn();var x=c.queue,A=x.dispatch;return g!==c.memoizedState&&(Xe.flags|=2048,Ef(9,Xm(),IV.bind(null,x,g),null)),[m,A,u]}function IV(u,c){u.action=c}function h5(u){var c=hn(),g=Ct;if(g!==null)return d5(c,g,u);hn(),c=c.memoizedState,g=hn();var m=g.queue.dispatch;return g.memoizedState=u,[c,m,!1]}function Ef(u,c,g,m){return u={tag:u,create:g,deps:m,inst:c,next:null},c=Xe.updateQueue,c===null&&(c=IE(),Xe.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=u.next=u:(m=g.next,g.next=u,u.next=m,c.lastEffect=u),u}function Xm(){return{destroy:void 0,resource:void 0}}function g5(){return hn().memoizedState}function Vm(u,c,g,m){var x=Pi();m=m===void 0?null:m,Xe.flags|=u,x.memoizedState=Ef(1|c,Xm(),g,m)}function e0(u,c,g,m){var x=hn();m=m===void 0?null:m;var A=x.memoizedState.inst;Ct!==null&&m!==null&&RE(m,Ct.memoizedState.deps)?x.memoizedState=Ef(c,A,g,m):(Xe.flags|=u,x.memoizedState=Ef(1|c,A,g,m))}function p5(u,c){Vm(8390656,8,u,c)}function m5(u,c){e0(2048,8,u,c)}function y5(u,c){return e0(4,2,u,c)}function v5(u,c){return e0(4,4,u,c)}function b5(u,c){if(typeof c=="function"){u=u();var g=c(u);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function x5(u,c,g){g=g!=null?g.concat([u]):null,e0(4,4,b5.bind(null,c,u),g)}function YE(){}function E5(u,c){var g=hn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&RE(c,m[1])?m[0]:(g.memoizedState=[u,c],u)}function A5(u,c){var g=hn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&RE(c,m[1]))return m[0];if(m=u(),El){Bo(!0);try{u()}finally{Bo(!1)}}return g.memoizedState=[m,c],m}function XE(u,c,g){return g===void 0||(Ho&1073741824)!==0?u.memoizedState=c:(u.memoizedState=g,u=w6(),Xe.lanes|=u,Zo|=u,g)}function S5(u,c,g,m){return lr(g,c)?g:vf.current!==null?(u=XE(u,g,m),lr(u,c)||($n=!0),u):(Ho&42)===0?($n=!0,u.memoizedState=g):(u=w6(),Xe.lanes|=u,Zo|=u,c)}function _5(u,c,g,m,x){var A=q.p;q.p=A!==0&&8>A?A:8;var M=N.T,k={};N.T=k,QE(u,!1,c,g);try{var L=x(),W=N.S;if(W!==null&&W(k,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=zV(L,m);t0(u,c,ie,gr(u))}else t0(u,c,m,gr(u))}catch(ae){t0(u,c,{then:function(){},status:"rejected",reason:ae},gr())}finally{q.p=A,N.T=M}}function jV(){}function VE(u,c,g,m){if(u.tag!==5)throw Error(i(476));var x=w5(u).queue;_5(u,x,c,Y,g===null?jV:function(){return C5(u),g(m)})}function w5(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:Y},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:g},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function C5(u){var c=w5(u).next.queue;t0(u,c,{},gr())}function WE(){return ii(b0)}function D5(){return hn().memoizedState}function $5(){return hn().memoizedState}function PV(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var g=gr();u=Po(g);var m=qo(c,u,g);m!==null&&(pr(m,c,g),Wh(m,c,g)),c={cache:wE()},u.payload=c;return}c=c.return}}function qV(u,c,g){var m=gr();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Wm(u)?T5(c,g):(g=pE(u,c,g,m),g!==null&&(pr(g,u,m),k5(g,c,m)))}function M5(u,c,g){var m=gr();t0(u,c,g,m)}function t0(u,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Wm(u))T5(c,x);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var M=c.lastRenderedState,k=A(M,g);if(x.hasEagerState=!0,x.eagerState=k,lr(k,M))return Fm(u,c,x,0),Nt===null&&km(),!1}catch{}finally{}if(g=pE(u,c,x,m),g!==null)return pr(g,u,m),k5(g,c,m),!0}return!1}function QE(u,c,g,m){if(m={lane:2,revertLane:$A(),action:m,hasEagerState:!1,eagerState:null,next:null},Wm(u)){if(c)throw Error(i(479))}else c=pE(u,g,m,2),c!==null&&pr(c,u,2)}function Wm(u){var c=u.alternate;return u===Xe||c!==null&&c===Xe}function T5(u,c){bf=qm=!0;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}function k5(u,c,g){if((g&4194048)!==0){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,Uk(u,g)}}var Qm={readContext:ii,use:Gm,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},F5={readContext:ii,use:Gm,useCallback:function(u,c){return Pi().memoizedState=[u,c===void 0?null:c],u},useContext:ii,useEffect:p5,useImperativeHandle:function(u,c,g){g=g!=null?g.concat([u]):null,Vm(4194308,4,b5.bind(null,c,u),g)},useLayoutEffect:function(u,c){return Vm(4194308,4,u,c)},useInsertionEffect:function(u,c){Vm(4,2,u,c)},useMemo:function(u,c){var g=Pi();c=c===void 0?null:c;var m=u();if(El){Bo(!0);try{u()}finally{Bo(!1)}}return g.memoizedState=[m,c],m},useReducer:function(u,c,g){var m=Pi();if(g!==void 0){var x=g(c);if(El){Bo(!0);try{g(c)}finally{Bo(!1)}}}else x=c;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=qV.bind(null,Xe,u),[m.memoizedState,u]},useRef:function(u){var c=Pi();return u={current:u},c.memoizedState=u},useState:function(u){u=HE(u);var c=u.queue,g=M5.bind(null,Xe,c);return c.dispatch=g,[u.memoizedState,g]},useDebugValue:YE,useDeferredValue:function(u,c){var g=Pi();return XE(g,u,c)},useTransition:function(){var u=HE(!1);return u=_5.bind(null,Xe,u.queue,!0,!1),Pi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,g){var m=Xe,x=Pi();if(mt){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Nt===null)throw Error(i(349));(it&124)!==0||JF(m,c,g)}x.memoizedState=g;var A={value:g,getSnapshot:c};return x.queue=A,p5(t5.bind(null,m,A,u),[u]),m.flags|=2048,Ef(9,Xm(),e5.bind(null,m,A,g,c),null),g},useId:function(){var u=Pi(),c=Nt.identifierPrefix;if(mt){var g=Ls,m=Bs;g=(m&~(1<<32-ur(m)-1)).toString(32)+g,c=""+c+"R"+g,g=Hm++,0<g&&(c+="H"+g.toString(32)),c+=""}else g=BV++,c=""+c+"r"+g.toString(32)+"";return u.memoizedState=c},useHostTransitionStatus:WE,useFormState:c5,useActionState:c5,useOptimistic:function(u){var c=Pi();c.memoizedState=c.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=QE.bind(null,Xe,!0,g),g.dispatch=c,[u,c]},useMemoCache:jE,useCacheRefresh:function(){return Pi().memoizedState=PV.bind(null,Xe)}},O5={readContext:ii,use:Gm,useCallback:E5,useContext:ii,useEffect:m5,useImperativeHandle:x5,useInsertionEffect:y5,useLayoutEffect:v5,useMemo:A5,useReducer:Ym,useRef:g5,useState:function(){return Ym(js)},useDebugValue:YE,useDeferredValue:function(u,c){var g=hn();return S5(g,Ct.memoizedState,u,c)},useTransition:function(){var u=Ym(js)[0],c=hn().memoizedState;return[typeof u=="boolean"?u:Jh(u),c]},useSyncExternalStore:KF,useId:D5,useHostTransitionStatus:WE,useFormState:f5,useActionState:f5,useOptimistic:function(u,c){var g=hn();return r5(g,Ct,u,c)},useMemoCache:jE,useCacheRefresh:$5},HV={readContext:ii,use:Gm,useCallback:E5,useContext:ii,useEffect:m5,useImperativeHandle:x5,useInsertionEffect:y5,useLayoutEffect:v5,useMemo:A5,useReducer:qE,useRef:g5,useState:function(){return qE(js)},useDebugValue:YE,useDeferredValue:function(u,c){var g=hn();return Ct===null?XE(g,u,c):S5(g,Ct.memoizedState,u,c)},useTransition:function(){var u=qE(js)[0],c=hn().memoizedState;return[typeof u=="boolean"?u:Jh(u),c]},useSyncExternalStore:KF,useId:D5,useHostTransitionStatus:WE,useFormState:h5,useActionState:h5,useOptimistic:function(u,c){var g=hn();return Ct!==null?r5(g,Ct,u,c):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:jE,useCacheRefresh:$5},Af=null,n0=0;function Zm(u){var c=n0;return n0+=1,Af===null&&(Af=[]),HF(Af,u,c)}function i0(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function Km(u,c){throw c.$$typeof===h?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function N5(u){var c=u._init;return c(u._payload)}function R5(u){function c(H,P){if(u){var X=H.deletions;X===null?(H.deletions=[P],H.flags|=16):X.push(P)}}function g(H,P){if(!u)return null;for(;P!==null;)c(H,P),P=P.sibling;return null}function m(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function x(H,P){return H=zs(H,P),H.index=0,H.sibling=null,H}function A(H,P,X){return H.index=X,u?(X=H.alternate,X!==null?(X=X.index,X<P?(H.flags|=67108866,P):X):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function M(H){return u&&H.alternate===null&&(H.flags|=67108866),H}function k(H,P,X,re){return P===null||P.tag!==6?(P=yE(X,H.mode,re),P.return=H,P):(P=x(P,X),P.return=H,P)}function L(H,P,X,re){var ve=X.type;return ve===v?ie(H,P,X.props.children,re,X.key):P!==null&&(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&N5(ve)===P.type)?(P=x(P,X.props),i0(P,X),P.return=H,P):(P=Nm(X.type,X.key,X.props,null,H.mode,re),i0(P,X),P.return=H,P)}function W(H,P,X,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==X.containerInfo||P.stateNode.implementation!==X.implementation?(P=vE(X,H.mode,re),P.return=H,P):(P=x(P,X.children||[]),P.return=H,P)}function ie(H,P,X,re,ve){return P===null||P.tag!==7?(P=hl(X,H.mode,re,ve),P.return=H,P):(P=x(P,X),P.return=H,P)}function ae(H,P,X){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=yE(""+P,H.mode,X),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case p:return X=Nm(P.type,P.key,P.props,null,H.mode,X),i0(X,P),X.return=H,X;case y:return P=vE(P,H.mode,X),P.return=H,P;case F:var re=P._init;return P=re(P._payload),ae(H,P,X)}if(I(P)||G(P))return P=hl(P,H.mode,X,null),P.return=H,P;if(typeof P.then=="function")return ae(H,Zm(P),X);if(P.$$typeof===w)return ae(H,Lm(H,P),X);Km(H,P)}return null}function Q(H,P,X,re){var ve=P!==null?P.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return ve!==null?null:k(H,P,""+X,re);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return X.key===ve?L(H,P,X,re):null;case y:return X.key===ve?W(H,P,X,re):null;case F:return ve=X._init,X=ve(X._payload),Q(H,P,X,re)}if(I(X)||G(X))return ve!==null?null:ie(H,P,X,re,null);if(typeof X.then=="function")return Q(H,P,Zm(X),re);if(X.$$typeof===w)return Q(H,P,Lm(H,X),re);Km(H,X)}return null}function Z(H,P,X,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(X)||null,k(P,H,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case p:return H=H.get(re.key===null?X:re.key)||null,L(P,H,re,ve);case y:return H=H.get(re.key===null?X:re.key)||null,W(P,H,re,ve);case F:var We=re._init;return re=We(re._payload),Z(H,P,X,re,ve)}if(I(re)||G(re))return H=H.get(X)||null,ie(P,H,re,ve,null);if(typeof re.then=="function")return Z(H,P,X,Zm(re),ve);if(re.$$typeof===w)return Z(H,P,X,Lm(P,re),ve);Km(P,re)}return null}function Be(H,P,X,re){for(var ve=null,We=null,Ce=P,ze=P=0,Tn=null;Ce!==null&&ze<X.length;ze++){Ce.index>ze?(Tn=Ce,Ce=null):Tn=Ce.sibling;var ct=Q(H,Ce,X[ze],re);if(ct===null){Ce===null&&(Ce=Tn);break}u&&Ce&&ct.alternate===null&&c(H,Ce),P=A(ct,P,ze),We===null?ve=ct:We.sibling=ct,We=ct,Ce=Tn}if(ze===X.length)return g(H,Ce),mt&&pl(H,ze),ve;if(Ce===null){for(;ze<X.length;ze++)Ce=ae(H,X[ze],re),Ce!==null&&(P=A(Ce,P,ze),We===null?ve=Ce:We.sibling=Ce,We=Ce);return mt&&pl(H,ze),ve}for(Ce=m(Ce);ze<X.length;ze++)Tn=Z(Ce,H,ze,X[ze],re),Tn!==null&&(u&&Tn.alternate!==null&&Ce.delete(Tn.key===null?ze:Tn.key),P=A(Tn,P,ze),We===null?ve=Tn:We.sibling=Tn,We=Tn);return u&&Ce.forEach(function(su){return c(H,su)}),mt&&pl(H,ze),ve}function Re(H,P,X,re){if(X==null)throw Error(i(151));for(var ve=null,We=null,Ce=P,ze=P=0,Tn=null,ct=X.next();Ce!==null&&!ct.done;ze++,ct=X.next()){Ce.index>ze?(Tn=Ce,Ce=null):Tn=Ce.sibling;var su=Q(H,Ce,ct.value,re);if(su===null){Ce===null&&(Ce=Tn);break}u&&Ce&&su.alternate===null&&c(H,Ce),P=A(su,P,ze),We===null?ve=su:We.sibling=su,We=su,Ce=Tn}if(ct.done)return g(H,Ce),mt&&pl(H,ze),ve;if(Ce===null){for(;!ct.done;ze++,ct=X.next())ct=ae(H,ct.value,re),ct!==null&&(P=A(ct,P,ze),We===null?ve=ct:We.sibling=ct,We=ct);return mt&&pl(H,ze),ve}for(Ce=m(Ce);!ct.done;ze++,ct=X.next())ct=Z(Ce,H,ze,ct.value,re),ct!==null&&(u&&ct.alternate!==null&&Ce.delete(ct.key===null?ze:ct.key),P=A(ct,P,ze),We===null?ve=ct:We.sibling=ct,We=ct);return u&&Ce.forEach(function(GW){return c(H,GW)}),mt&&pl(H,ze),ve}function $t(H,P,X,re){if(typeof X=="object"&&X!==null&&X.type===v&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case p:e:{for(var ve=X.key;P!==null;){if(P.key===ve){if(ve=X.type,ve===v){if(P.tag===7){g(H,P.sibling),re=x(P,X.props.children),re.return=H,H=re;break e}}else if(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&N5(ve)===P.type){g(H,P.sibling),re=x(P,X.props),i0(re,X),re.return=H,H=re;break e}g(H,P);break}else c(H,P);P=P.sibling}X.type===v?(re=hl(X.props.children,H.mode,re,X.key),re.return=H,H=re):(re=Nm(X.type,X.key,X.props,null,H.mode,re),i0(re,X),re.return=H,H=re)}return M(H);case y:e:{for(ve=X.key;P!==null;){if(P.key===ve)if(P.tag===4&&P.stateNode.containerInfo===X.containerInfo&&P.stateNode.implementation===X.implementation){g(H,P.sibling),re=x(P,X.children||[]),re.return=H,H=re;break e}else{g(H,P);break}else c(H,P);P=P.sibling}re=vE(X,H.mode,re),re.return=H,H=re}return M(H);case F:return ve=X._init,X=ve(X._payload),$t(H,P,X,re)}if(I(X))return Be(H,P,X,re);if(G(X)){if(ve=G(X),typeof ve!="function")throw Error(i(150));return X=ve.call(X),Re(H,P,X,re)}if(typeof X.then=="function")return $t(H,P,Zm(X),re);if(X.$$typeof===w)return $t(H,P,Lm(H,X),re);Km(H,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,P!==null&&P.tag===6?(g(H,P.sibling),re=x(P,X),re.return=H,H=re):(g(H,P),re=yE(X,H.mode,re),re.return=H,H=re),M(H)):g(H,P)}return function(H,P,X,re){try{n0=0;var ve=$t(H,P,X,re);return Af=null,ve}catch(Ce){if(Ce===Xh||Ce===Im)throw Ce;var We=cr(29,Ce,null,H.mode);return We.lanes=re,We.return=H,We}finally{}}}var Sf=R5(!0),z5=R5(!1),Br=V(null),Pa=null;function Go(u){var c=u.alternate;oe(vn,vn.current&1),oe(Br,u),Pa===null&&(c===null||vf.current!==null||c.memoizedState!==null)&&(Pa=u)}function B5(u){if(u.tag===22){if(oe(vn,vn.current),oe(Br,u),Pa===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(Pa=u)}}else Yo()}function Yo(){oe(vn,vn.current),oe(Br,Br.current)}function Ps(u){se(Br),Pa===u&&(Pa=null),se(vn)}var vn=V(0);function Jm(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||IA(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function ZE(u,c,g,m){c=u.memoizedState,g=g(m,c),g=g==null?c:d({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var KE={enqueueSetState:function(u,c,g){u=u._reactInternals;var m=gr(),x=Po(m);x.payload=c,g!=null&&(x.callback=g),c=qo(u,x,m),c!==null&&(pr(c,u,m),Wh(c,u,m))},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var m=gr(),x=Po(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=qo(u,x,m),c!==null&&(pr(c,u,m),Wh(c,u,m))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=gr(),m=Po(g);m.tag=2,c!=null&&(m.callback=c),c=qo(u,m,g),c!==null&&(pr(c,u,g),Wh(c,u,g))}};function L5(u,c,g,m,x,A,M){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,A,M):c.prototype&&c.prototype.isPureReactComponent?!Uh(g,m)||!Uh(x,A):!0}function U5(u,c,g,m){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==u&&KE.enqueueReplaceState(c,c.state,null)}function Al(u,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(u=u.defaultProps){g===c&&(g=d({},g));for(var x in u)g[x]===void 0&&(g[x]=u[x])}return g}var e1=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function I5(u){e1(u)}function j5(u){console.error(u)}function P5(u){e1(u)}function t1(u,c){try{var g=u.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function q5(u,c,g){try{var m=u.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function JE(u,c,g){return g=Po(g),g.tag=3,g.payload={element:null},g.callback=function(){t1(u,c)},g}function H5(u){return u=Po(u),u.tag=3,u}function G5(u,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var A=m.value;u.payload=function(){return x(A)},u.callback=function(){q5(c,g,m)}}var M=g.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(u.callback=function(){q5(c,g,m),typeof x!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function GV(u,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&Hh(c,g,x,!0),g=Br.current,g!==null){switch(g.tag){case 13:return Pa===null?SA():g.alternate===null&&Wt===0&&(Wt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===$E?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),wA(u,m,x)),!1;case 22:return g.flags|=65536,m===$E?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),wA(u,m,x)),!1}throw Error(i(435,g.tag))}return wA(u,m,x),SA(),!1}if(mt)return c=Br.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==EE&&(u=Error(i(422),{cause:m}),qh(Or(u,g)))):(m!==EE&&(c=Error(i(423),{cause:m}),qh(Or(c,g))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=Or(m,g),x=JE(u.stateNode,m,x),kE(u,x),Wt!==4&&(Wt=2)),!1;var A=Error(i(520),{cause:m});if(A=Or(A,g),c0===null?c0=[A]:c0.push(A),Wt!==4&&(Wt=2),c===null)return!0;m=Or(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,u=x&-x,g.lanes|=u,u=JE(g.stateNode,m,u),kE(g,u),!1;case 1:if(c=g.type,A=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ko===null||!Ko.has(A))))return g.flags|=65536,x&=-x,g.lanes|=x,x=H5(x),G5(x,u,g,m),kE(g,x),!1}g=g.return}while(g!==null);return!1}var Y5=Error(i(461)),$n=!1;function qn(u,c,g,m){c.child=u===null?z5(c,null,g,m):Sf(c,u.child,g,m)}function X5(u,c,g,m,x){g=g.render;var A=c.ref;if("ref"in m){var M={};for(var k in m)k!=="ref"&&(M[k]=m[k])}else M=m;return bl(c),m=zE(u,c,g,M,A,x),k=BE(),u!==null&&!$n?(LE(u,c,x),qs(u,c,x)):(mt&&k&&bE(c),c.flags|=1,qn(u,c,m,x),c.child)}function V5(u,c,g,m,x){if(u===null){var A=g.type;return typeof A=="function"&&!mE(A)&&A.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=A,W5(u,c,A,m,x)):(u=Nm(g.type,null,m,c,c.mode,x),u.ref=c.ref,u.return=c,c.child=u)}if(A=u.child,!oA(u,x)){var M=A.memoizedProps;if(g=g.compare,g=g!==null?g:Uh,g(M,m)&&u.ref===c.ref)return qs(u,c,x)}return c.flags|=1,u=zs(A,m),u.ref=c.ref,u.return=c,c.child=u}function W5(u,c,g,m,x){if(u!==null){var A=u.memoizedProps;if(Uh(A,m)&&u.ref===c.ref)if($n=!1,c.pendingProps=m=A,oA(u,x))(u.flags&131072)!==0&&($n=!0);else return c.lanes=u.lanes,qs(u,c,x)}return eA(u,c,g,m,x)}function Q5(u,c,g){var m=c.pendingProps,x=m.children,A=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=A!==null?A.baseLanes|g:g,u!==null){for(x=c.child=u.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;c.childLanes=A&~m}else c.childLanes=0,c.child=null;return Z5(u,c,m,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&Um(c,A!==null?A.cachePool:null),A!==null?WF(c,A):OE(),B5(c);else return c.lanes=c.childLanes=536870912,Z5(u,c,A!==null?A.baseLanes|g:g,g)}else A!==null?(Um(c,A.cachePool),WF(c,A),Yo(),c.memoizedState=null):(u!==null&&Um(c,null),OE(),Yo());return qn(u,c,x,g),c.child}function Z5(u,c,g,m){var x=DE();return x=x===null?null:{parent:yn._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},u!==null&&Um(c,null),OE(),B5(c),u!==null&&Hh(u,c,m,!0),null}function n1(u,c){var g=c.ref;if(g===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(c.flags|=4194816)}}function eA(u,c,g,m,x){return bl(c),g=zE(u,c,g,m,void 0,x),m=BE(),u!==null&&!$n?(LE(u,c,x),qs(u,c,x)):(mt&&m&&bE(c),c.flags|=1,qn(u,c,g,x),c.child)}function K5(u,c,g,m,x,A){return bl(c),c.updateQueue=null,g=ZF(c,m,g,x),QF(u),m=BE(),u!==null&&!$n?(LE(u,c,A),qs(u,c,A)):(mt&&m&&bE(c),c.flags|=1,qn(u,c,g,A),c.child)}function J5(u,c,g,m,x){if(bl(c),c.stateNode===null){var A=hf,M=g.contextType;typeof M=="object"&&M!==null&&(A=ii(M)),A=new g(m,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=KE,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=m,A.state=c.memoizedState,A.refs={},ME(c),M=g.contextType,A.context=typeof M=="object"&&M!==null?ii(M):hf,A.state=c.memoizedState,M=g.getDerivedStateFromProps,typeof M=="function"&&(ZE(c,g,M,m),A.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(M=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),M!==A.state&&KE.enqueueReplaceState(A,A.state,null),Zh(c,m,A,x),Qh(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(u===null){A=c.stateNode;var k=c.memoizedProps,L=Al(g,k);A.props=L;var W=A.context,ie=g.contextType;M=hf,typeof ie=="object"&&ie!==null&&(M=ii(ie));var ae=g.getDerivedStateFromProps;ie=typeof ae=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=c.pendingProps!==k,ie||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||W!==M)&&U5(c,A,m,M),jo=!1;var Q=c.memoizedState;A.state=Q,Zh(c,m,A,x),Qh(),W=c.memoizedState,k||Q!==W||jo?(typeof ae=="function"&&(ZE(c,g,ae,m),W=c.memoizedState),(L=jo||L5(c,g,L,m,Q,W,M))?(ie||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=W),A.props=m,A.state=W,A.context=M,m=L):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{A=c.stateNode,TE(u,c),M=c.memoizedProps,ie=Al(g,M),A.props=ie,ae=c.pendingProps,Q=A.context,W=g.contextType,L=hf,typeof W=="object"&&W!==null&&(L=ii(W)),k=g.getDerivedStateFromProps,(W=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==ae||Q!==L)&&U5(c,A,m,L),jo=!1,Q=c.memoizedState,A.state=Q,Zh(c,m,A,x),Qh();var Z=c.memoizedState;M!==ae||Q!==Z||jo||u!==null&&u.dependencies!==null&&Bm(u.dependencies)?(typeof k=="function"&&(ZE(c,g,k,m),Z=c.memoizedState),(ie=jo||L5(c,g,ie,m,Q,Z,L)||u!==null&&u.dependencies!==null&&Bm(u.dependencies))?(W||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,Z,L),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,Z,L)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Z),A.props=m,A.state=Z,A.context=L,m=ie):(typeof A.componentDidUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),m=!1)}return A=m,n1(u,c),m=(c.flags&128)!==0,A||m?(A=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,u!==null&&m?(c.child=Sf(c,u.child,null,x),c.child=Sf(c,null,g,x)):qn(u,c,g,x),c.memoizedState=A.state,u=c.child):u=qs(u,c,x),u}function e6(u,c,g,m){return Ph(),c.flags|=256,qn(u,c,g,m),c.child}var tA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nA(u){return{baseLanes:u,cachePool:jF()}}function iA(u,c,g){return u=u!==null?u.childLanes&~g:0,c&&(u|=Lr),u}function t6(u,c,g){var m=c.pendingProps,x=!1,A=(c.flags&128)!==0,M;if((M=A)||(M=u!==null&&u.memoizedState===null?!1:(vn.current&2)!==0),M&&(x=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,u===null){if(mt){if(x?Go(c):Yo(),mt){var k=Vt,L;if(L=k){e:{for(L=k,k=ja;L.nodeType!==8;){if(!k){k=null;break e}if(L=ua(L.nextSibling),L===null){k=null;break e}}k=L}k!==null?(c.memoizedState={dehydrated:k,treeContext:gl!==null?{id:Bs,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},L=cr(18,null,null,0),L.stateNode=k,L.return=c,c.child=L,xi=c,Vt=null,L=!0):L=!1}L||yl(c)}if(k=c.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return IA(k)?c.lanes=32:c.lanes=536870912,null;Ps(c)}return k=m.children,m=m.fallback,x?(Yo(),x=c.mode,k=i1({mode:"hidden",children:k},x),m=hl(m,x,g,null),k.return=c,m.return=c,k.sibling=m,c.child=k,x=c.child,x.memoizedState=nA(g),x.childLanes=iA(u,M,g),c.memoizedState=tA,m):(Go(c),rA(c,k))}if(L=u.memoizedState,L!==null&&(k=L.dehydrated,k!==null)){if(A)c.flags&256?(Go(c),c.flags&=-257,c=aA(u,c,g)):c.memoizedState!==null?(Yo(),c.child=u.child,c.flags|=128,c=null):(Yo(),x=m.fallback,k=c.mode,m=i1({mode:"visible",children:m.children},k),x=hl(x,k,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Sf(c,u.child,null,g),m=c.child,m.memoizedState=nA(g),m.childLanes=iA(u,M,g),c.memoizedState=tA,c=x);else if(Go(c),IA(k)){if(M=k.nextSibling&&k.nextSibling.dataset,M)var W=M.dgst;M=W,m=Error(i(419)),m.stack="",m.digest=M,qh({value:m,source:null,stack:null}),c=aA(u,c,g)}else if($n||Hh(u,c,g,!1),M=(g&u.childLanes)!==0,$n||M){if(M=Nt,M!==null&&(m=g&-g,m=(m&42)!==0?1:jx(m),m=(m&(M.suspendedLanes|g))!==0?0:m,m!==0&&m!==L.retryLane))throw L.retryLane=m,df(u,m),pr(M,u,m),Y5;k.data==="$?"||SA(),c=aA(u,c,g)}else k.data==="$?"?(c.flags|=192,c.child=u.child,c=null):(u=L.treeContext,Vt=ua(k.nextSibling),xi=c,mt=!0,ml=null,ja=!1,u!==null&&(Rr[zr++]=Bs,Rr[zr++]=Ls,Rr[zr++]=gl,Bs=u.id,Ls=u.overflow,gl=c),c=rA(c,m.children),c.flags|=4096);return c}return x?(Yo(),x=m.fallback,k=c.mode,L=u.child,W=L.sibling,m=zs(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,W!==null?x=zs(W,x):(x=hl(x,k,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,k=u.child.memoizedState,k===null?k=nA(g):(L=k.cachePool,L!==null?(W=yn._currentValue,L=L.parent!==W?{parent:W,pool:W}:L):L=jF(),k={baseLanes:k.baseLanes|g,cachePool:L}),x.memoizedState=k,x.childLanes=iA(u,M,g),c.memoizedState=tA,m):(Go(c),g=u.child,u=g.sibling,g=zs(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,u!==null&&(M=c.deletions,M===null?(c.deletions=[u],c.flags|=16):M.push(u)),c.child=g,c.memoizedState=null,g)}function rA(u,c){return c=i1({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function i1(u,c){return u=cr(22,u,null,c),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function aA(u,c,g){return Sf(c,u.child,null,g),u=rA(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function n6(u,c,g){u.lanes|=c;var m=u.alternate;m!==null&&(m.lanes|=c),SE(u.return,c,g)}function sA(u,c,g,m,x){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=g,A.tailMode=x)}function i6(u,c,g){var m=c.pendingProps,x=m.revealOrder,A=m.tail;if(qn(u,c,m.children,g),m=vn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&n6(u,g,c);else if(u.tag===19)n6(u,g,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(oe(vn,m),x){case"forwards":for(g=c.child,x=null;g!==null;)u=g.alternate,u!==null&&Jm(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),sA(c,!1,x,g,A);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(u=x.alternate,u!==null&&Jm(u)===null){c.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}sA(c,!0,g,null,A);break;case"together":sA(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function qs(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),Zo|=c.lanes,(g&c.childLanes)===0)if(u!==null){if(Hh(u,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,g=zs(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=zs(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}function oA(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&Bm(u)))}function YV(u,c,g){switch(c.tag){case 3:at(c,c.stateNode.containerInfo),Io(c,yn,u.memoizedState.cache),Ph();break;case 27:case 5:Ie(c);break;case 4:at(c,c.stateNode.containerInfo);break;case 10:Io(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Go(c),c.flags|=128,null):(g&c.child.childLanes)!==0?t6(u,c,g):(Go(c),u=qs(u,c,g),u!==null?u.sibling:null);Go(c);break;case 19:var x=(u.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(Hh(u,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return i6(u,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),oe(vn,vn.current),m)break;return null;case 22:case 23:return c.lanes=0,Q5(u,c,g);case 24:Io(c,yn,u.memoizedState.cache)}return qs(u,c,g)}function r6(u,c,g){if(u!==null)if(u.memoizedProps!==c.pendingProps)$n=!0;else{if(!oA(u,g)&&(c.flags&128)===0)return $n=!1,YV(u,c,g);$n=(u.flags&131072)!==0}else $n=!1,mt&&(c.flags&1048576)!==0&&NF(c,zm,c.index);switch(c.lanes=0,c.tag){case 16:e:{u=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")mE(m)?(u=Al(m,u),c.tag=1,c=J5(null,c,m,u,g)):(c.tag=0,c=eA(null,c,m,u,g));else{if(m!=null){if(x=m.$$typeof,x===C){c.tag=11,c=X5(null,c,m,u,g);break e}else if(x===D){c.tag=14,c=V5(null,c,m,u,g);break e}}throw c=j(m)||m,Error(i(306,c,""))}}return c;case 0:return eA(u,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=Al(m,c.pendingProps),J5(u,c,m,x,g);case 3:e:{if(at(c,c.stateNode.containerInfo),u===null)throw Error(i(387));m=c.pendingProps;var A=c.memoizedState;x=A.element,TE(u,c),Zh(c,m,null,g);var M=c.memoizedState;if(m=M.cache,Io(c,yn,m),m!==A.cache&&_E(c,[yn],g,!0),Qh(),m=M.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=e6(u,c,m,g);break e}else if(m!==x){x=Or(Error(i(424)),c),qh(x),c=e6(u,c,m,g);break e}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Vt=ua(u.firstChild),xi=c,mt=!0,ml=null,ja=!0,g=z5(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Ph(),m===x){c=qs(u,c,g);break e}qn(u,c,m,g)}c=c.child}return c;case 26:return n1(u,c),u===null?(g=uO(c.type,null,c.pendingProps,null))?c.memoizedState=g:mt||(g=c.type,u=c.pendingProps,m=y1(De.current).createElement(g),m[ni]=c,m[Ii]=u,Gn(m,g,u),Dn(m),c.stateNode=m):c.memoizedState=uO(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return Ie(c),u===null&&mt&&(m=c.stateNode=aO(c.type,c.pendingProps,De.current),xi=c,ja=!0,x=Vt,tu(c.type)?(jA=x,Vt=ua(m.firstChild)):Vt=x),qn(u,c,c.pendingProps.children,g),n1(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&mt&&((x=m=Vt)&&(m=xW(m,c.type,c.pendingProps,ja),m!==null?(c.stateNode=m,xi=c,Vt=ua(m.firstChild),ja=!1,x=!0):x=!1),x||yl(c)),Ie(c),x=c.type,A=c.pendingProps,M=u!==null?u.memoizedProps:null,m=A.children,BA(x,A)?m=null:M!==null&&BA(x,M)&&(c.flags|=32),c.memoizedState!==null&&(x=zE(u,c,LV,null,null,g),b0._currentValue=x),n1(u,c),qn(u,c,m,g),c.child;case 6:return u===null&&mt&&((u=g=Vt)&&(g=EW(g,c.pendingProps,ja),g!==null?(c.stateNode=g,xi=c,Vt=null,u=!0):u=!1),u||yl(c)),null;case 13:return t6(u,c,g);case 4:return at(c,c.stateNode.containerInfo),m=c.pendingProps,u===null?c.child=Sf(c,null,m,g):qn(u,c,m,g),c.child;case 11:return X5(u,c,c.type,c.pendingProps,g);case 7:return qn(u,c,c.pendingProps,g),c.child;case 8:return qn(u,c,c.pendingProps.children,g),c.child;case 12:return qn(u,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,Io(c,c.type,m.value),qn(u,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,bl(c),x=ii(x),m=m(x),c.flags|=1,qn(u,c,m,g),c.child;case 14:return V5(u,c,c.type,c.pendingProps,g);case 15:return W5(u,c,c.type,c.pendingProps,g);case 19:return i6(u,c,g);case 31:return m=c.pendingProps,g=c.mode,m={mode:m.mode,children:m.children},u===null?(g=i1(m,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=zs(u.child,m),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return Q5(u,c,g);case 24:return bl(c),m=ii(yn),u===null?(x=DE(),x===null&&(x=Nt,A=wE(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=g),x=A),c.memoizedState={parent:m,cache:x},ME(c),Io(c,yn,x)):((u.lanes&g)!==0&&(TE(u,c),Zh(c,null,null,g),Qh()),x=u.memoizedState,A=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),Io(c,yn,m)):(m=A.cache,Io(c,yn,m),m!==x.cache&&_E(c,[yn],g,!0))),qn(u,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Hs(u){u.flags|=4}function a6(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!hO(c)){if(c=Br.current,c!==null&&((it&4194048)===it?Pa!==null:(it&62914560)!==it&&(it&536870912)===0||c!==Pa))throw Vh=$E,PF;u.flags|=8192}}function r1(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?Bk():536870912,u.lanes|=c,Df|=c)}function r0(u,c){if(!mt)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Ht(u){var c=u.alternate!==null&&u.alternate.child===u.child,g=0,m=0;if(c)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=g,c}function XV(u,c,g){var m=c.pendingProps;switch(xE(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(c),null;case 1:return Ht(c),null;case 3:return g=c.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Is(yn),ye(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(jh(c)?Hs(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,BF())),Ht(c),null;case 26:return g=c.memoizedState,u===null?(Hs(c),g!==null?(Ht(c),a6(c,g)):(Ht(c),c.flags&=-16777217)):g?g!==u.memoizedState?(Hs(c),Ht(c),a6(c,g)):(Ht(c),c.flags&=-16777217):(u.memoizedProps!==m&&Hs(c),Ht(c),c.flags&=-16777217),null;case 27:qe(c),g=De.current;var x=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Hs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Ht(c),null}u=ge.current,jh(c)?RF(c):(u=aO(x,m,g),c.stateNode=u,Hs(c))}return Ht(c),null;case 5:if(qe(c),g=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Hs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Ht(c),null}if(u=ge.current,jh(c))RF(c);else{switch(x=y1(De.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}u[ni]=c,u[Ii]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=u;e:switch(Gn(u,g,m),g){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hs(c)}}return Ht(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==m&&Hs(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(u=De.current,jh(c)){if(u=c.stateNode,g=c.memoizedProps,m=null,x=xi,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[ni]=c,u=!!(u.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||K6(u.nodeValue,g)),u||yl(c)}else u=y1(u).createTextNode(m),u[ni]=c,c.stateNode=u}return Ht(c),null;case 13:if(m=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=jh(c),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[ni]=c}else Ph(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ht(c),x=!1}else x=BF(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Ps(c),c):(Ps(c),null)}if(Ps(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=m!==null,u=u!==null&&u.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var A=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(m.flags|=2048)}return g!==u&&g&&(c.child.flags|=8192),r1(c,c.updateQueue),Ht(c),null;case 4:return ye(),u===null&&FA(c.stateNode.containerInfo),Ht(c),null;case 10:return Is(c.type),Ht(c),null;case 19:if(se(vn),x=c.memoizedState,x===null)return Ht(c),null;if(m=(c.flags&128)!==0,A=x.rendering,A===null)if(m)r0(x,!1);else{if(Wt!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(A=Jm(u),A!==null){for(c.flags|=128,r0(x,!1),u=A.updateQueue,c.updateQueue=u,r1(c,u),c.subtreeFlags=0,u=g,g=c.child;g!==null;)OF(g,u),g=g.sibling;return oe(vn,vn.current&1|2),c.child}u=u.sibling}x.tail!==null&&fn()>o1&&(c.flags|=128,m=!0,r0(x,!1),c.lanes=4194304)}else{if(!m)if(u=Jm(A),u!==null){if(c.flags|=128,m=!0,u=u.updateQueue,c.updateQueue=u,r1(c,u),r0(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!mt)return Ht(c),null}else 2*fn()-x.renderingStartTime>o1&&g!==536870912&&(c.flags|=128,m=!0,r0(x,!1),c.lanes=4194304);x.isBackwards?(A.sibling=c.child,c.child=A):(u=x.last,u!==null?u.sibling=A:c.child=A,x.last=A)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=fn(),c.sibling=null,u=vn.current,oe(vn,m?u&1|2:u&1),c):(Ht(c),null);case 22:case 23:return Ps(c),NE(),m=c.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(Ht(c),c.subtreeFlags&6&&(c.flags|=8192)):Ht(c),g=c.updateQueue,g!==null&&r1(c,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),u!==null&&se(xl),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Is(yn),Ht(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function VV(u,c){switch(xE(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return Is(yn),ye(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return qe(c),null;case 13:if(Ps(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Ph()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return se(vn),null;case 4:return ye(),null;case 10:return Is(c.type),null;case 22:case 23:return Ps(c),NE(),u!==null&&se(xl),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return Is(yn),null;case 25:return null;default:return null}}function s6(u,c){switch(xE(c),c.tag){case 3:Is(yn),ye();break;case 26:case 27:case 5:qe(c);break;case 4:ye();break;case 13:Ps(c);break;case 19:se(vn);break;case 10:Is(c.type);break;case 22:case 23:Ps(c),NE(),u!==null&&se(xl);break;case 24:Is(yn)}}function a0(u,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&u)===u){m=void 0;var A=g.create,M=g.inst;m=A(),M.destroy=m}g=g.next}while(g!==x)}}catch(k){kt(c,c.return,k)}}function Xo(u,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&u)===u){var M=m.inst,k=M.destroy;if(k!==void 0){M.destroy=void 0,x=c;var L=g,W=k;try{W()}catch(ie){kt(x,L,ie)}}}m=m.next}while(m!==A)}}catch(ie){kt(c,c.return,ie)}}function o6(u){var c=u.updateQueue;if(c!==null){var g=u.stateNode;try{VF(c,g)}catch(m){kt(u,u.return,m)}}}function u6(u,c,g){g.props=Al(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(m){kt(u,c,m)}}function s0(u,c){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof g=="function"?u.refCleanup=g(m):g.current=m}}catch(x){kt(u,c,x)}}function qa(u,c){var g=u.ref,m=u.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){kt(u,c,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){kt(u,c,x)}else g.current=null}function l6(u){var c=u.type,g=u.memoizedProps,m=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){kt(u,u.return,x)}}function uA(u,c,g){try{var m=u.stateNode;pW(m,u.type,g,c),m[Ii]=c}catch(x){kt(u,u.return,x)}}function c6(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&tu(u.type)||u.tag===4}function lA(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||c6(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&tu(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function cA(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(u),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=m1));else if(m!==4&&(m===27&&tu(u.type)&&(g=u.stateNode,c=null),u=u.child,u!==null))for(cA(u,c,g),u=u.sibling;u!==null;)cA(u,c,g),u=u.sibling}function a1(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?g.insertBefore(u,c):g.appendChild(u);else if(m!==4&&(m===27&&tu(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(a1(u,c,g),u=u.sibling;u!==null;)a1(u,c,g),u=u.sibling}function f6(u){var c=u.stateNode,g=u.memoizedProps;try{for(var m=u.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Gn(c,m,g),c[ni]=u,c[Ii]=g}catch(A){kt(u,u.return,A)}}var Gs=!1,rn=!1,fA=!1,d6=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function WV(u,c){if(u=u.containerInfo,RA=S1,u=SF(u),lE(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{g.nodeType,A.nodeType}catch{g=null;break e}var M=0,k=-1,L=-1,W=0,ie=0,ae=u,Q=null;t:for(;;){for(var Z;ae!==g||x!==0&&ae.nodeType!==3||(k=M+x),ae!==A||m!==0&&ae.nodeType!==3||(L=M+m),ae.nodeType===3&&(M+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)Q=ae,ae=Z;for(;;){if(ae===u)break t;if(Q===g&&++W===x&&(k=M),Q===A&&++ie===m&&(L=M),(Z=ae.nextSibling)!==null)break;ae=Q,Q=ae.parentNode}ae=Z}g=k===-1||L===-1?null:{start:k,end:L}}else g=null}g=g||{start:0,end:0}}else g=null;for(zA={focusedElem:u,selectionRange:g},S1=!1,Mn=c;Mn!==null;)if(c=Mn,u=c.child,(c.subtreeFlags&1024)!==0&&u!==null)u.return=c,Mn=u;else for(;Mn!==null;){switch(c=Mn,A=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&A!==null){u=void 0,g=c,x=A.memoizedProps,A=A.memoizedState,m=g.stateNode;try{var Be=Al(g.type,x,g.elementType===g.type);u=m.getSnapshotBeforeUpdate(Be,A),m.__reactInternalSnapshotBeforeUpdate=u}catch(Re){kt(g,g.return,Re)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,g=u.nodeType,g===9)UA(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":UA(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,Mn=u;break}Mn=c.return}}function h6(u,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Vo(u,g),m&4&&a0(5,g);break;case 1:if(Vo(u,g),m&4)if(u=g.stateNode,c===null)try{u.componentDidMount()}catch(M){kt(g,g.return,M)}else{var x=Al(g.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(x,c,u.__reactInternalSnapshotBeforeUpdate)}catch(M){kt(g,g.return,M)}}m&64&&o6(g),m&512&&s0(g,g.return);break;case 3:if(Vo(u,g),m&64&&(u=g.updateQueue,u!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{VF(u,c)}catch(M){kt(g,g.return,M)}}break;case 27:c===null&&m&4&&f6(g);case 26:case 5:Vo(u,g),c===null&&m&4&&l6(g),m&512&&s0(g,g.return);break;case 12:Vo(u,g);break;case 13:Vo(u,g),m&4&&m6(u,g),m&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=rW.bind(null,g),AW(u,g))));break;case 22:if(m=g.memoizedState!==null||Gs,!m){c=c!==null&&c.memoizedState!==null||rn,x=Gs;var A=rn;Gs=m,(rn=c)&&!A?Wo(u,g,(g.subtreeFlags&8772)!==0):Vo(u,g),Gs=x,rn=A}break;case 30:break;default:Vo(u,g)}}function g6(u){var c=u.alternate;c!==null&&(u.alternate=null,g6(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Hx(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ut=null,qi=!1;function Ys(u,c,g){for(g=g.child;g!==null;)p6(u,c,g),g=g.sibling}function p6(u,c,g){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Dh,g)}catch{}switch(g.tag){case 26:rn||qa(g,c),Ys(u,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:rn||qa(g,c);var m=Ut,x=qi;tu(g.type)&&(Ut=g.stateNode,qi=!1),Ys(u,c,g),p0(g.stateNode),Ut=m,qi=x;break;case 5:rn||qa(g,c);case 6:if(m=Ut,x=qi,Ut=null,Ys(u,c,g),Ut=m,qi=x,Ut!==null)if(qi)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(g.stateNode)}catch(A){kt(g,c,A)}else try{Ut.removeChild(g.stateNode)}catch(A){kt(g,c,A)}break;case 18:Ut!==null&&(qi?(u=Ut,iO(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),S0(u)):iO(Ut,g.stateNode));break;case 4:m=Ut,x=qi,Ut=g.stateNode.containerInfo,qi=!0,Ys(u,c,g),Ut=m,qi=x;break;case 0:case 11:case 14:case 15:rn||Xo(2,g,c),rn||Xo(4,g,c),Ys(u,c,g);break;case 1:rn||(qa(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&u6(g,c,m)),Ys(u,c,g);break;case 21:Ys(u,c,g);break;case 22:rn=(m=rn)||g.memoizedState!==null,Ys(u,c,g),rn=m;break;default:Ys(u,c,g)}}function m6(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{S0(u)}catch(g){kt(c,c.return,g)}}function QV(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new d6),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new d6),c;default:throw Error(i(435,u.tag))}}function dA(u,c){var g=QV(u);c.forEach(function(m){var x=aW.bind(null,u,m);g.has(m)||(g.add(m),m.then(x,x))})}function fr(u,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],A=u,M=c,k=M;e:for(;k!==null;){switch(k.tag){case 27:if(tu(k.type)){Ut=k.stateNode,qi=!1;break e}break;case 5:Ut=k.stateNode,qi=!1;break e;case 3:case 4:Ut=k.stateNode.containerInfo,qi=!0;break e}k=k.return}if(Ut===null)throw Error(i(160));p6(A,M,x),Ut=null,qi=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)y6(c,u),c=c.sibling}var oa=null;function y6(u,c){var g=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:fr(c,u),dr(u),m&4&&(Xo(3,u,u.return),a0(3,u),Xo(5,u,u.return));break;case 1:fr(c,u),dr(u),m&512&&(rn||g===null||qa(g,g.return)),m&64&&Gs&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=oa;if(fr(c,u),dr(u),m&512&&(rn||g===null||qa(g,g.return)),m&4){var A=g!==null?g.memoizedState:null;if(m=u.memoizedState,g===null)if(m===null)if(u.stateNode===null){e:{m=u.type,g=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":A=x.getElementsByTagName("title")[0],(!A||A[Th]||A[ni]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(m),x.head.insertBefore(A,x.querySelector("head > title"))),Gn(A,m,g),A[ni]=u,Dn(A),m=A;break e;case"link":var M=fO("link","href",x).get(m+(g.href||""));if(M){for(var k=0;k<M.length;k++)if(A=M[k],A.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&A.getAttribute("rel")===(g.rel==null?null:g.rel)&&A.getAttribute("title")===(g.title==null?null:g.title)&&A.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){M.splice(k,1);break t}}A=x.createElement(m),Gn(A,m,g),x.head.appendChild(A);break;case"meta":if(M=fO("meta","content",x).get(m+(g.content||""))){for(k=0;k<M.length;k++)if(A=M[k],A.getAttribute("content")===(g.content==null?null:""+g.content)&&A.getAttribute("name")===(g.name==null?null:g.name)&&A.getAttribute("property")===(g.property==null?null:g.property)&&A.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&A.getAttribute("charset")===(g.charSet==null?null:g.charSet)){M.splice(k,1);break t}}A=x.createElement(m),Gn(A,m,g),x.head.appendChild(A);break;default:throw Error(i(468,m))}A[ni]=u,Dn(A),m=A}u.stateNode=m}else dO(x,u.type,u.stateNode);else u.stateNode=cO(x,m,u.memoizedProps);else A!==m?(A===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):A.count--,m===null?dO(x,u.type,u.stateNode):cO(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&uA(u,u.memoizedProps,g.memoizedProps)}break;case 27:fr(c,u),dr(u),m&512&&(rn||g===null||qa(g,g.return)),g!==null&&m&4&&uA(u,u.memoizedProps,g.memoizedProps);break;case 5:if(fr(c,u),dr(u),m&512&&(rn||g===null||qa(g,g.return)),u.flags&32){x=u.stateNode;try{af(x,"")}catch(Z){kt(u,u.return,Z)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,uA(u,x,g!==null?g.memoizedProps:x)),m&1024&&(fA=!0);break;case 6:if(fr(c,u),dr(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,g=u.stateNode;try{g.nodeValue=m}catch(Z){kt(u,u.return,Z)}}break;case 3:if(x1=null,x=oa,oa=v1(c.containerInfo),fr(c,u),oa=x,dr(u),m&4&&g!==null&&g.memoizedState.isDehydrated)try{S0(c.containerInfo)}catch(Z){kt(u,u.return,Z)}fA&&(fA=!1,v6(u));break;case 4:m=oa,oa=v1(u.stateNode.containerInfo),fr(c,u),dr(u),oa=m;break;case 12:fr(c,u),dr(u);break;case 13:fr(c,u),dr(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(vA=fn()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,dA(u,m)));break;case 22:x=u.memoizedState!==null;var L=g!==null&&g.memoizedState!==null,W=Gs,ie=rn;if(Gs=W||x,rn=ie||L,fr(c,u),rn=ie,Gs=W,dr(u),m&8192)e:for(c=u.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(g===null||L||Gs||rn||Sl(u)),g=null,c=u;;){if(c.tag===5||c.tag===26){if(g===null){L=g=c;try{if(A=L.stateNode,x)M=A.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{k=L.stateNode;var ae=L.memoizedProps.style,Q=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){kt(L,L.return,Z)}}}else if(c.tag===6){if(g===null){L=c;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Z){kt(L,L.return,Z)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=u.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,dA(u,g))));break;case 19:fr(c,u),dr(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,dA(u,m)));break;case 30:break;case 21:break;default:fr(c,u),dr(u)}}function dr(u){var c=u.flags;if(c&2){try{for(var g,m=u.return;m!==null;){if(c6(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,A=lA(u);a1(u,A,x);break;case 5:var M=g.stateNode;g.flags&32&&(af(M,""),g.flags&=-33);var k=lA(u);a1(u,k,M);break;case 3:case 4:var L=g.stateNode.containerInfo,W=lA(u);cA(u,W,L);break;default:throw Error(i(161))}}catch(ie){kt(u,u.return,ie)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function v6(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;v6(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Vo(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)h6(u,c.alternate,c),c=c.sibling}function Sl(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:Xo(4,c,c.return),Sl(c);break;case 1:qa(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&u6(c,c.return,g),Sl(c);break;case 27:p0(c.stateNode);case 26:case 5:qa(c,c.return),Sl(c);break;case 22:c.memoizedState===null&&Sl(c);break;case 30:Sl(c);break;default:Sl(c)}u=u.sibling}}function Wo(u,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=u,A=c,M=A.flags;switch(A.tag){case 0:case 11:case 15:Wo(x,A,g),a0(4,A);break;case 1:if(Wo(x,A,g),m=A,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){kt(m,m.return,W)}if(m=A,x=m.updateQueue,x!==null){var k=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)XF(L[x],k)}catch(W){kt(m,m.return,W)}}g&&M&64&&o6(A),s0(A,A.return);break;case 27:f6(A);case 26:case 5:Wo(x,A,g),g&&m===null&&M&4&&l6(A),s0(A,A.return);break;case 12:Wo(x,A,g);break;case 13:Wo(x,A,g),g&&M&4&&m6(x,A);break;case 22:A.memoizedState===null&&Wo(x,A,g),s0(A,A.return);break;case 30:break;default:Wo(x,A,g)}c=c.sibling}}function hA(u,c){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&Gh(g))}function gA(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Gh(u))}function Ha(u,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)b6(u,c,g,m),c=c.sibling}function b6(u,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Ha(u,c,g,m),x&2048&&a0(9,c);break;case 1:Ha(u,c,g,m);break;case 3:Ha(u,c,g,m),x&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Gh(u)));break;case 12:if(x&2048){Ha(u,c,g,m),u=c.stateNode;try{var A=c.memoizedProps,M=A.id,k=A.onPostCommit;typeof k=="function"&&k(M,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(L){kt(c,c.return,L)}}else Ha(u,c,g,m);break;case 13:Ha(u,c,g,m);break;case 23:break;case 22:A=c.stateNode,M=c.alternate,c.memoizedState!==null?A._visibility&2?Ha(u,c,g,m):o0(u,c):A._visibility&2?Ha(u,c,g,m):(A._visibility|=2,_f(u,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&hA(M,c);break;case 24:Ha(u,c,g,m),x&2048&&gA(c.alternate,c);break;default:Ha(u,c,g,m)}}function _f(u,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var A=u,M=c,k=g,L=m,W=M.flags;switch(M.tag){case 0:case 11:case 15:_f(A,M,k,L,x),a0(8,M);break;case 23:break;case 22:var ie=M.stateNode;M.memoizedState!==null?ie._visibility&2?_f(A,M,k,L,x):o0(A,M):(ie._visibility|=2,_f(A,M,k,L,x)),x&&W&2048&&hA(M.alternate,M);break;case 24:_f(A,M,k,L,x),x&&W&2048&&gA(M.alternate,M);break;default:_f(A,M,k,L,x)}c=c.sibling}}function o0(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=u,m=c,x=m.flags;switch(m.tag){case 22:o0(g,m),x&2048&&hA(m.alternate,m);break;case 24:o0(g,m),x&2048&&gA(m.alternate,m);break;default:o0(g,m)}c=c.sibling}}var u0=8192;function wf(u){if(u.subtreeFlags&u0)for(u=u.child;u!==null;)x6(u),u=u.sibling}function x6(u){switch(u.tag){case 26:wf(u),u.flags&u0&&u.memoizedState!==null&&RW(oa,u.memoizedState,u.memoizedProps);break;case 5:wf(u);break;case 3:case 4:var c=oa;oa=v1(u.stateNode.containerInfo),wf(u),oa=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=u0,u0=16777216,wf(u),u0=c):wf(u));break;default:wf(u)}}function E6(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function l0(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];Mn=m,S6(m,u)}E6(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)A6(u),u=u.sibling}function A6(u){switch(u.tag){case 0:case 11:case 15:l0(u),u.flags&2048&&Xo(9,u,u.return);break;case 3:l0(u);break;case 12:l0(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,s1(u)):l0(u);break;default:l0(u)}}function s1(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];Mn=m,S6(m,u)}E6(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:Xo(8,c,c.return),s1(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,s1(c));break;default:s1(c)}u=u.sibling}}function S6(u,c){for(;Mn!==null;){var g=Mn;switch(g.tag){case 0:case 11:case 15:Xo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Gh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,Mn=m;else e:for(g=u;Mn!==null;){m=Mn;var x=m.sibling,A=m.return;if(g6(m),m===g){Mn=null;break e}if(x!==null){x.return=A,Mn=x;break e}Mn=A}}}var ZV={getCacheForType:function(u){var c=ii(yn),g=c.data.get(u);return g===void 0&&(g=u(),c.data.set(u,g)),g}},KV=typeof WeakMap=="function"?WeakMap:Map,xt=0,Nt=null,Ke=null,it=0,Et=0,hr=null,Qo=!1,Cf=!1,pA=!1,Xs=0,Wt=0,Zo=0,_l=0,mA=0,Lr=0,Df=0,c0=null,Hi=null,yA=!1,vA=0,o1=1/0,u1=null,Ko=null,Hn=0,Jo=null,$f=null,Mf=0,bA=0,xA=null,_6=null,f0=0,EA=null;function gr(){if((xt&2)!==0&&it!==0)return it&-it;if(N.T!==null){var u=mf;return u!==0?u:$A()}return Ik()}function w6(){Lr===0&&(Lr=(it&536870912)===0||mt?zk():536870912);var u=Br.current;return u!==null&&(u.flags|=32),Lr}function pr(u,c,g){(u===Nt&&(Et===2||Et===9)||u.cancelPendingCommit!==null)&&(Tf(u,0),eu(u,it,Lr,!1)),Mh(u,g),((xt&2)===0||u!==Nt)&&(u===Nt&&((xt&2)===0&&(_l|=g),Wt===4&&eu(u,it,Lr,!1)),Ga(u))}function C6(u,c,g){if((xt&6)!==0)throw Error(i(327));var m=!g&&(c&124)===0&&(c&u.expiredLanes)===0||$h(u,c),x=m?tW(u,c):_A(u,c,!0),A=m;do{if(x===0){Cf&&!m&&eu(u,c,0,!1);break}else{if(g=u.current.alternate,A&&!JV(g)){x=_A(u,c,!1),A=!1;continue}if(x===2){if(A=c,u.errorRecoveryDisabledLanes&A)var M=0;else M=u.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var k=u;x=c0;var L=k.current.memoizedState.isDehydrated;if(L&&(Tf(k,M).flags|=256),M=_A(k,M,!1),M!==2){if(pA&&!L){k.errorRecoveryDisabledLanes|=A,_l|=A,x=4;break e}A=Hi,Hi=x,A!==null&&(Hi===null?Hi=A:Hi.push.apply(Hi,A))}x=M}if(A=!1,x!==2)continue}}if(x===1){Tf(u,0),eu(u,c,0,!0);break}e:{switch(m=u,A=x,A){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:eu(m,c,Lr,!Qo);break e;case 2:Hi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=vA+300-fn(),10<x)){if(eu(m,c,Lr,!Qo),bm(m,0,!0)!==0)break e;m.timeoutHandle=tO(D6.bind(null,m,g,Hi,u1,yA,c,Lr,_l,Df,Qo,A,2,-0,0),x);break e}D6(m,g,Hi,u1,yA,c,Lr,_l,Df,Qo,A,0,-0,0)}}break}while(!0);Ga(u)}function D6(u,c,g,m,x,A,M,k,L,W,ie,ae,Q,Z){if(u.timeoutHandle=-1,ae=c.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(v0={stylesheets:null,count:0,unsuspend:NW},x6(c),ae=zW(),ae!==null)){u.cancelPendingCommit=ae(N6.bind(null,u,c,A,g,m,x,M,k,L,ie,1,Q,Z)),eu(u,A,M,!W);return}N6(u,c,A,g,m,x,M,k,L)}function JV(u){for(var c=u;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],A=x.getSnapshot;x=x.value;try{if(!lr(A(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function eu(u,c,g,m){c&=~mA,c&=~_l,u.suspendedLanes|=c,u.pingedLanes&=~c,m&&(u.warmLanes|=c),m=u.expirationTimes;for(var x=c;0<x;){var A=31-ur(x),M=1<<A;m[A]=-1,x&=~M}g!==0&&Lk(u,g,c)}function l1(){return(xt&6)===0?(d0(0),!1):!0}function AA(){if(Ke!==null){if(Et===0)var u=Ke.return;else u=Ke,Us=vl=null,UE(u),Af=null,n0=0,u=Ke;for(;u!==null;)s6(u.alternate,u),u=u.return;Ke=null}}function Tf(u,c){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,yW(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),AA(),Nt=u,Ke=g=zs(u.current,null),it=c,Et=0,hr=null,Qo=!1,Cf=$h(u,c),pA=!1,Df=Lr=mA=_l=Zo=Wt=0,Hi=c0=null,yA=!1,(c&8)!==0&&(c|=c&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=c;0<m;){var x=31-ur(m),A=1<<x;c|=u[x],m&=~A}return Xs=c,km(),g}function $6(u,c){Xe=null,N.H=Qm,c===Xh||c===Im?(c=GF(),Et=3):c===PF?(c=GF(),Et=4):Et=c===Y5?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,hr=c,Ke===null&&(Wt=1,t1(u,Or(c,u.current)))}function M6(){var u=N.H;return N.H=Qm,u===null?Qm:u}function T6(){var u=N.A;return N.A=ZV,u}function SA(){Wt=4,Qo||(it&4194048)!==it&&Br.current!==null||(Cf=!0),(Zo&134217727)===0&&(_l&134217727)===0||Nt===null||eu(Nt,it,Lr,!1)}function _A(u,c,g){var m=xt;xt|=2;var x=M6(),A=T6();(Nt!==u||it!==c)&&(u1=null,Tf(u,c)),c=!1;var M=Wt;e:do try{if(Et!==0&&Ke!==null){var k=Ke,L=hr;switch(Et){case 8:AA(),M=6;break e;case 3:case 2:case 9:case 6:Br.current===null&&(c=!0);var W=Et;if(Et=0,hr=null,kf(u,k,L,W),g&&Cf){M=0;break e}break;default:W=Et,Et=0,hr=null,kf(u,k,L,W)}}eW(),M=Wt;break}catch(ie){$6(u,ie)}while(!0);return c&&u.shellSuspendCounter++,Us=vl=null,xt=m,N.H=x,N.A=A,Ke===null&&(Nt=null,it=0,km()),M}function eW(){for(;Ke!==null;)k6(Ke)}function tW(u,c){var g=xt;xt|=2;var m=M6(),x=T6();Nt!==u||it!==c?(u1=null,o1=fn()+500,Tf(u,c)):Cf=$h(u,c);e:do try{if(Et!==0&&Ke!==null){c=Ke;var A=hr;t:switch(Et){case 1:Et=0,hr=null,kf(u,c,A,1);break;case 2:case 9:if(qF(A)){Et=0,hr=null,F6(c);break}c=function(){Et!==2&&Et!==9||Nt!==u||(Et=7),Ga(u)},A.then(c,c);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:qF(A)?(Et=0,hr=null,F6(c)):(Et=0,hr=null,kf(u,c,A,7));break;case 5:var M=null;switch(Ke.tag){case 26:M=Ke.memoizedState;case 5:case 27:var k=Ke;if(!M||hO(M)){Et=0,hr=null;var L=k.sibling;if(L!==null)Ke=L;else{var W=k.return;W!==null?(Ke=W,c1(W)):Ke=null}break t}}Et=0,hr=null,kf(u,c,A,5);break;case 6:Et=0,hr=null,kf(u,c,A,6);break;case 8:AA(),Wt=6;break e;default:throw Error(i(462))}}nW();break}catch(ie){$6(u,ie)}while(!0);return Us=vl=null,N.H=m,N.A=x,xt=g,Ke!==null?0:(Nt=null,it=0,km(),Wt)}function nW(){for(;Ke!==null&&!cn();)k6(Ke)}function k6(u){var c=r6(u.alternate,u,Xs);u.memoizedProps=u.pendingProps,c===null?c1(u):Ke=c}function F6(u){var c=u,g=c.alternate;switch(c.tag){case 15:case 0:c=K5(g,c,c.pendingProps,c.type,void 0,it);break;case 11:c=K5(g,c,c.pendingProps,c.type.render,c.ref,it);break;case 5:UE(c);default:s6(g,c),c=Ke=OF(c,Xs),c=r6(g,c,Xs)}u.memoizedProps=u.pendingProps,c===null?c1(u):Ke=c}function kf(u,c,g,m){Us=vl=null,UE(c),Af=null,n0=0;var x=c.return;try{if(GV(u,x,c,g,it)){Wt=1,t1(u,Or(g,u.current)),Ke=null;return}}catch(A){if(x!==null)throw Ke=x,A;Wt=1,t1(u,Or(g,u.current)),Ke=null;return}c.flags&32768?(mt||m===1?u=!0:Cf||(it&536870912)!==0?u=!1:(Qo=u=!0,(m===2||m===9||m===3||m===6)&&(m=Br.current,m!==null&&m.tag===13&&(m.flags|=16384))),O6(c,u)):c1(c)}function c1(u){var c=u;do{if((c.flags&32768)!==0){O6(c,Qo);return}u=c.return;var g=XV(c.alternate,c,Xs);if(g!==null){Ke=g;return}if(c=c.sibling,c!==null){Ke=c;return}Ke=c=u}while(c!==null);Wt===0&&(Wt=5)}function O6(u,c){do{var g=VV(u.alternate,u);if(g!==null){g.flags&=32767,Ke=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(u=u.sibling,u!==null)){Ke=u;return}Ke=u=g}while(u!==null);Wt=6,Ke=null}function N6(u,c,g,m,x,A,M,k,L){u.cancelPendingCommit=null;do f1();while(Hn!==0);if((xt&6)!==0)throw Error(i(327));if(c!==null){if(c===u.current)throw Error(i(177));if(A=c.lanes|c.childLanes,A|=gE,NX(u,g,A,M,k,L),u===Nt&&(Ke=Nt=null,it=0),$f=c,Jo=u,Mf=g,bA=A,xA=x,_6=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,sW(mm,function(){return U6(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=N.T,N.T=null,x=q.p,q.p=2,M=xt,xt|=4;try{WV(u,c,g)}finally{xt=M,q.p=x,N.T=m}}Hn=1,R6(),z6(),B6()}}function R6(){if(Hn===1){Hn=0;var u=Jo,c=$f,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=N.T,N.T=null;var m=q.p;q.p=2;var x=xt;xt|=4;try{y6(c,u);var A=zA,M=SF(u.containerInfo),k=A.focusedElem,L=A.selectionRange;if(M!==k&&k&&k.ownerDocument&&AF(k.ownerDocument.documentElement,k)){if(L!==null&&lE(k)){var W=L.start,ie=L.end;if(ie===void 0&&(ie=W),"selectionStart"in k)k.selectionStart=W,k.selectionEnd=Math.min(ie,k.value.length);else{var ae=k.ownerDocument||document,Q=ae&&ae.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Be=k.textContent.length,Re=Math.min(L.start,Be),$t=L.end===void 0?Re:Math.min(L.end,Be);!Z.extend&&Re>$t&&(M=$t,$t=Re,Re=M);var H=EF(k,Re),P=EF(k,$t);if(H&&P&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var X=ae.createRange();X.setStart(H.node,H.offset),Z.removeAllRanges(),Re>$t?(Z.addRange(X),Z.extend(P.node,P.offset)):(X.setEnd(P.node,P.offset),Z.addRange(X))}}}}for(ae=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ae.length;k++){var re=ae[k];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}S1=!!RA,zA=RA=null}finally{xt=x,q.p=m,N.T=g}}u.current=c,Hn=2}}function z6(){if(Hn===2){Hn=0;var u=Jo,c=$f,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=N.T,N.T=null;var m=q.p;q.p=2;var x=xt;xt|=4;try{h6(u,c.alternate,c)}finally{xt=x,q.p=m,N.T=g}}Hn=3}}function B6(){if(Hn===4||Hn===3){Hn=0,Cn();var u=Jo,c=$f,g=Mf,m=_6;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Hn=5:(Hn=0,$f=Jo=null,L6(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(Ko=null),Px(g),c=c.stateNode,or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Dh,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=N.T,x=q.p,q.p=2,N.T=null;try{for(var A=u.onRecoverableError,M=0;M<m.length;M++){var k=m[M];A(k.value,{componentStack:k.stack})}}finally{N.T=c,q.p=x}}(Mf&3)!==0&&f1(),Ga(u),x=u.pendingLanes,(g&4194090)!==0&&(x&42)!==0?u===EA?f0++:(f0=0,EA=u):f0=0,d0(0)}}function L6(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,Gh(c)))}function f1(u){return R6(),z6(),B6(),U6()}function U6(){if(Hn!==5)return!1;var u=Jo,c=bA;bA=0;var g=Px(Mf),m=N.T,x=q.p;try{q.p=32>g?32:g,N.T=null,g=xA,xA=null;var A=Jo,M=Mf;if(Hn=0,$f=Jo=null,Mf=0,(xt&6)!==0)throw Error(i(331));var k=xt;if(xt|=4,A6(A.current),b6(A,A.current,M,g),xt=k,d0(0,!1),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Dh,A)}catch{}return!0}finally{q.p=x,N.T=m,L6(u,c)}}function I6(u,c,g){c=Or(g,c),c=JE(u.stateNode,c,2),u=qo(u,c,2),u!==null&&(Mh(u,2),Ga(u))}function kt(u,c,g){if(u.tag===3)I6(u,u,g);else for(;c!==null;){if(c.tag===3){I6(c,u,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ko===null||!Ko.has(m))){u=Or(g,u),g=H5(2),m=qo(c,g,2),m!==null&&(G5(g,m,c,u),Mh(m,2),Ga(m));break}}c=c.return}}function wA(u,c,g){var m=u.pingCache;if(m===null){m=u.pingCache=new KV;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(pA=!0,x.add(g),u=iW.bind(null,u,c,g),c.then(u,u))}function iW(u,c,g){var m=u.pingCache;m!==null&&m.delete(c),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Nt===u&&(it&g)===g&&(Wt===4||Wt===3&&(it&62914560)===it&&300>fn()-vA?(xt&2)===0&&Tf(u,0):mA|=g,Df===it&&(Df=0)),Ga(u)}function j6(u,c){c===0&&(c=Bk()),u=df(u,c),u!==null&&(Mh(u,c),Ga(u))}function rW(u){var c=u.memoizedState,g=0;c!==null&&(g=c.retryLane),j6(u,g)}function aW(u,c){var g=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),j6(u,g)}function sW(u,c){return tn(u,c)}var d1=null,Ff=null,CA=!1,h1=!1,DA=!1,wl=0;function Ga(u){u!==Ff&&u.next===null&&(Ff===null?d1=Ff=u:Ff=Ff.next=u),h1=!0,CA||(CA=!0,uW())}function d0(u,c){if(!DA&&h1){DA=!0;do for(var g=!1,m=d1;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var A=0;else{var M=m.suspendedLanes,k=m.pingedLanes;A=(1<<31-ur(42|u)+1)-1,A&=x&~(M&~k),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(g=!0,G6(m,A))}else A=it,A=bm(m,m===Nt?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||$h(m,A)||(g=!0,G6(m,A));m=m.next}while(g);DA=!1}}function oW(){P6()}function P6(){h1=CA=!1;var u=0;wl!==0&&(mW()&&(u=wl),wl=0);for(var c=fn(),g=null,m=d1;m!==null;){var x=m.next,A=q6(m,c);A===0?(m.next=null,g===null?d1=x:g.next=x,x===null&&(Ff=g)):(g=m,(u!==0||(A&3)!==0)&&(h1=!0)),m=x}d0(u)}function q6(u,c){for(var g=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,A=u.pendingLanes&-62914561;0<A;){var M=31-ur(A),k=1<<M,L=x[M];L===-1?((k&g)===0||(k&m)!==0)&&(x[M]=OX(k,c)):L<=c&&(u.expiredLanes|=k),A&=~k}if(c=Nt,g=it,g=bm(u,u===c?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,g===0||u===c&&(Et===2||Et===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&st(m),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||$h(u,g)){if(c=g&-g,c===u.callbackPriority)return c;switch(m!==null&&st(m),Px(g)){case 2:case 8:g=Nk;break;case 32:g=mm;break;case 268435456:g=Rk;break;default:g=mm}return m=H6.bind(null,u),g=tn(g,m),u.callbackPriority=c,u.callbackNode=g,c}return m!==null&&m!==null&&st(m),u.callbackPriority=2,u.callbackNode=null,2}function H6(u,c){if(Hn!==0&&Hn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(f1()&&u.callbackNode!==g)return null;var m=it;return m=bm(u,u===Nt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(C6(u,m,c),q6(u,fn()),u.callbackNode!=null&&u.callbackNode===g?H6.bind(null,u):null)}function G6(u,c){if(f1())return null;C6(u,c,!0)}function uW(){vW(function(){(xt&6)!==0?tn(Ok,oW):P6()})}function $A(){return wl===0&&(wl=zk()),wl}function Y6(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:_m(""+u)}function X6(u,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,u.id&&g.setAttribute("form",u.id),c.parentNode.insertBefore(g,c),u=new FormData(u),g.parentNode.removeChild(g),u}function lW(u,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var A=Y6((x[Ii]||null).action),M=m.submitter;M&&(c=(c=M[Ii]||null)?Y6(c.formAction):M.getAttribute("formAction"),c!==null&&(A=c,M=null));var k=new $m("action","action",null,m,x);u.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(wl!==0){var L=M?X6(x,M):new FormData(x);VE(g,{pending:!0,data:L,method:x.method,action:A},null,L)}}else typeof A=="function"&&(k.preventDefault(),L=M?X6(x,M):new FormData(x),VE(g,{pending:!0,data:L,method:x.method,action:A},A,L))},currentTarget:x}]})}}for(var MA=0;MA<hE.length;MA++){var TA=hE[MA],cW=TA.toLowerCase(),fW=TA[0].toUpperCase()+TA.slice(1);sa(cW,"on"+fW)}sa(CF,"onAnimationEnd"),sa(DF,"onAnimationIteration"),sa($F,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa($V,"onTransitionRun"),sa(MV,"onTransitionStart"),sa(TV,"onTransitionCancel"),sa(MF,"onTransitionEnd"),tf("onMouseEnter",["mouseout","mouseover"]),tf("onMouseLeave",["mouseout","mouseover"]),tf("onPointerEnter",["pointerout","pointerover"]),tf("onPointerLeave",["pointerout","pointerover"]),ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var h0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(h0));function V6(u,c){c=(c&4)!==0;for(var g=0;g<u.length;g++){var m=u[g],x=m.event;m=m.listeners;e:{var A=void 0;if(c)for(var M=m.length-1;0<=M;M--){var k=m[M],L=k.instance,W=k.currentTarget;if(k=k.listener,L!==A&&x.isPropagationStopped())break e;A=k,x.currentTarget=W;try{A(x)}catch(ie){e1(ie)}x.currentTarget=null,A=L}else for(M=0;M<m.length;M++){if(k=m[M],L=k.instance,W=k.currentTarget,k=k.listener,L!==A&&x.isPropagationStopped())break e;A=k,x.currentTarget=W;try{A(x)}catch(ie){e1(ie)}x.currentTarget=null,A=L}}}}function Je(u,c){var g=c[qx];g===void 0&&(g=c[qx]=new Set);var m=u+"__bubble";g.has(m)||(W6(c,u,2,!1),g.add(m))}function kA(u,c,g){var m=0;c&&(m|=4),W6(g,u,m,c)}var g1="_reactListening"+Math.random().toString(36).slice(2);function FA(u){if(!u[g1]){u[g1]=!0,Pk.forEach(function(g){g!=="selectionchange"&&(dW.has(g)||kA(g,!1,u),kA(g,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[g1]||(c[g1]=!0,kA("selectionchange",!1,c))}}function W6(u,c,g,m){switch(bO(c)){case 2:var x=UW;break;case 8:x=IW;break;default:x=YA}g=x.bind(null,c,g,u),x=void 0,!eE||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(c,g,{capture:!0,passive:x}):u.addEventListener(c,g,!0):x!==void 0?u.addEventListener(c,g,{passive:x}):u.addEventListener(c,g,!1)}function OA(u,c,g,m,x){var A=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var k=m.stateNode.containerInfo;if(k===x)break;if(M===4)for(M=m.return;M!==null;){var L=M.tag;if((L===3||L===4)&&M.stateNode.containerInfo===x)return;M=M.return}for(;k!==null;){if(M=Kc(k),M===null)return;if(L=M.tag,L===5||L===6||L===26||L===27){m=A=M;continue e}k=k.parentNode}}m=m.return}nF(function(){var W=A,ie=Kx(g),ae=[];e:{var Q=TF.get(u);if(Q!==void 0){var Z=$m,Be=u;switch(u){case"keypress":if(Cm(g)===0)break e;case"keydown":case"keyup":Z=sV;break;case"focusin":Be="focus",Z=rE;break;case"focusout":Be="blur",Z=rE;break;case"beforeblur":case"afterblur":Z=rE;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=aF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=VX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=lV;break;case CF:case DF:case $F:Z=ZX;break;case MF:Z=fV;break;case"scroll":case"scrollend":Z=YX;break;case"wheel":Z=hV;break;case"copy":case"cut":case"paste":Z=JX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=oF;break;case"toggle":case"beforetoggle":Z=pV}var Re=(c&4)!==0,$t=!Re&&(u==="scroll"||u==="scrollend"),H=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var P=W,X;P!==null;){var re=P;if(X=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||X===null||H===null||(re=Fh(P,H),re!=null&&Re.push(g0(P,re,X))),$t)break;P=P.return}0<Re.length&&(Q=new Z(Q,Be,null,g,ie),ae.push({event:Q,listeners:Re}))}}if((c&7)===0){e:{if(Q=u==="mouseover"||u==="pointerover",Z=u==="mouseout"||u==="pointerout",Q&&g!==Zx&&(Be=g.relatedTarget||g.fromElement)&&(Kc(Be)||Be[Zc]))break e;if((Z||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Be=g.relatedTarget||g.toElement,Z=W,Be=Be?Kc(Be):null,Be!==null&&($t=a(Be),Re=Be.tag,Be!==$t||Re!==5&&Re!==27&&Re!==6)&&(Be=null)):(Z=null,Be=W),Z!==Be)){if(Re=aF,re="onMouseLeave",H="onMouseEnter",P="mouse",(u==="pointerout"||u==="pointerover")&&(Re=oF,re="onPointerLeave",H="onPointerEnter",P="pointer"),$t=Z==null?Q:kh(Z),X=Be==null?Q:kh(Be),Q=new Re(re,P+"leave",Z,g,ie),Q.target=$t,Q.relatedTarget=X,re=null,Kc(ie)===W&&(Re=new Re(H,P+"enter",Be,g,ie),Re.target=X,Re.relatedTarget=$t,re=Re),$t=re,Z&&Be)t:{for(Re=Z,H=Be,P=0,X=Re;X;X=Of(X))P++;for(X=0,re=H;re;re=Of(re))X++;for(;0<P-X;)Re=Of(Re),P--;for(;0<X-P;)H=Of(H),X--;for(;P--;){if(Re===H||H!==null&&Re===H.alternate)break t;Re=Of(Re),H=Of(H)}Re=null}else Re=null;Z!==null&&Q6(ae,Q,Z,Re,!1),Be!==null&&$t!==null&&Q6(ae,$t,Be,Re,!0)}}e:{if(Q=W?kh(W):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var ve=pF;else if(hF(Q))if(mF)ve=wV;else{ve=SV;var We=AV}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&Qx(W.elementType)&&(ve=pF):ve=_V;if(ve&&(ve=ve(u,W))){gF(ae,ve,g,ie);break e}We&&We(u,Q,W),u==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&Wx(Q,"number",Q.value)}switch(We=W?kh(W):window,u){case"focusin":(hF(We)||We.contentEditable==="true")&&(lf=We,cE=W,Ih=null);break;case"focusout":Ih=cE=lf=null;break;case"mousedown":fE=!0;break;case"contextmenu":case"mouseup":case"dragend":fE=!1,_F(ae,g,ie);break;case"selectionchange":if(DV)break;case"keydown":case"keyup":_F(ae,g,ie)}var Ce;if(sE)e:{switch(u){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else uf?fF(u,g)&&(ze="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(ze="onCompositionStart");ze&&(uF&&g.locale!=="ko"&&(uf||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&uf&&(Ce=iF()):(Uo=ie,tE="value"in Uo?Uo.value:Uo.textContent,uf=!0)),We=p1(W,ze),0<We.length&&(ze=new sF(ze,u,null,g,ie),ae.push({event:ze,listeners:We}),Ce?ze.data=Ce:(Ce=dF(g),Ce!==null&&(ze.data=Ce)))),(Ce=yV?vV(u,g):bV(u,g))&&(ze=p1(W,"onBeforeInput"),0<ze.length&&(We=new sF("onBeforeInput","beforeinput",null,g,ie),ae.push({event:We,listeners:ze}),We.data=Ce)),lW(ae,u,W,g,ie)}V6(ae,c)})}function g0(u,c,g){return{instance:u,listener:c,currentTarget:g}}function p1(u,c){for(var g=c+"Capture",m=[];u!==null;){var x=u,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=Fh(u,g),x!=null&&m.unshift(g0(u,x,A)),x=Fh(u,c),x!=null&&m.push(g0(u,x,A))),u.tag===3)return m;u=u.return}return[]}function Of(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Q6(u,c,g,m,x){for(var A=c._reactName,M=[];g!==null&&g!==m;){var k=g,L=k.alternate,W=k.stateNode;if(k=k.tag,L!==null&&L===m)break;k!==5&&k!==26&&k!==27||W===null||(L=W,x?(W=Fh(g,A),W!=null&&M.unshift(g0(g,W,L))):x||(W=Fh(g,A),W!=null&&M.push(g0(g,W,L)))),g=g.return}M.length!==0&&u.push({event:c,listeners:M})}var hW=/\r\n?/g,gW=/\u0000|\uFFFD/g;function Z6(u){return(typeof u=="string"?u:""+u).replace(hW,`
`).replace(gW,"")}function K6(u,c){return c=Z6(c),Z6(u)===c}function m1(){}function Dt(u,c,g,m,x,A){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||af(u,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&af(u,""+m);break;case"className":Em(u,"class",m);break;case"tabIndex":Em(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Em(u,g,m);break;case"style":eF(u,m,A);break;case"data":if(c!=="object"){Em(u,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){u.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=_m(""+m),u.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(g==="formAction"?(c!=="input"&&Dt(u,c,"name",x.name,x,null),Dt(u,c,"formEncType",x.formEncType,x,null),Dt(u,c,"formMethod",x.formMethod,x,null),Dt(u,c,"formTarget",x.formTarget,x,null)):(Dt(u,c,"encType",x.encType,x,null),Dt(u,c,"method",x.method,x,null),Dt(u,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=_m(""+m),u.setAttribute(g,m);break;case"onClick":m!=null&&(u.onclick=m1);break;case"onScroll":m!=null&&Je("scroll",u);break;case"onScrollEnd":m!=null&&Je("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}g=_m(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""+m):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":m===!0?u.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,m):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(g,m):u.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(g):u.setAttribute(g,m);break;case"popover":Je("beforetoggle",u),Je("toggle",u),xm(u,"popover",m);break;case"xlinkActuate":Ns(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ns(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ns(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ns(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ns(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ns(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ns(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ns(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ns(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":xm(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=HX.get(g)||g,xm(u,g,m))}}function NA(u,c,g,m,x,A){switch(g){case"style":eF(u,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof m=="string"?af(u,m):(typeof m=="number"||typeof m=="bigint")&&af(u,""+m);break;case"onScroll":m!=null&&Je("scroll",u);break;case"onScrollEnd":m!=null&&Je("scrollend",u);break;case"onClick":m!=null&&(u.onclick=m1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qk.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),A=u[Ii]||null,A=A!=null?A[g]:null,typeof A=="function"&&u.removeEventListener(c,A,x),typeof m=="function")){typeof A!="function"&&A!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(c,m,x);break e}g in u?u[g]=m:m===!0?u.setAttribute(g,""):xm(u,g,m)}}}function Gn(u,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",u),Je("load",u);var m=!1,x=!1,A;for(A in g)if(g.hasOwnProperty(A)){var M=g[A];if(M!=null)switch(A){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Dt(u,c,A,M,g,null)}}x&&Dt(u,c,"srcSet",g.srcSet,g,null),m&&Dt(u,c,"src",g.src,g,null);return;case"input":Je("invalid",u);var k=A=M=x=null,L=null,W=null;for(m in g)if(g.hasOwnProperty(m)){var ie=g[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":M=ie;break;case"checked":L=ie;break;case"defaultChecked":W=ie;break;case"value":A=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,c));break;default:Dt(u,c,m,ie,g,null)}}Qk(u,A,k,L,W,M,x,!1),Am(u);return;case"select":Je("invalid",u),m=M=A=null;for(x in g)if(g.hasOwnProperty(x)&&(k=g[x],k!=null))switch(x){case"value":A=k;break;case"defaultValue":M=k;break;case"multiple":m=k;default:Dt(u,c,x,k,g,null)}c=A,g=M,u.multiple=!!m,c!=null?rf(u,!!m,c,!1):g!=null&&rf(u,!!m,g,!0);return;case"textarea":Je("invalid",u),A=x=m=null;for(M in g)if(g.hasOwnProperty(M)&&(k=g[M],k!=null))switch(M){case"value":m=k;break;case"defaultValue":x=k;break;case"children":A=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Dt(u,c,M,k,g,null)}Kk(u,m,x,A),Am(u);return;case"option":for(L in g)if(g.hasOwnProperty(L)&&(m=g[L],m!=null))switch(L){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Dt(u,c,L,m,g,null)}return;case"dialog":Je("beforetoggle",u),Je("toggle",u),Je("cancel",u),Je("close",u);break;case"iframe":case"object":Je("load",u);break;case"video":case"audio":for(m=0;m<h0.length;m++)Je(h0[m],u);break;case"image":Je("error",u),Je("load",u);break;case"details":Je("toggle",u);break;case"embed":case"source":case"link":Je("error",u),Je("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in g)if(g.hasOwnProperty(W)&&(m=g[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Dt(u,c,W,m,g,null)}return;default:if(Qx(c)){for(ie in g)g.hasOwnProperty(ie)&&(m=g[ie],m!==void 0&&NA(u,c,ie,m,g,void 0));return}}for(k in g)g.hasOwnProperty(k)&&(m=g[k],m!=null&&Dt(u,c,k,m,g,null))}function pW(u,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,M=null,k=null,L=null,W=null,ie=null;for(Z in g){var ae=g[Z];if(g.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ae;default:m.hasOwnProperty(Z)||Dt(u,c,Z,null,m,ae)}}for(var Q in m){var Z=m[Q];if(ae=g[Q],m.hasOwnProperty(Q)&&(Z!=null||ae!=null))switch(Q){case"type":A=Z;break;case"name":x=Z;break;case"checked":W=Z;break;case"defaultChecked":ie=Z;break;case"value":M=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,c));break;default:Z!==ae&&Dt(u,c,Q,Z,m,ae)}}Vx(u,M,k,L,W,ie,A,x);return;case"select":Z=M=k=Q=null;for(A in g)if(L=g[A],g.hasOwnProperty(A)&&L!=null)switch(A){case"value":break;case"multiple":Z=L;default:m.hasOwnProperty(A)||Dt(u,c,A,null,m,L)}for(x in m)if(A=m[x],L=g[x],m.hasOwnProperty(x)&&(A!=null||L!=null))switch(x){case"value":Q=A;break;case"defaultValue":k=A;break;case"multiple":M=A;default:A!==L&&Dt(u,c,x,A,m,L)}c=k,g=M,m=Z,Q!=null?rf(u,!!g,Q,!1):!!m!=!!g&&(c!=null?rf(u,!!g,c,!0):rf(u,!!g,g?[]:"",!1));return;case"textarea":Z=Q=null;for(k in g)if(x=g[k],g.hasOwnProperty(k)&&x!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Dt(u,c,k,null,m,x)}for(M in m)if(x=m[M],A=g[M],m.hasOwnProperty(M)&&(x!=null||A!=null))switch(M){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==A&&Dt(u,c,M,x,m,A)}Zk(u,Q,Z);return;case"option":for(var Be in g)if(Q=g[Be],g.hasOwnProperty(Be)&&Q!=null&&!m.hasOwnProperty(Be))switch(Be){case"selected":u.selected=!1;break;default:Dt(u,c,Be,null,m,Q)}for(L in m)if(Q=m[L],Z=g[L],m.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":u.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Dt(u,c,L,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in g)Q=g[Re],g.hasOwnProperty(Re)&&Q!=null&&!m.hasOwnProperty(Re)&&Dt(u,c,Re,null,m,Q);for(W in m)if(Q=m[W],Z=g[W],m.hasOwnProperty(W)&&Q!==Z&&(Q!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:Dt(u,c,W,Q,m,Z)}return;default:if(Qx(c)){for(var $t in g)Q=g[$t],g.hasOwnProperty($t)&&Q!==void 0&&!m.hasOwnProperty($t)&&NA(u,c,$t,void 0,m,Q);for(ie in m)Q=m[ie],Z=g[ie],!m.hasOwnProperty(ie)||Q===Z||Q===void 0&&Z===void 0||NA(u,c,ie,Q,m,Z);return}}for(var H in g)Q=g[H],g.hasOwnProperty(H)&&Q!=null&&!m.hasOwnProperty(H)&&Dt(u,c,H,null,m,Q);for(ae in m)Q=m[ae],Z=g[ae],!m.hasOwnProperty(ae)||Q===Z||Q==null&&Z==null||Dt(u,c,ae,Q,m,Z)}var RA=null,zA=null;function y1(u){return u.nodeType===9?u:u.ownerDocument}function J6(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eO(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function BA(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var LA=null;function mW(){var u=window.event;return u&&u.type==="popstate"?u===LA?!1:(LA=u,!0):(LA=null,!1)}var tO=typeof setTimeout=="function"?setTimeout:void 0,yW=typeof clearTimeout=="function"?clearTimeout:void 0,nO=typeof Promise=="function"?Promise:void 0,vW=typeof queueMicrotask=="function"?queueMicrotask:typeof nO<"u"?function(u){return nO.resolve(null).then(u).catch(bW)}:tO;function bW(u){setTimeout(function(){throw u})}function tu(u){return u==="head"}function iO(u,c){var g=c,m=0,x=0;do{var A=g.nextSibling;if(u.removeChild(g),A&&A.nodeType===8)if(g=A.data,g==="/$"){if(0<m&&8>m){g=m;var M=u.ownerDocument;if(g&1&&p0(M.documentElement),g&2&&p0(M.body),g&4)for(g=M.head,p0(g),M=g.firstChild;M;){var k=M.nextSibling,L=M.nodeName;M[Th]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&M.rel.toLowerCase()==="stylesheet"||g.removeChild(M),M=k}}if(x===0){u.removeChild(A),S0(c);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=A}while(g);S0(c)}function UA(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":UA(g),Hx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function xW(u,c,g,m){for(;u.nodeType===1;){var x=g;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[Th])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(A=u.getAttribute("rel"),A==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(A!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(A=u.getAttribute("src"),(A!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===A)return u}else return u;if(u=ua(u.nextSibling),u===null)break}return null}function EW(u,c,g){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=ua(u.nextSibling),u===null))return null;return u}function IA(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function AW(u,c){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function ua(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}var jA=null;function rO(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return u;c--}else g==="/$"&&c++}u=u.previousSibling}return null}function aO(u,c,g){switch(c=y1(g),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function p0(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);Hx(u)}var Ur=new Map,sO=new Set;function v1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Vs=q.d;q.d={f:SW,r:_W,D:wW,C:CW,L:DW,m:$W,X:TW,S:MW,M:kW};function SW(){var u=Vs.f(),c=l1();return u||c}function _W(u){var c=Jc(u);c!==null&&c.tag===5&&c.type==="form"?C5(c):Vs.r(u)}var Nf=typeof document>"u"?null:document;function oO(u,c,g){var m=Nf;if(m&&typeof c=="string"&&c){var x=Fr(c);x='link[rel="'+u+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),sO.has(x)||(sO.add(x),u={rel:u,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),Gn(c,"link",u),Dn(c),m.head.appendChild(c)))}}function wW(u){Vs.D(u),oO("dns-prefetch",u,null)}function CW(u,c){Vs.C(u,c),oO("preconnect",u,c)}function DW(u,c,g){Vs.L(u,c,g);var m=Nf;if(m&&u&&c){var x='link[rel="preload"][as="'+Fr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+Fr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+Fr(g.imageSizes)+'"]')):x+='[href="'+Fr(u)+'"]';var A=x;switch(c){case"style":A=Rf(u);break;case"script":A=zf(u)}Ur.has(A)||(u=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:u,as:c},g),Ur.set(A,u),m.querySelector(x)!==null||c==="style"&&m.querySelector(m0(A))||c==="script"&&m.querySelector(y0(A))||(c=m.createElement("link"),Gn(c,"link",u),Dn(c),m.head.appendChild(c)))}}function $W(u,c){Vs.m(u,c);var g=Nf;if(g&&u){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Fr(m)+'"][href="'+Fr(u)+'"]',A=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=zf(u)}if(!Ur.has(A)&&(u=d({rel:"modulepreload",href:u},c),Ur.set(A,u),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(y0(A)))return}m=g.createElement("link"),Gn(m,"link",u),Dn(m),g.head.appendChild(m)}}}function MW(u,c,g){Vs.S(u,c,g);var m=Nf;if(m&&u){var x=ef(m).hoistableStyles,A=Rf(u);c=c||"default";var M=x.get(A);if(!M){var k={loading:0,preload:null};if(M=m.querySelector(m0(A)))k.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":c},g),(g=Ur.get(A))&&PA(u,g);var L=M=m.createElement("link");Dn(L),Gn(L,"link",u),L._p=new Promise(function(W,ie){L.onload=W,L.onerror=ie}),L.addEventListener("load",function(){k.loading|=1}),L.addEventListener("error",function(){k.loading|=2}),k.loading|=4,b1(M,c,m)}M={type:"stylesheet",instance:M,count:1,state:k},x.set(A,M)}}}function TW(u,c){Vs.X(u,c);var g=Nf;if(g&&u){var m=ef(g).hoistableScripts,x=zf(u),A=m.get(x);A||(A=g.querySelector(y0(x)),A||(u=d({src:u,async:!0},c),(c=Ur.get(x))&&qA(u,c),A=g.createElement("script"),Dn(A),Gn(A,"link",u),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function kW(u,c){Vs.M(u,c);var g=Nf;if(g&&u){var m=ef(g).hoistableScripts,x=zf(u),A=m.get(x);A||(A=g.querySelector(y0(x)),A||(u=d({src:u,async:!0,type:"module"},c),(c=Ur.get(x))&&qA(u,c),A=g.createElement("script"),Dn(A),Gn(A,"link",u),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function uO(u,c,g,m){var x=(x=De.current)?v1(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=Rf(g.href),g=ef(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=Rf(g.href);var A=ef(x).hoistableStyles,M=A.get(u);if(M||(x=x.ownerDocument||x,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(u,M),(A=x.querySelector(m0(u)))&&!A._p&&(M.instance=A,M.state.loading=5),Ur.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ur.set(u,g),A||FW(x,u,g,M.state))),c&&m===null)throw Error(i(528,""));return M}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=zf(g),g=ef(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function Rf(u){return'href="'+Fr(u)+'"'}function m0(u){return'link[rel="stylesheet"]['+u+"]"}function lO(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function FW(u,c,g,m){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=u.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Gn(c,"link",g),Dn(c),u.head.appendChild(c))}function zf(u){return'[src="'+Fr(u)+'"]'}function y0(u){return"script[async]"+u}function cO(u,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=u.querySelector('style[data-href~="'+Fr(g.href)+'"]');if(m)return c.instance=m,Dn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),Dn(m),Gn(m,"style",x),b1(m,g.precedence,u),c.instance=m;case"stylesheet":x=Rf(g.href);var A=u.querySelector(m0(x));if(A)return c.state.loading|=4,c.instance=A,Dn(A),A;m=lO(g),(x=Ur.get(x))&&PA(m,x),A=(u.ownerDocument||u).createElement("link"),Dn(A);var M=A;return M._p=new Promise(function(k,L){M.onload=k,M.onerror=L}),Gn(A,"link",m),c.state.loading|=4,b1(A,g.precedence,u),c.instance=A;case"script":return A=zf(g.src),(x=u.querySelector(y0(A)))?(c.instance=x,Dn(x),x):(m=g,(x=Ur.get(A))&&(m=d({},g),qA(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),Dn(x),Gn(x,"link",m),u.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,b1(m,g.precedence,u));return c.instance}function b1(u,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,A=x,M=0;M<m.length;M++){var k=m[M];if(k.dataset.precedence===c)A=k;else if(A!==x)break}A?A.parentNode.insertBefore(u,A.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(u,c.firstChild))}function PA(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function qA(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var x1=null;function fO(u,c,g){if(x1===null){var m=new Map,x=x1=new Map;x.set(g,m)}else x=x1,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(u))return m;for(m.set(u,null),g=g.getElementsByTagName(u),x=0;x<g.length;x++){var A=g[x];if(!(A[Th]||A[ni]||u==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var M=A.getAttribute(c)||"";M=u+M;var k=m.get(M);k?k.push(A):m.set(M,[A])}}return m}function dO(u,c,g){u=u.ownerDocument||u,u.head.insertBefore(g,c==="title"?u.querySelector("head > title"):null)}function OW(u,c,g){if(g===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function hO(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var v0=null;function NW(){}function RW(u,c,g){if(v0===null)throw Error(i(475));var m=v0;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Rf(g.href),A=u.querySelector(m0(x));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=E1.bind(m),u.then(m,m)),c.state.loading|=4,c.instance=A,Dn(A);return}A=u.ownerDocument||u,g=lO(g),(x=Ur.get(x))&&PA(g,x),A=A.createElement("link"),Dn(A);var M=A;M._p=new Promise(function(k,L){M.onload=k,M.onerror=L}),Gn(A,"link",g),c.instance=A}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=E1.bind(m),u.addEventListener("load",c),u.addEventListener("error",c))}}function zW(){if(v0===null)throw Error(i(475));var u=v0;return u.stylesheets&&u.count===0&&HA(u,u.stylesheets),0<u.count?function(c){var g=setTimeout(function(){if(u.stylesheets&&HA(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(g)}}:null}function E1(){if(this.count--,this.count===0){if(this.stylesheets)HA(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var A1=null;function HA(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,A1=new Map,c.forEach(BW,u),A1=null,E1.call(u))}function BW(u,c){if(!(c.state.loading&4)){var g=A1.get(u);if(g)var m=g.get(null);else{g=new Map,A1.set(u,g);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var M=x[A];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(g.set(M.dataset.precedence,M),m=M)}m&&g.set(null,m)}x=c.instance,M=x.getAttribute("data-precedence"),A=g.get(M)||m,A===m&&g.set(null,x),g.set(M,x),this.count++,m=E1.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),A?A.parentNode.insertBefore(x,A.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),c.state.loading|=4}}var b0={$$typeof:w,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function LW(u,c,g,m,x,A,M,k){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ix(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.hiddenUpdates=Ix(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function gO(u,c,g,m,x,A,M,k,L,W,ie,ae){return u=new LW(u,c,g,M,k,L,W,ae),c=1,A===!0&&(c|=24),A=cr(3,null,null,c),u.current=A,A.stateNode=u,c=wE(),c.refCount++,u.pooledCache=c,c.refCount++,A.memoizedState={element:m,isDehydrated:g,cache:c},ME(A),u}function pO(u){return u?(u=hf,u):hf}function mO(u,c,g,m,x,A){x=pO(x),m.context===null?m.context=x:m.pendingContext=x,m=Po(c),m.payload={element:g},A=A===void 0?null:A,A!==null&&(m.callback=A),g=qo(u,m,c),g!==null&&(pr(g,u,c),Wh(g,u,c))}function yO(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function GA(u,c){yO(u,c),(u=u.alternate)&&yO(u,c)}function vO(u){if(u.tag===13){var c=df(u,67108864);c!==null&&pr(c,u,67108864),GA(u,67108864)}}var S1=!0;function UW(u,c,g,m){var x=N.T;N.T=null;var A=q.p;try{q.p=2,YA(u,c,g,m)}finally{q.p=A,N.T=x}}function IW(u,c,g,m){var x=N.T;N.T=null;var A=q.p;try{q.p=8,YA(u,c,g,m)}finally{q.p=A,N.T=x}}function YA(u,c,g,m){if(S1){var x=XA(m);if(x===null)OA(u,c,m,_1,g),xO(u,m);else if(PW(x,u,c,g,m))m.stopPropagation();else if(xO(u,m),c&4&&-1<jW.indexOf(u)){for(;x!==null;){var A=Jc(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var M=ul(A.pendingLanes);if(M!==0){var k=A;for(k.pendingLanes|=2,k.entangledLanes|=2;M;){var L=1<<31-ur(M);k.entanglements[1]|=L,M&=~L}Ga(A),(xt&6)===0&&(o1=fn()+500,d0(0))}}break;case 13:k=df(A,2),k!==null&&pr(k,A,2),l1(),GA(A,2)}if(A=XA(m),A===null&&OA(u,c,m,_1,g),A===x)break;x=A}x!==null&&m.stopPropagation()}else OA(u,c,m,null,g)}}function XA(u){return u=Kx(u),VA(u)}var _1=null;function VA(u){if(_1=null,u=Kc(u),u!==null){var c=a(u);if(c===null)u=null;else{var g=c.tag;if(g===13){if(u=s(c),u!==null)return u;u=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return _1=u,null}function bO(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pm()){case Ok:return 2;case Nk:return 8;case mm:case DX:return 32;case Rk:return 268435456;default:return 32}default:return 32}}var WA=!1,nu=null,iu=null,ru=null,x0=new Map,E0=new Map,au=[],jW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xO(u,c){switch(u){case"focusin":case"focusout":nu=null;break;case"dragenter":case"dragleave":iu=null;break;case"mouseover":case"mouseout":ru=null;break;case"pointerover":case"pointerout":x0.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":E0.delete(c.pointerId)}}function A0(u,c,g,m,x,A){return u===null||u.nativeEvent!==A?(u={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:A,targetContainers:[x]},c!==null&&(c=Jc(c),c!==null&&vO(c)),u):(u.eventSystemFlags|=m,c=u.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),u)}function PW(u,c,g,m,x){switch(c){case"focusin":return nu=A0(nu,u,c,g,m,x),!0;case"dragenter":return iu=A0(iu,u,c,g,m,x),!0;case"mouseover":return ru=A0(ru,u,c,g,m,x),!0;case"pointerover":var A=x.pointerId;return x0.set(A,A0(x0.get(A)||null,u,c,g,m,x)),!0;case"gotpointercapture":return A=x.pointerId,E0.set(A,A0(E0.get(A)||null,u,c,g,m,x)),!0}return!1}function EO(u){var c=Kc(u.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){u.blockedOn=c,RX(u.priority,function(){if(g.tag===13){var m=gr();m=jx(m);var x=df(g,m);x!==null&&pr(x,g,m),GA(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function w1(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var g=XA(u.nativeEvent);if(g===null){g=u.nativeEvent;var m=new g.constructor(g.type,g);Zx=m,g.target.dispatchEvent(m),Zx=null}else return c=Jc(g),c!==null&&vO(c),u.blockedOn=g,!1;c.shift()}return!0}function AO(u,c,g){w1(u)&&g.delete(c)}function qW(){WA=!1,nu!==null&&w1(nu)&&(nu=null),iu!==null&&w1(iu)&&(iu=null),ru!==null&&w1(ru)&&(ru=null),x0.forEach(AO),E0.forEach(AO)}function C1(u,c){u.blockedOn===c&&(u.blockedOn=null,WA||(WA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qW)))}var D1=null;function SO(u){D1!==u&&(D1=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){D1===u&&(D1=null);for(var c=0;c<u.length;c+=3){var g=u[c],m=u[c+1],x=u[c+2];if(typeof m!="function"){if(VA(m||g)===null)continue;break}var A=Jc(g);A!==null&&(u.splice(c,3),c-=3,VE(A,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function S0(u){function c(L){return C1(L,u)}nu!==null&&C1(nu,u),iu!==null&&C1(iu,u),ru!==null&&C1(ru,u),x0.forEach(c),E0.forEach(c);for(var g=0;g<au.length;g++){var m=au[g];m.blockedOn===u&&(m.blockedOn=null)}for(;0<au.length&&(g=au[0],g.blockedOn===null);)EO(g),g.blockedOn===null&&au.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],A=g[m+1],M=x[Ii]||null;if(typeof A=="function")M||SO(g);else if(M){var k=null;if(A&&A.hasAttribute("formAction")){if(x=A,M=A[Ii]||null)k=M.formAction;else if(VA(x)!==null)continue}else k=M.action;typeof k=="function"?g[m+1]=k:(g.splice(m,3),m-=3),SO(g)}}}function QA(u){this._internalRoot=u}$1.prototype.render=QA.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=gr();mO(g,m,u,c,null,null)},$1.prototype.unmount=QA.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;mO(u.current,2,null,u,null,null),l1(),c[Zc]=null}};function $1(u){this._internalRoot=u}$1.prototype.unstable_scheduleHydration=function(u){if(u){var c=Ik();u={blockedOn:null,target:u,priority:c};for(var g=0;g<au.length&&c!==0&&c<au[g].priority;g++);au.splice(g,0,u),g===0&&EO(u)}};var _O=t.version;if(_O!=="19.1.0")throw Error(i(527,_O,"19.1.0"));q.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(c),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var HW={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var M1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!M1.isDisabled&&M1.supportsFiber)try{Dh=M1.inject(HW),or=M1}catch{}}return w0.createRoot=function(u,c){if(!r(u))throw Error(i(299));var g=!1,m="",x=I5,A=j5,M=P5,k=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(k=c.unstable_transitionCallbacks)),c=gO(u,1,!1,null,null,g,m,x,A,M,k,null),u[Zc]=c.current,FA(u),new QA(c)},w0.hydrateRoot=function(u,c,g){if(!r(u))throw Error(i(299));var m=!1,x="",A=I5,M=j5,k=P5,L=null,W=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(A=g.onUncaughtError),g.onCaughtError!==void 0&&(M=g.onCaughtError),g.onRecoverableError!==void 0&&(k=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(L=g.unstable_transitionCallbacks),g.formState!==void 0&&(W=g.formState)),c=gO(u,1,!0,c,g??null,m,x,A,M,k,L,W),c.context=pO(null),g=c.current,m=gr(),m=jx(m),x=Po(m),x.callback=null,qo(g,x,m),g=m,c.current.lanes=g,Mh(c,g),Ga(c),u[Zc]=c.current,FA(u),new $1(c)},w0.version="19.1.0",w0}var NO;function tQ(){if(NO)return JA.exports;NO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),JA.exports=eQ(),JA.exports}var nQ=tQ();const Zf=[{id:1,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[{firstName:"Jon",lastName:"Smith",timestamp:"2023-01-01T12:00:00Z"}]},{id:2,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[]},{id:3,firstName:"John",lastName:"Smoth",postcode:"SW1A 0AB",DoB:"1990-01-02",history:[]},{id:4,firstName:"John",lastName:"Smit",postcode:"SW1A 0AC",DoB:"1990-01-03",history:[]}];var iS={exports:{}},RO;function iQ(){return RO||(RO=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,r=0;t.Diff=function(a,s){return[a,s]},t.prototype.diff_main=function(a,s,o,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var f=l;if(a==null||s==null)throw new Error("Null input. (diff_main)");if(a==s)return a?[new t.Diff(r,a)]:[];typeof o>"u"&&(o=!0);var d=o,h=this.diff_commonPrefix(a,s),p=a.substring(0,h);a=a.substring(h),s=s.substring(h),h=this.diff_commonSuffix(a,s);var y=a.substring(a.length-h);a=a.substring(0,a.length-h),s=s.substring(0,s.length-h);var v=this.diff_compute_(a,s,d,f);return p&&v.unshift(new t.Diff(r,p)),y&&v.push(new t.Diff(r,y)),this.diff_cleanupMerge(v),v},t.prototype.diff_compute_=function(a,s,o,l){var f;if(!a)return[new t.Diff(i,s)];if(!s)return[new t.Diff(n,a)];var d=a.length>s.length?a:s,h=a.length>s.length?s:a,p=d.indexOf(h);if(p!=-1)return f=[new t.Diff(i,d.substring(0,p)),new t.Diff(r,h),new t.Diff(i,d.substring(p+h.length))],a.length>s.length&&(f[0][0]=f[2][0]=n),f;if(h.length==1)return[new t.Diff(n,a),new t.Diff(i,s)];var y=this.diff_halfMatch_(a,s);if(y){var v=y[0],b=y[1],E=y[2],S=y[3],_=y[4],w=this.diff_main(v,E,o,l),C=this.diff_main(b,S,o,l);return w.concat([new t.Diff(r,_)],C)}return o&&a.length>100&&s.length>100?this.diff_lineMode_(a,s,l):this.diff_bisect_(a,s,l)},t.prototype.diff_lineMode_=function(a,s,o){var l=this.diff_linesToChars_(a,s);a=l.chars1,s=l.chars2;var f=l.lineArray,d=this.diff_main(a,s,!1,o);this.diff_charsToLines_(d,f),this.diff_cleanupSemantic(d),d.push(new t.Diff(r,""));for(var h=0,p=0,y=0,v="",b="";h<d.length;){switch(d[h][0]){case i:y++,b+=d[h][1];break;case n:p++,v+=d[h][1];break;case r:if(p>=1&&y>=1){d.splice(h-p-y,p+y),h=h-p-y;for(var E=this.diff_main(v,b,!1,o),S=E.length-1;S>=0;S--)d.splice(h,0,E[S]);h=h+E.length}y=0,p=0,v="",b="";break}h++}return d.pop(),d},t.prototype.diff_bisect_=function(a,s,o){for(var l=a.length,f=s.length,d=Math.ceil((l+f)/2),h=d,p=2*d,y=new Array(p),v=new Array(p),b=0;b<p;b++)y[b]=-1,v[b]=-1;y[h+1]=0,v[h+1]=0;for(var E=l-f,S=E%2!=0,_=0,w=0,C=0,$=0,T=0;T<d&&!(new Date().getTime()>o);T++){for(var D=-T+_;D<=T-w;D+=2){var F=h+D,O;D==-T||D!=T&&y[F-1]<y[F+1]?O=y[F+1]:O=y[F-1]+1;for(var U=O-D;O<l&&U<f&&a.charAt(O)==s.charAt(U);)O++,U++;if(y[F]=O,O>l)w+=2;else if(U>f)_+=2;else if(S){var z=h+E-D;if(z>=0&&z<p&&v[z]!=-1){var G=l-v[z];if(O>=G)return this.diff_bisectSplit_(a,s,O,U,o)}}}for(var B=-T+C;B<=T-$;B+=2){var z=h+B,G;B==-T||B!=T&&v[z-1]<v[z+1]?G=v[z+1]:G=v[z-1]+1;for(var j=G-B;G<l&&j<f&&a.charAt(l-G-1)==s.charAt(f-j-1);)G++,j++;if(v[z]=G,G>l)$+=2;else if(j>f)C+=2;else if(!S){var F=h+E-B;if(F>=0&&F<p&&y[F]!=-1){var O=y[F],U=h+O-F;if(G=l-G,O>=G)return this.diff_bisectSplit_(a,s,O,U,o)}}}}return[new t.Diff(n,a),new t.Diff(i,s)]},t.prototype.diff_bisectSplit_=function(a,s,o,l,f){var d=a.substring(0,o),h=s.substring(0,l),p=a.substring(o),y=s.substring(l),v=this.diff_main(d,h,!1,f),b=this.diff_main(p,y,!1,f);return v.concat(b)},t.prototype.diff_linesToChars_=function(a,s){var o=[],l={};o[0]="";function f(y){for(var v="",b=0,E=-1,S=o.length;E<y.length-1;){E=y.indexOf(`
`,b),E==-1&&(E=y.length-1);var _=y.substring(b,E+1);(l.hasOwnProperty?l.hasOwnProperty(_):l[_]!==void 0)?v+=String.fromCharCode(l[_]):(S==d&&(_=y.substring(b),E=y.length),v+=String.fromCharCode(S),l[_]=S,o[S++]=_),b=E+1}return v}var d=4e4,h=f(a);d=65535;var p=f(s);return{chars1:h,chars2:p,lineArray:o}},t.prototype.diff_charsToLines_=function(a,s){for(var o=0;o<a.length;o++){for(var l=a[o][1],f=[],d=0;d<l.length;d++)f[d]=s[l.charCodeAt(d)];a[o][1]=f.join("")}},t.prototype.diff_commonPrefix=function(a,s){if(!a||!s||a.charAt(0)!=s.charAt(0))return 0;for(var o=0,l=Math.min(a.length,s.length),f=l,d=0;o<f;)a.substring(d,f)==s.substring(d,f)?(o=f,d=o):l=f,f=Math.floor((l-o)/2+o);return f},t.prototype.diff_commonSuffix=function(a,s){if(!a||!s||a.charAt(a.length-1)!=s.charAt(s.length-1))return 0;for(var o=0,l=Math.min(a.length,s.length),f=l,d=0;o<f;)a.substring(a.length-f,a.length-d)==s.substring(s.length-f,s.length-d)?(o=f,d=o):l=f,f=Math.floor((l-o)/2+o);return f},t.prototype.diff_commonOverlap_=function(a,s){var o=a.length,l=s.length;if(o==0||l==0)return 0;o>l?a=a.substring(o-l):o<l&&(s=s.substring(0,o));var f=Math.min(o,l);if(a==s)return f;for(var d=0,h=1;;){var p=a.substring(f-h),y=s.indexOf(p);if(y==-1)return d;h+=y,(y==0||a.substring(f-h)==s.substring(0,h))&&(d=h,h++)}},t.prototype.diff_halfMatch_=function(a,s){if(this.Diff_Timeout<=0)return null;var o=a.length>s.length?a:s,l=a.length>s.length?s:a;if(o.length<4||l.length*2<o.length)return null;var f=this;function d(w,C,$){for(var T=w.substring($,$+Math.floor(w.length/4)),D=-1,F="",O,U,z,G;(D=C.indexOf(T,D+1))!=-1;){var B=f.diff_commonPrefix(w.substring($),C.substring(D)),j=f.diff_commonSuffix(w.substring(0,$),C.substring(0,D));F.length<j+B&&(F=C.substring(D-j,D)+C.substring(D,D+B),O=w.substring(0,$-j),U=w.substring($+B),z=C.substring(0,D-j),G=C.substring(D+B))}return F.length*2>=w.length?[O,U,z,G,F]:null}var h=d(o,l,Math.ceil(o.length/4)),p=d(o,l,Math.ceil(o.length/2)),y;if(!h&&!p)return null;p?h?y=h[4].length>p[4].length?h:p:y=p:y=h;var v,b,E,S;a.length>s.length?(v=y[0],b=y[1],E=y[2],S=y[3]):(E=y[0],S=y[1],v=y[2],b=y[3]);var _=y[4];return[v,b,E,S,_]},t.prototype.diff_cleanupSemantic=function(a){for(var s=!1,o=[],l=0,f=null,d=0,h=0,p=0,y=0,v=0;d<a.length;)a[d][0]==r?(o[l++]=d,h=y,p=v,y=0,v=0,f=a[d][1]):(a[d][0]==i?y+=a[d][1].length:v+=a[d][1].length,f&&f.length<=Math.max(h,p)&&f.length<=Math.max(y,v)&&(a.splice(o[l-1],0,new t.Diff(n,f)),a[o[l-1]+1][0]=i,l--,l--,d=l>0?o[l-1]:-1,h=0,p=0,y=0,v=0,f=null,s=!0)),d++;for(s&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),d=1;d<a.length;){if(a[d-1][0]==n&&a[d][0]==i){var b=a[d-1][1],E=a[d][1],S=this.diff_commonOverlap_(b,E),_=this.diff_commonOverlap_(E,b);S>=_?(S>=b.length/2||S>=E.length/2)&&(a.splice(d,0,new t.Diff(r,E.substring(0,S))),a[d-1][1]=b.substring(0,b.length-S),a[d+1][1]=E.substring(S),d++):(_>=b.length/2||_>=E.length/2)&&(a.splice(d,0,new t.Diff(r,b.substring(0,_))),a[d-1][0]=i,a[d-1][1]=E.substring(0,E.length-_),a[d+1][0]=n,a[d+1][1]=b.substring(_),d++),d++}d++}},t.prototype.diff_cleanupSemanticLossless=function(a){function s(_,w){if(!_||!w)return 6;var C=_.charAt(_.length-1),$=w.charAt(0),T=C.match(t.nonAlphaNumericRegex_),D=$.match(t.nonAlphaNumericRegex_),F=T&&C.match(t.whitespaceRegex_),O=D&&$.match(t.whitespaceRegex_),U=F&&C.match(t.linebreakRegex_),z=O&&$.match(t.linebreakRegex_),G=U&&_.match(t.blanklineEndRegex_),B=z&&w.match(t.blanklineStartRegex_);return G||B?5:U||z?4:T&&!F&&O?3:F||O?2:T||D?1:0}for(var o=1;o<a.length-1;){if(a[o-1][0]==r&&a[o+1][0]==r){var l=a[o-1][1],f=a[o][1],d=a[o+1][1],h=this.diff_commonSuffix(l,f);if(h){var p=f.substring(f.length-h);l=l.substring(0,l.length-h),f=p+f.substring(0,f.length-h),d=p+d}for(var y=l,v=f,b=d,E=s(l,f)+s(f,d);f.charAt(0)===d.charAt(0);){l+=f.charAt(0),f=f.substring(1)+d.charAt(0),d=d.substring(1);var S=s(l,f)+s(f,d);S>=E&&(E=S,y=l,v=f,b=d)}a[o-1][1]!=y&&(y?a[o-1][1]=y:(a.splice(o-1,1),o--),a[o][1]=v,b?a[o+1][1]=b:(a.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(a){for(var s=!1,o=[],l=0,f=null,d=0,h=!1,p=!1,y=!1,v=!1;d<a.length;)a[d][0]==r?(a[d][1].length<this.Diff_EditCost&&(y||v)?(o[l++]=d,h=y,p=v,f=a[d][1]):(l=0,f=null),y=v=!1):(a[d][0]==n?v=!0:y=!0,f&&(h&&p&&y&&v||f.length<this.Diff_EditCost/2&&h+p+y+v==3)&&(a.splice(o[l-1],0,new t.Diff(n,f)),a[o[l-1]+1][0]=i,l--,f=null,h&&p?(y=v=!0,l=0):(l--,d=l>0?o[l-1]:-1,y=v=!1),s=!0)),d++;s&&this.diff_cleanupMerge(a)},t.prototype.diff_cleanupMerge=function(a){a.push(new t.Diff(r,""));for(var s=0,o=0,l=0,f="",d="",h;s<a.length;)switch(a[s][0]){case i:l++,d+=a[s][1],s++;break;case n:o++,f+=a[s][1],s++;break;case r:o+l>1?(o!==0&&l!==0&&(h=this.diff_commonPrefix(d,f),h!==0&&(s-o-l>0&&a[s-o-l-1][0]==r?a[s-o-l-1][1]+=d.substring(0,h):(a.splice(0,0,new t.Diff(r,d.substring(0,h))),s++),d=d.substring(h),f=f.substring(h)),h=this.diff_commonSuffix(d,f),h!==0&&(a[s][1]=d.substring(d.length-h)+a[s][1],d=d.substring(0,d.length-h),f=f.substring(0,f.length-h))),s-=o+l,a.splice(s,o+l),f.length&&(a.splice(s,0,new t.Diff(n,f)),s++),d.length&&(a.splice(s,0,new t.Diff(i,d)),s++),s++):s!==0&&a[s-1][0]==r?(a[s-1][1]+=a[s][1],a.splice(s,1)):s++,l=0,o=0,f="",d="";break}a[a.length-1][1]===""&&a.pop();var p=!1;for(s=1;s<a.length-1;)a[s-1][0]==r&&a[s+1][0]==r&&(a[s][1].substring(a[s][1].length-a[s-1][1].length)==a[s-1][1]?(a[s][1]=a[s-1][1]+a[s][1].substring(0,a[s][1].length-a[s-1][1].length),a[s+1][1]=a[s-1][1]+a[s+1][1],a.splice(s-1,1),p=!0):a[s][1].substring(0,a[s+1][1].length)==a[s+1][1]&&(a[s-1][1]+=a[s+1][1],a[s][1]=a[s][1].substring(a[s+1][1].length)+a[s+1][1],a.splice(s+1,1),p=!0)),s++;p&&this.diff_cleanupMerge(a)},t.prototype.diff_xIndex=function(a,s){var o=0,l=0,f=0,d=0,h;for(h=0;h<a.length&&(a[h][0]!==i&&(o+=a[h][1].length),a[h][0]!==n&&(l+=a[h][1].length),!(o>s));h++)f=o,d=l;return a.length!=h&&a[h][0]===n?d:d+(s-f)},t.prototype.diff_prettyHtml=function(a){for(var s=[],o=/&/g,l=/</g,f=/>/g,d=/\n/g,h=0;h<a.length;h++){var p=a[h][0],y=a[h][1],v=y.replace(o,"&amp;").replace(l,"&lt;").replace(f,"&gt;").replace(d,"&para;<br>");switch(p){case i:s[h]='<ins style="background:#e6ffe6;">'+v+"</ins>";break;case n:s[h]='<del style="background:#ffe6e6;">'+v+"</del>";break;case r:s[h]="<span>"+v+"</span>";break}}return s.join("")},t.prototype.diff_text1=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==i&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_text2=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==n&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_levenshtein=function(a){for(var s=0,o=0,l=0,f=0;f<a.length;f++){var d=a[f][0],h=a[f][1];switch(d){case i:o+=h.length;break;case n:l+=h.length;break;case r:s+=Math.max(o,l),o=0,l=0;break}}return s+=Math.max(o,l),s},t.prototype.diff_toDelta=function(a){for(var s=[],o=0;o<a.length;o++)switch(a[o][0]){case i:s[o]="+"+encodeURI(a[o][1]);break;case n:s[o]="-"+a[o][1].length;break;case r:s[o]="="+a[o][1].length;break}return s.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(a,s){for(var o=[],l=0,f=0,d=s.split(/\t/g),h=0;h<d.length;h++){var p=d[h].substring(1);switch(d[h].charAt(0)){case"+":try{o[l++]=new t.Diff(i,decodeURI(p))}catch{throw new Error("Illegal escape in diff_fromDelta: "+p)}break;case"-":case"=":var y=parseInt(p,10);if(isNaN(y)||y<0)throw new Error("Invalid number in diff_fromDelta: "+p);var v=a.substring(f,f+=y);d[h].charAt(0)=="="?o[l++]=new t.Diff(r,v):o[l++]=new t.Diff(n,v);break;default:if(d[h])throw new Error("Invalid diff operation in diff_fromDelta: "+d[h])}}if(f!=a.length)throw new Error("Delta length ("+f+") does not equal source text length ("+a.length+").");return o},t.prototype.match_main=function(a,s,o){if(a==null||s==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,a.length)),a==s?0:a.length?a.substring(o,o+s.length)==s?o:this.match_bitap_(a,s,o):-1},t.prototype.match_bitap_=function(a,s,o){if(s.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(s),f=this;function d(O,U){var z=O/s.length,G=Math.abs(o-U);return f.Match_Distance?z+G/f.Match_Distance:G?1:z}var h=this.Match_Threshold,p=a.indexOf(s,o);p!=-1&&(h=Math.min(d(0,p),h),p=a.lastIndexOf(s,o+s.length),p!=-1&&(h=Math.min(d(0,p),h)));var y=1<<s.length-1;p=-1;for(var v,b,E=s.length+a.length,S,_=0;_<s.length;_++){for(v=0,b=E;v<b;)d(_,o+b)<=h?v=b:E=b,b=Math.floor((E-v)/2+v);E=b;var w=Math.max(1,o-b+1),C=Math.min(o+b,a.length)+s.length,$=Array(C+2);$[C+1]=(1<<_)-1;for(var T=C;T>=w;T--){var D=l[a.charAt(T-1)];if(_===0?$[T]=($[T+1]<<1|1)&D:$[T]=($[T+1]<<1|1)&D|((S[T+1]|S[T])<<1|1)|S[T+1],$[T]&y){var F=d(_,T-1);if(F<=h)if(h=F,p=T-1,p>o)w=Math.max(1,2*o-p);else break}}if(d(_+1,o)>h)break;S=$}return p},t.prototype.match_alphabet_=function(a){for(var s={},o=0;o<a.length;o++)s[a.charAt(o)]=0;for(var o=0;o<a.length;o++)s[a.charAt(o)]|=1<<a.length-o-1;return s},t.prototype.patch_addContext_=function(a,s){if(s.length!=0){if(a.start2===null)throw Error("patch not initialized");for(var o=s.substring(a.start2,a.start2+a.length1),l=0;s.indexOf(o)!=s.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,o=s.substring(a.start2-l,a.start2+a.length1+l);l+=this.Patch_Margin;var f=s.substring(a.start2-l,a.start2);f&&a.diffs.unshift(new t.Diff(r,f));var d=s.substring(a.start2+a.length1,a.start2+a.length1+l);d&&a.diffs.push(new t.Diff(r,d)),a.start1-=f.length,a.start2-=f.length,a.length1+=f.length+d.length,a.length2+=f.length+d.length}},t.prototype.patch_make=function(a,s,o){var l,f;if(typeof a=="string"&&typeof s=="string"&&typeof o>"u")l=a,f=this.diff_main(l,s,!0),f.length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(a&&typeof a=="object"&&typeof s>"u"&&typeof o>"u")f=a,l=this.diff_text1(f);else if(typeof a=="string"&&s&&typeof s=="object"&&typeof o>"u")l=a,f=s;else if(typeof a=="string"&&typeof s=="string"&&o&&typeof o=="object")l=a,f=o;else throw new Error("Unknown call format to patch_make.");if(f.length===0)return[];for(var d=[],h=new t.patch_obj,p=0,y=0,v=0,b=l,E=l,S=0;S<f.length;S++){var _=f[S][0],w=f[S][1];switch(!p&&_!==r&&(h.start1=y,h.start2=v),_){case i:h.diffs[p++]=f[S],h.length2+=w.length,E=E.substring(0,v)+w+E.substring(v);break;case n:h.length1+=w.length,h.diffs[p++]=f[S],E=E.substring(0,v)+E.substring(v+w.length);break;case r:w.length<=2*this.Patch_Margin&&p&&f.length!=S+1?(h.diffs[p++]=f[S],h.length1+=w.length,h.length2+=w.length):w.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(h,b),d.push(h),h=new t.patch_obj,p=0,b=E,y=v);break}_!==i&&(y+=w.length),_!==n&&(v+=w.length)}return p&&(this.patch_addContext_(h,b),d.push(h)),d},t.prototype.patch_deepCopy=function(a){for(var s=[],o=0;o<a.length;o++){var l=a[o],f=new t.patch_obj;f.diffs=[];for(var d=0;d<l.diffs.length;d++)f.diffs[d]=new t.Diff(l.diffs[d][0],l.diffs[d][1]);f.start1=l.start1,f.start2=l.start2,f.length1=l.length1,f.length2=l.length2,s[o]=f}return s},t.prototype.patch_apply=function(a,s){if(a.length==0)return[s,[]];a=this.patch_deepCopy(a);var o=this.patch_addPadding(a);s=o+s+o,this.patch_splitMax(a);for(var l=0,f=[],d=0;d<a.length;d++){var h=a[d].start2+l,p=this.diff_text1(a[d].diffs),y,v=-1;if(p.length>this.Match_MaxBits?(y=this.match_main(s,p.substring(0,this.Match_MaxBits),h),y!=-1&&(v=this.match_main(s,p.substring(p.length-this.Match_MaxBits),h+p.length-this.Match_MaxBits),(v==-1||y>=v)&&(y=-1))):y=this.match_main(s,p,h),y==-1)f[d]=!1,l-=a[d].length2-a[d].length1;else{f[d]=!0,l=y-h;var b;if(v==-1?b=s.substring(y,y+p.length):b=s.substring(y,v+this.Match_MaxBits),p==b)s=s.substring(0,y)+this.diff_text2(a[d].diffs)+s.substring(y+p.length);else{var E=this.diff_main(p,b,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(E)/p.length>this.Patch_DeleteThreshold)f[d]=!1;else{this.diff_cleanupSemanticLossless(E);for(var S=0,_,w=0;w<a[d].diffs.length;w++){var C=a[d].diffs[w];C[0]!==r&&(_=this.diff_xIndex(E,S)),C[0]===i?s=s.substring(0,y+_)+C[1]+s.substring(y+_):C[0]===n&&(s=s.substring(0,y+_)+s.substring(y+this.diff_xIndex(E,S+C[1].length))),C[0]!==n&&(S+=C[1].length)}}}}}return s=s.substring(o.length,s.length-o.length),[s,f]},t.prototype.patch_addPadding=function(a){for(var s=this.Patch_Margin,o="",l=1;l<=s;l++)o+=String.fromCharCode(l);for(var l=0;l<a.length;l++)a[l].start1+=s,a[l].start2+=s;var f=a[0],d=f.diffs;if(d.length==0||d[0][0]!=r)d.unshift(new t.Diff(r,o)),f.start1-=s,f.start2-=s,f.length1+=s,f.length2+=s;else if(s>d[0][1].length){var h=s-d[0][1].length;d[0][1]=o.substring(d[0][1].length)+d[0][1],f.start1-=h,f.start2-=h,f.length1+=h,f.length2+=h}if(f=a[a.length-1],d=f.diffs,d.length==0||d[d.length-1][0]!=r)d.push(new t.Diff(r,o)),f.length1+=s,f.length2+=s;else if(s>d[d.length-1][1].length){var h=s-d[d.length-1][1].length;d[d.length-1][1]+=o.substring(0,h),f.length1+=h,f.length2+=h}return o},t.prototype.patch_splitMax=function(a){for(var s=this.Match_MaxBits,o=0;o<a.length;o++)if(!(a[o].length1<=s)){var l=a[o];a.splice(o--,1);for(var f=l.start1,d=l.start2,h="";l.diffs.length!==0;){var p=new t.patch_obj,y=!0;for(p.start1=f-h.length,p.start2=d-h.length,h!==""&&(p.length1=p.length2=h.length,p.diffs.push(new t.Diff(r,h)));l.diffs.length!==0&&p.length1<s-this.Patch_Margin;){var v=l.diffs[0][0],b=l.diffs[0][1];v===i?(p.length2+=b.length,d+=b.length,p.diffs.push(l.diffs.shift()),y=!1):v===n&&p.diffs.length==1&&p.diffs[0][0]==r&&b.length>2*s?(p.length1+=b.length,f+=b.length,y=!1,p.diffs.push(new t.Diff(v,b)),l.diffs.shift()):(b=b.substring(0,s-p.length1-this.Patch_Margin),p.length1+=b.length,f+=b.length,v===r?(p.length2+=b.length,d+=b.length):y=!1,p.diffs.push(new t.Diff(v,b)),b==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(b.length))}h=this.diff_text2(p.diffs),h=h.substring(h.length-this.Patch_Margin);var E=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);E!==""&&(p.length1+=E.length,p.length2+=E.length,p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=E:p.diffs.push(new t.Diff(r,E))),y||a.splice(++o,0,p)}}},t.prototype.patch_toText=function(a){for(var s=[],o=0;o<a.length;o++)s[o]=a[o];return s.join("")},t.prototype.patch_fromText=function(a){var s=[];if(!a)return s;for(var o=a.split(`
`),l=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<o.length;){var d=o[l].match(f);if(!d)throw new Error("Invalid patch string: "+o[l]);var h=new t.patch_obj;for(s.push(h),h.start1=parseInt(d[1],10),d[2]===""?(h.start1--,h.length1=1):d[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(d[2],10)),h.start2=parseInt(d[3],10),d[4]===""?(h.start2--,h.length2=1):d[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(d[4],10)),l++;l<o.length;){var p=o[l].charAt(0);try{var y=decodeURI(o[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+y)}if(p=="-")h.diffs.push(new t.Diff(n,y));else if(p=="+")h.diffs.push(new t.Diff(i,y));else if(p==" ")h.diffs.push(new t.Diff(r,y));else{if(p=="@")break;if(p!=="")throw new Error('Invalid patch mode "'+p+'" in: '+y)}l++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var a,s;this.length1===0?a=this.start1+",0":this.length1==1?a=this.start1+1:a=this.start1+1+","+this.length1,this.length2===0?s=this.start2+",0":this.length2==1?s=this.start2+1:s=this.start2+1+","+this.length2;for(var o=["@@ -"+a+" +"+s+` @@
`],l,f=0;f<this.diffs.length;f++){switch(this.diffs[f][0]){case i:l="+";break;case n:l="-";break;case r:l=" ";break}o[f+1]=l+encodeURI(this.diffs[f][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r}(iS)),iS.exports}var rQ=iQ();const j_=o3(rQ);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var aQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),sQ=Object.prototype.hasOwnProperty;function P_(e,t){return sQ.call(e,t)}function q_(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)P_(e,r)&&i.push(r);return i}function xr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function H_(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Bl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function y7(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function G_(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(G_(e[t]))return!0}else if(typeof e=="object"){for(var i=q_(e),r=i.length,a=0;a<r;a++)if(G_(e[i[a]]))return!0}}return!1}function zO(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var v7=function(e){aQ(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,zO(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=zO(n,{name:i,index:r,operation:a,tree:s}),l}return t}(Error),Zt=v7,oQ=xr,td={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Hy(n,this.path);i&&(i=xr(i));var r=Zl(n,{op:"remove",path:this.from}).removed;return Zl(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Hy(n,this.from);return Zl(n,{op:"add",path:this.path,value:xr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Ug(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uQ={add:function(e,t,n){return H_(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:td.move,copy:td.copy,test:td.test,_get:td._get};function Hy(e,t){if(t=="")return e;var n={op:"_get",path:t};return Zl(e,n),n.value}function Zl(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Gy(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Hy(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Ug(e,t.value),s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=xr(e));var o=t.path||"",l=o.split("/"),f=e,d=1,h=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Gy;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=y7(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=l.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!H_(y))throw new Zt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);H_(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new Zt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=uQ[t.op].call(t,f,y,e);if(s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=td[t.op].call(t,f,y,e);if(s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new Zt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Db(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=xr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Zl(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function lQ(e,t,n){var i=Zl(e,t);if(i.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Gy(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Zt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(td[e.op]){if(typeof e.path!="string")throw new Zt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Zt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Zt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&G_(e.value))throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Zt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Zt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=b7([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Zt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function b7(e,t,n){try{if(!Array.isArray(e))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Db(xr(t),xr(e),n||!0);else{n=n||Gy;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Zt)return r;throw r}}function Ug(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Ug(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Ug(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const cQ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Zt,_areEquals:Ug,applyOperation:Zl,applyPatch:Db,applyReducer:lQ,deepClone:oQ,getValueByPointer:Hy,validate:b7,validator:Gy},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var l3=new WeakMap,fQ=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),dQ=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hQ(e){return l3.get(e)}function gQ(e,t){return e.observers.get(t)}function pQ(e,t){e.observers.delete(t.callback)}function mQ(e,t){t.unobserve()}function yQ(e,t){var n=[],i,r=hQ(e);if(!r)r=new fQ(e),l3.set(e,r);else{var a=gQ(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=xr(e),t){i.callback=t,i.next=null;var s=function(){Y_(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){Y_(i),clearTimeout(i.next),pQ(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new dQ(t,i)),i}function Y_(e,t){t===void 0&&(t=!1);var n=l3.get(e.object);c3(n.value,e.object,e.patches,"",t),e.patches.length&&Db(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function c3(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=q_(t),s=q_(e),o=!1,l=s.length-1;l>=0;l--){var f=s[l],d=e[f];if(P_(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?c3(d,h,n,i+"/"+Bl(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+Bl(f),value:xr(d)}),n.push({op:"replace",path:i+"/"+Bl(f),value:xr(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Bl(f),value:xr(d)}),n.push({op:"remove",path:i+"/"+Bl(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var f=a[l];!P_(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Bl(f),value:xr(t[f])})}}}function vQ(e,t,n){n===void 0&&(n=!1);var i=[];return c3(e,t,i,"",n),i}const bQ=Object.freeze(Object.defineProperty({__proto__:null,compare:vQ,generate:Y_,observe:yQ,unobserve:mQ},Symbol.toStringTag,{value:"Module"}));Object.assign({},cQ,bQ,{JsonPatchError:v7,deepClone:xr,escapePathComponent:Bl,unescapePathComponent:y7});var rS,BO;function xQ(){if(BO)return rS;BO=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return rS=function(n,i){var r,a,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),a=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,function o(l,f,d){var h,p,y,v,b,E,S,_,w,C,$,T;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),$=JSON.stringify(l,s),$===void 0)return $;if(S=a-f.length-d,$.length<=S&&(w=$.replace(e,function(D,F){return F||D+" "}),w.length<=S))return w;if(s!=null&&(l=JSON.parse($),s=void 0),typeof l=="object"&&l!==null){if(_=f+r,y=[],p=0,Array.isArray(l))for(C="[",h="]",S=l.length;p<S;p++)y.push(o(l[p],_,p===S-1?0:1)||"null");else for(C="{",h="}",E=Object.keys(l),S=E.length;p<S;p++)v=E[p],b=JSON.stringify(v)+": ",T=o(l[v],_,b.length+(p===S-1?0:1)),T!==void 0&&y.push(b+T);if(y.length>0)return[C,r+y.join(`,
`+_),h].join(`
`+f)}return $}(n,"",0)},rS}var EQ=xQ();const aS=o3(EQ);function ar(e,t,n){return e.fields=t||[],e.fname=n,e}function Jt(e){return e==null?null:e.fname}function hi(e){return e==null?null:e.fields}function x7(e){return e.length===1?AQ(e[0]):SQ(e)}const AQ=e=>function(t){return t[e]},SQ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ne(e){throw Error(e)}function $b(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||ne("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&ne("Access path missing closing bracket: "+e),i&&ne("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function Qr(e,t,n){const i=$b(e);return e=i.length===1?i[0]:e,ar((n&&n.get||x7)(i),[e],t||e)}const vp=Qr("id"),Ni=ar(e=>e,[],"identity"),mu=ar(()=>0,[],"zero"),th=ar(()=>1,[],"one"),Zr=ar(()=>!0,[],"true"),uu=ar(()=>!1,[],"false");function _Q(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const E7=0,f3=1,A7=2,S7=3,_7=4;function w7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_Q,i=e||E7;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=f3&&n(t||"error","ERROR",arguments),this},warn(){return i>=A7&&n(t||"warn","WARN",arguments),this},info(){return i>=S7&&n(t||"log","INFO",arguments),this},debug(){return i>=_7&&n(t||"log","DEBUG",arguments),this}}}var we=Array.isArray;function Ue(e){return e===Object(e)}const LO=e=>e!=="__proto__";function Mb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=wQ(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;Tb(i,a,r[a],s)}return i},{})}function Tb(e,t,n,i){if(!LO(t))return;let r,a;if(Ue(n)&&!we(n)){a=Ue(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Tb(a,r,n[r]):LO(r)&&(a[r]=n[r])}else e[t]=n}function wQ(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function nt(e){return e[e.length-1]}function fi(e){return e==null||e===""?null:+e}const C7=e=>t=>e*Math.exp(t),D7=e=>t=>Math.log(e*t),$7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),M7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Yy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function kb(e,t,n,i){const r=n(e[0]),a=n(nt(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function T7(e,t){return kb(e,t,fi,Ni)}function k7(e,t){var n=Math.sign(e[0]);return kb(e,t,D7(n),C7(n))}function F7(e,t,n){return kb(e,t,Yy(n),Yy(1/n))}function O7(e,t,n){return kb(e,t,$7(n),M7(n))}function Fb(e,t,n,i,r){const a=i(e[0]),s=i(nt(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function d3(e,t,n){return Fb(e,t,n,fi,Ni)}function h3(e,t,n){const i=Math.sign(e[0]);return Fb(e,t,n,D7(i),C7(i))}function Xy(e,t,n,i){return Fb(e,t,n,Yy(i),Yy(1/i))}function g3(e,t,n,i){return Fb(e,t,n,$7(i),M7(i))}function N7(e){return 1+~~(new Date(e).getMonth()/3)}function R7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ke(e){return e!=null?we(e)?e:[e]:[]}function z7(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Ye(e){return typeof e=="function"}const CQ="descending";function p3(e,t,n){n=n||{},t=ke(t)||[];const i=[],r=[],a={},s=n.comparator||DQ;return ke(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===CQ?-1:1),r.push(o=Ye(o)?o:Qr(o,null,n)),(hi(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:ar(s(r,i),Object.keys(a))}const bp=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),DQ=(e,t)=>e.length===1?$Q(e[0],t[0]):MQ(e,t,e.length),$Q=(e,t)=>function(n,i){return bp(e(n),e(i))*t},MQ=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=bp(a(i),a(r));return s*t[o]});function bi(e){return Ye(e)?e:()=>e}function m3(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function He(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function fs(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function B7(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function Ne(e,t){return Object.hasOwn(e,t)}const T1={};function nh(e){let t={},n;function i(a){return Ne(t,a)&&t[a]!==T1}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===T1&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=T1),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==T1&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function L7(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=nt(e),f;l<o&&(f=o,o=l,l=f),f=Math.abs(t-o);const d=Math.abs(l-t);return f<d&&f<=s?i:d<=s?r:a}function pe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),He(i,n)}function nd(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function y3(e){return typeof e=="boolean"}function Cu(e){return Object.prototype.toString.call(e)==="[object Date]"}function U7(e){return e&&Ye(e[Symbol.iterator])}function Fu(e){return typeof e=="number"}function I7(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ut(e){return typeof e=="string"}function v3(e,t,n){e&&(e=t?ke(e).map(o=>o.replace(/\\(.)/g,"$1")):ke(e));const i=e&&e.length,r=n&&n.get||x7,a=o=>r(t?[o]:$b(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let f=""+o[0](l),d=0;for(;++d<i;)f+="|"+o[d](l);return f}}return ar(s,e,"key")}function j7(e,t){const n=e[0],i=nt(e),r=+t;return r?r===1?i:n+r*(i-n):n}const TQ=1e4;function P7(e){e=+e||TQ;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Ne(t,s)||Ne(n,s),get:s=>Ne(t,s)?t[s]:Ne(n,s)?a(s,n[s]):void 0,set:(s,o)=>Ne(t,s)?t[s]=o:a(s,o)}}function q7(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,f=0;for(;o<r&&l<a;++f)s[f]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;l<a;++l,++f)s[f]=n[l];return s}function K0(e,t){let n="";for(;--t>=0;)n+=e;return n}function H7(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?K0(r,s)+a:i==="center"?K0(r,~~(s/2))+a+K0(r,Math.ceil(s/2)):a+K0(r,s)}function xp(e){return e&&nt(e)-e[0]||0}function _e(e){return we(e)?"["+e.map(_e)+"]":Ue(e)||ut(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function b3(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const kQ=e=>Fu(e)||Cu(e)?e:Date.parse(e);function x3(e,t){return t=t||kQ,e==null||e===""?null:t(e)}function E3(e){return e==null||e===""?null:e+""}function wa(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function G7(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function fu(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var UO={},sS={},oS=34,C0=10,uS=13;function Y7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function FQ(e,t){var n=Y7(e);return function(i,r){return t(n(i),r,e)}}function IO(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Gi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function OQ(e){return e<0?"-"+Gi(-e,6):e>9999?"+"+Gi(e,6):Gi(e,4)}function NQ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":OQ(e.getUTCFullYear())+"-"+Gi(e.getUTCMonth()+1,2)+"-"+Gi(e.getUTCDate(),2)+(r?"T"+Gi(t,2)+":"+Gi(n,2)+":"+Gi(i,2)+"."+Gi(r,3)+"Z":i?"T"+Gi(t,2)+":"+Gi(n,2)+":"+Gi(i,2)+"Z":n||t?"T"+Gi(t,2)+":"+Gi(n,2)+"Z":"")}function RQ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(E,S){if(y)return y(E,S-1);v=E,y=p?FQ(E,p):Y7(E)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,E=0,S,_=v<=0,w=!1;h.charCodeAt(v-1)===C0&&--v,h.charCodeAt(v-1)===uS&&--v;function C(){if(_)return sS;if(w)return w=!1,UO;var T,D=b,F;if(h.charCodeAt(D)===oS){for(;b++<v&&h.charCodeAt(b)!==oS||h.charCodeAt(++b)===oS;);return(T=b)>=v?_=!0:(F=h.charCodeAt(b++))===C0?w=!0:F===uS&&(w=!0,h.charCodeAt(b)===C0&&++b),h.slice(D+1,T-1).replace(/""/g,'"')}for(;b<v;){if((F=h.charCodeAt(T=b++))===C0)w=!0;else if(F===uS)w=!0,h.charCodeAt(b)===C0&&++b;else if(F!==n)continue;return h.slice(D,T)}return _=!0,h.slice(D,v)}for(;(S=C())!==sS;){for(var $=[];S!==UO&&S!==sS;)$.push(S),S=C();p&&($=p($,E++))==null||y.push($)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=IO(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=IO(h)),a(h,p).join(`
`)}function l(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?NQ(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:f,formatValue:d}}function zQ(e){return e}function BQ(e){if(e==null)return zQ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function LQ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function UQ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return jO(e,n)})}:jO(e,t)}function jO(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=X7(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function X7(e,t){var n=BQ(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&LQ(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function l(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return f(t)}function IQ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var E=v===y?y:v.concat(y);i[E.start=v.start]=r[E.end=y.end]=E}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function l(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function jQ(e){return X7(e,PQ.apply(this,arguments))}function PQ(e,t,n){var i,r,a;if(arguments.length>1)i=qQ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:IQ(e,i)}}function qQ(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function l(h){h.forEach(o)}function f(h){h.forEach(l)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function go(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function HQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ih(e){let t,n,i;e.length!==2?(t=go,n=(o,l)=>go(e(o),l),i=(o,l)=>e(o)-l):(t=e===go||e===HQ?e:GQ,n=e,i=e);function r(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<0?f=h+1:d=h}while(f<d)}return f}function a(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,l,f=0,d=o.length){const h=r(o,l,f,d-1);return h>f&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:r,center:s,right:a}}function GQ(){return 0}function V7(e){return e===null?NaN:+e}function*YQ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const W7=ih(go),Ou=W7.right,XQ=W7.left;ih(V7).center;function VQ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function WQ(e,t){const n=VQ(e,t);return n&&Math.sqrt(n)}class Fi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class PO extends Map{constructor(t,n=K7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(X_(this,t))}has(t){return super.has(X_(this,t))}set(t,n){return super.set(Q7(this,t),n)}delete(t){return super.delete(Z7(this,t))}}class Vy extends Set{constructor(t,n=K7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(X_(this,t))}add(t){return super.add(Q7(this,t))}delete(t){return super.delete(Z7(this,t))}}function X_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Q7({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Z7({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function K7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function QQ(e,t){return Array.from(t,n=>e[n])}function ZQ(e=go){if(e===go)return J7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function J7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const KQ=Math.sqrt(50),JQ=Math.sqrt(10),eZ=Math.sqrt(2);function Wy(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=KQ?10:a>=JQ?5:a>=eZ?2:1;let o,l,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),l=Math.round(t*f),o/f<e&&++o,l/f>t&&--l,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),l=Math.round(t/f),o*f<e&&++o,l*f>t&&--l),l<o&&.5<=n&&n<2?Wy(e,t,n*2):[o,l,f]}function V_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Wy(t,e,n):Wy(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)l[f]=(a-f)/-s;else for(let f=0;f<o;++f)l[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)l[f]=(r+f)/-s;else for(let f=0;f<o;++f)l[f]=(r+f)*s;return l}function W_(e,t,n){return t=+t,e=+e,n=+n,Wy(e,t,n)[2]}function Nu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?W_(t,e,n):W_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Kl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Q_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function ez(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?J7:ZQ(r);i>n;){if(i-n>600){const l=i-n+1,f=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(f-l/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/l+p)),v=Math.min(i,Math.floor(t+(l-f)*h/l+p));ez(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(D0(e,n,t),r(e[i],a)>0&&D0(e,n,i);s<o;){for(D0(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?D0(e,n,o):(++o,D0(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function D0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Z_(e,t,n){if(e=Float64Array.from(YQ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Q_(e);if(t>=1)return Kl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Kl(ez(e,a).subarray(0,a+1)),o=Q_(e.subarray(a+1));return s+(o-s)*(r-a)}}function tz(e,t,n=V7){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function tZ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function nz(e,t){return Z_(e,.5,t)}function*nZ(e){for(const t of e)yield*t}function iz(e){return Array.from(nZ(e))}function Er(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function rz(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function iZ(e,...t){e=new Vy(e),t=t.map(rZ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function rZ(e){return e instanceof Vy?e:new Vy(e)}function aZ(...e){const t=new Vy;for(const n of e)for(const i of n)t.add(i);return t}function sZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function bd(e){return e=Qy(Math.abs(e)),e?e[1]:NaN}function oZ(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function uZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var lZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oc(e){if(!(t=lZ.exec(e)))throw new Error("invalid format: "+e);var t;return new A3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}oc.prototype=A3.prototype;function A3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}A3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cZ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var az;function fZ(e,t){var n=Qy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(az=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Qy(e,Math.max(0,t+a-1))[0]}function qO(e,t){var n=Qy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const HO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qO(e*100,t),r:qO,s:fZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function GO(e){return e}var YO=Array.prototype.map,XO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sz(e){var t=e.grouping===void 0||e.thousands===void 0?GO:oZ(YO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?GO:uZ(YO.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function f(h){h=oc(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,E=h.zero,S=h.width,_=h.comma,w=h.precision,C=h.trim,$=h.type;$==="n"?(_=!0,$="g"):HO[$]||(w===void 0&&(w=12),C=!0,$="g"),(E||p==="0"&&y==="=")&&(E=!0,p="0",y="=");var T=b==="$"?n:b==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",D=b==="$"?i:/[%p]/.test($)?s:"",F=HO[$],O=/[defgprs%]/.test($);w=w===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function U(z){var G=T,B=D,j,I,N;if($==="c")B=F(z)+B,z="";else{z=+z;var q=z<0||1/z<0;if(z=isNaN(z)?l:F(Math.abs(z),w),C&&(z=cZ(z)),q&&+z==0&&v!=="+"&&(q=!1),G=(q?v==="("?v:o:v==="-"||v==="("?"":v)+G,B=($==="s"?XO[8+az/3]:"")+B+(q&&v==="("?")":""),O){for(j=-1,I=z.length;++j<I;)if(N=z.charCodeAt(j),48>N||N>57){B=(N===46?r+z.slice(j+1):z.slice(j))+B,z=z.slice(0,j);break}}}_&&!E&&(z=t(z,1/0));var Y=G.length+z.length+B.length,J=Y<S?new Array(S-Y+1).join(p):"";switch(_&&E&&(z=t(J+z,J.length?S-B.length:1/0),J=""),y){case"<":z=G+z+B+J;break;case"=":z=G+J+z+B;break;case"^":z=J.slice(0,Y=J.length>>1)+G+z+B+J.slice(Y);break;default:z=J+G+z+B;break}return a(z)}return U.toString=function(){return h+""},U}function d(h,p){var y=f((h=oc(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(bd(p)/3)))*3,b=Math.pow(10,-v),E=XO[8+v/3];return function(S){return y(b*S)+E}}return{format:f,formatPrefix:d}}var k1,Ob,S3;dZ({thousands:",",grouping:[3],currency:["$",""]});function dZ(e){return k1=sz(e),Ob=k1.format,S3=k1.formatPrefix,k1}function oz(e){return Math.max(0,-bd(Math.abs(e)))}function uz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bd(t)/3)))*3-bd(Math.abs(e)))}function lz(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bd(t)-bd(e))+1}const lS=new Date,cS=new Date;function _n(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let f;do l.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return l},r.filter=a=>_n(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(lS.setTime(+a),cS.setTime(+s),e(lS),e(cS),Math.floor(n(lS,cS))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const xd=_n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_n(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xd);xd.range;const oo=1e3,Hr=oo*60,uo=Hr*60,Ao=uo*24,_3=Ao*7,VO=Ao*30,fS=Ao*365,lo=_n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oo)},(e,t)=>(t-e)/oo,e=>e.getUTCSeconds());lo.range;const Nb=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getMinutes());Nb.range;const Rb=_n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCMinutes());Rb.range;const zb=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo-e.getMinutes()*Hr)},(e,t)=>{e.setTime(+e+t*uo)},(e,t)=>(t-e)/uo,e=>e.getHours());zb.range;const Bb=_n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*uo)},(e,t)=>(t-e)/uo,e=>e.getUTCHours());Bb.range;const po=_n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hr)/Ao,e=>e.getDate()-1);po.range;const Du=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ao,e=>e.getUTCDate()-1);Du.range;const cz=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ao,e=>Math.floor(e/Ao));cz.range;function kc(e){return _n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/_3)}const rh=kc(0),Zy=kc(1),hZ=kc(2),gZ=kc(3),Ed=kc(4),pZ=kc(5),mZ=kc(6);rh.range;Zy.range;hZ.range;gZ.range;Ed.range;pZ.range;mZ.range;function Fc(e){return _n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/_3)}const ah=Fc(0),Ky=Fc(1),yZ=Fc(2),vZ=Fc(3),Ad=Fc(4),bZ=Fc(5),xZ=Fc(6);ah.range;Ky.range;yZ.range;vZ.range;Ad.range;bZ.range;xZ.range;const Ig=_n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ig.range;const jg=_n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jg.range;const ds=_n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ds.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ds.range;const hs=_n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});hs.range;function fz(e,t,n,i,r,a){const s=[[lo,1,oo],[lo,5,5*oo],[lo,15,15*oo],[lo,30,30*oo],[a,1,Hr],[a,5,5*Hr],[a,15,15*Hr],[a,30,30*Hr],[r,1,uo],[r,3,3*uo],[r,6,6*uo],[r,12,12*uo],[i,1,Ao],[i,2,2*Ao],[n,1,_3],[t,1,VO],[t,3,3*VO],[e,1,fS]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:l(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function l(f,d,h){const p=Math.abs(d-f)/h,y=ih(([,,E])=>E).right(s,p);if(y===s.length)return e.every(Nu(f/fS,d/fS,h));if(y===0)return xd.every(Math.max(Nu(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[EZ,AZ]=fz(hs,jg,ah,cz,Bb,Rb),[SZ,_Z]=fz(ds,Ig,rh,po,zb,Nb),Jn="year",Ji="quarter",gi="month",En="week",er="date",ci="day",gs="dayofyear",Dr="hours",$r="minutes",Kr="seconds",Ca="milliseconds",w3=[Jn,Ji,gi,En,er,ci,gs,Dr,$r,Kr,Ca],dS=w3.reduce((e,t,n)=>(e[t]=1+n,e),{});function C3(e){const t=ke(e).slice(),n={};return t.length||ne("Missing time unit."),t.forEach(r=>{Ne(dS,r)?n[r]=1:ne(`Invalid time unit: ${r}.`)}),(n[En]||n[ci]?1:0)+(n[Ji]||n[gi]||n[er]?1:0)+(n[gs]?1:0)>1&&ne(`Incompatible time units: ${e}`),t.sort((r,a)=>dS[r]-dS[a]),t}const wZ={[Jn]:"%Y ",[Ji]:"Q%q ",[gi]:"%b ",[er]:"%d ",[En]:"W%U ",[ci]:"%a ",[gs]:"%j ",[Dr]:"%H:00",[$r]:"00:%M",[Kr]:":%S",[Ca]:".%L",[`${Jn}-${gi}`]:"%Y-%m ",[`${Jn}-${gi}-${er}`]:"%Y-%m-%d ",[`${Dr}-${$r}`]:"%H:%M"};function dz(e,t){const n=He({},wZ,t),i=C3(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const Il=new Date;function D3(e){return Il.setFullYear(e),Il.setMonth(0),Il.setDate(1),Il.setHours(0,0,0,0),Il}function hz(e){return pz(new Date(e))}function gz(e){return K_(new Date(e))}function pz(e){return po.count(D3(e.getFullYear())-1,e)}function K_(e){return rh.count(D3(e.getFullYear())-1,e)}function J_(e){return D3(e).getDay()}function CZ(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function mz(e){return vz(new Date(e))}function yz(e){return ew(new Date(e))}function vz(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Du.count(t-1,e)}function ew(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ah.count(t-1,e)}function tw(e){return Il.setTime(Date.UTC(e,0,1)),Il.getUTCDay()}function DZ(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function bz(e,t,n,i,r){const a=t||1,s=nt(e),o=(S,_,w)=>(w=w||S,$Z(n[w],i[w],S===s&&a,_)),l=new Date,f=wa(e),d=f[Jn]?o(Jn):bi(2012),h=f[gi]?o(gi):f[Ji]?o(Ji):mu,p=f[En]&&f[ci]?o(ci,1,En+ci):f[En]?o(En,1):f[ci]?o(ci,1):f[er]?o(er,1):f[gs]?o(gs,1):th,y=f[Dr]?o(Dr):mu,v=f[$r]?o($r):mu,b=f[Kr]?o(Kr):mu,E=f[Ca]?o(Ca):mu;return function(S){l.setTime(+S);const _=d(l);return r(_,h(l),p(l,_),y(l),v(l),b(l),E(l))}}function $Z(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Sd(e,t,n){return t+e*7-(n+6)%7}const MZ={[Jn]:e=>e.getFullYear(),[Ji]:e=>Math.floor(e.getMonth()/3),[gi]:e=>e.getMonth(),[er]:e=>e.getDate(),[Dr]:e=>e.getHours(),[$r]:e=>e.getMinutes(),[Kr]:e=>e.getSeconds(),[Ca]:e=>e.getMilliseconds(),[gs]:e=>pz(e),[En]:e=>K_(e),[En+ci]:(e,t)=>Sd(K_(e),e.getDay(),J_(t)),[ci]:(e,t)=>Sd(1,e.getDay(),J_(t))},TZ={[Ji]:e=>3*e,[En]:(e,t)=>Sd(e,0,J_(t))};function xz(e,t){return bz(e,t||1,MZ,TZ,CZ)}const kZ={[Jn]:e=>e.getUTCFullYear(),[Ji]:e=>Math.floor(e.getUTCMonth()/3),[gi]:e=>e.getUTCMonth(),[er]:e=>e.getUTCDate(),[Dr]:e=>e.getUTCHours(),[$r]:e=>e.getUTCMinutes(),[Kr]:e=>e.getUTCSeconds(),[Ca]:e=>e.getUTCMilliseconds(),[gs]:e=>vz(e),[En]:e=>ew(e),[ci]:(e,t)=>Sd(1,e.getUTCDay(),tw(t)),[En+ci]:(e,t)=>Sd(ew(e),e.getUTCDay(),tw(t))},FZ={[Ji]:e=>3*e,[En]:(e,t)=>Sd(e,0,tw(t))};function Ez(e,t){return bz(e,t||1,kZ,FZ,DZ)}const OZ={[Jn]:ds,[Ji]:Ig.every(3),[gi]:Ig,[En]:rh,[er]:po,[ci]:po,[gs]:po,[Dr]:zb,[$r]:Nb,[Kr]:lo,[Ca]:xd},NZ={[Jn]:hs,[Ji]:jg.every(3),[gi]:jg,[En]:ah,[er]:Du,[ci]:Du,[gs]:Du,[Dr]:Bb,[$r]:Rb,[Kr]:lo,[Ca]:xd};function sh(e){return OZ[e]}function oh(e){return NZ[e]}function Az(e,t,n){return e?e.offset(t,n):void 0}function Sz(e,t,n){return Az(sh(e),t,n)}function _z(e,t,n){return Az(oh(e),t,n)}function wz(e,t,n,i){return e?e.range(t,n,i):void 0}function Cz(e,t,n,i){return wz(sh(e),t,n,i)}function Dz(e,t,n,i){return wz(oh(e),t,n,i)}const J0=1e3,eg=J0*60,tg=eg*60,Lb=tg*24,RZ=Lb*7,WO=Lb*30,nw=Lb*365,$z=[Jn,gi,er,Dr,$r,Kr,Ca],ng=$z.slice(0,-1),ig=ng.slice(0,-1),rg=ig.slice(0,-1),zZ=rg.slice(0,-1),BZ=[Jn,En],QO=[Jn,gi],Mz=[Jn],$0=[[ng,1,J0],[ng,5,5*J0],[ng,15,15*J0],[ng,30,30*J0],[ig,1,eg],[ig,5,5*eg],[ig,15,15*eg],[ig,30,30*eg],[rg,1,tg],[rg,3,3*tg],[rg,6,6*tg],[rg,12,12*tg],[zZ,1,Lb],[BZ,1,RZ],[QO,1,WO],[QO,3,3*WO],[Mz,1,nw]];function Tz(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(xp(t))/n;let r=ih(o=>o[2]).right($0,i),a,s;return r===$0.length?(a=Mz,s=Nu(t[0]/nw,t[1]/nw,n)):r?(r=$0[i/$0[r-1][2]<$0[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=$z,s=Math.max(Nu(t[0],t[1],n),1)),{units:a,step:s}}function hS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function M0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function kz(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,f=T0(r),d=k0(r),h=T0(a),p=k0(a),y=T0(s),v=k0(s),b=T0(o),E=k0(o),S=T0(l),_=k0(l),w={a:q,A:Y,b:J,B:R,c:null,d:nN,e:nN,f:sK,g:mK,G:vK,H:iK,I:rK,j:aK,L:Fz,m:oK,M:uK,p:V,q:se,Q:aN,s:sN,S:lK,u:cK,U:fK,V:dK,w:hK,W:gK,x:null,X:null,y:pK,Y:yK,Z:bK,"%":rN},C={a:oe,A:ge,b:Se,B:De,c:null,d:iN,e:iN,f:SK,g:OK,G:RK,H:xK,I:EK,j:AK,L:Nz,m:_K,M:wK,p:en,q:at,Q:aN,s:sN,S:CK,u:DK,U:$K,V:MK,w:TK,W:kK,x:null,X:null,y:FK,Y:NK,Z:zK,"%":rN},$={a:U,A:z,b:G,B,c:j,d:eN,e:eN,f:JZ,g:JO,G:KO,H:tN,I:tN,j:WZ,L:KZ,m:VZ,M:QZ,p:O,q:XZ,Q:tK,s:nK,S:ZZ,u:PZ,U:qZ,V:HZ,w:jZ,W:GZ,x:I,X:N,y:JO,Y:KO,Z:YZ,"%":eK};w.x=T(n,w),w.X=T(i,w),w.c=T(t,w),C.x=T(n,C),C.X=T(i,C),C.c=T(t,C);function T(ye,Ie){return function(qe){var fe=[],tn=-1,st=0,cn=ye.length,Cn,fn,pm;for(qe instanceof Date||(qe=new Date(+qe));++tn<cn;)ye.charCodeAt(tn)===37&&(fe.push(ye.slice(st,tn)),(fn=ZO[Cn=ye.charAt(++tn)])!=null?Cn=ye.charAt(++tn):fn=Cn==="e"?" ":"0",(pm=Ie[Cn])&&(Cn=pm(qe,fn)),fe.push(Cn),st=tn+1);return fe.push(ye.slice(st,tn)),fe.join("")}}function D(ye,Ie){return function(qe){var fe=M0(1900,void 0,1),tn=F(fe,ye,qe+="",0),st,cn;if(tn!=qe.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Ie&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(st=gS(M0(fe.y,0,1)),cn=st.getUTCDay(),st=cn>4||cn===0?Ky.ceil(st):Ky(st),st=Du.offset(st,(fe.V-1)*7),fe.y=st.getUTCFullYear(),fe.m=st.getUTCMonth(),fe.d=st.getUTCDate()+(fe.w+6)%7):(st=hS(M0(fe.y,0,1)),cn=st.getDay(),st=cn>4||cn===0?Zy.ceil(st):Zy(st),st=po.offset(st,(fe.V-1)*7),fe.y=st.getFullYear(),fe.m=st.getMonth(),fe.d=st.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),cn="Z"in fe?gS(M0(fe.y,0,1)).getUTCDay():hS(M0(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(cn+5)%7:fe.w+fe.U*7-(cn+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,gS(fe)):hS(fe)}}function F(ye,Ie,qe,fe){for(var tn=0,st=Ie.length,cn=qe.length,Cn,fn;tn<st;){if(fe>=cn)return-1;if(Cn=Ie.charCodeAt(tn++),Cn===37){if(Cn=Ie.charAt(tn++),fn=$[Cn in ZO?Ie.charAt(tn++):Cn],!fn||(fe=fn(ye,qe,fe))<0)return-1}else if(Cn!=qe.charCodeAt(fe++))return-1}return fe}function O(ye,Ie,qe){var fe=f.exec(Ie.slice(qe));return fe?(ye.p=d.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function U(ye,Ie,qe){var fe=y.exec(Ie.slice(qe));return fe?(ye.w=v.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function z(ye,Ie,qe){var fe=h.exec(Ie.slice(qe));return fe?(ye.w=p.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function G(ye,Ie,qe){var fe=S.exec(Ie.slice(qe));return fe?(ye.m=_.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function B(ye,Ie,qe){var fe=b.exec(Ie.slice(qe));return fe?(ye.m=E.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function j(ye,Ie,qe){return F(ye,t,Ie,qe)}function I(ye,Ie,qe){return F(ye,n,Ie,qe)}function N(ye,Ie,qe){return F(ye,i,Ie,qe)}function q(ye){return s[ye.getDay()]}function Y(ye){return a[ye.getDay()]}function J(ye){return l[ye.getMonth()]}function R(ye){return o[ye.getMonth()]}function V(ye){return r[+(ye.getHours()>=12)]}function se(ye){return 1+~~(ye.getMonth()/3)}function oe(ye){return s[ye.getUTCDay()]}function ge(ye){return a[ye.getUTCDay()]}function Se(ye){return l[ye.getUTCMonth()]}function De(ye){return o[ye.getUTCMonth()]}function en(ye){return r[+(ye.getUTCHours()>=12)]}function at(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Ie=T(ye+="",w);return Ie.toString=function(){return ye},Ie},parse:function(ye){var Ie=D(ye+="",!1);return Ie.toString=function(){return ye},Ie},utcFormat:function(ye){var Ie=T(ye+="",C);return Ie.toString=function(){return ye},Ie},utcParse:function(ye){var Ie=D(ye+="",!0);return Ie.toString=function(){return ye},Ie}}}var ZO={"-":"",_:" ",0:"0"},jn=/^\s*\d+/,LZ=/^%/,UZ=/[\\^$*+?|[\]().{}]/g;function ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function IZ(e){return e.replace(UZ,"\\$&")}function T0(e){return new RegExp("^(?:"+e.map(IZ).join("|")+")","i")}function k0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function jZ(e,t,n){var i=jn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function PZ(e,t,n){var i=jn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function qZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function HZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function GZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function KO(e,t,n){var i=jn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function JO(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function YZ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function XZ(e,t,n){var i=jn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function VZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function eN(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function WZ(e,t,n){var i=jn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function tN(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function QZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ZZ(e,t,n){var i=jn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function KZ(e,t,n){var i=jn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function JZ(e,t,n){var i=jn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function eK(e,t,n){var i=LZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function tK(e,t,n){var i=jn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function nK(e,t,n){var i=jn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function nN(e,t){return ht(e.getDate(),t,2)}function iK(e,t){return ht(e.getHours(),t,2)}function rK(e,t){return ht(e.getHours()%12||12,t,2)}function aK(e,t){return ht(1+po.count(ds(e),e),t,3)}function Fz(e,t){return ht(e.getMilliseconds(),t,3)}function sK(e,t){return Fz(e,t)+"000"}function oK(e,t){return ht(e.getMonth()+1,t,2)}function uK(e,t){return ht(e.getMinutes(),t,2)}function lK(e,t){return ht(e.getSeconds(),t,2)}function cK(e){var t=e.getDay();return t===0?7:t}function fK(e,t){return ht(rh.count(ds(e)-1,e),t,2)}function Oz(e){var t=e.getDay();return t>=4||t===0?Ed(e):Ed.ceil(e)}function dK(e,t){return e=Oz(e),ht(Ed.count(ds(e),e)+(ds(e).getDay()===4),t,2)}function hK(e){return e.getDay()}function gK(e,t){return ht(Zy.count(ds(e)-1,e),t,2)}function pK(e,t){return ht(e.getFullYear()%100,t,2)}function mK(e,t){return e=Oz(e),ht(e.getFullYear()%100,t,2)}function yK(e,t){return ht(e.getFullYear()%1e4,t,4)}function vK(e,t){var n=e.getDay();return e=n>=4||n===0?Ed(e):Ed.ceil(e),ht(e.getFullYear()%1e4,t,4)}function bK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ht(t/60|0,"0",2)+ht(t%60,"0",2)}function iN(e,t){return ht(e.getUTCDate(),t,2)}function xK(e,t){return ht(e.getUTCHours(),t,2)}function EK(e,t){return ht(e.getUTCHours()%12||12,t,2)}function AK(e,t){return ht(1+Du.count(hs(e),e),t,3)}function Nz(e,t){return ht(e.getUTCMilliseconds(),t,3)}function SK(e,t){return Nz(e,t)+"000"}function _K(e,t){return ht(e.getUTCMonth()+1,t,2)}function wK(e,t){return ht(e.getUTCMinutes(),t,2)}function CK(e,t){return ht(e.getUTCSeconds(),t,2)}function DK(e){var t=e.getUTCDay();return t===0?7:t}function $K(e,t){return ht(ah.count(hs(e)-1,e),t,2)}function Rz(e){var t=e.getUTCDay();return t>=4||t===0?Ad(e):Ad.ceil(e)}function MK(e,t){return e=Rz(e),ht(Ad.count(hs(e),e)+(hs(e).getUTCDay()===4),t,2)}function TK(e){return e.getUTCDay()}function kK(e,t){return ht(Ky.count(hs(e)-1,e),t,2)}function FK(e,t){return ht(e.getUTCFullYear()%100,t,2)}function OK(e,t){return e=Rz(e),ht(e.getUTCFullYear()%100,t,2)}function NK(e,t){return ht(e.getUTCFullYear()%1e4,t,4)}function RK(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ad(e):Ad.ceil(e),ht(e.getUTCFullYear()%1e4,t,4)}function zK(){return"+0000"}function rN(){return"%"}function aN(e){return+e}function sN(e){return Math.floor(+e/1e3)}var Bf,$3,zz,M3,Bz;BK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function BK(e){return Bf=kz(e),$3=Bf.format,zz=Bf.parse,M3=Bf.utcFormat,Bz=Bf.utcParse,Bf}function ag(e){const t={};return n=>t[n]||(t[n]=e(n))}function LK(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=UK(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function UK(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function Lz(e){const t=ag(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=oc(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return LK(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=oc(s??",f");const o=Nu(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=uz(o,l))||(s.precision=f),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=lz(o,l))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=oz(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let iw;Uz();function Uz(){return iw=Lz({format:Ob,formatPrefix:S3})}function Iz(e){return Lz(sz(e))}function Jy(e){return arguments.length?iw=Iz(e):iw}function oN(e,t,n){n=n||{},Ue(n)||ne(`Invalid time multi-format specifier: ${n}`);const i=t(Kr),r=t($r),a=t(Dr),s=t(er),o=t(En),l=t(gi),f=t(Ji),d=t(Jn),h=e(n[Ca]||".%L"),p=e(n[Kr]||":%S"),y=e(n[$r]||"%I:%M"),v=e(n[Dr]||"%I %p"),b=e(n[er]||n[ci]||"%a %d"),E=e(n[En]||"%b %d"),S=e(n[gi]||"%B"),_=e(n[Ji]||"%B"),w=e(n[Jn]||"%Y");return C=>(i(C)<C?h:r(C)<C?p:a(C)<C?y:s(C)<C?v:l(C)<C?o(C)<C?b:E:d(C)<C?f(C)<C?S:_:w)(C)}function jz(e){const t=ag(e.format),n=ag(e.utcFormat);return{timeFormat:i=>ut(i)?t(i):oN(t,sh,i),utcFormat:i=>ut(i)?n(i):oN(n,oh,i),timeParse:ag(e.parse),utcParse:ag(e.utcParse)}}let rw;Pz();function Pz(){return rw=jz({format:$3,parse:zz,utcFormat:M3,utcParse:Bz})}function qz(e){return jz(kz(e))}function Pg(e){return arguments.length?rw=qz(e):rw}const aw=(e,t)=>He({},e,t);function Hz(e,t){const n=e?Iz(e):Jy(),i=t?qz(t):Pg();return aw(n,i)}function T3(e,t){const n=arguments.length;return n&&n!==2&&ne("defaultLocale expects either zero or two arguments."),n?aw(Jy(e),Pg(t)):aw(Jy(),Pg())}function IK(){return Uz(),Pz(),T3()}const jK=/^(data:|([A-Za-z]+:)?\/\/)/,PK=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,qK=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,uN="file://";function HK(e,t){return n=>({options:n||{},sanitize:YK,load:GK,fileAccess:!1,file:XK(t),http:WK(e)})}async function GK(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function YK(e,t){t=He({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=PK.test(e.replace(qK,""));(e==null||typeof e!="string"||!o)&&ne("Sanitize failure, invalid URI: "+_e(e));const l=jK.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(uN))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(uN.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function XK(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,a)=>{r?i(r):n(a)})}):VK}async function VK(){ne("No file system access.")}function WK(e){return e?async function(t,n){const i=He({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?Ye(a[r])?a[r]():a.text():ne(a.status+""+a.statusText)}:QK}async function QK(){ne("No HTTP fetch method available.")}const ZK=e=>e!=null&&e===e,KK=e=>e==="true"||e==="false"||e===!0||e===!1,JK=e=>!Number.isNaN(Date.parse(e)),Gz=e=>!Number.isNaN(+e)&&!(e instanceof Date),eJ=e=>Gz(e)&&Number.isInteger(+e),sw={boolean:b3,integer:fi,number:fi,date:x3,string:E3,unknown:Ni},F1=[KK,eJ,Gz,JK],tJ=["boolean","integer","number","date"];function Yz(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=F1.length,r=F1.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&ZK(l)&&!F1[o](l)&&(r[o]=0,++s,s===F1.length))return"string";return tJ[r.reduce((a,s)=>a===0?s:a,0)-1]}function Xz(e,t){return t.reduce((n,i)=>(n[i]=Yz(e,i),n),{})}function lN(e){const t=function(n,i){const r={delimiter:e};return k3(n,i?He(i,r):r)};return t.responseType="text",t}function k3(e,t){return t.header&&(e=t.header.map(_e).join(t.delimiter)+`
`+e),RQ(t.delimiter).parse(e+"")}k3.responseType="text";function nJ(e){return typeof Buffer=="function"&&Ye(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function F3(e,t){const n=t&&t.property?Qr(t.property):Ni;return Ue(e)&&!nJ(e)?iJ(n(e),t):n(JSON.parse(e))}F3.responseType="json";function iJ(e,t){return!we(e)&&U7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const rJ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Vz(e,t){let n,i,r,a;return e=F3(e,t),t&&t.feature?(n=UQ,r=t.feature):t&&t.mesh?(n=jQ,r=t.mesh,a=rJ[t.filter]):ne("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ne("Invalid TopoJSON object: "+r),i&&i.features||[i]}Vz.responseType="json";const yy={dsv:k3,csv:lN(","),tsv:lN("	"),json:F3,topojson:Vz};function O3(e,t){return arguments.length>1?(yy[e]=t,this):Ne(yy,e)?yy[e]:null}function Wz(e){const t=O3(e);return t&&t.responseType||"text"}function Qz(e,t,n,i){t=t||{};const r=O3(t.type||"json");return r||ne("Unknown data format type: "+t.type),e=r(e,t),t.parse&&aJ(e,t.parse,n,i),Ne(e,"columns")&&delete e.columns,e}function aJ(e,t,n,i){if(!e.length)return;const r=Pg();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,f,d,h;t==="auto"&&(t=Xz(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,E;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),E=b[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(b[0]==="utc"?i:n)(E);if(!sw[v])throw Error("Illegal format pattern: "+y+":"+v);return sw[v]});for(l=0,d=e.length,h=a.length;l<d;++l)for(s=e[l],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const Ub=HK(typeof fetch<"u"&&fetch,null);function Ib(e){const t=e||Ni,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function vy(e,t){try{await t(e)}catch(n){e.error(n)}}const Zz=Symbol("vega_id");let sJ=1;function jb(e){return!!(e&&Me(e))}function Me(e){return e[Zz]}function Kz(e,t){return e[Zz]=t,e}function yt(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:Kz(t,sJ++)}function N3(e){return Pb(e,yt({}))}function Pb(e,t){for(const n in e)t[n]=e[n];return t}function Jz(e,t){return Kz(t,Me(e))}function Oc(e,t){return e?t?(n,i)=>e(n,i)||Me(t(n))-Me(t(i)):(n,i)=>e(n,i)||Me(n)-Me(i):null}function eB(e){return e&&e.constructor===Nc}function Nc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:Nc,insert(o){const l=ke(o),f=l.length;for(let d=0;d<f;++d)e.push(l[d]);return this},remove(o){const l=Ye(o)?i:t,f=ke(o),d=f.length;for(let h=0;h<d;++h)l.push(f[h]);return this},modify(o,l,f){const d={field:l,value:bi(f)};return Ye(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return Ye(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const f={},d={};let h,p,y,v,b,E;for(h=0,p=l.length;h<p;++h)f[Me(l[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[Me(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],l.forEach(_=>{v(_)&&(f[Me(_)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],E=Me(b),f[E]?f[E]=1:o.add.push(yt(e[h]));for(h=0,p=l.length;h<p;++h)b=l[h],f[Me(b)]<0&&o.rem.push(b);function S(_,w,C){C?_[w]=C(_):o.encode=w,s||(d[Me(_)]=_)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,E=f[Me(b)],E>0&&(S(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,l.forEach(_=>{v(_)&&f[Me(_)]>0&&S(_,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(_=>f[Me(_)]>0):l.slice();else for(E in d)o.mod.push(d[E]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const by="_:mod:_";function qb(){Object.defineProperty(this,by,{writable:!0,value:{}})}qb.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[by];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=we(n)?1+n.length:-1),r},modified(e,t){const n=this[by];if(arguments.length){if(we(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[by]={},this}};let oJ=0;const uJ="pulse",lJ=new qb,cJ=1,fJ=2;function Ft(e,t,n,i){this.id=++oJ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function cN(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ft.prototype={targets(){return this._targets||(this._targets=Ib(vp))},set(e){return this.value!==e?(this.value=e,1):0},skip:cN(cJ),modified:cN(fJ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new qb,r=this._argops=this._argops||[],a=[];let s,o,l,f;const d=(h,p,y)=>{y instanceof Ft?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===uJ)ke(o).forEach(h=>{h instanceof Ft?h!==this&&(h.targets().add(this),a.push(h)):ne("Pulse parameters must be operator instances.")}),this.source=o;else if(we(o))for(i.set(s,-1,Array(l=o.length)),f=0;f<l;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||lJ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function dJ(e,t,n,i){let r=1,a;return e instanceof Ft?a=e:e&&e.prototype instanceof Ft?a=new e:Ye(e)?a=new Ft(null,e):(r=0,a=new Ft(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function hJ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let gJ=0;function Hb(e,t,n){this.id=++gJ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function lu(e,t,n){return new Hb(e,t,n)}Hb.prototype={_filter:Zr,_apply:Ni,targets(){return this._targets||(this._targets=Ib(vp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=lu(e);return this.targets().add(t),t},apply(e){const t=lu(null,e);return this.targets().add(t),t},merge(){const e=lu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=lu();return this.targets().add(lu(null,null,m3(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(lu(null,null,()=>n=!0)),t.targets().add(lu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Zr,this._targets=null}};function pJ(e,t,n,i){const r=this,a=lu(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=ke(e);const l=o.length;for(let f=0;f<l;++f)o[f].addEventListener(t,s);return a}function mJ(e,t){const n=this.locale();return Qz(e,t,n.timeParse,n.utcParse)}function yJ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function vJ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:Wz(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function bJ(e,t,n){const i=this,r=i._pending||xJ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Zr).insert(a.data||[])),r.done(),a}function xJ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const EJ={skip:!0};function AJ(e,t,n,i,r){return(e instanceof Ft?_J:SJ)(this,e,t,n,i,r),this}function SJ(e,t,n,i,r,a){const s=He({},a,EJ);let o,l;Ye(n)||(n=bi(n)),i===void 0?o=f=>e.touch(n(f)):Ye(i)?(l=new Ft(null,i,r,!1),o=f=>{l.evaluate(f);const d=n(f),h=l.value;eB(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function _J(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new Ft(null,wJ(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function wJ(e,t){return t=Ye(t)?t:bi(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function CJ(e){e.rank=++this._rank}function DJ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ne("Cycle detected in dataflow graph.")}const ev={},Za=1,du=2,Js=4,$J=Za|du,fN=Za|Js,Lf=Za|du|Js,dN=8,F0=16,hN=32,gN=64;function $u(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function pS(e,t){const n=[];return fu(e,t,i=>n.push(i)),n}function pN(e,t){const n={};return e.visit(t,i=>{n[Me(i)]=1}),i=>n[Me(i)]?null:i}function O1(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}$u.prototype={StopPropagation:ev,ADD:Za,REM:du,MOD:Js,ADD_REM:$J,ADD_MOD:fN,ALL:Lf,REFLOW:dN,SOURCE:F0,NO_SOURCE:hN,NO_FIELDS:gN,fork(e){return new $u(this.dataflow).init(this,e)},clone(){const e=this.fork(Lf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Lf|F0)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new $u(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&gN)&&(n.fields=e.fields),t&Za?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&du?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Js?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&hN?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Lf;return t&Za&&this.add.length||t&du&&this.rem.length||t&Js&&this.mod.length},reflow(e){if(e)return this.fork(Lf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Js,pN(this,Za))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return we(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?we(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Za&&(n.addF=O1(n.addF,t)),e&du&&(n.remF=O1(n.remF,t)),e&Js&&(n.modF=O1(n.modF,t)),e&F0&&(n.srcF=O1(n.srcF,t)),n},materialize(e){e=e||Lf;const t=this;return e&Za&&t.addF&&(t.add=pS(t.add,t.addF),t.addF=null),e&du&&t.remF&&(t.rem=pS(t.rem,t.remF),t.remF=null),e&Js&&t.modF&&(t.mod=pS(t.mod,t.modF),t.modF=null),e&F0&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&F0)return fu(n.source,n.srcF,i),n;e&Za&&fu(n.add,n.addF,i),e&du&&fu(n.rem,n.remF,i),e&Js&&fu(n.mod,n.modF,i);const r=n.source;if(e&dN&&r){const a=n.add.length+n.mod.length;a===r.length||(a?fu(r,pN(n,fN),i):fu(r,n.srcF,i))}return n}};function R3(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}pe(R3,$u,{fork(e){const t=new $u(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?we(e)?e.some(i=>n[i]):n[e]:0},filter(){ne("MultiPulse does not support filtering.")},materialize(){ne("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function MJ(e,t,n){const i=this,r=[];if(i._pulse)return tB(i);if(i._pending&&await i._pending,t&&await vy(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new $u(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Ib(vp);let s=0,o,l,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=ev),l!==ev&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await vy(i,d[h].callback)}return n&&await vy(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function TJ(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function kJ(e,t,n){return this._pulse?tB(this):(this.evaluate(e,t,n),this)}function FJ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function tB(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function OJ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function NJ(e,t){const n=e.source,i=this._clock;return n&&we(n)?new R3(this,i,n.map(r=>r.pulse),t):this._input[e.id]||RJ(this._pulse,n&&n.pulse)}function RJ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ev&&(e.source=t.source),e)}const z3={skip:!1,force:!1};function zJ(e,t){const n=t||z3;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function BJ(e,t,n){const i=n||z3;return(e.set(t)||i.force)&&this.touch(e,i),this}function LJ(e,t,n){this.touch(e,n||z3);const i=new $u(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function UJ(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),nB(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,IJ(t,0,e)):i=n,i}}}function nB(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function IJ(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,nB(e,i,t,n)}function ud(){this.logger(w7()),this.logLevel(f3),this._clock=0,this._rank=0,this._locale=T3();try{this._loader=Ub()}catch{}this._touched=Ib(vp),this._input={},this._pulse=null,this._heap=UJ((e,t)=>e.qrank-t.qrank),this._postrun=[]}function O0(e){return function(){return this._log[e].apply(this,arguments)}}ud.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:O0("error"),warn:O0("warn"),info:O0("info"),debug:O0("debug"),logLevel:O0("level"),cleanThreshold:1e4,add:dJ,connect:hJ,rank:CJ,rerank:DJ,pulse:LJ,touch:zJ,update:BJ,changeset:Nc,ingest:yJ,parse:mJ,preload:bJ,request:vJ,events:pJ,on:AJ,evaluate:MJ,run:kJ,runAsync:TJ,runAfter:FJ,_enqueue:OJ,_getPulse:NJ};function K(e,t){Ft.call(this,e,null,t)}pe(K,Ft,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const _d={};function iB(e){const t=rB(e);return t&&t.Definition||null}function rB(e){return e=e&&e.toLowerCase(),Ne(_d,e)?_d[e]:null}function*aB(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function B3(e,t,n){const i=Float64Array.from(aB(e,n));return i.sort(go),t.map(r=>tz(i,r))}function L3(e,t){return B3(e,[.25,.5,.75],t)}function U3(e,t){const n=e.length,i=WQ(e,t),r=L3(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function sB(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Jr=Math.random;function jJ(e){Jr=e}function oB(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(aB(e,i)),a=r.length,s=t;let o,l,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,l=0;l<a;++l)o+=r[~~(Jr()*a)];d[f]=o/a}return d.sort(go),[Z_(d,n/2),Z_(d,1-n/2)]}function uB(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),f=l,d=l+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(l+f)/2;s<o;++s)a[s]=f;d=h+t,l=h}f=h}for(f=(l+f)/2;s<o;++s)a[s]=f;return n?PJ(a,t+t/4):a}function PJ(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function qJ(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function HJ(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Jr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const lB=Math.sqrt(2*Math.PI),GJ=Math.SQRT2;let N0=NaN;function Gb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(N0===N0)n=N0,N0=NaN;else{do n=Jr()*2-1,i=Jr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,N0=i*a}return e+n*t}function I3(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*lB)}function Yb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function Xb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*GJ*YJ(2*e-1)}function YJ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function j3(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Gb(n,i),pdf:a=>I3(a,n,i),cdf:a=>Yb(a,n,i),icdf:a=>Xb(a,n,i)};return r.mean(e).stdev(t)}function P3(e,t){const n=j3();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=U3(e)),r):t},sample(){return e[~~(Jr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function q3(e,t){return e=e||0,t=t??1,Math.exp(e+Gb()*t)}function H3(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*lB*e)}function G3(e,t,n){return Yb(Math.log(e),t,n)}function Y3(e,t,n){return Math.exp(Xb(e,t,n))}function cB(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>q3(n,i),pdf:a=>H3(a,n,i),cdf:a=>G3(a,n,i),icdf:a=>Y3(a,n,i)};return r.mean(e).stdev(t)}function fB(e,t){let n=0,i;function r(s){const o=[];let l=0,f;for(f=0;f<n;++f)l+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Jr();let o=e[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(s<l){o=e[f];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function X3(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Jr()}function V3(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function W3(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Q3(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function dB(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>X3(n,i),pdf:a=>V3(a,n,i),cdf:a=>W3(a,n,i),icdf:a=>Q3(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function Z3(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Ep(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Vb(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,l+=(d-l)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=f;return[a,s,l,f]}function Ap(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function uh(e,t,n,i,r){let a=0,s=0;return Ap(e,t,n,(o,l)=>{const f=l-r(o),d=l-i;a+=f*f,s+=d*d}),1-a/s}function K3(e,t,n){let i=0,r=0,a=0,s=0,o=0;Ap(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Ep(i,r,a,s),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:uh(e,t,n,r,f)}}function hB(e,t,n){let i=0,r=0,a=0,s=0,o=0;Ap(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Ep(i,r,a,s),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:uh(e,t,n,r,f)}}function gB(e,t,n){const[i,r,a,s]=Vb(e,t,n);let o=0,l=0,f=0,d=0,h=0,p,y,v;Ap(e,t,n,(_,w)=>{p=i[h++],y=Math.log(w),v=p*w,o+=(w*y-o)/h,l+=(v-l)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,E]=Ep(l/s,o/s,f/s,d/s),S=_=>Math.exp(b+E*(_-a));return{coef:[Math.exp(b-E*a),E],predict:S,rSquared:uh(e,t,n,s,S)}}function pB(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Ap(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const f=Ep(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:uh(e,t,n,o,d)}}function J3(e,t,n){const[i,r,a,s]=Vb(e,t,n),o=i.length;let l=0,f=0,d=0,h=0,p=0,y,v,b,E;for(y=0;y<o;)v=i[y],b=r[y++],E=v*v,l+=(E-l)/y,f+=(E*v-f)/y,d+=(E*E-d)/y,h+=(v*b-h)/y,p+=(E*b-p)/y;const S=d-l*l,_=l*S-f*f,w=(p*l-h*f)/_,C=(h*S-p*f)/_,$=-w*l,T=D=>(D=D-a,w*D*D+C*D+$+s);return{coef:[$-C*a+w*a*a+s,C-2*w*a,w],predict:T,rSquared:uh(e,t,n,s,T)}}function mB(e,t,n,i){if(i===0)return Z3(e,t,n);if(i===1)return K3(e,t,n);if(i===2)return J3(e,t,n);const[r,a,s,o]=Vb(e,t,n),l=r.length,f=[],d=[],h=i+1;let p,y,v,b,E;for(p=0;p<h;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),E=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);E[y]=b}d.push(E)}d.push(f);const S=VJ(d),_=w=>{w-=s;let C=o+S[0]+S[1]*w+S[2]*w*w;for(p=3;p<h;++p)C+=S[p]*Math.pow(w,p);return C};return{coef:XJ(h,S,-s,o),predict:_,rSquared:uh(e,t,n,o,_)}}function XJ(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function VJ(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const mN=2,yN=1e-12;function yB(e,t,n,i){const[r,a,s,o]=Vb(e,t,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=mN;){const v=[0,f-1];for(let E=0;E<l;++E){const S=r[E],_=v[0],w=v[1],C=S-r[_]>r[w]-S?_:w;let $=0,T=0,D=0,F=0,O=0;const U=1/Math.abs(r[C]-S||1);for(let B=_;B<=w;++B){const j=r[B],I=a[B],N=WJ(Math.abs(S-j)*U)*p[B],q=j*N;$+=N,T+=q,D+=I*N,F+=I*q,O+=j*q}const[z,G]=Ep(T/$,D/$,F/$,O/$);d[E]=z+G*S,h[E]=Math.abs(a[E]-d[E]),QJ(r,E+1,v)}if(y===mN)break;const b=nz(h);if(Math.abs(b)<yN)break;for(let E=0,S,_;E<l;++E)S=h[E]/(6*b),p[E]=S>=1?yN:(_=1-S*S)*_}return ZJ(r,d,s,o)}function WJ(e){return(e=1-e*e*e)*e*e}function QJ(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function ZJ(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],f;for(;s<r;++s)f=e[s]+n,l[0]===f?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[f,t[s]],a.push(l));return l[1]+=i,a}const KJ=.5*Math.PI/180;function Wb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=JJ(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=l&&eee(h,b,p,y,v)>KJ?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function JJ(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function eee(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function tee(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function ow(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:tee(e)}function vB(e,t,n){return n||e+(t?"_"+t:"")}const mS=()=>{},nee={init:mS,add:mS,rem:mS,idx:0},qg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Sp=Object.keys(qg).filter(e=>e!=="__count__");function iee(e,t){return(n,i)=>He({name:e,aggregate_param:i,out:n||e},nee,t)}[...Sp,"__count__"].forEach(e=>{qg[e]=iee(e,qg[e])});function bB(e,t,n){return qg[e](n,t)}function xB(e,t){return e.idx-t.idx}function ree(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=qg[r]())})};return e.forEach(n),Object.values(t).sort(xB)}function aee(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function see(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function oee(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function uee(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function EB(e,t){const n=t||Ni,i=ree(e),r=e.slice().sort(xB);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=aee,a.prototype.add=see,a.prototype.rem=oee,a.prototype.set=uee,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function eD(e){this._key=e?Qr(e):Me,this.reset()}const ti=eD.prototype;ti.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ti.add=function(e){this._add.push(e)};ti.rem=function(e){this._rem.push(e)};ti.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};ti.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Ne(n,a)||(n[a]=1,++r);return r};ti.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=B7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ti.argmin=function(e){return this.extent(e)[0]||{}};ti.argmax=function(e){return this.extent(e)[1]||{}};ti.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ti.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ti.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=L3(this.values(),e),this._get=e),this._q};ti.q1=function(e){return this.quartile(e)[0]};ti.q2=function(e){return this.quartile(e)[1]};ti.q3=function(e){return this.quartile(e)[2]};ti.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=oB(this.values(),1e3,.05,e),this._get=e),this._ci};ti.ci0=function(e){return this.ci(e)[0]};ti.ci1=function(e){return this.ci(e)[1]};function Ru(e){K.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ru.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Sp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};pe(Ru,K,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,f,d,h;for(l in o)for(d=o[l].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,l,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;l[d]=h[p],f<r?s(y,l,f):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(_){const w=ke(hi(_)),C=w.length;let $=0,T;for(;$<C;++$)i[T=w[$]]||(i[T]=1,t.push(T))}this._dims=ke(e.groupby),this._dnames=this._dims.map(_=>{const w=Jt(_);return r(_),n.push(w),w}),this.cellkey=e.key?e.key:ow(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],f=a.length,d={};let h,p,y,v,b,E,S;for(f!==s.length&&ne("Unmatched number of fields and aggregate ops."),S=0;S<f;++S){if(h=a[S],p=s[S],y=o[S]||null,h==null&&p!=="count"&&ne("Null aggregate field specified."),b=Jt(h),E=vB(p,b,l[S]),n.push(E),p==="count"){this._counts.push(E);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(bB(p,y,E))}return this._measures=this._measures.map(_=>EB(_,_.field)),Object.create(null)},cellkey:ow(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new eD),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?Jz(t.tuple,a):yt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,f,d,h;if(i)for(f in i)l=i[f],(!r||l.num)&&s.push(l.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const lee=1e-14;function tD(e){K.call(this,null,e)}tD.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};pe(tD,K,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(hi(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[l]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=sB(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(f){let d=fi(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(lee+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=ar(l,hi(t),e.name||"bin_"+Jt(t))}});function AB(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&l&&r.sort(l),a.length&&(r=l?q7(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function nD(e){K.call(this,[],e)}nD.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};pe(nD,K,{transform(e,t){const n=t.fork(t.ALL),i=AB(Me,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(Oc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function SB(e){Ft.call(this,null,cee,e)}pe(SB,Ft);function cee(e){return this.value&&!e.modified()?this.value:p3(e.fields,e.orders)}function iD(e){K.call(this,null,e)}iD.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function fee(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}pe(iD,K,{transform(e,t){const n=h=>p=>{for(var y=fee(o(p),e.case,a)||[],v,b=0,E=y.length;b<E;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,f;for(o in n)l=i[o],f=n[o]||0,!l&&f?(i[o]=l=yt({}),l[r]=o,l[a]=f,s.add.push(l)):f===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==f&&(l[a]=f,s.mod.push(l));return s.modifies(t)}});function rD(e){K.call(this,null,e)}rD.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};pe(rD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=dee(o,r,a,e.filter||Zr)):n.mod=o,n.source=this.value,n.modifies(i)}});function dee(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,f;o<s;++o)for(a[t]=f=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(yt(a)),a={},a[t]=f);return r}const vN={kde:P3,mixture:fB,normal:j3,lognormal:cB,uniform:dB},hee="distributions",bN="function",gee="field";function _B(e,t){const n=e[bN];Ne(vN,n)||ne("Unknown distribution function: "+n);const i=vN[n]();for(const r in e)r===gee?i.data((e.from||t()).map(e[r])):r===hee?i[r](e[r].map(a=>_B(a,t))):typeof i[r]===bN&&i[r](e[r]);return i}function aD(e){K.call(this,null,e)}const wB=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],pee={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:wB},{name:"weights",type:"number",array:!0}]};aD.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:wB.concat(pee)},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(aD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=_B(e.distribution,mee(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ne("Invalid density method: "+s),!e.extent&&!i.data&&ne("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||fs(i.data()),f=Wb(s,l,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],yt(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function mee(e){return()=>e.materialize(e.SOURCE).source}function CB(e,t){return e?e.map((n,i)=>t[i]||Jt(n)):null}function sD(e,t,n){const i=[],r=h=>h(l);let a,s,o,l,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const DB="bin";function oD(e){K.call(this,null,e)}oD.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:DB}]};const yee=(e,t)=>xp(fs(e,t))/30;pe(oD,K,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=sD(t.source,e.groupby,Ni),r=e.smooth||!1,a=e.field,s=e.step||yee(n,a),o=Oc((v,b)=>a(v)-a(b)),l=e.as||DB,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of uB(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][l]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(l)}});function $B(e){Ft.call(this,null,vee,e),this.modified(!0)}pe($B,Ft);function vee(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ar(n=>t(n,e),hi(t),Jt(t))}function uD(e){K.call(this,[void 0,void 0],e)}uD.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};pe(uD,K,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=fi(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=Jt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function lD(e,t){Ft.call(this,e),this.parent=t,this.count=0}pe(lD,Ft,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Qb(e){K.call(this,{},e),this._keys=nh();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}pe(Qb,K,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Ne(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new lD(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const f=Me(l),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(l))}),t.visit(t.ADD,l=>{const f=i(l);a.set(Me(l),f),o(f).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const f=Me(l),d=a.get(f),h=i(l);d===h?o(h).mod(l):(a.set(f,h),o(d).rem(l),o(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(Me(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const f=Me(l),d=a.get(f),h=i(l);d!==h&&(a.set(f,h),o(d).rem(l),o(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function MB(e){Ft.call(this,null,bee,e)}pe(MB,Ft);function bee(e){return this.value&&!e.modified()?this.value:we(e.name)?ke(e.name).map(t=>Qr(t)):Qr(e.name,e.as)}function cD(e){K.call(this,nh(),e)}cD.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};pe(cD,K,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let f=!0;t.visit(t.REM,h=>{const p=Me(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?a.push(h):i.set(Me(h),1)});function d(h){const p=Me(h),y=l(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function fD(e){K.call(this,[],e)}fD.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};pe(fD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=CB(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),f=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=N3(o),h=0;h<s;++h)p[r[h]]=(y=l[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function dD(e){K.call(this,[],e)}dD.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};pe(dD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Jt),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<l;++d)h=N3(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function hD(e){K.call(this,null,e)}hD.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};pe(hD,K,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function TB(e){K.call(this,[],e)}pe(TB,K,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=yt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const N1={value:"value",median:nz,mean:tZ,min:Q_,max:Kl},xee=[];function gD(e){K.call(this,[],e)}gD.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Eee(e){var t=e.method||N1.value,n;if(N1[t]==null)ne("Unrecognized imputation method: "+t);else return t===N1.value?(n=e.value!==void 0?e.value:0,()=>n):N1[t]}function Aee(e){const t=e.field;return n=>n?t(n):NaN}pe(gD,K,{transform(e,t){var n=t.fork(t.ALL),i=Eee(e),r=Aee(e),a=Jt(e.field),s=Jt(e.key),o=(e.groupby||[]).map(Jt),l=See(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=l.domain.length,p,y,v,b,E,S,_,w,C,$;for(E=0,w=l.length;E<w;++E)for(p=l[E],v=p.values,y=NaN,_=0;_<h;++_)if(p[_]==null){for(b=l.domain[_],$={_impute:!0},S=0,C=v.length;S<C;++S)$[o[S]]=v[S];$[s]=b,$[a]=Number.isNaN(y)?y=i(p,r):y,f.push(yt($))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function See(e,t,n,i){var r=S=>S(E),a=[],s=i?i.slice():[],o={},l={},f,d,h,p,y,v,b,E;for(s.forEach((S,_)=>o[S]=_+1),p=0,b=e.length;p<b;++p)E=e[p],v=n(E),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):xee)+"",(h=l[d])||(h=l[d]=[],a.push(h),h.values=f),h[y-1]=E;return a.domain=s,a}function pD(e){Ru.call(this,e)}pD.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Sp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};pe(pD,Ru,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{He(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function mD(e){K.call(this,null,e)}mD.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(mD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=sD(i,e.groupby,e.field),a=(e.groupby||[]).map(Jt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&ne("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=fs(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=P3(y,s)[o],b=e.counts?y.length:1,E=d||fs(y);Wb(v,E,h,p).forEach(S=>{const _={};for(let w=0;w<a.length;++w)_[a[w]]=y.dims[w];_[l[0]]=S[0],_[l[1]]=S[1]*b,f.push(yt(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function kB(e){Ft.call(this,null,_ee,e)}pe(kB,Ft);function _ee(e){return this.value&&!e.modified()?this.value:v3(e.fields,e.flat)}function FB(e){K.call(this,[],e),this._pending=null}pe(FB,K,{transform(e,t){const n=t.dataflow;return this._pending?yS(this,t,this._pending):wee(e)?t.StopPropagation:e.values?yS(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ke(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>yS(this,t,ke(i.data)))}});function wee(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function yS(e,t,n){n.forEach(yt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function yD(e){K.call(this,{},e)}yD.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};pe(yD,K,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&ne('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&ne('The "as" parameter has too few output field names.'),d=d||r.map(Jt),h=function(v){for(var b=0,E=0,S,_;b<o;++b)if(_=i.get(n[b](v)),_==null)for(S=0;S<p;++S,++E)v[d[E]]=a;else for(S=0;S<p;++S,++E)v[d[E]]=r[S](_)}):(d||ne("Missing output field names."),h=function(v){for(var b=0,E;b<o;++b)E=i.get(n[b](v)),v[d[b]]=E??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,h),f.modifies(d)}});function OB(e){Ft.call(this,null,Cee,e)}pe(OB,Ft);function Cee(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function NB(e){Ft.call(this,null,Dee,e)}pe(NB,Ft);function Dee(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function RB(e){K.call(this,null,e)}pe(RB,K,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vD(e){Ru.call(this,e)}vD.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Sp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};pe(vD,Ru,{_transform:Ru.prototype.transform,transform(e,t){return this._transform($ee(e,t),t)}});function $ee(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=hi(n).concat(hi(i)),s=Tee(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>Mee(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function Mee(e,t,n,i){return ar(r=>t(r)===e?n(r):NaN,i,e+"")}function Tee(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(bp),t?r.slice(0,t):r}function zB(e){Qb.call(this,e)}pe(zB,Qb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(Me(a),n,t,a);return(e.modified("field")||i&&t.modified(hi(i)))&&ne("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(yt(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function bD(e){K.call(this,null,e)}bD.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};pe(bD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=CB(e.fields,e.as||[]),a=i?(o,l)=>kee(o,l,i,r):Pb;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=Me(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,yt({}));s[Me(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[Me(o)]))}),n}});function kee(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function BB(e){K.call(this,null,e)}pe(BB,K,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function xD(e){K.call(this,null,e)}xD.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Fee=1e-14;pe(xD,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=sD(r,e.groupby,e.field),s=(e.groupby||[]).map(Jt),o=[],l=e.step||.01,f=e.probs||Er(l/2,1-Fee,l),d=f.length;return a.forEach(h=>{const p=B3(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(yt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function LB(e){K.call(this,null,e)}pe(LB,K,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=Me(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=N3(r);i[Me(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[Me(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function ED(e){K.call(this,[],e),this.count=0}ED.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};pe(ED,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[Me(h)]=1,d),{});let s=this.value,o=this.count,l=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Jr()),p<s.length&&p>=l&&(h=s[p],a[Me(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=Me(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[Me(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[Me(d)]||f(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[Me(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[Me(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[Me(d)])),this.count=o,this.value=n.source=s,n}});function AD(e){K.call(this,null,e)}AD.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};pe(AD,K,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Er(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,yt(a)}),n.add=t.add.concat(this.value),n}});function UB(e){K.call(this,null,e),this.modified(!0)}pe(UB,K,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function SD(e){K.call(this,null,e)}const IB=["unit0","unit1"];SD.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:w3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:IB}]};pe(SD,K,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?oh:sh)(a.unit).offset,o=e.as||IB,l=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(hi(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let E,S;b==null?(v[l]=null,i&&(v[f]=null)):(v[l]=E=S=a(b),i&&(v[f]=S=s(E,d)),E<h&&(h=E),S>p&&(p=S))}),a.start=h,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:Tz({extent:e.extent||fs(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=C3(i),s=this.value||{},o=(n?Ez:xz)(a,r);return o.unit=nt(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function jB(e){K.call(this,nh(),e)}pe(jB,K,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function PB(e){K.call(this,null,e)}pe(PB,K,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Oc(e.sort)):t.source).map(e.field))}});function Oee(e,t,n,i){const r=Hg[e](t,n);return{init:r.init||mu,update:function(a,s){s[i]=r.next(a)}}}const Hg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Hg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ne("ntile num must be greater than zero.");const n=Hg.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ne("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=Nee(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function Nee(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Ree=Object.keys(Hg);function qB(e){const t=ke(e.ops),n=ke(e.fields),i=ke(e.params),r=ke(e.aggregate_params),a=ke(e.as),s=this.outputs=[],o=this.windows=[],l={},f={},d=[],h=[];let p=!0;function y(v){ke(hi(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const E=n[b],S=i[b],_=r[b]||null,w=Jt(E),C=vB(v,w,a[b]);if(y(E),s.push(C),Ne(Hg,v))o.push(Oee(v,E,S,C));else{if(E==null&&v!=="count"&&ne("Null aggregate field specified."),v==="count"){d.push(C);return}p=!1;let $=f[w];$||($=f[w]=[],$.field=E,h.push($)),$.push(bB(v,_,C))}}),(d.length||h.length)&&(this.cell=zee(h,d,p)),this.inputs=Object.keys(l)}const HB=qB.prototype;HB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};HB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function zee(e,t,n){e=e.map(l=>EB(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new eD;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)l[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function _D(e){K.call(this,{},e),this._mlen=0,this._mods=[]}_D.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ree.concat(Sp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};pe(_D,K,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Oc(e.sort),r=ow(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new qB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)Bee(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=AB(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Bee(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,f=a?ih(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||bi(-1)};t.init();for(let h=0;h<l;++h)Lee(d,s,h,l),a&&Uee(d,f),t.update(d,o[h])}function Lee(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Uee(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const Iee=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Ru,bin:tD,collect:nD,compare:SB,countpattern:iD,cross:rD,density:aD,dotbin:oD,expression:$B,extent:uD,facet:Qb,field:MB,filter:cD,flatten:fD,fold:dD,formula:hD,generate:TB,impute:gD,joinaggregate:pD,kde:mD,key:kB,load:FB,lookup:yD,multiextent:OB,multivalues:NB,params:RB,pivot:vD,prefacet:zB,project:bD,proxy:BB,quantile:xD,relay:LB,sample:ED,sequence:AD,sieve:UB,subflow:lD,timeunit:SD,tupleindex:jB,values:PB,window:_D},Symbol.toStringTag,{value:"Module"}));function vt(e){return function(){return e}}const xN=Math.abs,ai=Math.atan2,Cl=Math.cos,jee=Math.max,vS=Math.min,Ya=Math.sin,Yl=Math.sqrt,oi=1e-12,wd=Math.PI,tv=wd/2,GB=2*wd;function Pee(e){return e>1?0:e<-1?wd:Math.acos(e)}function EN(e){return e>=1?tv:e<=-1?-tv:Math.asin(e)}const uw=Math.PI,lw=2*uw,Ll=1e-6,qee=lw-Ll;function YB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let wD=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YB:Hee(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Ll)if(!(Math.abs(h*l-f*d)>Ll)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+f*f,E=y*y+v*v,S=Math.sqrt(b),_=Math.sqrt(p),w=a*Math.tan((uw-Math.acos((b+p-E)/(2*S*_)))/2),C=w/_,$=w/S;Math.abs(C-1)>Ll&&this._append`L${t+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+$*l},${this._y1=n+$*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),f=t+o,d=n+l,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Ll||Math.abs(this._y1-d)>Ll)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%lw+lw),p>qee?this._append`A${i},${i},0,1,${h},${t-o},${n-l}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>Ll&&this._append`A${i},${i},0,${+(p>=uw)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Zb(){return new wD}Zb.prototype=wD.prototype;function Kb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new wD(t)}function Gee(e){return e.innerRadius}function Yee(e){return e.outerRadius}function Xee(e){return e.startAngle}function Vee(e){return e.endAngle}function Wee(e){return e&&e.padAngle}function Qee(e,t,n,i,r,a,s,o){var l=n-e,f=i-t,d=s-r,h=o-a,p=h*l-d*f;if(!(p*p<oi))return p=(d*(t-a)-h*(e-r))/p,[e+p*l,t+p*f]}function R1(e,t,n,i,r,a,s){var o=e-n,l=t-i,f=(s?a:-a)/Yl(o*o+l*l),d=f*l,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,E=(p+v)/2,S=(y+b)/2,_=v-p,w=b-y,C=_*_+w*w,$=r-a,T=p*b-v*y,D=(w<0?-1:1)*Yl(jee(0,$*$*C-T*T)),F=(T*w-_*D)/C,O=(-T*_-w*D)/C,U=(T*w+_*D)/C,z=(-T*_+w*D)/C,G=F-E,B=O-S,j=U-E,I=z-S;return G*G+B*B>j*j+I*I&&(F=U,O=z),{cx:F,cy:O,x01:-d,y01:-h,x11:F*(r/$-1),y11:O*(r/$-1)}}function Zee(){var e=Gee,t=Yee,n=vt(0),i=null,r=Xee,a=Vee,s=Wee,o=null,l=Kb(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-tv,b=a.apply(this,arguments)-tv,E=xN(b-v),S=b>v;if(o||(o=d=l()),y<p&&(h=y,y=p,p=h),!(y>oi))o.moveTo(0,0);else if(E>GB-oi)o.moveTo(y*Cl(v),y*Ya(v)),o.arc(0,0,y,v,b,!S),p>oi&&(o.moveTo(p*Cl(b),p*Ya(b)),o.arc(0,0,p,b,v,S));else{var _=v,w=b,C=v,$=b,T=E,D=E,F=s.apply(this,arguments)/2,O=F>oi&&(i?+i.apply(this,arguments):Yl(p*p+y*y)),U=vS(xN(y-p)/2,+n.apply(this,arguments)),z=U,G=U,B,j;if(O>oi){var I=EN(O/p*Ya(F)),N=EN(O/y*Ya(F));(T-=I*2)>oi?(I*=S?1:-1,C+=I,$-=I):(T=0,C=$=(v+b)/2),(D-=N*2)>oi?(N*=S?1:-1,_+=N,w-=N):(D=0,_=w=(v+b)/2)}var q=y*Cl(_),Y=y*Ya(_),J=p*Cl($),R=p*Ya($);if(U>oi){var V=y*Cl(w),se=y*Ya(w),oe=p*Cl(C),ge=p*Ya(C),Se;if(E<wd)if(Se=Qee(q,Y,oe,ge,V,se,J,R)){var De=q-Se[0],en=Y-Se[1],at=V-Se[0],ye=se-Se[1],Ie=1/Ya(Pee((De*at+en*ye)/(Yl(De*De+en*en)*Yl(at*at+ye*ye)))/2),qe=Yl(Se[0]*Se[0]+Se[1]*Se[1]);z=vS(U,(p-qe)/(Ie-1)),G=vS(U,(y-qe)/(Ie+1))}else z=G=0}D>oi?G>oi?(B=R1(oe,ge,q,Y,y,G,S),j=R1(V,se,J,R,y,G,S),o.moveTo(B.cx+B.x01,B.cy+B.y01),G<U?o.arc(B.cx,B.cy,G,ai(B.y01,B.x01),ai(j.y01,j.x01),!S):(o.arc(B.cx,B.cy,G,ai(B.y01,B.x01),ai(B.y11,B.x11),!S),o.arc(0,0,y,ai(B.cy+B.y11,B.cx+B.x11),ai(j.cy+j.y11,j.cx+j.x11),!S),o.arc(j.cx,j.cy,G,ai(j.y11,j.x11),ai(j.y01,j.x01),!S))):(o.moveTo(q,Y),o.arc(0,0,y,_,w,!S)):o.moveTo(q,Y),!(p>oi)||!(T>oi)?o.lineTo(J,R):z>oi?(B=R1(J,R,V,se,p,-z,S),j=R1(q,Y,oe,ge,p,-z,S),o.lineTo(B.cx+B.x01,B.cy+B.y01),z<U?o.arc(B.cx,B.cy,z,ai(B.y01,B.x01),ai(j.y01,j.x01),!S):(o.arc(B.cx,B.cy,z,ai(B.y01,B.x01),ai(B.y11,B.x11),!S),o.arc(0,0,p,ai(B.cy+B.y11,B.cx+B.x11),ai(j.cy+j.y11,j.cx+j.x11),S),o.arc(j.cx,j.cy,z,ai(j.y11,j.x11),ai(j.y01,j.x01),!S))):o.arc(0,0,p,$,C,S)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-wd/2;return[Cl(h)*d,Ya(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:vt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:vt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:vt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:vt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:vt(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function XB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VB(e){this._context=e}VB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function CD(e){return new VB(e)}function WB(e){return e[0]}function QB(e){return e[1]}function ZB(e,t){var n=vt(!0),i=null,r=CD,a=null,s=Kb(o);e=typeof e=="function"?e:e===void 0?WB:vt(e),t=typeof t=="function"?t:t===void 0?QB:vt(t);function o(l){var f,d=(l=XB(l)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=l[f],f,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,l),+t(h,f,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:vt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:vt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:vt(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function KB(e,t,n){var i=null,r=vt(!0),a=null,s=CD,o=null,l=Kb(f);e=typeof e=="function"?e:e===void 0?WB:vt(+e),t=typeof t=="function"?t:vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?QB:vt(+n);function f(h){var p,y,v,b=(h=XB(h)).length,E,S=!1,_,w=new Array(b),C=new Array(b);for(a==null&&(o=s(_=l())),p=0;p<=b;++p){if(!(p<b&&r(E=h[p],p,h))===S)if(S=!S)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(w[v],C[v]);o.lineEnd(),o.areaEnd()}S&&(w[p]=+e(E,p,h),C[p]=+t(E,p,h),o.point(i?+i(E,p,h):w[p],n?+n(E,p,h):C[p]))}if(_)return o=null,_+""||null}function d(){return ZB().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:vt(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:vt(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:vt(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:vt(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:vt(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:vt(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:vt(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const Kee={draw(e,t){const n=Yl(t/wd);e.moveTo(n,0),e.arc(0,0,n,0,GB)}};function Jee(e,t){let n=null,i=Kb(r);e=typeof e=="function"?e:vt(e||Kee),t=typeof t=="function"?t:vt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:vt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:vt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function zu(){}function nv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jb(e){this._context=e}Jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ete(e){return new Jb(e)}function JB(e){this._context=e}JB.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tte(e){return new JB(e)}function eL(e){this._context=e}eL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:nv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nte(e){return new eL(e)}function tL(e,t){this._basis=new Jb(e),this._beta=t}tL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const ite=function e(t){function n(i){return t===1?new Jb(i):new tL(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function iv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function DD(e,t){this._context=e,this._k=(1-t)/6}DD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:iv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rte=function e(t){function n(i){return new DD(i,t)}return n.tension=function(i){return e(+i)},n}(0);function $D(e,t){this._context=e,this._k=(1-t)/6}$D.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ate=function e(t){function n(i){return new $D(i,t)}return n.tension=function(i){return e(+i)},n}(0);function MD(e,t){this._context=e,this._k=(1-t)/6}MD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ste=function e(t){function n(i){return new MD(i,t)}return n.tension=function(i){return e(+i)},n}(0);function TD(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>oi){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>oi){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function nL(e,t){this._context=e,this._alpha=t}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:TD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ote=function e(t){function n(i){return t?new nL(i,t):new DD(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function iL(e,t){this._context=e,this._alpha=t}iL.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:TD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ute=function e(t){function n(i){return t?new iL(i,t):new $D(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function rL(e,t){this._context=e,this._alpha=t}rL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:TD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lte=function e(t){function n(i){return t?new rL(i,t):new MD(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function aL(e){this._context=e}aL.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cte(e){return new aL(e)}function AN(e){return e<0?-1:1}function SN(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(AN(a)+AN(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function _N(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bS(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function rv(e){this._context=e}rv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bS(this,this._t0,_N(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bS(this,_N(this,n=SN(this,e,t)),n);break;default:bS(this,this._t0,n=SN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function sL(e){this._context=new oL(e)}(sL.prototype=Object.create(rv.prototype)).point=function(e,t){rv.prototype.point.call(this,t,e)};function oL(e){this._context=e}oL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function fte(e){return new rv(e)}function dte(e){return new sL(e)}function uL(e){this._context=e}uL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=wN(e),r=wN(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function wN(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function hte(e){return new uL(e)}function e2(e,t){this._context=e,this._t=t}e2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function gte(e){return new e2(e,.5)}function pte(e){return new e2(e,0)}function mte(e){return new e2(e,1)}function Mu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const yte=()=>typeof Image<"u"?Image:null;function xs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cw=Symbol("implicit");function kD(){var e=new PO,t=[],n=[],i=cw;function r(a){let s=e.get(a);if(s===void 0){if(i!==cw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new PO;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return kD(t,n).unknown(i)},xs.apply(r,arguments),r}function lh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _p(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Wu(){}var uc=.7,Cd=1/uc,ld="\\s*([+-]?\\d+)\\s*",Gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",as="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vte=/^#([0-9a-f]{3,8})$/,bte=new RegExp(`^rgb\\(${ld},${ld},${ld}\\)$`),xte=new RegExp(`^rgb\\(${as},${as},${as}\\)$`),Ete=new RegExp(`^rgba\\(${ld},${ld},${ld},${Gg}\\)$`),Ate=new RegExp(`^rgba\\(${as},${as},${as},${Gg}\\)$`),Ste=new RegExp(`^hsl\\(${Gg},${as},${as}\\)$`),_te=new RegExp(`^hsla\\(${Gg},${as},${as},${Gg}\\)$`),CN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lh(Wu,Yg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:DN,formatHex:DN,formatHex8:wte,formatHsl:Cte,formatRgb:$N,toString:$N});function DN(){return this.rgb().formatHex()}function wte(){return this.rgb().formatHex8()}function Cte(){return lL(this).formatHsl()}function $N(){return this.rgb().formatRgb()}function Yg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vte.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?MN(t):n===3?new On(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?z1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?z1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bte.exec(e))?new On(t[1],t[2],t[3],1):(t=xte.exec(e))?new On(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ete.exec(e))?z1(t[1],t[2],t[3],t[4]):(t=Ate.exec(e))?z1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ste.exec(e))?FN(t[1],t[2]/100,t[3]/100,1):(t=_te.exec(e))?FN(t[1],t[2]/100,t[3]/100,t[4]):CN.hasOwnProperty(e)?MN(CN[e]):e==="transparent"?new On(NaN,NaN,NaN,0):null}function MN(e){return new On(e>>16&255,e>>8&255,e&255,1)}function z1(e,t,n,i){return i<=0&&(e=t=n=NaN),new On(e,t,n,i)}function FD(e){return e instanceof Wu||(e=Yg(e)),e?(e=e.rgb(),new On(e.r,e.g,e.b,e.opacity)):new On}function Bu(e,t,n,i){return arguments.length===1?FD(e):new On(e,t,n,i??1)}function On(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}lh(On,Bu,_p(Wu,{brighter(e){return e=e==null?Cd:Math.pow(Cd,e),new On(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new On(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new On(Jl(this.r),Jl(this.g),Jl(this.b),av(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TN,formatHex:TN,formatHex8:Dte,formatRgb:kN,toString:kN}));function TN(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}`}function Dte(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}${Xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function kN(){const e=av(this.opacity);return`${e===1?"rgb(":"rgba("}${Jl(this.r)}, ${Jl(this.g)}, ${Jl(this.b)}${e===1?")":`, ${e})`}`}function av(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xl(e){return e=Jl(e),(e<16?"0":"")+e.toString(16)}function FN(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ya(e,t,n,i)}function lL(e){if(e instanceof ya)return new ya(e.h,e.s,e.l,e.opacity);if(e instanceof Wu||(e=Yg(e)),!e)return new ya;if(e instanceof ya)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new ya(s,o,l,e.opacity)}function sv(e,t,n,i){return arguments.length===1?lL(e):new ya(e,t,n,i??1)}function ya(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}lh(ya,sv,_p(Wu,{brighter(e){return e=e==null?Cd:Math.pow(Cd,e),new ya(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new ya(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new On(xS(e>=240?e-240:e+120,r,i),xS(e,r,i),xS(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ya(ON(this.h),B1(this.s),B1(this.l),av(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=av(this.opacity);return`${e===1?"hsl(":"hsla("}${ON(this.h)}, ${B1(this.s)*100}%, ${B1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ON(e){return e=(e||0)%360,e<0?e+360:e}function B1(e){return Math.max(0,Math.min(1,e||0))}function xS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const cL=Math.PI/180,fL=180/Math.PI,ov=18,dL=.96422,hL=1,gL=.82521,pL=4/29,cd=6/29,mL=3*cd*cd,$te=cd*cd*cd;function yL(e){if(e instanceof ss)return new ss(e.l,e.a,e.b,e.opacity);if(e instanceof co)return vL(e);e instanceof On||(e=FD(e));var t=_S(e.r),n=_S(e.g),i=_S(e.b),r=ES((.2225045*t+.7168786*n+.0606169*i)/hL),a,s;return t===n&&n===i?a=s=r:(a=ES((.4360747*t+.3850649*n+.1430804*i)/dL),s=ES((.0139322*t+.0971045*n+.7141733*i)/gL)),new ss(116*r-16,500*(a-r),200*(r-s),e.opacity)}function uv(e,t,n,i){return arguments.length===1?yL(e):new ss(e,t,n,i??1)}function ss(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}lh(ss,uv,_p(Wu,{brighter(e){return new ss(this.l+ov*(e??1),this.a,this.b,this.opacity)},darker(e){return new ss(this.l-ov*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=dL*AS(t),e=hL*AS(e),n=gL*AS(n),new On(SS(3.1338561*t-1.6168667*e-.4906146*n),SS(-.9787684*t+1.9161415*e+.033454*n),SS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ES(e){return e>$te?Math.pow(e,1/3):e/mL+pL}function AS(e){return e>cd?e*e*e:mL*(e-pL)}function SS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _S(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Mte(e){if(e instanceof co)return new co(e.h,e.c,e.l,e.opacity);if(e instanceof ss||(e=yL(e)),e.a===0&&e.b===0)return new co(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*fL;return new co(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lv(e,t,n,i){return arguments.length===1?Mte(e):new co(e,t,n,i??1)}function co(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function vL(e){if(isNaN(e.h))return new ss(e.l,0,0,e.opacity);var t=e.h*cL;return new ss(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}lh(co,lv,_p(Wu,{brighter(e){return new co(this.h,this.c,this.l+ov*(e??1),this.opacity)},darker(e){return new co(this.h,this.c,this.l-ov*(e??1),this.opacity)},rgb(){return vL(this).rgb()}}));var bL=-.14861,OD=1.78277,ND=-.29227,t2=-.90649,Xg=1.97294,NN=Xg*t2,RN=Xg*OD,zN=OD*ND-t2*bL;function Tte(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);e instanceof On||(e=FD(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(zN*i+NN*t-RN*n)/(zN+NN-RN),a=i-r,s=(Xg*(n-r)-ND*a)/t2,o=Math.sqrt(s*s+a*a)/(Xg*r*(1-r)),l=o?Math.atan2(s,a)*fL-120:NaN;return new ec(l<0?l+360:l,o,r,e.opacity)}function fw(e,t,n,i){return arguments.length===1?Tte(e):new ec(e,t,n,i??1)}function ec(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}lh(ec,fw,_p(Wu,{brighter(e){return e=e==null?Cd:Math.pow(Cd,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*cL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new On(255*(t+n*(bL*i+OD*r)),255*(t+n*(ND*i+t2*r)),255*(t+n*(Xg*i)),this.opacity)}}));function xL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function EL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return xL((n-i/t)*t,s,r,a,o)}}function AL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return xL((n-i/t)*t,r,a,s,o)}}const n2=e=>()=>e;function SL(e,t){return function(n){return e+n*t}}function kte(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function i2(e,t){var n=t-e;return n?SL(e,n>180||n<-180?n-360*Math.round(n/360):n):n2(isNaN(e)?t:e)}function Fte(e){return(e=+e)==1?Nn:function(t,n){return n-t?kte(t,n,e):n2(isNaN(t)?n:t)}}function Nn(e,t){var n=t-e;return n?SL(e,n):n2(isNaN(e)?t:e)}const dw=function e(t){var n=Fte(t);function i(r,a){var s=n((r=Bu(r)).r,(a=Bu(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),f=Nn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=e,i}(1);function _L(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=Bu(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var Ote=_L(EL),Nte=_L(AL);function RD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function wL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rte(e,t){return(wL(t)?RD:CL)(e,t)}function CL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Qu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function DL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function pa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $L(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Qu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var hw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wS=new RegExp(hw.source,"g");function zte(e){return function(){return e}}function Bte(e){return function(t){return e(t)+""}}function ML(e,t){var n=hw.lastIndex=wS.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=hw.exec(e))&&(r=wS.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:pa(i,r)})),n=wS.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Bte(l[0].x):zte(t):(t=l.length,function(f){for(var d=0,h;d<t;++d)o[(h=l[d]).i]=h.x(f);return o.join("")})}function Qu(e,t){var n=typeof t,i;return t==null||n==="boolean"?n2(t):(n==="number"?pa:n==="string"?(i=Yg(t))?(t=i,dw):ML:t instanceof Yg?dw:t instanceof Date?DL:wL(t)?RD:Array.isArray(t)?CL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$L:pa)(e,t)}function Lte(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ute(e,t){var n=i2(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function wp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var BN=180/Math.PI,gw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TL(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*BN,skewX:Math.atan(l)*BN,scaleX:s,scaleY:o}}var L1;function Ite(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gw:TL(t.a,t.b,t.c,t.d,t.e,t.f)}function jte(e){return e==null||(L1||(L1=document.createElementNS("http://www.w3.org/2000/svg","g")),L1.setAttribute("transform",e),!(e=L1.transform.baseVal.consolidate()))?gw:(e=e.matrix,TL(e.a,e.b,e.c,e.d,e.e,e.f))}function kL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:pa(f,h)},{i:b-2,x:pa(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:pa(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:pa(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function l(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:pa(f,h)},{i:b-2,x:pa(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,E;++v<b;)h[(E=p[v]).i]=E.x(y);return h.join("")}}}var Pte=kL(Ite,"px, ","px)","deg)"),qte=kL(jte,", ",")",")"),Hte=1e-12;function LN(e){return((e=Math.exp(e))+1/e)/2}function Gte(e){return((e=Math.exp(e))-1/e)/2}function Yte(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xte=function e(t,n,i){function r(a,s){var o=a[0],l=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-l,b=y*y+v*v,E,S;if(b<Hte)S=Math.log(p/f)/t,E=function(D){return[o+D*y,l+D*v,f*Math.exp(t*D*S)]};else{var _=Math.sqrt(b),w=(p*p-f*f+i*b)/(2*f*n*_),C=(p*p-f*f-i*b)/(2*p*n*_),$=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(C*C+1)-C);S=(T-$)/t,E=function(D){var F=D*S,O=LN($),U=f/(n*_)*(O*Yte(t*F+$)-Gte($));return[o+U*y,l+U*v,f*O/LN(t*F+$)]}}return E.duration=S*1e3*t/Math.SQRT2,E}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r}(Math.SQRT2,2,4);function FL(e){return function(t,n){var i=e((t=sv(t)).h,(n=sv(n)).h),r=Nn(t.s,n.s),a=Nn(t.l,n.l),s=Nn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Vte=FL(i2);var Wte=FL(Nn);function Qte(e,t){var n=Nn((e=uv(e)).l,(t=uv(t)).l),i=Nn(e.a,t.a),r=Nn(e.b,t.b),a=Nn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function OL(e){return function(t,n){var i=e((t=lv(t)).h,(n=lv(n)).h),r=Nn(t.c,n.c),a=Nn(t.l,n.l),s=Nn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Zte=OL(i2);var Kte=OL(Nn);function NL(e){return function t(n){n=+n;function i(r,a){var s=e((r=fw(r)).h,(a=fw(a)).h),o=Nn(r.s,a.s),l=Nn(r.l,a.l),f=Nn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i}(1)}const Jte=NL(i2);var ene=NL(Nn);function zD(e,t){t===void 0&&(t=e,e=Qu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function tne(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const nne=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Qu,interpolateArray:Rte,interpolateBasis:EL,interpolateBasisClosed:AL,interpolateCubehelix:Jte,interpolateCubehelixLong:ene,interpolateDate:DL,interpolateDiscrete:Lte,interpolateHcl:Zte,interpolateHclLong:Kte,interpolateHsl:Vte,interpolateHslLong:Wte,interpolateHue:Ute,interpolateLab:Qte,interpolateNumber:pa,interpolateNumberArray:RD,interpolateObject:$L,interpolateRgb:dw,interpolateRgbBasis:Ote,interpolateRgbBasisClosed:Nte,interpolateRound:wp,interpolateString:ML,interpolateTransformCss:Pte,interpolateTransformSvg:qte,interpolateZoom:Xte,piecewise:zD,quantize:tne},Symbol.toStringTag,{value:"Module"}));function ine(e){return function(){return e}}function pw(e){return+e}var UN=[0,1];function Zi(e){return e}function mw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ine(isNaN(t)?NaN:.5)}function rne(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function ane(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=mw(r,i),a=n(s,a)):(i=mw(i,r),a=n(a,s)),function(o){return a(i(o))}}function sne(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=mw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=Ou(e,o,1,i)-1;return a[l](r[l](o))}}function Cp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function r2(){var e=UN,t=UN,n=Qu,i,r,a,s=Zi,o,l,f;function d(){var p=Math.min(e.length,t.length);return s!==Zi&&(s=rne(e[0],e[p-1])),o=p>2?sne:ane,l=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),pa)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,pw),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=wp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Zi,d()):s!==Zi},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function RL(){return r2()(Zi,Zi)}function zL(e,t,n,i){var r=Nu(e,t,n),a;switch(i=oc(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=uz(r,s))&&(i.precision=a),S3(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=lz(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=oz(r))&&(i.precision=a-(i.type==="%")*2);break}}return Ob(i)}function Rc(e){var t=e.domain;return e.ticks=function(n){var i=t();return V_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return zL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=W_(s,o,n),f===l)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;l=f}return e},e}function BL(){var e=RL();return e.copy=function(){return Cp(e,BL())},xs.apply(e,arguments),Rc(e)}function LL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,pw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return LL(e).unknown(t)},e=arguments.length?Array.from(e,pw):[0,1],Rc(n)}function UL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function IN(e){return Math.log(e)}function jN(e){return Math.exp(e)}function one(e){return-Math.log(-e)}function une(e){return-Math.exp(-e)}function lne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function cne(e){return e===10?lne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function PN(e){return(t,n)=>-e(-t,n)}function BD(e){const t=e(IN,jN),n=t.domain;let i=10,r,a;function s(){return r=fne(i),a=cne(i),n()[0]<0?(r=PN(r),a=PN(a),e(one,une)):e(IN,jN),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let f=l[0],d=l[l.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const E=o==null?10:+o;let S=[];if(!(i%1)&&y-p<E){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;S.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;S.push(b)}S.length*2<E&&(S=V_(f,d,E))}else S=V_(p,y,Math.min(y-p,E)).map(a);return h?S.reverse():S},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=oc(l)).precision==null&&(l.trim=!0),l=Ob(l)),o===1/0)return l;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?l(d):""}},t.nice=()=>n(UL(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function IL(){const e=BD(r2()).domain([1,10]);return e.copy=()=>Cp(e,IL()).base(e.base()),xs.apply(e,arguments),e}function qN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function HN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LD(e){var t=1,n=e(qN(t),HN(t));return n.constant=function(i){return arguments.length?e(qN(t=+i),HN(t)):t},Rc(n)}function jL(){var e=LD(r2());return e.copy=function(){return Cp(e,jL()).constant(e.constant())},xs.apply(e,arguments)}function GN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hne(e){return e<0?-e*e:e*e}function UD(e){var t=e(Zi,Zi),n=1;function i(){return n===1?e(Zi,Zi):n===.5?e(dne,hne):e(GN(n),GN(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Rc(t)}function ID(){var e=UD(r2());return e.copy=function(){return Cp(e,ID()).exponent(e.exponent())},xs.apply(e,arguments),e}function gne(){return ID.apply(null,arguments).exponent(.5)}function PL(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=tz(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[Ou(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(go),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return PL().domain(e).range(t).unknown(i)},xs.apply(a,arguments)}function qL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[Ou(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return qL().domain([e,t]).range(r).unknown(a)},xs.apply(Rc(s),arguments)}function HL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[Ou(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return HL().domain(e).range(t).unknown(n)},xs.apply(r,arguments)}function pne(e){return new Date(e)}function mne(e){return e instanceof Date?+e:+new Date(+e)}function jD(e,t,n,i,r,a,s,o,l,f){var d=RL(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),E=f("%I %p"),S=f("%a %d"),_=f("%b %d"),w=f("%B"),C=f("%Y");function $(T){return(l(T)<T?y:o(T)<T?v:s(T)<T?b:a(T)<T?E:i(T)<T?r(T)<T?S:_:n(T)<T?w:C)(T)}return d.invert=function(T){return new Date(h(T))},d.domain=function(T){return arguments.length?p(Array.from(T,mne)):p().map(pne)},d.ticks=function(T){var D=p();return e(D[0],D[D.length-1],T??10)},d.tickFormat=function(T,D){return D==null?$:f(D)},d.nice=function(T){var D=p();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?p(UL(D,T)):d},d.copy=function(){return Cp(d,jD(e,t,n,i,r,a,s,o,l,f))},d}function yne(){return xs.apply(jD(SZ,_Z,ds,Ig,rh,po,zb,Nb,lo,$3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vne(){return xs.apply(jD(EZ,AZ,hs,jg,ah,Du,Bb,Rb,lo,M3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a2(){var e=0,t=1,n,i,r,a,s=Zi,o=!1,l;function f(h){return h==null||isNaN(h=+h)?l:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(Qu),f.rangeRound=d(wp),f.unknown=function(h){return arguments.length?(l=h,f):l},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Zu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PD(){var e=Rc(a2()(Zi));return e.copy=function(){return Zu(e,PD())},Vu.apply(e,arguments)}function GL(){var e=BD(a2()).domain([1,10]);return e.copy=function(){return Zu(e,GL()).base(e.base())},Vu.apply(e,arguments)}function YL(){var e=LD(a2());return e.copy=function(){return Zu(e,YL()).constant(e.constant())},Vu.apply(e,arguments)}function qD(){var e=UD(a2());return e.copy=function(){return Zu(e,qD()).exponent(e.exponent())},Vu.apply(e,arguments)}function bne(){return qD.apply(null,arguments).exponent(.5)}function s2(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,f=Zi,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(E){var S,_,w;return arguments.length?([S,_,w]=E,f=zD(b,[S,_,w]),y):[f(0),f(.5),f(1)]}}return y.range=v(Qu),y.rangeRound=v(wp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function XL(){var e=Rc(s2()(Zi));return e.copy=function(){return Zu(e,XL())},Vu.apply(e,arguments)}function VL(){var e=BD(s2()).domain([.1,1,10]);return e.copy=function(){return Zu(e,VL()).base(e.base())},Vu.apply(e,arguments)}function WL(){var e=LD(s2());return e.copy=function(){return Zu(e,WL()).constant(e.constant())},Vu.apply(e,arguments)}function HD(){var e=UD(s2());return e.copy=function(){return Zu(e,HD()).exponent(e.exponent())},Vu.apply(e,arguments)}function xne(){return HD.apply(null,arguments).exponent(.5)}function Es(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Ene=Es("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ane=Es("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Sne=Es("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),_ne=Es("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),wne=Es("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Cne=Es("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Dne=Es("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),$ne=Es("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Mne=Es("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Tne=Es("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function GD(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const kne="identity",Dd="linear",So="log",Dp="pow",$p="sqrt",o2="symlog",lc="time",cc="utc",os="sequential",ch="diverging",$d="quantile",u2="quantize",l2="threshold",YD="ordinal",yw="point",QL="band",XD="bin-ordinal",wn="continuous",Mp="discrete",Tp="discretizing",ia="interpolating",VD="temporal";function Fne(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function One(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,f;for(r<i&&(o=i,i=r,r=o),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function WD(){const e=kD().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=GD(h,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const E=Er(h).map(S=>b+r*S);return n(p?E.reverse():E)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),o=l,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],E=+h[1],S,_,w;if(!(b!==b||E!==E)&&(E<b&&(w=b,b=E,E=w),!(E<y[0]||b>i[1-p])))return S=Math.max(0,Ou(y,b)-1),_=b===E?S:Ou(y,E)-1,b-y[S]>a+1e-10&&++S,p&&(w=S,S=v-_,_=v-w),S>_?void 0:t().slice(S,_+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return WD().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(f)},d()}function ZL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ZL(t())},e}function Nne(){return ZL(WD().paddingInner(1))}var Rne=Array.prototype.map;function zne(e){return Rne.call(e,fi)}const Bne=Array.prototype.slice;function KL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Ou(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=zne(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Bne.call(i),n):t.slice()},n.tickFormat=function(i,r){return zL(e[0],nt(e),i??10,r)},n.copy=function(){return KL().domain(n.domain()).range(n.range())},n}const cv=new Map,JL=Symbol("vega_scale");function eU(e){return e[JL]=!0,e}function Lne(e){return e&&e[JL]===!0}function Une(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Fne(a):a.invertExtent?One(a):void 0),a.type=e,eU(a)};return i.metadata=wa(ke(n)),i}function gt(e,t,n){return arguments.length>1?(cv.set(e,Une(e,t,n)),this):tU(e)?cv.get(e):void 0}gt(kne,LL);gt(Dd,BL,wn);gt(So,IL,[wn,So]);gt(Dp,ID,wn);gt($p,gne,wn);gt(o2,jL,wn);gt(lc,yne,[wn,VD]);gt(cc,vne,[wn,VD]);gt(os,PD,[wn,ia]);gt(`${os}-${Dd}`,PD,[wn,ia]);gt(`${os}-${So}`,GL,[wn,ia,So]);gt(`${os}-${Dp}`,qD,[wn,ia]);gt(`${os}-${$p}`,bne,[wn,ia]);gt(`${os}-${o2}`,YL,[wn,ia]);gt(`${ch}-${Dd}`,XL,[wn,ia]);gt(`${ch}-${So}`,VL,[wn,ia,So]);gt(`${ch}-${Dp}`,HD,[wn,ia]);gt(`${ch}-${$p}`,xne,[wn,ia]);gt(`${ch}-${o2}`,WL,[wn,ia]);gt($d,PL,[Tp,$d]);gt(u2,qL,Tp);gt(l2,HL,Tp);gt(XD,KL,[Mp,Tp]);gt(YD,kD,Mp);gt(QL,WD,Mp);gt(yw,Nne,Mp);function tU(e){return cv.has(e)}function zc(e,t){const n=cv.get(e);return n&&n.metadata[t]}function QD(e){return zc(e,wn)}function Md(e){return zc(e,Mp)}function vw(e){return zc(e,Tp)}function nU(e){return zc(e,So)}function Ine(e){return zc(e,VD)}function iU(e){return zc(e,ia)}function rU(e){return zc(e,$d)}const jne=["clamp","base","constant","exponent"];function aU(e,t){const n=t[0],i=nt(t)-n;return function(r){return e(n+r*i)}}function c2(e,t,n){return zD(ZD(t||"rgb",n),e)}function sU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function oU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?bi(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=gt(a)().domain([t,n]).range([0,1]),jne.forEach(o=>e[o]?s[o](e[o]()):0),s)}function ZD(e,t){const n=nne[Pne(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Pne(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const qne={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Hne={accent:Ane,category10:Ene,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Sne,observable10:_ne,paired:wne,pastel1:Cne,pastel2:Dne,set1:$ne,set2:Mne,set3:Tne,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function uU(e){if(we(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function lU(e,t){for(const n in e)KD(n,t(e[n]))}const YN={};lU(Hne,uU);lU(qne,e=>c2(uU(e)));function KD(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(YN[e]=t,this):YN[e]}const xy="symbol",Gne="discrete",Yne="gradient",Xne=e=>we(e)?e.map(t=>String(t)):String(e),Vne=(e,t)=>e[1]-t[1],Wne=(e,t)=>t[1]-e[1];function JD(e,t,n){let i;return Fu(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(xp(e.domain())/n||1)+1))),Ue(t)&&(i=t.step,t=t.interval),ut(t)&&(t=e.type===lc?sh(t):e.type==cc?oh(t):ne("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function cU(e,t,n){let i=e.range(),r=i[0],a=nt(i),s=Vne;if(r>a&&(i=a,a=r,r=i,s=Wne),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],nt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,f)=>!(f%2));t.length<3&&(t=o)}return t}function e$(e,t){return e.bins?cU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function fU(e,t,n,i,r,a){const s=t.type;let o=Xne;if(s===lc||r===lc)o=e.timeFormat(i);else if(s===cc||r===cc)o=e.utcFormat(i);else if(nU(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const f=dU(t,n,!1);o=d=>f(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function dU(e,t,n){const i=e$(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const bw={[$d]:"quantiles",[u2]:"thresholds",[l2]:"domain"},hU={[$d]:"quantiles",[u2]:"domain"};function gU(e,t){return e.bins?Kne(e.bins):e.type===So?dU(e,t,!0):bw[e.type]?Zne(e[bw[e.type]]()):e$(e,t)}function Qne(e,t,n){const i=t[hU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function Zne(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Kne(e){const t=e.slice(0,-1);return t.max=nt(e),t}const Jne=e=>bw[e.type]||e.bins;function pU(e,t,n,i,r,a,s){const o=hU[t.type]&&a!==lc&&a!==cc?Qne(e,t,r):fU(e,t,n,r,a,s);return i===xy&&Jne(t)?eie(o):i===Gne?tie(o):nie(o)}const eie=e=>(t,n,i)=>{const r=XN(i[n+1],XN(i.max,1/0)),a=VN(t,e),s=VN(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},XN=(e,t)=>e??t,tie=e=>(t,n)=>n?e(t):null,nie=e=>t=>e(t),VN=(e,t)=>Number.isFinite(e)?t(e):null;function iie(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+nt(t),a=r-i;if(e.type===l2){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function rie(e,t,n,i){const r=i||t.type;return ut(n)&&Ine(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===lc?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===cc?e.utcFormat("%A, %d %B %Y, %X UTC"):pU(e,t,5,null,n,i,!0)}function mU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=rie(e,t,n.format,n.formatType);if(vw(t.type)){const a=gU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Md(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(nt(a))}`}}let yU=0;function aie(){yU=0}const fv="p_";function t$(e){return e&&e.gradient}function vU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?fv:"";return r||(r=e.id="gradient_"+yU++,i==="radial"?(e.x1=Xa(e.x1,.5),e.y1=Xa(e.y1,.5),e.r1=Xa(e.r1,0),e.x2=Xa(e.x2,.5),e.y2=Xa(e.y2,.5),e.r2=Xa(e.r2,.5),a=fv):(e.x1=Xa(e.x1,0),e.y1=Xa(e.y1,0),e.x2=Xa(e.x2,1),e.y2=Xa(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Xa(e,t){return e??t}function bU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const WN={basis:{curve:ete},"basis-closed":{curve:tte},"basis-open":{curve:nte},bundle:{curve:ite,tension:"beta",value:.85},cardinal:{curve:rte,tension:"tension",value:0},"cardinal-open":{curve:ste,tension:"tension",value:0},"cardinal-closed":{curve:ate,tension:"tension",value:0},"catmull-rom":{curve:ote,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ute,tension:"alpha",value:.5},"catmull-rom-open":{curve:lte,tension:"alpha",value:.5},linear:{curve:CD},"linear-closed":{curve:cte},monotone:{horizontal:dte,vertical:fte},natural:{curve:hte},step:{curve:gte},"step-after":{curve:mte},"step-before":{curve:pte}};function n$(e,t,n){var i=Ne(WN,e)&&WN[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const sie={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},oie=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,uie=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lie=/^((\s+,?\s*)|(,\s*))/,cie=/^[01]/;function Td(e){const t=[];return(e.match(oie)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=sie[a],o=fie(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<l;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function fie(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?cie:uie,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(lie);l!==null&&(r+=l[0].length)}return i}const Lu=Math.PI/180,die=1e-14,jl=Math.PI/2,es=Math.PI*2,Uf=Math.sqrt(3)/2;var CS={},DS={},xU=[].join;function hie(e,t,n,i,r,a,s,o,l){const f=xU.call(arguments);if(CS[f])return CS[f];const d=s*Lu,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(l-t)*.5,v=p*(l-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const E=p/n,S=h/n,_=-h/i,w=p/i,C=E*o+S*l,$=_*o+w*l,T=E*e+S*t,D=_*e+w*t;let O=1/((T-C)*(T-C)+(D-$)*(D-$))-.25;O<0&&(O=0);let U=Math.sqrt(O);a==r&&(U=-U);const z=.5*(C+T)-U*(D-$),G=.5*($+D)+U*(T-C),B=Math.atan2($-G,C-z);let I=Math.atan2(D-G,T-z)-B;I<0&&a===1?I+=es:I>0&&a===0&&(I-=es);const N=Math.ceil(Math.abs(I/(jl+.001))),q=[];for(let Y=0;Y<N;++Y){const J=B+Y*I/N,R=B+(Y+1)*I/N;q[Y]=[z,G,J,R,n,i,h,p]}return CS[f]=q}function gie(e){const t=xU.call(e);if(DS[t])return DS[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7];const d=f*s,h=-l*o,p=l*s,y=f*o,v=Math.cos(r),b=Math.sin(r),E=Math.cos(a),S=Math.sin(a),_=.5*(a-r),w=Math.sin(_*.5),C=8/3*w*w/Math.sin(_),$=n+v-C*b,T=i+b+C*v,D=n+E,F=i+S,O=D+C*S,U=F-C*E;return DS[t]=[d*$+h*T,p*$+y*T,d*O+h*U,p*O+y*U,d*D+h*F,p*D+y*F]}const Ir=["l",0,0,0,0,0,0,0];function pie(e,t,n){const i=Ir[0]=e[0];if(i==="a"||i==="A")Ir[1]=t*e[1],Ir[2]=n*e[2],Ir[3]=e[3],Ir[4]=e[4],Ir[5]=e[5],Ir[6]=t*e[6],Ir[7]=n*e[7];else if(i==="h"||i==="H")Ir[1]=t*e[1];else if(i==="v"||i==="V")Ir[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Ir[r]=(r%2==1?t:n)*e[r];return Ir}function Vg(e,t,n,i,r,a){var s,o=null,l=0,f=0,d=0,h=0,p,y,v,b,E=0,S=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var _=0,w=t.length;_<w;++_){switch(s=t[_],(r!==1||a!==1)&&(s=pie(s,r,a)),s[0]){case"l":l+=s[1],f+=s[2],e.lineTo(l+n,f+i);break;case"L":l=s[1],f=s[2],e.lineTo(l+n,f+i);break;case"h":l+=s[1],e.lineTo(l+n,f+i);break;case"H":l=s[1],e.lineTo(l+n,f+i);break;case"v":f+=s[1],e.lineTo(l+n,f+i);break;case"V":f=s[1],e.lineTo(l+n,f+i);break;case"m":l+=s[1],f+=s[2],E=l,S=f,e.moveTo(l+n,f+i);break;case"M":l=s[1],f=s[2],E=l,S=f,e.moveTo(l+n,f+i);break;case"c":p=l+s[5],y=f+s[6],d=l+s[3],h=f+s[4],e.bezierCurveTo(l+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),l=p,f=y;break;case"C":l=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,l+n,f+i);break;case"s":p=l+s[3],y=f+s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,l+s[1]+n,f+s[2]+i,p+n,y+i),d=l+s[1],h=f+s[2],l=p,f=y;break;case"S":p=s[3],y=s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"q":p=l+s[3],y=f+s[4],d=l+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"t":p=l+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=l,h=f):o[0]==="t"?(d=2*l-v,h=2*f-b):o[0]==="q"&&(d=2*l-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y,d=l+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"a":QN(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+f+i]),l+=s[6],f+=s[7];break;case"A":QN(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],f=s[7];break;case"z":case"Z":l=E,f=S,e.closePath();break}o=s}}function QN(e,t,n,i){const r=hie(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=gie(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const ZN=.5773502691896257,KN={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,es)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n,r=i-n*ZN,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n,r=i-n*ZN;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Uf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function EU(e){return Ne(KN,e)?KN[e]:mie(e)}var $S={};function mie(e){if(!Ne($S,e)){const t=Td(e);$S[e]={draw:function(n,i){Vg(n,t,0,0,Math.sqrt(i)/2)}}}return $S[e]}const ou=.448084975506;function yie(e){return e.x}function vie(e){return e.y}function bie(e){return e.width}function xie(e){return e.height}function Ws(e){return typeof e=="function"?e:()=>+e}function U1(e,t,n){return Math.max(t,Math.min(e,n))}function AU(){var e=yie,t=vie,n=bie,i=xie,r=Ws(0),a=r,s=r,o=r,l=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),E=+n.call(this,d),S=+i.call(this,d),_=Math.min(E,S)/2,w=U1(+r.call(this,d),0,_),C=U1(+a.call(this,d),0,_),$=U1(+s.call(this,d),0,_),T=U1(+o.call(this,d),0,_);if(l||(l=y=Zb()),w<=0&&C<=0&&$<=0&&T<=0)l.rect(v,b,E,S);else{var D=v+E,F=b+S;l.moveTo(v+w,b),l.lineTo(D-C,b),l.bezierCurveTo(D-ou*C,b,D,b+ou*C,D,b+C),l.lineTo(D,F-T),l.bezierCurveTo(D,F-ou*T,D-ou*T,F,D-T,F),l.lineTo(v+$,F),l.bezierCurveTo(v+ou*$,F,v,F-ou*$,v,F-$),l.lineTo(v,b+w),l.bezierCurveTo(v,b+ou*w,v+ou*w,b,v+w,b),l.closePath()}if(y)return l=null,y+""||null}return f.x=function(d){return arguments.length?(e=Ws(d),f):e},f.y=function(d){return arguments.length?(t=Ws(d),f):t},f.width=function(d){return arguments.length?(n=Ws(d),f):n},f.height=function(d){return arguments.length?(i=Ws(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=Ws(d),a=h!=null?Ws(h):r,o=p!=null?Ws(p):r,s=y!=null?Ws(y):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function SU(){var e,t,n,i,r=null,a,s,o,l;function f(h,p,y){const v=y/2;if(a){var b=o-p,E=h-s;if(b||E){var S=Math.hypot(b,E),_=(b/=S)*l,w=(E/=S)*l,C=Math.atan2(E,b);r.moveTo(s-_,o-w),r.lineTo(h-b*v,p-E*v),r.arc(h,p,v,C-Math.PI,C),r.lineTo(s+_,o+w),r.arc(s,o,l,C,C+Math.PI)}else r.arc(h,p,v,0,es);r.closePath()}else a=1;s=h,o=p,l=v}function d(h){var p,y=h.length,v,b=!1,E;for(r==null&&(r=E=Zb()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(E)return r=null,E+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function kp(e,t){return e??t}const Fp=e=>e.x||0,Op=e=>e.y||0,Eie=e=>e.width||0,Aie=e=>e.height||0,Sie=e=>(e.x||0)+(e.width||0),_ie=e=>(e.y||0)+(e.height||0),wie=e=>e.startAngle||0,Cie=e=>e.endAngle||0,Die=e=>e.padAngle||0,$ie=e=>e.innerRadius||0,Mie=e=>e.outerRadius||0,Tie=e=>e.cornerRadius||0,kie=e=>kp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Fie=e=>kp(e.cornerRadiusTopRight,e.cornerRadius)||0,Oie=e=>kp(e.cornerRadiusBottomRight,e.cornerRadius)||0,Nie=e=>kp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Rie=e=>kp(e.size,64),zie=e=>e.size||1,f2=e=>e.defined!==!1,Bie=e=>EU(e.shape||"circle"),Lie=Zee().startAngle(wie).endAngle(Cie).padAngle(Die).innerRadius($ie).outerRadius(Mie).cornerRadius(Tie),Uie=KB().x(Fp).y1(Op).y0(_ie).defined(f2),Iie=KB().y(Op).x1(Fp).x0(Sie).defined(f2),jie=ZB().x(Fp).y(Op).defined(f2),Pie=AU().x(Fp).y(Op).width(Eie).height(Aie).cornerRadius(kie,Fie,Oie,Nie),qie=Jee().type(Bie).size(Rie),Hie=SU().x(Fp).y(Op).defined(f2).size(zie);function i$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Gie(e,t){return Lie.context(e)(t)}function Yie(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Iie:Uie).curve(n$(i,n.orient,n.tension)).context(e)(t)}function Xie(e,t){const n=t[0],i=n.interpolate||"linear";return jie.curve(n$(i,n.orient,n.tension)).context(e)(t)}function fh(e,t,n,i){return Pie.context(e)(t,n,i)}function Vie(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Wie(e,t){return qie.context(e)(t)}function Qie(e,t){return Hie.context(e)(t)}var _U=1;function wU(){_U=1}function r$(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+_U++),s=r.clipping[a]||(r.clipping[a]={id:a});return Ye(i)?s.path=i(null):i$(n)?s.path=fh(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function mn(e){this.clear(),e&&this.union(e)}mn.prototype={clone(){return new mn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),f=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+f,l*i+o*r+d,o*i-l*s+f,l*i+o*s+d,o*a-l*r+f,l*a+o*r+d,o*a-l*s+f,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function d2(e){this.mark=e,this.bounds=this.bounds||new mn}function h2(e){d2.call(this,e),this.items=this.items||[]}pe(h2,d2);class CU{constructor(t){this._pending=0,this._loader=t||Ub()}pending(){return this._pending}sanitizeURL(t){const n=this;return JN(n),n._loader.sanitize(t,{context:"href"}).then(i=>(R0(n),i)).catch(()=>(R0(n),null))}loadImage(t){const n=this,i=yte();return JN(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Ne(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>R0(n),s.onerror=()=>R0(n),s.src=a,s}).catch(r=>(R0(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function JN(e){e._pending+=1}function R0(e){e._pending-=1}function $o(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Zie(t,i):0))}return e}function Zie(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Kie=es-1e-8;let g2,Ey,Ay,Vl,xw,Sy,Ew,Aw;const yu=(e,t)=>g2.add(e,t),_y=(e,t)=>yu(Ey=e,Ay=t),e4=e=>yu(e,g2.y1),t4=e=>yu(g2.x1,e),Pl=(e,t)=>xw*e+Ew*t,ql=(e,t)=>Sy*e+Aw*t,MS=(e,t)=>yu(Pl(e,t),ql(e,t)),TS=(e,t)=>_y(Pl(e,t),ql(e,t));function Np(e,t){return g2=e,t?(Vl=t*Lu,xw=Aw=Math.cos(Vl),Sy=Math.sin(Vl),Ew=-Sy):(xw=Aw=1,Vl=Sy=Ew=0),Jie}const Jie={beginPath(){},closePath(){},moveTo:TS,lineTo:TS,rect(e,t,n,i){Vl?(MS(e+n,t),MS(e+n,t+i),MS(e,t+i),TS(e,t)):(yu(e+n,t+i),_y(e,t))},quadraticCurveTo(e,t,n,i){const r=Pl(e,t),a=ql(e,t),s=Pl(n,i),o=ql(n,i);n4(Ey,r,s,e4),n4(Ay,a,o,t4),_y(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=Pl(e,t),o=ql(e,t),l=Pl(n,i),f=ql(n,i),d=Pl(r,a),h=ql(r,a);i4(Ey,s,l,d,e4),i4(Ay,o,f,h,t4),_y(d,h)},arc(e,t,n,i,r,a){if(i+=Vl,r+=Vl,Ey=n*Math.cos(r)+e,Ay=n*Math.sin(r)+t,Math.abs(r-i)>Kie)yu(e-n,t-n),yu(e+n,t+n);else{const s=f=>yu(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%es,i<0&&(i+=es),r=r%es,r<0&&(r+=es),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=es,o=i-i%jl,l=0;l<4&&o>r;++l,o-=jl)s(o);else for(o=i-i%jl+jl,l=0;l<4&&o<r;++l,o=o+jl)s(o)}}};function n4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function i4(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,f=0,d;Math.abs(a)>die?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,f=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(r4(l,e,t,n,i)),0<f&&f<1&&r(r4(f,e,t,n,i))}function r4(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var Tu=(Tu=Mu(1,1))?Tu.getContext("2d"):null;const Sw=new mn;function a$(e){return function(t,n){if(!Tu)return!0;e(Tu,t),Sw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=Sw;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(Tu.isPointInPath(l,o))return!0;return!1}}function s$(e,t){return t.contains(e.x||0,e.y||0)}function DU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(Sw.set(n,i,n+r,i+a))}function $U(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return id(t,n,i,r,a)}function id(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,E;for(E=0;E<4;++E){if(E===0&&(y=-f,v=-(a-t)),E===1&&(y=f,v=o-t),E===2&&(y=-d,v=-(s-n)),E===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function kd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ca(e,t){return e??t}function a4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function ere(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+ca(t.x1,.5)*i,n.y1+ca(t.y1,.5)*r,Math.max(i,r)*ca(t.r1,0),n.x1+ca(t.x2,.5)*i,n.y1+ca(t.y2,.5)*r,Math.max(i,r)*ca(t.r2,.5));else{const s=ca(t.x1,0),o=ca(t.y1,0),l=ca(t.x2,1),f=ca(t.y2,0);if(s===l||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+f*r);else{const d=Mu(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=a4(h.createLinearGradient(s,o,l,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return a4(a,t.stops)}function MU(e,t,n){return t$(n)?ere(e,n,t.bounds):n}function dv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=MU(e,t,t.fill),!0):!1}var tre=[];function Fd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=MU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||tre),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function nre(e,t){return e.zindex-t.zindex||e.index-t.index}function o$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(nre)}function Da(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=o$(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function hv(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=o$(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function u$(e){return function(t,n,i){Da(n,r=>{(!i||i.intersects(r.bounds))&&TU(e,t,r,r)})}}function ire(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&TU(e,t,n.items[0],n.items)}}function TU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(kd(t,n),n.fill&&dv(t,n,r)&&t.fill(),n.stroke&&Fd(t,n,r)&&t.stroke()))}function p2(e){return e=e||Zr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,hv(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function Rp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,f,d;return l&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function l$(e){return p2(Rp(e))}function tc(e,t){return"translate("+e+","+t+")"}function c$(e){return"rotate("+e+")"}function rre(e,t){return"scale("+e+","+t+")"}function kU(e){return tc(e.x||0,e.y||0)}function are(e){return tc(e.x||0,e.y||0)+(e.angle?" "+c$(e.angle):"")}function sre(e){return tc(e.x||0,e.y||0)+(e.angle?" "+c$(e.angle):"")+(e.scaleX||e.scaleY?" "+rre(e.scaleX||1,e.scaleY||1):"")}function f$(e,t,n){function i(s,o){s("transform",are(o)),s("d",t(null,o))}function r(s,o){return t(Np(s,o.angle),o),$o(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,f=o.y||0,d=o.angle||0;s.translate(l,f),d&&s.rotate(d*=Lu),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:u$(a),pick:l$(a),isect:n||a$(a)}}var ore=f$("arc",Gie);function ure(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function lre(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function cre(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function d$(e,t,n){function i(l,f){var d=f.mark.items;d.length&&l("d",t(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(t(Np(l),d),$o(l,d[0]))}function a(l,f){l.beginPath(),t(l,f)}const s=Rp(a);function o(l,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,h*=l.pixelRatio,s(l,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:ire(a),pick:o,isect:s$,tip:n}}var fre=d$("area",Yie,ure);function dre(e,t){var n=t.clip;e.save(),Ye(n)?(e.beginPath(),n(e),e.clip()):FU(e,t.group)}function FU(e,t){e.beginPath(),i$(t)?fh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function OU(e){const t=ca(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function hre(e,t){e("transform",kU(t))}function NU(e,t){const n=OU(t);e("d",fh(null,t,n,n))}function gre(e,t){e("class","background"),e("aria-hidden",!0),NU(e,t)}function pre(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?NU(e,t):e("d","")}function mre(e,t,n){const i=t.clip?r$(n,t,t):null;e("clip-path",i)}function yre(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),$o(e,t),e.translate(t.x||0,t.y||0)}function Wg(e,t,n,i){const r=OU(t);e.beginPath(),fh(e,t,(n||0)+r,(i||0)+r)}const vre=Rp(Wg),bre=Rp(Wg,!1),xre=Rp(Wg,!0);function Ere(e,t,n,i){Da(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(Wg(e,r,a,s),kd(e,r),r.fill&&dv(e,r,l)&&e.fill(),r.stroke&&!o&&Fd(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&FU(e,r),n&&n.translate(-a,-s),Da(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(Wg(e,r,a,s),kd(e,r),Fd(e,r,l)&&e.stroke())})}function Are(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return hv(t,l=>{let f,d,h;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,h=l.y||0;const y=d+(l.width||0),v=h+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&i$(l)&&!xre(e,l,s,o))return e.restore(),null;const E=l.strokeForeground,S=t.interactive!==!1;return S&&E&&l.stroke&&bre(e,l,s,o)?(e.restore(),l):(f=hv(l,_=>Sre(_,d,h)?this.pick(_,n,i,d,h):null),!f&&S&&(l.fill||!E&&l.stroke)&&vre(e,l,s,o)&&(f=l),e.restore(),f||null)})}function Sre(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var _re={type:"group",tag:"g",nested:!1,attr:hre,bound:yre,draw:Ere,pick:Are,isect:DU,content:mre,background:gre,foreground:pre},Qg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function h$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function g$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function p$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function m2(e,t){return e==="center"?t/2:e==="right"?t:0}function y2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function wre(e,t,n){const i=h$(t,n),r=g$(t,i),a=p$(t,i),s=(t.x||0)-m2(t.align,r),o=(t.y||0)-y2(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,Qg["xmlns:xlink"],"xlink:href"),e("transform",tc(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Cre(e,t){const n=t.image,i=g$(t,n),r=p$(t,n),a=(t.x||0)-m2(t.align,i),s=(t.y||0)-y2(t.baseline,r);return e.set(a,s,a+i,s+r)}function Dre(e,t,n){Da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=h$(i,this);let a=g$(i,r),s=p$(i,r);if(a===0||s===0)return;let o=(i.x||0)-m2(i.align,a),l=(i.y||0)-y2(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(kd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var $re={type:"image",tag:"image",nested:!1,attr:wre,bound:Cre,draw:Dre,pick:p2(),isect:Zr,get:h$,xOffset:m2,yOffset:y2},Mre=d$("line",Xie,lre);function Tre(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",sre(t)),e("d",t.path)}function wy(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*Lu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Td(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),Vg(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):Vg(e,l,i,r,a,s)}function kre(e,t){return wy(Np(e,t.angle),t)?e.set(0,0,0,0):$o(e,t,!0)}var Fre={type:"path",tag:"path",nested:!1,attr:Tre,bound:kre,draw:u$(wy),pick:l$(wy),isect:a$(wy)};function Ore(e,t){e("d",fh(null,t))}function Nre(e,t){var n,i;return $o(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function s4(e,t){e.beginPath(),fh(e,t)}var Rre={type:"rect",tag:"path",nested:!1,attr:Ore,bound:Nre,draw:u$(s4),pick:l$(s4),isect:DU};function zre(e,t){e("transform",kU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Bre(e,t){var n,i;return $o(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function RU(e,t,n){var i,r,a,s;return t.stroke&&Fd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function Lre(e,t,n){Da(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&RU(e,i,r)&&(kd(e,i),e.stroke())}})}function Ure(e,t,n,i){return e.isPointInStroke?RU(e,t,1)&&e.isPointInStroke(n,i):!1}var Ire={type:"rule",tag:"line",nested:!1,attr:zre,bound:Bre,draw:Lre,pick:p2(Ure),isect:$U},jre=f$("shape",Vie),Pre=f$("symbol",Wie,s$);const o4=P7();var Sr={height:As,measureWidth:m$,estimateWidth:gv,width:gv,canvas:zU};zU(!0);function zU(e){Sr.width=e&&Tu?m$:gv}function gv(e,t){return BU(Iu(e,t),As(e))}function BU(e,t){return~~(.8*e.length*t)}function m$(e,t){return As(e)<=0||!(t=Iu(e,t))?0:LU(t,v2(e))}function LU(e,t){const n=`(${t}) ${e}`;let i=o4.get(n);return i===void 0&&(Tu.font=t,i=Tu.measureText(e).width,o4.set(n,i)),i}function As(e){return e.fontSize!=null?+e.fontSize||0:11}function Uu(e){return e.lineHeight!=null?e.lineHeight:As(e)+2}function qre(e){return we(e)?e.length>1?e:e[0]:e}function zp(e){return qre(e.lineBreak&&e.text&&!we(e.text)?e.text.split(e.lineBreak):e.text)}function y$(e){const t=zp(e);return(we(t)?t.length-1:0)*Uu(e)}function Iu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Gre(e,n):n}function Hre(e){if(Sr.width===m$){const t=v2(e);return n=>LU(n,t)}else if(Sr.width===gv){const t=As(e);return n=>BU(n,t)}else return t=>Sr.width(e,t)}function Gre(e,t){var n=+e.limit,i=Hre(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function Bp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function v2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+As(e)+"px "+Bp(e,t)}function v$(e){var t=e.baseline,n=As(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Uu(e):t==="line-bottom"?.29*n-.5*Uu(e):0)}const Yre={left:"start",center:"middle",right:"end"},Ag=new mn;function b2(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-jl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Ag.x1=t,Ag.y1=n,Ag}function Xre(e,t){var n=t.dx||0,i=(t.dy||0)+v$(t),r=b2(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",Yre[t.align]||"start"),o?(l=tc(a,s)+" "+c$(o),(n||i)&&(l+=" "+tc(n,i))):l=tc(a+n,s+i),e("transform",l)}function b$(e,t,n){var i=Sr.height(t),r=t.align,a=b2(t),s=a.x1,o=a.y1,l=t.dx||0,f=(t.dy||0)+v$(t)-Math.round(.8*i),d=zp(t),h;if(we(d)?(i+=Uu(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,Sr.width(t,y)),0)):h=Sr.width(t,d),r==="center"?l-=h/2:r==="right"&&(l-=h),e.set(l+=s,f+=o,l+h,f+i),t.angle&&!n)e.rotate(t.angle*Lu,s,o);else if(n===2)return e.rotatedPoints(t.angle*Lu,s,o);return e}function Vre(e,t,n){Da(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=v2(i),e.textAlign=i.align||"left",a=b2(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*Lu),s=o=0),s+=i.dx||0,o+=(i.dy||0)+v$(i),d=zp(i),kd(e,i),we(d))for(f=Uu(i),l=0;l<d.length;++l)h=Iu(i,d[l]),i.fill&&dv(e,i,r)&&e.fillText(h,s,o),i.stroke&&Fd(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=Iu(i,d),i.fill&&dv(e,i,r)&&e.fillText(h,s,o),i.stroke&&Fd(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function Wre(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=b2(t),o=s.x1,l=s.y1,f=b$(Ag,t,1),d=-t.angle*Lu,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*l),v=p*r+h*a+(l-p*o-h*l);return f.contains(y,v)}function Qre(e,t){const n=b$(Ag,e,2);return id(t,n[0],n[1],n[2],n[3])||id(t,n[0],n[1],n[4],n[5])||id(t,n[4],n[5],n[6],n[7])||id(t,n[2],n[3],n[6],n[7])}var Zre={type:"text",tag:"text",nested:!1,attr:Xre,bound:b$,draw:Vre,pick:p2(Wre),isect:Qre},Kre=d$("trail",Qie,cre),Mr={arc:ore,area:fre,group:_re,image:$re,line:Mre,path:Fre,rect:Rre,rule:Ire,shape:jre,symbol:Pre,text:Zre,trail:Kre};function _w(e,t,n){var i=Mr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new mn),e,n)}var u4={mark:null};function UU(e,t,n){var i=Mr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,f,d;if(i.nested)return s?f=a[0]:(u4.mark=e,f=u4),d=_w(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new mn,s)for(o=0,l=a.length;o<l;++o)t.union(_w(a[o],r,n));return e.bounds=t}const Jre=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function IU(e,t){return JSON.stringify(e,Jre,t)}function jU(e){const t=typeof e=="string"?JSON.parse(e):e;return PU(t)}function PU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&PU(n[r]);return t&&UU(e),e}class qU{constructor(t){arguments.length?this.root=jU(t):(this.root=l4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new h2(this.root)])}toJSON(t){return IU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=l4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function l4(e,t){const n={bounds:new mn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function vu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function x$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function xn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=vu(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Pr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function HU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function x2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function eae(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=Mr[r.marktype]).tip){for(s=x2(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let E$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Ub(),this._tooltip=n||tae}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=vu(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=eae(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,f+=t.y||0;return{x:l,y:f,width:s,height:o,left:l,top:f,right:l+s,bottom:f+o}}};function tae(e,t,n,i){e.element().setAttribute("title",i||"")}class Lp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new CU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const nae="keydown",iae="keypress",rae="keyup",GU="dragenter",Cy="dragleave",YU="dragover",ww="pointerdown",aae="pointerup",pv="pointermove",Dy="pointerout",XU="pointerover",Cw="mousedown",sae="mouseup",VU="mousemove",mv="mouseout",WU="mouseover",yv="click",oae="dblclick",uae="wheel",QU="mousewheel",vv="touchstart",bv="touchmove",xv="touchend",lae=[nae,iae,rae,GU,Cy,YU,ww,aae,pv,Dy,XU,Cw,sae,VU,mv,WU,yv,oae,uae,QU,vv,bv,xv],Dw=pv,Sg=mv,$w=yv;class Up extends E${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=lae,this.pointermove=f4([pv,VU],[XU,WU],[Dy,mv]),this.dragover=f4([YU],[GU],[Cy]),this.pointerout=d4([Dy,mv]),this.dragleave=d4([Cy])}initialize(t,n,i){return this._canvas=t&&x$(t,"canvas"),[yv,Cw,ww,pv,Dy,Cy].forEach(r=>c4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(QU,t)}pointerdown(t){this._down=this._active,this.fire(ww,t)}mousedown(t){this._down=this._active,this.fire(Cw,t)}click(t){this._down===this._active&&(this.fire(yv,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(vv,t,!0)}touchmove(t){this.fire(bv,t,!0)}touchend(t){this.fire(xv,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===$w&&r&&r.href?this.handleHref(n,r,r.href):(t===Dw||t===Sg)&&this.handleTooltip(n,r,t!==Sg),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(c4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=x2(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return Mr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const cae=e=>e===vv||e===bv||e===xv?[vv,bv,xv]:[e];function c4(e,t){cae(t).forEach(n=>fae(e,n))}function fae(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function sg(e,t,n){t.forEach(i=>e.fire(i,n))}function f4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?sg(this,e,i):((!r||!r.exit)&&sg(this,n,i),this._active=a,sg(this,t,i),sg(this,e,i))}}function d4(e){return function(t){sg(this,e,t),this._active=null}}function dae(){return typeof window<"u"&&window.devicePixelRatio||1}function hae(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?dae():r;e.width=t*l,e.height=n*l;for(const f in a)o[f]=a[f];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Ev extends Lp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new mn,this._tempb=new mn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Mu(1,1,this._options.type),t&&this._canvas&&(Pr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)hae(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ne("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=gae(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):pae(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=Mr[n.marktype];n.clip&&dre(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const gae=(e,t,n)=>new mn().set(0,0,t,n).translate(-e[0],-e[1]);function pae(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class ZU extends E${constructor(t,n){super(t,n);const i=this;i._hrefHandler=kS(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=kS(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Sg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener($w,this._hrefHandler),r.removeEventListener(Dw,this._tooltipHandler),r.removeEventListener(Sg,this._tooltipHandler)),this._svg=r=t&&x$(t,"svg"),r&&(r.addEventListener($w,this._hrefHandler),r.addEventListener(Dw,this._tooltipHandler),r.addEventListener(Sg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:kS(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const kS=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},KU="aria-hidden",A$="aria-label",S$="role",_$="aria-roledescription",JU="graphics-object",w$="graphics-symbol",eI=(e,t,n)=>({[S$]:e,[_$]:t,[A$]:n||void 0}),mae=wa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),h4={axis:{desc:"axis",caption:bae},legend:{desc:"legend",caption:xae},"title-text":{desc:"title",caption:e=>`Title text '${p4(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${p4(e)}'`}},g4={ariaRole:S$,ariaRoleDescription:_$,description:A$};function tI(e,t){const n=t.aria===!1;if(e(KU,n||void 0),n||t.description==null)for(const i in g4)e(g4[i],void 0);else{const i=t.mark.marktype;e(A$,t.description),e(S$,t.ariaRole||(i==="group"?JU:w$)),e(_$,t.ariaRoleDescription||`${i} mark`)}}function nI(e){return e.aria===!1?{[KU]:!0}:mae[e.role]?null:h4[e.role]?vae(e,h4[e.role]):yae(e)}function yae(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return eI(n?JU:w$,`${t} mark container`,e.description)}function vae(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return eI(t.role||w$,t.desc,n.description||i(n))}catch{return null}}function p4(e){return ke(e.text).join(" ")}function bae(e){const t=e.datum,n=e.orient,i=t.title?iI(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Md(o)?"discrete":o} scale with ${mU(s,a,e)}`}function xae(e){const t=e.datum,n=t.title?iI(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return Aae(i)+(n?` titled '${n}'`:"")+` for ${Eae(a)} with ${mU(l,o,e)}`}function iI(e){try{return ke(nt(e.items).items[0].text).join(" ")}catch{return null}}function Eae(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+nt(e)}function Aae(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const rI=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Sae=e=>rI(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function C$(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,f)=>(f!=null&&(t+=` ${l}="${Sae(f)}"`),o),o={open(l){a(l),t="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=rI(l),o),toString:()=>e};return o}const aI=e=>sI(C$(),e)+"";function sI(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):sI(e,i)}return e.close()}const Av={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Sv={blend:"mix-blend-mode"},oI={fill:"none","stroke-miterlimit":10},z0=0,m4="http://www.w3.org/2000/xmlns/",bn=Qg.xmlns;class D$ extends Lp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=xn(t,0,"svg",bn),this._svg.setAttributeNS(m4,"xmlns",bn),this._svg.setAttributeNS(m4,"xmlns:xlink",Qg["xmlns:xlink"]),this._svg.setAttribute("version",Qg.version),this._svg.setAttribute("class","marks"),Pr(t,1),this._root=xn(this._svg,z0,"g",bn),bu(this._root,oI),Pr(this._svg,z0+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(bu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=xn(t,z0,"rect",bn),bu(i,{width:this._width,height:this._height,fill:n}));const r=aI(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Pr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,f;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=Mr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,y4(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,y4(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=Mr[s],l=n.interactive===!1?"none":null,f=o.tag==="g",d=v4(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Pr(d,0),n._svg;d.setAttribute("class",HU(n));const h=nI(n);for(const b in h)_i(d,b,h[b]);f||_i(d,"pointer-events",l),_i(d,"clip-path",n.clip?r$(this,n,n.group):null);let p=null,y=0;const v=b=>{const E=this.isDirty(b),S=v4(b,d,p,o.tag,a);E&&(this._update(o,S,b),f&&Cae(this,S,b,r)),p=S,++y};return o.nested?n.items.length&&v(n.items[0]):Da(n,v),Pr(d,y),d}_update(t,n,i){fo=n,li=n.__values__,tI(_g,i),t.attr(_g,i,this);const r=$ae[t.type];r&&r.call(this,t,n,i),fo&&this.style(fo,i)}style(t,n){if(n!=null){for(const i in Av){let r=i==="font"?Bp(n):n[i];if(r===li[i])continue;const a=Av[i];r==null?t.removeAttribute(a):(t$(r)&&(r=vU(r,this._defs.gradient,uI())),t.setAttribute(a,r+"")),li[i]=r}for(const i in Sv)$y(t,Sv[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=xn(t,z0+1,"defs",bn)),r=_ae(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=xn(t,z0+1,"defs",bn)),r=wae(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Pr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function y4(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function _ae(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=xn(e,n++,"pattern",bn);bu(s,{id:fv+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=xn(s,0,"rect",bn),bu(s,{width:1,height:1,fill:`url(${uI()}#${t.id})`}),e=xn(e,n++,"radialGradient",bn),bu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=xn(e,n++,"linearGradient",bn),bu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=xn(e,i,"stop",bn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Pr(e,i),n}function wae(e,t,n){let i;return e=xn(e,n,"clipPath",bn),e.setAttribute("id",t.id),t.path?(i=xn(e,0,"path",bn),i.setAttribute("d",t.path)):(i=xn(e,0,"rect",bn),bu(i,{x:0,y:0,width:t.width,height:t.height})),Pr(e,1),n+1}function Cae(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;Da(n,s=>{r=e.mark(t,s,r,i),++a}),Pr(t,1+a)}function v4(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=vu(s,i,bn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=vu(s,"path",bn);a.appendChild(o),o.__data__=e;const l=vu(s,"g",bn);a.appendChild(l),l.__data__=e;const f=vu(s,"path",bn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||Dae(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Dae(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fo=null,li=null;const $ae={group(e,t,n){const i=fo=t.childNodes[2];li=i.__values__,e.foreground(_g,n,this),li=t.__values__,fo=t.childNodes[1],e.content(_g,n,this);const r=fo=t.childNodes[0];e.background(_g,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==li.events&&(_i(i,"pointer-events",a),_i(r,"pointer-events",a),li.events=a),n.strokeForeground&&n.stroke){const s=n.fill;_i(i,"display",null),this.style(r,n),_i(r,"stroke",null),s&&(n.fill=null),li=i.__values__,this.style(i,n),s&&(n.fill=s),fo=null}else _i(i,"display","none")},image(e,t,n){n.smooth===!1?($y(t,"image-rendering","optimizeSpeed"),$y(t,"image-rendering","pixelated")):$y(t,"image-rendering",null)},text(e,t,n){const i=zp(n);let r,a,s,o;we(i)?(a=i.map(l=>Iu(n,l)),r=a.join(`
`),r!==li.text&&(Pr(t,0),s=t.ownerDocument,o=Uu(n),a.forEach((l,f)=>{const d=vu(s,"tspan",bn);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),li.text=r)):(a=Iu(n,i),a!==li.text&&(t.textContent=a,li.text=a)),_i(t,"font-family",Bp(n)),_i(t,"font-size",As(n)+"px"),_i(t,"font-style",n.fontStyle),_i(t,"font-variant",n.fontVariant),_i(t,"font-weight",n.fontWeight)}};function _g(e,t,n){t!==li[e]&&(n?Mae(fo,e,t,n):_i(fo,e,t),li[e]=t)}function $y(e,t,n){n!==li[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),li[t]=n)}function bu(e,t){for(const n in t)_i(e,n,t[n])}function _i(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Mae(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function uI(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class lI extends Lp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=C$();n.open("svg",He({},Qg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",oI,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=Mr[n.marktype],r=i.tag,a=[tI,i.attr];t.open("g",{class:HU(n),"clip-path":n.clip?r$(this,n,n.group):null},nI(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=zp(o);if(we(f)){const d={x:0,dy:Uu(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text(Iu(o,f[h])).close()}else t.text(Iu(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),Da(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):Da(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,f,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Tae(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:fv+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Tae(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Bp(t),e["font-size"]=As(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Av){let o=t[s];const l=Av[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(t$(o)&&(o=vU(o,r.gradient,"")),e[l]=o)}for(const s in Sv){const o=t[s];o!=null&&(a=a||[],a.push(`${Sv[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const ha={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function kae(e){ha.svgMarkTypes=e.svgMarkTypes??["text"],ha.svgOnTop=e.svgOnTop??!0,ha.debug=e.debug??!1}class Mw extends Lp{constructor(t){super(t),this._svgRenderer=new D$(t),this._canvasRenderer=new Ev(t)}initialize(t,n,i,r,a){this._root_el=xn(t,0,"div");const s=xn(this._root_el,0,"div"),o=xn(this._root_el,1,"div");return this._root_el.style.position="relative",ha.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=ha.svgOnTop?o:s,this._canvasEl=ha.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return ha.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!ha.svgMarkTypes.includes(a));this._svgRenderer.render(t,ha.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return ha.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class cI extends Up{constructor(t,n){super(t,n)}initialize(t,n,i){const r=xn(xn(t,0,"div"),ha.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const fI="canvas",dI="hybrid",hI="png",gI="svg",pI="none",xu={Canvas:fI,PNG:hI,SVG:gI,Hybrid:dI,None:pI},fc={};fc[fI]=fc[hI]={renderer:Ev,headless:Ev,handler:Up};fc[gI]={renderer:D$,headless:lI,handler:ZU};fc[dI]={renderer:Mw,headless:Mw,handler:cI};fc[pI]={};function E2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fc[e]=t,this):fc[e]}function mI(e,t,n){const i=[],r=new mn().union(t),a=e.marktype;return a?yI(e,r,n,i):a==="group"?vI(e,r,n,i):ne("Intersect scene must be mark node or group item.")}function yI(e,t,n,i){if(Fae(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)vI(r[o],t,n,i);else for(const l=Mr[a].isect;o<s;++o){const f=r[o];bI(f,t,l)&&i.push(f)}}return i}function Fae(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function vI(e,t,n,i){n&&n(e.mark)&&bI(e,t,Mr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)yI(r[l],t,n,i);t.translate(s,o)}return i}function bI(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const FS=new mn;function xI(e){const t=e.clip;if(Ye(t))t(Np(FS.clear()));else if(t)FS.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(FS)}const Oae=1e-9;function $$(e,t,n){return e===t?!0:n==="path"?EI(e,t):e instanceof Date&&t instanceof Date?+e==+t:Fu(e)&&Fu(t)?Math.abs(e-t)<=Oae:!e||!t||!Ue(e)&&!Ue(t)?e==t:Nae(e,t)}function EI(e,t){return $$(Td(e),Td(t))}function Nae(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!$$(e[r],t[r],r))return!1;return typeof e==typeof t}function Rae(){wU(),aie()}const Od="top",va="left",ba="right",ju="bottom",zae="top-left",Bae="top-right",Lae="bottom-left",Uae="bottom-right",M$="start",Tw="middle",wi="end",Iae="x",jae="y",A2="group",T$="axis",k$="title",Pae="frame",qae="scope",F$="legend",AI="row-header",SI="row-footer",_I="row-title",wI="column-header",CI="column-footer",DI="column-title",Hae="padding",Gae="symbol",$I="fit",MI="fit-x",TI="fit-y",Yae="pad",O$="none",I1="all",kw="each",N$="flush",Eu="column",Au="row";function kI(e){K.call(this,null,e)}pe(kI,K,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=Mr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=j1(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===A2||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(j1(f,s))),i.role){case T$:case F$:case k$:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(j1(f,s))}),t.visit(t.MOD,f=>{l=l||o.alignsWith(f.bounds),n.dirty(f),o.union(j1(f,s))}),l&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return xI(i),t.modifies("bounds")}});function j1(e,t,n){return t(e.bounds.clear(),e,n)}const b4=":vega_identifier:";function R$(e){K.call(this,0,e)}R$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};pe(R$,K,{transform(e,t){const n=Xae(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Xae(e){return e._signals[b4]||(e._signals[b4]=e.add(0))}function FI(e){K.call(this,null,e)}pe(FI,K,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Vae(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===A2?h2:d2;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Vae(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function OI(e){K.call(this,null,e)}const x4={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!NI(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},NI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),E4=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(NI(r,a=e[n].bounds,t))return!0},Wae=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Qae=(e,t,n)=>{var i=e.range(),r=new mn;return t===Od||t===ju?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},A4=e=>(e.forEach(t=>t.opacity=1),e),S4=(e,t)=>e.reflow(t.modified()).modifies("opacity");pe(OI,K,{transform(e,t){const n=x4[e.method]||x4.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(A4(r),t=S4(t,e)),t;if(r=r.filter(Wae),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=A4(r),t=S4(t,e),a.length>=3&&E4(a,i)){do a=n(a,i);while(a.length>=3&&E4(a,i));a.length<3&&!nt(r).opacity&&(a.length>1&&(nt(a).opacity=0),nt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Qae(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function RI(e){K.call(this,null,e)}pe(RI,K,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const ui=new mn;function rd(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Zae(e){var t=e.items[0].orient;return t===va||t===ba}function Kae(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Jae(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=Kae(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,E=r.bounds,S=v&&y$(v),_=0,w=0,C,$;switch(ui.clear().union(E),E.clear(),(C=l[0])>-1&&E.union(r.items[C].bounds),(C=l[1])>-1&&E.union(r.items[C].bounds),o){case Od:_=h||0,w=-d,$=Math.max(p,Math.min(y,-E.y1)),E.add(0,-$).add(f,0),v&&P1(e,v,$,b,S,0,-1,E);break;case va:_=-d,w=h||0,$=Math.max(p,Math.min(y,-E.x1)),E.add(-$,0).add(0,f),v&&P1(e,v,$,b,S,1,-1,E);break;case ba:_=n+d,w=h||0,$=Math.max(p,Math.min(y,E.x2)),E.add(0,0).add($,f),v&&P1(e,v,$,b,S,1,1,E);break;case ju:_=h||0,w=i+d,$=Math.max(p,Math.min(y,E.y2)),E.add(0,0).add(f,$),v&&P1(e,v,$,b,0,0,1,E);break;default:_=r.x,w=r.y}return $o(E.translate(_,w),r),rd(r,"x",_+s)|rd(r,"y",w+s)&&(r.bounds=ui,e.dirty(r),r.bounds=E,e.dirty(r)),r.mark.bounds.clear().union(E)}function P1(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(l.translate(-d,-h)),e.dirty(t)}o.union(l)}const _4=(e,t)=>Math.floor(Math.min(e,t)),w4=(e,t)=>Math.ceil(Math.max(e,t));function ese(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===A2)switch(r.role){case T$:case F$:case k$:break;case AI:s.rowheaders.push(...a);break;case SI:s.rowfooters.push(...a);break;case wI:s.colheaders.push(...a);break;case CI:s.colfooters.push(...a);break;case _I:s.rowtitle=a[0];break;case DI:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function tse(e){return new mn().set(0,0,e.width||0,e.height||0)}function nse(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function It(e,t,n){const i=Ue(e)?e[t]:e;return i??(n!==void 0?n:0)}function C4(e){return e<0?Math.ceil(-e):0}function zI(e,t,n){var i=!n.nodirty,r=n.bounds===N$?tse:nse,a=ui.set(0,0,0,0),s=It(n.align,Eu),o=It(n.align,Au),l=It(n.padding,Eu),f=It(n.padding,Au),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,E=Array(p),S=Array(h),_=0,w=Array(p),C=Array(p),$=Array(p),T,D,F,O,U,z,G,B,j,I,N;for(D=0;D<d;++D)v[D]=0;for(D=0;D<h;++D)S[D]=0;for(D=0;D<p;++D)z=t[D],U=$[D]=r(z),z.x=z.x||0,w[D]=0,z.y=z.y||0,C[D]=0,F=D%d,O=~~(D/d),b=Math.max(b,G=Math.ceil(U.x2)),_=Math.max(_,B=Math.ceil(U.y2)),v[F]=Math.max(v[F],G),S[O]=Math.max(S[O],B),y[D]=l+C4(U.x1),E[D]=f+C4(U.y1),i&&e.dirty(t[D]);for(D=0;D<p;++D)D%d===0&&(y[D]=0),D<d&&(E[D]=0);if(s===kw)for(F=1;F<d;++F){for(N=0,D=F;D<p;D+=d)N<y[D]&&(N=y[D]);for(D=F;D<p;D+=d)y[D]=N+v[F-1]}else if(s===I1){for(N=0,D=0;D<p;++D)D%d&&N<y[D]&&(N=y[D]);for(D=0;D<p;++D)D%d&&(y[D]=N+b)}else for(s=!1,F=1;F<d;++F)for(D=F;D<p;D+=d)y[D]+=v[F-1];if(o===kw)for(O=1;O<h;++O){for(N=0,D=O*d,T=D+d;D<T;++D)N<E[D]&&(N=E[D]);for(D=O*d;D<T;++D)E[D]=N+S[O-1]}else if(o===I1){for(N=0,D=d;D<p;++D)N<E[D]&&(N=E[D]);for(D=d;D<p;++D)E[D]=N+_}else for(o=!1,O=1;O<h;++O)for(D=O*d,T=D+d;D<T;++D)E[D]+=S[O-1];for(j=0,D=0;D<p;++D)j=y[D]+(D%d?j:0),w[D]+=j-t[D].x;for(F=0;F<d;++F)for(I=0,D=F;D<p;D+=d)I+=E[D],C[D]+=I-t[D].y;if(s&&It(n.center,Eu)&&h>1)for(D=0;D<p;++D)U=s===I1?b:v[D%d],j=U-$[D].x2-t[D].x-w[D],j>0&&(w[D]+=j/2);if(o&&It(n.center,Au)&&d!==1)for(D=0;D<p;++D)U=o===I1?_:S[~~(D/d)],I=U-$[D].y2-t[D].y-C[D],I>0&&(C[D]+=I/2);for(D=0;D<p;++D)a.union($[D].translate(w[D],C[D]));switch(j=It(n.anchor,Iae),I=It(n.anchor,jae),It(n.anchor,Eu)){case wi:j-=a.width();break;case Tw:j-=a.width()/2}switch(It(n.anchor,Au)){case wi:I-=a.height();break;case Tw:I-=a.height()/2}for(j=Math.round(j),I=Math.round(I),a.clear(),D=0;D<p;++D)t[D].mark.bounds.clear();for(D=0;D<p;++D)z=t[D],z.x+=w[D]+=j,z.y+=C[D]+=I,a.union(z.mark.bounds.union(z.bounds.translate(w[D],C[D]))),i&&e.dirty(z);return a}function ise(e,t,n){var i=ese(t),r=i.marks,a=n.bounds===N$?rse:ase,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),f=l*o,d,h,p,y,v,b,E;const S=zI(e,r,n);S.empty()&&S.set(0,0,0,0),i.rowheaders&&(b=It(n.headerBand,Au,null),d=q1(e,i.rowheaders,r,o,l,-It(s,"rowHeader"),_4,0,a,"x1",0,o,1,b)),i.colheaders&&(b=It(n.headerBand,Eu,null),h=q1(e,i.colheaders,r,o,o,-It(s,"columnHeader"),_4,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=It(n.footerBand,Au,null),p=q1(e,i.rowfooters,r,o,l,It(s,"rowFooter"),w4,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=It(n.footerBand,Eu,null),y=q1(e,i.colfooters,r,o,o,It(s,"columnFooter"),w4,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=It(n.titleAnchor,Au),E=It(s,"rowTitle"),E=v===wi?p+E:d-E,b=It(n.titleBand,Au,.5),D4(e,i.rowtitle,E,0,S,b)),i.coltitle&&(v=It(n.titleAnchor,Eu),E=It(s,"columnTitle"),E=v===wi?y+E:h-E,b=It(n.titleBand,Eu,.5),D4(e,i.coltitle,E,1,S,b))}function rse(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ase(e,t){return e.bounds[t]}function q1(e,t,n,i,r,a,s,o,l,f,d,h,p,y){var v=n.length,b=0,E=0,S,_,w,C,$,T,D,F,O;if(!v)return b;for(S=d;S<v;S+=h)n[S]&&(b=s(b,l(n[S],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,_=0,C=t.length;_<C;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(S=d,_=0,C=t.length;_<C;++_,S+=h){for(T=t[_],$=T.mark.bounds,w=S;w>=0&&(D=n[w])==null;w-=p);o?(F=y==null?D.x:Math.round(D.bounds.x1+y*D.bounds.width()),O=b):(F=b,O=y==null?D.y:Math.round(D.bounds.y1+y*D.bounds.height())),$.union(T.bounds.translate(F-(T.x||0),O-(T.y||0))),T.x=F,T.y=O,e.dirty(T),E=s(E,$[f])}return E}function D4(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function sse(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function ose(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function use(e,t,n,i,r,a,s){const o=sse(n,t),l=ose(e,o("offset",0)),f=o("anchor",M$),d=f===wi?1:f===Tw?.5:0,h={align:kw,bounds:o("bounds",N$),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case va:h.anchor={x:Math.floor(i.x1)-l,column:wi,y:d*(s||i.height()+2*i.y1),row:f};break;case ba:h.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:f};break;case Od:h.anchor={y:Math.floor(r.y1)-l,row:wi,x:d*(a||r.width()+2*r.x1),column:f};break;case ju:h.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case zae:h.anchor={x:l,y:l};break;case Bae:h.anchor={x:a-l,y:l,column:wi};break;case Lae:h.anchor={x:l,y:s-l,row:wi};break;case Uae:h.anchor={x:a-l,y:s-l,column:wi,row:wi};break}return h}function lse(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),fse(e,n,n.items[0].items[0]),a=cse(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===Gae&&dse(n.items[0].items[0].items[0].items),r!==O$&&(n.x=s=0,n.y=o=0),n.width=l,n.height=f,$o(a.set(s,o,s+l,o+f),n),n.mark.bounds.clear().union(a),n}function cse(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function fse(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&B0(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case va:r+=Math.ceil(s.bounds.width())+l;break;case ba:case ju:break;default:a+=s.bounds.height()+l}switch((r||a)&&B0(e,n,r,a),s.orient){case va:d+=If(t,n,s,o,1,1);break;case ba:f+=If(t,n,s,wi,0,0)+l,d+=If(t,n,s,o,1,1);break;case ju:f+=If(t,n,s,o,0,0),d+=If(t,n,s,wi,-1,0,1)+l;break;default:f+=If(t,n,s,o,0,0)}(f||d)&&B0(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(B0(e,n,-f,0),B0(e,s,-f,0))}}function If(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,f=o&&(a||!l)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:y$(n);return Math.round(i===M$?h:i===wi?p-y:.5*(d-y))}function B0(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function dse(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function hse(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===va||o===ba?i:n,v=0,b=0,E=0,S=0,_=0,w;if(s!==A2?o===va?(v=r.y2,y=r.y1):o===ba?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===va&&(v=i,y=0),w=l===M$?v:l===wi?y:(v+y)/2,p&&p.text){switch(o){case Od:case ju:_=h.bounds.height()+d;break;case va:S=h.bounds.width()+d;break;case ba:S=-h.bounds.width()-d;break}ui.clear().union(p.bounds),ui.translate(S-(p.x||0),_-(p.y||0)),rd(p,"x",S)|rd(p,"y",_)&&(e.dirty(p),p.bounds.clear().union(ui),p.mark.bounds.clear().union(ui),e.dirty(p)),ui.clear().union(p.bounds)}else ui.clear();switch(ui.union(h.bounds),o){case Od:b=w,E=r.y1-ui.height()-f;break;case va:b=r.x1-ui.width()-f,E=w;break;case ba:b=r.x2+ui.width()+f,E=w;break;case ju:b=w,E=r.y2+f;break;default:b=a.x,E=a.y}return rd(a,"x",b)|rd(a,"y",E)&&(ui.translate(b,E),e.dirty(a),a.bounds.clear().union(ui),t.bounds.clear().union(ui),e.dirty(a)),a.bounds}function BI(e){K.call(this,null,e)}pe(BI,K,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&ise(n,i,e.layout),pse(n,i,e)}),gse(e.mark.group)?t.reflow():t}});function gse(e){return e&&e.mark.role!=="legend-entry"}function pse(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new mn().set(0,0,r,a),o=s.clone(),l=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case T$:y=Zae(h)?o:l,y.union(Jae(e,h,r,a));break;case k$:d=h;break;case F$:f.push(lse(e,h));break;case Pae:case qae:case AI:case SI:case _I:case wI:case CI:case DI:o.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const E={};f.forEach(S=>{p=S.orient||ba,p!==O$&&(E[p]||(E[p]=[])).push(S)});for(const S in E){const _=E[S];zI(e,_,use(_,S,n.legends,o,l,r,a))}f.forEach(S=>{const _=S.bounds;if(_.equals(S._bounds)||(S.bounds=S._bounds,e.dirty(S),S.bounds=_,e.dirty(S)),n.autosize&&(n.autosize.type===$I||n.autosize.type===MI||n.autosize.type===TI))switch(S.orient){case va:case ba:s.add(_.x1,0).add(_.x2,0);break;case Od:case ju:s.add(0,_.y1).add(0,_.y2)}else s.union(_)})}s.union(o).union(l),d&&s.union(hse(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),mse(e,t,s,n)}function mse(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Hae){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===O$?(f=0,h=0,l=s,d=o):a===$I?(l=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===MI?(l=Math.max(0,s-f-p),o=d+h+y):a===TI?(s=l+f+p,d=Math.max(0,o-h-y)):a===Yae&&(s=l+f+p,o=d+h+y),e._resizeView(s,o,l,d,[f,h],r.resize)}const yse=Object.freeze(Object.defineProperty({__proto__:null,bound:kI,identifier:R$,mark:FI,overlap:OI,render:RI,viewlayout:BI},Symbol.toStringTag,{value:"Module"}));function LI(e){K.call(this,null,e)}pe(LI,K,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=JD(a,s,e.minstep),l=e.format||fU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?cU(a,e.values,o):e$(a,o);return r&&(i.rem=r),r=f.map((d,h)=>yt({index:h/(f.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(yt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function UI(e){K.call(this,null,e)}function vse(){return yt({})}function bse(e){const t=nh().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}pe(UI,K,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||vse,a=e.key||Me,s=this.value;return we(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ne("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=bse(a)),t.visit(t.ADD,o=>{const l=a(o);let f=s.get(l);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(l,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),f=s.get(l);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const l=a(o),f=s.get(l);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function II(e){K.call(this,null,e)}pe(II,K,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(we(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||uu,l=r.enter||uu,f=r.exit||uu,d=(a&&!s?r[a]:o)||uu;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),o(h,e)}),n.modifies(l.output),n.modifies(o.output),d!==uu&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==uu&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==uu){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function jI(e){K.call(this,[],e)}pe(jI,K,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||xy,s=e.scale,o=+e.limit,l=JD(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===xy,d=e.format||pU(n,s,l,a,e.formatSpecifier,e.formatType,f),h=e.values||gU(s,l),p,y,v,b,E;return r&&(i.rem=r),a===xy?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),E=!0):r=h,Ye(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((S,_)=>Math.max(S,v(_,e)),0)):v=bi(b=v||8),r=r.map((S,_)=>yt({index:_,label:d(S,_,r),value:S,offset:b,size:v(S,e)})),E&&(E=h[r.length],r.push(yt({index:r.length,label:`${h.length-r.length} entries`,value:E,offset:b,size:v(E,e)})))):a===Yne?(p=s.domain(),y=oU(s,p[0],nt(p)),h.length<3&&!e.values&&p[0]!==nt(p)&&(h=[p[0],nt(p)]),r=h.map((S,_)=>yt({index:_,label:d(S,_,h),value:S,perc:y(S)}))):(v=h.length-1,y=iie(s),r=h.map((S,_)=>yt({index:_,label:d(S,_,h),value:S,perc:_?y(S):0,perc2:_===v?1:y(h[_+1])}))),i.source=r,i.add=r,this.value=r,i}});const xse=e=>e.source.x,Ese=e=>e.source.y,Ase=e=>e.target.x,Sse=e=>e.target.y;function z$(e){K.call(this,{},e)}z$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};pe(z$,K,{transform(e,t){var n=e.sourceX||xse,i=e.sourceY||Ese,r=e.targetX||Ase,a=e.targetY||Sse,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",f=$4.get(l+"-"+o)||$4.get(l);return f||ne("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const PI=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,_se=(e,t,n,i)=>PI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),qI=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},wse=(e,t,n,i)=>qI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),HI=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Cse=(e,t,n,i)=>HI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Dse=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,$se=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Mse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Tse=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},kse=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},Fse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},$4=nh({line:PI,"line-radial":_se,arc:qI,"arc-radial":wse,curve:HI,"curve-radial":Cse,"orthogonal-horizontal":Dse,"orthogonal-vertical":$se,"orthogonal-radial":Mse,"diagonal-horizontal":Tse,"diagonal-vertical":kse,"diagonal-radial":Fse});function B$(e){K.call(this,null,e)}B$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};pe(B$,K,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||th,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,f=l.map(a),d=f.length,h=s,p=(o-s)/rz(f),y=Er(d),v,b,E;for(e.sort&&y.sort((S,_)=>f[S]-f[_]),v=0;v<d;++v)E=f[y[v]],b=l[y[v]],b[i]=h,b[r]=h+=E*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Ose=5;function Nse(e){const t=e.type;return!e.bins&&(t===Dd||t===Dp||t===$p)}function GI(e){return QD(e)&&e!==os}const Rse=wa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function YI(e){K.call(this,null,e),this.modified(!0)}pe(YI,K,{transform(e,t){var n=t.dataflow,i=this.value,r=zse(e);(!i||r!==i.type)&&(this.value=i=gt(r)());for(r in e)if(!Rse[r]){if(r==="padding"&&GI(i.type))continue;Ye(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Pse(i,e,jse(i,e,Lse(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function zse(e){var t=e.type,n="",i;return t===os?os+"-"+Dd:(Bse(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?os+"-":i===3?ch+"-":""),(n+t||Dd).toLowerCase())}function Bse(e){const t=e.type;return QD(t)&&t!==lc&&t!==cc&&(e.scheme||e.range&&e.range.length&&e.range.every(ut))}function Lse(e,t,n){const i=Use(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&Nse(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const f=l>r[o]?o+1:l<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return GI(a)&&t.padding&&r[0]!==nt(r)&&(r=Ise(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(XI(a,r,n)),a===YD&&e.unknown(t.domainImplicit?cw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&JD(e,t.nice)||null),r.length}function Use(e,t,n){return t?(e.domain(XI(e.type,t,n)),t.length):-1}function Ise(e,t,n,i,r,a){var s=Math.abs(nt(n)-n[0]),o=s/(s-2*i),l=e===So?h3(t,null,o):e===$p?Xy(t,null,o,.5):e===Dp?Xy(t,null,o,r||1):e===o2?g3(t,null,o,a||1):d3(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function XI(e,t,n){if(nU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+_e(t))}return t}function jse(e,t,n){let i=t.bins;if(i&&!we(i)){const r=e.domain(),a=r[0],s=nt(r),o=i.step;let l=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||ne("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=Er(l,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===XD&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Pse(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=qse(i,t,n);else if(t.scheme&&(a=Hse(i,t,n),Ye(a))){if(e.interpolator)return e.interpolator(a);ne(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&iU(i))return e.interpolator(c2(Fw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(ZD(t.interpolate,t.interpolateGamma)):Ye(e.round)?e.round(r):Ye(e.rangeRound)&&e.interpolate(r?wp:Qu),a&&e.range(Fw(a,t.reverse))}function qse(e,t,n){e!==QL&&e!==yw&&ne("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===yw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*GD(n,r,i)]}function Hse(e,t,n){var i=t.schemeExtent,r,a;return we(t.scheme)?a=c2(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=KD(r),a||ne(`Unrecognized scheme name: ${t.scheme}`)),n=e===l2?n+1:e===XD?n-1:e===$d||e===u2?+t.schemeCount||Ose:n,iU(e)?M4(a,i,t.reverse):Ye(a)?sU(M4(a,i),n):e===YD?a:a.slice(0,n)}function M4(e,t,n){return Ye(e)&&(t||n)?aU(e,Fw(t||[0,1],n)):e}function Fw(e,t){return t?e.slice().reverse():e}function VI(e){K.call(this,null,e)}pe(VI,K,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Oc(e.sort)),this.modified(n),t}});const T4="zero",WI="center",QI="normalize",ZI=["y0","y1"];function L$(e){K.call(this,null,e)}L$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:T4,values:[T4,WI,QI]},{name:"as",type:"string",array:!0,length:2,default:ZI}]};pe(L$,K,{transform(e,t){var n=e.as||ZI,i=n[0],r=n[1],a=Oc(e.sort),s=e.field||th,o=e.offset===WI?Gse:e.offset===QI?Yse:Xse,l,f,d,h;for(l=Vse(t.source,e.groupby,a,s),f=0,d=l.length,h=l.max;f<d;++f)o(l[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Gse(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function Yse(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,f=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Xse(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,f,d;l<o;++l)d=e[l],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function Vse(e,t,n,i){var r=[],a=b=>b(d),s,o,l,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const Wse=Object.freeze(Object.defineProperty({__proto__:null,axisticks:LI,datajoin:UI,encode:II,legendentries:jI,linkpath:z$,pie:B$,scale:YI,sortitems:VI,stack:L$},Symbol.toStringTag,{value:"Module"}));var Fe=1e-6,_v=1e-12,Qe=Math.PI,Kt=Qe/2,wv=Qe/4,Ri=Qe*2,an=180/Qe,Ve=Qe/180,tt=Math.abs,dh=Math.atan,ea=Math.atan2,Oe=Math.cos,H1=Math.ceil,KI=Math.exp,Ow=Math.hypot,Cv=Math.log,OS=Math.pow,Te=Math.sin,Gr=Math.sign||function(e){return e>0?1:e<0?-1:0},zi=Math.sqrt,U$=Math.tan;function JI(e){return e>1?0:e<-1?Qe:Math.acos(e)}function tr(e){return e>1?Kt:e<-1?-Kt:Math.asin(e)}function Qn(){}function Dv(e,t){e&&F4.hasOwnProperty(e.type)&&F4[e.type](e,t)}var k4={Feature:function(e,t){Dv(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Dv(n[i].geometry,t)}},F4={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Nw(n[i],t,0)},Polygon:function(e,t){O4(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)O4(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Dv(n[i],t)}};function Nw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function O4(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Nw(e[n],t,1);t.polygonEnd()}function ao(e,t){e&&k4.hasOwnProperty(e.type)?k4[e.type](e,t):Dv(e,t)}var $v=new Fi,Mv=new Fi,ej,tj,Rw,zw,Bw,ps={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){$v=new Fi,ps.lineStart=Qse,ps.lineEnd=Zse},polygonEnd:function(){var e=+$v;Mv.add(e<0?Ri+e:e),this.lineStart=this.lineEnd=this.point=Qn},sphere:function(){Mv.add(Ri)}};function Qse(){ps.point=Kse}function Zse(){nj(ej,tj)}function Kse(e,t){ps.point=nj,ej=e,tj=t,e*=Ve,t*=Ve,Rw=e,zw=Oe(t=t/2+wv),Bw=Te(t)}function nj(e,t){e*=Ve,t*=Ve,t=t/2+wv;var n=e-Rw,i=n>=0?1:-1,r=i*n,a=Oe(t),s=Te(t),o=Bw*s,l=zw*a+o*Oe(r),f=o*i*Te(r);$v.add(ea(f,l)),Rw=e,zw=a,Bw=s}function Jse(e){return Mv=new Fi,ao(e,ps),Mv*2}function Tv(e){return[ea(e[1],e[0]),tr(e[2])]}function dc(e){var t=e[0],n=e[1],i=Oe(n);return[i*Oe(t),i*Te(t),Te(n)]}function G1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function NS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Y1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kv(e){var t=zi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Gt,Vi,Qt,vr,Ul,ij,rj,fd,wg,hu,_o,to={point:Lw,lineStart:N4,lineEnd:R4,polygonStart:function(){to.point=sj,to.lineStart=eoe,to.lineEnd=toe,wg=new Fi,ps.polygonStart()},polygonEnd:function(){ps.polygonEnd(),to.point=Lw,to.lineStart=N4,to.lineEnd=R4,$v<0?(Gt=-(Qt=180),Vi=-(vr=90)):wg>Fe?vr=90:wg<-Fe&&(Vi=-90),_o[0]=Gt,_o[1]=Qt},sphere:function(){Gt=-(Qt=180),Vi=-(vr=90)}};function Lw(e,t){hu.push(_o=[Gt=e,Qt=e]),t<Vi&&(Vi=t),t>vr&&(vr=t)}function aj(e,t){var n=dc([e*Ve,t*Ve]);if(fd){var i=Nd(fd,n),r=[i[1],-i[0],0],a=Nd(r,i);kv(a),a=Tv(a);var s=e-Ul,o=s>0?1:-1,l=a[0]*an*o,f,d=tt(s)>180;d^(o*Ul<l&&l<o*e)?(f=a[1]*an,f>vr&&(vr=f)):(l=(l+360)%360-180,d^(o*Ul<l&&l<o*e)?(f=-a[1]*an,f<Vi&&(Vi=f)):(t<Vi&&(Vi=t),t>vr&&(vr=t))),d?e<Ul?yr(Gt,e)>yr(Gt,Qt)&&(Qt=e):yr(e,Qt)>yr(Gt,Qt)&&(Gt=e):Qt>=Gt?(e<Gt&&(Gt=e),e>Qt&&(Qt=e)):e>Ul?yr(Gt,e)>yr(Gt,Qt)&&(Qt=e):yr(e,Qt)>yr(Gt,Qt)&&(Gt=e)}else hu.push(_o=[Gt=e,Qt=e]);t<Vi&&(Vi=t),t>vr&&(vr=t),fd=n,Ul=e}function N4(){to.point=aj}function R4(){_o[0]=Gt,_o[1]=Qt,to.point=Lw,fd=null}function sj(e,t){if(fd){var n=e-Ul;wg.add(tt(n)>180?n+(n>0?360:-360):n)}else ij=e,rj=t;ps.point(e,t),aj(e,t)}function eoe(){ps.lineStart()}function toe(){sj(ij,rj),ps.lineEnd(),tt(wg)>Fe&&(Gt=-(Qt=180)),_o[0]=Gt,_o[1]=Qt,fd=null}function yr(e,t){return(t-=e)<0?t+360:t}function noe(e,t){return e[0]-t[0]}function z4(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ioe(e){var t,n,i,r,a,s,o;if(vr=Qt=-(Gt=Vi=1/0),hu=[],ao(e,to),n=hu.length){for(hu.sort(noe),t=1,i=hu[0],a=[i];t<n;++t)r=hu[t],z4(i,r[0])||z4(i,r[1])?(yr(i[0],r[1])>yr(i[0],i[1])&&(i[1]=r[1]),yr(r[0],i[1])>yr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=yr(i[1],r[0]))>s&&(s=o,Gt=r[0],Qt=i[1])}return hu=_o=null,Gt===1/0||Vi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gt,Vi],[Qt,vr]]}var og,Fv,Ov,Nv,Rv,zv,Bv,Lv,Uw,Iw,jw,oj,uj,Ci,Di,$i,xa={sphere:Qn,point:I$,lineStart:B4,lineEnd:L4,polygonStart:function(){xa.lineStart=soe,xa.lineEnd=ooe},polygonEnd:function(){xa.lineStart=B4,xa.lineEnd=L4}};function I$(e,t){e*=Ve,t*=Ve;var n=Oe(t);Ip(n*Oe(e),n*Te(e),Te(t))}function Ip(e,t,n){++og,Ov+=(e-Ov)/og,Nv+=(t-Nv)/og,Rv+=(n-Rv)/og}function B4(){xa.point=roe}function roe(e,t){e*=Ve,t*=Ve;var n=Oe(t);Ci=n*Oe(e),Di=n*Te(e),$i=Te(t),xa.point=aoe,Ip(Ci,Di,$i)}function aoe(e,t){e*=Ve,t*=Ve;var n=Oe(t),i=n*Oe(e),r=n*Te(e),a=Te(t),s=ea(zi((s=Di*a-$i*r)*s+(s=$i*i-Ci*a)*s+(s=Ci*r-Di*i)*s),Ci*i+Di*r+$i*a);Fv+=s,zv+=s*(Ci+(Ci=i)),Bv+=s*(Di+(Di=r)),Lv+=s*($i+($i=a)),Ip(Ci,Di,$i)}function L4(){xa.point=I$}function soe(){xa.point=uoe}function ooe(){lj(oj,uj),xa.point=I$}function uoe(e,t){oj=e,uj=t,e*=Ve,t*=Ve,xa.point=lj;var n=Oe(t);Ci=n*Oe(e),Di=n*Te(e),$i=Te(t),Ip(Ci,Di,$i)}function lj(e,t){e*=Ve,t*=Ve;var n=Oe(t),i=n*Oe(e),r=n*Te(e),a=Te(t),s=Di*a-$i*r,o=$i*i-Ci*a,l=Ci*r-Di*i,f=Ow(s,o,l),d=tr(f),h=f&&-d/f;Uw.add(h*s),Iw.add(h*o),jw.add(h*l),Fv+=d,zv+=d*(Ci+(Ci=i)),Bv+=d*(Di+(Di=r)),Lv+=d*($i+($i=a)),Ip(Ci,Di,$i)}function loe(e){og=Fv=Ov=Nv=Rv=zv=Bv=Lv=0,Uw=new Fi,Iw=new Fi,jw=new Fi,ao(e,xa);var t=+Uw,n=+Iw,i=+jw,r=Ow(t,n,i);return r<_v&&(t=zv,n=Bv,i=Lv,Fv<Fe&&(t=Ov,n=Nv,i=Rv),r=Ow(t,n,i),r<_v)?[NaN,NaN]:[ea(n,t)*an,tr(i/r)*an]}function Pw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function qw(e,t){return tt(e)>Qe&&(e-=Math.round(e/Ri)*Ri),[e,t]}qw.invert=qw;function cj(e,t,n){return(e%=Ri)?t||n?Pw(I4(e),j4(t,n)):I4(e):t||n?j4(t,n):qw}function U4(e){return function(t,n){return t+=e,tt(t)>Qe&&(t-=Math.round(t/Ri)*Ri),[t,n]}}function I4(e){var t=U4(e);return t.invert=U4(-e),t}function j4(e,t){var n=Oe(e),i=Te(e),r=Oe(t),a=Te(t);function s(o,l){var f=Oe(l),d=Oe(o)*f,h=Te(o)*f,p=Te(l),y=p*n+d*i;return[ea(h*r-y*a,d*n-p*i),tr(y*r+h*a)]}return s.invert=function(o,l){var f=Oe(l),d=Oe(o)*f,h=Te(o)*f,p=Te(l),y=p*r-h*a;return[ea(h*r+p*a,d*n+y*i),tr(y*n-d*i)]},s}function coe(e){e=cj(e[0]*Ve,e[1]*Ve,e.length>2?e[2]*Ve:0);function t(n){return n=e(n[0]*Ve,n[1]*Ve),n[0]*=an,n[1]*=an,n}return t.invert=function(n){return n=e.invert(n[0]*Ve,n[1]*Ve),n[0]*=an,n[1]*=an,n},t}function foe(e,t,n,i,r,a){if(n){var s=Oe(t),o=Te(t),l=i*n;r==null?(r=t+i*Ri,a=t-l/2):(r=P4(s,r),a=P4(s,a),(i>0?r<a:r>a)&&(r+=i*Ri));for(var f,d=r;i>0?d>a:d<a;d-=l)f=Tv([s,-o*Oe(d),-o*Te(d)]),e.point(f[0],f[1])}}function P4(e,t){t=dc(t),t[0]-=e,kv(t);var n=JI(-t[1]);return((-t[2]<0?-n:n)+Ri-Fe)%Ri}function fj(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function My(e,t){return tt(e[0]-t[0])<Fe&&tt(e[1]-t[1])<Fe}function X1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function dj(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,E=v[0],S=v[b],_;if(My(E,S)){if(!E[2]&&!S[2]){for(r.lineStart(),o=0;o<b;++o)r.point((E=v[o])[0],E[1]);r.lineEnd();return}S[0]+=2*Fe}a.push(_=new X1(E,v,null,!0)),s.push(_.o=new X1(E,null,_,!1)),a.push(_=new X1(S,v,null,!1)),s.push(_.o=new X1(S,null,_,!0))}}),!!a.length){for(s.sort(t),q4(a),q4(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function q4(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function RS(e){return tt(e[0])<=Qe?e[0]:Gr(e[0])*((tt(e[0])+Qe)%Ri-Qe)}function doe(e,t){var n=RS(t),i=t[1],r=Te(i),a=[Te(n),-Oe(n),0],s=0,o=0,l=new Fi;r===1?i=Kt+Fe:r===-1&&(i=-Kt-Fe);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=RS(y),b=y[1]/2+wv,E=Te(b),S=Oe(b),_=0;_<p;++_,v=C,E=T,S=D,y=w){var w=h[_],C=RS(w),$=w[1]/2+wv,T=Te($),D=Oe($),F=C-v,O=F>=0?1:-1,U=O*F,z=U>Qe,G=E*T;if(l.add(ea(G*O*Te(U),S*D+G*Oe(U))),s+=z?F+O*Ri:F,z^v>=n^C>=n){var B=Nd(dc(y),dc(w));kv(B);var j=Nd(a,B);kv(j);var I=(z^F>=0?-1:1)*tr(j[2]);(i>I||i===I&&(B[0]||B[1]))&&(o+=z^F>=0?1:-1)}}return(s<-Fe||s<Fe&&l<-_v)^o&1}function hj(e,t,n,i){return function(r){var a=t(r),s=fj(),o=t(s),l=!1,f,d,h,p={point:y,lineStart:b,lineEnd:E,polygonStart:function(){p.point=S,p.lineStart=_,p.lineEnd=w,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=E,d=iz(d);var C=doe(f,i);d.length?(l||(r.polygonStart(),l=!0),dj(d,goe,C,n,r)):C&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(C,$){e(C,$)&&r.point(C,$)}function v(C,$){a.point(C,$)}function b(){p.point=v,a.lineStart()}function E(){p.point=y,a.lineEnd()}function S(C,$){h.push([C,$]),o.point(C,$)}function _(){o.lineStart(),h=[]}function w(){S(h[0][0],h[0][1]),o.lineEnd();var C=o.clean(),$=s.result(),T,D=$.length,F,O,U;if(h.pop(),f.push(h),h=null,!!D){if(C&1){if(O=$[0],(F=O.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),T=0;T<F;++T)r.point((U=O[T])[0],U[1]);r.lineEnd()}return}D>1&&C&2&&$.push($.pop().concat($.shift())),d.push($.filter(hoe))}}return p}}function hoe(e){return e.length>1}function goe(e,t){return((e=e.x)[0]<0?e[1]-Kt-Fe:Kt-e[1])-((t=t.x)[0]<0?t[1]-Kt-Fe:Kt-t[1])}const H4=hj(function(){return!0},poe,yoe,[-Qe,-Kt]);function poe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Qe:-Qe,l=tt(a-t);tt(l-Qe)<Fe?(e.point(t,n=(n+s)/2>0?Kt:-Kt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Qe&&(tt(t-i)<Fe&&(t-=i*Fe),tt(a-o)<Fe&&(a-=o*Fe),n=moe(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function moe(e,t,n,i){var r,a,s=Te(e-n);return tt(s)>Fe?dh((Te(t)*(a=Oe(i))*Te(n)-Te(i)*(r=Oe(t))*Te(e))/(r*a*s)):(t+i)/2}function yoe(e,t,n,i){var r;if(e==null)r=n*Kt,i.point(-Qe,r),i.point(0,r),i.point(Qe,r),i.point(Qe,0),i.point(Qe,-r),i.point(0,-r),i.point(-Qe,-r),i.point(-Qe,0),i.point(-Qe,r);else if(tt(e[0]-t[0])>Fe){var a=e[0]<t[0]?Qe:-Qe;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function voe(e){var t=Oe(e),n=2*Ve,i=t>0,r=tt(t)>Fe;function a(d,h,p,y){foe(y,e,n,p,d,h)}function s(d,h){return Oe(d)*Oe(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(E,S){var _=[E,S],w,C=s(E,S),$=i?C?0:f(E,S):C?f(E+(E<0?Qe:-Qe),S):0;if(!h&&(v=y=C)&&d.lineStart(),C!==y&&(w=l(h,_),(!w||My(h,w)||My(_,w))&&(_[2]=1)),C!==y)b=0,C?(d.lineStart(),w=l(_,h),d.point(w[0],w[1])):(w=l(h,_),d.point(w[0],w[1],2),d.lineEnd()),h=w;else if(r&&h&&i^C){var T;!($&p)&&(T=l(_,h,!0))&&(b=0,i?(d.lineStart(),d.point(T[0][0],T[0][1]),d.point(T[1][0],T[1][1]),d.lineEnd()):(d.point(T[1][0],T[1][1]),d.lineEnd(),d.lineStart(),d.point(T[0][0],T[0][1],3)))}C&&(!h||!My(h,_))&&d.point(_[0],_[1]),h=_,y=C,p=$},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function l(d,h,p){var y=dc(d),v=dc(h),b=[1,0,0],E=Nd(y,v),S=G1(E,E),_=E[0],w=S-_*_;if(!w)return!p&&d;var C=t*S/w,$=-t*_/w,T=Nd(b,E),D=Y1(b,C),F=Y1(E,$);NS(D,F);var O=T,U=G1(D,O),z=G1(O,O),G=U*U-z*(G1(D,D)-1);if(!(G<0)){var B=zi(G),j=Y1(O,(-U-B)/z);if(NS(j,D),j=Tv(j),!p)return j;var I=d[0],N=h[0],q=d[1],Y=h[1],J;N<I&&(J=I,I=N,N=J);var R=N-I,V=tt(R-Qe)<Fe,se=V||R<Fe;if(!V&&Y<q&&(J=q,q=Y,Y=J),se?V?q+Y>0^j[1]<(tt(j[0]-I)<Fe?q:Y):q<=j[1]&&j[1]<=Y:R>Qe^(I<=j[0]&&j[0]<=N)){var oe=Y1(O,(-U+B)/z);return NS(oe,D),[j,Tv(oe)]}}}function f(d,h){var p=i?e:Qe-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return hj(s,o,a,i?[0,-e]:[-Qe,e-Qe])}function boe(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],f=t[1],d=0,h=1,p=l-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var ug=1e9,V1=-ug;function gj(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||l(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return tt(f[0]-e)<Fe?d>0?0:3:tt(f[0]-n)<Fe?d>0?2:1:tt(f[1]-t)<Fe?d>0?1:0:d>0?3:2}function o(f,d){return l(f.x,d.x)}function l(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=fj(),p,y,v,b,E,S,_,w,C,$,T,D={point:F,lineStart:G,lineEnd:B,polygonStart:U,polygonEnd:z};function F(I,N){r(I,N)&&d.point(I,N)}function O(){for(var I=0,N=0,q=y.length;N<q;++N)for(var Y=y[N],J=1,R=Y.length,V=Y[0],se,oe,ge=V[0],Se=V[1];J<R;++J)se=ge,oe=Se,V=Y[J],ge=V[0],Se=V[1],oe<=i?Se>i&&(ge-se)*(i-oe)>(Se-oe)*(e-se)&&++I:Se<=i&&(ge-se)*(i-oe)<(Se-oe)*(e-se)&&--I;return I}function U(){d=h,p=[],y=[],T=!0}function z(){var I=O(),N=T&&I,q=(p=iz(p)).length;(N||q)&&(f.polygonStart(),N&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),q&&dj(p,o,I,a,f),f.polygonEnd()),d=f,p=y=v=null}function G(){D.point=j,y&&y.push(v=[]),$=!0,C=!1,_=w=NaN}function B(){p&&(j(b,E),S&&C&&h.rejoin(),p.push(h.result())),D.point=F,C&&d.lineEnd()}function j(I,N){var q=r(I,N);if(y&&v.push([I,N]),$)b=I,E=N,S=q,$=!1,q&&(d.lineStart(),d.point(I,N));else if(q&&C)d.point(I,N);else{var Y=[_=Math.max(V1,Math.min(ug,_)),w=Math.max(V1,Math.min(ug,w))],J=[I=Math.max(V1,Math.min(ug,I)),N=Math.max(V1,Math.min(ug,N))];boe(Y,J,e,t,n,i)?(C||(d.lineStart(),d.point(Y[0],Y[1])),d.point(J[0],J[1]),q||d.lineEnd(),T=!1):q&&(d.lineStart(),d.point(I,N),T=!1)}_=I,w=N,C=q}return D}}function G4(e,t,n){var i=Er(e,t-Fe,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function Y4(e,t,n){var i=Er(e,t-Fe,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function xoe(){var e,t,n,i,r,a,s,o,l=10,f=l,d=90,h=360,p,y,v,b,E=2.5;function S(){return{type:"MultiLineString",coordinates:_()}}function _(){return Er(H1(i/d)*d,n,d).map(v).concat(Er(H1(o/h)*h,s,h).map(b)).concat(Er(H1(t/l)*l,e,l).filter(function(w){return tt(w%d)>Fe}).map(p)).concat(Er(H1(a/f)*f,r,f).filter(function(w){return tt(w%h)>Fe}).map(y))}return S.lines=function(){return _().map(function(w){return{type:"LineString",coordinates:w}})},S.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},S.extent=function(w){return arguments.length?S.extentMajor(w).extentMinor(w):S.extentMinor()},S.extentMajor=function(w){return arguments.length?(i=+w[0][0],n=+w[1][0],o=+w[0][1],s=+w[1][1],i>n&&(w=i,i=n,n=w),o>s&&(w=o,o=s,s=w),S.precision(E)):[[i,o],[n,s]]},S.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],a=+w[0][1],r=+w[1][1],t>e&&(w=t,t=e,e=w),a>r&&(w=a,a=r,r=w),S.precision(E)):[[t,a],[e,r]]},S.step=function(w){return arguments.length?S.stepMajor(w).stepMinor(w):S.stepMinor()},S.stepMajor=function(w){return arguments.length?(d=+w[0],h=+w[1],S):[d,h]},S.stepMinor=function(w){return arguments.length?(l=+w[0],f=+w[1],S):[l,f]},S.precision=function(w){return arguments.length?(E=+w,p=G4(a,r,90),y=Y4(t,e,E),v=G4(o,s,90),b=Y4(i,n,E),S):E},S.extentMajor([[-180,-90+Fe],[180,90-Fe]]).extentMinor([[-180,-80-Fe],[180,80+Fe]])}const Zg=e=>e;var zS=new Fi,Hw=new Fi,pj,mj,Gw,Yw,so={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){so.lineStart=Eoe,so.lineEnd=Soe},polygonEnd:function(){so.lineStart=so.lineEnd=so.point=Qn,zS.add(tt(Hw)),Hw=new Fi},result:function(){var e=zS/2;return zS=new Fi,e}};function Eoe(){so.point=Aoe}function Aoe(e,t){so.point=yj,pj=Gw=e,mj=Yw=t}function yj(e,t){Hw.add(Yw*e-Gw*t),Gw=e,Yw=t}function Soe(){yj(pj,mj)}var Rd=1/0,Uv=Rd,Kg=-Rd,Iv=Kg,jv={point:_oe,lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var e=[[Rd,Uv],[Kg,Iv]];return Kg=Iv=-(Uv=Rd=1/0),e}};function _oe(e,t){e<Rd&&(Rd=e),e>Kg&&(Kg=e),t<Uv&&(Uv=t),t>Iv&&(Iv=t)}var Xw=0,Vw=0,lg=0,Pv=0,qv=0,ad=0,Ww=0,Qw=0,cg=0,vj,bj,ts,ns,qr={point:hc,lineStart:X4,lineEnd:V4,polygonStart:function(){qr.lineStart=Doe,qr.lineEnd=$oe},polygonEnd:function(){qr.point=hc,qr.lineStart=X4,qr.lineEnd=V4},result:function(){var e=cg?[Ww/cg,Qw/cg]:ad?[Pv/ad,qv/ad]:lg?[Xw/lg,Vw/lg]:[NaN,NaN];return Xw=Vw=lg=Pv=qv=ad=Ww=Qw=cg=0,e}};function hc(e,t){Xw+=e,Vw+=t,++lg}function X4(){qr.point=woe}function woe(e,t){qr.point=Coe,hc(ts=e,ns=t)}function Coe(e,t){var n=e-ts,i=t-ns,r=zi(n*n+i*i);Pv+=r*(ts+e)/2,qv+=r*(ns+t)/2,ad+=r,hc(ts=e,ns=t)}function V4(){qr.point=hc}function Doe(){qr.point=Moe}function $oe(){xj(vj,bj)}function Moe(e,t){qr.point=xj,hc(vj=ts=e,bj=ns=t)}function xj(e,t){var n=e-ts,i=t-ns,r=zi(n*n+i*i);Pv+=r*(ts+e)/2,qv+=r*(ns+t)/2,ad+=r,r=ns*e-ts*t,Ww+=r*(ts+e),Qw+=r*(ns+t),cg+=r*3,hc(ts=e,ns=t)}function Ej(e){this._context=e}Ej.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ri);break}}},result:Qn};var Zw=new Fi,BS,Aj,Sj,fg,dg,Jg={point:Qn,lineStart:function(){Jg.point=Toe},lineEnd:function(){BS&&_j(Aj,Sj),Jg.point=Qn},polygonStart:function(){BS=!0},polygonEnd:function(){BS=null},result:function(){var e=+Zw;return Zw=new Fi,e}};function Toe(e,t){Jg.point=_j,Aj=fg=e,Sj=dg=t}function _j(e,t){fg-=e,dg-=t,Zw.add(zi(fg*fg+dg*dg)),fg=e,dg=t}let W4,Hv,Q4,Z4;class K4{constructor(t){this._append=t==null?wj:koe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Q4||this._append!==Hv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Q4=i,Hv=this._append,Z4=this._,this._=r}this._+=Z4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function wj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function koe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wj;if(t!==W4){const n=10**t;W4=t,Hv=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Hv}function Cj(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),ao(o,r(a))),a.result()}return s.area=function(o){return ao(o,r(so)),so.result()},s.measure=function(o){return ao(o,r(Jg)),Jg.result()},s.bounds=function(o){return ao(o,r(jv)),jv.result()},s.centroid=function(o){return ao(o,r(qr)),qr.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,Zg):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new K4(n)):new Ej(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new K4(n)),s},s.projection(e).digits(n).context(t)}function S2(e){return function(t){var n=new Kw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Kw(){}Kw.prototype={constructor:Kw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function j$(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),ao(n,e.stream(jv)),t(jv.result()),i!=null&&e.clipExtent(i),e}function _2(e,t,n){return j$(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function P$(e,t,n){return _2(e,[[0,0],t],n)}function q$(e,t,n){return j$(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function H$(e,t,n){return j$(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var J4=16,Foe=Oe(30*Ve);function eR(e,t){return+t?Noe(e,t):Ooe(e)}function Ooe(e){return S2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Noe(e,t){function n(i,r,a,s,o,l,f,d,h,p,y,v,b,E){var S=f-i,_=d-r,w=S*S+_*_;if(w>4*t&&b--){var C=s+p,$=o+y,T=l+v,D=zi(C*C+$*$+T*T),F=tr(T/=D),O=tt(tt(T)-1)<Fe||tt(a-h)<Fe?(a+h)/2:ea($,C),U=e(O,F),z=U[0],G=U[1],B=z-i,j=G-r,I=_*B-S*j;(I*I/w>t||tt((S*B+_*j)/w-.5)>.3||s*p+o*y+l*v<Foe)&&(n(i,r,a,s,o,l,z,G,O,C/=D,$/=D,T,b,E),E.point(z,G),n(z,G,O,C,$,T,f,d,h,p,y,v,b,E))}}return function(i){var r,a,s,o,l,f,d,h,p,y,v,b,E={point:S,lineStart:_,lineEnd:C,polygonStart:function(){i.polygonStart(),E.lineStart=$},polygonEnd:function(){i.polygonEnd(),E.lineStart=_}};function S(F,O){F=e(F,O),i.point(F[0],F[1])}function _(){h=NaN,E.point=w,i.lineStart()}function w(F,O){var U=dc([F,O]),z=e(F,O);n(h,p,d,y,v,b,h=z[0],p=z[1],d=F,y=U[0],v=U[1],b=U[2],J4,i),i.point(h,p)}function C(){E.point=S,i.lineEnd()}function $(){_(),E.point=T,E.lineEnd=D}function T(F,O){w(r=F,O),a=h,s=p,o=y,l=v,f=b,E.point=w}function D(){n(h,p,d,y,v,b,a,s,r,o,l,f,J4,i),E.lineEnd=C,C()}return E}}var Roe=S2({point:function(e,t){this.stream.point(e*Ve,t*Ve)}});function zoe(e){return S2({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Boe(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function tR(e,t,n,i,r,a){if(!a)return Boe(e,t,n,i,r);var s=Oe(a),o=Te(a),l=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,E){return b*=i,E*=r,[l*b-f*E+t,n-f*b-l*E]}return v.invert=function(b,E){return[i*(d*b-h*E+p),r*(y-h*b-d*E)]},v}function Ss(e){return Dj(function(){return e})()}function Dj(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,f=0,d,h=0,p=1,y=1,v=null,b=H4,E=null,S,_,w,C=Zg,$=.5,T,D,F,O,U;function z(I){return F(I[0]*Ve,I[1]*Ve)}function G(I){return I=F.invert(I[0],I[1]),I&&[I[0]*an,I[1]*an]}z.stream=function(I){return O&&U===I?O:O=Roe(zoe(d)(b(T(C(U=I)))))},z.preclip=function(I){return arguments.length?(b=I,v=void 0,j()):b},z.postclip=function(I){return arguments.length?(C=I,E=S=_=w=null,j()):C},z.clipAngle=function(I){return arguments.length?(b=+I?voe(v=I*Ve):(v=null,H4),j()):v*an},z.clipExtent=function(I){return arguments.length?(C=I==null?(E=S=_=w=null,Zg):gj(E=+I[0][0],S=+I[0][1],_=+I[1][0],w=+I[1][1]),j()):E==null?null:[[E,S],[_,w]]},z.scale=function(I){return arguments.length?(n=+I,B()):n},z.translate=function(I){return arguments.length?(i=+I[0],r=+I[1],B()):[i,r]},z.center=function(I){return arguments.length?(a=I[0]%360*Ve,s=I[1]%360*Ve,B()):[a*an,s*an]},z.rotate=function(I){return arguments.length?(o=I[0]%360*Ve,l=I[1]%360*Ve,f=I.length>2?I[2]%360*Ve:0,B()):[o*an,l*an,f*an]},z.angle=function(I){return arguments.length?(h=I%360*Ve,B()):h*an},z.reflectX=function(I){return arguments.length?(p=I?-1:1,B()):p<0},z.reflectY=function(I){return arguments.length?(y=I?-1:1,B()):y<0},z.precision=function(I){return arguments.length?(T=eR(D,$=I*I),j()):zi($)},z.fitExtent=function(I,N){return _2(z,I,N)},z.fitSize=function(I,N){return P$(z,I,N)},z.fitWidth=function(I,N){return q$(z,I,N)},z.fitHeight=function(I,N){return H$(z,I,N)};function B(){var I=tR(n,0,0,p,y,h).apply(null,t(a,s)),N=tR(n,i-I[0],r-I[1],p,y,h);return d=cj(o,l,f),D=Pw(t,N),F=Pw(d,D),T=eR(D,$),j()}function j(){return O=U=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&G,B()}}function G$(e){var t=0,n=Qe/3,i=Dj(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ve,n=a[1]*Ve):[t*an,n*an]},r}function Loe(e){var t=Oe(e);function n(i,r){return[i*t,Te(r)/t]}return n.invert=function(i,r){return[i/t,tr(r*t)]},n}function Uoe(e,t){var n=Te(e),i=(n+Te(t))/2;if(tt(i)<Fe)return Loe(e);var r=1+n*(2*i-n),a=zi(r)/i;function s(o,l){var f=zi(r-2*i*Te(l))/i;return[f*Te(o*=i),a-f*Oe(o)]}return s.invert=function(o,l){var f=a-l,d=ea(o,tt(f))*Gr(f);return f*i<0&&(d-=Qe*Gr(o)*Gr(f)),[d/i,tr((r-(o*o+f*f)*i*i)/(2*i))]},s}function Gv(){return G$(Uoe).scale(155.424).center([0,33.6442])}function $j(){return Gv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ioe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function joe(){var e,t,n=$j(),i,r=Gv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Gv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,f={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,E=(p[1]-v[1])/y;return(E>=.12&&E<.234&&b>=-.425&&b<-.214?r:E>=.166&&E<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Ioe([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Fe,b+.12*y+Fe],[v-.214*y-Fe,b+.234*y-Fe]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Fe,b+.166*y+Fe],[v-.115*y-Fe,b+.234*y-Fe]]).stream(f),h()},d.fitExtent=function(p,y){return _2(d,p,y)},d.fitSize=function(p,y){return P$(d,p,y)},d.fitWidth=function(p,y){return q$(d,p,y)},d.fitHeight=function(p,y){return H$(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function Mj(e){return function(t,n){var i=Oe(t),r=Oe(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Te(t),a*Te(n)]}}function jp(e){return function(t,n){var i=zi(t*t+n*n),r=e(i),a=Te(r),s=Oe(r);return[ea(t*a,i*s),tr(i&&n*a/i)]}}var Tj=Mj(function(e){return zi(2/(1+e))});Tj.invert=jp(function(e){return 2*tr(e/2)});function Poe(){return Ss(Tj).scale(124.75).clipAngle(180-.001)}var kj=Mj(function(e){return(e=JI(e))&&e/Te(e)});kj.invert=jp(function(e){return e});function qoe(){return Ss(kj).scale(79.4188).clipAngle(180-.001)}function w2(e,t){return[e,Cv(U$((Kt+t)/2))]}w2.invert=function(e,t){return[e,2*dh(KI(t))-Kt]};function Hoe(){return Fj(w2).scale(961/Ri)}function Fj(e){var t=Ss(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=l=f=null:(s=+h[0][0],o=+h[0][1],l=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[l,f]]};function d(){var h=Qe*i(),p=t(coe(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===w2?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,l),f]]:[[s,Math.max(p[1]-h,o)],[l,Math.min(p[1]+h,f)]])}return d()}function W1(e){return U$((Kt+e)/2)}function Goe(e,t){var n=Oe(e),i=e===t?Te(e):Cv(n/Oe(t))/Cv(W1(t)/W1(e)),r=n*OS(W1(e),i)/i;if(!i)return w2;function a(s,o){r>0?o<-Kt+Fe&&(o=-Kt+Fe):o>Kt-Fe&&(o=Kt-Fe);var l=r/OS(W1(o),i);return[l*Te(i*s),r-l*Oe(i*s)]}return a.invert=function(s,o){var l=r-o,f=Gr(i)*zi(s*s+l*l),d=ea(s,tt(l))*Gr(l);return l*i<0&&(d-=Qe*Gr(s)*Gr(l)),[d/i,2*dh(OS(r/f,1/i))-Kt]},a}function Yoe(){return G$(Goe).scale(109.5).parallels([30,30])}function Yv(e,t){return[e,t]}Yv.invert=Yv;function Xoe(){return Ss(Yv).scale(152.63)}function Voe(e,t){var n=Oe(e),i=e===t?Te(e):(n-Oe(t))/(t-e),r=n/i+e;if(tt(i)<Fe)return Yv;function a(s,o){var l=r-o,f=i*s;return[l*Te(f),r-l*Oe(f)]}return a.invert=function(s,o){var l=r-o,f=ea(s,tt(l))*Gr(l);return l*i<0&&(f-=Qe*Gr(s)*Gr(l)),[f/i,r-Gr(i)*zi(s*s+l*l)]},a}function Woe(){return G$(Voe).scale(131.154).center([0,13.9389])}var Cg=1.340264,Dg=-.081106,$g=893e-6,Mg=.003796,Xv=zi(3)/2,Qoe=12;function Oj(e,t){var n=tr(Xv*Te(t)),i=n*n,r=i*i*i;return[e*Oe(n)/(Xv*(Cg+3*Dg*i+r*(7*$g+9*Mg*i))),n*(Cg+Dg*i+r*($g+Mg*i))]}Oj.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<Qoe&&(o=n*(Cg+Dg*i+r*($g+Mg*i))-t,l=Cg+3*Dg*i+r*(7*$g+9*Mg*i),n-=s=o/l,i=n*n,r=i*i*i,!(tt(s)<_v));++a);return[Xv*e*(Cg+3*Dg*i+r*(7*$g+9*Mg*i))/Oe(n),tr(Te(n)/Xv)]};function Zoe(){return Ss(Oj).scale(177.158)}function Nj(e,t){var n=Oe(t),i=Oe(e)*n;return[n*Te(e)/i,Te(t)/i]}Nj.invert=jp(dh);function Koe(){return Ss(Nj).scale(144.049).clipAngle(60)}function Joe(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,f,d,h,p=1,y=1,v=S2({point:function(C,$){var T=w([C,$]);this.stream.point(T[0],T[1])}}),b=Zg,E,S;function _(){return p=e*i,y=e*r,E=S=null,w}function w(C){var $=C[0]*p,T=C[1]*y;if(a){var D=T*s-$*o;$=$*s+T*o,T=D}return[$+t,T+n]}return w.invert=function(C){var $=C[0]-t,T=C[1]-n;if(a){var D=T*s+$*o;$=$*s-T*o,T=D}return[$/p,T/y]},w.stream=function(C){return E&&S===C?E:E=v(b(S=C))},w.postclip=function(C){return arguments.length?(b=C,l=f=d=h=null,_()):b},w.clipExtent=function(C){return arguments.length?(b=C==null?(l=f=d=h=null,Zg):gj(l=+C[0][0],f=+C[0][1],d=+C[1][0],h=+C[1][1]),_()):l==null?null:[[l,f],[d,h]]},w.scale=function(C){return arguments.length?(e=+C,_()):e},w.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],_()):[t,n]},w.angle=function(C){return arguments.length?(a=C%360*Ve,o=Te(a),s=Oe(a),_()):a*an},w.reflectX=function(C){return arguments.length?(i=C?-1:1,_()):i<0},w.reflectY=function(C){return arguments.length?(r=C?-1:1,_()):r<0},w.fitExtent=function(C,$){return _2(w,C,$)},w.fitSize=function(C,$){return P$(w,C,$)},w.fitWidth=function(C,$){return q$(w,C,$)},w.fitHeight=function(C,$){return H$(w,C,$)},w}function Rj(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Rj.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(tt(r)>Fe&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function eue(){return Ss(Rj).scale(175.295)}function zj(e,t){return[Oe(t)*Te(e),Te(t)]}zj.invert=jp(tr);function tue(){return Ss(zj).scale(249.5).clipAngle(90+Fe)}function Bj(e,t){var n=Oe(t),i=1+Oe(e)*n;return[n*Te(e)/i,Te(t)/i]}Bj.invert=jp(function(e){return 2*dh(e)});function nue(){return Ss(Bj).scale(250).clipAngle(142)}function Lj(e,t){return[Cv(U$((Kt+t)/2)),-e]}Lj.invert=function(e,t){return[-t,2*dh(KI(e))-Kt]};function iue(){var e=Fj(Lj),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var rue=Math.abs,Jw=Math.cos,Vv=Math.sin,aue=1e-6,Uj=Math.PI,eC=Uj/2,nR=sue(2);function iR(e){return e>1?eC:e<-1?-eC:Math.asin(e)}function sue(e){return e>0?Math.sqrt(e):0}function oue(e,t){var n=e*Vv(t),i=30,r;do t-=r=(t+Vv(t)-n)/(1+Jw(t));while(rue(r)>aue&&--i>0);return t/2}function uue(e,t,n){function i(r,a){return[e*r*Jw(a=oue(n,a)),t*Vv(a)]}return i.invert=function(r,a){return a=iR(a/t),[r/(e*Jw(a)),iR((2*a+Vv(2*a))/n)]},i}var lue=uue(nR/eC,nR,Uj);function cue(){return Ss(lue).scale(169.529)}const fue=Cj(),tC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function due(e,t){return function n(){const i=t();return i.type=e,i.path=Cj().projection(i),i.copy=i.copy||function(){const r=n();return tC.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},eU(i)}}function Y$(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Wv[e]=due(e,t),this):Wv[e]||null}function Ij(e){return e&&e.path||fue}const Wv={albers:$j,albersusa:joe,azimuthalequalarea:Poe,azimuthalequidistant:qoe,conicconformal:Yoe,conicequalarea:Gv,conicequidistant:Woe,equalEarth:Zoe,equirectangular:Xoe,gnomonic:Koe,identity:Joe,mercator:Hoe,mollweide:cue,naturalEarth1:eue,orthographic:tue,stereographic:nue,transversemercator:iue};for(const e in Wv)Y$(e,Wv[e]);function hue(){}const Qs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function jj(){var e=1,t=1,n=o;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],h=[];return a(l,f,p=>{n(p,l,f),gue(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(pue((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var h=[],p=[],y,v,b,E,S,_;for(y=v=-1,E=l[0]>=f,Qs[E<<1].forEach(w);++y<e-1;)b=E,E=l[y+1]>=f,Qs[b|E<<1].forEach(w);for(Qs[E<<0].forEach(w);++v<t-1;){for(y=-1,E=l[v*e+e]>=f,S=l[v*e]>=f,Qs[E<<1|S<<2].forEach(w);++y<e-1;)b=E,E=l[v*e+e+y+1]>=f,_=S,S=l[v*e+y+1]>=f,Qs[b|E<<1|S<<2|_<<3].forEach(w);Qs[E|S<<3].forEach(w)}for(y=-1,S=l[v*e]>=f,Qs[S<<2].forEach(w);++y<e-1;)_=S,S=l[v*e+y+1]>=f,Qs[S<<2|_<<3].forEach(w);Qs[S<<3].forEach(w);function w(C){var $=[C[0][0]+y,C[0][1]+v],T=[C[1][0]+y,C[1][1]+v],D=s($),F=s(T),O,U;(O=p[D])?(U=h[F])?(delete p[O.end],delete h[U.start],O===U?(O.ring.push(T),d(O.ring)):h[O.start]=p[U.end]={start:O.start,end:U.end,ring:O.ring.concat(U.ring)}):(delete p[O.end],O.ring.push(T),p[O.end=F]=O):(O=h[F])?(U=p[D])?(delete h[O.start],delete p[U.end],O===U?(O.ring.push(T),d(O.ring)):h[U.start]=p[O.end]={start:U.start,end:O.end,ring:U.ring.concat(O.ring)}):(delete h[O.start],O.ring.unshift($),h[O.start=D]=O):h[D]=p[F]={start:D,end:F,ring:[$,T]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,f,d){l.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,E,S=f[b*e+v];p>0&&p<e&&v===p&&(E=f[b*e+v-1],h[0]=p+(d-E)/(S-E)-.5),y>0&&y<t&&b===y&&(E=f[(b-1)*e+v],h[1]=y+(d-E)/(S-E)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||ne("invalid size"),e=f,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:hue,i):n===o},i}function gue(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function pue(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=mue(e,t[n]))return r;return 0}function mue(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],f=l[0],d=l[1],h=e[o],p=h[0],y=h[1];if(yue(l,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function yue(e,t,n){var i;return vue(e,t,n)&&bue(e[i=+(e[0]===t[0])],n[i],t[i])}function vue(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function bue(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Pj(e,t,n){return function(i){var r=fs(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?Nu(a,s,e):o/(e+1);return Er(a+l,s,l)}}function X$(e){K.call(this,null,e)}X$.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};pe(X$,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Ni,a=jj().smooth(e.smooth!==!1),s=e.thresholds||xue(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,we(s)?s:s(d.values));Eue(h,d,f,e),h.forEach(p=>{l.push(Pb(f,yt(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function xue(e,t,n){const i=Pj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Kl(t(r).values)))}function Eue(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Ye(r)&&(r=r(n,i)),Ye(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(Fu(r)?r:r[0])||1,o=(Fu(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;e.forEach(qj(t,s,o,l,f))}function qj(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(l),h}}function rR(e,t,n){const i=e>=0?e:U3(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function LS(e){return Ye(e)?e:bi(+e)}function Hj(){var e=l=>l[0],t=l=>l[1],n=th,i=[-1,-1],r=960,a=500,s=2;function o(l,f){const d=rR(i[0],l,e)>>s,h=rR(i[1],l,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),E=new Float32Array(v*b),S=new Float32Array(v*b);let _=E;l.forEach(C=>{const $=p+(+e(C)>>s),T=y+(+t(C)>>s);$>=0&&$<v&&T>=0&&T<b&&(E[$+T*v]+=+n(C))}),d>0&&h>0?(jf(v,b,E,S,d),Pf(v,b,S,E,h),jf(v,b,E,S,d),Pf(v,b,S,E,h),jf(v,b,E,S,d),Pf(v,b,S,E,h)):d>0?(jf(v,b,E,S,d),jf(v,b,S,E,d),jf(v,b,E,S,d),_=S):h>0&&(Pf(v,b,E,S,h),Pf(v,b,S,E,h),Pf(v,b,E,S,h),_=S);const w=f?Math.pow(2,-2*s):1/rz(_);for(let C=0,$=v*b;C<$;++C)_[C]*=w;return{values:_,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=LS(l),o):e},o.y=function(l){return arguments.length?(t=LS(l),o):t},o.weight=function(l){return arguments.length?(n=LS(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||ne("invalid size"),r=f,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||ne("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=ke(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ne("invalid bandwidth"),i=l,o):i},o}function jf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function Pf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function V$(e){K.call(this,null,e)}V$.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Aue=["x","y","weight","size","cellSize","bandwidth"];function Gj(e,t){return Aue.forEach(n=>t[n]!=null?e[n](t[n]):0),e}pe(V$,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Sue(i,e.groupby),a=(e.groupby||[]).map(Jt),s=Gj(Hj(),e),o=e.as||"grid",l=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return l=r.map(d=>yt(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Sue(e,t){var n=[],i=d=>d(o),r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function W$(e){K.call(this,null,e)}W$.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};pe(W$,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=jj().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Pj(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=Gj(Hj(),e)(r,!0),l=qj(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=we(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(yt),n}});const nC="Feature",Q$="FeatureCollection",_ue="MultiPoint";function Z$(e){K.call(this,null,e)}Z$.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};pe(Z$,K,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&Ni,l=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(hi(o))||a&&t.modified(hi(a))||s&&t.modified(hi(s)),(!this.value||f)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:nC,geometry:{type:_ue,coordinates:i}})),this.value={type:Q$,features:n}}});function K$(e){K.call(this,null,e)}K$.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};pe(K$,K,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Ni,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Ij(e.projection),n.materialize().reflow()):s=r===Ni||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=wue(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function wue(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function J$(e){K.call(this,null,e)}J$.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};pe(J$,K,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function eM(e){K.call(this,null,e)}eM.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};pe(eM,K,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Cue(Ij(e.projection),e.field||Qr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function Cue(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function tM(e){K.call(this,[],e),this.generator=xoe()}tM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};pe(tM,K,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Ye(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(Jz(n[0],r)):t.add.push(yt(r)),n[0]=r,t}});function nM(e){K.call(this,null,e)}nM.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};pe(nM,K,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Ni,a=$ue(e.opacity,e),s=Due(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Kl(n.map(f=>Kl(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=He({},f,l);i||(h.$max=Kl(d.values||[])),f[o]=Mue(d,h,s.dep?s:bi(s(h)),a.dep?a:bi(a(h)))}),t.reflow(!0).modifies(o)}});function Due(e,t){let n;return Ye(e)?(n=i=>Bu(e(i,t)),n.dep=Yj(e)):n=bi(Bu(e||"#888")),n}function $ue(e,t){let n;return Ye(e)?(n=i=>e(i,t),n.dep=Yj(e)):e?n=bi(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Yj(e){if(!Ye(e))return!1;const t=wa(hi(e));return t.$x||t.$y||t.$value||t.$max}function Mue(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,f=e.y2||a,d=e.values,h=d?E=>d[E]:mu,p=Mu(l-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,f-o),b=v.data;for(let E=o,S=0;E<f;++E){t.$y=E-o;for(let _=s,w=E*r;_<l;++_,S+=4){t.$x=_-s,t.$value=h(_+w);const C=n(t);b[S+0]=C.r,b[S+1]=C.g,b[S+2]=C.b,b[S+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function Xj(e){K.call(this,null,e),this.modified(!0)}pe(Xj,K,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=kue(e.type),tC.forEach(i=>{e[i]!=null&&aR(n,i,e[i])})):tC.forEach(i=>{e.modified(i)&&aR(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Tue(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Tue(e,t){const n=Fue(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function kue(e){const t=Y$((e||"mercator").toLowerCase());return t||ne("Unrecognized projection type: "+e),t()}function aR(e,t,n){Ye(e[t])&&e[t](n)}function Fue(e){return e=ke(e),e.length===1?e[0]:{type:Q$,features:e.reduce((t,n)=>t.concat(Oue(n)),[])}}function Oue(e){return e.type===Q$?e.features:ke(e).filter(t=>t!=null).map(t=>t.type===nC?t:{type:nC,geometry:t})}const Nue=Object.freeze(Object.defineProperty({__proto__:null,contour:W$,geojson:Z$,geopath:K$,geopoint:J$,geoshape:eM,graticule:tM,heatmap:nM,isocontour:X$,kde2d:V$,projection:Xj},Symbol.toStringTag,{value:"Module"}));function Rue(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,f=0;for(a=0;a<s;++a)o=n[a],l+=o.x,f+=o.y;for(l=(l/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function zue(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Vj(this.cover(t,n),t,n,e)}function Vj(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,E,S,_;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(E=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[S=E<<1|b]))return r[S]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[S]=s:e._root=s,e;do r=r?r[S]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(E=n>=(p=(l+d)/2))?l=p:d=p;while((S=E<<1|b)===(_=(v>=p)<<1|y>=h));return r[_]=a,r[S]=s,e}function Bue(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(l>d||f>h)return this;for(this.cover(l,f).cover(d,h),n=0;n<i;++n)Vj(this,s[n],o[n],e[n]);return this}function Lue(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,l=new Array(4),l[f]=o,o=l,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Uue(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Iue(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Mi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function jue(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new Mi(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(l=v.x1)<r||(f=v.y1)<a))if(y.length){var E=(s+l)/2,S=(o+f)/2;p.push(new Mi(y[3],E,S,l,f),new Mi(y[2],s,S,E,f),new Mi(y[1],E,o,l,S),new Mi(y[0],s,o,E,S)),(b=(t>=S)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var _=e-+this._x.call(null,y.data),w=t-+this._y.call(null,y.data),C=_*_+w*w;if(C<n){var $=Math.sqrt(n=C);r=e-$,a=t-$,d=e+$,h=t+$,i=y.data}}return i}function Pue(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,f=this._y1,d,h,p,y,v,b,E,S;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[E=b<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(i=t,S=E)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[E]=a:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[S]=n:this._root=n),this):(this._root=a,this)}function que(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Hue(){return this._root}function Gue(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Yue(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new Mi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var f=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new Mi(r,f,d,o,l)),(r=i[2])&&t.push(new Mi(r,a,d,f,l)),(r=i[1])&&t.push(new Mi(r,f,s,o,d)),(r=i[0])&&t.push(new Mi(r,a,s,f,d))}return this}function Xue(e){var t=[],n=[],i;for(this._root&&t.push(new Mi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,f=i.y1,d=(s+l)/2,h=(o+f)/2;(a=r[0])&&t.push(new Mi(a,s,o,d,h)),(a=r[1])&&t.push(new Mi(a,d,o,l,h)),(a=r[2])&&t.push(new Mi(a,s,h,d,f)),(a=r[3])&&t.push(new Mi(a,d,h,l,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Vue(e){return e[0]}function Wue(e){return arguments.length?(this._x=e,this):this._x}function Que(e){return e[1]}function Zue(e){return arguments.length?(this._y=e,this):this._y}function iM(e,t,n){var i=new rM(t??Vue,n??Que,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function rM(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function sR(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Li=iM.prototype=rM.prototype;Li.copy=function(){var e=new rM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=sR(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=sR(i));return e};Li.add=zue;Li.addAll=Bue;Li.cover=Lue;Li.data=Uue;Li.extent=Iue;Li.find=jue;Li.remove=Pue;Li.removeAll=que;Li.root=Hue;Li.size=Gue;Li.visit=Yue;Li.visitAfter=Xue;Li.x=Wue;Li.y=Zue;function Ti(e){return function(){return e}}function Su(e){return(e()-.5)*1e-6}function Kue(e){return e.x+e.vx}function Jue(e){return e.y+e.vy}function ele(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=Ti(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,E,S=0;S<a;++S)for(h=iM(t,Kue,Jue).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],E=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(_);function _(w,C,$,T,D){var F=w.data,O=w.r,U=b+O;if(F){if(F.index>p.index){var z=y-F.x-F.vx,G=v-F.y-F.vy,B=z*z+G*G;B<U*U&&(z===0&&(z=Su(i),B+=z*z),G===0&&(G=Su(i),B+=G*G),B=(U-(B=Math.sqrt(B)))/B*r,p.vx+=(z*=B)*(U=(O*=O)/(E+O)),p.vy+=(G*=B)*U,F.vx-=z*(U=1-U),F.vy-=G*U)}return}return C>y+U||T<y-U||$>v+U||D<v-U}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,l()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:Ti(+f),l(),s):e},s}function tle(e){return e.index}function oR(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function nle(e){var t=tle,n=h,i,r=Ti(30),a,s,o,l,f,d=1;e==null&&(e=[]);function h(E){return 1/Math.min(o[E.source.index],o[E.target.index])}function p(E){for(var S=0,_=e.length;S<d;++S)for(var w=0,C,$,T,D,F,O,U;w<_;++w)C=e[w],$=C.source,T=C.target,D=T.x+T.vx-$.x-$.vx||Su(f),F=T.y+T.vy-$.y-$.vy||Su(f),O=Math.sqrt(D*D+F*F),O=(O-a[w])/O*E*i[w],D*=O,F*=O,T.vx-=D*(U=l[w]),T.vy-=F*U,$.vx+=D*(U=1-U),$.vy+=F*U}function y(){if(s){var E,S=s.length,_=e.length,w=new Map(s.map(($,T)=>[t($,T,s),$])),C;for(E=0,o=new Array(S);E<_;++E)C=e[E],C.index=E,typeof C.source!="object"&&(C.source=oR(w,C.source)),typeof C.target!="object"&&(C.target=oR(w,C.target)),o[C.source.index]=(o[C.source.index]||0)+1,o[C.target.index]=(o[C.target.index]||0)+1;for(E=0,l=new Array(_);E<_;++E)C=e[E],l[E]=o[C.source.index]/(o[C.source.index]+o[C.target.index]);i=new Array(_),v(),a=new Array(_),b()}}function v(){if(s)for(var E=0,S=e.length;E<S;++E)i[E]=+n(e[E],E,e)}function b(){if(s)for(var E=0,S=e.length;E<S;++E)a[E]=+r(e[E],E,e)}return p.initialize=function(E,S){s=E,f=S,y()},p.links=function(E){return arguments.length?(e=E,y(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:Ti(+E),v(),p):n},p.distance=function(E){return arguments.length?(r=typeof E=="function"?E:Ti(+E),b(),p):r},p}var ile={value:()=>{}};function Wj(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ty(n)}function Ty(e){this._=e}function rle(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ty.prototype=Wj.prototype={constructor:Ty,on:function(e,t){var n=this._,i=rle(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=ale(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=uR(n[r],e.name,t);else if(t==null)for(r in n)n[r]=uR(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ty(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function ale(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function uR(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=ile,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var zd=0,hg=0,L0=0,Qj=1e3,Qv,gg,Zv=0,gc=0,C2=0,ep=typeof performance=="object"&&performance.now?performance:Date,Zj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function aM(){return gc||(Zj(sle),gc=ep.now()+C2)}function sle(){gc=0}function Kv(){this._call=this._time=this._next=null}Kv.prototype=Kj.prototype={constructor:Kv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?aM():+n)+(t==null?0:+t),!this._next&&gg!==this&&(gg?gg._next=this:Qv=this,gg=this),this._call=e,this._time=n,iC()},stop:function(){this._call&&(this._call=null,this._time=1/0,iC())}};function Kj(e,t,n){var i=new Kv;return i.restart(e,t,n),i}function ole(){aM(),++zd;for(var e=Qv,t;e;)(t=gc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zd}function lR(){gc=(Zv=ep.now())+C2,zd=hg=0;try{ole()}finally{zd=0,lle(),gc=0}}function ule(){var e=ep.now(),t=e-Zv;t>Qj&&(C2-=t,Zv=e)}function lle(){for(var e,t=Qv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qv=n);gg=e,iC(i)}function iC(e){if(!zd){hg&&(hg=clearTimeout(hg));var t=e-gc;t>24?(e<1/0&&(hg=setTimeout(lR,e-ep.now()-C2)),L0&&(L0=clearInterval(L0))):(L0||(Zv=ep.now(),L0=setInterval(ule,Qj)),zd=1,Zj(lR))}}function cle(e,t,n){var i=new Kv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?aM():+o,i._restart(function l(f){f+=r,i._restart(l,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const fle=1664525,dle=1013904223,cR=4294967296;function hle(){let e=1;return()=>(e=(fle*e+dle)%cR)/cR}function gle(e){return e.x}function ple(e){return e.y}var mle=10,yle=Math.PI*(3-Math.sqrt(5));function vle(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=Kj(h),f=Wj("tick","end"),d=hle();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(l.stop(),f.call("end",t))}function p(b){var E,S=e.length,_;b===void 0&&(b=1);for(var w=0;w<b;++w)for(n+=(a-n)*r,o.forEach(function(C){C(n)}),E=0;E<S;++E)_=e[E],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return t}function y(){for(var b=0,E=e.length,S;b<E;++b){if(S=e[b],S.index=b,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var _=mle*Math.sqrt(.5+b),w=b*yle;S.x=_*Math.cos(w),S.y=_*Math.sin(w)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,E){return arguments.length>1?(E==null?o.delete(b):o.set(b,v(E)),t):o.get(b)},find:function(b,E,S){var _=0,w=e.length,C,$,T,D,F;for(S==null?S=1/0:S*=S,_=0;_<w;++_)D=e[_],C=b-D.x,$=E-D.y,T=C*C+$*$,T<S&&(F=D,S=T);return F},on:function(b,E){return arguments.length>1?(f.on(b,E),t):f.on(b)}}}function ble(){var e,t,n,i,r=Ti(-30),a,s=1,o=1/0,l=.81;function f(y){var v,b=e.length,E=iM(e,gle,ple).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],E.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,E,S=0,_,w,C;if(y.length){for(_=w=C=0;C<4;++C)(b=y[C])&&(E=Math.abs(b.value))&&(v+=b.value,S+=E,_+=E*b.x,w+=E*b.y);y.x=_/S,y.y=w/S}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,E){if(!y.value)return!0;var S=y.x-t.x,_=y.y-t.y,w=E-v,C=S*S+_*_;if(w*w/l<C)return C<o&&(S===0&&(S=Su(n),C+=S*S),_===0&&(_=Su(n),C+=_*_),C<s&&(C=Math.sqrt(s*C)),t.vx+=S*y.value*i/C,t.vy+=_*y.value*i/C),!0;if(y.length||C>=o)return;(y.data!==t||y.next)&&(S===0&&(S=Su(n),C+=S*S),_===0&&(_=Su(n),C+=_*_),C<s&&(C=Math.sqrt(s*C)));do y.data!==t&&(w=a[y.data.index]*i/C,t.vx+=S*w,t.vy+=_*w);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:Ti(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f}function xle(e){var t=Ti(.1),n,i,r;typeof e!="function"&&(e=Ti(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Ti(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:Ti(+o),s(),a):e},a}function Ele(e){var t=Ti(.1),n,i,r;typeof e!="function"&&(e=Ti(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Ti(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:Ti(+o),s(),a):e},a}const fR={center:Rue,collide:ele,nbody:ble,link:nle,x:xle,y:Ele},pg="forces",rC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ale=["static","iterations"],Jj=["x","y","vx","vy"];function sM(e){K.call(this,null,e)}sM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Jj}]};pe(sM,K,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(rC),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&eP(n,e,0,t)):(this.value=n=_le(t.source,e),n.on("tick",Sle(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Ale)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,f=o.length,d;l<f;++l)if(d=o[l],!(d.name!==pg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Jj)}});function Sle(e,t){return()=>e.touch(t).run()}function _le(e,t){const n=vle(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),eP(n,t,!0).on("end",()=>a=!0)}function eP(e,t,n,i){var r=ke(t.forces),a,s,o,l;for(a=0,s=rC.length;a<s;++a)o=rC[a],o!==pg&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=pg+a,o=n||t.modified(pg,a)?Cle(r[a]):i&&wle(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(pg+a,null);return e.numForces=r.length,e}function wle(e,t){var n,i;for(n in e)if(Ye(i=e[n])&&t.modified(hi(i)))return 1;return 0}function Cle(e){var t,n;Ne(fR,e.force)||ne("Unrecognized force: "+e.force),t=fR[e.force]();for(n in e)Ye(t[n])&&Dle(t[n],e[n],e);return t}function Dle(e,t,n){e(Ye(t)?i=>t(i,n):t)}const $le=Object.freeze(Object.defineProperty({__proto__:null,force:sM},Symbol.toStringTag,{value:"Module"}));function Mle(e,t){return e.parent===t.parent?1:2}function Tle(e){return e.reduce(kle,0)/e.length}function kle(e,t){return e+t.x}function Fle(e){return 1+e.reduce(Ole,0)}function Ole(e,t){return Math.max(e,t.y)}function Nle(e){for(var t;t=e.children;)e=t[0];return e}function Rle(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zle(){var e=Mle,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Tle(y),p.y=Fle(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=Nle(a),f=Rle(a),d=l.x-e(l,f)/2,h=f.x+e(f,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Ble(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Lle(){return this.eachAfter(Ble)}function Ule(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Ile(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function jle(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Ple(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function qle(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Hle(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Gle(e){for(var t=this,n=Yle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Yle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Xle(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Vle(){return Array.from(this)}function Wle(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Qle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function oM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=ece)):t===void 0&&(t=Jle);for(var n=new Bd(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new Bd(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(tP)}function Kle(){return oM(this).eachBefore(tce)}function Jle(e){return e.children}function ece(e){return Array.isArray(e)?e[1]:null}function tce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function tP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Bd(e){this.data=e,this.depth=this.height=0,this.parent=null}Bd.prototype=oM.prototype={constructor:Bd,count:Lle,each:Ule,eachAfter:jle,eachBefore:Ile,find:Ple,sum:qle,sort:Hle,path:Gle,ancestors:Xle,descendants:Vle,leaves:Wle,links:Qle,copy:Kle,[Symbol.iterator]:Zle};function ky(e){return e==null?null:nP(e)}function nP(e){if(typeof e!="function")throw new Error;return e}function Hl(){return 0}function Kf(e){return function(){return e}}const nce=1664525,ice=1013904223,dR=4294967296;function rce(){let e=1;return()=>(e=(nce*e+ice)%dR)/dR}function ace(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sce(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function oce(e,t){for(var n=0,i=(e=sce(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&iP(s,a)?++n:(s=lce(r=uce(r,a)),n=0);return s}function uce(e,t){var n,i;if(US(t,e))return[t];for(n=0;n<e.length;++n)if(Q1(t,e[n])&&US(mg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Q1(mg(e[n],e[i]),t)&&Q1(mg(e[n],t),e[i])&&Q1(mg(e[i],t),e[n])&&US(rP(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Q1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function iP(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function US(e,t){for(var n=0;n<t.length;++n)if(!iP(e,t[n]))return!1;return!0}function lce(e){switch(e.length){case 1:return cce(e[0]);case 2:return mg(e[0],e[1]);case 3:return rP(e[0],e[1],e[2])}}function cce(e){return{x:e.x,y:e.y,r:e.r}}function mg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,f=s-i,d=o-r,h=Math.sqrt(l*l+f*f);return{x:(n+a+l/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function rP(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,E=l-a,S=h-a,_=i*i+r*r-a*a,w=_-s*s-o*o+l*l,C=_-f*f-d*d+h*h,$=y*v-p*b,T=(v*C-b*w)/($*2)-i,D=(b*E-v*S)/$,F=(y*w-p*C)/($*2)-r,O=(p*S-y*E)/$,U=D*D+O*O-1,z=2*(a+T*D+F*O),G=T*T+F*F-a*a,B=-(Math.abs(U)>1e-6?(z+Math.sqrt(z*z-4*U*G))/(2*U):G/z);return{x:i+T+D*B,y:r+F+O*B,r:B}}function hR(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,f=i*i+s*s;f?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),o=Math.sqrt(Math.max(0,l/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-l)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function gR(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function pR(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function Z1(e){this._=e,this.next=null,this.previous=null}function fce(e,t){if(!(a=(e=ace(e)).length))return 0;var n,i,r,a,s,o,l,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;hR(i,n,r=e[2]),n=new Z1(n),i=new Z1(i),r=new Z1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){hR(n._,i._,r=e[l]),r=new Z1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(gR(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue e}h+=f._.r,f=f.next}else{if(gR(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=pR(n);(r=r.next)!==i;)(o=pR(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=oce(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function dce(e){return Math.sqrt(e.value)}function hce(){var e=null,t=1,n=1,i=Hl;function r(a){const s=rce();return a.x=t/2,a.y=n/2,e?a.eachBefore(mR(e)).eachAfter(IS(i,.5,s)).eachBefore(yR(1)):a.eachBefore(mR(dce)).eachAfter(IS(Hl,1,s)).eachAfter(IS(i,a.r/Math.min(t,n),s)).eachBefore(yR(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=ky(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Kf(+a),r):i},r}function mR(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function IS(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=fce(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function yR(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function aP(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Pp(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function gce(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(aP),s}function a(s,o){return function(l){l.children&&Pp(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var f=l.x0,d=l.y0,h=l.x1-n,p=l.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),l.x0=f,l.y0=d,l.x1=h,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var pce={depth:-1},vR={},jS={};function mce(e){return e.id}function yce(e){return e.parentId}function bR(){var e=mce,t=yce,n;function i(r){var a=Array.from(r),s=e,o=t,l,f,d,h,p,y,v,b,E=new Map;if(n!=null){const S=a.map((C,$)=>vce(n(C,$,r))),_=S.map(xR),w=new Set(S).add("");for(const C of _)w.has(C)||(w.add(C),S.push(C),_.push(xR(C)),a.push(jS));s=(C,$)=>S[$],o=(C,$)=>_[$]}for(d=0,l=a.length;d<l;++d)f=a[d],y=a[d]=new Bd(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,E.set(b,E.has(b)?vR:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=E.get(v),!p)throw new Error("missing: "+v);if(p===vR)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===jS&&h.children.length===1;)h=h.children[0],--l;for(let S=a.length-1;S>=0&&(y=a[S],y.data===jS);--S)y.data=null}if(h.parent=pce,h.eachBefore(function(S){S.depth=S.parent.depth+1,--l}).eachBefore(tP),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=ky(r),i):e},i.parentId=function(r){return arguments.length?(t=ky(r),i):t},i.path=function(r){return arguments.length?(n=ky(r),i):n},i}function vce(e){e=`${e}`;let t=e.length;return aC(e,t-1)&&!aC(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function xR(e){let t=e.length;if(t<2)return"";for(;--t>1&&!aC(e,t););return e.slice(0,t)}function aC(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function bce(e,t){return e.parent===t.parent?1:2}function PS(e){var t=e.children;return t?t[0]:e.t}function qS(e){var t=e.children;return t?t[t.length-1]:e.t}function xce(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Ece(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Ace(e,t,n){return e.a.parent===t.parent?e.a:n}function Fy(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Fy.prototype=Object.create(Bd.prototype);function Sce(e){for(var t=new Fy(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new Fy(a[s],s)),r.parent=n;return(t.parent=new Fy(null,0)).children=[t],t}function _ce(){var e=bce,t=1,n=1,i=null;function r(f){var d=Sce(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(l);else{var h=f,p=f,y=f;f.eachBefore(function(_){_.x<h.x&&(h=_),_.x>p.x&&(p=_),_.depth>y.depth&&(y=_)});var v=h===p?1:e(h,p)/2,b=v-h.x,E=t/(p.x+v+b),S=n/(y.depth||1);f.eachBefore(function(_){_.x=(_.x+b)*E,_.y=_.depth*S})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){Ece(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],E=p.m,S=y.m,_=v.m,w=b.m,C;v=qS(v),p=PS(p),v&&p;)b=PS(b),y=qS(y),y.a=f,C=v.z+_-p.z-E+e(v._,p._),C>0&&(xce(Ace(v,f,h),f,C),E+=C,S+=C),_+=v.m,E+=p.m,w+=b.m,S+=y.m;v&&!qS(y)&&(y.t=v,y.m+=_-S),p&&!PS(b)&&(b.t=p,b.m+=E-w,h=f)}return h}function l(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function D2(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var sP=(1+Math.sqrt(5))/2;function oP(e,t,n,i,r,a){for(var s=[],o=t.children,l,f,d=0,h=0,p=o.length,y,v,b=t.value,E,S,_,w,C,$,T;d<p;){y=r-n,v=a-i;do E=o[h++].value;while(!E&&h<p);for(S=_=E,$=Math.max(v/y,y/v)/(b*e),T=E*E*$,C=Math.max(_/T,T/S);h<p;++h){if(E+=f=o[h].value,f<S&&(S=f),f>_&&(_=f),T=E*E*$,w=Math.max(_/T,T/S),w>C){E-=f;break}C=w}s.push(l={value:E,dice:y<v,children:o.slice(d,h)}),l.dice?Pp(l,n,i,r,b?i+=v*E/b:a):D2(l,n,i,b?n+=y*E/b:r,a),b-=E,d=h}return s}const uP=function e(t){function n(i,r,a,s,o){oP(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(sP);function wce(){var e=uP,t=!1,n=1,i=1,r=[0],a=Hl,s=Hl,o=Hl,l=Hl,f=Hl;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(aP),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,E=p.x1-y,S=p.y1-y;E<v&&(v=E=(v+E)/2),S<b&&(b=S=(b+S)/2),p.x0=v,p.y0=b,p.x1=E,p.y1=S,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,E-=o(p)-y,S-=l(p)-y,E<v&&(v=E=(v+E)/2),S<b&&(b=S=(b+S)/2),e(p,v,b,E,S))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=nP(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Kf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Kf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Kf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Kf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Kf(+p),d):f},d}function Cce(e,t,n,i,r){var a=e.children,s,o=a.length,l,f=new Array(o+1);for(f[0]=l=s=0;s<o;++s)f[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,E,S){if(h>=p-1){var _=a[h];_.x0=v,_.y0=b,_.x1=E,_.y1=S;return}for(var w=f[h],C=y/2+w,$=h+1,T=p-1;$<T;){var D=$+T>>>1;f[D]<C?$=D+1:T=D}C-f[$-1]<f[$]-C&&h+1<$&&--$;var F=f[$]-w,O=y-F;if(E-v>S-b){var U=y?(v*O+E*F)/y:E;d(h,$,F,v,b,U,S),d($,p,O,U,b,E,S)}else{var z=y?(b*O+S*F)/y:S;d(h,$,F,v,b,E,z),d($,p,O,v,z,E,S)}}}function Dce(e,t,n,i,r){(e.depth&1?D2:Pp)(e,t,n,i,r)}const $ce=function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,f,d,h,p=-1,y,v=l.length,b=i.value;++p<v;){for(f=l[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?Pp(f,r,a,s,b?a+=(o-a)*f.value/b:o):D2(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=l=oP(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(sP);function sC(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function uM(e){K.call(this,null,e)}uM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Mce=e=>e.values;pe(uM,K,{transform(e,t){t.source||ne("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&jb(s.data)&&r.rem.push(s.data)}),this.value=a=oM({values:ke(e.keys).reduce((s,o)=>(s.key(o),s),Tce()).entries(r.source)},Mce),n&&a.each(s=>{s.children&&(s=yt(s.data),r.add.push(s),r.source.push(s))}),sC(a,Me,Me)),r.source.root=a,r}});function Tce(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=l[h])?y.push(p):l[h]=[p];for(h in l)f[h]=n(l[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function Mo(e){K.call(this,null,e)}const kce=(e,t)=>e.parent===t.parent?1:2;pe(Mo,K,{transform(e,t){(!t.source||!t.source.root)&&ne(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Oc(e.sort,s=>s.data)),Fce(n,this.params,e),n.separation&&n.separation(e.separation!==!1?kce:th);try{this.value=n(r)}catch(s){ne(s)}return r.each(s=>Oce(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function Fce(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Oce(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const oC=["x","y","r","depth","children"];function lM(e){Mo.call(this,e)}lM.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oC.length,default:oC}]};pe(lM,Mo,{layout:hce,params:["radius","size","padding"],fields:oC});const uC=["x0","y0","x1","y1","depth","children"];function cM(e){Mo.call(this,e)}cM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uC.length,default:uC}]};pe(cM,Mo,{layout:gce,params:["size","round","padding"],fields:uC});function fM(e){K.call(this,null,e)}fM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};pe(fM,K,{transform(e,t){t.source||ne("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?sC(bR().id(e.key).parentId(e.parentKey)(r.source),e.key,Zr):sC(bR()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const ER={tidy:_ce,cluster:zle},lC=["x","y","depth","children"];function dM(e){Mo.call(this,e)}dM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lC.length,default:lC}]};pe(dM,Mo,{layout(e){const t=e||"tidy";if(Ne(ER,t))return ER[t]();ne("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:lC});function hM(e){K.call(this,[],e)}hM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};pe(hM,K,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ne("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[Me(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[Me(o)]&&a[Me(l)]&&r.add.push(yt({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[Me(s)]=1),n.forEach(s=>{(a[Me(s.source)]||a[Me(s.target)])&&r.mod.push(s)})),r}});const AR={binary:Cce,dice:Pp,slice:D2,slicedice:Dce,squarify:uP,resquarify:$ce},cC=["x0","y0","x1","y1","depth","children"];function gM(e){Mo.call(this,e)}gM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cC.length,default:cC}]};pe(gM,Mo,{layout(){const e=wce();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ne(AR,t)?e.tile(AR[t]):ne("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:cC});const Nce=Object.freeze(Object.defineProperty({__proto__:null,nest:uM,pack:lM,partition:cM,stratify:fM,tree:dM,treelinks:hM,treemap:gM},Symbol.toStringTag,{value:"Module"})),HS=4278190080;function Rce(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function zce(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=Mu(a,s).getContext("2d"),f=Mu(a,s).getContext("2d"),d=o&&Mu(a,s).getContext("2d");n.forEach(F=>Oy(l,F,!1)),Oy(f,t,!1),o&&Oy(d,t,!0);const h=GS(l,a,s),p=GS(f,a,s),y=o&&GS(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let E,S,_,w,C,$,T,D;for(S=0;S<s;++S)for(E=0;E<a;++E)C=S*a+E,$=h[C]&HS,D=p[C]&HS,T=o&&y[C]&HS,($||T||D)&&(_=e(E),w=e(S),!r&&($||D)&&v.set(_,w),o&&($||T)&&b.set(_,w));return[v,b]}function GS(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Oy(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>Oy(e,a.items,n))}):Mr[i].draw(e,{items:n?t.map(Bce):t})}function Bce(e){const t=Pb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Zs=5,Ei=31,tp=32,gu=new Uint32Array(tp+1),ma=new Uint32Array(tp+1);ma[0]=0;gu[0]=~ma[0];for(let e=1;e<=tp;++e)ma[e]=ma[e-1]<<1|1,gu[e]=~ma[e];function Lce(e,t){const n=new Uint32Array(~~((e*t+tp)/tp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Zs]&1<<(o&Ei)},set:(a,s)=>{const o=s*e+a;i(o>>>Zs,1<<(o&Ei))},clear:(a,s)=>{const o=s*e+a;r(o>>>Zs,~(1<<(o&Ei)))},getRange:(a,s,o,l)=>{let f=l,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>Zs,y=h>>>Zs,p===y){if(n[p]&gu[d&Ei]&ma[(h&Ei)+1])return!0}else{if(n[p]&gu[d&Ei]||n[y]&ma[(h&Ei)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Zs,p=d>>>Zs,h===p)i(h,gu[f&Ei]&ma[(d&Ei)+1]);else for(i(h,gu[f&Ei]),i(p,ma[(d&Ei)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Zs,p=d>>>Zs,h===p)r(h,ma[f&Ei]|gu[(d&Ei)+1]);else for(r(h,ma[f&Ei]),r(p,gu[(d&Ei)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Uce(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>Lce(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Ice(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,f=s.datum.fontSize,d=Sr.width(s.datum,s.datum.text);let h=0,p,y,v,b,E,S,_;for(let w=0;w<l;++w)p=o[w].x,v=o[w].y,y=o[w].x2===void 0?p:o[w].x2,b=o[w].y2===void 0?v:o[w].y2,E=(p+y)/2,S=(v+b)/2,_=Math.abs(y-p+b-v),_>=h&&(h=_,s.x=E,s.y=S);return E=d/2,S=f/2,p=s.x-E,y=s.x+E,v=s.y-S,b=s.y+S,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function Jv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function _u(e,t,n,i,r,a,s,o){const l=r*a/(i*2),f=e(t-l),d=e(t+l),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function jce(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let E=h,S=a,_;if(!Jv(v,b,p,y,r,a)&&!_u(e,v,b,y,p,E,s,o)&&!_u(e,v,b,y,p,y,s,null)){for(;S-E>=1;)_=(E+S)/2,_u(e,v,b,y,p,_,s,o)?S=_:E=_;if(E>h)return[v,b,E,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=Sr.width(f.datum,f.datum.text);let v=n?p:0,b=!1,E=!1,S=0,_,w,C,$,T,D,F,O,U,z,G,B,j,I,N,q,Y;for(let J=0;J<h;++J){for(_=d[J].x,C=d[J].y,w=d[J].x2===void 0?_:d[J].x2,$=d[J].y2===void 0?C:d[J].y2,_>w&&(Y=_,_=w,w=Y),C>$&&(Y=C,C=$,$=Y),U=e(_),G=e(w),z=~~((U+G)/2),B=e(C),I=e($),j=~~((B+I)/2),F=z;F>=U;--F)for(O=j;O>=B;--O)q=l(F,O,v,y,p),q&&([f.x,f.y,v,b]=q);for(F=z;F<=G;++F)for(O=j;O<=I;++O)q=l(F,O,v,y,p),q&&([f.x,f.y,v,b]=q);!b&&!n&&(N=Math.abs(w-_+$-C),T=(_+w)/2,D=(C+$)/2,N>=S&&!Jv(T,D,y,p,r,a)&&!_u(e,T,D,p,y,p,s,null)&&(S=N,f.x=T,f.y=D,E=!0))}return b||E?(T=y/2,D=p/2,s.setRange(e(f.x-T),e(f.y-D),e(f.x+T),e(f.y+D)),f.align="center",f.baseline="middle",!0):!1}}const Pce=[-1,-1,1,1],qce=[-1,1,-1,1];function Hce(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=Sr.width(f.datum,f.datum.text),v=[];let b=n?p:0,E=!1,S=!1,_=0,w,C,$,T,D,F,O,U,z,G,B,j;for(let I=0;I<h;++I){for(w=d[I].x,$=d[I].y,C=d[I].x2===void 0?w:d[I].x2,T=d[I].y2===void 0?$:d[I].y2,v.push([e((w+C)/2),e(($+T)/2)]);v.length;)if([O,U]=v.pop(),!(s.get(O,U)||o.get(O,U)||l.get(O,U))){l.set(O,U);for(let N=0;N<4;++N)D=O+Pce[N],F=U+qce[N],l.outOfBounds(D,F,D,F)||v.push([D,F]);if(D=e.invert(O),F=e.invert(U),z=b,G=a,!Jv(D,F,y,p,r,a)&&!_u(e,D,F,p,y,z,s,o)&&!_u(e,D,F,p,y,p,s,null)){for(;G-z>=1;)B=(z+G)/2,_u(e,D,F,p,y,B,s,o)?G=B:z=B;z>b&&(f.x=D,f.y=F,b=z,E=!0)}}!E&&!n&&(j=Math.abs(C-w+T-$),D=(w+C)/2,F=($+T)/2,j>=_&&!Jv(D,F,y,p,r,a)&&!_u(e,D,F,p,y,p,s,null)&&(_=j,f.x=D,f.y=F,S=!0))}return E||S?(D=y/2,F=p/2,s.setRange(e(f.x-D),e(f.y-F),e(f.x+D),e(f.y+F)),f.align="center",f.baseline="middle",!0):!1}}const Gce=["right","center","left"],Yce=["bottom","middle","top"];function Xce(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,E,S,_,w,C,$,T,D,F,O,U,z;for(let G=0;G<l;++G){if(y=(n[G]&3)-1,v=(n[G]>>>2&3)-1,b=y===0&&v===0||i[G]<0,E=y&&v?Math.SQRT1_2:1,S=i[G]<0?-1:1,_=d[1+y]+i[G]*y*E,D=d[4+v]+S*h*v/2+i[G]*v*E,C=D-h/2,$=D+h/2,F=e(_),U=e(C),z=e($),!p)if(SR(F,F,U,z,s,o,_,_,C,$,d,b))p=Sr.width(f.datum,f.datum.text);else continue;if(T=_+S*p*y/2,_=T-p/2,w=T+p/2,F=e(_),O=e(w),SR(F,O,U,z,s,o,_,w,C,$,d,b))return f.x=y?y*S<0?w:_:T,f.y=v?v*S<0?$:C:D,f.align=Gce[y*S+1],f.baseline=Yce[v*S+1],s.setRange(F,U,O,z),!0}return!1}}function SR(e,t,n,i,r,a,s,o,l,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const YS=0,XS=4,VS=8,WS=0,QS=1,ZS=2,Vce={"top-left":YS+WS,top:YS+QS,"top-right":YS+ZS,left:XS+WS,middle:XS+QS,right:XS+ZS,"bottom-left":VS+WS,bottom:VS+QS,"bottom-right":VS+ZS},Wce={naive:Ice,"reduced-search":jce,floodfill:Hce};function Qce(e,t,n,i,r,a,s,o,l,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=Zce(i,h),y=Kce(r,h),v=Jce(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,E=b==="area",S=efe(v,b,o,l),_=f===null||f===1/0,w=E&&d==="naive";let C=-1,$=-1;const T=e.map(U=>{const z=_?Sr.width(U,U.text):void 0;return C=Math.max(C,z),$=Math.max($,U.fontSize),{datum:U,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(U),textWidth:z}});f=f===null||f===1/0?Math.max(C,$)+Math.max(...i):f;const D=Uce(t[0],t[1],f);let F;if(!w){n&&T.sort((G,B)=>n(G.datum,B.datum));let U=!1;for(let G=0;G<y.length&&!U;++G)U=y[G]===5||p[G]<0;const z=(v&&s||E)&&e.map(G=>G.datum);F=a.length||z?zce(D,z||[],a,U,E):Rce(D,s&&T)}const O=E?Wce[d](D,F,s,l):Xce(D,F,y,p);return T.forEach(U=>U.opacity=+O(U)),T}function Zce(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Kce(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Vce[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Jce(e){return e&&e.mark&&e.mark.marktype}function efe(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const fC=["x","y","opacity","align","baseline"],lP=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function pM(e){K.call(this,null,e)}pM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:lP},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:fC.length,default:fC}]};pe(pM,K,{transform(e,t){function n(a){const s=e[a];return Ye(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ne("Size parameter should be specified as a [width, height] array.");const r=e.as||fC;return Qce(t.materialize(t.SOURCE).source||[],e.size,e.sort,ke(e.offset==null?1:e.offset),ke(e.anchor||lP),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const tfe=Object.freeze(Object.defineProperty({__proto__:null,label:pM},Symbol.toStringTag,{value:"Module"}));function cP(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function mM(e){K.call(this,null,e)}mM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};pe(mM,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=cP(i,e.groupby),a=(e.groupby||[]).map(Jt),s=a.length,o=e.as||[Jt(e.x),Jt(e.y)],l=[];r.forEach(f=>{yB(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],l.push(yt(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const dC={constant:Z3,linear:K3,log:hB,exp:gB,pow:pB,quad:J3,poly:mB},nfe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function yM(e){K.call(this,null,e)}yM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};pe(yM,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=cP(i,e.groupby),a=(e.groupby||[]).map(Jt),s=e.method||"linear",o=e.order==null?3:e.order,l=nfe(s,o),f=e.as||[Jt(e.x),Jt(e.y)],d=dC[s],h=[];let p=e.extent;Ne(dC,s)||ne("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(yt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const E=p||fs(y,e.x),S=_=>{const w={};for(let C=0;C<a.length;++C)w[a[C]]=y.dims[C];w[f[0]]=_[0],w[f[1]]=_[1],h.push(yt(w))};s==="linear"||s==="constant"?E.forEach(_=>S([_,b.predict(_)])):Wb(b.predict,E,25,200).forEach(S)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const ife=Object.freeze(Object.defineProperty({__proto__:null,loess:mM,regression:yM},Symbol.toStringTag,{value:"Module"})),mo=11102230246251565e-32,si=134217729,rfe=(3+8*mo)*mo;function KS(e,t,n,i,r){let a,s,o,l,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function afe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function qp(e){return new Float64Array(e)}const sfe=(3+16*mo)*mo,ofe=(2+12*mo)*mo,ufe=(9+64*mo)*mo*mo,qf=qp(4),_R=qp(8),wR=qp(12),CR=qp(16),Ai=qp(4);function lfe(e,t,n,i,r,a,s){let o,l,f,d,h,p,y,v,b,E,S,_,w,C,$,T,D,F;const O=e-r,U=n-r,z=t-a,G=i-a;C=O*G,p=si*O,y=p-(p-O),v=O-y,p=si*G,b=p-(p-G),E=G-b,$=v*E-(C-y*b-v*b-y*E),T=z*U,p=si*z,y=p-(p-z),v=z-y,p=si*U,b=p-(p-U),E=U-b,D=v*E-(T-y*b-v*b-y*E),S=$-D,h=$-S,qf[0]=$-(S+h)+(h-D),_=C+S,h=_-C,w=C-(_-h)+(S-h),S=w-T,h=w-S,qf[1]=w-(S+h)+(h-T),F=_+S,h=F-_,qf[2]=_-(F-h)+(S-h),qf[3]=F;let B=afe(4,qf),j=ofe*s;if(B>=j||-B>=j||(h=e-O,o=e-(O+h)+(h-r),h=n-U,f=n-(U+h)+(h-r),h=t-z,l=t-(z+h)+(h-a),h=i-G,d=i-(G+h)+(h-a),o===0&&l===0&&f===0&&d===0)||(j=ufe*s+rfe*Math.abs(B),B+=O*d+G*o-(z*f+U*l),B>=j||-B>=j))return B;C=o*G,p=si*o,y=p-(p-o),v=o-y,p=si*G,b=p-(p-G),E=G-b,$=v*E-(C-y*b-v*b-y*E),T=l*U,p=si*l,y=p-(p-l),v=l-y,p=si*U,b=p-(p-U),E=U-b,D=v*E-(T-y*b-v*b-y*E),S=$-D,h=$-S,Ai[0]=$-(S+h)+(h-D),_=C+S,h=_-C,w=C-(_-h)+(S-h),S=w-T,h=w-S,Ai[1]=w-(S+h)+(h-T),F=_+S,h=F-_,Ai[2]=_-(F-h)+(S-h),Ai[3]=F;const I=KS(4,qf,4,Ai,_R);C=O*d,p=si*O,y=p-(p-O),v=O-y,p=si*d,b=p-(p-d),E=d-b,$=v*E-(C-y*b-v*b-y*E),T=z*f,p=si*z,y=p-(p-z),v=z-y,p=si*f,b=p-(p-f),E=f-b,D=v*E-(T-y*b-v*b-y*E),S=$-D,h=$-S,Ai[0]=$-(S+h)+(h-D),_=C+S,h=_-C,w=C-(_-h)+(S-h),S=w-T,h=w-S,Ai[1]=w-(S+h)+(h-T),F=_+S,h=F-_,Ai[2]=_-(F-h)+(S-h),Ai[3]=F;const N=KS(I,_R,4,Ai,wR);C=o*d,p=si*o,y=p-(p-o),v=o-y,p=si*d,b=p-(p-d),E=d-b,$=v*E-(C-y*b-v*b-y*E),T=l*f,p=si*l,y=p-(p-l),v=l-y,p=si*f,b=p-(p-f),E=f-b,D=v*E-(T-y*b-v*b-y*E),S=$-D,h=$-S,Ai[0]=$-(S+h)+(h-D),_=C+S,h=_-C,w=C-(_-h)+(S-h),S=w-T,h=w-S,Ai[1]=w-(S+h)+(h-T),F=_+S,h=F-_,Ai[2]=_-(F-h)+(S-h),Ai[3]=F;const q=KS(N,wR,4,Ai,CR);return CR[q-1]}function K1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,f=Math.abs(s+o);return Math.abs(l)>=sfe*f?l:-lfe(e,t,n,i,r,a,f)}const DR=Math.pow(2,-52),J1=new Uint32Array(512);class eb{static from(t,n=gfe,i=pfe){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new eb(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,f=-1/0,d=-1/0;for(let O=0;O<s;O++){const U=t[2*O],z=t[2*O+1];U<o&&(o=U),z<l&&(l=z),U>f&&(f=U),z>d&&(d=z),this._ids[O]=O}const h=(o+f)/2,p=(l+d)/2;let y,v,b;for(let O=0,U=1/0;O<s;O++){const z=JS(h,p,t[2*O],t[2*O+1]);z<U&&(y=O,U=z)}const E=t[2*y],S=t[2*y+1];for(let O=0,U=1/0;O<s;O++){if(O===y)continue;const z=JS(E,S,t[2*O],t[2*O+1]);z<U&&z>0&&(v=O,U=z)}let _=t[2*v],w=t[2*v+1],C=1/0;for(let O=0;O<s;O++){if(O===y||O===v)continue;const U=dfe(E,S,_,w,t[2*O],t[2*O+1]);U<C&&(b=O,C=U)}let $=t[2*b],T=t[2*b+1];if(C===1/0){for(let z=0;z<s;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];sd(this._ids,this._dists,0,s-1);const O=new Uint32Array(s);let U=0;for(let z=0,G=-1/0;z<s;z++){const B=this._ids[z],j=this._dists[B];j>G&&(O[U++]=B,G=j)}this.hull=O.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(K1(E,S,_,w,$,T)<0){const O=v,U=_,z=w;v=b,_=$,w=T,b=O,$=U,T=z}const D=hfe(E,S,_,w,$,T);this._cx=D.x,this._cy=D.y;for(let O=0;O<s;O++)this._dists[O]=JS(t[2*O],t[2*O+1],D.x,D.y);sd(this._ids,this._dists,0,s-1),this._hullStart=y;let F=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(E,S)]=y,a[this._hashKey(_,w)]=v,a[this._hashKey($,T)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let O=0,U,z;O<this._ids.length;O++){const G=this._ids[O],B=t[2*G],j=t[2*G+1];if(O>0&&Math.abs(B-U)<=DR&&Math.abs(j-z)<=DR||(U=B,z=j,G===y||G===v||G===b))continue;let I=0;for(let R=0,V=this._hashKey(B,j);R<this._hashSize&&(I=a[(V+R)%this._hashSize],!(I!==-1&&I!==i[I]));R++);I=n[I];let N=I,q;for(;q=i[N],K1(B,j,t[2*N],t[2*N+1],t[2*q],t[2*q+1])>=0;)if(N=q,N===I){N=-1;break}if(N===-1)continue;let Y=this._addTriangle(N,G,i[N],-1,-1,r[N]);r[G]=this._legalize(Y+2),r[N]=Y,F++;let J=i[N];for(;q=i[J],K1(B,j,t[2*J],t[2*J+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(J,G,q,r[G],-1,r[J]),r[G]=this._legalize(Y+2),i[J]=J,F--,J=q;if(N===I)for(;q=n[N],K1(B,j,t[2*q],t[2*q+1],t[2*N],t[2*N+1])<0;)Y=this._addTriangle(q,G,N,-1,r[N],r[q]),this._legalize(Y+2),r[q]=Y,i[N]=N,F--,N=q;this._hullStart=n[G]=N,i[N]=n[J]=G,i[G]=J,a[this._hashKey(B,j)]=G,a[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(F);for(let O=0,U=this._hullStart;O<F;O++)this.hull[O]=U,U=i[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(cfe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=J1[--a];continue}const f=o-o%3,d=l+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(ffe(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const S=i[h];if(S===-1){let w=this._hullStart;do{if(this._hullTri[w]===h){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,S),this._link(o,i[s]),this._link(s,h);const _=f+(o+1)%3;a<J1.length&&(J1[a++]=_)}else{if(a===0)break;t=J1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function cfe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function JS(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function ffe(e,t,n,i,r,a,s,o){const l=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=l*l+f*f,b=d*d+h*h,E=p*p+y*y;return l*(h*E-b*y)-f*(d*E-b*p)+v*(d*y-h*p)<0}function dfe(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=(f*d-o*h)*p,v=(s*h-l*d)*p;return y*y+v*v}function hfe(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=e+(f*d-o*h)*p,v=t+(s*h-l*d)*p;return{x:y,y:v}}function sd(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;U0(e,r,a),t[e[n]]>t[e[i]]&&U0(e,n,i),t[e[a]]>t[e[i]]&&U0(e,a,i),t[e[n]]>t[e[a]]&&U0(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;U0(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(sd(e,t,a,i),sd(e,t,n,s-1)):(sd(e,t,n,s-1),sd(e,t,a,i))}}function U0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function gfe(e){return e[0]}function pfe(e){return e[1]}const $R=1e-6;class Wl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>$R||Math.abs(this._y1-a)>$R)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class hC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let mfe=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,E=0,S=i.length,_,w;b<S;b+=3,E+=2){const C=i[b]*2,$=i[b+1]*2,T=i[b+2]*2,D=t[C],F=t[C+1],O=t[$],U=t[$+1],z=t[T],G=t[T+1],B=O-D,j=U-F,I=z-D,N=G-F,q=(B*N-j*I)*2;if(Math.abs(q)<1e-9){if(a===void 0){a=s=0;for(const J of n)a+=t[J*2],s+=t[J*2+1];a/=n.length,s/=n.length}const Y=1e9*Math.sign((a-D)*N-(s-F)*I);_=(D+z)/2-Y*N,w=(F+G)/2+Y*I}else{const Y=1/q,J=B*B+j*j,R=I*I+N*N;_=D+(N*J-j*R)*Y,w=F+(B*R-I*J)*Y}o[E]=_,o[E+1]=w}let l=n[n.length-1],f,d=l*4,h,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],f=d,h=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Wl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],E=s[y+1],S=s[v],_=s[v+1];this._renderSegment(b,E,S,_,t)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Wl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Wl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new hC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const f=Math.floor(l/3);if(o.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],f,d=this._regioncode(o,l),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],f=d,d=this._regioncode(o,l),f===0&&d===0)h=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,E,S,_;if(f===0){if((v=this._clipSegment(a,s,o,l,f,d))===null)continue;[b,E,S,_]=v}else{if((v=this._clipSegment(o,l,a,s,d,f))===null)continue;[S,_,b,E]=v,h=p,p=this._edgecode(b,E),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,E):r=[b,E]}h=p,p=this._edgecode(S,_),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(S,_):r=[S,_]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,f,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=f,a=this._regioncode(t,n)):(i=l,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const yfe=2*Math.PI,Hf=Math.pow;function vfe(e){return e[0]}function bfe(e){return e[1]}function xfe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Efe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class vM{static from(t,n=vfe,i=bfe,r){return new vM("length"in t?Afe(t,n,i,r):Float64Array.from(Sfe(t,n,i,r)))}constructor(t){this._delaunator=new eb(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&xfe(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Efe(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new eb(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new mfe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=n[t];if(l===-1)return;let f=l,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=Hf(n-f[t*2],2)+Hf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=Hf(n-f[v*2],2)+Hf(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&Hf(n-f[y*2],2)+Hf(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Wl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const f=a[s]*2,d=a[l]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Wl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,yfe)}return i&&i.value()}renderHull(t){const n=t==null?t=new Wl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new hC;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Wl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new hC;return this.renderTriangle(t,n),n.value()}}function Afe(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Sfe(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function bM(e){K.call(this,null,e)}bM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const _fe=[-1e5,-1e5,1e5,1e5];pe(bM,K,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:_fe;const a=this.value=vM.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!Cfe(l)?wfe(l):null}return t.reflow(e.modified()).modifies(n)}});function wfe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Cfe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Dfe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:bM},Symbol.toStringTag,{value:"Module"}));var e_=Math.PI/180,yg=64,Ny=2048;function $fe(){var e=[256,256],t,n,i,r,a,s,o,l=fP,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(Mu()),b=Nfe((e[0]>>5)*e[1]),E=null,S=f.length,_=-1,w=[],C=f.map(T=>({text:t(T),font:n(T),style:r(T),weight:a(T),rotate:s(T),size:~~(i(T)+1e-14),padding:o(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,D)=>D.size-T.size);++_<S;){var $=C[_];$.x=e[0]*(d()+.5)>>1,$.y=e[1]*(d()+.5)>>1,Mfe(v,$,C,_),$.hasText&&y(b,$,E)&&(w.push($),E?kfe(E,$):E=[{x:$.x+$.x0,y:$.y+$.y0},{x:$.x+$.x1,y:$.y+$.y1}],$.x-=e[0]>>1,$.y-=e[1]>>1)}return w};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(yg<<5)/b,v.height=Ny/b;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:b}}function y(v,b,E){for(var S=b.x,_=b.y,w=Math.hypot(e[0],e[1]),C=l(e),$=d()<.5?1:-1,T=-$,D,F,O;(D=C(T+=$))&&(F=~~D[0],O=~~D[1],!(Math.min(Math.abs(F),Math.abs(O))>=w));)if(b.x=S+F,b.y=_+O,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!E||!Tfe(b,v,e[0]))&&(!E||Ffe(b,E))){for(var U=b.sprite,z=b.width>>5,G=e[0]>>5,B=b.x-(z<<4),j=B&127,I=32-j,N=b.y1-b.y0,q=(b.y+b.y0)*G+(B>>5),Y,J=0;J<N;J++){Y=0;for(var R=0;R<=z;R++)v[q+R]|=Y<<I|(R<z?(Y=U[J*z+R])>>>j:0);q+=G}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=Dl(v),h):n},h.fontStyle=function(v){return arguments.length?(r=Dl(v),h):r},h.fontWeight=function(v){return arguments.length?(a=Dl(v),h):a},h.rotate=function(v){return arguments.length?(s=Dl(v),h):s},h.text=function(v){return arguments.length?(t=Dl(v),h):t},h.spiral=function(v){return arguments.length?(l=Rfe[v]||v,h):l},h.fontSize=function(v){return arguments.length?(i=Dl(v),h):i},h.padding=function(v){return arguments.length?(o=Dl(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function Mfe(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(yg<<5)/a,Ny/a);var s=0,o=0,l=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*e_),E=Math.cos(t.rotate*e_),S=d*E,_=d*b,w=p*E,C=p*b;d=Math.max(Math.abs(S+C),Math.abs(S-C))+31>>5<<5,p=~~Math.max(Math.abs(_+w),Math.abs(_-w))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=yg<<5&&(s=0,o+=l,l=0),o+p>=Ny)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*e_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var $=r.getImageData(0,0,(yg<<5)/a,Ny/a).data,T=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)T[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var D=0,F=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var O=h*v+(y>>5),U=$[(o+v)*(yg<<5)+(s+y)<<2]?1<<31-y%32:0;T[O]|=U,D|=U}D?F=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+F,t.sprite=T.slice(0,(t.y1-t.y0)*h)}}}function Tfe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<l;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function kfe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Ffe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function fP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Ofe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Nfe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Dl(e){return typeof e=="function"?e:function(){return e}}var Rfe={archimedean:fP,rectangular:Ofe};const dP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],zfe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function xM(e){K.call(this,$fe(),e)}xM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:dP}]};pe(xM,K,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ne("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Ye(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||zfe.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||dP;let o=e.fontSize||14,l;if(Ye(o)?l=e.fontSizeRange:o=bi(o),l){const v=o,b=gt("sqrt")().domain(fs(r,v)).range(l);o=E=>b(v(E))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Jr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,E;v<y;++v)b=f[v],E=b.datum,E[s[0]]=b.x+h,E[s[1]]=b.y+p,E[s[2]]=b.font,E[s[3]]=b.size,E[s[4]]=b.style,E[s[5]]=b.weight,E[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const Bfe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:xM},Symbol.toStringTag,{value:"Module"})),Lfe=e=>new Uint8Array(e),Ufe=e=>new Uint16Array(e),Tg=e=>new Uint32Array(e);function Ife(){let e=8,t=[],n=Tg(0),i=ey(0,e),r=ey(0,e);return{data:()=>t,seen:()=>n=jfe(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,f;s<l;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,l=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)l[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],l[p]=d,d._index=p++),i[h]=0;return t=l,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=ey(a,e,i),r=ey(a,e))}}}function jfe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function ey(e,t,n){const i=(t<257?Lfe:t<65537?Ufe:Tg)(e);return n&&i.set(n),i}function MR(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,f=o[0],d=o[1],h=l.length;let p;for(p=0;p<f;++p)a[l[p]]|=i;for(p=d;p<h;++p)a[l[p]]|=i;return s}}}function TR(){let e=Tg(0),t=[],n=0;function i(o,l,f){if(!l.length)return[];const d=n,h=l.length,p=Tg(h);let y=Array(h),v,b,E;for(E=0;E<h;++E)y[E]=o(l[E]),p[E]=E;if(y=Pfe(y,p),d)v=t,b=e,t=Array(d+h),e=Tg(d+h),qfe(f,v,b,d,y,p,h,t,e);else{if(f>0)for(E=0;E<h;++E)p[E]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,l){const f=n;let d,h,p;for(h=0;!l[e[h]]&&h<f;++h);for(p=h;h<f;++h)l[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let l=0,f=n;l<f;++l)e[l]=o[e[l]]}function s(o,l){let f;return l?f=l.length:(l=t,f=n),[XQ(l,o[0],0,f),Ou(l,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Pfe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),QQ(e,t)}function qfe(e,t,n,i,r,a,s,o,l){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],l[h]=n[f++]):(o[h]=r[d],l[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],l[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],l[h]=a[d]+e}function EM(e){K.call(this,Ife(),e),this._indices=null,this._dims=null}EM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};pe(EM,K,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,f;for(;o<s;++o)l=n[o].fname,f=r[l]||(r[l]=TR()),a.push(MR(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,E,S,_,w,C,$,T,D;if(f.set(l),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(C={},_=t.mod,$=0,T=_.length;$<T;++$)C[_[$]._index]=1;for($=0;$<y;++$)D=i[$],(!s[$]||e.modified("fields",$)||t.modified(D.fields))&&(S=D.fname,(b=v[S])||(a[S]=E=TR(),v[S]=b=E.insert(D,t.source,0)),s[$]=MR(E,$,r[$]).onAdd(b,l));for($=0,T=o.data().length;$<T;++$)w[$]||(f[$]!==l[$]?h.push($):C[$]&&l[$]!==d&&p.push($));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const E=r.curr(),S=r.prev(),_=r.all();for(y=0;y<h;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,E);for(;p<d;++p)S[p]=_,E[p]!==_&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,f;for(o=0,l=s.length;o<l;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(l=f,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let E,S,_;if(h<y)for(E=h,S=Math.min(y,p);E<S;++E)_=l[E],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(h>y)for(E=y,S=Math.min(h,v);E<S;++E)_=l[E],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;if(p>v)for(E=Math.max(h,v),S=p;E<S;++E)_=l[E],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(p<v)for(E=Math.max(y,p),S=v;E<S;++E)_=l[E],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=o[0],p=o[1],y=e.one;let v,b,E;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)E=s[v],a[E]^=y,i.push(E);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)E=s[v],a[E]^=y,i.push(E);e.range=t.slice()}});function AM(e){K.call(this,null,e)}AM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};pe(AM,K,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^l[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const Hfe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:EM,resolvefilter:AM},Symbol.toStringTag,{value:"Module"})),Gfe="RawCode",Ld="Literal",Yfe="Property",Xfe="Identifier",Vfe="ArrayExpression",Wfe="BinaryExpression",hP="CallExpression",Qfe="ConditionalExpression",Zfe="LogicalExpression",Kfe="MemberExpression",Jfe="ObjectExpression",ede="UnaryExpression";function Fa(e){this.type=e}Fa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=tde(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function tde(e){switch(e.type){case Vfe:return e.elements;case Wfe:case Zfe:return[e.left,e.right];case hP:return[e.callee].concat(e.arguments);case Qfe:return[e.test,e.consequent,e.alternate];case Kfe:return[e.object,e.property];case Jfe:return e.properties;case Yfe:return[e.key,e.value];case ede:return[e.argument];case Xfe:case Ld:case Gfe:default:return[]}}var _s,xe,ee,pi,St,$2=1,Hp=2,pc=3,Ku=4,M2=5,Bc=6,Yi=7,Gp=8,nde=9;_s={};_s[$2]="Boolean";_s[Hp]="<end>";_s[pc]="Identifier";_s[Ku]="Keyword";_s[M2]="Null";_s[Bc]="Numeric";_s[Yi]="Punctuator";_s[Gp]="String";_s[nde]="RegularExpression";var ide="ArrayExpression",rde="BinaryExpression",ade="CallExpression",sde="ConditionalExpression",gP="Identifier",ode="Literal",ude="LogicalExpression",lde="MemberExpression",cde="ObjectExpression",fde="Property",dde="UnaryExpression",Rn="Unexpected token %0",hde="Unexpected number",gde="Unexpected string",pde="Unexpected identifier",mde="Unexpected reserved word",yde="Unexpected end of input",gC="Invalid regular expression",t_="Invalid regular expression: missing /",pP="Octal literals are not allowed in strict mode.",vde="Duplicate data property in object literal not allowed in strict mode",Zn="ILLEGAL",np="Disabled.",bde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),xde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function T2(e,t){if(!e)throw new Error("ASSERT: "+t)}function no(e){return e>=48&&e<=57}function SM(e){return"0123456789abcdefABCDEF".includes(e)}function kg(e){return"01234567".includes(e)}function Ede(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function ip(e){return e===10||e===13||e===8232||e===8233}function Yp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&bde.test(String.fromCharCode(e))}function tb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&xde.test(String.fromCharCode(e))}const Ade={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function mP(){for(;ee<pi;){const e=xe.charCodeAt(ee);if(Ede(e)||ip(e))++ee;else break}}function pC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<pi&&SM(xe[ee])?(i=xe[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ft({},Rn,Zn);return String.fromCharCode(r)}function Sde(){var e,t,n,i;for(e=xe[ee],t=0,e==="}"&&ft({},Rn,Zn);ee<pi&&(e=xe[ee++],!!SM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ft({},Rn,Zn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function yP(){var e,t;for(e=xe.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(xe.charCodeAt(ee)!==117&&ft({},Rn,Zn),++ee,e=pC("u"),(!e||e==="\\"||!Yp(e.charCodeAt(0)))&&ft({},Rn,Zn),t=e);ee<pi&&(e=xe.charCodeAt(ee),!!tb(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),xe.charCodeAt(ee)!==117&&ft({},Rn,Zn),++ee,e=pC("u"),(!e||e==="\\"||!tb(e.charCodeAt(0)))&&ft({},Rn,Zn),t+=e);return t}function _de(){var e,t;for(e=ee++;ee<pi;){if(t=xe.charCodeAt(ee),t===92)return ee=e,yP();if(tb(t))++ee;else break}return xe.slice(e,ee)}function wde(){var e,t,n;return e=ee,t=xe.charCodeAt(ee)===92?yP():_de(),t.length===1?n=pc:Ade.hasOwnProperty(t)?n=Ku:t==="null"?n=M2:t==="true"||t==="false"?n=$2:n=pc,{type:n,value:t,start:e,end:ee}}function n_(){var e=ee,t=xe.charCodeAt(ee),n,i=xe[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:Yi,value:String.fromCharCode(t),start:e,end:ee};default:if(n=xe.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:Yi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,xe.charCodeAt(ee)===61&&++ee,{type:Yi,value:xe.slice(e,ee),start:e,end:ee}}}if(s=xe.substr(ee,4),s===">>>=")return ee+=4,{type:Yi,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:Yi,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:Yi,value:r,start:e,end:ee};if(r==="//"&&ft({},Rn,Zn),"<>=!+-*%&|^/".includes(i))return++ee,{type:Yi,value:i,start:e,end:ee};ft({},Rn,Zn)}function Cde(e){let t="";for(;ee<pi&&SM(xe[ee]);)t+=xe[ee++];return t.length===0&&ft({},Rn,Zn),Yp(xe.charCodeAt(ee))&&ft({},Rn,Zn),{type:Bc,value:parseInt("0x"+t,16),start:e,end:ee}}function Dde(e){let t="0"+xe[ee++];for(;ee<pi&&kg(xe[ee]);)t+=xe[ee++];return(Yp(xe.charCodeAt(ee))||no(xe.charCodeAt(ee)))&&ft({},Rn,Zn),{type:Bc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function kR(){var e,t,n;if(n=xe[ee],T2(no(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=xe[ee++],n=xe[ee],e==="0"){if(n==="x"||n==="X")return++ee,Cde(t);if(kg(n))return Dde(t);n&&no(n.charCodeAt(0))&&ft({},Rn,Zn)}for(;no(xe.charCodeAt(ee));)e+=xe[ee++];n=xe[ee]}if(n==="."){for(e+=xe[ee++];no(xe.charCodeAt(ee));)e+=xe[ee++];n=xe[ee]}if(n==="e"||n==="E")if(e+=xe[ee++],n=xe[ee],(n==="+"||n==="-")&&(e+=xe[ee++]),no(xe.charCodeAt(ee)))for(;no(xe.charCodeAt(ee));)e+=xe[ee++];else ft({},Rn,Zn);return Yp(xe.charCodeAt(ee))&&ft({},Rn,Zn),{type:Bc,value:parseFloat(e),start:t,end:ee}}function $de(){var e="",t,n,i,r,a=!1;for(t=xe[ee],T2(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<pi;)if(i=xe[ee++],i===t){t="";break}else if(i==="\\")if(i=xe[ee++],!i||!ip(i.charCodeAt(0)))switch(i){case"u":case"x":xe[ee]==="{"?(++ee,e+=Sde()):e+=pC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:kg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<pi&&kg(xe[ee])&&(a=!0,r=r*8+"01234567".indexOf(xe[ee++]),"0123".includes(i)&&ee<pi&&kg(xe[ee])&&(r=r*8+"01234567".indexOf(xe[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&xe[ee]===`
`&&++ee;else{if(ip(i.charCodeAt(0)))break;e+=i}return t!==""&&ft({},Rn,Zn),{type:Gp,value:e,octal:a,start:n,end:ee}}function Mde(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ft({},gC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ft({},gC)}try{return new RegExp(e,t)}catch{return null}}function Tde(){var e,t,n,i,r;for(e=xe[ee],T2(e==="/","Regular expression literal must start with a slash"),t=xe[ee++],n=!1,i=!1;ee<pi;)if(e=xe[ee++],t+=e,e==="\\")e=xe[ee++],ip(e.charCodeAt(0))&&ft({},t_),t+=e;else if(ip(e.charCodeAt(0)))ft({},t_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ft({},t_),r=t.substr(1,t.length-2),{value:r,literal:t}}function kde(){var e,t,n;for(t="",n="";ee<pi&&(e=xe[ee],!!tb(e.charCodeAt(0)));)++ee,e==="\\"&&ee<pi?ft({},Rn,Zn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ft({},gC,n),{value:n,literal:t}}function Fde(){var e,t,n,i;return St=null,mP(),e=ee,t=Tde(),n=kde(),i=Mde(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function Ode(e){return e.type===pc||e.type===Ku||e.type===$2||e.type===M2}function vP(){if(mP(),ee>=pi)return{type:Hp,start:ee,end:ee};const e=xe.charCodeAt(ee);return Yp(e)?wde():e===40||e===41||e===59?n_():e===39||e===34?$de():e===46?no(xe.charCodeAt(ee+1))?kR():n_():no(e)?kR():n_()}function Wi(){const e=St;return ee=e.end,St=vP(),ee=e.end,e}function bP(){const e=ee;St=vP(),ee=e}function Nde(e){const t=new Fa(ide);return t.elements=e,t}function FR(e,t,n){const i=new Fa(e==="||"||e==="&&"?ude:rde);return i.operator=e,i.left=t,i.right=n,i}function Rde(e,t){const n=new Fa(ade);return n.callee=e,n.arguments=t,n}function zde(e,t,n){const i=new Fa(sde);return i.test=e,i.consequent=t,i.alternate=n,i}function _M(e){const t=new Fa(gP);return t.name=e,t}function vg(e){const t=new Fa(ode);return t.value=e.value,t.raw=xe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function OR(e,t,n){const i=new Fa(lde);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Bde(e){const t=new Fa(cde);return t.properties=e,t}function NR(e,t,n){const i=new Fa(fde);return i.key=t,i.value=n,i.kind=e,i}function Lde(e,t){const n=new Fa(dde);return n.operator=e,n.argument=t,n.prefix=!0,n}function ft(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(T2(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function k2(e){e.type===Hp&&ft(e,yde),e.type===Bc&&ft(e,hde),e.type===Gp&&ft(e,gde),e.type===pc&&ft(e,pde),e.type===Ku&&ft(e,mde),ft(e,Rn,e.value)}function mi(e){const t=Wi();(t.type!==Yi||t.value!==e)&&k2(t)}function zt(e){return St.type===Yi&&St.value===e}function i_(e){return St.type===Ku&&St.value===e}function Ude(){const e=[];for(ee=St.start,mi("[");!zt("]");)zt(",")?(Wi(),e.push(null)):(e.push(mc()),zt("]")||mi(","));return Wi(),Nde(e)}function RR(){ee=St.start;const e=Wi();return e.type===Gp||e.type===Bc?(e.octal&&ft(e,pP),vg(e)):_M(e.value)}function Ide(){var e,t,n,i;if(ee=St.start,e=St,e.type===pc)return n=RR(),mi(":"),i=mc(),NR("init",n,i);if(e.type===Hp||e.type===Yi)k2(e);else return t=RR(),mi(":"),i=mc(),NR("init",t,i)}function jde(){var e=[],t,n,i,r={},a=String;for(ee=St.start,mi("{");!zt("}");)t=Ide(),t.key.type===gP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ft({},vde):r[i]=!0,e.push(t),zt("}")||mi(",");return mi("}"),Bde(e)}function Pde(){mi("(");const e=wM();return mi(")"),e}const qde={if:1};function Hde(){var e,t,n;if(zt("("))return Pde();if(zt("["))return Ude();if(zt("{"))return jde();if(e=St.type,ee=St.start,e===pc||qde[St.value])n=_M(Wi().value);else if(e===Gp||e===Bc)St.octal&&ft(St,pP),n=vg(Wi());else{if(e===Ku)throw new Error(np);e===$2?(t=Wi(),t.value=t.value==="true",n=vg(t)):e===M2?(t=Wi(),t.value=null,n=vg(t)):zt("/")||zt("/=")?(n=vg(Fde()),bP()):k2(Wi())}return n}function Gde(){const e=[];if(mi("("),!zt(")"))for(;ee<pi&&(e.push(mc()),!zt(")"));)mi(",");return mi(")"),e}function Yde(){ee=St.start;const e=Wi();return Ode(e)||k2(e),_M(e.value)}function Xde(){return mi("."),Yde()}function Vde(){mi("[");const e=wM();return mi("]"),e}function Wde(){var e,t,n;for(e=Hde();;)if(zt("."))n=Xde(),e=OR(".",e,n);else if(zt("("))t=Gde(),e=Rde(e,t);else if(zt("["))n=Vde(),e=OR("[",e,n);else break;return e}function zR(){const e=Wde();if(St.type===Yi&&(zt("++")||zt("--")))throw new Error(np);return e}function Ry(){var e,t;if(St.type!==Yi&&St.type!==Ku)t=zR();else{if(zt("++")||zt("--"))throw new Error(np);if(zt("+")||zt("-")||zt("~")||zt("!"))e=Wi(),t=Ry(),t=Lde(e.value,t);else{if(i_("delete")||i_("void")||i_("typeof"))throw new Error(np);t=zR()}}return t}function BR(e){let t=0;if(e.type!==Yi&&e.type!==Ku)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Qde(){var e,t,n,i,r,a,s,o,l,f;if(e=St,l=Ry(),i=St,r=BR(i),r===0)return l;for(i.prec=r,Wi(),t=[e,St],s=Ry(),a=[l,i,s];(r=BR(St))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=FR(o,l,s),a.push(n);i=Wi(),i.prec=r,a.push(i),t.push(St),n=Ry(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=FR(a[f-1].value,a[f-2],n),f-=2;return n}function mc(){var e,t,n;return e=Qde(),zt("?")&&(Wi(),t=mc(),mi(":"),n=mc(),e=zde(e,t,n)),e}function wM(){const e=mc();if(zt(","))throw new Error(np);return e}function xP(e){xe=e,ee=0,pi=xe.length,St=null,bP();const t=wM();if(St.type!==Hp)throw new Error("Unexpect token after expression.");return t}var EP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function AP(e){function t(s,o,l,f){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return f=>t(s,f,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ne("Missing arguments to clamp function."),s.length>3&&ne("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:a,test:n("test",a),if:function(s){s.length<3&&ne("Missing arguments to if function."),s.length>3&&ne("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function Zde(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function SP(e){e=e||{};const t=e.allowed?wa(e.allowed):{},n=e.forbidden?wa(e.forbidden):{},i=e.constants||EP,r=(e.functions||AP)(h),a=e.globalvar,s=e.fieldvar,o=Ye(a)?a:v=>`${a}["${v}"]`;let l={},f={},d=0;function h(v){if(ut(v))return v;const b=p[v.type];return b==null&&ne("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:Ne(n,b)?ne("Illegal identifier: "+b):Ne(i,b)?i[b]:Ne(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,E=h(v.object);b&&(d+=1);const S=h(v.property);return E===s&&(f[Zde(S)]=1),b&&(d-=1),E+(b?"."+S:"["+S+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ne("Illegal callee type: "+v.callee.type);const b=v.callee.name,E=v.arguments,S=Ne(r,b)&&r[b];return S||ne("Unrecognized function: "+b),Ye(S)?S(E):S+"("+E.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},b}return y.functions=r,y.constants=i,y}const Kde="Literal";var ws,Jde=1,ehe=2,the=3,nhe=4,ihe=5,rhe=6,ahe=7,she=8,ohe=9;ws={};ws[Jde]="Boolean";ws[ehe]="<end>";ws[the]="Identifier";ws[nhe]="Keyword";ws[ihe]="Null";ws[rhe]="Numeric";ws[ahe]="Punctuator";ws[she]="String";ws[ohe]="RegularExpression";const LR=Symbol("vega_selection_getter");function _P(e){return(!e.getter||!e.getter[LR])&&(e.getter=Qr(e.field),e.getter[LR]=!0),e.getter}const CM="intersect",UR="union",uhe="vlMulti",lhe="vlPoint",IR="or",che="and",Ja="_vgsid_",rp=Qr(Ja),fhe="E",dhe="R",hhe="R-E",ghe="R-LE",phe="R-RE",mhe="E-LT",yhe="E-LTE",vhe="E-GT",bhe="E-GTE",xhe="E-VALID",Ehe="E-ONE",nb="index:unit";function jR(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=_P(o)(e),Cu(s)&&(s=fi(s)),Cu(i[a])&&(i[a]=fi(i[a])),we(i[a])&&Cu(i[a][0])&&(i[a]=i[a].map(fi)),o.type===fhe){if(we(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===dhe){if(!nd(s,i[a]))return!1}else if(o.type===phe){if(!nd(s,i[a],!0,!1))return!1}else if(o.type===hhe){if(!nd(s,i[a],!1,!1))return!1}else if(o.type===ghe){if(!nd(s,i[a],!1,!0))return!1}else if(o.type===mhe){if(s>=i[a])return!1}else if(o.type===yhe){if(s>i[a])return!1}else if(o.type===vhe){if(s<=i[a])return!1}else if(o.type===bhe){if(s<i[a])return!1}else if(o.type===xhe){if(s===null||isNaN(s))return!1}else if(o.type===Ehe&&i[a].indexOf(s)===-1)return!1;return!0}function Ahe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[nb]&&i[nb].value:void 0,s=n===CM,o=r.length,l=0,f,d,h,p,y;l<o;++l)if(f=r[l],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=jR(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=jR(t,f),s^y)return y;return o&&s}const wP=ih(rp),She=wP.left,_he=wP.right;function whe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[nb]&&i[nb].value:void 0,s=n===CM,o=rp(t),l=She(r,o);if(l===r.length||rp(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(_he(r,o)-l<a.size)return!1}return!0}function Che(e,t){return e.map(n=>He(t.fields?{values:t.fields.map(i=>_P(i)(n.datum))}:{[Ja]:rp(n.datum)},t))}function Dhe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},f,d,h,p,y,v,b,E,S,_,w=a.length,C=0,$,T;C<w;++C)if(f=a[C],p=f.unit,d=f.fields,h=f.values,d&&h){for($=0,T=d.length;$<T;++$)y=d[$],b=s[y.field]||(s[y.field]={}),E=b[p]||(b[p]=[]),l[y.field]=S=y.type.charAt(0),_=r_[`${S}_union`],b[p]=_(E,ke(h[$]));n&&(E=o[p]||(o[p]=[]),E.push(ke(h).reduce((D,F,O)=>(D[d[O].field]=F,D),{})))}else y=Ja,v=rp(f),b=s[y]||(s[y]={}),E=b[p]||(b[p]=[]),E.push(v),n&&(E=o[p]||(o[p]=[]),E.push({[Ja]:v}));if(t=t||UR,s[Ja]?s[Ja]=r_[`${Ja}_${t}`](...Object.values(s[Ja])):Object.keys(s).forEach(D=>{s[D]=Object.keys(s[D]).map(F=>s[D][F]).reduce((F,O)=>F===void 0?O:r_[`${l[D]}_${t}`](F,O))}),a=Object.keys(o),n&&a.length){const D=i?lhe:uhe;s[D]=t===UR?{[IR]:a.reduce((F,O)=>(F.push(...o[O]),F),[])}:{[che]:a.map(F=>({[IR]:o[F]}))}}return s}var r_={[`${Ja}_union`]:aZ,[`${Ja}_intersect`]:iZ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=fi(t[0]),i=fi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=fi(t[0]),i=fi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const $he=":",Mhe="@";function DM(e,t,n,i){t[0].type!==Kde&&ne("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&nt(t).value,s="unit",o=Mhe+s,l=$he+r;a===CM&&!Ne(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),Ne(i,l)||(i[l]=n.getData(r).tuplesRef())}function CP(e){const t=this.context.data[e];return t?t.values.value:[]}function The(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function khe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Zr).insert(t)),1}function Fhe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Xp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Ohe=Xp("format"),DP=Xp("timeFormat"),Nhe=Xp("utcFormat"),Rhe=Xp("timeParse"),zhe=Xp("utcParse"),ty=new Date(2e3,0,1);function F2(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ty.setYear(2e3),ty.setMonth(e),ty.setDate(t),DP.call(this,ty,n))}function Bhe(e){return F2.call(this,e,1,"%B")}function Lhe(e){return F2.call(this,e,1,"%b")}function Uhe(e){return F2.call(this,0,2+e,"%A")}function Ihe(e){return F2.call(this,0,2+e,"%a")}const jhe=":",Phe="@",mC="%",$P="$";function $M(e,t,n,i){t[0].type!==Ld&&ne("First argument to data functions must be a string literal.");const r=t[0].value,a=jhe+r;if(!Ne(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function qhe(e,t,n,i){t[0].type!==Ld&&ne("First argument to indata must be a string literal."),t[1].type!==Ld&&ne("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=Phe+a;Ne(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function Oi(e,t,n,i){if(t[0].type===Ld)PR(n,i,t[0].value);else for(e in n.scales)PR(n,i,e)}function PR(e,t,n){const i=mC+n;if(!Ne(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Cs(e,t){if(Ye(e))return e;if(ut(e)){const n=t.scales[e];return n&&Lne(n.value)?n.value:void 0}}function Hhe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Oi,n._range=Oi,n._scale=Oi;const i=r=>"_["+(r.type===Ld?_e(mC+r.value):_e(mC)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function MM(e,t){return function(n,i,r){if(n){const a=Cs(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Ghe=MM("area",Jse),Yhe=MM("bounds",ioe),Xhe=MM("centroid",loe);function Vhe(e,t){const n=Cs(e,(t||this).context);return n&&n.scale()}function Whe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function TM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Qhe(){return TM(this.context.dataflow,"warn",arguments)}function Zhe(){return TM(this.context.dataflow,"info",arguments)}function Khe(){return TM(this.context.dataflow,"debug",arguments)}function a_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yC(e){const t=Bu(e),n=a_(t.r),i=a_(t.g),r=a_(t.b);return .2126*n+.7152*i+.0722*r}function Jhe(e,t){const n=yC(e),i=yC(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function e0e(){const e=[].slice.call(arguments);return e.unshift({}),He(...e)}function MP(e,t){return e===t||e!==e&&t!==t?!0:we(e)?we(t)&&e.length===t.length?t0e(e,t):!1:Ue(e)&&Ue(t)?TP(e,t):!1}function t0e(e,t){for(let n=0,i=e.length;n<i;++n)if(!MP(e[n],t[n]))return!1;return!0}function TP(e,t){for(const n in e)if(!MP(e[n],t[n]))return!1;return!0}function qR(e){return t=>TP(e,t)}function n0e(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(h=n===!0?Zr:we(n)||jb(n)?n:qR(n),d.remove(h)),t&&d.insert(t),i&&(h=qR(i),l.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function i0e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function r0e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const HR={};function a0e(e,t){const n=HR[t]||(HR[t]=Qr(t));return we(e)?e.map(n):n(e)}function kM(e){return we(e)||ArrayBuffer.isView(e)?e:null}function FM(e){return kM(e)||(ut(e)?e:null)}function s0e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return kM(e).join(...n)}function o0e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return FM(e).indexOf(...n)}function u0e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return FM(e).lastIndexOf(...n)}function l0e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return FM(e).slice(...n)}function c0e(e,t,n){return Ye(n)&&ne("Function argument passed to replace."),String(e).replace(t,n)}function f0e(e){return kM(e).slice().reverse()}function d0e(e,t,n){return GD(e||0,t||0,n||0)}function h0e(e,t){const n=Cs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function g0e(e,t){const n=Cs(e,(t||this).context);return n?n.copy():void 0}function p0e(e,t){const n=Cs(e,(t||this).context);return n?n.domain():[]}function m0e(e,t,n){const i=Cs(e,(n||this).context);return i?we(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function y0e(e,t){const n=Cs(e,(t||this).context);return n&&n.range?n.range():[]}function v0e(e,t,n){const i=Cs(e,(n||this).context);return i?i(t):void 0}function b0e(e,t,n,i,r){e=Cs(e,(r||this).context);const a=bU(t,n);let s=e.domain(),o=s[0],l=nt(s),f=Ni;return l-o?f=oU(e,o,l):e=(e.interpolator?gt("sequential")().interpolator(e.interpolator()):gt("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==nt(s)&&s.push(l)),s.forEach(d=>a.stop(f(d),e(d))),a}function x0e(e,t,n){const i=Cs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function E0e(e){let t=null;return function(n){return n?Vg(n,t=t||Td(e)):e}}const kP=e=>e.data;function FP(e,t){const n=CP.call(t,e);return n.root&&n.root.lookup||{}}function A0e(e,t,n){const i=FP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(kP):void 0}function S0e(e,t){const n=FP(e,this)[t];return n?n.ancestors().map(kP):void 0}const OP=()=>typeof window<"u"&&window||null;function _0e(){const e=OP();return e?e.screen:{}}function w0e(){const e=OP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function C0e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function NP(e,t,n){if(!e)return[];const[i,r]=e,a=new mn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return mI(s,a,D0e(t))}function D0e(e){let t=null;if(e){const n=ke(e.marktype),i=ke(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function $0e(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ke(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function M0e(e){return ke(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function T0e(e,t,n){const{x:i,y:r,mark:a}=n,s=new mn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),NP([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>k0e(l.x,l.y,t))}function k0e(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,f]=n[r];f>t!=o>t&&e<(s-l)*(t-f)/(o-f)+l&&i++}return i&1}const ap={random(){return Jr()},cumulativeNormal:Yb,cumulativeLogNormal:G3,cumulativeUniform:W3,densityNormal:I3,densityLogNormal:H3,densityUniform:V3,quantileNormal:Xb,quantileLogNormal:Y3,quantileUniform:Q3,sampleNormal:Gb,sampleLogNormal:q3,sampleUniform:X3,isArray:we,isBoolean:y3,isDate:Cu,isDefined(e){return e!==void 0},isNumber:Fu,isObject:Ue,isRegExp:I7,isString:ut,isTuple:jb,isValid(e){return e!=null&&e===e},toBoolean:b3,toDate(e){return x3(e)},toNumber:fi,toString:E3,indexof:o0e,join:s0e,lastindexof:u0e,replace:c0e,reverse:f0e,slice:l0e,flush:L7,lerp:j7,merge:e0e,pad:H7,peek:nt,pluck:a0e,span:xp,inrange:nd,truncate:G7,rgb:Bu,lab:uv,hcl:lv,hsl:sv,luminance:yC,contrast:Jhe,sequence:Er,format:Ohe,utcFormat:Nhe,utcParse:zhe,utcOffset:_z,utcSequence:Dz,timeFormat:DP,timeParse:Rhe,timeOffset:Sz,timeSequence:Cz,timeUnitSpecifier:dz,monthFormat:Bhe,monthAbbrevFormat:Lhe,dayFormat:Uhe,dayAbbrevFormat:Ihe,quarter:N7,utcquarter:R7,week:gz,utcweek:yz,dayofyear:hz,utcdayofyear:mz,warn:Qhe,info:Zhe,debug:Khe,extent(e){return fs(e)},inScope:Whe,intersect:NP,clampRange:z7,pinchDistance:i0e,pinchAngle:r0e,screen:_0e,containerSize:C0e,windowSize:w0e,bandspace:d0e,setdata:khe,pathShape:E0e,panLinear:T7,panLog:k7,panPow:F7,panSymlog:O7,zoomLinear:d3,zoomLog:h3,zoomPow:Xy,zoomSymlog:g3,encode:Fhe,modify:n0e,lassoAppend:$0e,lassoPath:M0e,intersectLasso:T0e},F0e=["view","item","group","xy","x","y"],O0e="event.vega.",RP="this.",OM={},zP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${_e($P+e)}]`,functions:N0e,constants:EP,visitors:OM},vC=SP(zP);function N0e(e){const t=AP(e);F0e.forEach(n=>t[n]=O0e+n);for(const n in ap)t[n]=RP+n;return He(t,Hhe(e,ap,OM)),t}function ln(e,t,n){return arguments.length===1?ap[e]:(ap[e]=t,n&&(OM[e]=n),vC&&(vC.functions[e]=RP+e),this)}ln("bandwidth",h0e,Oi);ln("copy",g0e,Oi);ln("domain",p0e,Oi);ln("range",y0e,Oi);ln("invert",m0e,Oi);ln("scale",v0e,Oi);ln("gradient",b0e,Oi);ln("geoArea",Ghe,Oi);ln("geoBounds",Yhe,Oi);ln("geoCentroid",Xhe,Oi);ln("geoShape",x0e,Oi);ln("geoScale",Vhe,Oi);ln("indata",The,qhe);ln("data",CP,$M);ln("treePath",A0e,$M);ln("treeAncestors",S0e,$M);ln("vlSelectionTest",Ahe,DM);ln("vlSelectionIdTest",whe,DM);ln("vlSelectionResolve",Dhe,DM);ln("vlSelectionTuples",Che);function ms(e,t){const n={};let i;try{e=ut(e)?e:_e(e)+"",i=xP(e)}catch{ne("Expression parse error: "+e)}i.visit(a=>{if(a.type!==hP)return;const s=a.callee.name,o=zP.visitors[s];o&&o(s,a.arguments,t,n)});const r=vC(i);return r.globals.forEach(a=>{const s=$P+a;!Ne(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:He({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function R0e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const z0e=wa(["rule"]),GR=wa(["group","image","rect"]);function B0e(e,t){let n="";return z0e[t]||(e.x2&&(e.x?(GR[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(GR[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function NM(e){return(e+"").toLowerCase()}function L0e(e){return NM(e)==="operator"}function U0e(e){return NM(e)==="collect"}function I0(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function I0e(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var j0e={operator:(e,t)=>I0(e,["_"],t.code),parameter:(e,t)=>I0(e,["datum","_"],t.code),event:(e,t)=>I0(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return I0(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+_e(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=B0e(i,n),r+="return m;",I0(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(_e).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,f=`this.f${s}(b)`),I0e(l,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function P0e(e){const t=this;L0e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function q0e(e){const t=this;if(e.params){const n=t.get(e.id);n||ne("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function H0e(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=we(r)?r.map(a=>YR(a,n,t)):YR(r,n,t)}return t}function YR(e,t,n){if(!e||!Ue(e))return e;for(let i=0,r=XR.length,a;i<r;++i)if(a=XR[i],Ne(e,a.key))return a.parse(e,t,n);return e}var XR=[{key:"$ref",parse:G0e},{key:"$key",parse:X0e},{key:"$expr",parse:Y0e},{key:"$field",parse:V0e},{key:"$encode",parse:Q0e},{key:"$compare",parse:W0e},{key:"$context",parse:Z0e},{key:"$subflow",parse:K0e},{key:"$tupleid",parse:J0e}];function G0e(e,t){return t.get(e.$ref)||ne("Operator not defined: "+e.$ref)}function Y0e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ar(t.parameterExpression(e.$expr),e.$fields))}function X0e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=v3(e.$key,e.$flat,t.expr.codegen))}function V0e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Qr(e.$field,e.$name,t.expr.codegen))}function W0e(e,t){const n="c:"+e.$compare+"_"+e.$order,i=ke(e.$compare).map(r=>r&&r.$tupleid?Me:r);return t.fn[n]||(t.fn[n]=p3(i,e.$order,t.expr.codegen))}function Q0e(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=ar(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Z0e(e,t){return t}function K0e(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function J0e(){return Me}function ege(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ne("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function tge(e){var t=this,n=Ue(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ne("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const nge={skip:!0};function ige(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function rge(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],nge)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Zr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function BP(e,t,n,i){return new LP(e,t,n,i)}function LP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||j0e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function VR(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}LP.prototype=VR.prototype={fork(){const e=new VR(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),U0e(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[NM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:R0e,parseOperator:P0e,parseOperatorParameters:q0e,parseParameters:H0e,parseStream:ege,parseUpdate:tge,getState:ige,setState:rge};function age(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),UP(t,e.description()))}function UP(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function sge(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const s_="default";function oge(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:s_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?ut(r)?r:r.user:s_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return ut(i)||(r=i.item,i=i.user),bC(e,i&&i!==s_?i:r||i),r},{cursor:t})}function bC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function ib(e,t){var n=e._runtime.data;return Ne(n,t)||ne("Unrecognized data set: "+t),n[t]}function uge(e,t){return arguments.length<2?ib(this,e).values.value:O2.call(this,e,Nc().remove(Zr).insert(t))}function O2(e,t){eB(t)||ne("Second argument to changes must be a changeset.");const n=ib(this,e);return n.modified=!0,this.pulse(n.input,t)}function lge(e,t){return O2.call(this,e,Nc().insert(t))}function cge(e,t){return O2.call(this,e,Nc().remove(t))}function IP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function jP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function N2(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function fge(e){var t=N2(e),n=IP(e),i=jP(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function dge(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=N2(e),s=t.changedTouches?t.changedTouches[0]:t,a=x2(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=hge(e,n,a),t}function hge(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;ut(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:bi(e),item:bi(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const WR="view",gge="timer",pge="window",mge={trap:!1};function yge(e){const t=He({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{we(i[a])&&(i[a]=wa(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function PP(e,t,n,i){e._eventListeners.push({type:n,sources:ke(t),handler:i})}function vge(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function ny(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ue(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function bge(e,t,n){var i=this,r=new Hb(n),a=function(f,d){i.runAsync(null,()=>{e===WR&&vge(i,t)&&f.preventDefault(),r.receive(dge(i,f,d))})},s;if(e===gge)ny(i,"timer",t)&&i.timer(a,t);else if(e===WR)ny(i,"view",t)&&i.addEventListener(t,a,mge);else if(e===pge?ny(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&ny(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);PP(i,s,t,a)}return r}function QR(e){return e.item}function ZR(e){return e.item.mark.source}function KR(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function xge(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",QR),ZR,KR(e)),this.on(this.events("view","pointerout",QR),ZR,KR(t)),this}function Ege(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function _r(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Age="vega-bind",Sge="vega-bind-name",_ge="vega-bind-radio";function wge(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=m3(i.debounce,r.update))),(i.input==null&&i.element?Cge:$ge)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Cge(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),PP(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Dge(r))}}function Dge(e){return typeof Event<"u"?new Event(e):{type:e}}function $ge(e,t,n,i){const r=i.signal(n.signal),a=_r("div",{class:Age}),s=n.input==="radio"?a:a.appendChild(_r("label"));s.appendChild(_r("span",{class:Sge},n.name||n.signal)),t.appendChild(a);let o=Mge;switch(n.input){case"checkbox":o=Tge;break;case"select":o=kge;break;case"radio":o=Fge;break;case"range":o=Oge;break}o(e,s,n,r)}function Mge(e,t,n,i){const r=_r("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Tge(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=_r("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function kge(e,t,n,i){const r=_r("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};rb(s,i)&&(l.selected=!0),r.appendChild(_r("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(rb(n.options[o],s)){r.selectedIndex=o;return}}}function Fge(e,t,n,i){const r=_r("span",{class:_ge}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};rb(s,i)&&(l.checked=!0);const f=_r("input",l);f.addEventListener("change",()=>e.update(s));const d=_r("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,l=o.length;for(let f=0;f<l;++f)rb(o[f].value,s)&&(o[f].checked=!0)}}function Oge(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||Nu(a,r,100),o=_r("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=_r("span",{},+i);t.appendChild(o),t.appendChild(l);const f=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function rb(e,t){return e===t||e+""==t+""}function qP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,IP(e),jP(e),N2(e),r,a).background(e.background())}function RM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Nge(e,t,n,i){const r=new i(e.loader(),RM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,N2(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Rge(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=E2(i);e=n._el=e?o_(n,e,!0):null,age(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Up,o=e?a.renderer:a.headless;return n._renderer=o?qP(n,n._renderer,e,o):null,n._handler=Nge(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=o_(n,t,!0):e.appendChild(_r("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=o_(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{wge(n,l.element||t,l)})),n}function o_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const j0=e=>+e||0,zge=e=>({top:e,bottom:e,left:e,right:e});function JR(e){return Ue(e)?{top:j0(e.top),bottom:j0(e.bottom),left:j0(e.left),right:j0(e.right)}:zge(j0(e))}async function zM(e,t,n,i){const r=E2(t),a=r&&r.headless;return a||ne("Unrecognized renderer type: "+t),await e.runAsync(),qP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Bge(e,t){e!==xu.Canvas&&e!==xu.SVG&&e!==xu.PNG&&ne("Unrecognized image type: "+e);const n=await zM(this,e,t);return e===xu.SVG?Lge(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Lge(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Uge(e,t){return(await zM(this,xu.Canvas,e,t)).canvas()}async function Ige(e){return(await zM(this,xu.SVG,e)).svg()}function jge(e,t,n){return BP(e,_d,ap,n).parse(t)}function Pge(e){var t=this._runtime.scales;return Ne(t,e)||ne("Unrecognized scale or projection: "+e),t[e].value}var HP="width",GP="height",BM="padding",e8={skip:!0};function YP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===BM?i.left+i.right:0)}function XP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===BM?i.top+i.bottom:0)}function qge(e){var t=e._signals,n=t[HP],i=t[GP],r=t[BM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=YP(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=XP(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function Hge(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(HP,n,e8),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(GP,i,e8),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function Gge(e){return this._runtime.getState(e||{data:Yge,signals:Xge,recurse:!0})}function Yge(e,t){return t.modified&&we(t.input.value)&&!e.startsWith("_:vega:_")}function Xge(e,t){return!(e==="parent"||t instanceof _d.proxy)}function Vge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Wge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(cle(n,t))}function Qge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Zge(i))}function Zge(e){return e==null?"":we(e)?VP(e):Ue(e)&&!Cu(e)?Kge(e):e+""}function Kge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(we(n)?VP(n):WP(n))}).join(`
`)}function VP(e){return"["+e.map(WP).join(", ")+"]"}function WP(e){return we(e)?"[]":Ue(e)&&!Cu(e)?"{}":e}function Jge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function QP(e,t){const n=this;if(t=t||{},ud.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=He({},e.locale,t.locale);n.locale(Hz(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||xu.Canvas,n._scenegraph=new qU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Qge,n._redraw=!0,n._handler=new Up().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=yge(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=jge(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:He({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=YP(n,n._width),n._viewHeight=XP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,qge(n),sge(n),oge(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function iy(e,t){return Ne(e._signals,t)?e._signals[t]:ne("Unrecognized signal name: "+_e(t))}function ZP(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function t8(e,t,n,i){let r=ZP(n,i);return r||(r=RM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function n8(e,t,n){const i=ZP(t,n);return i&&t._targets.remove(i),e}pe(QP,ud,{async evaluate(e,t,n){if(await ud.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,fge(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&vy(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&UP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=iy(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",JR(e)):JR(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(E2(e)||ne("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(ud.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(iy(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Hge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=RM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return t8(this,e,iy(this,e),t)},removeSignalListener(e,t){return n8(this,iy(this,e),t)},addDataListener(e,t){return t8(this,e,ib(this,e).values,t)},removeDataListener(e,t){return n8(this,ib(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=bC(this,null);this._globalCursor=!!e,t&&bC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Wge,events:bge,finalize:Ege,hover:xge,data:uge,change:O2,insert:lge,remove:cge,scale:Pge,initialize:Rge,toImageURL:Bge,toCanvas:Uge,toSVG:Ige,getState:Gge,setState:Vge,_watchPixelRatio:Jge});const epe="view",ab="[",sb="]",KP="{",JP="}",tpe=":",eq=",",npe="@",ipe=">",rpe=/[[\]{}]/,ape={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let tq,nq;function iq(e,t,n){return tq=t||epe,nq=n||ape,rq(e.trim()).map(xC)}function spe(e){return nq[e]}function Fg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.indexOf(o)>=0?--s:i&&i.indexOf(o)>=0&&++s}return t}function rq(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Fg(e,r,eq,ab+KP,sb+JP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function xC(e){return e[0]==="["?ope(e):upe(e)}function ope(e){const t=e.length;let n=1,i;if(n=Fg(e,n,sb,ab,sb),n===t)throw"Empty between selector: "+e;if(i=rq(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ipe)throw"Expected '>' after between selector: "+e;i=i.map(xC);const r=xC(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function upe(e){const t={source:tq},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===JP){if(o=e.lastIndexOf(KP),o>=0){try{i=lpe(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===npe&&(r=++o),l=Fg(e,o,tpe),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=Fg(e,o,ab),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Fg(e,o,sb),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==ab)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||rpe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):spe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function lpe(e){const t=e.split(eq);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function cpe(e){return Ue(e)?e:{type:e||"pad"}}const P0=e=>+e||0,fpe=e=>({top:e,bottom:e,left:e,right:e});function dpe(e){return Ue(e)?e.signal?e:{top:P0(e.top),bottom:P0(e.bottom),left:P0(e.left),right:P0(e.right)}:fpe(P0(e))}const zn=e=>Ue(e)&&!we(e)?He({},e):{value:e};function i8(e,t,n,i){return n!=null?(Ue(n)&&!we(n)||we(n)&&n.length&&Ue(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function ei(e,t,n){for(const i in t)i8(e,i,t[i]);for(const i in n)i8(e,i,n[i],"update")}function hh(e,t,n){for(const i in t)n&&Ne(n,i)||(e[i]=He(e[i]||{},t[i]));return e}function Jf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const LM="mark",UM="frame",IM="scope",hpe="axis",gpe="axis-domain",ppe="axis-grid",mpe="axis-label",ype="axis-tick",vpe="axis-title",bpe="legend",xpe="legend-band",Epe="legend-entry",Ape="legend-gradient",aq="legend-label",Spe="legend-symbol",_pe="legend-title",wpe="title",Cpe="title-text",Dpe="title-subtitle";function $pe(e,t,n,i,r){const a={},s={};let o,l,f,d;l="lineBreak",t==="text"&&r[l]!=null&&!Jf(l,e)&&u_(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===UM?r.group:n===LM?He({},r.mark,r[t]):null;for(l in d)f=Jf(l,e)||(l==="fill"||l==="stroke")&&(Jf("fill",e)||Jf("stroke",e)),f||u_(a,l,d[l]);ke(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)Jf(y,e)||u_(a,y,p[y])}),e=He({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=He(s,e.enter),o&&(e.update=He(o,e.update)),e}function u_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const sq=e=>ut(e)?_e(e):e.signal?`(${e.signal})`:oq(e);function R2(e){if(e.gradient!=null)return Tpe(e);let t=e.signal?`(${e.signal})`:e.color?Mpe(e.color):e.field!=null?oq(e.field):e.value!==void 0?_e(e.value):void 0;return e.scale!=null&&(t=kpe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${zy(e.exponent)})`),e.mult!=null&&(t+=`*${zy(e.mult)}`),e.offset!=null&&(t+=`+${zy(e.offset)}`),e.round&&(t=`round(${t})`),t}const ry=(e,t,n,i)=>`(${e}(${[t,n,i].map(R2).join(",")})+'')`;function Mpe(e){return e.c?ry("hcl",e.h,e.c,e.l):e.h||e.s?ry("hsl",e.h,e.s,e.l):e.l||e.a?ry("lab",e.l,e.a,e.b):e.r||e.g||e.b?ry("rgb",e.r,e.g,e.b):null}function Tpe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:_e(n));for(;t.length&&nt(t)==null;)t.pop();return t.unshift(sq(e.gradient)),`gradient(${t.join(",")})`}function zy(e){return Ue(e)?"("+R2(e)+")":e}function oq(e){return uq(Ue(e)?e:{datum:e})}function uq(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ne("Invalid field reference: "+_e(e));return e.signal||(i=ut(i)?$b(i).map(_e).join("]["):uq(i)),t+"["+i+"]"}function kpe(e,t){const n=sq(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+zy(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Fpe(e){let t="";return e.forEach(n=>{const i=R2(n);t+=n.test?`(${n.test})?${i}:`:i}),nt(t)===":"&&(t+="null"),t}function lq(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=$pe(e,t,n,i,r.config);for(const o in e)s[o]=Ope(e[o],t,a,r);return a}function Ope(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=Rpe(Npe(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Npe(e){return we(e)?Fpe(e):R2(e)}function Rpe(e,t,n,i){const r=ms(e,t);return r.$fields.forEach(a=>i[a]=1),He(n,r.$params),r.$expr}const zpe="outer",Bpe=["value","update","init","react","bind"];function r8(e,t){ne(e+' for "outer" push: '+_e(t))}function cq(e,t){const n=e.name;if(e.push===zpe)t.signals[n]||r8("No prior signal definition",n),Bpe.forEach(i=>{e[i]!==void 0&&r8("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function EC(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function z2(e,t,n,i){return new EC(e,t,n,i)}function ob(e,t){return z2("operator",e,t)}function $e(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function sp(e,t){return t?{$field:e,$name:t}:{$field:e}}const AC=sp("key");function a8(e,t){return{$compare:e,$order:t}}function Lpe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Upe="ascending",Ipe="descending";function jpe(e){return Ue(e)?(e.order===Ipe?"-":"+")+B2(e.op,e.field):""}function B2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const jM="scope",SC="view";function Sn(e){return e&&e.signal}function Ppe(e){return e&&e.expr}function By(e){if(Sn(e))return!0;if(Ue(e)){for(const t in e)if(By(e[t]))return!0}return!1}function ga(e,t){return e??t}function nc(e){return e&&e.signal||e}const s8="timer";function op(e,t){return(e.merge?Hpe:e.stream?Gpe:e.type?Ype:ne("Invalid stream specification: "+_e(e)))(e,t)}function qpe(e){return e===jM?SC:e||SC}function Hpe(e,t){const n=e.merge.map(r=>op(r,t)),i=PM({merge:n},e,t);return t.addStream(i).id}function Gpe(e,t){const n=op(e.stream,t),i=PM({stream:n},e,t);return t.addStream(i).id}function Ype(e,t){let n;e.type===s8?(n=t.event(s8,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(qpe(e.source),e.type);const i=PM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function PM(e,t,n){let i=t.between;return i&&(i.length!==2&&ne('Stream "between" parameter must have 2 entries: '+_e(t)),e.between=[op(i[0],n),op(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Xpe(t.marktype,t.markname,t.markrole)),t.source===jM&&i.push("inScope(event.item)"),i.length&&(e.filter=ms("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Xpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Vpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Wpe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||ne("Signal update missing events specification."),ut(a)&&(a=iq(a,t.isSubscope()?jM:SC)),a=ke(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[Zpe(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ne("Signal encode and update are mutually exclusive."),s="encode(item(),"+_e(i)+")"),r.update=ut(s)?ms(s,t):s.expr!=null?ms(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Vpe,$params:{$value:t.signalRef(s.signal)}}:ne("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(He(Qpe(l,t),r)))}function Qpe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):op(e,t)}}function Zpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Kpe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ne("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=ms(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Wpe(r,t,n.id))}const Tt=e=>(t,n,i)=>z2(e,n,t||void 0,i),fq=Tt("aggregate"),Jpe=Tt("axisticks"),dq=Tt("bound"),Oa=Tt("collect"),o8=Tt("compare"),eme=Tt("datajoin"),hq=Tt("encode"),tme=Tt("expression"),nme=Tt("facet"),ime=Tt("field"),rme=Tt("key"),ame=Tt("legendentries"),sme=Tt("load"),ome=Tt("mark"),ume=Tt("multiextent"),lme=Tt("multivalues"),cme=Tt("overlap"),fme=Tt("params"),gq=Tt("prefacet"),dme=Tt("projection"),hme=Tt("proxy"),gme=Tt("relay"),pq=Tt("render"),pme=Tt("scale"),Lc=Tt("sieve"),mme=Tt("sortitems"),mq=Tt("viewlayout"),yme=Tt("values");let vme=0;const yq={min:"min",max:"max",count:"sum"};function bme(e,t){const n=e.type||"linear";tU(n)||ne("Unrecognized scale type: "+_e(n)),t.addScale(e.name,{type:n,domain:void 0})}function xme(e,t){const n=t.getScale(e.name).params;let i;n.domain=vq(e.domain,e,t),e.range!=null&&(n.range=xq(e,t,n)),e.interpolate!=null&&Tme(e.interpolate,n),e.nice!=null&&(n.nice=Mme(e.nice,t)),e.bins!=null&&(n.bins=$me(e.bins,t));for(i in e)Ne(n,i)||i==="name"||(n[i]=Yr(e[i],t))}function Yr(e,t){return Ue(e)?e.signal?t.signalRef(e.signal):ne("Unsupported object: "+_e(e)):e}function Ly(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Yr(n,t))}function L2(e){ne("Can not find data set: "+_e(e))}function vq(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ne("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(we(e)?Eme:e.fields?Sme:Ame)(e,t,n)}function Eme(e,t,n){return e.map(i=>Yr(i,n))}function Ame(e,t,n){const i=n.getData(e.data);return i||L2(e.data),Md(t.type)?i.valuesRef(n,e.field,bq(e.sort,!1)):rU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Sme(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=ut(s)?{data:i,field:s}:we(s)||s.signal?_me(s,n):s,a.push(s),a),[]);return(Md(t.type)?wme:rU(t.type)?Cme:Dme)(e,n,r)}function _me(e,t){const n="_:vega:_"+vme++,i=Oa({});if(we(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+_e(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Lc({})]),{data:n,field:"data"}}function wme(e,t,n){const i=bq(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||L2(f.data),d.countsRef(t,f.field,i)}),o={groupby:AC,pulse:s};i&&(r=i.op||"count",a=i.field?B2(r,i.field):"count",o.ops=[yq[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(fq(o));const l=t.add(Oa({pulse:$e(r)}));return a=t.add(yme({field:AC,sort:t.sortRef(i),pulse:$e(l)})),$e(a)}function bq(e,t){return e&&(!e.field&&!e.op?Ue(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ne("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!yq[e.op]&&ne("Multiple domain scales can not be sorted using "+e.op)),e}function Cme(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||L2(r.data),a.domainRef(t,r.field)});return $e(t.add(lme({values:i})))}function Dme(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||L2(r.data),a.extentRef(t,r.field)});return $e(t.add(ume({extents:i})))}function $me(e,t){return e.signal||we(e)?Ly(e,t):t.objectProperty(e)}function Mme(e,t){return e.signal?t.signalRef(e.signal):Ue(e)?{interval:Yr(e.interval),step:Yr(e.step)}:Yr(e)}function Tme(e,t){t.interpolate=Yr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Yr(e.gamma))}function xq(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(ut(r)){if(i&&Ne(i,r))return e=He({},e,{range:i[r]}),xq(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Md(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ne("Unrecognized scale range value: "+_e(r))}else if(r.scheme){n.scheme=we(r.scheme)?Ly(r.scheme,t):Yr(r.scheme,t),r.extent&&(n.schemeExtent=Ly(r.extent,t)),r.count&&(n.schemeCount=Yr(r.count,t));return}else if(r.step){n.rangeStep=Yr(r.step,t);return}else{if(Md(e.type)&&!we(r))return vq(r,e,t);we(r)||ne("Unsupported range type: "+_e(r))}return r.map(a=>(we(a)?Ly:Yr)(a,t))}function kme(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=_C(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=_C(n[r],r,t));t.addProjection(e.name,i)}function _C(e,t,n){return we(e)?e.map(i=>_C(i,t,n)):Ue(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ne("Unsupported parameter object: "+_e(e)):e}const Na="top",gh="left",ph="right",Pu="bottom",Eq="center",Fme="vertical",Ome="start",Nme="middle",Rme="end",wC="index",qM="label",zme="offset",Ud="perc",Bme="perc2",Vr="value",Vp="guide-label",HM="guide-title",Lme="group-title",Ume="group-subtitle",u8="symbol",Uy="gradient",CC="discrete",DC="size",Ime="shape",jme="fill",Pme="stroke",qme="strokeWidth",Hme="strokeDash",Gme="opacity",GM=[DC,Ime,jme,Pme,qme,Hme,Gme],Wp={name:1,style:1,interactive:1},rt={value:0},Wr={value:1},U2="group",Aq="rect",YM="rule",Yme="symbol",Uc="text";function up(e){return e.type=U2,e.interactive=e.interactive||!1,e}function sr(e,t){const n=(i,r)=>ga(e[i],ga(t[i],r));return n.isVertical=i=>Fme===ga(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ga(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ga(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ga(e.columns,ga(t.columns,+n.isVertical(!0))),n}function Sq(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Xme(e,t,n){const i=t.config.style[n];return i&&i[e]}function I2(e,t,n){return`item.anchor === '${Ome}' ? ${e} : item.anchor === '${Rme}' ? ${t} : ${n}`}const XM=I2(_e(gh),_e(ph),_e(Eq));function Vme(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ue(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function _q(e,t){return t?e?Ue(e)?Object.assign({},e,{offset:_q(e.offset,t)}):{value:e,offset:t}:t:e}function Tr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=hh(e.encode,t,Wp)):e.interactive=!1,e}function Wme(e,t,n,i){const r=sr(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:l={opacity:rt,x:rt,y:rt,width:zn(h),height:zn(p)},update:He({},l,{opacity:Wr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:rt}};return ei(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Tr({type:Aq,role:Ape,encode:y},i)}function Qme(e,t,n,i,r){const a=sr(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:rt,fill:{scale:t,field:Vr}};v[f]={signal:y+"datum."+Ud,mult:l},v[d]=rt,v[h]={signal:y+"datum."+Bme,mult:l},v[p]=zn(o);const b={enter:v,update:He({},v,{opacity:Wr}),exit:{opacity:rt}};return ei(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Tr({type:Aq,role:xpe,key:Vr,from:r,encode:b},i)}const Zme=`datum.${Ud}<=0?"${gh}":datum.${Ud}>=1?"${ph}":"${Eq}"`,Kme=`datum.${Ud}<=0?"${Pu}":datum.${Ud}>=1?"${Na}":"${Nme}"`;function l8(e,t,n,i){const r=sr(e,t),a=r.isVertical(),s=zn(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:rt},update:d={opacity:Wr,text:{field:qM}},exit:{opacity:rt}};return ei(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:ga(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:Kme},h="y",p="x",y="1-"):(f.align=d.align={signal:Zme},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+Ud,mult:o},f[p]=d[p]=s,s.offset=ga(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+wC}:void 0,Tr({type:Uc,role:aq,style:Vp,key:Vr,from:i,encode:v,overlap:l},n)}function Jme(e,t,n,i,r){const a=sr(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${zme} : datum.${DC}`,y=f?zn(f):{field:DC},v=`datum.${wC}`,b=`max(1, ${r})`;let E,S,_,w,C;y.mult=.5,E={enter:S={opacity:rt,x:{signal:p,mult:.5,offset:d},y},update:_={opacity:Wr,x:S.x,y:S.y},exit:{opacity:rt}};let $=null,T=null;e.fill||($=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),ei(E,{fill:a("symbolFillColor",$),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",T),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),GM.forEach(U=>{e[U]&&(_[U]=S[U]={scale:e[U],field:Vr})});const D=Tr({type:Yme,role:Spe,key:Vr,from:h,clip:f?!0:void 0,encode:E},n.symbols),F=zn(d);F.offset=a("labelOffset"),E={enter:S={opacity:rt,x:{signal:p,offset:F},y},update:_={opacity:Wr,text:{field:qM},x:S.x,y:S.y},exit:{opacity:rt}},ei(E,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const O=Tr({type:Uc,role:aq,style:Vp,key:Vr,from:h,encode:E},n.labels);return E={enter:{noBound:{value:!f},width:rt,height:f?zn(f):rt,opacity:rt},exit:{opacity:rt},update:_={opacity:Wr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(w=`ceil(item.mark.items.length / ${b})`,_.row.signal=`${v}%${w}`,_.column.signal=`floor(${v} / ${w})`,C={field:["row",v]}):(_.row.signal=`floor(${v} / ${b})`,_.column.signal=`${v} % ${b}`,C={field:v}),_.column.signal=`(${r})?${_.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:wC}},up({role:IM,from:i,encode:hh(E,s,Wp),marks:[D,O],name:l,interactive:o,sort:C})}function e1e(e,t){const n=sr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const VM='item.orient === "left"',WM='item.orient === "right"',j2=`(${VM} || ${WM})`,t1e=`datum.vgrad && ${j2}`,n1e=I2('"top"','"bottom"','"middle"'),i1e=I2('"right"','"left"','"center"'),r1e=`datum.vgrad && ${WM} ? (${i1e}) : (${j2} && !(datum.vgrad && ${VM})) ? "left" : ${XM}`,a1e=`item._anchor || (${j2} ? "middle" : "start")`,s1e=`${t1e} ? (${VM} ? -90 : 90) : 0`,o1e=`${j2} ? (datum.vgrad ? (${WM} ? "bottom" : "top") : ${n1e}) : "top"`;function u1e(e,t,n,i){const r=sr(e,t),a={enter:{opacity:rt},update:{opacity:Wr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:rt}};return ei(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:a1e},angle:{signal:s1e},align:{signal:r1e},baseline:{signal:o1e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Tr({type:Uc,role:_pe,style:HM,from:i,encode:a},n)}function l1e(e,t){let n;return Ue(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+c8(e.path)+")":e.sphere&&(n="geoShape("+c8(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function c8(e){return Ue(e)&&e.signal?e.signal:_e(e)}function wq(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===U2?IM:t||LM}function c1e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||wq(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function f1e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function QM(e,t){const n=iB(e.type);n||ne("Unrecognized transform type: "+_e(e.type));const i=z2(n.type.toLowerCase(),null,Cq(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Cq(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=d1e(s,t,n)}return i}function d1e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return h1e(e,t,n);if(r===void 0){e.required&&ne("Missing required "+_e(t.type)+" parameter: "+_e(e.name));return}else{if(i==="param")return g1e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!Sn(r)?r.map(a=>f8(e,a,n)):f8(e,r,n)}function f8(e,t,n){const i=e.type;if(Sn(t))return h8(i)?ne("Expression references can not be signals."):l_(i)?n.fieldRef(t):g8(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||l_(i);return r&&p1e(t)?n.exprRef(t.expr,t.as):r&&m1e(t)?sp(t.field,t.as):h8(i)?ms(t,n):y1e(i)?$e(n.getData(t).values):l_(i)?sp(t):g8(i)?n.compareRef(t):t}}function h1e(e,t,n){return ut(t.from)||ne('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function g1e(e,t,n){const i=t[e.name];return e.array?(we(i)||ne("Expected an array of sub-parameters. Instead: "+_e(i)),i.map(r=>d8(e,r,n))):d8(e,i,n)}function d8(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||ne("Unsupported parameter: "+_e(t));const a=He(Cq(r,t,n),r.key);return $e(n.add(fme(a)))}const p1e=e=>e&&e.expr,m1e=e=>e&&e.field,y1e=e=>e==="data",h8=e=>e==="expr",l_=e=>e==="field",g8=e=>e==="compare";function v1e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||ne("Only group marks can be faceted."),i.field!=null?s=o=Iy(i,n):(e.data?o=$e(n.getData(e.data).aggregate):(a=QM(He({type:"aggregate",groupby:ke(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=Iy(i,n),s=o=$e(n.add(a))),r=n.keyRef(i.groupby,!0))):s=$e(n.add(Oa(null,[{}]))),s||(s=Iy(e,n)),{key:r,pulse:s,parent:o}}function Iy(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$e(t.getData(e.data).output)}function yc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}yc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=$e(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new yc(e,a,r,i,s)};function Dq(e){return ut(e)?e:null}function p8(e,t,n){const i=B2(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function q0(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=jpe(a);let f=Dq(r),d,h;if(f!=null&&(e=t.scope,f=f+(l?"|"+l:""),d=o[f]),!d){const p=a?{field:AC,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:$e(t.output)};l&&(p.sort=e.sortRef(a)),h=e.add(z2(i,void 0,p)),s&&(t.index[r]=h),d=$e(h),f!=null&&(o[f]=d)}return d}yc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=Dq(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&p8(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:$e(i.output)},n&&n.field&&p8(e,l,n),o=e.add(fq(l)),s=e.add(Oa({pulse:$e(o)})),s={agg:o,ref:$e(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return $e(this.values)},extentRef(e,t){return q0(e,this,"extent","extent",t,!1)},domainRef(e,t){return q0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return q0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return q0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return q0(e,this,"indata","tupleindex",t,!0,!0)}};function b1e(e,t,n){const i=e.from.facet,r=i.name,a=Iy(i,t);let s;i.name||ne("Facet must have a name: "+_e(i)),i.data||ne("Facet must reference a data set: "+_e(i)),i.field?s=t.add(gq({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(nme({key:t.keyRef(i.groupby),group:$e(t.proxy(n.parent)),pulse:a})):ne("Facet must specify groupby or field: "+_e(i));const o=t.fork(),l=o.add(Oa()),f=o.add(Lc({pulse:$e(l)}));o.addData(r,new yc(o,l,l,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function x1e(e,t,n){const i=t.add(gq({pulse:n.pulse})),r=t.fork();r.add(Lc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function $q(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(ob()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=ms(f,t);l.update=d.$expr,l.params=d.$params}function P2(e,t){const n=wq(e),i=e.type===U2,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===IM||n===UM,o,l,f,d,h,p,y;const v=n===LM||s||r,b=v1e(e.from,i,t);l=t.add(eme({key:b.key||(e.key?sp(e.key):void 0),pulse:b.pulse,clean:!i}));const E=$e(l);l=f=t.add(Oa({pulse:E})),l=t.add(ome({markdef:c1e(e),interactive:f1e(e.interactive,t),clip:l1e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$e(l)}));const S=$e(l);l=d=t.add(hq(lq(e.encode,e.type,n,e.style,t,{mod:!1,pulse:S}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const D=QM(T,t),F=D.metadata;(F.generates||F.changes)&&ne("Mark transforms should not generate new data."),F.nomod||(d.params.mod=!0),D.params.pulse=$e(l),t.add(l=D)}),e.sort&&(l=t.add(mme({sort:t.compareRef(e.sort),pulse:$e(l)})));const _=$e(l);(r||s)&&(s=t.add(mq({layout:t.objectProperty(e.layout),legends:t.legends,mark:S,pulse:_})),p=$e(s));const w=t.add(dq({mark:S,pulse:p||_}));y=$e(w),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(_,p||y,E),r?b1e(e,t,b):v?x1e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(w))),a&&(y=E1e(a,y,t));const C=t.add(pq({pulse:y})),$=t.add(Lc({pulse:$e(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new yc(t,f,C,$)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&ne("Marks only support modify triggers."),$q(T,t,h)}))}function E1e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:Sn(a)?n.signalRef(a.signal):a,method:Sn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=Sn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return $e(n.add(cme(s)))}function A1e(e,t){const n=t.config.legend,i=e.encode||{},r=sr(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,f={};let d=0,h,p,y;GM.forEach(w=>e[w]?(f[w]=e[w],d=d||e[w]):0),d||ne("Missing valid scale for legend.");const v=S1e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},E=$e(t.add(Oa(null,[b]))),S={enter:{x:{value:0},y:{value:0}}},_=$e(t.add(ame(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===Uy?(y=[Wme(e,d,n,i.gradient),l8(e,n,i.labels,_)],p.count=p.count||t.signalRef(`max(2,2*floor((${nc(r.gradientLength())})/100))`)):v===CC?y=[Qme(e,d,n,i.gradient,_),l8(e,n,i.labels,_)]:(h=e1e(e,n),y=[Jme(e,n,i,_,nc(h.columns))],p.size=C1e(e,t,y[0].marks)),y=[up({role:Epe,from:E,encode:S,marks:y,layout:h,interactive:o})],b.title&&y.push(u1e(e,n,i.title,E)),P2(up({role:bpe,from:E,encode:hh(w1e(r,e,n),a,Wp),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function S1e(e,t){let n=e.type||u8;return!e.type&&_1e(e)===1&&(e.fill||e.stroke)&&(n=QD(t)?Uy:vw(t)?CC:u8),n!==Uy?n:vw(t)?CC:Uy}function _1e(e){return GM.reduce((t,n)=>t+(e[n]?1:0),0)}function w1e(e,t,n){const i={enter:{},update:{}};return ei(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function C1e(e,t,n){const i=nc(m8("size",e,n)),r=nc(m8("strokeWidth",e,n)),a=nc(D1e(n[1].encode,t,Vp));return ms(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function m8(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Sq(e,n[0].encode)}function D1e(e,t,n){return Sq("fontSize",e)||Xme("fontSize",t,n)}const $1e=`item.orient==="${gh}"?-90:item.orient==="${ph}"?90:0`;function M1e(e,t){e=ut(e)?{text:e}:e;const n=sr(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],f={},d=$e(t.add(Oa(null,[f])));return l.push(F1e(e,n,T1e(e),d)),e.subtitle&&l.push(O1e(e,n,i.subtitle,d)),P2(up({role:wpe,from:d,encode:k1e(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function T1e(e){const t=e.encode;return t&&t.title||He({name:e.name,interactive:e.interactive,style:e.style},t)}function k1e(e,t){const n={enter:{},update:{}};return ei(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:XM},angle:{signal:$1e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),hh(n,t,Wp)}function F1e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ei(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Tr({type:Uc,role:Cpe,style:Lme,from:i,encode:s},n)}function O1e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ei(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Tr({type:Uc,role:Dpe,style:Ume,from:i,encode:s},n)}function N1e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(QM(i,t))}),e.on&&e.on.forEach(i=>{$q(i,t,e.name)}),t.addDataPipeline(e.name,R1e(e,t,n))}function R1e(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,f,d,h;for(e.values?Sn(e.values)||By(e.format)?(i.push(y8(t,e)),i.push(r=$l())):i.push(r=$l({$ingest:e.values,$format:e.format})):e.url?By(e.url)||By(e.format)?(i.push(y8(t,e)),i.push(r=$l())):i.push(r=$l({$request:e.url,$format:e.format})):e.source&&(r=o=ke(e.source).map(p=>$e(t.getData(p).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],h=d.metadata,!r&&!h.source&&i.push(r=$l()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=gme({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,$l())),r||i.push($l()),i.push(Lc({})),i}function $l(e){const t=Oa({},e);return t.metadata={source:!0},t}function y8(e,t){return sme({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Mq=e=>e===Pu||e===Na,q2=(e,t,n)=>Sn(e)?U1e(e.signal,t,n):e===gh||e===Na?t:n,Bn=(e,t,n)=>Sn(e)?B1e(e.signal,t,n):Mq(e)?t:n,Sa=(e,t,n)=>Sn(e)?L1e(e.signal,t,n):Mq(e)?n:t,Tq=(e,t,n)=>Sn(e)?I1e(e.signal,t,n):e===Na?{value:t}:{value:n},z1e=(e,t,n)=>Sn(e)?j1e(e.signal,t,n):e===ph?{value:t}:{value:n},B1e=(e,t,n)=>kq(`${e} === '${Na}' || ${e} === '${Pu}'`,t,n),L1e=(e,t,n)=>kq(`${e} !== '${Na}' && ${e} !== '${Pu}'`,t,n),U1e=(e,t,n)=>ZM(`${e} === '${gh}' || ${e} === '${Na}'`,t,n),I1e=(e,t,n)=>ZM(`${e} === '${Na}'`,t,n),j1e=(e,t,n)=>ZM(`${e} === '${ph}'`,t,n),kq=(e,t,n)=>(t=t!=null?zn(t):t,n=n!=null?zn(n):n,v8(t)&&v8(n)?(t=t?t.signal||_e(t.value):null,n=n?n.signal||_e(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[He({test:e},t)].concat(n||[])),v8=e=>e==null||Object.keys(e).length===1,ZM=(e,t,n)=>({signal:`${e} ? (${od(t)}) : (${od(n)})`}),P1e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${gh}' ? (${od(i)}) : `:"")+(n!=null?`${e} === '${Pu}' ? (${od(n)}) : `:"")+(r!=null?`${e} === '${ph}' ? (${od(r)}) : `:"")+(t!=null?`${e} === '${Na}' ? (${od(t)}) : `:"")+"(null)"}),od=e=>Sn(e)?e.signal:e==null?null:_e(e),q1e=(e,t)=>t===0?0:Sn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},dd=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Gf(e,t,n,i){let r;if(t&&Ne(t,e))return t[e];if(Ne(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[HM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[Vp][r]}return null}function b8(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function H1e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,f;if(Sn(s)){const h=b8([n.axisX,n.axisY]),p=b8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=Bn(s,Gf(f,n.axisX,r,i),Gf(f,n.axisY,r,i));l={};for(f of p)l[f]=P1e(s.signal,Gf(f,n.axisTop,r,i),Gf(f,n.axisBottom,r,i),Gf(f,n.axisLeft,r,i),Gf(f,n.axisRight,r,i))}else o=s===Na||s===Pu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?He({},r,o,l,a):r}function G1e(e,t,n,i){const r=sr(e,t),a=e.orient;let s,o;const l={enter:s={opacity:rt},update:o={opacity:Wr},exit:{opacity:rt}};ei(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=x8(e,0),d=x8(e,1);return s.x=o.x=Bn(a,f,rt),s.x2=o.x2=Bn(a,d),s.y=o.y=Sa(a,f,rt),s.y2=o.y2=Sa(a,d),Tr({type:YM,role:gpe,from:i,encode:l},n)}function x8(e,t){return{scale:e.scale,range:t}}function Y1e(e,t,n,i,r){const a=sr(e,t),s=e.orient,o=e.gridScale,l=q2(s,1,-1),f=X1e(e.offset,l);let d,h,p;const y={enter:d={opacity:rt},update:p={opacity:Wr},exit:h={opacity:rt}};ei(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Vr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=Bn(s,{signal:"height"},{signal:"width"}),E=o?{scale:o,range:0,mult:l,offset:f}:{value:0,offset:f},S=o?{scale:o,range:1,mult:l,offset:f}:He(b,{mult:l,offset:f});return d.x=p.x=Bn(s,v,E),d.y=p.y=Sa(s,v,E),d.x2=p.x2=Sa(s,S),d.y2=p.y2=Bn(s,S),h.x=Bn(s,v),h.y=Sa(s,v),Tr({type:YM,role:ppe,key:Vr,from:i,encode:y},n)}function X1e(e,t){if(t!==1)if(!Ue(e))e=Sn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=He({},e);for(;n.mult!=null;)if(Ue(n.mult))n=n.mult=He({},n.mult);else return n.mult=Sn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function V1e(e,t,n,i,r,a){const s=sr(e,t),o=e.orient,l=q2(o,-1,1);let f,d,h;const p={enter:f={opacity:rt},update:h={opacity:Wr},exit:d={opacity:rt}};ei(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=zn(r);y.mult=l;const v={scale:e.scale,field:Vr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=Bn(o,rt,v),h.y2=f.y2=Bn(o,y),d.x=Bn(o,v),h.x=f.x=Sa(o,rt,v),h.x2=f.x2=Sa(o,y),d.y=Sa(o,v),Tr({type:YM,role:ype,key:Vr,from:i,encode:p},n)}function c_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function W1e(e,t,n,i,r,a){const s=sr(e,t),o=e.orient,l=e.scale,f=q2(o,-1,1),d=nc(s("labelFlush")),h=nc(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const E=zn(r);E.mult=f,E.offset=zn(s("labelPadding")||0),E.offset.mult=f;const S={scale:l,field:Vr,band:.5,offset:_q(a.offset,s("labelOffset"))},_=Bn(o,v?c_(l,d,'"left"','"right"','"center"'):{value:"center"},z1e(o,"left","right")),w=Bn(o,Tq(o,"bottom","top"),v?c_(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),C=c_(l,d,`-(${h})`,h,0);v=v&&h;const $={opacity:rt,x:Bn(o,S,E),y:Sa(o,S,E)},T={enter:$,update:b={opacity:Wr,text:{field:qM},x:$.x,y:$.y,align:_,baseline:w},exit:{opacity:rt,x:$.x,y:$.y}};ei(T,{dx:!p&&v?Bn(o,C):null,dy:!y&&v?Sa(o,C):null}),ei(T,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const D=s("labelBound");let F=s("labelOverlap");return F=F||D?{separation:s("labelSeparation"),method:F,order:"datum.index",bound:D?{scale:l,orient:o,tolerance:D}:null}:void 0,b.align!==_&&(b.align=dd(b.align,_)),b.baseline!==w&&(b.baseline=dd(b.baseline,w)),Tr({type:Uc,role:mpe,style:Vp,key:Vr,from:i,encode:T,overlap:F},n)}function Q1e(e,t,n,i){const r=sr(e,t),a=e.orient,s=q2(a,-1,1);let o,l;const f={enter:o={opacity:rt,anchor:zn(r("titleAnchor",null)),align:{signal:XM}},update:l=He({},o,{opacity:Wr,text:zn(e.title)}),exit:{opacity:rt}},d={signal:`lerp(range("${e.scale}"), ${I2(0,1,.5)})`};return l.x=Bn(a,d),l.y=Sa(a,d),o.angle=Bn(a,rt,q1e(s,90)),o.baseline=Bn(a,Tq(a,Pu,Na),{value:Pu}),l.angle=o.angle,l.baseline=o.baseline,ei(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Z1e(r,a,f,n),f.update.align=dd(f.update.align,o.align),f.update.angle=dd(f.update.angle,o.angle),f.update.baseline=dd(f.update.baseline,o.baseline),Tr({type:Uc,role:vpe,style:HM,from:i,encode:f},n)}function Z1e(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=dd(zn(o),n.update[l]),!1):!Jf(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?zn(s):Bn(t,zn(s),zn(a))}function K1e(e,t){const n=H1e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=sr(e,n),f=Vme(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=$e(t.add(Oa({},[d]))),p=$e(t.add(Jpe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(Y1e(e,n,i.grid,p,f)),d.ticks&&(v=l("tickSize"),y.push(V1e(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(W1e(e,n,i.labels,p,v,f))),d.domain&&y.push(G1e(e,n,i.domain,h)),d.title&&y.push(Q1e(e,n,i.title,h)),P2(up({role:hpe,from:h,encode:hh(J1e(l,e),r,Wp),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function J1e(e,t){const n={enter:{},update:{}};return ei(n,{orient:e("orient"),offset:e("offset")||0,position:ga(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Fq(e,t,n){const i=ke(e.signals),r=ke(e.scales);return n||i.forEach(a=>cq(a,t)),ke(e.projections).forEach(a=>kme(a,t)),r.forEach(a=>bme(a,t)),ke(e.data).forEach(a=>N1e(a,t)),r.forEach(a=>xme(a,t)),(n||i).forEach(a=>Kpe(a,t)),ke(e.axes).forEach(a=>K1e(a,t)),ke(e.marks).forEach(a=>P2(a,t)),ke(e.legends).forEach(a=>A1e(a,t)),e.title&&M1e(e.title,t),t.parseLambdas(),t}const eye=e=>hh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function tye(e,t){const n=t.config,i=$e(t.root=t.add(ob())),r=nye(e,n);r.forEach(f=>cq(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(Oa()),s=t.add(hq(lq(eye(e.encode),U2,UM,e.style,t,{pulse:$e(a)}))),o=t.add(mq({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:$e(s)}));t.operators.pop(),t.pushState($e(s),$e(o),null),Fq(e,t,r),t.operators.push(o);let l=t.add(dq({mark:i,pulse:$e(o)}));return l=t.add(pq({pulse:$e(l)})),l=t.add(Lc({pulse:$e(l)})),t.addData("root",new yc(t,a,a,l)),t}function H0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function nye(e,t){const n=s=>ga(e[s],t[s]),i=[H0("background",n("background")),H0("autosize",cpe(n("autosize"))),H0("padding",dpe(n("padding"))),H0("width",n("width")||0),H0("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return ke(e.signals).forEach(s=>{Ne(r,s.name)?s=He(r[s.name],s):i.push(s),a[s.name]=s}),ke(t.signals).forEach(s=>{!Ne(a,s.name)&&!Ne(r,s.name)&&i.push(s)}),i}function Oq(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function E8(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Oq.prototype=E8.prototype={parse(e){return Fq(e,this)},fork(){return new E8(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof EC?$e(e):e;return this.add(hme({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push($e(this.add(Lc({pulse:e})))),this._parent.push(t),this._lookup.push(n?$e(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return nt(this._parent)},encode(){return nt(this._encode)},lookup(){return nt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ut(e))return sp(e,t);e.signal||ne("Unsupported field reference: "+_e(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=$e(this.add(ime(r)))}return i},compareRef(e){let t=!1;const n=a=>Sn(a)?(t=!0,this.signalRef(a.signal)):Ppe(a)?(t=!0,this.exprRef(a.expr)):a,i=ke(e.field).map(n),r=ke(e.order).map(n);return t?$e(this.add(o8({fields:i,orders:r}))):a8(i,r)},keyRef(e,t){let n=!1;const i=a=>Sn(a)?(n=!0,$e(r[a.signal])):a,r=this.signals;return e=ke(e).map(i),n?$e(this.add(rme({fields:e,flat:t}))):Lpe(e,t)},sortRef(e){if(!e)return e;const t=B2(e.op,e.field),n=e.order||Upe;return n.signal?$e(this.add(o8({fields:t,orders:this.signalRef(n.signal)}))):a8(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ne(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ne("Duplicate signal name: "+_e(e));const n=t instanceof EC?t:this.add(ob(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ne("Unrecognized signal name: "+_e(e)),this.signals[e]},signalRef(e){return this.signals[e]?$e(this.signals[e]):(Ne(this.lambdas,e)||(this.lambdas[e]=this.add(ob(null))),$e(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=ms(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ue(e)?e:this.signalRef(e.signal||KM(e))},exprRef(e,t){const n={expr:ms(e,this)};return t&&(n.expr.$name=t),$e(this.add(tme(n)))},addBinding(e,t){this.bindings||ne("Nested signals do not support binding: "+_e(e)),this.bindings.push(He({signal:e},t))},addScaleProj(e,t){Ne(this.scales,e)&&ne("Duplicate scale or projection name: "+_e(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,pme(t))},addProjection(e,t){this.addScaleProj(e,dme(t))},getScale(e){return this.scales[e]||ne("Unrecognized scale name: "+_e(e)),this.scales[e]},scaleRef(e){return $e(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ne(this.data,e)&&ne("Duplicate data set name: "+_e(e)),this.data[e]=t},getData(e){return this.data[e]||ne("Undefined data set name: "+_e(e)),this.data[e]},addDataPipeline(e,t){return Ne(this.data,e)&&ne("Duplicate data set name: "+_e(e)),this.addData(e,yc.fromEntries(this,t))}};function KM(e){return(we(e)?iye:rye)(e)}function iye(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ue(r)?r.signal||KM(r):_e(r))}return n+"]"}function rye(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+_e(i)+":"+(Ue(r)?r.signal||KM(r):_e(r));return t+"}"}function aye(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function sye(e,t,n){return Ue(e)||ne("Input Vega specification must be an object."),t=Mb(aye(),t,e.config),tye(e,new Oq(t,n)).toRuntime()}var oye="5.29.0";He(_d,Iee,yse,Wse,Nue,$le,tfe,Nce,ife,Dfe,Bfe,Hfe);const uye=Object.freeze(Object.defineProperty({__proto__:null,Bounds:mn,CanvasHandler:Up,CanvasRenderer:Ev,DATE:er,DAY:ci,DAYOFYEAR:gs,Dataflow:ud,Debug:_7,Error:f3,EventStream:Hb,Gradient:bU,GroupItem:h2,HOURS:Dr,Handler:E$,HybridHandler:cI,HybridRenderer:Mw,Info:S7,Item:d2,MILLISECONDS:Ca,MINUTES:$r,MONTH:gi,Marks:Mr,MultiPulse:R3,None:E7,Operator:Ft,Parameters:qb,Pulse:$u,QUARTER:Ji,RenderType:xu,Renderer:Lp,ResourceLoader:CU,SECONDS:Kr,SVGHandler:ZU,SVGRenderer:D$,SVGStringRenderer:lI,Scenegraph:qU,TIME_UNITS:w3,Transform:K,View:QP,WEEK:En,Warn:A7,YEAR:Jn,accessor:ar,accessorFields:hi,accessorName:Jt,array:ke,ascending:bp,bandwidthNRD:U3,bin:sB,bootstrapCI:oB,boundClip:xI,boundContext:Np,boundItem:_w,boundMark:UU,boundStroke:$o,changeset:Nc,clampRange:z7,codegenExpression:SP,compare:p3,constant:bi,cumulativeLogNormal:G3,cumulativeNormal:Yb,cumulativeUniform:W3,dayofyear:hz,debounce:m3,defaultLocale:T3,definition:iB,densityLogNormal:H3,densityNormal:I3,densityUniform:V3,domChild:xn,domClear:Pr,domCreate:vu,domFind:x$,dotbin:uB,error:ne,expressionFunction:ln,extend:He,extent:fs,extentIndex:B7,falsy:uu,fastmap:nh,field:Qr,flush:L7,font:v2,fontFamily:Bp,fontSize:As,format:yy,formatLocale:Jy,formats:O3,hasOwnProperty:Ne,id:vp,identity:Ni,inferType:Yz,inferTypes:Xz,ingest:yt,inherits:pe,inrange:nd,interpolate:ZD,interpolateColors:c2,interpolateRange:aU,intersect:mI,intersectBoxLine:id,intersectPath:a$,intersectPoint:s$,intersectRule:$U,isArray:we,isBoolean:y3,isDate:Cu,isFunction:Ye,isIterable:U7,isNumber:Fu,isObject:Ue,isRegExp:I7,isString:ut,isTuple:jb,key:v3,lerp:j7,lineHeight:Uu,loader:Ub,locale:Hz,logger:w7,lruCache:P7,markup:C$,merge:q7,mergeConfig:Mb,multiLineOffset:y$,one:th,pad:H7,panLinear:T7,panLog:k7,panPow:F7,panSymlog:O7,parse:sye,parseExpression:xP,parseSelector:iq,path:Zb,pathCurves:n$,pathEqual:EI,pathParse:Td,pathRectangle:AU,pathRender:Vg,pathSymbols:EU,pathTrail:SU,peek:nt,point:x2,projection:Y$,quantileLogNormal:Y3,quantileNormal:Xb,quantileUniform:Q3,quantiles:B3,quantizeInterpolator:sU,quarter:N7,quartiles:L3,get random(){return Jr},randomInteger:HJ,randomKDE:P3,randomLCG:qJ,randomLogNormal:cB,randomMixture:fB,randomNormal:j3,randomUniform:dB,read:Qz,regressionConstant:Z3,regressionExp:gB,regressionLinear:K3,regressionLoess:yB,regressionLog:hB,regressionPoly:mB,regressionPow:pB,regressionQuad:J3,renderModule:E2,repeat:K0,resetDefaultLocale:IK,resetSVGClipId:wU,resetSVGDefIds:Rae,responseType:Wz,runtimeContext:BP,sampleCurve:Wb,sampleLogNormal:q3,sampleNormal:Gb,sampleUniform:X3,scale:gt,sceneEqual:$$,sceneFromJSON:jU,scenePickVisit:hv,sceneToJSON:IU,sceneVisit:Da,sceneZOrder:o$,scheme:KD,serializeXML:aI,setHybridRendererOptions:kae,setRandom:jJ,span:xp,splitAccessPath:$b,stringValue:_e,textMetrics:Sr,timeBin:Tz,timeFloor:xz,timeFormatLocale:Pg,timeInterval:sh,timeOffset:Sz,timeSequence:Cz,timeUnitSpecifier:dz,timeUnits:C3,toBoolean:b3,toDate:x3,toNumber:fi,toSet:wa,toString:E3,transform:rB,transforms:_d,truncate:G7,truthy:Zr,tupleid:Me,typeParsers:sw,utcFloor:Ez,utcInterval:oh,utcOffset:_z,utcSequence:Dz,utcdayofyear:mz,utcquarter:R7,utcweek:yz,version:oye,visitArray:fu,week:gz,writeConfig:Tb,zero:mu,zoomLinear:d3,zoomLog:h3,zoomPow:Xy,zoomSymlog:g3},Symbol.toStringTag,{value:"Module"}));function lye(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var cye={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},fye={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},dye={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const hye=Array.prototype.slice,Ml=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,hye.call(t,1))},gye=(e,t,n,i,r,a,s)=>new Date(e,t||0,n??1,i||0,r||0,a||0,s||0);var pye={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:gye,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ml("join",arguments)},indexof:function(){return Ml("indexOf",arguments)},lastindexof:function(){return Ml("lastIndexOf",arguments)},slice:function(){return Ml("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(bp),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ml("substring",arguments,String)},split:function(){return Ml("split",arguments,String)},replace:function(){return Ml("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const mye=["view","item","group","xy","x","y"],$C=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&$C.add(setImmediate);const yye={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:cye[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),$C.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||pye[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>fye[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>dye[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,$C.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function G0(e,t,n,i,r,a){const s=o=>yye[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,mye.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var vye={operator(e,t){const n=t.ast,i=e.functions;return r=>G0(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>G0(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>G0(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return G0(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let f=0,d;for(const h in i)d=G0(i[h].ast,r,o,l,void 0,s),s[h]!==d&&(s[h]=d,f=1);return n!=="rule"&&lye(s,i,a),f}}};function mh(e,t,n){return e.fields=t||[],e.fname=n,e}function bye(e){return e.length===1?xye(e[0]):Eye(e)}const xye=e=>function(t){return t[e]},Eye=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function f_(e){throw Error(e)}function Ic(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||f_("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&f_("Access path missing closing bracket: "+e),i&&f_("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function Aye(e,t,n){const i=Ic(e);return e=i.length===1?i[0]:e,mh(bye(i),[e],e)}Aye("id");const Sye=mh(e=>e,[],"identity");mh(()=>0,[],"zero");mh(()=>1,[],"one");mh(()=>!0,[],"true");mh(()=>!1,[],"false");function _ye(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const wye=1,Nq=2,Cye=3,Dye=4;function $ye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_ye,i=e;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=wye&&n("error","ERROR",arguments),this},warn(){return i>=Nq&&n("warn","WARN",arguments),this},info(){return i>=Cye&&n("log","INFO",arguments),this},debug(){return i>=Dye&&n("log","DEBUG",arguments),this}}}var be=Array.isArray;function lt(e){return e===Object(e)}const A8=e=>e!=="__proto__";function Rq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=Mye(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;H2(i,a,r[a],s)}return i},{})}function H2(e,t,n,i){if(!A8(t))return;let r,a;if(lt(n)&&!be(n)){a=lt(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?H2(a,r,n[r]):A8(r)&&(a[r]=n[r])}else e[t]=n}function Mye(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function sn(e){return e!=null?be(e)?e:[e]:[]}function Tye(e){return typeof e=="function"}function gn(e,t){return Object.hasOwn(e,t)}function Qp(e){return typeof e=="boolean"}function Pt(e){return typeof e=="number"}function Pe(e){return typeof e=="string"}function ot(e){return be(e)?"["+e.map(ot)+"]":lt(e)||Pe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}const kye="view",ub="[",lb="]",zq="{",Bq="}",Fye=":",Lq=",",Oye="@",Nye=">",Rye=/[[\]{}]/,zye={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Uq,Iq;function yh(e,t,n){return Uq=t||kye,Iq=zye,jq(e.trim()).map(MC)}function Bye(e){return Iq[e]}function Og(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function jq(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Og(e,r,Lq,ub+zq,lb+Bq),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function MC(e){return e[0]==="["?Lye(e):Uye(e)}function Lye(e){const t=e.length;let n=1,i;if(n=Og(e,n,lb,ub,lb),n===t)throw"Empty between selector: "+e;if(i=jq(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Nye)throw"Expected '>' after between selector: "+e;i=i.map(MC);const r=MC(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Uye(e){const t={source:Uq},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===Bq){if(o=e.lastIndexOf(zq),o>=0){try{i=Iye(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===Oye&&(r=++o),l=Og(e,o,Fye),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=Og(e,o,ub),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Og(e,o,lb),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==ub)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||Rye.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Bye(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Iye(e){const t=e.split(Lq);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}const jye="RawCode",Pye="Literal",qye="Property",Hye="Identifier",Gye="ArrayExpression",Yye="BinaryExpression",Xye="CallExpression",Vye="ConditionalExpression",Wye="LogicalExpression",Qye="MemberExpression",Zye="ObjectExpression",Kye="UnaryExpression";function Ra(e){this.type=e}Ra.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Jye(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Jye(e){switch(e.type){case Gye:return e.elements;case Yye:case Wye:return[e.left,e.right];case Xye:return[e.callee].concat(e.arguments);case Vye:return[e.test,e.consequent,e.alternate];case Qye:return[e.object,e.property];case Zye:return e.properties;case qye:return[e.key,e.value];case Kye:return[e.argument];case Hye:case Pye:case jye:default:return[]}}var Ds,Ee,te,yi,_t,G2=1,Zp=2,vc=3,Ju=4,Y2=5,jc=6,Xi=7,Kp=8,eve=9;Ds={};Ds[G2]="Boolean";Ds[Zp]="<end>";Ds[vc]="Identifier";Ds[Ju]="Keyword";Ds[Y2]="Null";Ds[jc]="Numeric";Ds[Xi]="Punctuator";Ds[Kp]="String";Ds[eve]="RegularExpression";var tve="ArrayExpression",nve="BinaryExpression",ive="CallExpression",rve="ConditionalExpression",Pq="Identifier",ave="Literal",sve="LogicalExpression",ove="MemberExpression",uve="ObjectExpression",lve="Property",cve="UnaryExpression",Ln="Unexpected token %0",fve="Unexpected number",dve="Unexpected string",hve="Unexpected identifier",gve="Unexpected reserved word",pve="Unexpected end of input",TC="Invalid regular expression",d_="Invalid regular expression: missing /",qq="Octal literals are not allowed in strict mode.",mve="Duplicate data property in object literal not allowed in strict mode",Kn="ILLEGAL",lp="Disabled.",yve=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),vve=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function X2(e,t){if(!e)throw new Error("ASSERT: "+t)}function io(e){return e>=48&&e<=57}function JM(e){return"0123456789abcdefABCDEF".includes(e)}function Ng(e){return"01234567".includes(e)}function bve(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function cp(e){return e===10||e===13||e===8232||e===8233}function Jp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&yve.test(String.fromCharCode(e))}function cb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&vve.test(String.fromCharCode(e))}const xve={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Hq(){for(;te<yi;){const e=Ee.charCodeAt(te);if(bve(e)||cp(e))++te;else break}}function kC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<yi&&JM(Ee[te])?(i=Ee[te++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):dt({},Ln,Kn);return String.fromCharCode(r)}function Eve(){var e,t,n,i;for(e=Ee[te],t=0,e==="}"&&dt({},Ln,Kn);te<yi&&(e=Ee[te++],!!JM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dt({},Ln,Kn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function Gq(){var e,t;for(e=Ee.charCodeAt(te++),t=String.fromCharCode(e),e===92&&(Ee.charCodeAt(te)!==117&&dt({},Ln,Kn),++te,e=kC("u"),(!e||e==="\\"||!Jp(e.charCodeAt(0)))&&dt({},Ln,Kn),t=e);te<yi&&(e=Ee.charCodeAt(te),!!cb(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ee.charCodeAt(te)!==117&&dt({},Ln,Kn),++te,e=kC("u"),(!e||e==="\\"||!cb(e.charCodeAt(0)))&&dt({},Ln,Kn),t+=e);return t}function Ave(){var e,t;for(e=te++;te<yi;){if(t=Ee.charCodeAt(te),t===92)return te=e,Gq();if(cb(t))++te;else break}return Ee.slice(e,te)}function Sve(){var e,t,n;return e=te,t=Ee.charCodeAt(te)===92?Gq():Ave(),t.length===1?n=vc:xve.hasOwnProperty(t)?n=Ju:t==="null"?n=Y2:t==="true"||t==="false"?n=G2:n=vc,{type:n,value:t,start:e,end:te}}function h_(){var e=te,t=Ee.charCodeAt(te),n,i=Ee[te],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:Xi,value:String.fromCharCode(t),start:e,end:te};default:if(n=Ee.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:Xi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,Ee.charCodeAt(te)===61&&++te,{type:Xi,value:Ee.slice(e,te),start:e,end:te}}}if(s=Ee.substr(te,4),s===">>>=")return te+=4,{type:Xi,value:s,start:e,end:te};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return te+=3,{type:Xi,value:a,start:e,end:te};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return te+=2,{type:Xi,value:r,start:e,end:te};if(r==="//"&&dt({},Ln,Kn),"<>=!+-*%&|^/".includes(i))return++te,{type:Xi,value:i,start:e,end:te};dt({},Ln,Kn)}function _ve(e){let t="";for(;te<yi&&JM(Ee[te]);)t+=Ee[te++];return t.length===0&&dt({},Ln,Kn),Jp(Ee.charCodeAt(te))&&dt({},Ln,Kn),{type:jc,value:parseInt("0x"+t,16),start:e,end:te}}function wve(e){let t="0"+Ee[te++];for(;te<yi&&Ng(Ee[te]);)t+=Ee[te++];return(Jp(Ee.charCodeAt(te))||io(Ee.charCodeAt(te)))&&dt({},Ln,Kn),{type:jc,value:parseInt(t,8),octal:!0,start:e,end:te}}function S8(){var e,t,n;if(n=Ee[te],X2(io(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=Ee[te++],n=Ee[te],e==="0"){if(n==="x"||n==="X")return++te,_ve(t);if(Ng(n))return wve(t);n&&io(n.charCodeAt(0))&&dt({},Ln,Kn)}for(;io(Ee.charCodeAt(te));)e+=Ee[te++];n=Ee[te]}if(n==="."){for(e+=Ee[te++];io(Ee.charCodeAt(te));)e+=Ee[te++];n=Ee[te]}if(n==="e"||n==="E")if(e+=Ee[te++],n=Ee[te],(n==="+"||n==="-")&&(e+=Ee[te++]),io(Ee.charCodeAt(te)))for(;io(Ee.charCodeAt(te));)e+=Ee[te++];else dt({},Ln,Kn);return Jp(Ee.charCodeAt(te))&&dt({},Ln,Kn),{type:jc,value:parseFloat(e),start:t,end:te}}function Cve(){var e="",t,n,i,r,a=!1;for(t=Ee[te],X2(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<yi;)if(i=Ee[te++],i===t){t="";break}else if(i==="\\")if(i=Ee[te++],!i||!cp(i.charCodeAt(0)))switch(i){case"u":case"x":Ee[te]==="{"?(++te,e+=Eve()):e+=kC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ng(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),te<yi&&Ng(Ee[te])&&(a=!0,r=r*8+"01234567".indexOf(Ee[te++]),"0123".includes(i)&&te<yi&&Ng(Ee[te])&&(r=r*8+"01234567".indexOf(Ee[te++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ee[te]===`
`&&++te;else{if(cp(i.charCodeAt(0)))break;e+=i}return t!==""&&dt({},Ln,Kn),{type:Kp,value:e,octal:a,start:n,end:te}}function Dve(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";dt({},TC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dt({},TC)}try{return new RegExp(e,t)}catch{return null}}function $ve(){var e,t,n,i,r;for(e=Ee[te],X2(e==="/","Regular expression literal must start with a slash"),t=Ee[te++],n=!1,i=!1;te<yi;)if(e=Ee[te++],t+=e,e==="\\")e=Ee[te++],cp(e.charCodeAt(0))&&dt({},d_),t+=e;else if(cp(e.charCodeAt(0)))dt({},d_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||dt({},d_),r=t.substr(1,t.length-2),{value:r,literal:t}}function Mve(){var e,t,n;for(t="",n="";te<yi&&(e=Ee[te],!!cb(e.charCodeAt(0)));)++te,e==="\\"&&te<yi?dt({},Ln,Kn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dt({},TC,n),{value:n,literal:t}}function Tve(){var e,t,n,i;return _t=null,Hq(),e=te,t=$ve(),n=Mve(),i=Dve(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function kve(e){return e.type===vc||e.type===Ju||e.type===G2||e.type===Y2}function Yq(){if(Hq(),te>=yi)return{type:Zp,start:te,end:te};const e=Ee.charCodeAt(te);return Jp(e)?Sve():e===40||e===41||e===59?h_():e===39||e===34?Cve():e===46?io(Ee.charCodeAt(te+1))?S8():h_():io(e)?S8():h_()}function Qi(){const e=_t;return te=e.end,_t=Yq(),te=e.end,e}function Xq(){const e=te;_t=Yq(),te=e}function Fve(e){const t=new Ra(tve);return t.elements=e,t}function _8(e,t,n){const i=new Ra(e==="||"||e==="&&"?sve:nve);return i.operator=e,i.left=t,i.right=n,i}function Ove(e,t){const n=new Ra(ive);return n.callee=e,n.arguments=t,n}function Nve(e,t,n){const i=new Ra(rve);return i.test=e,i.consequent=t,i.alternate=n,i}function eT(e){const t=new Ra(Pq);return t.name=e,t}function bg(e){const t=new Ra(ave);return t.value=e.value,t.raw=Ee.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function w8(e,t,n){const i=new Ra(ove);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Rve(e){const t=new Ra(uve);return t.properties=e,t}function C8(e,t,n){const i=new Ra(lve);return i.key=t,i.value=n,i.kind=e,i}function zve(e,t){const n=new Ra(cve);return n.operator=e,n.argument=t,n.prefix=!0,n}function dt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(X2(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=te,n.description=r,n}function V2(e){e.type===Zp&&dt(e,pve),e.type===jc&&dt(e,fve),e.type===Kp&&dt(e,dve),e.type===vc&&dt(e,hve),e.type===Ju&&dt(e,gve),dt(e,Ln,e.value)}function vi(e){const t=Qi();(t.type!==Xi||t.value!==e)&&V2(t)}function Bt(e){return _t.type===Xi&&_t.value===e}function g_(e){return _t.type===Ju&&_t.value===e}function Bve(){const e=[];for(te=_t.start,vi("[");!Bt("]");)Bt(",")?(Qi(),e.push(null)):(e.push(bc()),Bt("]")||vi(","));return Qi(),Fve(e)}function D8(){te=_t.start;const e=Qi();return e.type===Kp||e.type===jc?(e.octal&&dt(e,qq),bg(e)):eT(e.value)}function Lve(){var e,t,n,i;if(te=_t.start,e=_t,e.type===vc)return n=D8(),vi(":"),i=bc(),C8("init",n,i);if(e.type===Zp||e.type===Xi)V2(e);else return t=D8(),vi(":"),i=bc(),C8("init",t,i)}function Uve(){var e=[],t,n,i,r={},a=String;for(te=_t.start,vi("{");!Bt("}");)t=Lve(),t.key.type===Pq?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?dt({},mve):r[i]=!0,e.push(t),Bt("}")||vi(",");return vi("}"),Rve(e)}function Ive(){vi("(");const e=tT();return vi(")"),e}const jve={if:1};function Pve(){var e,t,n;if(Bt("("))return Ive();if(Bt("["))return Bve();if(Bt("{"))return Uve();if(e=_t.type,te=_t.start,e===vc||jve[_t.value])n=eT(Qi().value);else if(e===Kp||e===jc)_t.octal&&dt(_t,qq),n=bg(Qi());else{if(e===Ju)throw new Error(lp);e===G2?(t=Qi(),t.value=t.value==="true",n=bg(t)):e===Y2?(t=Qi(),t.value=null,n=bg(t)):Bt("/")||Bt("/=")?(n=bg(Tve()),Xq()):V2(Qi())}return n}function qve(){const e=[];if(vi("("),!Bt(")"))for(;te<yi&&(e.push(bc()),!Bt(")"));)vi(",");return vi(")"),e}function Hve(){te=_t.start;const e=Qi();return kve(e)||V2(e),eT(e.value)}function Gve(){return vi("."),Hve()}function Yve(){vi("[");const e=tT();return vi("]"),e}function Xve(){var e,t,n;for(e=Pve();;)if(Bt("."))n=Gve(),e=w8(".",e,n);else if(Bt("("))t=qve(),e=Ove(e,t);else if(Bt("["))n=Yve(),e=w8("[",e,n);else break;return e}function $8(){const e=Xve();if(_t.type===Xi&&(Bt("++")||Bt("--")))throw new Error(lp);return e}function jy(){var e,t;if(_t.type!==Xi&&_t.type!==Ju)t=$8();else{if(Bt("++")||Bt("--"))throw new Error(lp);if(Bt("+")||Bt("-")||Bt("~")||Bt("!"))e=Qi(),t=jy(),t=zve(e.value,t);else{if(g_("delete")||g_("void")||g_("typeof"))throw new Error(lp);t=$8()}}return t}function M8(e){let t=0;if(e.type!==Xi&&e.type!==Ju)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Vve(){var e,t,n,i,r,a,s,o,l,f;if(e=_t,l=jy(),i=_t,r=M8(i),r===0)return l;for(i.prec=r,Qi(),t=[e,_t],s=jy(),a=[l,i,s];(r=M8(_t))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=_8(o,l,s),a.push(n);i=Qi(),i.prec=r,a.push(i),t.push(_t),n=jy(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=_8(a[f-1].value,a[f-2],n),f-=2;return n}function bc(){var e,t,n;return e=Vve(),Bt("?")&&(Qi(),t=bc(),vi(":"),n=bc(),e=Nve(e,t,n)),e}function tT(){const e=bc();if(Bt(","))throw new Error(lp);return e}function Wve(e){Ee=e,te=0,yi=Ee.length,_t=null,Xq();const t=tT();if(_t.type!==Zp)throw new Error("Unexpect token after expression.");return t}var Qve="6.2.0",Zve={version:Qve};function nT(e){return ce(e,"or")}function iT(e){return ce(e,"and")}function rT(e){return ce(e,"not")}function Py(e,t){if(rT(e))Py(e.not,t);else if(iT(e))for(const n of e.and)Py(n,t);else if(nT(e))for(const n of e.or)Py(n,t);else t(e)}function hd(e,t){return rT(e)?{not:hd(e.not,t)}:iT(e)?{and:e.and.map(n=>hd(n,t))}:nT(e)?{or:e.or.map(n=>hd(n,t))}:t(e)}const Le=structuredClone;function Vq(e){throw new Error(e)}function Id(e,t){const n={};for(const i of t)gn(e,i)&&(n[i]=e[i]);return n}function wr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>bt(e)).join(",")})`};function et(e){if(Pt(e))return e;const t=Pe(e)?e:bt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function FC(e){return e===!1||e===null}function Ze(e,t){return e.includes(t)}function jd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function aT(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Wq(e,...t){for(const n of t)Kve(e,n??{});return e}function Kve(e,t){for(const n of le(t))H2(e,n,t[n],!0)}function is(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Jve(e,t){const n=le(e),i=le(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Qq(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function sT(e,t){for(const n of e)if(t.has(n))return!0;return!1}function OC(e){const t=new Set;for(const n of e){const r=Ic(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function oT(e,t){return e===void 0||t===void 0?!0:sT(OC(e),OC(t))}function Ot(e){return le(e).length===0}const le=Object.keys,pn=Object.values,qu=Object.entries;function fp(e){return e===!0||e===!1}function jt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Rg(e,t){return rT(e)?`!(${Rg(e.not,t)})`:iT(e)?`(${e.and.map(n=>Rg(n,t)).join(") && (")})`:nT(e)?`(${e.or.map(n=>Rg(n,t)).join(") || (")})`:t(e)}function fb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&fb(e[n],t)&&delete e[n],Ot(e)}function em(e){return e.charAt(0).toUpperCase()+e.substr(1)}function uT(e,t="datum"){const n=Ic(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ot).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function Zq(e,t="datum"){return`${t}[${ot(Ic(e).join("."))}]`}function At(e){return`datum['${e.replaceAll("'","\\'")}']`}function ebe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ta(e){return`${Ic(e).map(ebe).join("\\.")}`}function xc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function vh(e){return`${Ic(e).join(".")}`}function Pd(e){return e?Ic(e).length:0}function on(...e){return e.find(t=>t!==void 0)}let Kq=42;function Jq(e){const t=++Kq;return e?String(e)+t:t}function tbe(){Kq=42}function eH(e){return tH(e)?e:`__${e}`}function tH(e){return e.startsWith("__")}function dp(e){if(e!==void 0)return(e%360+360)%360}function W2(e){return Pt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const T8=Object.getPrototypeOf(structuredClone({}));function Ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!Ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!Ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==T8.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==T8.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!Ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function bt(e){const t=[];return function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],f=n(i[l]);f&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${f}`)}return t.splice(s,1),`{${a}}`}(e)}function ce(e,t){return lt(e)&&gn(e,t)&&e[t]!==void 0}const yo="row",vo="column",Q2="facet",qt="x",Pn="y",za="x2",$s="y2",el="xOffset",bh="yOffset",Ba="radius",To="radius2",ra="theta",ko="theta2",La="latitude",Ua="longitude",Ia="latitude2",na="longitude2",tl="time",nr="color",Ms="fill",Ts="stroke",ir="shape",Fo="size",Pc="angle",Oo="opacity",nl="fillOpacity",il="strokeOpacity",rl="strokeWidth",al="strokeDash",tm="text",qd="order",nm="detail",Z2="key",Ec="tooltip",K2="href",J2="url",ex="description",nbe={x:1,y:1,x2:1,y2:1},nH={theta:1,theta2:1,radius:1,radius2:1};function iH(e){return gn(nH,e)}const lT={longitude:1,longitude2:1,latitude:1,latitude2:1};function rH(e){switch(e){case La:return"y";case Ia:return"y2";case Ua:return"x";case na:return"x2"}}function aH(e){return gn(lT,e)}const ibe=le(lT),cT={...nbe,...nH,...lT,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function gd(e){return e===nr||e===Ms||e===Ts}const sH={row:1,column:1,facet:1},Xr=le(sH),fT={...cT,...sH},rbe=le(fT),{order:ZDe,detail:KDe,tooltip:JDe,...abe}=fT,{row:e$e,column:t$e,facet:n$e,...sbe}=abe;function obe(e){return gn(sbe,e)}function oH(e){return gn(fT,e)}const ube=[za,$s,Ia,na,ko,To];function uH(e){return qc(e)!==e}function qc(e){switch(e){case za:return qt;case $s:return Pn;case Ia:return La;case na:return Ua;case ko:return ra;case To:return Ba}return e}function Hu(e){if(iH(e))switch(e){case ra:return"startAngle";case ko:return"endAngle";case Ba:return"outerRadius";case To:return"innerRadius"}return e}function ks(e){switch(e){case qt:return za;case Pn:return $s;case La:return Ia;case Ua:return na;case ra:return ko;case Ba:return To}}function rr(e){switch(e){case qt:case za:return"width";case Pn:case $s:return"height"}}function lH(e){switch(e){case qt:return"xOffset";case Pn:return"yOffset";case za:return"x2Offset";case $s:return"y2Offset";case ra:return"thetaOffset";case Ba:return"radiusOffset";case ko:return"theta2Offset";case To:return"radius2Offset"}}function dT(e){switch(e){case qt:return"xOffset";case Pn:return"yOffset"}}function lbe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const cbe=le(cT),{x:i$e,y:r$e,x2:a$e,y2:s$e,xOffset:o$e,yOffset:u$e,latitude:l$e,longitude:c$e,latitude2:f$e,longitude2:d$e,theta:h$e,theta2:g$e,radius:p$e,radius2:m$e,...hT}=cT,fbe=le(hT),gT={x:1,y:1},No=le(gT);function un(e){return gn(gT,e)}const pT={theta:1,radius:1},dbe=le(pT);function tx(e){return e==="width"?qt:Pn}const cH={xOffset:1,yOffset:1};function im(e){return gn(cH,e)}const hbe={time:1};function p_(e){return e in hbe}const{text:y$e,tooltip:v$e,href:b$e,url:x$e,description:E$e,detail:A$e,key:S$e,order:_$e,...fH}=hT,gbe=le(fH);function pbe(e){return gn(hT,e)}function mbe(e){switch(e){case nr:case Ms:case Ts:case Fo:case ir:case Oo:case rl:case al:return!0;case nl:case il:case Pc:case tl:return!1}}const dH={...gT,...pT,...cH,...fH},mT=le(dH);function Fs(e){return gn(dH,e)}function ybe(e,t){return bbe(e)[t]}const hH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:w$e,...vbe}=hH;function bbe(e){switch(e){case nr:case Ms:case Ts:case ex:case nm:case Z2:case Ec:case K2:case qd:case Oo:case nl:case il:case rl:case Q2:case yo:case vo:return hH;case qt:case Pn:case el:case bh:case La:case Ua:case tl:return vbe;case za:case $s:case Ia:case na:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Fo:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case al:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ir:return{point:"always",geoshape:"always"};case tm:return{text:"always"};case Pc:return{point:"always",square:"always",text:"always"};case J2:return{image:"always"};case ra:return{text:"always",arc:"always"};case Ba:return{text:"always",arc:"always"};case ko:case To:return{arc:"always"}}}function m_(e){switch(e){case qt:case Pn:case ra:case Ba:case el:case bh:case Fo:case Pc:case rl:case Oo:case nl:case il:case tl:case za:case $s:case ko:case To:return;case Q2:case yo:case vo:case ir:case al:case tm:case Ec:case K2:case J2:case ex:return"discrete";case nr:case Ms:case Ts:return"flexible";case La:case Ua:case Ia:case na:case nm:case Z2:case qd:return}}const xbe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Ebe={count:1,min:1,max:1};function wo(e){return ce(e,"argmin")}function sl(e){return ce(e,"argmax")}function yT(e){return Pe(e)&&gn(xbe,e)}const Abe=new Set(["count","valid","missing","distinct"]);function nx(e){return Pe(e)&&Abe.has(e)}function Sbe(e){return Pe(e)&&Ze(["min","max"],e)}const _be=new Set(["count","sum","distinct","valid","missing"]),wbe=new Set(["mean","average","median","q1","q3","min","max"]);function gH(e){return Qp(e)&&(e=gx(e,void 0)),`bin${le(e).map(t=>ix(e[t])?jt(`_${t}_${qu(e[t])}`):jt(`_${t}_${e[t]}`)).join("")}`}function Rt(e){return e===!0||Hc(e)&&!e.binned}function Yn(e){return e==="binned"||Hc(e)&&e.binned===!0}function Hc(e){return lt(e)}function ix(e){return ce(e,"param")}function k8(e){switch(e){case yo:case vo:case Fo:case nr:case Ms:case Ts:case rl:case Oo:case nl:case il:case ir:return 6;case al:return 4;default:return 10}}function rm(e){return ce(e,"expr")}function Xn(e,{level:t}={level:0}){const n=le(e||{}),i={};for(const r of n)i[r]=t===0?br(e[r]):Xn(e[r],{level:t-1});return i}function pH(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,E={...b,...o?{fill:o}:{}},S={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},_={...l?{subtitleColor:l}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},w=Id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:E,subtitleMarkConfig:w,nonMarkTitleProperties:S,subtitle:_}}function pu(e){return Pe(e)||be(e)&&Pe(e[0])}function Ae(e){return ce(e,"signal")}function Gc(e){return ce(e,"step")}function Cbe(e){return be(e)?!1:ce(e,"fields")&&!ce(e,"data")}function Dbe(e){return be(e)?!1:ce(e,"fields")&&ce(e,"data")}function ho(e){return be(e)?!1:ce(e,"field")&&ce(e,"data")}const $be={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Mbe=le($be),Tbe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},NC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],kbe="  ";function mH(e){const t=be(e.condition)?e.condition.map(F8):F8(e.condition);return{...br(e),condition:t}}function br(e){if(rm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function F8(e){if(rm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Lt(e){if(rm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ae(e)?e:e!==void 0?{value:e}:void 0}function Fbe(e){return Ae(e)?e.signal:ot(e)}function O8(e){return Ae(e)?e.signal:ot(e.value)}function Ea(e){return Ae(e)?e.signal:e==null?null:ot(e)}function Obe(e,t,n){for(const i of n){const r=ys(i,t.markDef,t.config);r!==void 0&&(e[i]=Lt(r))}return e}function yH(e){return[].concat(e.type,e.style??[])}function Mt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ce(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:ys(e,t,n,i)}function ys(e,t,n,{vgChannel:i}={}){const r=RC(e,t,n.style);return on(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function RC(e,t,n){return vH(e,yH(t),n)}function vH(e,t,n){t=sn(t);let i;for(const r of t){const a=n[r];ce(a,e)&&(i=a[e])}return i}function bH(e,t){return sn(e).reduce((n,i)=>(n.field.push(me(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function xH(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(Ar(r,i))return;n.push(i)}),n}function EH(e,t){return Ar(e,t)||!t?e:e?[...sn(e),...sn(t)].join(", "):t}function AH(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((pu(n)||Ae(n))&&(pu(i)||Ae(i)))return{explicit:e.explicit,value:EH(n,i)};if(pu(n)||Ae(n))return{explicit:e.explicit,value:n};if(pu(i)||Ae(i))return{explicit:e.explicit,value:i};if(!pu(n)&&!Ae(n)&&!pu(i)&&!Ae(i))return{explicit:e.explicit,value:xH(n,i)};throw new Error("It should never reach here")}function vT(e){return`Invalid specification ${bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Nbe='Autosize "fit" only works for single views and layered views.';function N8(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function R8(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function z8(e){return e?`Dropping "fit-${e}" because spec has discrete ${rr(e)}.`:'Dropping "fit" because spec has discrete size.'}function bT(e){return`Unknown field for ${e}. Cannot calculate view size.`}function B8(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Rbe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function zbe(e){return`The "nearest" transform is not supported for ${e} marks.`}function SH(e){return`Selection not supported for ${e} yet.`}function Bbe(e){return`Cannot find a selection named "${e}".`}const Lbe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Ube="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Ibe="Legend bindings are only supported for selections over an individual field or encoding channel.";function jbe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Pbe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const qbe="The same selection must be used to override scale domains in a layered view.",Hbe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Gbe(e){return`Unknown repeated value "${e}".`}function L8(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Ybe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",xT="Animation involving facet, layer, or concat is currently unsupported.";function Xbe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${_e(e)}.`}function Vbe(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${_e(t)} encoding found for selection ${_e(n.param)}. Using "field": ${_e(i)}.`}const Wbe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Qbe(e){return`Unrecognized parse "${e}".`}function U8(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Zbe="Attempt to add the same child twice.";function Kbe(e){return`Ignoring an invalid transform: ${bt(e)}.`}const Jbe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function I8(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function e2e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${bt(t)} is overridden by a child projection ${bt(n)}.`}const t2e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function n2e(e){return`${e}Offset dropped because ${e} is continuous`}function i2e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${bt(n)}}.`}function _H(e){return`Invalid field type "${e}".`}function r2e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function a2e(e){return`Invalid aggregation operator "${e}".`}function wH(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function s2e(e){return`Position range does not support relative band size for ${e}.`}function zC(e,t){return`Dropping ${bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const o2e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function rx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function u2e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function l2e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function c2e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function f2e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function y_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function d2e(e){return`The ${e} for range marks cannot be an expression`}function h2e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function g2e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function p2e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function m2e(e){return`Cannot use the relative band size with ${e} scale.`}function y2e(e){return`Using unaggregated domain with raw field has no effect (${bt(e)}).`}function v2e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function b2e(e){return`Unaggregated domain is currently unsupported for log scale (${bt(e)}).`}function x2e(e){return`Cannot apply size to non-oriented mark "${e}".`}function E2e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function A2e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function CH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function DH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function S2e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(i)}). Using ${bt(n)}.`}function _2e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(i)}). Using the union of the two domains.`}function w2e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function C2e(e){return`Dropping sort property ${bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const j8="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",D2e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",$2e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",M2e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function T2e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function k2e(e){return`Stack is applied to a non-linear scale (${e}).`}function F2e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function db(e,t){return`Invalid ${e}: ${bt(t)}.`}function O2e(e){return`Dropping day from datetime ${bt(e)} as day cannot be combined with other units.`}function N2e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function R2e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function z2e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function P8(e){return`1D error band does not support ${e}.`}function $H(e){return`Channel ${e} is required for "binned" bin.`}function B2e(e){return`Channel ${e} should not be used with "binned" bin.`}function L2e(e){return`Domain for ${e} is required for threshold scale.`}const MH=$ye(Nq);let Ac=MH;function U2e(e){return Ac=e,Ac}function I2e(){return Ac=MH,Ac}function ET(...e){Ac.error(...e)}function de(...e){Ac.warn(...e)}function j2e(...e){Ac.debug(...e)}function Yc(e){if(e&&lt(e)){for(const t of ST)if(ce(e,t))return!0}return!1}const TH=["january","february","march","april","may","june","july","august","september","october","november","december"],P2e=TH.map(e=>e.substr(0,3)),kH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],q2e=kH.map(e=>e.substr(0,3));function H2e(e){if(W2(e)&&(e=+e),Pt(e))return e>4&&de(db("quarter",e)),e-1;throw new Error(db("quarter",e))}function G2e(e){if(W2(e)&&(e=+e),Pt(e))return e-1;{const t=e.toLowerCase(),n=TH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=P2e.indexOf(i);if(r!==-1)return r;throw new Error(db("month",e))}}function Y2e(e){if(W2(e)&&(e=+e),Pt(e))return e%7;{const t=e.toLowerCase(),n=kH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=q2e.indexOf(i);if(r!==-1)return r;throw new Error(db("day",e))}}function AT(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(de(O2e(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?G2e(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?H2e(e.quarter):e.quarter;n.push(Pt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Y2e(e.day):e.day;n.push(Pt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Sc(e){const n=AT(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function X2e(e){const n=AT(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function V2e(e){const t=AT(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const FH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ST=le(FH);function W2e(e){return Ne(FH,e)}function Xc(e){return lt(e)?e.binned:OH(e)}function OH(e){return e?.startsWith("binned")}function _T(e){return e.startsWith("utc")}function Q2e(e){return e.substring(3)}const Z2e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ax(e){return ST.filter(t=>RH(e,t))}function NH(e){const t=ax(e);return t[t.length-1]}function RH(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function K2e(e,t,{end:n}={end:!1}){const i=uT(t),r=_T(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of ST)RH(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),X2e(o)}function zH(e){if(!e)return;const t=ax(e);return`timeUnitSpecifier(${bt(t)}, ${bt(Z2e)})`}function J2e(e,t,n){if(!e)return;const i=zH(e);return`${n||_T(e)?"utc":"time"}Format(${t}, ${i})`}function Un(e){if(!e)return;let t;return Pe(e)?OH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:lt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),_T(t.unit)&&(t.utc=!0,t.unit=Q2e(t.unit)),t}function exe(e){const{utc:t,...n}=Un(e);return n.unit?(t?"utc":"")+le(n).map(i=>jt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(i=>jt(`_${i}_${n[i]}`)).join("")}`}function BH(e,t=n=>n){const n=Un(e),i=NH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=LH(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Sc(o))} - ${t(Sc(r))}`}}const txe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function nxe(e){return Ne(txe,e)}function LH(e,t=1){if(nxe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function ixe(e){return ce(e,"param")}function wT(e){return!!e?.field&&e.equal!==void 0}function CT(e){return!!e?.field&&e.lt!==void 0}function DT(e){return!!e?.field&&e.lte!==void 0}function $T(e){return!!e?.field&&e.gt!==void 0}function MT(e){return!!e?.field&&e.gte!==void 0}function TT(e){if(e?.field){if(be(e.range)&&e.range.length===2)return!0;if(Ae(e.range))return!0}return!1}function kT(e){return!!e?.field&&(be(e.oneOf)||be(e.in))}function rxe(e){return!!e?.field&&e.valid!==void 0}function UH(e){return kT(e)||wT(e)||TT(e)||CT(e)||$T(e)||DT(e)||MT(e)}function Va(e,t){return px(e,{timeUnit:t,wrapTime:!0})}function axe(e,t){return e.map(n=>Va(n,t))}function IH(e,t=!0){const{field:n}=e,i=Un(e.timeUnit),{unit:r,binned:a}=i||{},s=me(e,{expr:"datum"}),o=r?`time(${a?s:K2e(r,n)})`:s;if(wT(e))return`${o}===${Va(e.equal,r)}`;if(CT(e)){const l=e.lt;return`${o}<${Va(l,r)}`}else if($T(e)){const l=e.gt;return`${o}>${Va(l,r)}`}else if(DT(e)){const l=e.lte;return`${o}<=${Va(l,r)}`}else if(MT(e)){const l=e.gte;return`${o}>=${Va(l,r)}`}else{if(kT(e))return`indexof([${axe(e.oneOf,r).join(",")}], ${o}) !== -1`;if(rxe(e))return sx(o,e.valid);if(TT(e)){const{range:l}=Xn(e),f=Ae(l)?{signal:`${l.signal}[0]`}:l[0],d=Ae(l)?{signal:`${l.signal}[1]`}:l[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${Va(f,r)}, ${Va(d,r)}])`;const h=[];return f!==null&&h.push(`${o} >= ${Va(f,r)}`),d!==null&&h.push(`${o} <= ${Va(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${bt(e)}`)}function sx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function sxe(e){return UH(e)&&e.timeUnit?{...e,timeUnit:Un(e.timeUnit)}:e}const am={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function oxe(e){return e==="quantitative"||e==="temporal"}function jH(e){return e==="ordinal"||e==="nominal"}const _c=am.quantitative,FT=am.ordinal,Hd=am.temporal,OT=am.nominal,xh=am.geojson;function uxe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case _c:return"quantitative";case"t":case Hd:return"temporal";case"o":case FT:return"ordinal";case"n":case OT:return"nominal";case xh:return"geojson"}}const Vn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},BC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function lxe(e,t){const n=BC[e],i=BC[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const cxe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function q8(e){return cxe[e]}const PH=new Set(["linear","log","pow","sqrt","symlog"]),qH=new Set([...PH,"time","utc"]);function HH(e){return PH.has(e)}const GH=new Set(["quantile","quantize","threshold"]),fxe=new Set([...qH,...GH,"sequential","identity"]),dxe=new Set(["ordinal","bin-ordinal","point","band"]);function In(e){return dxe.has(e)}function $a(e){return fxe.has(e)}function rs(e){return qH.has(e)}function Gd(e){return GH.has(e)}const hxe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function gxe(e){return!Pe(e)&&ce(e,"name")}function YH(e){return ce(e,"param")}function pxe(e){return ce(e,"unionWith")}function mxe(e){return lt(e)&&"field"in e}const yxe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:C$e,domain:D$e,range:$$e,rangeMax:M$e,rangeMin:T$e,scheme:k$e,...vxe}=yxe,bxe=le(vxe);function LC(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return rs(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return rs(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return rs(e);case"nice":return rs(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return $a(e)&&!Ze(["log","time","utc","threshold","quantile"],e)}}function XH(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return gd(e)?void 0:p2e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function xxe(e,t){return Ze([FT,OT],t)?e===void 0||In(e):t===Hd?Ze([Vn.TIME,Vn.UTC,void 0],e):t===_c?HH(e)||Gd(e)||e===void 0:!0}function Exe(e,t,n=!1){if(!Fs(e))return!1;switch(e){case qt:case Pn:case el:case bh:case ra:case Ba:return rs(t)||t==="band"?!0:t==="point"?!n:!1;case tl:return Ze(["linear","band"],t);case Fo:case rl:case Oo:case nl:case il:case Pc:return rs(t)||Gd(t)||Ze(["band","point","ordinal"],t);case nr:case Ms:case Ts:return t!=="band";case al:case ir:return t==="ordinal"||Gd(t)}}function Axe(e){return lt(e)&&"value"in e}const Ui={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},VH=Ui.arc,ox=Ui.area,ux=Ui.bar,Sxe=Ui.image,lx=Ui.line,cx=Ui.point,_xe=Ui.rect,hb=Ui.rule,WH=Ui.text,NT=Ui.tick,wxe=Ui.trail,RT=Ui.circle,zT=Ui.square,QH=Ui.geoshape;function ol(e){return["line","area","trail"].includes(e)}function hp(e){return["rect","bar","image","arc","tick"].includes(e)}const Cxe=new Set(le(Ui));function vs(e){return ce(e,"type")}const Dxe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],$xe=["fill","fillOpacity"],Mxe=[...Dxe,...$xe],Txe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},H8=le(Txe),v_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],kxe={area:["line","point"],bar:v_,rect:v_,line:["point"],tick:["bandSize","thickness",...v_]},Fxe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Oxe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},ZH=le(Oxe);function wc(e){return ce(e,"band")}const Nxe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Rxe=5,BT={binSpacing:0,continuousBandSize:Rxe,minBandSize:.25,timeUnitBandPosition:.5},zxe={...BT,binSpacing:1},Bxe={...BT,thickness:1};function Lxe(e){return vs(e)?e.type:e}function KH(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function LT({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!$a(i)||r)return"always-valid";const a=KH(Mt("invalid",e,t),{isPath:ol(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function Uxe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function JH({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function eG({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=Ta(t),l=nx(o?.aggregate),f=LT({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:sx(me(o,{expr:"datum"}),!1),...Ixe(d,n,i)}}}function Ixe(e,t,n){if(Axe(e)){const{value:i}=e;return Ae(i)?{signal:i.signal}:{value:i}}return JH({scale:t,scaleName:n,mode:"zeroOrMin"})}function UT(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=qc(t),l=IT(e),f=eG({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,l]:l}function jxe(e){const{datum:t}=e;return Yc(t)?Sc(t):`${bt(t)}`}function ic(e,t,n,i){const r={};if(t&&(r.scale=t),Os(e)){const{datum:a}=e;Yc(a)?r.signal=Sc(a):Ae(a)?r.signal=a.signal:rm(a)?r.signal=a.expr:r.value=a}else r.field=me(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function gb({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!Ae(s)&&0<s&&s<1?"datum":void 0,l=me(t,{expr:o,suffix:r}),f=n!==void 0?me(n,{expr:o}):me(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?l:f;d.field=h}else{const h=Ae(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${f}`:`${1-s} * ${l} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function Pxe({scaleName:e,fieldDef:t}){const n=me(t,{expr:"datum"}),i=me(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function IT({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f,bandPosition:d}){if(t){if(je(t)){const h=s?.get("type");if(Bi(t)){d??=Gu({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Rt(p)||d&&y&&v===Hd)return o?.impute?ic(t,a,{binSuffix:"mid"},{offset:l}):d&&!In(h)?gb({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):ic(t,a,cm(t,e)?{binSuffix:"range"}:{},{offset:l});if(Yn(p)){if(he(n))return gb({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});de($H(e===qt?za:$s))}}return ic(t,a,In(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(Ma(t)){const h=t.value,p=l?{offset:l}:{};return{...zg(e,h),...p}}}return Tye(f)&&(f=f()),f&&{...f,...l?{offset:l}:{}}}function zg(e,t){return Ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Lt(t)}function Cc(e){return e&&e!=="number"&&e!=="time"}function tG(e,t,n){return`${e}(${t}${n?`, ${bt(n)}`:""})`}function jT({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Cc(n))return Aa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=nG(e,i,r),o=Yd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return Aa({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return Aa({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&he(e)&&e.timeUnit===void 0)return Aa({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function l(f){return he(f)?Un(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Vd(e)){const{unit:f,utc:d}=l(e),h=Hxe({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||Vc(e)&&e.scale?.type===Vn.UTC});return h?{signal:h}:void 0}if(t=UC({type:o,specifiedFormat:t,config:a,normalizeStack:r}),he(e)&&Rt(e.bin)){const f=me(e,{expr:i,binSuffix:"end"});return{signal:sm(s,f,t,n,a)}}else return t||Yd(e)==="quantitative"?{signal:`${aG(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function nG(e,t,n){return he(e)?n?`${me(e,{expr:t,suffix:"end"})}-${me(e,{expr:t,suffix:"start"})}`:me(e,{expr:t}):jxe(e)}function Aa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=nG(e,i,r),s!=="datum.value"&&he(e)&&Rt(e.bin)){const o=me(e,{expr:i,binSuffix:"end"});return{signal:sm(s,o,t,n,a)}}return{signal:tG(n,s,t)}}function iG(e,t,n,i,r,a){if(!(Pe(i)&&Cc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Yd(e)==="quantitative"&&(r.normalizedNumberFormatType&&Xd(e)&&e.stack==="normalize"||r.numberFormatType))){if(Xd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return UC({type:"quantitative",config:r,normalizeStack:!0});if(Vd(e)){const s=he(e)?Un(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:qxe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return UC({type:t,specifiedFormat:n,config:r})}}function rG(e,t,n){if(e&&(Ae(e)||e==="number"||e==="time"))return e;if(Vd(t)&&n!=="time"&&n!=="utc")return he(t)&&Un(t?.timeUnit)?.utc?"utc":"time"}function UC({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Pe(t))return t;if(e===_c)return i?n.normalizedNumberFormat:n.numberFormat}function qxe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:zH(t)}:i?void 0:n.timeFormat)}function aG(e,t){return`format(${e}, "${t||""}")`}function G8(e,t,n,i){return Cc(n)?tG(n,e,t):aG(e,(Pe(t)?t:void 0)??i.numberFormat)}function sm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return sm(e,t,r.numberFormat,r.numberFormatType,r);const a=G8(e,n,i,r),s=G8(t,n,i,r);return`${sx(e,!1)} ? "null" : ${a} + "${kbe}" + ${s}`}function Hxe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${bt(n)})`:(n=Pe(n)?n:r,`${a?"utc":"time"}Format(${e}, ${bt(n)})`):J2e(t,e,a)}const fx="min",Gxe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Y8(e){return gn(Gxe,e)}function Yxe(e){return ce(e,"encoding")}function bo(e){return e&&(e.op==="count"||ce(e,"field"))}function sG(e){return e&&be(e)}function om(e){return ce(e,"row")||ce(e,"column")}function PT(e){return ce(e,"header")}function dx(e){return ce(e,"facet")}function Xxe(e){return ce(e,"param")}function Vxe(e){return!Pe(e)&&ce(e,"repeat")}function X8(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function qT(e){return ce(e,"sort")}function Gu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(je(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return ys("timeUnitBandPosition",n,i);if(Rt(a))return .5}}function oG({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=rr(e),l=Mt(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(he(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:ys("timeUnitBandSize",i,r)};if(Rt(d)&&!In(a))return{band:1}}if(hp(i.type))return a?In(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function uG(e,t,n,i){return Rt(e.bin)||e.timeUnit&&Bi(e)&&e.type==="temporal"?Gu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function lG(e){return ce(e,"sort")&&!ce(e,"field")}function um(e){return ce(e,"condition")}function hx(e){const t=e?.condition;return!!t&&!be(t)&&he(t)}function lm(e){const t=e?.condition;return!!t&&!be(t)&&je(t)}function Wxe(e){const t=e?.condition;return!!t&&(be(t)||Ma(t))}function he(e){return ce(e,"field")||e?.aggregate==="count"}function Yd(e){return e?.type}function Os(e){return ce(e,"datum")}function wu(e){return Bi(e)&&!mb(e)||pb(e)}function V8(e){return Bi(e)&&e.type==="quantitative"&&!e.bin||pb(e)}function pb(e){return Os(e)&&Pt(e.datum)}function je(e){return he(e)||Os(e)}function Bi(e){return e&&(ce(e,"field")||e.aggregate==="count")&&ce(e,"type")}function Ma(e){return ce(e,"value")}function Vc(e){return ce(e,"scale")||ce(e,"sort")}function Xd(e){return ce(e,"axis")||ce(e,"stack")||ce(e,"impute")}function cG(e){return ce(e,"legend")}function fG(e){return ce(e,"format")||ce(e,"formatType")}function Qxe(e){return wr(e,["legend","axis","header","scale"])}function Zxe(e){return ce(e,"op")}function me(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Jxe(e))n=eH("count");else{let s;if(!t.nofn)if(Zxe(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:f}=e;Rt(o)?(s=gH(o),r=(t.binSuffix??"")+(t.suffix??"")):l?sl(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):wo(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):f&&!Xc(f)&&(s=exe(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?vh(n):t.expr?Zq(n,t.expr)+a:ta(n)+a}function mb(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(_H(e.type))}function Kxe(e){return Vc(e)&&Gd(e.scale?.type)}function Jxe(e){return e.aggregate==="count"}function eEe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Rt(i))return`${n} (binned)`;if(r&&!Xc(r)){const s=Un(r)?.unit;if(s)return`${n} (${ax(s).join("-")})`}else if(a)return sl(a)?`${n} for max ${a.argmax}`:wo(a)?`${n} for min ${a.argmin}`:`${em(a)} of ${n}`;return n}function tEe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(sl(t))return`${r} for argmax(${t.argmax})`;if(wo(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Xc(i)?Un(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Rt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const dG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return tEe(e);default:return eEe(e,t)}};let hG=dG;function gG(e){hG=e}function nEe(){gG(dG)}function pd(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=HT(e)?.title;if(!he(e))return r??e.title;const a=e,s=i?GT(a,t):void 0;return n?on(r,a.title,s):r??a.title??s}function HT(e){if(Xd(e)&&e.axis)return e.axis;if(cG(e)&&e.legend)return e.legend;if(PT(e)&&e.header)return e.header}function GT(e,t){return hG(e,t)}function yb(e){if(fG(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=HT(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function iEe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(qT(e)&&be(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!sl(n)&&!wo(n))return"quantitative";if(Vc(e)&&e.scale?.type)switch(BC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ta(e){if(he(e))return e;if(hx(e))return e.condition}function An(e){if(je(e))return e;if(lm(e))return e.condition}function pG(e,t,n,i={}){if(Pe(e)||Pt(e)||Qp(e)){const r=Pe(e)?"string":Pt(e)?"number":"boolean";return de(i2e(t,r,e)),{value:e}}return je(e)?vb(e,t,n,i):lm(e)?{...e,condition:vb(e.condition,t,n,i)}:e}function vb(e,t,n,i){if(fG(e)){const{format:r,formatType:a,...s}=e;if(Cc(a)&&!n.customFormatTypes)return de(I8(t)),vb(s,t,n,i)}else{const r=Xd(e)?"axis":cG(e)?"legend":PT(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Cc(s)&&!n.customFormatTypes)return de(I8(t)),vb({...e,[r]:o},t,n,i)}}return he(e)?YT(e,t,i):rEe(e)}function rEe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Pt(n)?"quantitative":Pe(n)?"nominal":Yc(n)?"temporal":void 0,{...e,type:t}}function YT(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!yT(i)&&!sl(i)&&!wo(i)&&(de(a2e(i)),delete o.aggregate),r&&(o.timeUnit=Un(r)),s&&(o.field=`${s}`),Rt(a)&&(o.bin=gx(a,t)),Yn(a)&&!un(t)&&de(B2e(t)),Bi(o)){const{type:l}=o,f=uxe(l);l!==f&&(o.type=f),l!=="quantitative"&&nx(i)&&(de(r2e(l,i)),o.type="quantitative")}else if(!uH(t)){const l=iEe(o,t);o.type=l}if(Bi(o)){const{compatible:l,warning:f}=aEe(o,t)||{};l===!1&&de(f)}if(qT(o)&&Pe(o.sort)){const{sort:l}=o;if(Y8(l))return{...o,sort:{encoding:l}};const f=l.substring(1);if(l.charAt(0)==="-"&&Y8(f))return{...o,sort:{encoding:f,order:"descending"}}}if(PT(o)){const{header:l}=o;if(l){const{orient:f,...d}=l;if(f)return{...o,header:{...d,labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f}}}}return o}function gx(e,t){return Qp(e)?{maxbins:k8(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:k8(t)}:e}const Yf={compatible:!0};function aEe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case yo:case vo:case Q2:return mb(e)?Yf:{compatible:!1,warning:l2e(t)};case qt:case Pn:case el:case bh:case nr:case Ms:case Ts:case tm:case nm:case Z2:case Ec:case K2:case J2:case Pc:case ra:case Ba:case ex:return Yf;case Ua:case na:case La:case Ia:return n!==_c?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Yf;case Oo:case nl:case il:case rl:case Fo:case ko:case To:case za:case $s:case tl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Yf;case ir:case al:return!mb(e)&&!Kxe(e)?{compatible:!1,warning:c2e(t)}:Yf;case qd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Yf}}function Vd(e){const{formatType:t}=yb(e);return t==="time"||!t&&sEe(e)}function sEe(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function px(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Un(t)?.unit;let s=a||n==="temporal",o;return rm(e)?o=e.expr:Ae(e)?o=e.signal:Yc(e)?(s=!0,o=Sc(e)):(Pe(e)||Pt(e))&&s&&(o=`datetime(${bt(e)})`,W2e(a)&&(Pt(e)&&e<1e4||Pe(e)&&isNaN(Date.parse(e)))&&(o=Sc({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:bt(e)}function mG(e,t){const{type:n}=e;return t.map(i=>{const r=he(e)&&!Xc(e.timeUnit)?e.timeUnit:void 0,a=px(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function cm(e,t){return Rt(e.bin)?Fs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const W8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function fm(e){return e?.condition}const yG=["domain","grid","labels","ticks","title"],oEe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},vG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},uEe={...vG,style:1,labelExpr:1,encoding:1};function Q8(e){return gn(uEe,e)}const lEe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},bG=le(lEe);function Ro(e){return ce(e,"mark")}class mx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ro(t)?Lxe(t.mark)===this.name:!1}}function rc(e,t){const n=e?.[t];return n?be(n)?jd(n,i=>!!i.field):he(n)||hx(n):!1}function xG(e,t){const n=e?.[t];return n?be(n)?jd(n,i=>!!i.field):he(n)||Os(n)||lm(n):!1}function EG(e,t){if(un(t)){const n=e[t];if((he(n)||Os(n))&&(jH(n.type)||he(n)&&n.timeUnit)){const i=dT(t);return xG(e,i)}}return!1}function AG(e){return jd(rbe,t=>{if(rc(e,t)){const n=e[t];if(be(n))return jd(n,i=>!!i.aggregate);{const i=Ta(n);return i&&!!i.aggregate}}return!1})}function SG(e,t){const n=[],i=[],r=[],a=[],s={};return XT(e,(o,l)=>{if(he(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=HT(o)?.title;let E=me(o,{forAs:!0});const S={...b?[]:{title:pd(o,t,{allowDisabling:!0})},...y,field:E};if(d){let _;if(sl(d)?(_="argmax",E=me({op:"argmax",field:d.argmax},{forAs:!0}),S.field=`${E}.${f}`):wo(d)?(_="argmin",E=me({op:"argmin",field:d.argmin},{forAs:!0}),S.field=`${E}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(_=d),_){const w={op:_,as:E};f&&(w.field=f),a.push(w)}}else if(n.push(E),Bi(o)&&Rt(h)){if(i.push({bin:h,field:f,as:E}),n.push(me(o,{binSuffix:"end"})),cm(o,l)&&n.push(me(o,{binSuffix:"range"})),un(l)){const _={field:`${E}_end`};s[`${l}2`]=_}S.bin="binned",uH(l)||(S.type=_c)}else if(p&&!Xc(p)){r.push({timeUnit:p,field:f,as:E});const _=Bi(o)&&o.type!==Hd&&"time";_&&(l===tm||l===Ec?S.formatType=_:pbe(l)?S.legend={formatType:_,...S.legend}:un(l)&&(S.axis={formatType:_,...S.axis}))}s[l]=S}else n.push(f),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function cEe(e,t,n){const i=ybe(t,n);if(i){if(i==="binned"){const r=e[t===za?qt:Pn];return!!(he(r)&&he(e[t])&&Yn(r.bin))}}else return!1;return!0}function fEe(e,t,n,i){const r={};for(const a of le(e))oH(a)||de(u2e(a));for(let a of cbe){if(!e[a])continue;const s=e[a];if(im(a)){const o=lbe(a),l=r[o];if(he(l)&&oxe(l.type)&&he(s)&&!l.timeUnit){de(n2e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(de(t2e),a=ra),!cEe(e,a,t)){de(rx(a,t));continue}if(a===Fo&&t==="line"&&Ta(e[a])?.aggregate){de(o2e);continue}if(a===nr&&(n?"fill"in e:"stroke"in e)){de(wH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===nm||a===qd&&!be(s)&&!Ma(s)||a===Ec&&be(s)){if(s){if(a===qd){const o=e[a];if(lG(o)){r[a]=o;continue}}r[a]=sn(s).reduce((o,l)=>(he(l)?o.push(YT(l,a)):de(zC(l,a)),o),[])}}else{if(a===Ec&&s===null)r[a]=null;else if(!he(s)&&!Os(s)&&!Ma(s)&&!um(s)&&!Ae(s)){de(zC(s,a));continue}r[a]=pG(s,a,i)}}return r}function yx(e,t){const n={};for(const i of le(e)){const r=pG(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function dEe(e){const t=[];for(const n of le(e))if(rc(e,n)){const i=e[n],r=sn(i);for(const a of r)he(a)?t.push(a):hx(a)&&t.push(a.condition)}return t}function XT(e,t,n){if(e)for(const i of le(e)){const r=e[i];if(be(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function hEe(e,t,n,i){return e?le(e).reduce((r,a)=>{const s=e[a];return be(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function _G(e,t){return le(t).reduce((n,i)=>{switch(i){case qt:case Pn:case K2:case ex:case J2:case za:case $s:case el:case bh:case ra:case ko:case Ba:case To:case tl:case La:case Ua:case Ia:case na:case tm:case ir:case Pc:case Ec:return n;case qd:if(e==="line"||e==="trail")return n;case nm:case Z2:{const r=t[i];if(be(r)||he(r))for(const a of sn(r))a.aggregate||n.push(me(a,{}));return n}case Fo:if(e==="trail")return n;case nr:case Ms:case Ts:case Oo:case nl:case il:case al:case rl:{const r=Ta(t[i]);return r&&!r.aggregate&&n.push(me(r,{})),n}}},[])}function gEe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(be(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return be(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function IC(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${VT(t)}`:"";return{field:s+t.field,type:t.type,title:Ae(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=dEe(n).map(Qxe);return{tooltip:[...r,...is(a,et)]}}function VT(e){const{title:t,field:n}=e;return on(t,n)}function WT(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=VT(n);return wG(e,o,r,{mark:l,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Pe(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function wG(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...vs(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...Qp(e[t])?{}:e[t]}}]:[]}function CG(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:ay(a,n),continuousAxisChannelDef2:ay(s,n),continuousAxisChannelDefError:ay(o,n),continuousAxisChannelDefError2:ay(l,n),continuousAxis:r}}function ay(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(z2e(n,t)),i}else return e}function DG(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(vs(n)&&n.orient)return n.orient;if(wu(r)){if(wu(a)){const s=he(r)&&r.aggregate,o=he(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Vd(a)&&!Vd(r)?"horizontal":"vertical"}return"horizontal"}else{if(wu(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const bb="boxplot",pEe=["box","median","outliers","rule","ticks"],mEe=new mx(bb,MG);function $G(e){return Pt(e)?"tukey":e}function MG(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=vs(n)?n:{type:n};r&&de(SH("boxplot"));const l=o.extent??t.boxplot.extent,f=Mt("size",o,t),d=o.invalid,h=$G(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:E,groupby:S,aggregate:_,encodingWithoutContinuousAxis:w,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:T}=yEe(e,l,t),D=vh(b.field),{color:F,size:O,...U}=w,z=fn=>WT(o,E,b,fn,t.boxplot),G=z(U),B=z(w),j=(lt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",I=z({...U,...O?{size:O}:{},color:{condition:{test:`${At(`lower_box_${b.field}`)} >= ${At(`upper_box_${b.field}`)}`,...F||{value:j}}}}),N=IC([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,w),q={type:"tick",color:"black",opacity:1,orient:C,invalid:d,aria:!1},Y=h==="min-max"?N:IC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,w),J=[...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...G({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...G({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],R=[...h!=="tukey"?J:[],...B({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:$,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...I({partName:"median",mark:{type:"tick",invalid:d,...lt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:N})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:R};const V=At(`lower_box_${b.field}`),se=At(`upper_box_${b.field}`),oe=`(${se} - ${V})`,ge=`${V} - ${l} * ${oe}`,Se=`${se} + ${l} * ${oe}`,De=At(b.field),en={joinaggregate:TG(b.field),groupby:S},at={transform:[{filter:`(${ge} <= ${De}) && (${De} <= ${Se})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${D}`},{op:"max",field:b.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${D}`},..._],groupby:S}],layer:J},{tooltip:ye,...Ie}=U,{scale:qe,axis:fe}=b,tn=VT(b),st=wG(o,"outliers",t.boxplot,{transform:[{filter:`(${De} < ${ge}) || (${De} > ${Se})`}],mark:"point",encoding:{[E]:{field:b.field,type:b.type,...tn!==void 0?{title:tn}:{},...qe!==void 0?{scale:qe}:{},...fe!==void 0?{axis:fe}:{}},...Ie,...F?{color:F}:{},...T?{tooltip:T}:{}}})[0];let cn;const Cn=[...p,...y,en];return st?cn={transform:Cn,layer:[st,at]}:(cn=at,cn.transform.unshift(...Cn)),{...s,layer:[cn,{transform:v,layer:R}]}}function TG(e){const t=vh(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function yEe(e,t,n){const i=DG(e,bb),{continuousAxisChannelDef:r,continuousAxis:a}=CG(e,i,bb),s=r.field,o=vh(s),l=$G(t),f=[...TG(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${At(`upper_box_${o}`)} - ${At(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${At(`upper_box_${o}`)} + ${At(`iqr_${o}`)} * ${t}, ${At(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${At(`lower_box_${o}`)} - ${At(`iqr_${o}`)} * ${t}, ${At(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=gEe(p),{bins:b,timeUnits:E,aggregate:S,groupby:_,encoding:w}=SG(v,n),C=i==="vertical"?"horizontal":"vertical",$=i,T=[...b,...E,{aggregate:[...S,...f],groupby:_},...d];return{bins:b,timeUnits:E,transform:T,groupby:_,aggregate:S,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:w,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:y}}const QT="errorbar",vEe=["ticks","rule"],bEe=new mx(QT,kG);function kG(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:f}=FG(e,QT,t);delete a.size;const d=WT(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function xEe(e,t){const{encoding:n}=e;if(EEe(n))return{orient:DG(e,t),inputType:"raw"};const i=AEe(n),r=SEe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(je(o)&&je(l))throw new Error(`${t} cannot have both x2 and y2`);if(je(o)){if(wu(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(je(l)){if(wu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(je(l)&&!je(o))throw new Error(`${t} cannot have xError2 without xError`);if(je(d)&&!je(f))throw new Error(`${t} cannot have yError2 without yError`);if(je(o)&&je(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(je(o)){if(wu(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(je(f)){if(wu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function EEe(e){return(je(e.x)||je(e.y))&&!je(e.x2)&&!je(e.y2)&&!je(e.xError)&&!je(e.xError2)&&!je(e.yError)&&!je(e.yError2)}function AEe(e){return je(e.x2)||je(e.y2)}function SEe(e){return je(e.xError)||je(e.xError2)||je(e.yError)||je(e.yError2)}function FG(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=vs(i)?i:{type:i};a&&de(SH(t));const{orient:f,inputType:d}=xEe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=CG(e,f,t),{errorBarSpecificAggregate:E,postAggregateCalculates:S,tooltipSummary:_,tooltipTitleWithFieldName:w}=_Ee(l,h,p,y,v,d,t,n),{[b]:C,[b==="x"?"x2":"y2"]:$,[b==="x"?"xError":"yError"]:T,[b==="x"?"xError2":"yError2"]:D,...F}=r,{bins:O,timeUnits:U,aggregate:z,groupby:G,encoding:B}=SG(F,n),j=[...z,...E],I=d!=="raw"?[]:G,N=IC(_,h,B,w);return{transform:[...o.transform??[],...O,...U,...j.length===0?[]:[{aggregate:j,groupby:I}],...S],groupby:I,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:B,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:N}}function _Ee(e,t,n,i,r,a,s,o){let l=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&de(R2e(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${At(`center_${d}`)} + ${At(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${At(`center_${d}`)} - ${At(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:em(y)},{fieldPrefix:"upper_",titlePrefix:Z8(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:Z8(y,v,"-")}],p=!0;else{let b,E,S;v==="ci"?(b="mean",E="ci0",S="ci1"):(b="median",E="q1",S="q3"),l=[{op:E,field:d,as:`lower_${d}`},{op:S,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:pd({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:pd({field:d,aggregate:E,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:pd({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(N2e(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:At(n.field),as:`upper_${d}`},{calculate:At(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${At(d)} + ${At(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${At(d)} + ${At(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${At(d)} - ${At(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:xc(xc(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function Z8(e,t,n){return`${em(e)} ${n} ${t}`}const ZT="errorband",wEe=["band","borders"],CEe=new mx(ZT,OG);function OG(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=FG(e,ZT,t),f=s,d=WT(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?de(P8("interpolate")):f.tension&&de(P8("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const NG={};function KT(e,t,n){const i=new mx(e,t);NG[e]={normalizer:i,parts:n}}function DEe(){return le(NG)}KT(bb,MG,pEe);KT(QT,kG,vEe);KT(ZT,OG,wEe);const $Ee=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],RG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},zG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},MEe=le(RG),TEe=le(zG),kEe={header:1,headerRow:1,headerColumn:1,headerFacet:1},BG=le(kEe),LG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],FEe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},OEe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ka="_vgsid_",NEe={point:{on:"click",fields:[ka],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function JT(e){return e==="legend"||!!e?.legend}function b_(e){return JT(e)&&lt(e)}function ek(e){return!!e?.select}function UG(e){const t=[];for(const n of e||[]){if(ek(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function REe(e){return vx(e)||nk(e)||tk(e)}function tk(e){return ce(e,"concat")}function vx(e){return ce(e,"vconcat")}function nk(e){return ce(e,"hconcat")}function IG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function bs(e){return ce(e,"step")}function K8(e){return ce(e,"view")||ce(e,"width")||ce(e,"height")}const J8=20,zEe={align:1,bounds:1,center:1,columns:1,spacing:1},BEe=le(zEe);function LEe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(dx(e)&&!om(e.facet)||tk(e))&&(r.columns=s),vx(e)&&(r.columns=1);for(const o of BEe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=Pt(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function jC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function PC(e,t){const n=xb(e,t);return bs(n)?n.step:jG}function xb(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return on(n,{step:e.step})}const jG=20,UEe={continuousWidth:300,continuousHeight:300,step:jG},IEe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:UEe,mark:Fxe,arc:{},area:{},bar:zxe,circle:{},geoshape:{},image:{},line:{},point:{},rect:BT,rule:{color:"black"},square:{},text:{color:"black"},tick:Bxe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:hxe,projection:{},legend:FEe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:NEe,style:{},title:{},facet:{spacing:J8},concat:{spacing:J8},normalizedNumberFormat:".0%"},Ks=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],e9={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},t9={blue:Ks[0],orange:Ks[1],red:Ks[2],teal:Ks[3],green:Ks[4],yellow:Ks[5],purple:Ks[6],pink:Ks[7],brown:Ks[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function jEe(e={}){return{signals:[{name:"color",value:lt(e)?{...t9,...e}:t9}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function PEe(e){return{signals:[{name:"fontSize",value:lt(e)?{...e9,...e}:e9}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function qEe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function PG(e){const t=le(e||{}),n={};for(const i of t){const r=e[i];n[i]=fm(r)?mH(r):br(r)}return n}function HEe(e){const t=le(e),n={};for(const i of t)n[i]=PG(e[i]);return n}const GEe=[...ZH,...bG,...BG,"background","padding","legend","lineBreak","scale","style","title","view"];function qG(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Rq({},Le(IEe),n?qEe(n):{},t?jEe(t):{},i?PEe(i):{},a||{});r&&H2(s,"selection",r,!0);const o=wr(s,GEe);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=br(s[l]));for(const l of ZH)s[l]&&(o[l]=Xn(s[l]));for(const l of bG)s[l]&&(o[l]=PG(s[l]));for(const l of BG)s[l]&&(o[l]=Xn(s[l]));if(s.legend&&(o.legend=Xn(s.legend)),s.scale){const{invalid:l,...f}=s.scale,d=Xn(l,{level:1});o.scale={...Xn(f),...le(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=HEe(s.style)),s.title&&(o.title=Xn(s.title)),s.view&&(o.view=Xn(s.view)),o}const YEe=new Set(["view",...Cxe]),XEe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],VEe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...kxe};function WEe(e){e=Le(e);for(const t of XEe)delete e[t];if(e.axis)for(const t in e.axis)fm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of $Ee)delete e.legend[t];if(e.mark){for(const t of H8)delete e.mark[t];e.mark.tooltip&&lt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(UG(e.params)),delete e.params);for(const t of YEe){for(const i of H8)delete e[t][i];const n=VEe[t];if(n)for(const i of n)delete e[t][i];ZEe(e,t)}for(const t of DEe())delete e[t];QEe(e);for(const t in e)lt(e[t])&&Ot(e[t])&&delete e[t];return Ot(e)?void 0:e}function QEe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=pH(e.title);Ot(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ot(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ot(i)?delete e.title:e.title=i}function ZEe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};Ot(a)||(e.style[n??t]=a),delete e[t]}function bx(e){return ce(e,"layer")}function KEe(e){return ce(e,"repeat")}function JEe(e){return!be(e.repeat)&&ce(e.repeat,"layer")}class ik{map(t,n){return dx(t)?this.mapFacet(t,n):KEe(t)?this.mapRepeat(t,n):nk(t)?this.mapHConcat(t,n):vx(t)?this.mapVConcat(t,n):tk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(bx(t))return this.mapLayer(t,n);if(Ro(t))return this.mapUnit(t,n);throw new Error(vT(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const eAe={zero:1,center:1,normalize:1};function tAe(e){return gn(eAe,e)}const nAe=new Set([VH,ux,ox,hb,cx,RT,zT,lx,WH,NT]),iAe=new Set([ux,ox,VH]);function Xf(e){return he(e)&&Yd(e)==="quantitative"&&!e.bin}function n9(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(he(s)&&he(o))if(Xf(s)&&Xf(o)){if(s.stack)return t;if(o.stack)return r;const l=he(s)&&!!s.aggregate,f=he(o)&&!!o.aggregate;if(l!==f)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Xf(s))return t;if(Xf(o))return r}else{if(Xf(s))return a&&n==="vertical"?void 0:t;if(Xf(o))return a&&n==="horizontal"?void 0:r}}function rAe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function HG(e,t){const n=vs(e)?e:{type:e},i=n.type;if(!nAe.has(i))return null;const r=n9(t,"x",n)||n9(t,"theta",n);if(!r)return null;const a=t[r],s=he(a)?me(a,{}):void 0,o=rAe(r),l=[],f=new Set;if(t[o]){const b=t[o],E=he(b)?me(b,{}):void 0;E&&E!==s&&(l.push(o),f.add(E))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=he(h)?me(h,{}):void 0;p&&p!==s&&(l.push(d),f.add(p));const y=fbe.reduce((b,E)=>{if(E!=="tooltip"&&rc(t,E)){const S=t[E];for(const _ of sn(S)){const w=Ta(_);if(w.aggregate)continue;const C=me(w,{});(!C||!f.has(C))&&b.push({channel:E,fieldDef:w})}}return b},[]);let v;return a.stack!==void 0?Qp(a.stack)?v=a.stack?"zero":null:v=a.stack:iAe.has(i)&&(v="zero"),!v||!tAe(v)||AG(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Vn.LINEAR&&a?.stack&&de(k2e(a.scale.type)),je(t[ks(r)])?(a.stack!==void 0&&de(T2e(r)),null):(he(a)&&a.aggregate&&!_be.has(a.aggregate)&&de(F2e(a.aggregate)),{groupbyChannels:l,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:ol(i),stackBy:y,offset:v}))}function GG(e,t,n){const i=Xn(e),r=Mt("orient",i,n);if(i.orient=uAe(i.type,t,r),r!==void 0&&r!==i.orient&&de(g2e(i.orient,r)),i.type==="bar"&&i.orient){const l=Mt("cornerRadiusEnd",i,n);if(l!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Nxe[i.orient];for(const d of f)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=Mt("opacity",i,n),s=Mt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=sAe(i.type,t)),Mt("cursor",i,n)===void 0&&(i.cursor=aAe(i,t,n)),i}function aAe(e,t,n){return t.href||e.href||Mt("href",e,n)?"pointer":e.cursor}function sAe(e,t){if(Ze([cx,NT,RT,zT],e)&&!AG(t))return .7}function oAe(e,t,{graticule:n}){if(n)return!1;const i=ys("filled",e,t),r=e.type;return on(i,r!==cx&&r!==lx&&r!==hb)}function uAe(e,t,n){switch(e){case cx:case RT:case zT:case WH:case _xe:case Sxe:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case ux:if(he(i)&&(Yn(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(Yn(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(he(i)&&i.type===_c&&!Rt(i.bin)||pb(i))&&he(r)&&Yn(r.bin)?"horizontal":"vertical";if(!s)return(he(r)&&r.type===_c&&!Rt(r.bin)||pb(r))&&he(i)&&Yn(i.bin)?"vertical":"horizontal"}case hb:if(a&&!(he(i)&&Yn(i.bin))&&s&&!(he(r)&&Yn(r.bin)))return;case ox:if(s)return he(r)&&Yn(r.bin)?"horizontal":"vertical";if(a)return he(i)&&Yn(i.bin)?"vertical":"horizontal";if(e===hb){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case lx:case NT:{const o=V8(i),l=V8(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const f=Bi(i)&&i.type===Hd,d=Bi(r)&&r.type===Hd;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function lAe(e){const{point:t,line:n,...i}=e;return le(i).length>1?i:i.type}function cAe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:wr(e[t],["point","line"])});return e}function x_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?lt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?lt(t.point)?t.point:{}:void 0}function i9(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class fAe{name="path-overlay";hasMatchingType(t,n){if(Ro(t)){const{mark:i,encoding:r}=t,a=vs(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!x_(a,n[a.type],r);case"area":return!!x_(a,n[a.type],r)||!!i9(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:f,...d}=t,h=yx(f,r),p=vs(o)?o:{type:o},y=x_(p,r[p.type],h),v=p.type==="area"&&i9(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:lAe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:wr(h,["shape"])}],E=HG(GG(p,h,r),h);let S=h;if(E){const{fieldChannel:_,offset:w}=E;S={...h,[_]:{...h[_],...w?{stack:w}:{}}}}return S=wr(S,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...Id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:S}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Id(p,["clip","tooltip"]),...y},encoding:S}),i({...d,layer:b},{...n,config:cAe(r)})}}function dAe(e,t){return t?om(e)?XG(e,t):YG(e,t):e}function E_(e,t){return t?XG(e,t):e}function qC(e,t,n){const i=t[e];if(Vxe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};de(Gbe(i.repeat));return}return t}function YG(e,t){if(e=qC("field",e,t),e!==void 0){if(e===null)return null;if(qT(e)&&bo(e.sort)){const n=qC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function r9(e,t){if(he(e))return YG(e,t);{const n=qC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function a9(e,t){if(je(e)){const n=r9(e,t);if(n)return n;if(um(e))return{condition:e.condition}}else{if(lm(e)){const n=r9(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function XG(e,t){const n={};for(const i in e)if(ce(e,i)){const r=e[i];if(be(r))n[i]=r.map(a=>a9(a,t)).filter(a=>a);else{const a=a9(r,t);a!==void 0&&(n[i]=a)}}return n}class hAe{name="RuleForRangedLine";hasMatchingType(t){if(Ro(t)){const{encoding:n,mark:i}=t;if(i==="line"||vs(i)&&i.type==="line")for(const r of ube){const a=qc(r),s=n[a];if(n[r]&&(he(s)&&!Yn(s.bin)||Os(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return de(h2e(!!r.x2,!!r.y2)),i({...t,mark:lt(a)?{...a,type:"rule"}:"rule"},n)}}class gAe extends ik{nonFacetUnitNormalizers=[mEe,bEe,CEe,new fAe,new hAe];map(t,n){if(Ro(t)){const i=rc(t.encoding,yo),r=rc(t.encoding,vo),a=rc(t.encoding,Q2);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=E_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return JEe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:l}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:r}},n):{...a,layer:l.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${jt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!be(i)&&t.columns&&(t=wr(t,["columns"]),de(L8("repeat")));const o=[],{repeater:l={},repeaterPrefix:f=""}=n,d=!be(i)&&i.row||[l?l.row:null],h=!be(i)&&i.column||[l?l.column:null],p=be(i)&&i||[l?l.repeat:null];for(const v of p)for(const b of d)for(const E of h){const S={repeat:v,row:b,column:E,layer:l.layer},_=`${(r.name?`${r.name}_`:"")+f}child__${be(i)?`${jt(v)}`:(i.row?`row_${jt(b)}`:"")+(i.column?`column_${jt(E)}`:"")}`,w=this.map(r,{...n,repeater:S,repeaterPrefix:_});w.name=_,o.push(wr(w,["data"]))}const y=be(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return om(i)&&t.columns&&(t=wr(t,["columns"]),de(L8("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=o9({parentProjection:s,projection:r}),f=s9({parentEncoding:a,encoding:E_(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:l,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:E}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),S=E_(s,n.repeater);return this.mapFacet({...v,...E,facet:b,spec:{...l?{width:l}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:S,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&de(f2e([...i?[yo]:[],...r?[vo]:[]]));const s={},o={};for(const l of[yo,vo]){const f=t[l];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[l]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??={},o[b][l]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:l,columns:f,...d}=a;return{facetMapping:dAe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...l?{spacing:l}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,l={...r,parentEncoding:s9({parentEncoding:n,encoding:a,layer:!0}),parentProjection:o9({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},l)}}function s9({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...le(e),...le(t)]);for(const a of r){const s=t[a],o=e[a];if(je(s)){const l={...o,...s};i[a]=l}else lm(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||Ma(o)||Ae(o)||je(o)||be(o))&&(i[a]=o)}}else i=t;return!i||Ot(i)?void 0:i}function o9(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(e2e({parentProjection:t,projection:n})),n??t}function rk(e){return ce(e,"filter")}function pAe(e){return ce(e,"stop")}function VG(e){return ce(e,"lookup")}function mAe(e){return ce(e,"data")}function yAe(e){return ce(e,"param")}function vAe(e){return ce(e,"pivot")}function bAe(e){return ce(e,"density")}function xAe(e){return ce(e,"quantile")}function EAe(e){return ce(e,"regression")}function AAe(e){return ce(e,"loess")}function SAe(e){return ce(e,"sample")}function _Ae(e){return ce(e,"window")}function wAe(e){return ce(e,"joinaggregate")}function CAe(e){return ce(e,"flatten")}function DAe(e){return ce(e,"calculate")}function WG(e){return ce(e,"bin")}function $Ae(e){return ce(e,"impute")}function MAe(e){return ce(e,"timeUnit")}function TAe(e){return ce(e,"aggregate")}function kAe(e){return ce(e,"stack")}function FAe(e){return ce(e,"fold")}function OAe(e){return ce(e,"extent")&&!ce(e,"density")&&!ce(e,"regression")}function NAe(e){return e.map(t=>rk(t)?{filter:hd(t.filter,sxe)}:t)}class RAe extends ik{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=u9(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=u9(t,n),t.encoding){const i={};for(const[r,a]of qu(t.encoding))i[r]=QG(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:qu(i).map(([a,s])=>{const{init:o,bind:l,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of pn(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function u9(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(rk(a))return{filter:HC(a,t)};if(WG(a)&&Hc(a.bin))return{...a,bin:ZG(a.bin)};if(VG(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function QG(e,t){const n=Le(e);if(he(n)&&Hc(n.bin)&&(n.bin=ZG(n.bin)),Vc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(um(n))if(be(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:HC(i,t)}});else{const{selection:i,param:r,test:a,...s}=QG(n.condition,t);n.condition=r?n.condition:{...s,test:HC(n.condition,t)}}return n}function ZG(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function HC(e,t){const n=i=>hd(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):hd(e.test||e.filter,i=>i.selection?n(i.selection):i)}class GC extends ik{map(t,n){const i=n.selections??[];if(t.params&&!Ro(t)){const r=[];for(const a of t.params)ek(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(Pe(o)&&(o===t.name||r.includes(o))||be(o)&&o.map(l=>r.indexOf(l)).every((l,f,d)=>l!==-1&&(f===0||l>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=GC.prototype[e];GC.prototype[e]=function(n,i){return t.call(this,n,zAe(n,i))}}function zAe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function KG(e,t){t===void 0&&(t=qG(e.config));const n=IAe(e,t),{width:i,height:r}=e,a=jAe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const BAe=new gAe,LAe=new RAe,UAe=new GC;function IAe(e,t={}){const n={config:t};return UAe.map(BAe.map(LAe.map(e,n),n),n)}function l9(e){return Pe(e)?{type:e}:e??{}}function jAe(e,t,n){let{width:i,height:r}=t;const a=Ro(e)||bx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(de(N8("width")),i=void 0),r=="container"&&(de(N8("height")),r=void 0));const o={type:"pad",...s,...n?l9(n.autosize):{},...l9(e.autosize)};if(o.type==="fit"&&!a&&(de(Nbe),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&de(R8("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&de(R8("height")),!Ar(o,{type:"pad"}))return o}function PAe(e){return["fit","fit-x","fit-y"].includes(e)}function qAe(e){return e?`fit-${tx(e)}`:"fit"}const HAe=["background","padding"];function c9(e,t){const n={};for(const i of HAe)e&&e[i]!==void 0&&(n[i]=br(e[i]));return t&&(n.params=e.params),n}class zo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new zo(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return on(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ka(e){return{explicit:!0,value:e}}function mr(e){return{explicit:!1,value:e}}function JG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:xx(t,n,i,r)}}function xx(e,t,n,i){return e.explicit&&t.explicit&&de(S2e(n,i,e.value,t.value)),e}function Yu(e,t,n,i,r=xx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ar(e.value,t.value)?e:r(e,t,n,i)}class GAe extends zo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Wd(e){return ce(e,"url")}function gp(e){return ce(e,"values")}function eY(e){return ce(e,"name")&&!Wd(e)&&!gp(e)&&!ku(e)}function ku(e){return e&&(tY(e)||nY(e)||ak(e))}function tY(e){return ce(e,"sequence")}function nY(e){return ce(e,"sphere")}function ak(e){return ce(e,"graticule")}var Xt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Xt||(Xt={}));function iY({invalid:e,isPath:t}){switch(KH(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function YAe(e){const{marks:t,scales:n}=iY(e);return t===n?Xt.Main:n==="include-invalid-values"?Xt.PreFilterInvalid:Xt.PostFilterInvalid}class wt{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){de(Zbe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Ki extends wt{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Jq()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function A_(e){return e.as!==void 0}function f9(e){return`${e}_end`}class us extends wt{timeUnits;clone(){return new us(null,Le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:l}=a;if(l){let f;if(Xc(l)){if(Yt(n)){const{mark:d,markDef:h,config:p}=n,y=Gu({fieldDef:a,markDef:h,config:p});(hp(d)||y)&&(f={timeUnit:Un(l),field:o})}}else f={as:me(a,{forAs:!0}),field:o,timeUnit:l};if(Yt(n)){const{mark:d,markDef:h,config:p}=n,y=Gu({fieldDef:a,markDef:h,config:p});hp(d)&&un(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[et(f)]=f)}return r},{});return Ot(i)?null:new us(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Un(i),s={...r,timeUnit:a};return new us(t,{[et(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of qu(this.timeUnits)){const a=A_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(pn(this.timeUnits).map(t=>A_(t)?t.as:f9(t.field)))}dependentFields(){return new Set(pn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${et(this.timeUnits)}`}assemble(){const t=[];for(const n of pn(this.timeUnits)){const{rectBandPosition:i}=n,r=Un(n.timeUnit);if(A_(n)){const{field:a,as:s}=n,{unit:o,utc:l,...f}=r,d=[s,`${s}_end`];t.push({field:ta(a),type:"timeunit",...o?{units:ax(o)}:{},...l?{timezone:"utc"}:{},...f,as:d}),t.push(...d9(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=rY({timeUnit:r,field:s}),l=f9(s);t.push({type:"formula",expr:o,as:l}),t.push(...d9([s,l],i,r))}}return t}}const Ex="offsetted_rect_start",Ax="offsetted_rect_end";function rY({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=NH(i),{part:s,step:o}=LH(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${At(t)}, ${n?-o:o})`}function d9([e,t],n,i){if(n!==void 0&&n!==.5){const r=At(e),a=At(t);return[{type:"formula",expr:h9([rY({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Ex}`},{type:"formula",expr:h9([r,a],n+.5),as:`${e}_${Ax}`}]}return[]}function h9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const dm="_tuple_fields";class XAe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const VAe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new XAe,a={},s={},o=new Set,l=(v,b)=>{const E=b==="visual"?v.channel:v.field;let S=jt(`${i}_${E}`);for(let _=1;o.has(S);_++)S=jt(`${i}_${E}_${_}`);return o.add(S),{[b]:S}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?sn(n.value):null;let{fields:p,encodings:y}=lt(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(lt(v))for(const b of le(v))obe(b)?(y||(y=[])).push(b):f==="interval"?(de(Hbe),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let E=b.field;if(b.aggregate){de(Rbe(v,b.aggregate));continue}else if(!E){de(B8(v));continue}if(b.timeUnit&&!Xc(b.timeUnit)){E=e.vgField(v);const S={timeUnit:b.timeUnit,as:E,field:b.field};s[et(S)]=S}if(!a[E]){const S=f==="interval"&&Fs(v)&&$a(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",_={field:E,channel:v,type:S,index:r.items.length};_.signals={...l(_,"data"),...l(_,"visual")},r.items.push(a[E]=_),r.hasField[E]=a[E],r.hasSelectionId=r.hasSelectionId||E===ka,aH(v)?(_.geoChannel=v,_.channel=rH(v),r.hasChannel[_.channel]=a[E]):r.hasChannel[v]=a[E]}}else de(B8(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ka}h&&(t.init=h.map(v=>r.items.map(b=>lt(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),Ot(s)||(r.timeUnit=new us(null,s))},signals:(e,t,n)=>{const i=t.name+dm;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(uY)})}},aY="_curr",qy="anim_value",ed="anim_clock",YC="eased_anim_clock",sY="min_extent",oY="max_range_extent",S_="last_tick_at",__="is_playing",WAe=1/60*1e3,QAe=(e,t)=>[{name:YC,update:ed},{name:`${e}_domain`,init:`domain('${t}')`},{name:sY,init:`extent(${e}_domain)[0]`},{name:oY,init:`extent(range('${t}'))[1]`},{name:qy,update:`invert('${t}', ${YC})`}],ZAe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(ls(t)&&(n=n.concat([{name:ed,init:"0",on:[{events:{type:"timer",throttle:WAe},update:`${__} ? (${ed} + (now() - ${S_}) > ${oY} ? 0 : ${ed} + (now() - ${S_})) : ${ed}`}]},{name:S_,init:"now()",on:[{events:[{signal:ed},{signal:__}],update:"now()"}]},{name:__,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+dm,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=pn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+md):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${ac(e)}, `;if(t.project.hasSelectionId)f+=`${ka}: ${s}[${ot(ka)}]`;else if(ls(t))f+=`fields: ${r}, values: [${qy} ? ${qy} : ${sY}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${ot(e.vgField(h.channel,{}))}], ${s}[${ot(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${ot(h.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(ls(t))return n.concat(QAe(t.name,e.scaleName(tl)),[{name:i+Do,on:[{events:[{signal:YC},{signal:qy}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+Do,on:d?[{events:d,update:`${l} ? {${f}} : null`,force:!0}]:[]}])}}};function uY(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=ta(r.field),r}function Dc(e,t=!0,n=Sye){if(be(e)){const i=e.map(r=>Dc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Yc(e))return n(t?Sc(e):V2e(e));return t?n(bt(e)):e}function KAe(e,t){for(const n of pn(e.component.selection??{})){const i=n.name;let r=`${i}${Do}, ${n.resolve==="global"?"true":`{unit: ${ac(e)}}`}`;for(const a of _x)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+wSe,on:[{events:{signal:n.name+Do},update:`modify(${ot(n.name+$c)}, ${r})`}]})}return sk(t)}function JAe(e,t){if(e.component.selection&&le(e.component.selection).length){const n=ot(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:yh("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return sk(t)}function eSe(e,t){let n=!1;for(const i of pn(e.component.selection??{})){const r=i.name,a=ot(r+$c);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${wY}(${a}, ${ot(o)}${l}`})}n=!0;for(const o of _x)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),sk(t)}function tSe(e,t){const n=[],i=[],r=ac(e,{escape:!1});for(const a of pn(e.component.selection??{})){const s={name:a.name+$c};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ka}}]),a.init){const l=a.project.items.map(uY);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ka]:Dc(f,!1)[0]})):a.init.map(f=>({unit:r,fields:l,values:Dc(f,!1)}))}if([...n,...t].filter(l=>l.name===a.name+$c).length||n.push(s),ls(a)&&t.length){const l=e.lookupDataSource(e.getDataName(Xt.Main)),f=t.find(h=>h.name===l),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+aY,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function lY(e,t){for(const n of pn(e.component.selection??{}))for(const i of _x)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function nSe(e,t){for(const n of e.children)Yt(n)&&(t=lY(n,t));return t}function iSe(e,t,n,i){const r=TY(e,t.param,t);return{signal:$a(n.get("type"))&&be(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function sk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const xo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Fs(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&de(Ube),!a||!$a(s)){de(Lbe);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||VC(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(wY))r.update=`{${i.map(s=>`${ot(ta(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${ot(ta(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!VC(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function XC(e,t){return`domain(${ot(e.scaleName(t))})`}function VC(e){return e.parent&&wh(e.parent)&&(!e.parent.parent||VC(e.parent.parent))}const md="_brush",cY="_scale_trigger",Y0="geo_interval_init_tick",fY="_init",rSe="_center",aSe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...Ue(n.select)?n.select:{}};i.fields=[ka],i.encodings||(i.encodings=n.value?le(n.value):[Ua,La]),n.select={type:"interval",...i}}if(t.translate&&!xo.defined(t)){const i=`!event.item || event.item.mark.name !== ${ot(t.name+md)}`;for(const r of t.events){if(!r.between){de(`${r} is not an ordered event stream for interval selections.`);continue}const a=sn(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+Do,a=pn(t.project.hasChannel).filter(o=>o.channel===qt||o.channel===Pn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(sSe(e,t,l,s?.[l.index])),[])),e.hasProjection){const o=ot(e.projectionName()),l=e.projectionName()+rSe,{x:f,y:d}=t.project.hasChannel,h=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${l}[0]`,v=d?s?.[d.index]:`${l}[1]`,b=$=>e.getSizeSignalRef($).signal,E=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+fY,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(T=>T.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const S=`intersect(${E}, {markname: ${ot(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${ac(e)}}`,w=`vlSelectionTuples(${S}, ${_})`,C=a.map($=>$.signals.visual);return n.concat({name:r,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:Y0}]:[]],update:w}]})}else{if(!xo.defined(t)){const f=i+cY,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=ot(e.scaleName(p)),E=e.getScaleComponent(p).get("type"),S=$a(E)?"+":"";return`(!isArray(${y}) || (${S}invert(${b}, ${v})[0] === ${S}${y}[0] && ${S}invert(${b}, ${v})[1] === ${S}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),l=`unit: ${ac(e)}, fields: ${i+dm}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Dc(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Yt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Y0).length||n.unshift({name:Y0,value:null,on:[{events:"timer{1}",update:`${Y0} === null ? {} : ${Y0}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,l=`data(${ot(t.name+$c)})`;if(xo.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const E of le(f))f[E]=[{test:`${l}.length && ${l}[0].unit === ${ac(e)}`,...f[E]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=le(y).reduce((E,S)=>(E[S]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(_=>_).join(" && "),value:y[S]},{value:null}],E),{}),b=p??(t.translate?"move":null);return[{name:`${i+md}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+md,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function sSe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=ot(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===qt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=xo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,E=i?{init:Dc(i,!0,l)}:{value:[]};return h.push({events:{signal:t.name+cY},update:$a(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...E,on:h},{name:p,...i?{init:Dc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===qt?0:1,y=t.name+fY,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Eh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=um(t)&&t.condition;let s=[];a&&(s=sn(a).map(f=>{const d=r(f);if(Xxe(f)){const{param:h,empty:p}=f;return{test:MY(e,{param:h,empty:p}),...d}}else return{test:Sb(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function ok(e,t="text"){const n=e.encoding[t];return Eh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>Sx(i,e.config),invalidValueRef:void 0})}function Sx(e,t,n="datum"){if(e){if(Ma(e))return Lt(e.value);if(je(e)){const{format:i,formatType:r}=yb(e);return jT({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function dY(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(be(s))return{tooltip:g9({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Eh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=Sx(f,r,o);if(d)return d;if(f===null)return;let h=Mt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),Pe(h))return{value:h};if(lt(h))return Ae(h)?h:h.content==="encoding"?g9(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function hY(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,h){const p=qc(h),y=Bi(d)?d:{...d,type:e[p].type},v=y.title||GT(y,r),b=sn(v).join(", ").replaceAll(/"/g,'\\"');let E;if(un(h)){const S=h==="x"?"x2":"y2",_=Ta(e[S]);if(Yn(y.bin)&&_){const w=me(y,{expr:s}),C=me(_,{expr:s}),{format:$,formatType:T}=yb(y);E=sm(w,C,$,T,r),a.add(S)}}if((un(h)||h===ra||h===Ba)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:S,formatType:_}=yb(y);E=jT({fieldOrDatumDef:y,format:S,formatType:_,expr:s,config:r,normalizeStack:!0}).signal}E??=Sx(y,r,s).signal,o.push({channel:h,key:b,value:E})}XT(e,(d,h)=>{he(d)?l(d,h):hx(d)&&l(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function g9(e,t,n,{reactiveGeom:i}={}){const r=hY(e,t,n,{reactiveGeom:i}),a=qu(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function oSe(e){const{markDef:t,config:n}=e,i=Mt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...uSe(e),...lSe(e)}}function uSe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Mt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:gn(Tbe,t)?{}:{ariaRoleDescription:{value:t}}}function lSe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Eh({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>Sx(l,e.config),invalidValueRef:void 0});const s=Mt("description",n,i);if(s!=null)return{description:Lt(s)};if(i.aria===!1)return{};const o=hY(t,r,i);if(!Ot(o))return{description:{signal:qu(o).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function Wn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const f=r[e];o===void 0&&(l??=Mt(e,i,a,{vgChannel:s,ignoreVgConfig:!um(f)}),l!==void 0&&(o=Lt(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=eG({...d,scaleChannel:e,channelDef:f});return Eh({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>IT({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function gY(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??Mt("filled",n,r),o=Ze(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=Mt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=Mt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...l?{fill:Lt(l)}:{},...f?{stroke:Lt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&de(wH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Wn("color",e,{vgChannel:d,defaultValue:s?l:f}),...Wn("fill",e,{defaultValue:i.fill?l:void 0}),...Wn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function cSe(e){const{encoding:t,mark:n}=e,i=t.order;return!ol(n)&&Ma(i)?Eh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Lt(r.value),invalidValueRef:void 0}):{}}function Qd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:IT({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Lt(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function ki(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],f=r[ks(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=Qd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=uk({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!l&&un(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:fSe({channel:e,channelDef:l,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function fSe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(je(n)&&r&&t===r.fieldChannel){if(he(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return gb({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return ic(n,i,{suffix:"end"},{offset:a})}return UT(e)}function uk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=qc(n),l=Hu(n),f=Mt(n,a,s,{vgChannel:l});if(f!==void 0)return zg(n,f);switch(t){case"zeroOrMin":return p9({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return p9({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[rr(n)],mult:.5}}}}function p9({mainChannel:e,config:t,...n}){const i=JH(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const dSe={left:"x",center:"xc",right:"x2"},hSe={top:"y",middle:"yc",bottom:"y2"};function pY(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Hu(e);const r=e==="x"?"align":"baseline",a=Mt(r,t,n);let s;return Ae(a)?(de(d2e(r)),s=void 0):s=a,e==="x"?dSe[s||(i==="top"?"left":"center")]:hSe[s||i]}function Eb(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?mY(e,t,{defaultPos:n,defaultPos2:i}):ki(e,t,{defaultPos:n})}function mY(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ks(e),o=rr(e),l=gSe(t,i,s),f=l[o]?pY(e,r,a):Hu(e);return{...ki(e,t,{defaultPos:n,vgChannel:f}),...l}}function gSe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=qc(n),f=rr(n),d=Hu(n),h=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?Qd({channel:n,markDef:a,encoding:i,model:e}):Qd({channel:l,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const E=rr(n),S=e.markDef[E];return S!=null?{[E]:{value:S}}:{[d]:{field:e.getName(n)}}}const b=pSe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:sy(n,a)||sy(n,{[n]:RC(n,a,o.style),[f]:RC(f,a,o.style)})||sy(n,o[r])||sy(n,o.mark)||{[d]:uk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function pSe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f}){return je(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?ic(t,a,{suffix:"start"},{offset:l}):UT({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:f})}function sy(e,t){const n=rr(e),i=Hu(e);if(t[i]!==void 0)return{[i]:zg(e,t[i])};if(t[e]!==void 0)return{[i]:zg(e,t[e])};if(t[n]){const r=t[n];if(wc(r))de(s2e(n));else return{[n]:zg(e,r)}}}function Co(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ks(t),o=rr(t),l=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??Mt("size",r,n,{vgChannel:o}),v=lH(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(l)&&(Rt(l.bin)||Yn(l.bin)||l.timeUnit&&!f)&&!(y&&!wc(y))&&!i[v]&&!In(h)?vSe({fieldDef:l,fieldDef2:f,channel:t,model:e}):(je(l)&&In(h)||b)&&!f?ySe(l,t,e):mY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function mSe(e,t,n,i,r,a,s){if(wc(r))if(n){const l=n.get("type");if(l==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=ys("minBandSize",{type:s},i);return{signal:d?`max(${Ea(d)}, ${f})`:f}}else r.band!==1&&(de(m2e(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ae(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Gc(l)&&Pt(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=on(l,s==="tick"?h:s==="bar"?f:d);if(Ae(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(Pt(p))return{signal:`${1-p} * ${e}`}}return{value:PC(i.view,e)-2}}function ySe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),f=n.getScaleComponent(t),d=rr(t),h=ks(t),p=lH(t),y=n.scaleName(p),v=n.getScaleComponent(dT(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let E;(r.size||i.size)&&(b?E=Wn("size",n,{vgChannel:d,defaultRef:Lt(i.size)}):de(x2e(i.type)));const S=!!E,_=oG({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});E=E||{[d]:mSe(d,y||l,v||f,a,_,!!e,i.type)};const w=(f||v)?.get("type")==="band"&&wc(_)&&!S?"top":"middle",C=pY(t,i,a,w),$=C==="xc"||C==="yc",{offset:T,offsetType:D}=Qd({channel:t,markDef:i,encoding:r,model:n,bandPosition:$?.5:0}),F=UT({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:f,stack:s,offset:T,defaultRef:uk({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:f}),bandPosition:$?D==="encoding"?0:.5:Ae(_)?{signal:`(1-${_})/2`}:wc(_)?(1-_.band)/2:0});if(d)return{[C]:F,...E};{const O=Hu(h),U=E[d],z=T?{...U,offset:T}:U;return{[C]:F,[O]:be(F)?[F[0],{...F[1],offset:z}]:{...F,offset:z}}}}function m9(e,t,n,i,r,a,s){if(iH(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(Ae(n)||Ae(r)||Ae(i)||a){const f=Ea(n),d=Ea(r),h=Ea(i),p=Ea(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=h?`${h} + `:"",E=f?`(${f} ? -1 : 1) * `:"",S=d?`(${d} + ${v})`:v;return{signal:b+E+S}}else return r=r||0,i+(n?-r-l:+r+l)}function vSe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=oG({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=un(n)?Mt("binSpacing",a,r)??0:0,b=ks(n),E=Hu(n),S=Hu(b),_=ys("minBandSize",a,r),{offset:w}=Qd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:C}=Qd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),$=Pxe({fieldDef:e,scaleName:l}),T=m9(n,v,d,y,w,_,$),D=m9(b,v,d,y,C??w,_,$),F=Ae(h)?{signal:`(1-${h.signal})/2`}:wc(h)?(1-h.band)/2:.5,O=Gu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Rt(e.bin)||e.timeUnit){const U=e.timeUnit&&O!==.5;return{[S]:y9({fieldDef:e,scaleName:l,bandPosition:F,offset:D,useRectOffsetField:U}),[E]:y9({fieldDef:e,scaleName:l,bandPosition:Ae(F)?{signal:`1-${F.signal}`}:1-F,offset:T,useRectOffsetField:U})}}else if(Yn(e.bin)){const U=ic(e,l,{},{offset:D});if(he(t))return{[S]:U,[E]:ic(t,l,{},{offset:T})};if(Hc(e.bin)&&e.bin.step)return{[S]:U,[E]:{signal:`scale("${l}", ${me(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}de($H(b))}function y9({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return gb({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Ex,endSuffix:Ax}:{}})}const bSe=new Set(["aria","width","height"]);function aa(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?gY(e):{};return{...xSe(e.markDef,t),...v9("fill",n),...v9("stroke",i),...Wn("opacity",e),...Wn("fillOpacity",e),...Wn("strokeOpacity",e),...Wn("strokeWidth",e),...Wn("strokeDash",e),...cSe(e),...dY(e),...ok(e,"href"),...oSe(e)}}function v9(e,t){return t?{[e]:t}:{}}function xSe(e,t){return Mbe.reduce((n,i)=>(!bSe.has(i)&&ce(e,i)&&t[i]!=="ignore"&&(n[i]=Lt(e[i])),n),{})}function lk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!Fs(a)||!(s=e.getScaleType(a)))return;const o=nx(r.aggregate),l=LT({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(Uxe(l)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>sx(a,!0)).join(" && ")}}}function b9(e,t){if(t!==void 0)return{[e]:Lt(t)}}const w_="voronoi",yY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(w_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(ol(a))return de(zbe(a)),n;const s={name:e.getName(w_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...dY(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(w_)&&(l=!0)}),l||n.splice(o+1,0,s),n}},vY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!JT(e.bind),parse:(e,t,n)=>CY(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=yY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,f)=>{const d=jt(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Dc(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ot(l.field)}] : null`}]:[],bind:a[l.field]??a[l.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+Do),s=i+dm,o=r.items.map(f=>jt(`${i}_${f.field}`)),l=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Ab="_toggle",bY={defined:e=>e.type==="point"&&!ls(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Ab,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Do,i=t.name+Ab;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ac(e)}}, `}${i} ? ${n} : null`}},ESe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!ls(e),parse:(e,t)=>{t.clear&&(t.clear=Pe(t.clear)?yh(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(vY.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===jt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+Do);i(r,"null"),bY.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Ab),i(r,"false"))}return n}},xY={defined:e=>{const t=e.resolve==="global"&&e.bind&&JT(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ka;return t&&!n&&de(Ibe),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=Pe(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},CY(t,i),Ue(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=sn(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=b_(t.bind)?t.bind.legend:"click",a=Pe(r)?yh(r,"view"):sn(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=b_(t.bind)&&t.bind.legend,a=s=>o=>{const l=Le(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${jt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+Do),s=i+dm,o=r.items.filter(p=>p.hasLegend).map(p=>jt(`${i}_${jt(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Ab),h=b_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function ASe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of pn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&xY.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const EY="_translate_anchor",AY="_translate_delta",SSe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=xo.defined(t),a=i+EY,{x:s,y:o}=t.project.hasChannel;let l=yh(t.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+md,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?XC(e,qt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?XC(e,Pn):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+AY,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&x9(e,t,s,"width",n),o!==void 0&&x9(e,t,o,"height",n),n}};function x9(e,t,n,i,r){const a=t.name,s=a+EY,o=a+AY,l=n.channel,f=xo.defined(t),d=r.find($=>$.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p?.get("type"),v=p?.get("reverse"),b=f?l===qt?v?"":"-":v?"-":"":"",E=`${s}.extent_${l}`,S=`${b}${o}.${l} / ${f?`${h}`:`span(${E})`}`,_=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",w=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${_}(${E}, ${S}${w})`;d.on.push({events:{signal:o},update:f?C:`clampRange(${C}, 0, ${h})`})}const SY="_zoom_anchor",_Y="_zoom_delta",_Se={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=xo.defined(t),a=i+_Y,{x:s,y:o}=t.project.hasChannel,l=ot(e.scaleName(qt)),f=ot(e.scaleName(Pn));let d=yh(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+md,h))),n.push({name:i+SY,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&E9(e,t,s,"width",n),o!==void 0&&E9(e,t,o,"height",n),n}};function E9(e,t,n,i,r){const a=t.name,s=n.channel,o=xo.defined(t),l=r.find(_=>_.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?XC(e,s):l.name,y=a+_Y,v=`${a}${SY}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",E=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",S=`${b}(${p}, ${v}, ${y}${E})`;l.on.push({events:{signal:y},update:o?S:`clampRange(${S}, 0, ${f})`})}const $c="_store",Do="_tuple",wSe="_modify",wY="vlSelectionResolve",_x=[ZAe,aSe,VAe,bY,vY,xo,xY,ESe,SSe,_Se,yY];function CSe(e){let t=e.parent;for(;t&&!Cr(t);)t=t.parent;return t}function ac(e,{escape:t}={escape:!0}){let n=t?ot(e.name):e.name;const i=CSe(e);if(i){const{facet:r}=i;for(const a of Xr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ot(i.vgField(a))}])`)}return n}function ck(e){return pn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function CY(e,t){(ut(t.select)||!t.select.on)&&delete e.events,(ut(t.select)||!t.select.clear)&&delete e.clear,(ut(t.select)||!t.select.toggle)&&delete e.toggle}function ls(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function WC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...WC(e.object)),t.push(...WC(e.property))),t)}function DY(e){return e.object.type==="MemberExpression"?DY(e.object):e.object.name==="datum"}function $Y(e){const t=Wve(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&DY(i)&&n.add(WC(i).slice(1).join("."))}),n}class Ah extends wt{model;filter;expr;_dependentFields;clone(){return new Ah(null,this.model,Le(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Sb(this.model,this.filter,this),this._dependentFields=$Y(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function DSe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=jt(a.name),o=a.select,l=Pe(o)?o:o.type,f=lt(o)?Le(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const h=n[s]={...f,name:s,type:l,init:a.value,bind:a.bind,events:Pe(f.on)?yh(f.on,"scope"):sn(Le(f.on))};if(ls(h)&&(r++,r>1)){delete n[s];continue}const p=Le(a);for(const y of _x)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&de(Ybe),n}function MY(e,t,n,i="datum"){const r=Pe(t)?t:t.param,a=jt(r),s=ot(a+$c);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${ot(o.resolve)})`,d=`${l}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function TY(e,t,n){const i=jt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&de(Xbe(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,de(Vbe(o,r,n,a))):a=o[0].field}return`${s.name}[${ot(ta(a))}]`}function $Se(e,t){for(const[n,i]of qu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Ki(new Ah(t,e,{param:n}),r,Xt.Lookup,e.component.data.outputNodeRefCounts)}}function Sb(e,t,n){return Rg(t,i=>Pe(i)?i:ixe(i)?MY(e,i,n):IH(i))}function MSe(e,t){if(e)return be(e)&&!pu(e)?e.map(n=>GT(n,t)).join(", "):e}function C_(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function xg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:f,...d}=e.combine();if(!r){for(const h in d){const p=h,y=oEe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(fm(v)){const{condition:b,...E}=v,S=sn(b),_=W8[p];if(_){const{vgProp:w,part:C}=_,$=[...S.map(T=>{const{test:D,...F}=T;return{test:Sb(null,D),...F}}),E];C_(d,C,w,$),delete d[p]}else if(_===null){const w={signal:S.map(C=>{const{test:$,...T}=C;return`${Sb(null,$)} ? ${O8(T)} : `}).join("")+O8(E)};d[p]=w}}else if(Ae(v)){const b=W8[p];if(b){const{vgProp:E,part:S}=b;C_(d,S,E,v),delete d[p]}}Ze(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},Ot(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:on(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&Ae(d.encode.labels.update.text)&&(p=xc(o,"datum.label",d.encode.labels.update.text.signal)),C_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of yG)e.hasAxisPart(p)||delete d.encode[p];Ot(d.encode)&&delete d.encode}const h=MSe(l,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:on(f,0)}}}}function kY(e){const{axes:t}=e.component,n=[];for(const i of No)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function TSe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>xg(r,"grid",t)),...i.map(r=>xg(r,"grid",t)),...n.map(r=>xg(r,"main",t)),...i.map(r=>xg(r,"main",t))].filter(r=>r)}function A9(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...le(s),...le(o)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${Ea(s[d])} : ${Ea(o[d])}`};return f}return t[r]})])}function kSe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:HH(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Ae(n)?"axisOrient":`axis${em(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:A9(o,i,e,n),vgAxisConfig:A9(l,i,e,n),axisConfigStyle:FSe([...l,...o],i)}}function FSe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=sn(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function QC(e,t,n,i={}){const r=vH(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const S9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??OSe(n,e),gridScale:({model:e,channel:t})=>NSe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||OY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||FY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??zSe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??BSe(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??USe({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??ISe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=NY(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return xH(r?[X8(r)]:[],he(s)?[X8(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>jSe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??PSe(n,t)};function OSe(e,t){return!In(e)&&he(t)&&!Rt(t?.bin)&&!Yn(t?.bin)}function NSe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function RSe(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Ae(a)?a:dp(a);{const{configValue:s}=QC("labelAngle",i,t?.style,r);return s!==void 0?dp(s):n===qt&&Ze([OT,FT],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function ZC(e){return`(((${e.signal} % 360) + 360) % 360)`}function FY(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ae(e)){const r=ZC(e),a=Ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ae(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ae(e)){const r=ZC(e),a=Ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ae(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function OY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Ae(e)){const s=ZC(e),o=Ae(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ae(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function zSe(e,t){if(t==="x"&&Ze(["quantitative","temporal"],e))return!0}function BSe(e,t,n,i){if(n&&!lt(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function LSe(e){return e==="x"?"bottom":"left"}function USe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!In(t)&&t!=="log"){if(he(e)){if(Rt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ze(["month","hours","day","quarter"],Un(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ISe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const i=BH(n);if(i)return{signal:i}}}}function NY(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return EH(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function jSe(e,t){const n=e.values;if(be(n))return mG(t,n);if(Ae(n))return n}function PSe(e,t){return e==="rect"&&mb(t)?1:0}class Zd extends wt{transform;_dependentFields;clone(){return new Zd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=$Y(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Vc(i)&&sG(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((f,d)=>`${IH({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new Zd(t,{calculate:l,as:Kd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${et(this.transform)}`}}function Kd(e,t,n){return me(e,{prefix:t,suffix:"sort_index",...n})}function wx(e,t){return Ze(["top","bottom"],t)?"column":Ze(["left","right"],t)||e==="row"?"row":"column"}function Jd(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return on((t||{})[e],r[e],n.header[e])}function Cx(e,t,n,i){const r={};for(const a of e){const s=Jd(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const fk=["row","column"],dk=["header","footer"];function qSe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=Cx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=wx(t,o),f=dp(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...zY(f,l),...RY(l,f,a),...BY(i,r,t,MEe,RG)}}}function RY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=OY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function zY(e,t){const n=FY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function HSe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of dk)if(n[r])for(const a of n[r]){const s=YSe(e,t,r,n,a);s!=null&&i.push(s)}return i}function GSe(e,t){const{sort:n}=e;return bo(n)?{field:me(n,{expr:"datum"}),order:n.order??"ascending"}:be(n)?{field:Kd(e,t,{expr:"datum"}),order:"ascending"}:{field:me(e,{expr:"datum"}),order:n??"ascending"}}function KC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=Cx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=jT({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=wx(t,o);return{text:{signal:l?xc(xc(l,"datum.label",f),"datum.value",me(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...zY(a,d),...RY(d,a,s),...BY(n,e,t,TEe,zG)}}function YSe(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=Cx(["labelOrient"],s.header,o,t);(t==="row"&&!Ze(["top","bottom"],h)||t==="column"&&!Ze(["left","right"],h))&&(a=KC(s,t,o))}const l=Cr(e)&&!om(e.facet),f=r.axes,d=f?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:GSe(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const XSe={column:{start:0,end:1},row:{start:1,end:0}};function VSe(e,t){return XSe[t][e]}function WSe(e,t){const n={};for(const i of Xr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Cx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=wx(i,s),l=VSe(a,o);l!==void 0&&(n[o]=l)}}return Ot(n)?void 0:n}function BY(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=Jd(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function hk(e){return[...oy(e,"width"),...oy(e,"height"),...oy(e,"childWidth"),...oy(e,"childHeight")]}function oy(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(In(s)&&Gc(o)){const l=e.scaleName(n);return Cr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[_9(l,o)]:[_9(l,o),{name:r,update:LY(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=jC(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function _9(e,t){const n=`${e}_step`;return Ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function LY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=on(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${Ea(s)}, ${Ea(a)}) * ${e}_step`}function UY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function IY(e,t){return le(e).reduce((n,i)=>({...n,...Eh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Lt(r.value),invalidValueRef:void 0})}),{})}function jY(e,t){if(Cr(t))return e==="theta"?"independent":"shared";if(wh(t))return"shared";if(xk(t))return un(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function gk(e,t){const n=e.scale[t],i=un(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&de(w2e(t)),"independent"):e[i][t]||"shared"}const QSe={...OEe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},PY=le(QSe);class ZSe extends zo{}const w9={symbols:KSe,gradient:JSe,labels:e_e,entries:t_e};function KSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:f}=n,d=s.filled&&f!=="trail";let h={...Obe({},n,Mxe),...gY(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?qY(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===nr)delete h.fill;else if(ce(h.fill,"field"))y?delete h.fill:(h.fill=Lt(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=Lt(b??1));else if(be(h.fill)){const E=JC(o.fill??o.color)??s.fill??(d&&s.color);E&&(h.fill=Lt(E))}}if(h.stroke){if(i==="stroke"||!d&&i===nr)delete h.stroke;else if(ce(h.stroke,"field")||v)delete h.stroke;else if(be(h.stroke)){const E=on(JC(o.stroke||o.color),s.stroke,d?s.color:void 0);E&&(h.stroke={value:E})}}if(i!==Oo){const E=he(t)&&GY(n,r,t);E?h.opacity=[{test:E,...Lt(b??1)},Lt(l.legend.unselectedOpacity)]:b&&(h.opacity=Lt(b))}return h={...h,...e},Ot(h)?void 0:h}function JSe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?qY(s.opacity)||a.opacity:void 0;return f&&(o.opacity=Lt(f)),o={...o,...e},Ot(o)?void 0:o}function e_e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=he(t)?GY(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;Cc(d)?h=Aa({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=Aa({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&he(t)&&t.timeUnit===void 0&&(h=Aa({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return Ot(p)?void 0:p}function t_e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function qY(e){return HY(e,(t,n)=>Math.max(t,n.value))}function JC(e){return HY(e,(t,n)=>on(t,n.value))}function HY(e,t){if(Wxe(e))return sn(e.condition).reduce(t,e.value);if(Ma(e))return e.value}function GY(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ot(n.field);return i.map(a=>`(!length(data(${ot(jt(a)+$c)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const C9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return iG(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return rG(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??u_e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??l_e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??i_e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>pd(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(gd(n)&&rs(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>n_e(t,e)};function n_e(e,t){const n=e.values;if(be(n))return mG(t,n);if(Ae(n))return n}function i_e(e,t,n,i){if(t!=="shape"){const r=JC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function r_e(e){const{legend:t}=e;return on(t.type,a_e(e))}function a_e({channel:e,timeUnit:t,scaleType:n}){if(gd(e)){if(Ze(["quarter","month","day"],t))return"symbol";if(rs(n))return"gradient"}return"symbol"}function s_e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??o_e(n,t)}function o_e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function u_e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(rs(r))return n==="horizontal"?i==="top"||i==="bottom"?D9(t,"width",s,a):s:D9(t,"height",l,o)}function D9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function l_e(e){if(Ze(["quantile","threshold","log","symlog"],e))return"greedy"}function YY(e){const t=Yt(e)?c_e(e):g_e(e);return e.component.legends=t,t}function c_e(e){const{encoding:t}=e,n={};for(const i of[nr,...LG]){const r=An(t[i]);!r||!e.getScaleComponent(i)||i===ir&&he(r)&&r.type===xh||(n[i]=h_e(e,i))}return n}function f_e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function d_e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function h_e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new ZSe({},f_e(e,t));ASe(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=An(r[t]),h=he(d)?Un(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=r_e({legend:n,channel:t,timeUnit:h,scaleType:f}),v=s_e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const C of PY){if(y==="gradient"&&C.startsWith("symbol")||y==="symbol"&&C.startsWith("gradient"))continue;const $=C in C9?C9[C](b):n[C];if($!==void 0){const T=d_e($,C,n,e.fieldDef(t));(T||a.legend[C]===void 0)&&o.set(C,$,T)}}const E=n?.encoding??{},S=o.get("selections"),_={},w={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const C of["labels","legend","title","symbols","gradient","entries"]){const $=IY(E[C]??{},e),T=C in w9?w9[C]($,w):$;T!==void 0&&!Ot(T)&&(_[C]={...S?.length&&he(d)?{name:`${jt(d.field)}_legend_${C}`}:{},...S?.length?{interactive:!!S}:{},update:T})}return Ot(_)||o.set("encode",_,!!n?.encoding),o}function g_e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){YY(i);for(const r of le(i.component.legends))n.legend[r]=gk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=XY(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of le(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function XY(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of PY){const s=Yu(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,l)=>{switch(a){case"symbolType":return p_e(o,l);case"title":return AH(o,l);case"type":return r=!0,mr("symbol")}return xx(o,l,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&fb(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&fb(e.explicit,["encode","gradient"])),e}function p_e(e,t){return t.value==="circle"?t:e}function m_e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function VY(e){const t=e.component.legends,n={};for(const r of le(t)){const a=e.getScaleComponent(r),s=bt(a.get("domains"));if(n[s])for(const o of n[s])XY(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return pn(n).flat().map(r=>y_e(r,e.config)).filter(r=>r!==void 0)}function y_e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of LG)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Ae(a.encode.labels.update.text)&&(s=xc(i,"datum.label",a.encode.labels.update.text.signal)),m_e(a,"labels","text",{signal:s})}return a}}function v_e(e){return wh(e)||xk(e)?b_e(e):WY(e)}function b_e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),WY(e))}function WY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=Ae(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ze(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const x_e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class QY extends zo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function ZY(e){e.component.projection=Yt(e)?E_e(e):__e(e)}function E_e(e){if(e.hasProjection){const t=Xn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?A_e(e):void 0,a=new QY(e.projectionName(!0),{...Xn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function A_e(e){const t=[],{encoding:n}=e;for(const i of[[Ua,La],[na,Ia]])(An(n[i[0]])||An(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ir)&&e.typedFieldDef(ir).type===xh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Xt.Main)),t}function S_e(e,t){const n=aT(x_e,r=>!!(!gn(e.explicit,r)&&!gn(t.explicit,r)||gn(e.explicit,r)&&gn(t.explicit,r)&&Ar(e.get(r),t.get(r))));if(Ar(e.size,t.size)){if(n)return e;if(Ar(e.explicit,{}))return t;if(Ar(t.explicit,{}))return e}return null}function __e(e){if(e.children.length===0)return;let t;for(const i of e.children)ZY(i);const n=aT(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=S_e(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new QY(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function w_e(e,t,n,i){if(cm(t,n)){const r=Yt(e)?e.axis(n)??e.legend(n)??{}:{},a=me(t,{expr:"datum"}),s=me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:me(t,{binSuffix:"range",forAs:!0}),formula:sm(a,s,r.format,r.formatType,i)}}return{}}function KY(e,t){return`${gH(e)}_${t}`}function C_e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function pk(e,t,n){const i=gx(n,void 0)??{},r=KY(i,t);return e.getName(`${r}_bins`)}function D_e(e){return"as"in e}function $9(e,t,n){let i,r;D_e(e)?i=Pe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[me(e,{forAs:!0}),me(e,{binSuffix:"end",forAs:!0})];const a={...gx(t,void 0)},s=KY(a,e.field),{signal:o,extentSignal:l}=C_e(n,s);if(ix(a.extent)){const d=a.extent;r=TY(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class cs extends wt{bins;clone(){return new cs(null,Le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Bi(a)&&Rt(a.bin)){const{key:o,binComponent:l}=$9(a,a.bin,n);r[o]={...l,...r[o],...w_e(n,a,s,n.config)}}return r},{});return Ot(i)?null:new cs(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=$9(n,n.bin,i);return new cs(t,{[r]:a})}merge(t,n){for(const i of le(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=is([...this.bins[i].as,...t.bins[i].as],et)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(pn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(pn(this.bins).map(t=>t.field))}hash(){return`Bin ${et(this.bins)}`}assemble(){return pn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:ta(t.field),as:i,signal:t.signal,...ix(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:ta(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:me({field:i[f]},{expr:"datum"}),as:l[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function $_e(e,t,n,i){const r=Yt(i)?i.encoding[ks(t)]:void 0;if(Bi(n)&&Yt(i)&&uG(n,r,i.markDef,i.config)){e.add(me(n,{})),e.add(me(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,l=Gu({fieldDef:n,markDef:s,config:o});hp(a)&&l!==.5&&un(t)&&(e.add(me(n,{suffix:Ex})),e.add(me(n,{suffix:Ax}))),n.bin&&cm(n,t)&&e.add(me(n,{binSuffix:"range"}))}else if(aH(t)){const a=rH(t);e.add(i.getName(a))}else e.add(me(n));return Vc(n)&&mxe(n.scale?.range)&&e.add(n.scale.range.field),e}function M_e(e,t){for(const n of le(t)){const i=t[n];for(const r of le(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class _a extends wt{dimensions;measures;clone(){return new _a(null,new Set(this.dimensions),Le(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:l,field:f}=s;if(l)if(l==="count")r["*"]??={},r["*"].count=new Set([me(s,{forAs:!0})]);else{if(wo(l)||sl(l)){const d=wo(l)?"argmin":"argmax",h=l[d];r[h]??={},r[h][d]=new Set([me({op:d,field:h},{forAs:!0})])}else r[f]??={},r[f][l]=new Set([me(s,{forAs:!0})]);Fs(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??={},r[f].min=new Set([me({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([me({field:f,aggregate:"max"},{forAs:!0})]))}else $_e(a,o,s,n)}),a.size+le(r).length===0)?null:new _a(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:l}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([l||me(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(l||me(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+le(r).length===0?null:new _a(t,i,r)}merge(t){return Qq(this.dimensions,t.dimensions)?(M_e(this.measures,t.measures),!0):(j2e("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const t=new Set;for(const n of le(this.measures))for(const i of le(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${et({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of le(this.measures))for(const s of le(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:ta(a));return{type:"aggregate",groupby:[...this.dimensions].map(ta),ops:t,fields:n,as:i}}}class Sh extends wt{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Xr){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]={name:n.getName(`${a}_domain`),fields:[me(s),...Rt(o)?[me(s,{binSuffix:"end"})]:[]],...bo(l)?{sortField:l}:be(l)?{sortIndexField:Kd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Xr)this[n]&&(t+=` ${n.charAt(0)}:${et(this[n])}`);return t}get fields(){const t=[];for(const n of Xr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Xr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of No){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(In(r)&&Gc(a)){const s=Dx(this.childModel,n),o=bk(s);o?t[n]=o:de(bT(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:f}=this[t];if(l){const{op:d=fx,field:h}=l;a.push(h),s.push(d),o.push(me(l,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const l of fk){for(const f of dk){const d=i[l]?.[f]??[];for(const h of d)if(h.axes?.length>0){a[l]=!0;break}}if(a[l]){const f=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[vo,yo])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function M9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function T_e(e,t){const n=uT(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=M9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=M9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return de(Qbe(t)),null}function k_e(e){const t={};return Py(e.filter,n=>{if(UH(n)){let i=null;wT(n)?i=br(n.equal):DT(n)?i=br(n.lte):CT(n)?i=br(n.lt):$T(n)?i=br(n.gt):MT(n)?i=br(n.gte):TT(n)?i=n.range[0]:kT(n)&&(i=(n.oneOf??n.in)[0]),i&&(Yc(i)?t[n.field]="date":Pt(i)?t[n.field]="number":Pe(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function F_e(e){const t={};function n(i){Vd(i)?t[i.field]="date":i.type==="quantitative"&&Sbe(i.aggregate)?t[i.field]="number":Pd(i.field)>1?i.field in t||(t[i.field]="flatten"):Vc(i)&&bo(i.sort)&&Pd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Yt(e)||Cr(e))&&e.forEachFieldDef((i,r)=>{if(Bi(i))n(i);else{const a=qc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Yt(e)){const{mark:i,markDef:r,encoding:a}=e;if(ol(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];he(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function O_e(e){const t={};if(Yt(e)&&e.component.selection)for(const n of le(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&Pd(r.field)>1&&(t[r.field]="flatten")}return t}class di extends wt{_parse;clone(){return new di(null,Le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${et(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!ku(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of le(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:de(U8(o,i[o],l.value)))}for(const o of le(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:de(U8(o,n[o],l)))}const a=new zo(n,i);r.copyAll(a);const s={};for(const o of le(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return le(s).length===0||r.parseNothing?null:new di(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of le(this._parse)){const i=this._parse[n];Pd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(t=!1){return le(this._parse).filter(n=>t?Pd(n)>1:!0).map(n=>{const i=T_e(n,this._parse[n]);return i?{type:"formula",expr:i,as:vh(n)}:null}).filter(n=>n!==null)}}class Xu extends wt{clone(){return new Xu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ka])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ka}}}class hm extends wt{params;clone(){return new hm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${et(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class gm extends wt{params;clone(){return new gm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${et(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Mc extends wt{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(ku(t)||(n=t.format?{...wr(t.format,["parse"])}:{}),gp(t))this._data={values:t.values};else if(Wd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ze(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else nY(t)?this._data={values:[{type:"Sphere"}]}:(eY(t)||ku(t))&&(this._data={});this._generator=ku(t),t.name&&(this._name=t.name),n&&!Ot(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function mk(e){return e instanceof Mc||e instanceof hm||e instanceof gm}class yk{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Wc extends yk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class vk extends yk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class N_e extends vk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of le(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class R_e extends vk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&ck(t)}run(t){t instanceof Xu&&(this.requiresSelectionId&&(mk(t.parent)||t.parent instanceof _a||t.parent instanceof di)||(this.setModified(),t.remove()))}}class z_e extends yk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof us&&(i=t.producedFields(),sT(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class B_e extends vk{constructor(){super()}run(t){t instanceof Ki&&!t.isRequired()&&(this.setModified(),t.remove())}}class L_e extends Wc{run(t){if(!mk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof di)if(t instanceof di)this.setModified(),t.merge(n);else{if(oT(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class U_e extends Wc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof di);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of le(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!Ot(r)){this.setModified();const s=new di(t,r);for(const o of n){if(o instanceof di)for(const l of le(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof di&&le(o.parse).length===0&&o.remove()}}}}}class I_e extends Wc{run(t){t instanceof Ki||t.numChildren()>0||t instanceof Sh||t instanceof Mc||(this.setModified(),t.remove())}}class j_e extends Wc{run(t){const n=t.children.filter(r=>r instanceof us),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class P_e extends Wc{run(t){const n=t.children.filter(r=>r instanceof _a),i={};for(const r of n){const a=et(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of le(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class q_e extends Wc{model;constructor(t){super(),this.model=t}run(t){const n=!(mk(t)||t instanceof Ah||t instanceof di||t instanceof Xu),i=[],r=[];for(const a of t.children)a instanceof cs&&(n&&!oT(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof cs?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class H_e extends Wc{run(t){const n=[...t.children];if(!jd(n,s=>s instanceof Ki)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Ki){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Ki)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Qc extends wt{transform;clone(){return new Qc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=is(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`JoinAggregateTransform ${et(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class eh extends wt{filter;clone(){return new eh(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((f,d,h)=>{const p=Fs(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=LT({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:nx(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return le(l).length?new eh(t,l):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${et(this.filter)}`}assemble(){const t=le(this.filter).reduce((n,i)=>{const r=this.filter[i],a=me(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${e3(a)}))`):r.type==="quantitative"&&n.push(e3(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function e3(e){return`isValid(${e}) && isFinite(+${e})`}function G_e(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=me(i);return r&&t.push(r),t},[])}function Y_e(e){return be(e)&&e.every(t=>Pe(t))&&e.length>1}class Eo extends wt{_stack;clone(){return new Eo(null,Le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),l.push(on(h.order,"ascending"));const f={field:o,order:l};let d;return Y_e(a)?d=a:Pe(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Eo(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:l}=i,f=a.map(y=>{const v=r[y];return Ta(v)}).filter(y=>!!y),d=G_e(n),h=n.encoding.order;let p;if(be(h)||he(h))p=bH(h);else{const y=lG(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new Eo(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${et(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[me(r,{binSuffix:"mid"})]:[me(r,{}),me(r,{binSuffix:"end"})]:[me(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:f}=this._stack;if(l)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=me(d,{expr:"datum"}),v=me(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${e3(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:me(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:me(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class _h extends wt{transform;clone(){return new _h(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=is(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`WindowTransform ${et(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>yT(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),l.push(h.order??"ascending");const f={field:o,order:l},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function X_e(e){function t(n){if(!(n instanceof Sh)){const i=n.clone();if(i instanceof Ki){const r=n3+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof _a||i instanceof Eo||i instanceof _h||i instanceof Qc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function t3(e){if(e instanceof Sh)if(e.numChildren()===1&&!(e.children[0]instanceof Ki)){const t=e.children[0];(t instanceof _a||t instanceof Eo||t instanceof _h||t instanceof Qc)&&t.addDimensions(e.fields),t.swapWithParent(),t3(e)}else{const t=e.model.component.data.main;JY(t);const n=X_e(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(t3)}function JY(e){if(e instanceof Ki&&e.type===Xt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Sh||(t.swapWithParent(),JY(e))}}const n3="scale_",uy=5;function i3(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!i3(t.children))return!1}return!0}function la(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function T9(e,t,n){let i=e.sources,r=!1;return r=la(new B_e,i)||r,r=la(new R_e(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=la(new I_e,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=la(new L_e,i)||r,r=la(new q_e(t),i)||r,r=la(new z_e,i)||r,r=la(new U_e,i)||r,r=la(new P_e,i)||r,r=la(new j_e,i)||r,r=la(new N_e,i)||r,r=la(new H_e,i)||r),e.sources=i,r}function V_e(e,t){i3(e.sources);let n=0,i=0;for(let r=0;r<uy&&T9(e,t,!0);r++)n++;e.sources.map(t3);for(let r=0;r<uy&&T9(e,t,!1);r++)i++;i3(e.sources),Math.max(n,i)===uy&&de(`Maximum optimization runs(${uy}) reached.`)}class Fn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new Fn(()=>t(n))}}function eX(e){Yt(e)?W_e(e):Q_e(e)}function W_e(e){const t=e.component.scales;for(const n of le(t)){const i=K_e(e,n);if(t[n].setWithExplicit("domains",i),ewe(e,n),e.component.data.isFaceted){let a=e;for(;!Cr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)ho(o)&&(o.data=n3+o.data.replace(n3,""))}}}function Q_e(e){for(const n of e.children)eX(n);const t=e.component.scales;for(const n of le(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Yu(i,s.getWithExplicit("domains"),"domains","scale",r3);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&de(qbe),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function Z_e(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=k9(t,n);if(!r){de(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=k9(t,n);if(r)return"unaggregated"}return e}function K_e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=Z_e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&An(i.x2)?An(i.x)?Yu(cu(n,r,e,"x"),cu(n,r,e,"x2"),"domain","scale",r3):cu(n,r,e,"x2"):t==="y"&&An(i.y2)?An(i.y)?Yu(cu(n,r,e,"y"),cu(n,r,e,"y2"),"domain","scale",r3):cu(n,r,e,"y2"):cu(n,r,e,t)}function J_e(e,t,n){return e.map(i=>({signal:`{data: ${px(i,{timeUnit:n,type:t})}}`}))}function D_(e,t,n){const i=Un(n)?.unit;return t==="temporal"||i?J_e(e,t,i):[e]}function cu(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,f=An(r[i]),{type:d}=f,h=f.timeUnit,p=YAe({invalid:ys("invalid",a,o),isPath:ol(s)});if(pxe(t)){const b=cu(e,void 0,n,i),E=D_(t.unionWith,d,h);return Ka([...E,...b.value])}else{if(Ae(t))return Ka([t]);if(t&&t!=="unaggregated"&&!YH(t))return Ka(D_(t,d,h))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return mr([[0,1]]);const b=n.requestDataName(p);return mr([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=Fs(i)&&he(f)?twe(n,i,e):void 0;if(Os(f)){const b=D_([f.datum],d,h);return mr(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return mr([{data:n.requestDataName(p),field:me({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:me({field:b,aggregate:"max"})}])}else if(Rt(v.bin)){if(In(e))return mr(e==="bin-ordinal"?[]:[{data:fp(y)?n.requestDataName(p):n.requestDataName(Xt.Raw),field:n.vgField(i,cm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!lt(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Rt(b)){const E=pk(n,v.field,b);return mr([new Fn(()=>{const S=n.getSignalName(E);return`[${S}.start, ${S}.stop]`})])}else return mr([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ze(["time","utc"],e)){const b=r[ks(i)];if(uG(v,b,a,o)){const E=n.requestDataName(p),S=Gu({fieldDef:v,fieldDef2:b,markDef:a,config:o}),_=hp(s)&&S!==.5&&un(i);return mr([{data:E,field:n.vgField(i,_?{suffix:Ex}:{})},{data:E,field:n.vgField(i,{suffix:_?Ax:"end"})}])}}return mr(y?[{data:fp(y)?n.requestDataName(p):n.requestDataName(Xt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function $_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":fx),...i?{field:ta(i)}:{},...r?{order:r}:{}}}function ewe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=YH(i)?i:void 0,s=Hc(r)&&ix(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function twe(e,t,n){if(!In(n))return;const i=e.fieldDef(t),r=i.sort;if(sG(r))return{op:"min",field:Kd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(bo(r)){const o=a&&!s.has(r.field);return $_(r,o)}else if(Yxe(r)){const{encoding:o,order:l}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(wo(d)||sl(d))return $_({field:me(f),order:l},p);if(yT(d)||!d)return $_({op:d,field:h,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ze(["ascending",void 0],r))return!0}}function k9(e,t){const{aggregate:n,type:i}=e;return n?Pe(n)&&!wbe.has(n)?{valid:!1,reason:v2e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:b2e(e)}:{valid:!0}:{valid:!1,reason:y2e(e)}}function r3(e,t,n,i){return e.explicit&&t.explicit&&de(_2e(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function nwe(e){const t=is(e.map(s=>{if(ho(s)){const{sort:o,...l}=s;return l}return s}),et),n=is(e.map(s=>{if(ho(s)){const o=s.sort;return o!==void 0&&!fp(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),et);if(t.length===0)return;if(t.length===1){const s=e[0];if(ho(s)&&n.length>0){let o=n[0];if(n.length>1){de(j8);const l=n.filter(f=>lt(f)&&"op"in f&&f.op!=="min");n.every(f=>lt(f)&&"op"in f)&&l.length===1?o=l[0]:o=!0}else if(lt(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=is(n.map(s=>fp(s)||!("op"in s)||Pe(s.op)&&gn(Ebe,s.op)?s:(de(C2e(s)),!0)),et);let r;i.length===1?r=i[0]:i.length>1&&(de(j8),r=!0);const a=is(e.map(s=>ho(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function bk(e){if(ho(e)&&Pe(e.field))return e.field;if(Cbe(e)){let t;for(const n of e.fields)if(ho(n)&&Pe(n.field)){if(!t)t=n.field;else if(t!==n.field)return de(D2e),t}return de($2e),t}else if(Dbe(e)){de(M2e);const t=e.fields[0];return Pe(t)?t:void 0}}function Dx(e,t){const i=e.component.scales[t].get("domains").map(r=>(ho(r)&&(r.data=e.lookupDataSource(r.data)),r));return nwe(i)}function tX(e){return wh(e)||xk(e)?e.children.reduce((t,n)=>t.concat(tX(n)),F9(e)):F9(e)}function F9(e){return le(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:f,reverse:d,...h}=r,p=iwe(r.range,a,n,e),y=Dx(e,n),v=o?iSe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function iwe(e,t,n,i){if(un(n)){if(Gc(e))return{step:{signal:`${t}_step`}}}else if(lt(e)&&ho(e))return{...e,data:i.lookupDataSource(e.data)};return e}class nX extends zo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ze([Vn.LOG,Vn.TIME,Vn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ze([Vn.LINEAR,Vn.SQRT,Vn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(be(o)){const l=o[0],f=o[o.length-1];if(Pt(l)&&Pt(f))if(l<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const rwe=["range","scheme"];function awe(e){const t=e.component.scales;for(const n of mT){const i=t[n];if(!i)continue;const r=swe(n,e);i.setWithExplicit("range",r)}}function O9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=rr(t),s=e.getName(a);if(lt(i)&&i.binned&&i.step!==void 0)return new Fn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(Rt(i)){const o=pk(e,r,i);return new Fn(()=>{const l=e.getSignalName(o),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function swe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of rwe)if(n[h]!==void 0){const p=LC(a,h),y=XH(e,h);if(!p)de(CH(a,h,e));else if(y)de(y);else switch(h){case"range":{const v=n.range;if(be(v)){if(un(e))return Ka(v.map(b=>{if(b==="width"||b==="height"){const E=t.getName(b),S=t.getSignalName.bind(t);return Fn.fromName(S,E)}return b}))}else if(lt(v))return Ka({data:t.requestDataName(Xt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ka(v)}case"scheme":return Ka(owe(n[h]))}}const s=e===qt||e==="xOffset"?"width":"height",o=i[s];if(bs(o)){if(un(e))if(In(a)){const h=rX(o,t,e);if(h)return Ka({step:h})}else de(DH(s));else if(im(e)){const h=e===el?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=aX(o,a);if(v)return Ka(v)}}}const{rangeMin:l,rangeMax:f}=n,d=uwe(e,t);return(l!==void 0||f!==void 0)&&LC(a,"rangeMin")&&be(d)&&d.length===2?Ka([l??d[0],f??d[1]]):mr(d)}function owe(e){return gxe(e)?{scheme:e.name,...wr(e,["name"])}:{scheme:e}}function iX(e,t,n,{center:i}={}){const r=rr(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Pn&&$a(n)?i?[Fn.fromName(o=>`${s(o)}/2`,a),Fn.fromName(o=>`-${s(o)}/2`,a)]:[Fn.fromName(s,a),0]:i?[Fn.fromName(o=>`-${s(o)}/2`,a),Fn.fromName(o=>`${s(o)}/2`,a)]:[0,Fn.fromName(s,a)]}function uwe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=An(a[e]),l=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case qt:case Pn:{if(Ze(["point","band"],l)){const h=sX(e,n,i.view);if(bs(h))return{step:rX(h,t,e)}}return iX(e,t,l)}case el:case bh:return lwe(e,t,l);case Fo:{const h=dwe(r,i),p=hwe(r,n,t,i);return Gd(l)?fwe(h,p,cwe(l,i,f,e)):[h,p]}case ra:return[0,Math.PI*2];case Pc:return[0,360];case Ba:return[0,new Fn(()=>{const h=t.getSignalName(Cr(t.parent)?"child_width":"width"),p=t.getSignalName(Cr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case tl:return{step:1e3/i.scale.framesPerSecond};case rl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case al:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ir:return"symbol";case nr:case Ms:case Ts:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Oo:case nl:case il:return[i.scale.minOpacity,i.scale.maxOpacity]}}function rX(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=dT(n),s=i[a];if(IG({step:e,offsetIsDiscrete:je(s)&&jH(s.type)})==="offset"&&xG(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${Fbe(h)})`}}else return e.step}function aX(e,t){if(IG({step:e,offsetIsDiscrete:In(t)})==="offset")return{step:e.step}}function lwe(e,t,n){const i=e===el?"x":"y",r=t.getScaleComponent(i);if(!r)return iX(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const f=sX(i,t.size,t.config.view);if(bs(f)){const d=aX(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(he(f)&&f.timeUnit){const d=BH(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Gu({fieldDef:f,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(h){const v=Ae(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=Ae(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return Vq(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function sX(e,t,n){const i=e===qt?"width":"height",r=t[i];return r||xb(n,i)}function cwe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&be(n)?n.length+1:(de(L2e(i)),3)}}function fwe(e,t,n){const i=()=>{const r=Ea(t),a=Ea(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Ae(t)?new Fn(i):{signal:i()}}function dwe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(rx("size",e))}const N9=.95;function hwe(e,t,n,i){const r={x:O9(n,"x"),y:O9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=R9(t,r,i.view);return Pt(a)?a-1:new Fn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=R9(t,r,i.view);return Pt(a)?Math.pow(N9*a,2):new Fn(()=>`pow(${N9} * ${a.signal}, 2)`)}}throw new Error(rx("size",e))}function R9(e,t,n){const i=bs(e.width)?e.width.step:PC(n,"width"),r=bs(e.height)?e.height.step:PC(n,"height");return t.x||t.y?new Fn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function oX(e,t){Yt(e)?gwe(e,t):lX(e,t)}function gwe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of le(n)){const l=s[o],f=n[o],d=e.getScaleComponent(o),h=An(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),E=LC(y,t),S=XH(o,t);if(p!==void 0&&(E?S&&de(S):de(CH(y,t,o))),E&&S===void 0)if(p!==void 0){const _=h.timeUnit,w=h.type;switch(t){case"domainMax":case"domainMin":Yc(l[t])||w==="temporal"||_?f.set(t,{signal:px(l[t],{type:w,timeUnit:_})},!0):f.set(t,l[t],!0);break;default:f.copyKeyFromObject(t,l)}}else{const _=ce(z9,t)?z9[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:EG(r,o),hasSecondaryRangeChannel:!!r[ks(o)]}):i.scale[t];_!==void 0&&f.set(t,_,!1)}}}const z9={bins:({model:e,fieldOrDatumDef:t})=>he(t)?pwe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>mwe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>ywe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>vwe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>bwe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>xwe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return Ewe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>Awe(e,t,n,i,r,a.scale,s)};function uX(e){Yt(e)?awe(e):lX(e,"range")}function lX(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?uX(i):oX(i,t);for(const i of le(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=Yu(r,o,t,"scale",JG((l,f)=>{switch(t){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function pwe(e,t){const n=t.bin;if(Rt(n)){const i=pk(e,t.field,n);return new Fn(()=>e.getSignalName(i))}else if(Yn(n)&&Hc(n)&&n.step!==void 0)return{step:n.step}}function mwe(e,t){if(Ze([nr,Ms,Ts],e)&&t!=="nominal")return"hcl"}function ywe(e,t,n,i,r,a){if(!(Ta(a)?.bin||be(n)||r!=null||i!=null||Ze([Vn.TIME,Vn.UTC],e)))return un(t)?!0:void 0}function vwe(e,t,n,i,r,a){if(un(e)){if(rs(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Vn.POINT)return n.pointPadding}}function bwe(e,t,n,i,r,a=!1){if(e===void 0){if(un(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:on(s,n==="bar"?o:n==="tick"?f:l)}else if(im(t)&&i===Vn.BAND)return r.offsetBandPaddingInner}}function xwe(e,t,n,i,r,a=!1){if(e===void 0){if(un(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Vn.BAND)return on(s,Ae(i)?{signal:`${i.signal}/2`}:i/2)}else if(im(t)){if(n===Vn.POINT)return .5;if(n===Vn.BAND)return r.offsetBandPaddingOuter}}}function Ewe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return $a(e)&&t==="descending"?Ae(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if($a(e)&&t==="descending")return!0}function Awe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&$a(r)){if(be(n)){const l=n[0],f=n[n.length-1];if(Pt(l)&&l<=0&&Pt(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Gd(r))return!0;if(!(he(t)&&t.bin)&&Ze([...No,...dbe],e)){const{orient:l,type:f}=i;return Ze(["bar","area","line","trail"],f)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ze(["bar","area"],f)&&!s?!0:a?.zero}return!1}function Swe(e,t,n,i,r=!1){const a=_we(t,n,i,r),{type:s}=e;return Fs(t)?s!==void 0?Exe(t,s)?he(n)&&!xxe(s,n.type)?(de(A2e(s,a)),a):s:(de(E2e(t,s,a)),a):a:null}function _we(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(gd(e)||m_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&de(y_(e,"ordinal")),"ordinal";if(p_(e))return"band";if(un(e)||im(e)){if(Ze(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in pT)return"band";const r=n[rr(e)];return wc(r)||Xd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return gd(e)?"time":m_(e)==="discrete"?(de(y_(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&Un(t.timeUnit).utc?"utc":p_(e)?"band":"time";case"quantitative":return gd(e)?he(t)&&Rt(t.bin)?"bin-ordinal":"linear":m_(e)==="discrete"?(de(y_(e,"quantitative")),"ordinal"):p_(e)?"band":"linear";case"geojson":return}throw new Error(_H(t.type))}function wwe(e,{ignoreRange:t}={}){cX(e),eX(e);for(const n of bxe)oX(e,n);t||uX(e)}function cX(e){Yt(e)?e.component.scales=Cwe(e):e.component.scales=$we(e)}function Cwe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of mT){const s=An(t[a]);if(s&&n===QH&&a===ir&&s.type===xh)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const l=EG(t,a),f=Swe(o,a,s,i,l);r[a]=new nX(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const Dwe=JG((e,t)=>q8(e)-q8(t));function $we(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){cX(r);for(const a of le(r.component.scales))if(i.scale[a]??=jY(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?lxe(s.value,o.value)?n[a]=Yu(s,o,"type","scale",Dwe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of le(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new nX(a,s);for(const o of e.children){const l=o.component.scales[r];l&&(o.renameScale(l.get("name"),a),l.merged=!0)}}return t}class M_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Yt(e){return e?.type==="unit"}function Cr(e){return e?.type==="facet"}function xk(e){return e?.type==="concat"}function wh(e){return e?.type==="layer"}class Ek{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Xn(o),this.name=t.name??r,this.title=pu(t.title)?{text:t.title}:t.title?Xn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new M_,this.projectionNameMap=i?i.projectionNameMap:new M_,this.signalNameMap=i?i.signalNameMap:new M_,this.data=t.data,this.description=t.description,this.transforms=NAe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:LEe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:dx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new zo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){wwe(this)}parseProjection(){ZY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){YY(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of le(i)){const s=i[a];s!==void 0&&(r[a]=Lt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Lt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ot(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=WSe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Xr)t[i].title&&n.push(qSe(this,i));for(const i of fk)n=n.concat(HSe(this,i));return n}assembleAxes(){return TSe(this.component.axes,this.config)}assembleLegends(){return VY(this)}assembleProjections(){return v_e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...pH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ze(["unit","layer"],this.type)?Ze(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",Ot(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Cr(this.parent)?tX(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return jt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Xt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Cr(this.parent)){const n=UY(t),i=tx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(In(a)&&Gc(s)){const o=r.get("name"),l=Dx(this,i),f=bk(l);if(f){const d=me({aggregate:"distinct",field:f},{expr:"datum"});return{signal:LY(o,r,d)}}else return de(bT(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(oH(t)&&Fs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Bbe(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class fX extends Ek{vgField(t,n={}){const i=this.fieldDef(t);if(i)return me(i,n)}reduceFieldDef(t,n){return hEe(this.getMapping(),(i,r,a)=>{const s=Ta(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){XT(this.getMapping(),(i,r)=>{const a=Ta(i);a&&t(a,r)},n)}}class $x extends wt{transform;clone(){return new $x(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${et(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Mx extends wt{transform;clone(){return new Mx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${et(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Tx extends wt{transform;clone(){return new Tx(this.parent,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${et(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class kx extends wt{transform;clone(){return new kx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${et(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class yd extends wt{fields;geojson;signal;clone(){return new yd(null,Le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ua,La],[na,Ia]]){const a=r.map(s=>{const o=An(n.encoding[s]);return he(o)?o.field:Os(o)?{expr:`${o.datum}`}:Ma(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new yd(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ir)){const r=n.typedFieldDef(ir);r.type===xh&&(t=new yd(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Pe);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${et(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class pp extends wt{projection;fields;as;clone(){return new pp(null,this.projection,Le(this.fields),Le(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ua,La],[na,Ia]]){const r=i.map(s=>{const o=An(n.encoding[s]);return he(o)?o.field:Os(o)?{expr:`${o.datum}`}:Ma(o)?{expr:`${o.value}`}:void 0}),a=i[0]===na?"2":"";(r[0]||r[1])&&(t=new pp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Pe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${et(this.fields)} ${et(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class sc extends wt{transform;clone(){return new sc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new sc(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(he(r)&&he(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:f,frame:d,keyvals:h}=s.impute,p=_G(n.mark,i);return new sc(t,{impute:s.field,key:o.field,...l?{method:l}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${et(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:pAe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,f,d]}else return[l]}}class Fx extends wt{transform;clone(){return new Fx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${et(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class mp extends wt{transform;secondary;clone(){return new mp(null,Le(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(mAe(s)){let l=gX(s.data,a);l||(l=new Mc(s.data),a.push(l));const f=n.getName(`lookup_${r}`);o=new Ki(l,f,Xt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(yAe(s)){const l=s.param;i={as:l,...i};let f;try{f=n.getSelectionComponent(jt(l),l)}catch{throw new Error(jbe(l))}if(o=f.materialized,!o)throw new Error(Pbe(l))}return new mp(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?sn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${et({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:sn(this.transform.as)}:{}};else{let n=this.transform.as;Pe(n)||(de(Jbe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Ox extends wt{transform;clone(){return new Ox(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${et(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Nx extends wt{transform;clone(){return new Nx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${et(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Rx extends wt{transform;clone(){return new Rx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=is((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${et(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class zx extends wt{transform;clone(){return new zx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${et(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function dX(e){let t=0;function n(i,r){if(i instanceof Mc&&!i.isGenerator&&!Wd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof di&&(i.parent instanceof Mc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Sh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof hm||i instanceof gm||i instanceof eh||i instanceof Ah||i instanceof Zd||i instanceof pp||i instanceof _a||i instanceof mp||i instanceof _h||i instanceof Qc||i instanceof kx||i instanceof Tx||i instanceof $x||i instanceof Fx||i instanceof Ox||i instanceof Nx||i instanceof Xu||i instanceof zx||i instanceof Rx||i instanceof Mx)&&r.transform.push(i.assemble()),(i instanceof cs||i instanceof us||i instanceof sc||i instanceof Eo||i instanceof yd)&&r.transform.push(...i.assemble()),i instanceof Ki&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Ki?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ki&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function Mwe(e){const t=[],n=dX(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function Twe(e,t){const n=[],i=dX(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function kwe(e){return e==="top"||e==="left"||Ae(e)?"header":"footer"}function Fwe(e){for(const t of Xr)Owe(e,t);B9(e,"x"),B9(e,"y")}function Owe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=Jd("title",null,i,t);let l=pd(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(l=be(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=Jd("labelOrient",s.header,i,t),d=s.header!==null?on(s.header?.labels,i.header.labels,!0):!1,h=Ze(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[h]:t==="facet"?[]:[hX(e,t,d)]}}}function hX(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function B9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=gk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=kwe(o.get("orient"));s[l]??=[hX(e,a,!1)];const f=xg(o,"main",e.config,{header:!0});f&&s[l][0].axes.push(f),o.mainExtracted=!0}}}}function Nwe(e){Ak(e),_b(e,"width"),_b(e,"height")}function Rwe(e){Ak(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";_b(e,t),_b(e,n)}function Ak(e){for(const t of e.children)t.parseLayoutSize()}function _b(e,t){const n=UY(t),i=tx(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??jY(i,e);if(f==="independent"&&l.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==l.value){s=void 0;break}s=Yu(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function zwe(e){const{size:t,component:n}=e;for(const i of No){const r=rr(i);if(t[r]){const a=t[r];n.layoutSize.set(r,bs(a)?"step":a,!0)}else{const a=Bwe(e,r);n.layoutSize.set(r,a,!1)}}}function Bwe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(In(a)){const o=xb(i.view,t);return Gc(s)||bs(o)?"step":o}else return jC(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return jC(i.view,t);{const a=xb(i.view,t);return bs(a)?a.step:a}}}function a3(e,t,n){return me(t,{suffix:`by_${me(e)}`,...n})}class Bg extends fX{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=Dk(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!om(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=le(t),i={};for(const r of n){if(![yo,vo].includes(r)){de(rx(r,"facet"));break}const a=t[r];if(a.field===void 0){de(zC(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=YT(t,n);return i.header?i.header=Xn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ce(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Bx(this),this.child.parseData()}parseLayoutSize(){Ak(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,pn(this.component.selection).some(t=>ls(t))&&ET(xT)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Fwe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Xr)for(const i of dk){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=Jd("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const l=wx(n,o);t.titleAnchor??={},t.titleAnchor[l]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??={},t[l][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Bg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Bg?{...this.channelHasField("column")?{encode:{update:{columns:{field:me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Bg){if(this.child.channelHasField("column")){const r=me(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of No){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(In(s)&&Gc(o)){const l=Dx(this.child,r),f=bk(l);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):de(bT(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of Xr){const h=this.facet[d];if(h){l.push(me(h));const{bin:p,sort:y}=h;if(Rt(p)&&l.push(me(h,{binSuffix:"end"})),bo(y)){const{field:v,op:b=fx}=y,E=a3(h,y);i&&r?(a.push(E),s.push("max"),o.push(E)):(a.push(v),s.push(b),o.push(E))}else if(be(y)){const v=Kd(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:l,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?bo(i.sort)?[a3(i,i.sort,{expr:"datum"})]:be(i.sort)?[Kd(i,t,{expr:"datum"})]:[me(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(bo(r)?r.order:!be(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return KC(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of fk)if(t[r]){const a=Jd("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return KC(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=Mwe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Xr.map(l=>this.facetSortFields(l)).flat(),order:Xr.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(JAe(this,[]))}]}getMapping(){return this.facet}}function Lwe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(bo(a.sort)){const{field:s,op:o=fx}=a.sort;e=r=new Qc(e,{joinaggregate:[{op:o,field:s,as:a3(a,a.sort,{forAs:!0})}],groupby:[me(a)]})}return r}return null}function gX(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(gp(e)&&gp(i)){if(Ar(e.values,i.values))return n}else if(Wd(e)&&Wd(i)){if(e.url===i.url)return n}else if(eY(e)&&e.name===n.dataName)return n}}return null}function Uwe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Mc({values:[]});return t.push(i),i}const n=gX(e.data,t);if(n)return ku(e.data)||(n.data.format=Wq({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Mc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Iwe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(DAe(r))s=e=new Zd(e,r),a="derived";else if(rk(r)){const o=k_e(r);s=e=di.makeWithAncestors(e,{},o,n)??e,e=new Ah(e,t,r.filter)}else if(WG(r))s=e=cs.makeFromTransform(e,r,t),a="number";else if(MAe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new di(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=us.makeFromTransform(e,r);else if(TAe(r))s=e=_a.makeFromTransform(e,r),a="number",ck(t)&&(e=new Xu(e));else if(VG(r))s=e=mp.make(e,t,r,i++),a="derived";else if(_Ae(r))s=e=new _h(e,r),a="number";else if(wAe(r))s=e=new Qc(e,r),a="number";else if(kAe(r))s=e=Eo.makeFromTransform(e,r),a="derived";else if(FAe(r))s=e=new kx(e,r),a="derived";else if(OAe(r))s=e=new Mx(e,r),a="derived";else if(CAe(r))s=e=new Tx(e,r),a="derived";else if(vAe(r))s=e=new Rx(e,r),a="derived";else if(SAe(r))e=new zx(e,r);else if($Ae(r))s=e=sc.makeFromTransform(e,r),a="derived";else if(bAe(r))s=e=new $x(e,r),a="derived";else if(xAe(r))s=e=new Ox(e,r),a="derived";else if(EAe(r))s=e=new Nx(e,r),a="derived";else if(AAe(r))s=e=new Fx(e,r),a="derived";else{de(Kbe(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Bx(e){let t=Uwe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(ku(r)||Wd(r)||gp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new GAe;ku(r)?(tY(r)?t=new gm(t,r.sequence):ak(r)&&(t=new hm(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=di.makeExplicit(t,e,s)??t,t=new Xu(t);const o=e.parent&&wh(e.parent);(Yt(e)||Cr(e))&&o&&(t=cs.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Iwe(t,e,s));const l=O_e(e),f=F_e(e);t=di.makeWithAncestors(t,{},{...l,...f},s)??t,Yt(e)&&(t=yd.parseAll(t,e),t=pp.parseAll(t,e)),(Yt(e)||Cr(e))&&(o||(t=cs.makeFromEncoding(t,e)??t),t=us.makeFromEncoding(t,e)??t,t=Zd.parseAllForSortIndex(t,e));const d=t=ly(Xt.Raw,e,t);if(Yt(e)){const E=_a.makeFromEncoding(t,e);E&&(t=E,ck(e)&&(t=new Xu(t))),t=sc.makeFromEncoding(t,e)??t,t=Eo.makeFromEncoding(t,e)??t}let h,p;if(Yt(e)){const{markDef:E,mark:S,config:_}=e,w=Mt("invalid",E,_),{marks:C,scales:$}=p=iY({invalid:w,isPath:ol(S)});C!==$&&$==="include-invalid-values"&&(h=t=ly(Xt.PreFilterInvalid,e,t)),C==="exclude-invalid-values"&&(t=eh.make(t,e,p)??t)}const y=t=ly(Xt.Main,e,t);let v;if(Yt(e)&&p){const{marks:E,scales:S}=p;E==="include-invalid-values"&&S==="exclude-invalid-values"&&(t=eh.make(t,e,p)??t,v=t=ly(Xt.PostFilterInvalid,e,t))}Yt(e)&&$Se(e,y);let b=null;if(Cr(e)){const E=e.getName("facet");t=Lwe(t,e.facet)??t,b=new Sh(t,e,E,y.getSource()),n[E]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function ly(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Ki(n,a,e,r);return i[a]=s,s}class jwe extends Ek{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&de(Wbe),this.children=this.getChildren(t).map((a,s)=>Dk(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Bx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}pn(this.component.selection).some(t=>ls(t))&&ET(xT)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return vx(t)?t.vconcat:nk(t)?t.hconcat:t.concat}parseLayoutSize(){Rwe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=hk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Pwe(e){return e===!1||e===null}const qwe={disable:1,gridScale:1,scale:1,...vG,labelExpr:1,encode:1},pX=le(qwe);class Sk extends zo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new Sk(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Pwe(this.get(t))}hasOrientSignalRef(){return Ae(this.explicit.orient)}}function Hwe(e,t,n){const{encoding:i,config:r}=e,a=An(i[t])??An(i[ks(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(Cc(l))return{text:Aa({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(Yd(a)==="quantitative"){if(Xd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Aa({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Aa({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Yd(a)==="temporal"&&r.timeFormatType&&he(a)&&!a.timeUnit)return{text:Aa({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function Gwe(e){return No.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Kwe(n,e)]),t),{})}const Ywe={bottom:"top",top:"bottom",left:"right",right:"left"};function Xwe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of le(r.component.axes))n.axis[a]=gk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=Vwe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of No){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!Ae(o)){if(i[o]>0&&!l){const f=Ywe[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Vwe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=Wwe(r,a)}}}else return t.map(n=>n.clone());return e}function Wwe(e,t){for(const n of pX){const i=Yu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return AH(r,a);case"gridScale":return{explicit:r.explicit,value:on(r.value,a.value)}}return xx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function Qwe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ae(n.labelAngle)?n.labelAngle:dp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===NY(i,r))return!0}return e===n[t]}const Zwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Kwe(e,t){let n=t.axis(e);const i=new Sk,r=An(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||LSe(e),l=t.getScaleComponent(e).get("type"),f=kSe(e,l,o,t.config),d=n!==void 0?!n:QC("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=RSe(r,n,e,s.style,f),p=rG(n.formatType,r,l),y=iG(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const S of pX){const _=S in S9?S9[S](v):Q8(S)?n[S]:void 0,w=_!==void 0,C=Qwe(_,S,n,t,e);if(w&&C)i.set(S,_,C);else{const{configValue:$=void 0,configFrom:T=void 0}=Q8(S)&&S!=="values"?QC(S,s.style,n.style,f):{},D=$!==void 0;w&&!D?i.set(S,_,C):(T!=="vgAxisConfig"||Zwe.has(S)&&D||fm($)||Ae($))&&i.set(S,$,!1)}}const b=n.encoding??{},E=yG.reduce((S,_)=>{if(!i.hasAxisPart(_))return S;const w=IY(b[_]??{},t),C=_==="labels"?Hwe(t,e,w):w;return C!==void 0&&!Ot(C)&&(S[_]={update:C}),S},{});return Ot(E)||i.set("encode",E,!!n.encoding||n.labelAngle!==void 0),i}function Jwe({encoding:e,size:t}){for(const n of No){const i=rr(n);bs(t[i])&&wu(e[n])&&(delete t[i],de(DH(i)))}return t}const eCe={vgMark:"arc",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ki("x",e,{defaultPos:"mid"}),...ki("y",e,{defaultPos:"mid"}),...Co(e,"radius"),...Co(e,"theta")})},tCe={vgMark:"area",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Eb("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Eb("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...lk(e)})},nCe={vgMark:"rect",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Co(e,"x"),...Co(e,"y")})},iCe={vgMark:"shape",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===xh?{field:me(n,{expr:"datum"})}:{}}]}},rCe={vgMark:"image",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Co(e,"x"),...Co(e,"y"),...ok(e,"url")})},aCe={vgMark:"line",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ki("x",e,{defaultPos:"mid"}),...ki("y",e,{defaultPos:"mid"}),...Wn("size",e,{vgChannel:"strokeWidth"}),...lk(e)})},sCe={vgMark:"trail",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ki("x",e,{defaultPos:"mid"}),...ki("y",e,{defaultPos:"mid"}),...Wn("size",e),...lk(e)})};function _k(e,t){const{config:n}=e;return{...aa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ki("x",e,{defaultPos:"mid"}),...ki("y",e,{defaultPos:"mid"}),...Wn("size",e),...Wn("angle",e),...oCe(e,n,t)}}function oCe(e,t,n){return n?{shape:{value:n}}:Wn("shape",e)}const uCe={vgMark:"symbol",encodeEntry:e=>_k(e)},lCe={vgMark:"symbol",encodeEntry:e=>_k(e,"circle")},cCe={vgMark:"symbol",encodeEntry:e=>_k(e,"square")},fCe={vgMark:"rect",encodeEntry:e=>({...aa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Co(e,"x"),...Co(e,"y")})},dCe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...aa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Eb("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Eb("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Wn("size",e,{vgChannel:"strokeWidth"})}}},hCe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...aa(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ki("x",e,{defaultPos:"mid"}),...ki("y",e,{defaultPos:"mid"}),...ok(e),...Wn("size",e,{vgChannel:"fontSize"}),...Wn("angle",e),...b9("align",gCe(e.markDef,n,t)),...b9("baseline",pCe(e.markDef,n,t)),...ki("radius",e,{defaultPos:null}),...ki("theta",e,{defaultPos:null})}}};function gCe(e,t,n){if(Mt("align",e,n)===void 0)return"center"}function pCe(e,t,n){if(Mt("baseline",e,n)===void 0)return"middle"}const mCe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...aa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Co(e,r),...ki(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Lt(Mt("thickness",n,t))}}},cy={arc:eCe,area:tCe,bar:nCe,circle:lCe,geoshape:iCe,image:rCe,line:aCe,point:uCe,rect:fCe,rule:dCe,square:cCe,text:hCe,tick:mCe,trail:sCe};function yCe(e){if(Ze([lx,ox,wxe],e.mark)){const t=_G(e.mark,e.encoding);if(t.length>0)return vCe(e,t)}else if(e.mark===ux){const t=NC.some(n=>Mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return bCe(e)}return wk(e)}const L9="faceted_path_";function vCe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:L9+e.requestDataName(Xt.Main),data:e.requestDataName(Xt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:wk(e,{fromPrefix:L9})}]}const U9="stack_group_";function bCe(e){const[t]=wk(e,{fromPrefix:U9}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...Id(t.encode.update,["y","yc","y2","height",...NC]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...wr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...wr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of NC){const d=ys(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Lt(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),h=me(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(me(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const h=ys(d,e.markDef,e.config);return h!==void 0?{...f,[d]:Lt(h)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Xt.Main),name:U9+e.requestDataName(Xt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function xCe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!be(s)&&Ma(s)&&FC(s.value)||!s&&FC(Mt("order",r,a)))){if((be(s)||he(s))&&!n)return bH(s,{expr:"datum"});if(ol(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(he(l))return{field:o}}}}function wk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=on(i.clip,ECe(e),ACe(e)),o=yH(i),l=r.key,f=xCe(e),d=SCe(e),h=Mt("aria",i,a),p=cy[n].postEncodingTransform?cy[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:cy[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Xt.Main)},encode:{update:cy[n].encodeEntry(e)},...p?{transform:p}:{}}]}function ECe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function ACe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function SCe(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=le(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class mX extends fX{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,K8(t)?t.view:void 0);const s=vs(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=oAe(s,a,{graticule:t.data&&ak(t.data)}));const l=this.encoding=fEe(t.encoding||{},o,s.filled,a);this.markDef=GG(s,l,a),this.size=Jwe({encoding:l,size:K8(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=HG(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>ek(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===QH,i=t&&ibe.some(r=>je(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return mT.reduce((i,r)=>{const a=An(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Xn(t);return be(n)&&(r.domain=n.map(br)),be(i)&&(r.range=i.map(br)),r}initAxes(t){return No.reduce((n,i)=>{const r=t[i];if(je(r)||i===qt&&je(t.x2)||i===Pn&&je(t.y2)){const a=je(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=le(t),i={};for(const r of n){const a=t[r];i[r]=fm(a)?mH(a):br(a)}return i}initLegends(t){return gbe.reduce((n,i)=>{const r=An(t[i]);if(r&&mbe(i)){const a=r.legend;n[i]=a&&Xn(a)}return n},{})}parseData(){this.component.data=Bx(this)}parseLayoutSize(){zwe(this)}parseSelections(){this.component.selection=DSe(this,this.selection)}parseMarkGroup(){this.component.mark=yCe(this)}parseAxesAndHeaders(){this.component.axes=Gwe(this)}assembleSelectionTopLevelSignals(t){return eSe(this,t)}assembleSignals(){return[...kY(this),...KAe(this,[])]}assembleSelectionData(t){return tSe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return hk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+aY)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!wh(this.parent))&&(t=lY(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return rc(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ta(n)}typedFieldDef(t){const n=this.fieldDef(t);return Bi(n)?n:null}}class Ck extends Ek{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(bx(o))return new Ck(o,this,this.getName(`layer_${l}`),s,a);if(Ro(o))return new mX(o,this,this.getName(`layer_${l}`),s,a);throw new Error(vT(o))})}parseData(){this.component.data=Bx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Nwe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}pn(this.component.selection).some(t=>ls(t))&&ET(xT)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Xwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),kY(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),hk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of sn(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return nSe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),VY(this))}}function Dk(e,t,n,i,r){if(dx(e))return new Bg(e,t,n,r);if(bx(e))return new Ck(e,t,n,i,r);if(Ro(e))return new mX(e,t,n,i,r);if(REe(e))return new jwe(e,t,n,r);throw new Error(vT(e))}function _Ce(e,t={}){t.logger&&U2e(t.logger),t.fieldTitle&&gG(t.fieldTitle);try{const n=qG(Rq(t.config,e.config)),i=KG(e,n),r=Dk(i,null,"",void 0,n);return r.parse(),V_e(r.component.data,r),{spec:CCe(r,wCe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&I2e(),t.fieldTitle&&nEe()}}function wCe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Pe(t)&&(t={type:t}),r&&a&&PAe(t.type)){if(r==="step"&&a==="step")de(z8()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";de(z8(tx(s)));const o=s==="width"?"height":"width";t.type=qAe(o)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...c9(n,!1),...c9(e,!0)}}function CCe(e,t,n={},i){const r=e.config?WEe(e.config):void 0,a=Twe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...UG(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const DCe=Zve.version,$Ce=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Pd,accessPathWithDatum:uT,accessWithDatumToUnescapedPath:At,compile:_Ce,contains:Ze,deepEqual:Ar,deleteNestedProperty:fb,duplicate:Le,entries:qu,every:aT,fieldIntersection:oT,flatAccessWithDatum:Zq,getFirstDefined:on,hasIntersection:sT,hasProperty:ce,hash:et,internalField:eH,isBoolean:fp,isEmpty:Ot,isEqual:Jve,isInternalField:tH,isNullOrFalse:FC,isNumeric:W2,keys:le,logicalExpr:Rg,mergeDeep:Wq,never:Vq,normalize:KG,normalizeAngle:dp,omit:wr,pick:Id,prefixGenerator:OC,removePathFromField:vh,replaceAll:xc,replacePathInField:ta,resetIdCounter:tbe,setEqual:Qq,some:jd,stringify:bt,titleCase:em,unique:is,uniqueId:Jq,vals:pn,varName:jt,version:DCe},Symbol.toStringTag,{value:"Module"}));function yX(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var MCe="2.15.0",TCe={version:MCe};const Vf="#fff",I9="#888",kCe={background:"#333",view:{stroke:I9},title:{color:Vf,subtitleColor:Vf},style:{"guide-label":{fill:Vf},"guide-title":{fill:Vf}},axis:{domainColor:Vf,gridColor:I9,tickColor:Vf}},Tl="#4572a7",FCe={background:"#fff",arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl,strokeWidth:2},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},kl="#30a2da",T_="#cbcbcb",OCe="#999",NCe="#333",j9="#f0f0f0",P9="#333",RCe={arc:{fill:kl},area:{fill:kl},axis:{domainColor:T_,grid:!0,gridColor:T_,gridWidth:1,labelColor:OCe,labelFontSize:10,titleColor:NCe,tickColor:T_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:j9,group:{fill:j9},legend:{labelColor:P9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:P9,titleFontSize:14,titlePadding:10},line:{stroke:kl,strokeWidth:2},path:{stroke:kl,strokeWidth:.5},rect:{fill:kl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:kl},bar:{binSpacing:2,fill:kl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Fl="#000",zCe={group:{fill:"#e5e5e5"},arc:{fill:Fl},area:{fill:Fl},line:{stroke:Fl},path:{stroke:Fl},rect:{fill:Fl},shape:{stroke:Fl},symbol:{fill:Fl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},BCe=22,LCe="normal",q9="Benton Gothic, sans-serif",H9=11.5,UCe="normal",Ol="#82c6df",k_="Benton Gothic Bold, sans-serif",G9="normal",Y9=13,X0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},ICe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:k_,fontSize:BCe,fontWeight:LCe},arc:{fill:Ol},area:{fill:Ol},line:{stroke:Ol,strokeWidth:2},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{fill:Ol,size:30},axis:{labelFont:q9,labelFontSize:H9,labelFontWeight:UCe,titleFont:k_,titleFontSize:Y9,titleFontWeight:G9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:q9,labelFontSize:H9,symbolType:"square",titleFont:k_,titleFontSize:Y9,titleFontWeight:G9},range:{category:X0["category-6"],diverging:X0["fireandice-6"],heatmap:X0["fire-7"],ordinal:X0["fire-7"],ramp:X0["fire-7"]}},Nl="#ab5787",fy="#979797",jCe={background:"#f9f9f9",arc:{fill:Nl},area:{fill:Nl},line:{stroke:Nl},path:{stroke:Nl},rect:{fill:Nl},shape:{stroke:Nl},symbol:{fill:Nl,size:30},axis:{domainColor:fy,domainWidth:.5,gridWidth:.2,labelColor:fy,tickColor:fy,tickWidth:.2,titleColor:fy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Rl="#3e5c69",PCe={background:"#fff",arc:{fill:Rl},area:{fill:Rl},line:{stroke:Rl},path:{stroke:Rl},rect:{fill:Rl},shape:{stroke:Rl},symbol:{fill:Rl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},jr="#1696d2",X9="#000000",qCe="#FFFFFF",dy="Lato",F_="Lato",HCe="Lato",GCe="#DEDDDD",YCe=18,V0={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},XCe={background:qCe,title:{anchor:"start",fontSize:YCe,font:dy},axisX:{domain:!0,domainColor:X9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:F_,labelAngle:0,tickColor:X9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:dy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:GCe,gridWidth:1,labelFontSize:12,labelFont:F_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:dy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:F_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:dy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:V0["six-groups-cat-1"],diverging:V0["diverging-colors"],heatmap:V0["diverging-colors"],ordinal:V0["six-groups-seq"],ramp:V0["shades-blue"]},area:{fill:jr},rect:{fill:jr},line:{color:jr,stroke:jr,strokeWidth:5},trail:{color:jr,stroke:jr,strokeWidth:0,size:1},path:{stroke:jr,strokeWidth:.5},point:{filled:!0},text:{font:HCe,color:jr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:jr,stroke:null}},arc:{fill:jr},shape:{stroke:jr},symbol:{fill:jr,size:30}},zl="#3366CC",V9="#ccc",hy="Arial, sans-serif",VCe={arc:{fill:zl},area:{fill:zl},path:{stroke:zl},rect:{fill:zl},shape:{stroke:zl},symbol:{stroke:zl},circle:{fill:zl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:hy,fontSize:12},"guide-title":{font:hy,fontSize:12},"group-title":{font:hy,fontSize:12}},title:{font:hy,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:V9,tickColor:V9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$k=e=>e*(1/3+1),W9=$k(9),Q9=$k(10),Z9=$k(12),W0="Segoe UI",K9="wf_standard-font, helvetica, arial, sans-serif",J9="#252423",Q0="#605E5C",e7="transparent",WCe="#C8C6C4",fa="#118DFF",QCe="#12239E",ZCe="#E66C37",KCe="#6B007B",JCe="#E044A7",e3e="#744EC2",t3e="#D9B300",n3e="#D64550",vX=fa,bX="#DEEFFF",t7=[bX,vX],i3e=[bX,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",vX],r3e={view:{stroke:e7},background:e7,font:W0,header:{titleFont:K9,titleFontSize:Z9,titleColor:J9,labelFont:W0,labelFontSize:Q9,labelColor:Q0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Q0,labelFontSize:W9,titleFont:K9,titleColor:J9,titleFontSize:Z9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:WCe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:fa},line:{stroke:fa,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:W0,fontSize:W9,fill:Q0},arc:{fill:fa},area:{fill:fa,line:!0,opacity:.6},path:{stroke:fa},rect:{fill:fa},point:{fill:fa,filled:!0,size:75},shape:{stroke:fa},symbol:{fill:fa,strokeWidth:1.5,size:50},legend:{titleFont:W0,titleFontWeight:"bold",titleColor:Q0,labelFont:W0,labelFontSize:Q9,labelColor:Q0,symbolType:"circle",symbolSize:75},range:{category:[fa,QCe,ZCe,KCe,JCe,e3e,t3e,n3e],diverging:t7,heatmap:t7,ordinal:i3e}},O_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',a3e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',N_=400,gy={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},s3e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],o3e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Lx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=gy.gridBg[e],r=gy.textPrimary[e],a=gy.textSecondary[e],s=n==="dark"?s3e:o3e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:O_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:a3e,labelFontWeight:N_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:gy.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:O_,fill:a,fontWeight:N_},"guide-title":{font:O_,fill:a,fontWeight:N_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const u3e=Lx({theme:"white",background:"#ffffff"}),l3e=Lx({theme:"g10",background:"#f4f4f4"}),c3e=Lx({theme:"g90",background:"#262626"}),f3e=Lx({theme:"g100",background:"#161616"}),d3e=TCe.version,h3e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:l3e,carbong100:f3e,carbong90:c3e,carbonwhite:u3e,dark:kCe,excel:FCe,fivethirtyeight:RCe,ggplot2:zCe,googlecharts:VCe,latimes:ICe,powerbi:r3e,quartz:jCe,urbaninstitute:XCe,version:d3e,vox:PCe},Symbol.toStringTag,{value:"Module"}));function g3e(e,t,n,i){if(we(e))return`[${e.map(r=>t(ut(r)?r:n7(r,n))).join(", ")}]`;if(Ue(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const f of l){let d=o[f];d!==void 0&&(Ue(d)&&(d=n7(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function p3e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function n7(e,t){return JSON.stringify(e,p3e(t))}var m3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const xX="vg-tooltip-element",y3e={offsetX:10,offsetY:10,id:xX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:v3e,maxDepth:2,formatTooltip:g3e,baseURL:""};function v3e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function b3e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return m3e.toString().replace(xX,e)}function x3e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:r,y:a}}class E3e{constructor(t){this.options={...y3e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=b3e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=x3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var R_={};function A3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z_,i7;function S3e(){return i7||(i7=1,z_=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),z_}var _3e=pt;pt.Node=Tc;pt.create=pt;function pt(e){var t=this;if(t instanceof pt||(t=new pt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}pt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};pt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};pt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};pt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)C3e(this,arguments[e]);return this.length};pt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)D3e(this,arguments[e]);return this.length};pt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};pt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};pt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};pt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};pt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};pt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};pt.prototype.map=function(e,t){t=t||this;for(var n=new pt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};pt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new pt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};pt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};pt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};pt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};pt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};pt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new pt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};pt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new pt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};pt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var a=[],i=0;r&&i<t;i++)a.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=w3e(this,r,n[i]);return a};pt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function w3e(e,t,n){var i=t===e.head?new Tc(n,null,t,e):new Tc(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function C3e(e,t){e.tail=new Tc(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function D3e(e,t){e.head=new Tc(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Tc(e,t,n,i){if(!(this instanceof Tc))return new Tc(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{S3e()(pt)}catch{}const $3e=_3e,Gl=Symbol("max"),ro=Symbol("length"),Wf=Symbol("lengthCalculator"),Lg=Symbol("allowStale"),Ql=Symbol("maxAge"),eo=Symbol("dispose"),r7=Symbol("noDisposeOnSet"),kn=Symbol("lruList"),da=Symbol("cache"),EX=Symbol("updateAgeOnGet"),B_=()=>1;class M3e{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Gl]=t.max||1/0;const n=t.length||B_;if(this[Wf]=typeof n!="function"?B_:n,this[Lg]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ql]=t.maxAge||0,this[eo]=t.dispose,this[r7]=t.noDisposeOnSet||!1,this[EX]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Gl]=t||1/0,Z0(this)}get max(){return this[Gl]}set allowStale(t){this[Lg]=!!t}get allowStale(){return this[Lg]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Ql]=t,Z0(this)}get maxAge(){return this[Ql]}set lengthCalculator(t){typeof t!="function"&&(t=B_),t!==this[Wf]&&(this[Wf]=t,this[ro]=0,this[kn].forEach(n=>{n.length=this[Wf](n.value,n.key),this[ro]+=n.length})),Z0(this)}get lengthCalculator(){return this[Wf]}get length(){return this[ro]}get itemCount(){return this[kn].length}rforEach(t,n){n=n||this;for(let i=this[kn].tail;i!==null;){const r=i.prev;a7(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[kn].head;i!==null;){const r=i.next;a7(this,t,i,n),i=r}}keys(){return this[kn].toArray().map(t=>t.key)}values(){return this[kn].toArray().map(t=>t.value)}reset(){this[eo]&&this[kn]&&this[kn].length&&this[kn].forEach(t=>this[eo](t.key,t.value)),this[da]=new Map,this[kn]=new $3e,this[ro]=0}dump(){return this[kn].map(t=>wb(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[kn]}set(t,n,i){if(i=i||this[Ql],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,a=this[Wf](n,t);if(this[da].has(t)){if(a>this[Gl])return vd(this,this[da].get(t)),!1;const l=this[da].get(t).value;return this[eo]&&(this[r7]||this[eo](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[ro]+=a-l.length,l.length=a,this.get(t),Z0(this),!0}const s=new T3e(t,n,a,r,i);return s.length>this[Gl]?(this[eo]&&this[eo](t,n),!1):(this[ro]+=s.length,this[kn].unshift(s),this[da].set(t,this[kn].head),Z0(this),!0)}has(t){if(!this[da].has(t))return!1;const n=this[da].get(t).value;return!wb(this,n)}get(t){return L_(this,t,!0)}peek(t){return L_(this,t,!1)}pop(){const t=this[kn].tail;return t?(vd(this,t),t.value):null}del(t){vd(this,this[da].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],a=r.e||0;if(a===0)this.set(r.k,r.v);else{const s=a-n;s>0&&this.set(r.k,r.v,s)}}}prune(){this[da].forEach((t,n)=>L_(this,n,!1))}}const L_=(e,t,n)=>{const i=e[da].get(t);if(i){const r=i.value;if(wb(e,r)){if(vd(e,i),!e[Lg])return}else n&&(e[EX]&&(i.value.now=Date.now()),e[kn].unshiftNode(i));return r.value}},wb=(e,t)=>{if(!t||!t.maxAge&&!e[Ql])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Ql]&&n>e[Ql]},Z0=e=>{if(e[ro]>e[Gl])for(let t=e[kn].tail;e[ro]>e[Gl]&&t!==null;){const n=t.prev;vd(e,t),t=n}},vd=(e,t)=>{if(t){const n=t.value;e[eo]&&e[eo](n.key,n.value),e[ro]-=n.length,e[da].delete(n.key),e[kn].removeNode(t)}};class T3e{constructor(t,n,i,r,a){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=a||0}}const a7=(e,t,n,i)=>{let r=n.value;wb(e,r)&&(vd(e,n),e[Lg]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var k3e=M3e;const F3e=Object.freeze({loose:!0}),O3e=Object.freeze({}),N3e=e=>e?typeof e!="object"?F3e:e:O3e;var Mk=N3e,s3={exports:{}};const AX=256,R3e=Number.MAX_SAFE_INTEGER||9007199254740991,z3e=16,B3e=AX-6;var Tk={MAX_LENGTH:AX,MAX_SAFE_COMPONENT_LENGTH:z3e,MAX_SAFE_BUILD_LENGTH:B3e,MAX_SAFE_INTEGER:R3e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const L3e=typeof process=="object"&&R_&&R_.NODE_DEBUG&&/\bsemver\b/i.test(R_.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ux=L3e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Tk,a=Ux;t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],f=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[h,i]],y=b=>{for(const[E,S]of p)b=b.split(`${E}*`).join(`${E}{0,${S}}`).split(`${E}+`).join(`${E}{1,${S}}`);return b},v=(b,E,S)=>{const _=y(E),w=d++;a(b,w,E),f[b]=w,l[w]=E,s[w]=new RegExp(E,S?"g":void 0),o[w]=new RegExp(_,S?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),v("MAINVERSION",`(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[f.NUMERICIDENTIFIER]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[f.NUMERICIDENTIFIERLOOSE]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[f.PRERELEASEIDENTIFIER]}(?:\\.${l[f.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[f.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${h}+`),v("BUILD",`(?:\\+(${l[f.BUILDIDENTIFIER]}(?:\\.${l[f.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[f.MAINVERSION]}${l[f.PRERELEASE]}?${l[f.BUILD]}?`),v("FULL",`^${l[f.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[f.MAINVERSIONLOOSE]}${l[f.PRERELEASELOOSE]}?${l[f.BUILD]}?`),v("LOOSE",`^${l[f.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[f.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:${l[f.PRERELEASE]})?${l[f.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:${l[f.PRERELEASELOOSE]})?${l[f.BUILD]}?)?)?`),v("XRANGE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),v("COERCERTL",l[f.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[f.LONECARET]}${l[f.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[f.LONECARET]}${l[f.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[f.GTLT]}\\s*(${l[f.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]}|${l[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[f.XRANGEPLAIN]})\\s+-\\s+(${l[f.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[f.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(s3,s3.exports);var kk=s3.exports;const s7=/^[0-9]+$/,U3e=(e,t)=>{const n=s7.test(e),i=s7.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var I3e={compareIdentifiers:U3e};const py=Ux,{MAX_LENGTH:o7,MAX_SAFE_INTEGER:my}=Tk,{safeRe:u7,t:l7}=kk,j3e=Mk,{compareIdentifiers:Qf}=I3e;let P3e=class Wa{constructor(t,n){if(n=j3e(n),t instanceof Wa){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>o7)throw new TypeError(`version is longer than ${o7} characters`);py("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?u7[l7.LOOSE]:u7[l7.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>my||this.major<0)throw new TypeError("Invalid major version");if(this.minor>my||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>my||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const a=+r;if(a>=0&&a<my)return a}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(py("SemVer.compare",this.version,this.options,t),!(t instanceof Wa)){if(typeof t=="string"&&t===this.version)return 0;t=new Wa(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Wa||(t=new Wa(t,this.options)),Qf(this.major,t.major)||Qf(this.minor,t.minor)||Qf(this.patch,t.patch)}comparePre(t){if(t instanceof Wa||(t=new Wa(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(py("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Qf(i,r)}while(++n)}compareBuild(t){t instanceof Wa||(t=new Wa(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(py("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Qf(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let a=[n,r];i===!1&&(a=[n]),Qf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Fk=P3e;const c7=Fk,q3e=(e,t,n)=>new c7(e,n).compare(new c7(t,n));var Ch=q3e;const H3e=Ch,G3e=(e,t,n)=>H3e(e,t,n)===0;var Y3e=G3e;const X3e=Ch,V3e=(e,t,n)=>X3e(e,t,n)!==0;var W3e=V3e;const Q3e=Ch,Z3e=(e,t,n)=>Q3e(e,t,n)>0;var K3e=Z3e;const J3e=Ch,eDe=(e,t,n)=>J3e(e,t,n)>=0;var tDe=eDe;const nDe=Ch,iDe=(e,t,n)=>nDe(e,t,n)<0;var rDe=iDe;const aDe=Ch,sDe=(e,t,n)=>aDe(e,t,n)<=0;var oDe=sDe;const uDe=Y3e,lDe=W3e,cDe=K3e,fDe=tDe,dDe=rDe,hDe=oDe,gDe=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return uDe(e,n,i);case"!=":return lDe(e,n,i);case">":return cDe(e,n,i);case">=":return fDe(e,n,i);case"<":return dDe(e,n,i);case"<=":return hDe(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var pDe=gDe,U_,f7;function mDe(){if(f7)return U_;f7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}U_=t;const n=Mk,{safeRe:i,t:r}=kk,a=pDe,s=Ux,o=Fk,l=SX();return U_}var I_,d7;function SX(){if(d7)return I_;d7=1;class e{constructor(j,I){if(I=i(I),j instanceof e)return j.loose===!!I.loose&&j.includePrerelease===!!I.includePrerelease?j:new e(j.raw,I);if(j instanceof r)return this.raw=j.value,this.set=[[j]],this.format(),this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=j.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(q=>!v(q[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&b(q[0])){this.set=[q];break}}}this.format()}format(){return this.range=this.set.map(j=>j.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(j){const N=((this.options.includePrerelease&&p)|(this.options.loose&&y))+":"+j,q=n.get(N);if(q)return q;const Y=this.options.loose,J=Y?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];j=j.replace(J,z(this.options.includePrerelease)),a("hyphen replace",j),j=j.replace(o[l.COMPARATORTRIM],f),a("comparator trim",j),j=j.replace(o[l.TILDETRIM],d),a("tilde trim",j),j=j.replace(o[l.CARETTRIM],h),a("caret trim",j);let R=j.split(" ").map(ge=>S(ge,this.options)).join(" ").split(/\s+/).map(ge=>U(ge,this.options));Y&&(R=R.filter(ge=>(a("loose invalid filter",ge,this.options),!!ge.match(o[l.COMPARATORLOOSE])))),a("range list",R);const V=new Map,se=R.map(ge=>new r(ge,this.options));for(const ge of se){if(v(ge))return[ge];V.set(ge.value,ge)}V.size>1&&V.has("")&&V.delete("");const oe=[...V.values()];return n.set(N,oe),oe}intersects(j,I){if(!(j instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>E(N,I)&&j.set.some(q=>E(q,I)&&N.every(Y=>q.every(J=>Y.intersects(J,I)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new s(j,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(G(this.set[I],j,this.options))return!0;return!1}}I_=e;const t=k3e,n=new t({max:1e3}),i=Mk,r=mDe(),a=Ux,s=Fk,{safeRe:o,t:l,comparatorTrimReplace:f,tildeTrimReplace:d,caretTrimReplace:h}=kk,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:y}=Tk,v=B=>B.value==="<0.0.0-0",b=B=>B.value==="",E=(B,j)=>{let I=!0;const N=B.slice();let q=N.pop();for(;I&&N.length;)I=N.every(Y=>q.intersects(Y,j)),q=N.pop();return I},S=(B,j)=>(a("comp",B,j),B=$(B,j),a("caret",B),B=w(B,j),a("tildes",B),B=D(B,j),a("xrange",B),B=O(B,j),a("stars",B),B),_=B=>!B||B.toLowerCase()==="x"||B==="*",w=(B,j)=>B.trim().split(/\s+/).map(I=>C(I,j)).join(" "),C=(B,j)=>{const I=j.loose?o[l.TILDELOOSE]:o[l.TILDE];return B.replace(I,(N,q,Y,J,R)=>{a("tilde",B,N,q,Y,J,R);let V;return _(q)?V="":_(Y)?V=`>=${q}.0.0 <${+q+1}.0.0-0`:_(J)?V=`>=${q}.${Y}.0 <${q}.${+Y+1}.0-0`:R?(a("replaceTilde pr",R),V=`>=${q}.${Y}.${J}-${R} <${q}.${+Y+1}.0-0`):V=`>=${q}.${Y}.${J} <${q}.${+Y+1}.0-0`,a("tilde return",V),V})},$=(B,j)=>B.trim().split(/\s+/).map(I=>T(I,j)).join(" "),T=(B,j)=>{a("caret",B,j);const I=j.loose?o[l.CARETLOOSE]:o[l.CARET],N=j.includePrerelease?"-0":"";return B.replace(I,(q,Y,J,R,V)=>{a("caret",B,q,Y,J,R,V);let se;return _(Y)?se="":_(J)?se=`>=${Y}.0.0${N} <${+Y+1}.0.0-0`:_(R)?Y==="0"?se=`>=${Y}.${J}.0${N} <${Y}.${+J+1}.0-0`:se=`>=${Y}.${J}.0${N} <${+Y+1}.0.0-0`:V?(a("replaceCaret pr",V),Y==="0"?J==="0"?se=`>=${Y}.${J}.${R}-${V} <${Y}.${J}.${+R+1}-0`:se=`>=${Y}.${J}.${R}-${V} <${Y}.${+J+1}.0-0`:se=`>=${Y}.${J}.${R}-${V} <${+Y+1}.0.0-0`):(a("no pr"),Y==="0"?J==="0"?se=`>=${Y}.${J}.${R}${N} <${Y}.${J}.${+R+1}-0`:se=`>=${Y}.${J}.${R}${N} <${Y}.${+J+1}.0-0`:se=`>=${Y}.${J}.${R} <${+Y+1}.0.0-0`),a("caret return",se),se})},D=(B,j)=>(a("replaceXRanges",B,j),B.split(/\s+/).map(I=>F(I,j)).join(" ")),F=(B,j)=>{B=B.trim();const I=j.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return B.replace(I,(N,q,Y,J,R,V)=>{a("xRange",B,N,q,Y,J,R,V);const se=_(Y),oe=se||_(J),ge=oe||_(R),Se=ge;return q==="="&&Se&&(q=""),V=j.includePrerelease?"-0":"",se?q===">"||q==="<"?N="<0.0.0-0":N="*":q&&Se?(oe&&(J=0),R=0,q===">"?(q=">=",oe?(Y=+Y+1,J=0,R=0):(J=+J+1,R=0)):q==="<="&&(q="<",oe?Y=+Y+1:J=+J+1),q==="<"&&(V="-0"),N=`${q+Y}.${J}.${R}${V}`):oe?N=`>=${Y}.0.0${V} <${+Y+1}.0.0-0`:ge&&(N=`>=${Y}.${J}.0${V} <${Y}.${+J+1}.0-0`),a("xRange return",N),N})},O=(B,j)=>(a("replaceStars",B,j),B.trim().replace(o[l.STAR],"")),U=(B,j)=>(a("replaceGTE0",B,j),B.trim().replace(o[j.includePrerelease?l.GTE0PRE:l.GTE0],"")),z=B=>(j,I,N,q,Y,J,R,V,se,oe,ge,Se,De)=>(_(N)?I="":_(q)?I=`>=${N}.0.0${B?"-0":""}`:_(Y)?I=`>=${N}.${q}.0${B?"-0":""}`:J?I=`>=${I}`:I=`>=${I}${B?"-0":""}`,_(se)?V="":_(oe)?V=`<${+se+1}.0.0-0`:_(ge)?V=`<${se}.${+oe+1}.0-0`:Se?V=`<=${se}.${oe}.${ge}-${Se}`:B?V=`<${se}.${oe}.${+ge+1}-0`:V=`<=${V}`,`${I} ${V}`.trim()),G=(B,j,I)=>{for(let N=0;N<B.length;N++)if(!B[N].test(j))return!1;if(j.prerelease.length&&!I.includePrerelease){for(let N=0;N<B.length;N++)if(a(B[N].semver),B[N].semver!==r.ANY&&B[N].semver.prerelease.length>0){const q=B[N].semver;if(q.major===j.major&&q.minor===j.minor&&q.patch===j.patch)return!0}return!1}return!0};return I_}const yDe=SX(),vDe=(e,t,n)=>{try{t=new yDe(t,n)}catch{return!1}return t.test(e)};var bDe=vDe,_X=A3e(bDe);function xDe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var EDe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function wX(e,...t){for(const n of t)ADe(e,n);return e}function ADe(e,t){for(const n of Object.keys(t))Tb(e,n,t[n],!0)}const Qa=uye;let yp=$Ce;const h7=typeof window<"u"?window:void 0;yp===void 0&&h7?.vl?.compile&&(yp=h7.vl);const SDe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},_De={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Eg={vega:"Vega","vega-lite":"Vega-Lite"},Cb={vega:Qa.version,"vega-lite":yp?yp.version:"not available"},wDe={vega:e=>e,"vega-lite":(e,t)=>yp.compile(e,{config:t}).spec},CDe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,DDe="chart-wrapper";function $De(e){return typeof e=="function"}function g7(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Eg[i]} JSON Source`}function MDe(e,t){if(e.$schema){const n=yX(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Eg[n.library]}, but mode argument sets ${Eg[t]??t}.`);const i=n.library;return _X(Cb[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Eg[i]} ${n.version}, but the current version of ${Eg[i]} is v${Cb[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function CX(e){return!!(e&&"load"in e)}function p7(e){return CX(e)?e:Qa.loader(e)}function TDe(e){const t=e.usermeta?.embedOptions??{};return ut(t.defaultStyle)&&(t.defaultStyle=!1),t}async function kDe(e,t,n={}){let i,r;ut(t)?(r=p7(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=TDe(i),s=a.loader;(!r||s)&&(r=p7(n.loader??s));const o=await m7(a,r),l=await m7(n,r),f={...wX(l,o),config:Mb(l.config??{},o.config??{})};return await ODe(e,i,f,r)}async function m7(e,t){const n=ut(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ut(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function FDe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ODe(e,t,n={},i){const r=n.theme?Mb(h3e[n.theme],n.config??{}):n.config,a=y3(n.actions)?n.actions:wX({},SDe,n.actions??{}),s={..._De,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Qa.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const $="vega-embed-style",{root:T,rootContainer:D}=FDe(d);if(!T.getElementById($)){const F=document.createElement("style");F.id=$,F.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?EDe.toString():n.defaultStyle,D.appendChild(F)}}const h=MDe(t,n.mode);let p=wDe[h](t,r);if(h==="vega-lite"&&p.$schema){const $=yX(p.$schema);_X(Cb.vega,`^${$.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${$.version}, but current version is v${Cb.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const $=document.createElement("div");$.classList.add(DDe),d.appendChild($),y=$}const v=n.patch;if(v&&(p=v instanceof Function?v(p):Db(p,v,!0,!1).newDocument),n.formatLocale&&Qa.formatLocale(n.formatLocale),n.timeFormatLocale&&Qa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const $ in n.expressionFunctions){const T=n.expressionFunctions[$];"fn"in T?Qa.expressionFunction($,T.fn,T.visitor):T instanceof Function&&Qa.expressionFunction($,T)}const{ast:b}=n,E=Qa.parse(p,h==="vega-lite"?{}:r,{ast:b}),S=new(n.viewClass||Qa.View)(E,{loader:i,logLevel:l,renderer:o,...b?{expr:Qa.expressionInterpreter??n.expr??vye}:{}});if(S.addSignalListener("autosize",($,T)=>{const{type:D}=T;D=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):D=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):D=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:$,tooltip:T}=n,D=$&&!CX($)?$?.baseURL:void 0,F=$De(T)?T:new E3e({baseURL:D,...T===!0?{}:T}).call;S.tooltip(F)}let{hover:_}=n;if(_===void 0&&(_=h==="vega"),_){const{hoverSet:$,updateSet:T}=typeof _=="boolean"?{}:_;S.hover($,T)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),await S.initialize(y,n.bind).runAsync();let w;if(a!==!1){let $=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const D=document.createElement("details");D.title=s.CLICK_TO_VIEW_ACTIONS,d.append(D),$=D;const F=document.createElement("summary");F.innerHTML=CDe,D.append(F),w=O=>{D.contains(O.target)||D.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if($.append(T),T.classList.add("vega-actions"),a===!0||a.export!==!1){for(const D of["svg","png"])if(a===!0||a.export===!0||a.export[D]){const F=s[`${D.toUpperCase()}_ACTION`],O=document.createElement("a"),U=Ue(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;O.text=F,O.href="#",O.target="_blank",O.download=`${f}.${D}`,O.addEventListener("mousedown",async function(z){z.preventDefault();const G=await S.toImageURL(D,U);this.href=G}),T.append(O)}}if(a===!0||a.source!==!1){const D=document.createElement("a");D.text=s.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(F){g7(aS(t),n.sourceHeader??"",n.sourceFooter??"",h),F.preventDefault()}),T.append(D)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const D=document.createElement("a");D.text=s.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(F){g7(aS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),F.preventDefault()}),T.append(D)}if(a===!0||a.editor!==!1){const D=n.editorUrl??"https://vega.github.io/editor/",F=document.createElement("a");F.text=s.EDITOR_ACTION,F.href="#",F.addEventListener("click",function(O){xDe(window,D,{config:r,mode:h,renderer:o,spec:aS(t)}),O.preventDefault()}),T.append(F)}}function C(){w&&document.removeEventListener("click",w),S.finalize()}return{view:S,spec:t,vgSpec:p,finalize:C,embedOptions:n}}const NDe="https://vega.github.io/schema/vega/v6.json",RDe="A node-link diagram with force-directed layout, depicting character co-occurrence in the novel Les Misrables.",zDe=700,BDe=500,LDe=0,UDe="none",IDe=[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{name:"nodeRadius",value:8,bind:{input:"range",min:1,max:50,step:1}},{name:"nodeCharge",value:-30,bind:{input:"range",min:-100,max:10,step:1}},{name:"linkDistance",value:30,bind:{input:"range",min:5,max:100,step:1}},{name:"static",value:!0,bind:{input:"checkbox"}},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"symbol:pointerout[!event.buttons], window:pointerup",update:"false"},{events:"symbol:pointerover",update:"fix || true"},{events:"[symbol:pointerdown, window:pointerup] > window:pointermove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"symbol:pointerover",update:"fix === true ? item() : node"}]},{description:"Flag to restart Force simulation upon data changes.",name:"restart",value:!1,on:[{events:{signal:"fix"},update:"fix && fix.length"}]}],jDe=[{name:"node-data"},{name:"link-data"}],PDe=[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"category20c"}}],qDe=[{name:"nodes",type:"symbol",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{scale:"color",field:"group"},stroke:{value:"white"}},update:{size:{signal:"2 * nodeRadius * nodeRadius"},cursor:{value:"pointer"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},static:{signal:"static"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide",radius:{signal:"nodeRadius"}},{force:"nbody",strength:{signal:"nodeCharge"}},{force:"link",links:"link-data",distance:{signal:"linkDistance"}}]}]},{type:"path",from:{data:"link-data"},interactive:!1,encode:{update:{stroke:{value:"#ccc"},strokeWidth:{value:.5}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]}],HDe={$schema:NDe,description:RDe,width:zDe,height:BDe,padding:LDe,autosize:UDe,signals:IDe,data:jDe,scales:PDe,marks:qDe};function GDe(e,t){const n=new j_,i=["firstName","lastName","postcode","DoB"];let r=0;return i.forEach(a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",l=n.diff_main(s,o);r+=l.filter(f=>f[0]!==0).length}),1/(1+r)}function YDe(){const e=Si.useRef(null);return Si.useEffect(()=>{const t=Zf.map(r=>({name:`${r.firstName} ${r.lastName} (ID: ${r.id})`,group:1})),n=[];for(let r=0;r<Zf.length;r++)for(let a=r+1;a<Zf.length;a++){const s=GDe(Zf[r],Zf[a]);s>.5&&n.push({source:r,target:a,value:s*10})}const i={...HDe,data:[{name:"node-data",values:t},{name:"link-data",values:n}]};e.current&&kDe(e.current,i,{actions:!0})},[]),ue.jsxs("div",{className:"cluster-viewer-container",children:[ue.jsx("h2",{children:"Cluster Relationship Viewer"}),ue.jsx("div",{ref:e})]})}function XDe(){const[e,t]=Si.useState(Zf),[n,i]=Si.useState([[]]),[r,a]=Si.useState(new Set),[s,o]=Si.useState(new Set),[l,f]=Si.useState(new Set),[d,h]=Si.useState(!1),[p,y]=Si.useState([null,null]),[v,b]=Si.useState({}),[E,S]=Si.useState(30);Si.useEffect(()=>{h(l.size>0)},[l]),Si.useEffect(()=>{p[0]&&p[1]?T():S(30)},[p]);const _=()=>{const D=[],F=n.map(O=>O.filter(z=>s.has(z.id)?(D.push(z),!1):!0)).filter(O=>O.length>0);t(O=>[...O,...D].sort((z,G)=>z.id-G.id)),i(F),o(new Set)},w=D=>{const F=new Set(l);F.has(D)?F.delete(D):F.add(D),f(F)},C=(D,F)=>{const O=[...p];O[F]&&O[F].id===D.id?O[F]=null:O[F]=D,y(O)},$=D=>{if(p[0]&&p[1]){const F=new j_,O=p[0][D].toString(),U=p[1][D].toString(),z=F.diff_main(O,U);return F.diff_cleanupSemantic(z),F.diff_prettyHtml(z).replace(/background:#ffe6e6/g,"background:#ffaaaa").replace(/background:#e6ffe6/g,"background:#aaffaa")}return""},T=()=>{let D=0;const F=["firstName","lastName","postcode","DoB"],O=new j_;F.forEach(U=>{const z=p[0][U].toString(),G=p[1][U].toString(),B=O.diff_main(z,G);D+=B.filter(j=>j[0]!==0).length}),S(30-D)};return ue.jsxs("div",{className:"app-container",children:[ue.jsxs("div",{className:"left-column",children:[ue.jsx("h2",{children:"Unresolved Records"}),ue.jsxs("table",{children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{}),ue.jsx("th",{})," ",ue.jsx("th",{children:"ID"}),ue.jsx("th",{children:"First Name"}),ue.jsx("th",{children:"Last Name"}),d&&ue.jsx("th",{children:"Timestamp"}),ue.jsxs("th",{children:["Select for",ue.jsx("br",{}),"compare"]})]})}),ue.jsx("tbody",{children:e.map(D=>ue.jsxs(WW.Fragment,{children:[ue.jsxs("tr",{children:[ue.jsx("td",{children:ue.jsx("input",{type:"checkbox",checked:r.has(D.id),onChange:()=>{const F=new Set(r);F.has(D.id)?F.delete(D.id):F.add(D.id),a(F)}})}),ue.jsx("td",{children:D.history&&D.history.length>0&&ue.jsx("button",{className:"history-toggle-button",onClick:()=>w(D.id),children:""})}),ue.jsx("td",{children:D.id}),ue.jsx("td",{children:D.firstName}),ue.jsx("td",{children:D.lastName}),d&&ue.jsx("td",{})," ",ue.jsxs("td",{children:[ue.jsx("button",{onClick:()=>C(D,0),className:p[0]&&p[0].id===D.id?"selected":"",children:"1"}),ue.jsx("button",{onClick:()=>C(D,1),className:p[1]&&p[1].id===D.id?"selected":"",children:"2"})]})]},D.id),l.has(D.id)&&D.history&&D.history.length>0&&D.history.map((F,O)=>ue.jsxs("tr",{className:"history-row",children:[ue.jsx("td",{}),ue.jsx("td",{}),ue.jsx("td",{})," ",ue.jsx("td",{children:F.firstName}),ue.jsx("td",{children:F.lastName}),ue.jsx("td",{className:"history-timestamp",children:new Date(F.timestamp).toLocaleString()})]},`${D.id}-hist-${O}`))]},D.id))})]})]}),ue.jsx("div",{className:"controls",children:ue.jsx("button",{disabled:!s.size,onClick:_,children:""})}),ue.jsx("div",{className:"right-column"}),ue.jsxs("div",{className:"comparison-table-container",children:[ue.jsx("h2",{children:"Detailed comparison"}),p[0]&&p[1]&&ue.jsxs("p",{children:["Match Weight: ",E]}),ue.jsxs("table",{children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:"Slot"}),ue.jsx("th",{children:"ID"}),ue.jsx("th",{children:"First Name"}),ue.jsx("th",{children:"Last Name"}),ue.jsx("th",{children:"Postcode"}),ue.jsx("th",{children:"DoB"})]})}),ue.jsxs("tbody",{children:[ue.jsxs("tr",{children:[ue.jsx("td",{children:"1"}),p[0]?ue.jsxs(ue.Fragment,{children:[ue.jsx("td",{children:p[0].id}),ue.jsx("td",{children:p[0].firstName}),ue.jsx("td",{children:p[0].lastName}),ue.jsx("td",{children:p[0].postcode}),ue.jsx("td",{children:p[0].DoB})]}):ue.jsx("td",{colSpan:"5",children:"Empty"})]}),ue.jsxs("tr",{children:[ue.jsx("td",{children:"2"}),p[1]?ue.jsxs(ue.Fragment,{children:[ue.jsx("td",{children:p[1].id}),ue.jsx("td",{children:p[1].firstName}),ue.jsx("td",{children:p[1].lastName}),ue.jsx("td",{children:p[1].postcode}),ue.jsx("td",{children:p[1].DoB})]}):ue.jsx("td",{colSpan:"5",children:"Empty"})]}),p[0]&&p[1]&&ue.jsx(ue.Fragment,{children:ue.jsxs("tr",{children:[ue.jsx("td",{children:"Diff"}),ue.jsx("td",{}),ue.jsx("td",{dangerouslySetInnerHTML:{__html:$("firstName")}}),ue.jsx("td",{dangerouslySetInnerHTML:{__html:$("lastName")}}),ue.jsx("td",{dangerouslySetInnerHTML:{__html:$("postcode")}}),ue.jsx("td",{dangerouslySetInnerHTML:{__html:$("DoB")}})]})})]})]})]}),ue.jsx("button",{className:"done-button",onClick:()=>console.log("Clusters",n),children:"Done"}),ue.jsxs("div",{className:"debug-output-container",children:[ue.jsx("h2",{children:"Debug Output"}),ue.jsxs("table",{children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:"ID"}),ue.jsx("th",{children:"UUID"})]})}),ue.jsxs("tbody",{children:[e.map(D=>ue.jsxs("tr",{children:[ue.jsx("td",{children:D.id}),ue.jsx("td",{children:"N/A"})]},D.id)),n.map((D,F)=>D.map(O=>ue.jsxs("tr",{children:[ue.jsx("td",{children:O.id}),ue.jsx("td",{children:v[F]})]},O.id)))]})]})]}),ue.jsx(YDe,{})]})}nQ.createRoot(document.getElementById("root")).render(ue.jsx(Si.StrictMode,{children:ue.jsx(XDe,{})}));</script>
    <style rel="stylesheet" crossorigin>.app-container{display:grid;grid-template-columns:1fr auto 1fr;gap:1rem;padding:1rem;font-family:monospace}.left-column,.right-column{border:1px solid #ccc;padding:1rem}.cluster-card{border:1px solid purple;padding:1rem;margin-bottom:1rem}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}.history-row td{background-color:#f0f0f0}.history-timestamp{font-size:.8em;color:#666}.done-button{position:fixed;top:1rem;right:1rem}.comparison-table-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem}.comparison-table-container p{font-size:1.2em;font-weight:700;margin-bottom:.5rem}button.selected{background-color:#a8d8a8}.debug-output-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #e0e0e0;padding:1rem;color:#888;background-color:#f8f8f8}.debug-output-container table,.debug-output-container th,.debug-output-container td{border:1px solid #e0e0e0}.cluster-viewer-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem;background-color:#fff}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
