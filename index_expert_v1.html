<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Graph Explorer</title>
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function wV(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GS={exports:{}},jh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN;function AV(){if(SN)return jh;SN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return jh.Fragment=t,jh.jsx=n,jh.jsxs=n,jh}var EN;function CV(){return EN||(EN=1,GS.exports=AV()),GS.exports}var Ee=CV(),YS={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function MV(){if(_N)return qe;_N=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(z){return z===null||typeof z!="object"?null:(z=h&&z[h]||z["@@iterator"],typeof z=="function"?z:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function S(z,W,ne){this.props=z,this.context=W,this.refs=b,this.updater=ne||y}S.prototype.isReactComponent={},S.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=S.prototype;function w(z,W,ne){this.props=z,this.context=W,this.refs=b,this.updater=ne||y}var A=w.prototype=new _;A.constructor=w,v(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function T(z,W,ne,se,me,Se){return ne=Se.ref,{$$typeof:e,type:z,key:W,ref:ne!==void 0?ne:null,props:Se}}function O(z,W){return T(z.type,W,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ne){return W[ne]})}var L=/\/+/g;function G(z,W){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):W.toString(36)}function H(){}function I(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function F(z,W,ne,se,me){var Se=typeof z;(Se==="undefined"||Se==="boolean")&&(z=null);var Ce=!1;if(z===null)Ce=!0;else switch(Se){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(z.$$typeof){case e:case t:Ce=!0;break;case d:return Ce=z._init,F(Ce(z._payload),W,ne,se,me)}}if(Ce)return me=me(z),Ce=se===""?"."+G(z,0):se,C(me)?(ne="",Ce!=null&&(ne=Ce.replace(L,"$&/")+"/"),F(me,W,ne,"",function(be){return be})):me!=null&&(N(me)&&(me=O(me,ne+(me.key==null||z&&z.key===me.key?"":(""+me.key).replace(L,"$&/")+"/")+Ce)),W.push(me)),1;Ce=0;var Ht=se===""?".":se+":";if(C(z))for(var nt=0;nt<z.length;nt++)se=z[nt],Se=Ht+G(se,nt),Ce+=F(se,W,ne,Se,me);else if(nt=p(z),typeof nt=="function")for(z=nt.call(z),nt=0;!(se=z.next()).done;)se=se.value,Se=Ht+G(se,nt++),Ce+=F(se,W,ne,Se,me);else if(Se==="object"){if(typeof z.then=="function")return F(I(z),W,ne,se,me);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function R(z,W,ne){if(z==null)return z;var se=[],me=0;return F(z,se,"","",function(Se){return W.call(ne,Se,me++)}),se}function P(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=ne)},function(ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=ne)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var X=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function K(){}return qe.Children={map:R,forEach:function(z,W,ne){R(z,function(){W.apply(this,arguments)},ne)},count:function(z){var W=0;return R(z,function(){W++}),W},toArray:function(z){return R(z,function(W){return W})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},qe.Component=S,qe.Fragment=n,qe.Profiler=r,qe.PureComponent=w,qe.StrictMode=i,qe.Suspense=u,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,qe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},qe.cache=function(z){return function(){return z.apply(null,arguments)}},qe.cloneElement=function(z,W,ne){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var se=v({},z.props),me=z.key,Se=void 0;if(W!=null)for(Ce in W.ref!==void 0&&(Se=void 0),W.key!==void 0&&(me=""+W.key),W)!k.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(se[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)se.children=ne;else if(1<Ce){for(var Ht=Array(Ce),nt=0;nt<Ce;nt++)Ht[nt]=arguments[nt+2];se.children=Ht}return T(z.type,me,void 0,void 0,Se,se)},qe.createContext=function(z){return z={$$typeof:s,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},qe.createElement=function(z,W,ne){var se,me={},Se=null;if(W!=null)for(se in W.key!==void 0&&(Se=""+W.key),W)k.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=W[se]);var Ce=arguments.length-2;if(Ce===1)me.children=ne;else if(1<Ce){for(var Ht=Array(Ce),nt=0;nt<Ce;nt++)Ht[nt]=arguments[nt+2];me.children=Ht}if(z&&z.defaultProps)for(se in Ce=z.defaultProps,Ce)me[se]===void 0&&(me[se]=Ce[se]);return T(z,Se,void 0,void 0,null,me)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(z){return{$$typeof:o,render:z}},qe.isValidElement=N,qe.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:P}},qe.memo=function(z,W){return{$$typeof:f,type:z,compare:W===void 0?null:W}},qe.startTransition=function(z){var W=M.T,ne={};M.T=ne;try{var se=z(),me=M.S;me!==null&&me(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(K,X)}catch(Se){X(Se)}finally{M.T=W}},qe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},qe.use=function(z){return M.H.use(z)},qe.useActionState=function(z,W,ne){return M.H.useActionState(z,W,ne)},qe.useCallback=function(z,W){return M.H.useCallback(z,W)},qe.useContext=function(z){return M.H.useContext(z)},qe.useDebugValue=function(){},qe.useDeferredValue=function(z,W){return M.H.useDeferredValue(z,W)},qe.useEffect=function(z,W,ne){var se=M.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(z,W)},qe.useId=function(){return M.H.useId()},qe.useImperativeHandle=function(z,W,ne){return M.H.useImperativeHandle(z,W,ne)},qe.useInsertionEffect=function(z,W){return M.H.useInsertionEffect(z,W)},qe.useLayoutEffect=function(z,W){return M.H.useLayoutEffect(z,W)},qe.useMemo=function(z,W){return M.H.useMemo(z,W)},qe.useOptimistic=function(z,W){return M.H.useOptimistic(z,W)},qe.useReducer=function(z,W,ne){return M.H.useReducer(z,W,ne)},qe.useRef=function(z){return M.H.useRef(z)},qe.useState=function(z){return M.H.useState(z)},qe.useSyncExternalStore=function(z,W,ne){return M.H.useSyncExternalStore(z,W,ne)},qe.useTransition=function(){return M.H.useTransition()},qe.version="19.1.0",qe}var wN;function rC(){return wN||(wN=1,YS.exports=MV()),YS.exports}var Vr=rC(),XS={exports:{}},qh={},VS={exports:{}},WS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN;function $V(){return AN||(AN=1,function(e){function t(R,P){var X=R.length;R.push(P);e:for(;0<X;){var K=X-1>>>1,z=R[K];if(0<r(z,P))R[K]=P,R[X]=z,X=K;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var P=R[0],X=R.pop();if(X!==P){R[0]=X;e:for(var K=0,z=R.length,W=z>>>1;K<W;){var ne=2*(K+1)-1,se=R[ne],me=ne+1,Se=R[me];if(0>r(se,X))me<z&&0>r(Se,se)?(R[K]=Se,R[me]=X,K=me):(R[K]=se,R[ne]=X,K=ne);else if(me<z&&0>r(Se,X))R[K]=Se,R[me]=X,K=me;else break e}}return P}function r(R,P){var X=R.sortIndex-P.sortIndex;return X!==0?X:R.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var u=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(R){for(var P=n(f);P!==null;){if(P.callback===null)i(f);else if(P.startTime<=R)i(f),P.sortIndex=P.expirationTime,t(u,P);else break;P=n(f)}}function M(R){if(b=!1,C(R),!v)if(n(u)!==null)v=!0,k||(k=!0,G());else{var P=n(f);P!==null&&F(M,P.startTime-R)}}var k=!1,T=-1,O=5,N=-1;function B(){return S?!0:!(e.unstable_now()-N<O)}function L(){if(S=!1,k){var R=e.unstable_now();N=R;var P=!0;try{e:{v=!1,b&&(b=!1,w(T),T=-1),y=!0;var X=p;try{t:{for(C(R),h=n(u);h!==null&&!(h.expirationTime>R&&B());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var z=K(h.expirationTime<=R);if(R=e.unstable_now(),typeof z=="function"){h.callback=z,C(R),P=!0;break t}h===n(u)&&i(u),C(R)}else i(u);h=n(u)}if(h!==null)P=!0;else{var W=n(f);W!==null&&F(M,W.startTime-R),P=!1}}break e}finally{h=null,p=X,y=!1}P=void 0}}finally{P?G():k=!1}}}var G;if(typeof A=="function")G=function(){A(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,I=H.port2;H.port1.onmessage=L,G=function(){I.postMessage(null)}}else G=function(){_(L,0)};function F(R,P){T=_(function(){R(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var X=p;p=P;try{return R()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var X=p;p=R;try{return P()}finally{p=X}},e.unstable_scheduleCallback=function(R,P,X){var K=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,R={id:d++,callback:P,priorityLevel:R,startTime:X,expirationTime:z,sortIndex:-1},X>K?(R.sortIndex=X,t(f,R),n(u)===null&&R===n(f)&&(b?(w(T),T=-1):b=!0,F(M,X-K))):(R.sortIndex=z,t(u,R),v||y||(v=!0,k||(k=!0,G()))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var P=p;return function(){var X=p;p=P;try{return R.apply(this,arguments)}finally{p=X}}}}(WS)),WS}var CN;function TV(){return CN||(CN=1,VS.exports=$V()),VS.exports}var QS={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function kV(){if(MN)return qn;MN=1;var e=rC();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:u,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(u,f,null,d)},qn.flushSync=function(u){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,u)return u()}finally{s.T=f,i.p=d,i.d.f()}},qn.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},qn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},qn.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},qn.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},qn.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(u,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},qn.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},qn.requestFormReset=function(u){i.d.r(u)},qn.unstable_batchedUpdates=function(u,f){return u(f)},qn.useFormState=function(u,f,d){return s.H.useFormState(u,f,d)},qn.useFormStatus=function(){return s.H.useHostTransitionStatus()},qn.version="19.1.0",qn}var $N;function DV(){if($N)return QS.exports;$N=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),QS.exports=kV(),QS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function OV(){if(TN)return qh;TN=1;var e=TV(),t=rC(),n=DV();function i(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function s(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(i(188))}function u(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(i(188));return c!==l?null:l}for(var g=l,m=c;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),l;if(E===m)return o(x),c;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var $=!1,D=x.child;D;){if(D===g){$=!0,g=x,m=E;break}if(D===m){$=!0,m=x,g=E;break}D=D.sibling}if(!$){for(D=E.child;D;){if(D===g){$=!0,g=E,m=x;break}if(D===m){$=!0,m=E,g=x;break}D=D.sibling}if(!$)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?l:c}function f(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=f(l),c!==null)return c;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var H=Symbol.for("react.client.reference");function I(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===H?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case w:return(l._context.displayName||"Context")+".Consumer";case C:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case T:return c=l.displayName||null,c!==null?c:I(l.type)||"Memo";case O:c=l._payload,l=l._init;try{return I(l(c))}catch{}}return null}var F=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},K=[],z=-1;function W(l){return{current:l}}function ne(l){0>z||(l.current=K[z],K[z]=null,z--)}function se(l,c){z++,K[z]=l.current,l.current=c}var me=W(null),Se=W(null),Ce=W(null),Ht=W(null);function nt(l,c){switch(se(Ce,c),se(Se,l),se(me,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?WR(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=WR(c),l=QR(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(me),se(me,l)}function be(){ne(me),ne(Se),ne(Ce)}function Ue(l){l.memoizedState!==null&&se(Ht,l);var c=me.current,g=QR(c,l.type);c!==g&&(se(Se,l),se(me,g))}function Ie(l){Se.current===l&&(ne(me),ne(Se)),Ht.current===l&&(ne(Ht),Lh._currentValue=X)}var ce=Object.prototype.hasOwnProperty,Gt=e.unstable_scheduleCallback,it=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,gn=e.unstable_requestPaint,Jt=e.unstable_now,S0=e.unstable_getCurrentPriorityLevel,Tk=e.unstable_ImmediatePriority,kk=e.unstable_UserBlockingPriority,E0=e.unstable_NormalPriority,aY=e.unstable_LowPriority,Dk=e.unstable_IdlePriority,sY=e.log,oY=e.unstable_setDisableYieldValue,Gd=null,Pi=null;function co(l){if(typeof sY=="function"&&oY(l),Pi&&typeof Pi.setStrictMode=="function")try{Pi.setStrictMode(Gd,l)}catch{}}var ji=Math.clz32?Math.clz32:cY,lY=Math.log,uY=Math.LN2;function cY(l){return l>>>=0,l===0?32:31-(lY(l)/uY|0)|0}var _0=256,w0=4194304;function Fl(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function A0(l,c,g){var m=l.pendingLanes;if(m===0)return 0;var x=0,E=l.suspendedLanes,$=l.pingedLanes;l=l.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?x=Fl(m):($&=D,$!==0?x=Fl($):g||(g=D&~l,g!==0&&(x=Fl(g))))):(D=m&~E,D!==0?x=Fl(D):$!==0?x=Fl($):g||(g=m&~l,g!==0&&(x=Fl(g)))),x===0?0:c!==0&&c!==x&&(c&E)===0&&(E=x&-x,g=c&-c,E>=g||E===32&&(g&4194048)!==0)?c:x}function Yd(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function fY(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ok(){var l=_0;return _0<<=1,(_0&4194048)===0&&(_0=256),l}function Rk(){var l=w0;return w0<<=1,(w0&62914560)===0&&(w0=4194304),l}function Nx(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function Xd(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function dY(l,c,g,m,x,E){var $=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var D=l.entanglements,U=l.expirationTimes,V=l.hiddenUpdates;for(g=$&~g;0<g;){var ie=31-ji(g),oe=1<<ie;D[ie]=0,U[ie]=-1;var Q=V[ie];if(Q!==null)for(V[ie]=null,ie=0;ie<Q.length;ie++){var Z=Q[ie];Z!==null&&(Z.lane&=-536870913)}g&=~oe}m!==0&&Nk(l,m,0),E!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=E&~($&~c))}function Nk(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var m=31-ji(c);l.entangledLanes|=c,l.entanglements[m]=l.entanglements[m]|1073741824|g&4194090}function zk(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var m=31-ji(g),x=1<<m;x&c|l[m]&c&&(l[m]|=c),g&=~x}}function zx(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Fx(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Fk(){var l=P.p;return l!==0?l:(l=window.event,l===void 0?32:pN(l.type))}function hY(l,c){var g=P.p;try{return P.p=l,c()}finally{P.p=g}}var fo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+fo,Ei="__reactProps$"+fo,bc="__reactContainer$"+fo,Lx="__reactEvents$"+fo,gY="__reactListeners$"+fo,pY="__reactHandles$"+fo,Lk="__reactResources$"+fo,Vd="__reactMarker$"+fo;function Ux(l){delete l[Pn],delete l[Ei],delete l[Lx],delete l[gY],delete l[pY]}function xc(l){var c=l[Pn];if(c)return c;for(var g=l.parentNode;g;){if(c=g[bc]||g[Pn]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(l=eN(l);l!==null;){if(g=l[Pn])return g;l=eN(l)}return c}l=g,g=l.parentNode}return null}function Sc(l){if(l=l[Pn]||l[bc]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Wd(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(i(33))}function Ec(l){var c=l[Lk];return c||(c=l[Lk]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function pn(l){l[Vd]=!0}var Uk=new Set,Bk={};function Ll(l,c){_c(l,c),_c(l+"Capture",c)}function _c(l,c){for(Bk[l]=c,l=0;l<c.length;l++)Uk.add(c[l])}var mY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ik={},Pk={};function yY(l){return ce.call(Pk,l)?!0:ce.call(Ik,l)?!1:mY.test(l)?Pk[l]=!0:(Ik[l]=!0,!1)}function C0(l,c,g){if(yY(c))if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+g)}}function M0(l,c,g){if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+g)}}function fs(l,c,g,m){if(m===null)l.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(c,g,""+m)}}var Bx,jk;function wc(l){if(Bx===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Bx=c&&c[1]||"",jk=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bx+l+jk}var Ix=!1;function Px(l,c){if(!l||Ix)return"";Ix=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var Q=Z}Reflect.construct(l,[],oe)}else{try{oe.call()}catch(Z){Q=Z}l.call(oe.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(oe=l())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),$=E[0],D=E[1];if($&&D){var U=$.split(`
`),V=D.split(`
`);for(x=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;x<V.length&&!V[x].includes("DetermineComponentFrameRoot");)x++;if(m===U.length||x===V.length)for(m=U.length-1,x=V.length-1;1<=m&&0<=x&&U[m]!==V[x];)x--;for(;1<=m&&0<=x;m--,x--)if(U[m]!==V[x]){if(m!==1||x!==1)do if(m--,x--,0>x||U[m]!==V[x]){var ie=`
`+U[m].replace(" at new "," at ");return l.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",l.displayName)),ie}while(1<=m&&0<=x);break}}}finally{Ix=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?wc(g):""}function vY(l){switch(l.tag){case 26:case 27:case 5:return wc(l.type);case 16:return wc("Lazy");case 13:return wc("Suspense");case 19:return wc("SuspenseList");case 0:case 15:return Px(l.type,!1);case 11:return Px(l.type.render,!1);case 1:return Px(l.type,!0);case 31:return wc("Activity");default:return""}}function qk(l){try{var c="";do c+=vY(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function fr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Hk(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function bY(l){var c=Hk(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),m=""+l[c];if(!l.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return x.call(this)},set:function($){m=""+$,E.call(this,$)}}),Object.defineProperty(l,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function $0(l){l._valueTracker||(l._valueTracker=bY(l))}function Gk(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return l&&(m=Hk(l)?l.checked?"true":"false":l.value),l=m,l!==g?(c.setValue(l),!0):!1}function T0(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var xY=/[\n"\\]/g;function dr(l){return l.replace(xY,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function jx(l,c,g,m,x,E,$,D){l.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.type=$:l.removeAttribute("type"),c!=null?$==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+fr(c)):l.value!==""+fr(c)&&(l.value=""+fr(c)):$!=="submit"&&$!=="reset"||l.removeAttribute("value"),c!=null?qx(l,$,fr(c)):g!=null?qx(l,$,fr(g)):m!=null&&l.removeAttribute("value"),x==null&&E!=null&&(l.defaultChecked=!!E),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+fr(D):l.removeAttribute("name")}function Yk(l,c,g,m,x,E,$,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),c!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;g=g!=null?""+fr(g):"",c=c!=null?""+fr(c):g,D||c===l.value||(l.value=c),l.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=D?l.checked:!!m,l.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.name=$)}function qx(l,c,g){c==="number"&&T0(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Ac(l,c,g,m){if(l=l.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<l.length;g++)x=c.hasOwnProperty("$"+l[g].value),l[g].selected!==x&&(l[g].selected=x),x&&m&&(l[g].defaultSelected=!0)}else{for(g=""+fr(g),c=null,x=0;x<l.length;x++){if(l[x].value===g){l[x].selected=!0,m&&(l[x].defaultSelected=!0);return}c!==null||l[x].disabled||(c=l[x])}c!==null&&(c.selected=!0)}}function Xk(l,c,g){if(c!=null&&(c=""+fr(c),c!==l.value&&(l.value=c),g==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=g!=null?""+fr(g):""}function Vk(l,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=fr(c),l.defaultValue=g,m=l.textContent,m===g&&m!==""&&m!==null&&(l.value=m)}function Cc(l,c){if(c){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=c;return}}l.textContent=c}var SY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wk(l,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":m?l.setProperty(c,g):typeof g!="number"||g===0||SY.has(c)?c==="float"?l.cssFloat=g:l[c]=(""+g).trim():l[c]=g+"px"}function Qk(l,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(l=l.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&Wk(l,x,m)}else for(var E in c)c.hasOwnProperty(E)&&Wk(l,E,c[E])}function Hx(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_Y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function k0(l){return _Y.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Gx=null;function Yx(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Mc=null,$c=null;function Zk(l){var c=Sc(l);if(c&&(l=c.stateNode)){var g=l[Ei]||null;e:switch(l=c.stateNode,c.type){case"input":if(jx(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+dr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==l&&m.form===l.form){var x=m[Ei]||null;if(!x)throw Error(i(90));jx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===l.form&&Gk(m)}break e;case"textarea":Xk(l,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Ac(l,!!g.multiple,c,!1)}}}var Xx=!1;function Kk(l,c,g){if(Xx)return l(c,g);Xx=!0;try{var m=l(c);return m}finally{if(Xx=!1,(Mc!==null||$c!==null)&&(pm(),Mc&&(c=Mc,l=$c,$c=Mc=null,Zk(c),l)))for(c=0;c<l.length;c++)Zk(l[c])}}function Qd(l,c){var g=l.stateNode;if(g===null)return null;var m=g[Ei]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vx=!1;if(ds)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){Vx=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{Vx=!1}var ho=null,Wx=null,D0=null;function Jk(){if(D0)return D0;var l,c=Wx,g=c.length,m,x="value"in ho?ho.value:ho.textContent,E=x.length;for(l=0;l<g&&c[l]===x[l];l++);var $=g-l;for(m=1;m<=$&&c[g-m]===x[E-m];m++);return D0=x.slice(l,1<m?1-m:void 0)}function O0(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function R0(){return!0}function eD(){return!1}function _i(l){function c(g,m,x,E,$){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=$,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(g=l[D],this[D]=g?g(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?R0:eD,this.isPropagationStopped=eD,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=R0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=R0)},persist:function(){},isPersistent:R0}),c}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=_i(Ul),Kd=d({},Ul,{view:0,detail:0}),wY=_i(Kd),Qx,Zx,Jd,z0=d({},Kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jx,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Jd&&(Jd&&l.type==="mousemove"?(Qx=l.screenX-Jd.screenX,Zx=l.screenY-Jd.screenY):Zx=Qx=0,Jd=l),Qx)},movementY:function(l){return"movementY"in l?l.movementY:Zx}}),tD=_i(z0),AY=d({},z0,{dataTransfer:0}),CY=_i(AY),MY=d({},Kd,{relatedTarget:0}),Kx=_i(MY),$Y=d({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),TY=_i($Y),kY=d({},Ul,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),DY=_i(kY),OY=d({},Ul,{data:0}),nD=_i(OY),RY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FY(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=zY[l])?!!c[l]:!1}function Jx(){return FY}var LY=d({},Kd,{key:function(l){if(l.key){var c=RY[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=O0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?NY[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jx,charCode:function(l){return l.type==="keypress"?O0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?O0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),UY=_i(LY),BY=d({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iD=_i(BY),IY=d({},Kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jx}),PY=_i(IY),jY=d({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),qY=_i(jY),HY=d({},z0,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),GY=_i(HY),YY=d({},Ul,{newState:0,oldState:0}),XY=_i(YY),VY=[9,13,27,32],e2=ds&&"CompositionEvent"in window,eh=null;ds&&"documentMode"in document&&(eh=document.documentMode);var WY=ds&&"TextEvent"in window&&!eh,rD=ds&&(!e2||eh&&8<eh&&11>=eh),aD=" ",sD=!1;function oD(l,c){switch(l){case"keyup":return VY.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lD(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Tc=!1;function QY(l,c){switch(l){case"compositionend":return lD(c);case"keypress":return c.which!==32?null:(sD=!0,aD);case"textInput":return l=c.data,l===aD&&sD?null:l;default:return null}}function ZY(l,c){if(Tc)return l==="compositionend"||!e2&&oD(l,c)?(l=Jk(),D0=Wx=ho=null,Tc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return rD&&c.locale!=="ko"?null:c.data;default:return null}}var KY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uD(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!KY[l.type]:c==="textarea"}function cD(l,c,g,m){Mc?$c?$c.push(m):$c=[m]:Mc=m,c=Sm(c,"onChange"),0<c.length&&(g=new N0("onChange","change",null,g,m),l.push({event:g,listeners:c}))}var th=null,nh=null;function JY(l){HR(l,0)}function F0(l){var c=Wd(l);if(Gk(c))return l}function fD(l,c){if(l==="change")return c}var dD=!1;if(ds){var t2;if(ds){var n2="oninput"in document;if(!n2){var hD=document.createElement("div");hD.setAttribute("oninput","return;"),n2=typeof hD.oninput=="function"}t2=n2}else t2=!1;dD=t2&&(!document.documentMode||9<document.documentMode)}function gD(){th&&(th.detachEvent("onpropertychange",pD),nh=th=null)}function pD(l){if(l.propertyName==="value"&&F0(nh)){var c=[];cD(c,nh,l,Yx(l)),Kk(JY,c)}}function eX(l,c,g){l==="focusin"?(gD(),th=c,nh=g,th.attachEvent("onpropertychange",pD)):l==="focusout"&&gD()}function tX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return F0(nh)}function nX(l,c){if(l==="click")return F0(c)}function iX(l,c){if(l==="input"||l==="change")return F0(c)}function rX(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var qi=typeof Object.is=="function"?Object.is:rX;function ih(l,c){if(qi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!ce.call(c,x)||!qi(l[x],c[x]))return!1}return!0}function mD(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function yD(l,c){var g=mD(l);l=0;for(var m;g;){if(g.nodeType===3){if(m=l+g.textContent.length,l<=c&&m>=c)return{node:g,offset:c-l};l=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=mD(g)}}function vD(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?vD(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function bD(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=T0(l.document);c instanceof l.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)l=c.contentWindow;else break;c=T0(l.document)}return c}function i2(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var aX=ds&&"documentMode"in document&&11>=document.documentMode,kc=null,r2=null,rh=null,a2=!1;function xD(l,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;a2||kc==null||kc!==T0(m)||(m=kc,"selectionStart"in m&&i2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),rh&&ih(rh,m)||(rh=m,m=Sm(r2,"onSelect"),0<m.length&&(c=new N0("onSelect","select",null,c,g),l.push({event:c,listeners:m}),c.target=kc)))}function Bl(l,c){var g={};return g[l.toLowerCase()]=c.toLowerCase(),g["Webkit"+l]="webkit"+c,g["Moz"+l]="moz"+c,g}var Dc={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},s2={},SD={};ds&&(SD=document.createElement("div").style,"AnimationEvent"in window||(delete Dc.animationend.animation,delete Dc.animationiteration.animation,delete Dc.animationstart.animation),"TransitionEvent"in window||delete Dc.transitionend.transition);function Il(l){if(s2[l])return s2[l];if(!Dc[l])return l;var c=Dc[l],g;for(g in c)if(c.hasOwnProperty(g)&&g in SD)return s2[l]=c[g];return l}var ED=Il("animationend"),_D=Il("animationiteration"),wD=Il("animationstart"),sX=Il("transitionrun"),oX=Il("transitionstart"),lX=Il("transitioncancel"),AD=Il("transitionend"),CD=new Map,o2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o2.push("scrollEnd");function Ir(l,c){CD.set(l,c),Ll(c,[l])}var MD=new WeakMap;function hr(l,c){if(typeof l=="object"&&l!==null){var g=MD.get(l);return g!==void 0?g:(c={value:l,source:c,stack:qk(c)},MD.set(l,c),c)}return{value:l,source:c,stack:qk(c)}}var gr=[],Oc=0,l2=0;function L0(){for(var l=Oc,c=l2=Oc=0;c<l;){var g=gr[c];gr[c++]=null;var m=gr[c];gr[c++]=null;var x=gr[c];gr[c++]=null;var E=gr[c];if(gr[c++]=null,m!==null&&x!==null){var $=m.pending;$===null?x.next=x:(x.next=$.next,$.next=x),m.pending=x}E!==0&&$D(g,x,E)}}function U0(l,c,g,m){gr[Oc++]=l,gr[Oc++]=c,gr[Oc++]=g,gr[Oc++]=m,l2|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function u2(l,c,g,m){return U0(l,c,g,m),B0(l)}function Rc(l,c){return U0(l,null,null,c),B0(l)}function $D(l,c,g){l.lanes|=g;var m=l.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=l.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(x=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,x&&c!==null&&(x=31-ji(g),l=E.hiddenUpdates,m=l[x],m===null?l[x]=[c]:m.push(c),c.lane=g|536870912),E):null}function B0(l){if(50<Th)throw Th=0,pS=null,Error(i(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var Nc={};function uX(l,c,g,m){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,c,g,m){return new uX(l,c,g,m)}function c2(l){return l=l.prototype,!(!l||!l.isReactComponent)}function hs(l,c){var g=l.alternate;return g===null?(g=Hi(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function TD(l,c){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function I0(l,c,g,m,x,E){var $=0;if(m=l,typeof l=="function")c2(l)&&($=1);else if(typeof l=="string")$=fV(l,g,me.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=Hi(31,g,c,x),l.elementType=N,l.lanes=E,l;case v:return Pl(g.children,x,E,c);case b:$=8,x|=24;break;case S:return l=Hi(12,g,c,x|2),l.elementType=S,l.lanes=E,l;case M:return l=Hi(13,g,c,x),l.elementType=M,l.lanes=E,l;case k:return l=Hi(19,g,c,x),l.elementType=k,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:case A:$=10;break e;case w:$=9;break e;case C:$=11;break e;case T:$=14;break e;case O:$=16,m=null;break e}$=29,g=Error(i(130,l===null?"null":typeof l,"")),m=null}return c=Hi($,g,c,x),c.elementType=l,c.type=m,c.lanes=E,c}function Pl(l,c,g,m){return l=Hi(7,l,m,c),l.lanes=g,l}function f2(l,c,g){return l=Hi(6,l,null,c),l.lanes=g,l}function d2(l,c,g){return c=Hi(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var zc=[],Fc=0,P0=null,j0=0,pr=[],mr=0,jl=null,gs=1,ps="";function ql(l,c){zc[Fc++]=j0,zc[Fc++]=P0,P0=l,j0=c}function kD(l,c,g){pr[mr++]=gs,pr[mr++]=ps,pr[mr++]=jl,jl=l;var m=gs;l=ps;var x=32-ji(m)-1;m&=~(1<<x),g+=1;var E=32-ji(c)+x;if(30<E){var $=x-x%5;E=(m&(1<<$)-1).toString(32),m>>=$,x-=$,gs=1<<32-ji(c)+x|g<<x|m,ps=E+l}else gs=1<<E|g<<x|m,ps=l}function h2(l){l.return!==null&&(ql(l,1),kD(l,1,0))}function g2(l){for(;l===P0;)P0=zc[--Fc],zc[Fc]=null,j0=zc[--Fc],zc[Fc]=null;for(;l===jl;)jl=pr[--mr],pr[mr]=null,ps=pr[--mr],pr[mr]=null,gs=pr[--mr],pr[mr]=null}var ri=null,Ut=null,ut=!1,Hl=null,xa=!1,p2=Error(i(519));function Gl(l){var c=Error(i(418,""));throw oh(hr(c,l)),p2}function DD(l){var c=l.stateNode,g=l.type,m=l.memoizedProps;switch(c[Pn]=l,c[Ei]=m,g){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(g=0;g<Dh.length;g++)Qe(Dh[g],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":Qe("invalid",c),Yk(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),$0(c);break;case"select":Qe("invalid",c);break;case"textarea":Qe("invalid",c),Vk(c,m.value,m.defaultValue,m.children),$0(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||VR(c.textContent,g)?(m.popover!=null&&(Qe("beforetoggle",c),Qe("toggle",c)),m.onScroll!=null&&Qe("scroll",c),m.onScrollEnd!=null&&Qe("scrollend",c),m.onClick!=null&&(c.onclick=Em),c=!0):c=!1,c||Gl(l)}function OD(l){for(ri=l.return;ri;)switch(ri.tag){case 5:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:ri=ri.return}}function ah(l){if(l!==ri)return!1;if(!ut)return OD(l),ut=!0,!1;var c=l.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||DS(l.type,l.memoizedProps)),g=!g),g&&Ut&&Gl(l),OD(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(c===0){Ut=jr(l.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;l=l.nextSibling}Ut=null}}else c===27?(c=Ut,To(l.type)?(l=zS,zS=null,Ut=l):Ut=c):Ut=ri?jr(l.stateNode.nextSibling):null;return!0}function sh(){Ut=ri=null,ut=!1}function RD(){var l=Hl;return l!==null&&(Ci===null?Ci=l:Ci.push.apply(Ci,l),Hl=null),l}function oh(l){Hl===null?Hl=[l]:Hl.push(l)}var m2=W(null),Yl=null,ms=null;function go(l,c,g){se(m2,c._currentValue),c._currentValue=g}function ys(l){l._currentValue=m2.current,ne(m2)}function y2(l,c,g){for(;l!==null;){var m=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),l===g)break;l=l.return}}function v2(l,c,g,m){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var E=x.dependencies;if(E!==null){var $=x.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=x;for(var U=0;U<c.length;U++)if(D.context===c[U]){E.lanes|=g,D=E.alternate,D!==null&&(D.lanes|=g),y2(E.return,g,l),m||($=null);break e}E=D.next}}else if(x.tag===18){if($=x.return,$===null)throw Error(i(341));$.lanes|=g,E=$.alternate,E!==null&&(E.lanes|=g),y2($,g,l),$=null}else $=x.child;if($!==null)$.return=x;else for($=x;$!==null;){if($===l){$=null;break}if(x=$.sibling,x!==null){x.return=$.return,$=x;break}$=$.return}x=$}}function lh(l,c,g,m){l=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var $=x.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var D=x.type;qi(x.pendingProps.value,$.value)||(l!==null?l.push(D):l=[D])}}else if(x===Ht.current){if($=x.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(Lh):l=[Lh])}x=x.return}l!==null&&v2(c,l,g,m),c.flags|=262144}function q0(l){for(l=l.firstContext;l!==null;){if(!qi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Xl(l){Yl=l,ms=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function jn(l){return ND(Yl,l)}function H0(l,c){return Yl===null&&Xl(l),ND(l,c)}function ND(l,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},ms===null){if(l===null)throw Error(i(308));ms=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else ms=ms.next=c;return g}var cX=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,m){l.push(m)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},fX=e.unstable_scheduleCallback,dX=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b2(){return{controller:new cX,data:new Map,refCount:0}}function uh(l){l.refCount--,l.refCount===0&&fX(dX,function(){l.controller.abort()})}var ch=null,x2=0,Lc=0,Uc=null;function hX(l,c){if(ch===null){var g=ch=[];x2=0,Lc=ES(),Uc={status:"pending",value:void 0,then:function(m){g.push(m)}}}return x2++,c.then(zD,zD),c}function zD(){if(--x2===0&&ch!==null){Uc!==null&&(Uc.status="fulfilled");var l=ch;ch=null,Lc=0,Uc=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function gX(l,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return l.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var FD=R.S;R.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&hX(l,c),FD!==null&&FD(l,c)};var Vl=W(null);function S2(){var l=Vl.current;return l!==null?l:Ct.pooledCache}function G0(l,c){c===null?se(Vl,Vl.current):se(Vl,c.pool)}function LD(){var l=S2();return l===null?null:{parent:an._currentValue,pool:l}}var fh=Error(i(460)),UD=Error(i(474)),Y0=Error(i(542)),E2={then:function(){}};function BD(l){return l=l.status,l==="fulfilled"||l==="rejected"}function X0(){}function ID(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(X0,X0),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,jD(l),l;default:if(typeof c.status=="string")c.then(X0,X0);else{if(l=Ct,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=c,l.status="pending",l.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,jD(l),l}throw dh=c,fh}}var dh=null;function PD(){if(dh===null)throw Error(i(459));var l=dh;return dh=null,l}function jD(l){if(l===fh||l===Y0)throw Error(i(483))}var po=!1;function _2(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w2(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function mo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function yo(l,c,g){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(ht&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=B0(l),$D(l,null,g),c}return U0(l,m,c,g),B0(l)}function hh(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,zk(l,g)}}function A2(l,c){var g=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var $={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=$:E=E.next=$,g=g.next}while(g!==null);E===null?x=E=c:E=E.next=c}else x=E=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}var C2=!1;function gh(){if(C2){var l=Uc;if(l!==null)throw l}}function ph(l,c,g,m){C2=!1;var x=l.updateQueue;po=!1;var E=x.firstBaseUpdate,$=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var U=D,V=U.next;U.next=null,$===null?E=V:$.next=V,$=U;var ie=l.alternate;ie!==null&&(ie=ie.updateQueue,D=ie.lastBaseUpdate,D!==$&&(D===null?ie.firstBaseUpdate=V:D.next=V,ie.lastBaseUpdate=U))}if(E!==null){var oe=x.baseState;$=0,ie=V=U=null,D=E;do{var Q=D.lane&-536870913,Z=Q!==D.lane;if(Z?(et&Q)===Q:(m&Q)===Q){Q!==0&&Q===Lc&&(C2=!0),ie!==null&&(ie=ie.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Fe=l,Ne=D;Q=c;var xt=g;switch(Ne.tag){case 1:if(Fe=Ne.payload,typeof Fe=="function"){oe=Fe.call(xt,oe,Q);break e}oe=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ne.payload,Q=typeof Fe=="function"?Fe.call(xt,oe,Q):Fe,Q==null)break e;oe=d({},oe,Q);break e;case 2:po=!0}}Q=D.callback,Q!==null&&(l.flags|=64,Z&&(l.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ie===null?(V=ie=Z,U=oe):ie=ie.next=Z,$|=Q;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;Z=D,D=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ie===null&&(U=oe),x.baseState=U,x.firstBaseUpdate=V,x.lastBaseUpdate=ie,E===null&&(x.shared.lanes=0),Ao|=$,l.lanes=$,l.memoizedState=oe}}function qD(l,c){if(typeof l!="function")throw Error(i(191,l));l.call(c)}function HD(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)qD(g[l],c)}var Bc=W(null),V0=W(0);function GD(l,c){l=ws,se(V0,l),se(Bc,c),ws=l|c.baseLanes}function M2(){se(V0,ws),se(Bc,Bc.current)}function $2(){ws=V0.current,ne(Bc),ne(V0)}var vo=0,He=null,vt=null,en=null,W0=!1,Ic=!1,Wl=!1,Q0=0,mh=0,Pc=null,pX=0;function Yt(){throw Error(i(321))}function T2(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!qi(l[g],c[g]))return!1;return!0}function k2(l,c,g,m,x,E){return vo=E,He=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=l===null||l.memoizedState===null?$O:TO,Wl=!1,E=g(m,x),Wl=!1,Ic&&(E=XD(c,g,m,x)),YD(l),E}function YD(l){R.H=nm;var c=vt!==null&&vt.next!==null;if(vo=0,en=vt=He=null,W0=!1,mh=0,Pc=null,c)throw Error(i(300));l===null||mn||(l=l.dependencies,l!==null&&q0(l)&&(mn=!0))}function XD(l,c,g,m){He=l;var x=0;do{if(Ic&&(Pc=null),mh=0,Ic=!1,25<=x)throw Error(i(301));if(x+=1,en=vt=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}R.H=EX,E=c(g,m)}while(Ic);return E}function mX(){var l=R.H,c=l.useState()[0];return c=typeof c.then=="function"?yh(c):c,l=l.useState()[0],(vt!==null?vt.memoizedState:null)!==l&&(He.flags|=1024),c}function D2(){var l=Q0!==0;return Q0=0,l}function O2(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function R2(l){if(W0){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}W0=!1}vo=0,en=vt=He=null,Ic=!1,mh=Q0=0,Pc=null}function wi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=l:en=en.next=l,en}function tn(){if(vt===null){var l=He.alternate;l=l!==null?l.memoizedState:null}else l=vt.next;var c=en===null?He.memoizedState:en.next;if(c!==null)en=c,vt=l;else{if(l===null)throw He.alternate===null?Error(i(467)):Error(i(310));vt=l,l={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},en===null?He.memoizedState=en=l:en=en.next=l}return en}function N2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(l){var c=mh;return mh+=1,Pc===null&&(Pc=[]),l=ID(Pc,l,c),c=He,(en===null?c.memoizedState:en.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?$O:TO),l}function Z0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return yh(l);if(l.$$typeof===A)return jn(l)}throw Error(i(438,String(l)))}function z2(l){var c=null,g=He.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=He.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=N2(),He.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),m=0;m<l;m++)g[m]=B;return c.index++,g}function vs(l,c){return typeof c=="function"?c(l):c}function K0(l){var c=tn();return F2(c,vt,l)}function F2(l,c,g){var m=l.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=l.baseQueue,E=m.pending;if(E!==null){if(x!==null){var $=x.next;x.next=E.next,E.next=$}c.baseQueue=x=E,m.pending=null}if(E=l.baseState,x===null)l.memoizedState=E;else{c=x.next;var D=$=null,U=null,V=c,ie=!1;do{var oe=V.lane&-536870913;if(oe!==V.lane?(et&oe)===oe:(vo&oe)===oe){var Q=V.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),oe===Lc&&(ie=!0);else if((vo&Q)===Q){V=V.next,Q===Lc&&(ie=!0);continue}else oe={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},U===null?(D=U=oe,$=E):U=U.next=oe,He.lanes|=Q,Ao|=Q;oe=V.action,Wl&&g(E,oe),E=V.hasEagerState?V.eagerState:g(E,oe)}else Q={lane:oe,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},U===null?(D=U=Q,$=E):U=U.next=Q,He.lanes|=oe,Ao|=oe;V=V.next}while(V!==null&&V!==c);if(U===null?$=E:U.next=D,!qi(E,l.memoizedState)&&(mn=!0,ie&&(g=Uc,g!==null)))throw g;l.memoizedState=E,l.baseState=$,l.baseQueue=U,m.lastRenderedState=E}return x===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function L2(l){var c=tn(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=l;var m=g.dispatch,x=g.pending,E=c.memoizedState;if(x!==null){g.pending=null;var $=x=x.next;do E=l(E,$.action),$=$.next;while($!==x);qi(E,c.memoizedState)||(mn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),g.lastRenderedState=E}return[E,m]}function VD(l,c,g){var m=He,x=tn(),E=ut;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=c();var $=!qi((vt||x).memoizedState,g);$&&(x.memoizedState=g,mn=!0),x=x.queue;var D=ZD.bind(null,m,x,l);if(vh(2048,8,D,[l]),x.getSnapshot!==c||$||en!==null&&en.memoizedState.tag&1){if(m.flags|=2048,jc(9,J0(),QD.bind(null,m,x,g,c),null),Ct===null)throw Error(i(349));E||(vo&124)!==0||WD(m,c,g)}return g}function WD(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=He.updateQueue,c===null?(c=N2(),He.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function QD(l,c,g,m){c.value=g,c.getSnapshot=m,KD(c)&&JD(l)}function ZD(l,c,g){return g(function(){KD(c)&&JD(l)})}function KD(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!qi(l,g)}catch{return!0}}function JD(l){var c=Rc(l,2);c!==null&&Wi(c,l,2)}function U2(l){var c=wi();if(typeof l=="function"){var g=l;if(l=g(),Wl){co(!0);try{g()}finally{co(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:l},c}function eO(l,c,g,m){return l.baseState=g,F2(l,vt,typeof m=="function"?m:vs)}function yX(l,c,g,m,x){if(tm(l))throw Error(i(485));if(l=c.action,l!==null){var E={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){E.listeners.push($)}};R.T!==null?g(!0):E.isTransition=!1,m(E),g=c.pending,g===null?(E.next=c.pending=E,tO(c,E)):(E.next=g.next,c.pending=g.next=E)}}function tO(l,c){var g=c.action,m=c.payload,x=l.state;if(c.isTransition){var E=R.T,$={};R.T=$;try{var D=g(x,m),U=R.S;U!==null&&U($,D),nO(l,c,D)}catch(V){B2(l,c,V)}finally{R.T=E}}else try{E=g(x,m),nO(l,c,E)}catch(V){B2(l,c,V)}}function nO(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){iO(l,c,m)},function(m){return B2(l,c,m)}):iO(l,c,g)}function iO(l,c,g){c.status="fulfilled",c.value=g,rO(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,tO(l,g)))}function B2(l,c,g){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,rO(c),c=c.next;while(c!==m)}l.action=null}function rO(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function aO(l,c){return c}function sO(l,c){if(ut){var g=Ct.formState;if(g!==null){e:{var m=He;if(ut){if(Ut){t:{for(var x=Ut,E=xa;x.nodeType!==8;){if(!E){x=null;break t}if(x=jr(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Ut=jr(x.nextSibling),m=x.data==="F!";break e}}Gl(m)}m=!1}m&&(c=g[0])}}return g=wi(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aO,lastRenderedState:c},g.queue=m,g=AO.bind(null,He,m),m.dispatch=g,m=U2(!1),E=H2.bind(null,He,!1,m.queue),m=wi(),x={state:c,dispatch:null,action:l,pending:null},m.queue=x,g=yX.bind(null,He,x,E,g),x.dispatch=g,m.memoizedState=l,[c,g,!1]}function oO(l){var c=tn();return lO(c,vt,l)}function lO(l,c,g){if(c=F2(l,c,aO)[0],l=K0(vs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=yh(c)}catch($){throw $===fh?Y0:$}else m=c;c=tn();var x=c.queue,E=x.dispatch;return g!==c.memoizedState&&(He.flags|=2048,jc(9,J0(),vX.bind(null,x,g),null)),[m,E,l]}function vX(l,c){l.action=c}function uO(l){var c=tn(),g=vt;if(g!==null)return lO(c,g,l);tn(),c=c.memoizedState,g=tn();var m=g.queue.dispatch;return g.memoizedState=l,[c,m,!1]}function jc(l,c,g,m){return l={tag:l,create:g,deps:m,inst:c,next:null},c=He.updateQueue,c===null&&(c=N2(),He.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(m=g.next,g.next=l,l.next=m,c.lastEffect=l),l}function J0(){return{destroy:void 0,resource:void 0}}function cO(){return tn().memoizedState}function em(l,c,g,m){var x=wi();m=m===void 0?null:m,He.flags|=l,x.memoizedState=jc(1|c,J0(),g,m)}function vh(l,c,g,m){var x=tn();m=m===void 0?null:m;var E=x.memoizedState.inst;vt!==null&&m!==null&&T2(m,vt.memoizedState.deps)?x.memoizedState=jc(c,E,g,m):(He.flags|=l,x.memoizedState=jc(1|c,E,g,m))}function fO(l,c){em(8390656,8,l,c)}function dO(l,c){vh(2048,8,l,c)}function hO(l,c){return vh(4,2,l,c)}function gO(l,c){return vh(4,4,l,c)}function pO(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function mO(l,c,g){g=g!=null?g.concat([l]):null,vh(4,4,pO.bind(null,c,l),g)}function I2(){}function yO(l,c){var g=tn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&T2(c,m[1])?m[0]:(g.memoizedState=[l,c],l)}function vO(l,c){var g=tn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&T2(c,m[1]))return m[0];if(m=l(),Wl){co(!0);try{l()}finally{co(!1)}}return g.memoizedState=[m,c],m}function P2(l,c,g){return g===void 0||(vo&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=SR(),He.lanes|=l,Ao|=l,g)}function bO(l,c,g,m){return qi(g,c)?g:Bc.current!==null?(l=P2(l,g,m),qi(l,c)||(mn=!0),l):(vo&42)===0?(mn=!0,l.memoizedState=g):(l=SR(),He.lanes|=l,Ao|=l,c)}function xO(l,c,g,m,x){var E=P.p;P.p=E!==0&&8>E?E:8;var $=R.T,D={};R.T=D,H2(l,!1,c,g);try{var U=x(),V=R.S;if(V!==null&&V(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=gX(U,m);bh(l,c,ie,Vi(l))}else bh(l,c,m,Vi(l))}catch(oe){bh(l,c,{then:function(){},status:"rejected",reason:oe},Vi())}finally{P.p=E,R.T=$}}function bX(){}function j2(l,c,g,m){if(l.tag!==5)throw Error(i(476));var x=SO(l).queue;xO(l,x,c,X,g===null?bX:function(){return EO(l),g(m)})}function SO(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:X},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function EO(l){var c=SO(l).next.queue;bh(l,c,{},Vi())}function q2(){return jn(Lh)}function _O(){return tn().memoizedState}function wO(){return tn().memoizedState}function xX(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=Vi();l=mo(g);var m=yo(c,l,g);m!==null&&(Wi(m,c,g),hh(m,c,g)),c={cache:b2()},l.payload=c;return}c=c.return}}function SX(l,c,g){var m=Vi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},tm(l)?CO(c,g):(g=u2(l,c,g,m),g!==null&&(Wi(g,l,m),MO(g,c,m)))}function AO(l,c,g){var m=Vi();bh(l,c,g,m)}function bh(l,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(tm(l))CO(c,x);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var $=c.lastRenderedState,D=E($,g);if(x.hasEagerState=!0,x.eagerState=D,qi(D,$))return U0(l,c,x,0),Ct===null&&L0(),!1}catch{}finally{}if(g=u2(l,c,x,m),g!==null)return Wi(g,l,m),MO(g,c,m),!0}return!1}function H2(l,c,g,m){if(m={lane:2,revertLane:ES(),action:m,hasEagerState:!1,eagerState:null,next:null},tm(l)){if(c)throw Error(i(479))}else c=u2(l,g,m,2),c!==null&&Wi(c,l,2)}function tm(l){var c=l.alternate;return l===He||c!==null&&c===He}function CO(l,c){Ic=W0=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function MO(l,c,g){if((g&4194048)!==0){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,zk(l,g)}}var nm={readContext:jn,use:Z0,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},$O={readContext:jn,use:Z0,useCallback:function(l,c){return wi().memoizedState=[l,c===void 0?null:c],l},useContext:jn,useEffect:fO,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,em(4194308,4,pO.bind(null,c,l),g)},useLayoutEffect:function(l,c){return em(4194308,4,l,c)},useInsertionEffect:function(l,c){em(4,2,l,c)},useMemo:function(l,c){var g=wi();c=c===void 0?null:c;var m=l();if(Wl){co(!0);try{l()}finally{co(!1)}}return g.memoizedState=[m,c],m},useReducer:function(l,c,g){var m=wi();if(g!==void 0){var x=g(c);if(Wl){co(!0);try{g(c)}finally{co(!1)}}}else x=c;return m.memoizedState=m.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},m.queue=l,l=l.dispatch=SX.bind(null,He,l),[m.memoizedState,l]},useRef:function(l){var c=wi();return l={current:l},c.memoizedState=l},useState:function(l){l=U2(l);var c=l.queue,g=AO.bind(null,He,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:I2,useDeferredValue:function(l,c){var g=wi();return P2(g,l,c)},useTransition:function(){var l=U2(!1);return l=xO.bind(null,He,l.queue,!0,!1),wi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var m=He,x=wi();if(ut){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Ct===null)throw Error(i(349));(et&124)!==0||WD(m,c,g)}x.memoizedState=g;var E={value:g,getSnapshot:c};return x.queue=E,fO(ZD.bind(null,m,E,l),[l]),m.flags|=2048,jc(9,J0(),QD.bind(null,m,E,g,c),null),g},useId:function(){var l=wi(),c=Ct.identifierPrefix;if(ut){var g=ps,m=gs;g=(m&~(1<<32-ji(m)-1)).toString(32)+g,c="«"+c+"R"+g,g=Q0++,0<g&&(c+="H"+g.toString(32)),c+="»"}else g=pX++,c="«"+c+"r"+g.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:q2,useFormState:sO,useActionState:sO,useOptimistic:function(l){var c=wi();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=H2.bind(null,He,!0,g),g.dispatch=c,[l,c]},useMemoCache:z2,useCacheRefresh:function(){return wi().memoizedState=xX.bind(null,He)}},TO={readContext:jn,use:Z0,useCallback:yO,useContext:jn,useEffect:dO,useImperativeHandle:mO,useInsertionEffect:hO,useLayoutEffect:gO,useMemo:vO,useReducer:K0,useRef:cO,useState:function(){return K0(vs)},useDebugValue:I2,useDeferredValue:function(l,c){var g=tn();return bO(g,vt.memoizedState,l,c)},useTransition:function(){var l=K0(vs)[0],c=tn().memoizedState;return[typeof l=="boolean"?l:yh(l),c]},useSyncExternalStore:VD,useId:_O,useHostTransitionStatus:q2,useFormState:oO,useActionState:oO,useOptimistic:function(l,c){var g=tn();return eO(g,vt,l,c)},useMemoCache:z2,useCacheRefresh:wO},EX={readContext:jn,use:Z0,useCallback:yO,useContext:jn,useEffect:dO,useImperativeHandle:mO,useInsertionEffect:hO,useLayoutEffect:gO,useMemo:vO,useReducer:L2,useRef:cO,useState:function(){return L2(vs)},useDebugValue:I2,useDeferredValue:function(l,c){var g=tn();return vt===null?P2(g,l,c):bO(g,vt.memoizedState,l,c)},useTransition:function(){var l=L2(vs)[0],c=tn().memoizedState;return[typeof l=="boolean"?l:yh(l),c]},useSyncExternalStore:VD,useId:_O,useHostTransitionStatus:q2,useFormState:uO,useActionState:uO,useOptimistic:function(l,c){var g=tn();return vt!==null?eO(g,vt,l,c):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:z2,useCacheRefresh:wO},qc=null,xh=0;function im(l){var c=xh;return xh+=1,qc===null&&(qc=[]),ID(qc,l,c)}function Sh(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function rm(l,c){throw c.$$typeof===h?Error(i(525)):(l=Object.prototype.toString.call(c),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function kO(l){var c=l._init;return c(l._payload)}function DO(l){function c(q,j){if(l){var Y=q.deletions;Y===null?(q.deletions=[j],q.flags|=16):Y.push(j)}}function g(q,j){if(!l)return null;for(;j!==null;)c(q,j),j=j.sibling;return null}function m(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function x(q,j){return q=hs(q,j),q.index=0,q.sibling=null,q}function E(q,j,Y){return q.index=Y,l?(Y=q.alternate,Y!==null?(Y=Y.index,Y<j?(q.flags|=67108866,j):Y):(q.flags|=67108866,j)):(q.flags|=1048576,j)}function $(q){return l&&q.alternate===null&&(q.flags|=67108866),q}function D(q,j,Y,ae){return j===null||j.tag!==6?(j=f2(Y,q.mode,ae),j.return=q,j):(j=x(j,Y),j.return=q,j)}function U(q,j,Y,ae){var we=Y.type;return we===v?ie(q,j,Y.props.children,ae,Y.key):j!==null&&(j.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===O&&kO(we)===j.type)?(j=x(j,Y.props),Sh(j,Y),j.return=q,j):(j=I0(Y.type,Y.key,Y.props,null,q.mode,ae),Sh(j,Y),j.return=q,j)}function V(q,j,Y,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=d2(Y,q.mode,ae),j.return=q,j):(j=x(j,Y.children||[]),j.return=q,j)}function ie(q,j,Y,ae,we){return j===null||j.tag!==7?(j=Pl(Y,q.mode,ae,we),j.return=q,j):(j=x(j,Y),j.return=q,j)}function oe(q,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=f2(""+j,q.mode,Y),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case p:return Y=I0(j.type,j.key,j.props,null,q.mode,Y),Sh(Y,j),Y.return=q,Y;case y:return j=d2(j,q.mode,Y),j.return=q,j;case O:var ae=j._init;return j=ae(j._payload),oe(q,j,Y)}if(F(j)||G(j))return j=Pl(j,q.mode,Y,null),j.return=q,j;if(typeof j.then=="function")return oe(q,im(j),Y);if(j.$$typeof===A)return oe(q,H0(q,j),Y);rm(q,j)}return null}function Q(q,j,Y,ae){var we=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return we!==null?null:D(q,j,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return Y.key===we?U(q,j,Y,ae):null;case y:return Y.key===we?V(q,j,Y,ae):null;case O:return we=Y._init,Y=we(Y._payload),Q(q,j,Y,ae)}if(F(Y)||G(Y))return we!==null?null:ie(q,j,Y,ae,null);if(typeof Y.then=="function")return Q(q,j,im(Y),ae);if(Y.$$typeof===A)return Q(q,j,H0(q,Y),ae);rm(q,Y)}return null}function Z(q,j,Y,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,D(j,q,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return q=q.get(ae.key===null?Y:ae.key)||null,U(j,q,ae,we);case y:return q=q.get(ae.key===null?Y:ae.key)||null,V(j,q,ae,we);case O:var Ye=ae._init;return ae=Ye(ae._payload),Z(q,j,Y,ae,we)}if(F(ae)||G(ae))return q=q.get(Y)||null,ie(j,q,ae,we,null);if(typeof ae.then=="function")return Z(q,j,Y,im(ae),we);if(ae.$$typeof===A)return Z(q,j,Y,H0(j,ae),we);rm(j,ae)}return null}function Fe(q,j,Y,ae){for(var we=null,Ye=null,$e=j,ze=j=0,vn=null;$e!==null&&ze<Y.length;ze++){$e.index>ze?(vn=$e,$e=null):vn=$e.sibling;var rt=Q(q,$e,Y[ze],ae);if(rt===null){$e===null&&($e=vn);break}l&&$e&&rt.alternate===null&&c(q,$e),j=E(rt,j,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt,$e=vn}if(ze===Y.length)return g(q,$e),ut&&ql(q,ze),we;if($e===null){for(;ze<Y.length;ze++)$e=oe(q,Y[ze],ae),$e!==null&&(j=E($e,j,ze),Ye===null?we=$e:Ye.sibling=$e,Ye=$e);return ut&&ql(q,ze),we}for($e=m($e);ze<Y.length;ze++)vn=Z($e,q,ze,Y[ze],ae),vn!==null&&(l&&vn.alternate!==null&&$e.delete(vn.key===null?ze:vn.key),j=E(vn,j,ze),Ye===null?we=vn:Ye.sibling=vn,Ye=vn);return l&&$e.forEach(function(No){return c(q,No)}),ut&&ql(q,ze),we}function Ne(q,j,Y,ae){if(Y==null)throw Error(i(151));for(var we=null,Ye=null,$e=j,ze=j=0,vn=null,rt=Y.next();$e!==null&&!rt.done;ze++,rt=Y.next()){$e.index>ze?(vn=$e,$e=null):vn=$e.sibling;var No=Q(q,$e,rt.value,ae);if(No===null){$e===null&&($e=vn);break}l&&$e&&No.alternate===null&&c(q,$e),j=E(No,j,ze),Ye===null?we=No:Ye.sibling=No,Ye=No,$e=vn}if(rt.done)return g(q,$e),ut&&ql(q,ze),we;if($e===null){for(;!rt.done;ze++,rt=Y.next())rt=oe(q,rt.value,ae),rt!==null&&(j=E(rt,j,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return ut&&ql(q,ze),we}for($e=m($e);!rt.done;ze++,rt=Y.next())rt=Z($e,q,ze,rt.value,ae),rt!==null&&(l&&rt.alternate!==null&&$e.delete(rt.key===null?ze:rt.key),j=E(rt,j,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return l&&$e.forEach(function(_V){return c(q,_V)}),ut&&ql(q,ze),we}function xt(q,j,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===v&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:e:{for(var we=Y.key;j!==null;){if(j.key===we){if(we=Y.type,we===v){if(j.tag===7){g(q,j.sibling),ae=x(j,Y.props.children),ae.return=q,q=ae;break e}}else if(j.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===O&&kO(we)===j.type){g(q,j.sibling),ae=x(j,Y.props),Sh(ae,Y),ae.return=q,q=ae;break e}g(q,j);break}else c(q,j);j=j.sibling}Y.type===v?(ae=Pl(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=I0(Y.type,Y.key,Y.props,null,q.mode,ae),Sh(ae,Y),ae.return=q,q=ae)}return $(q);case y:e:{for(we=Y.key;j!==null;){if(j.key===we)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){g(q,j.sibling),ae=x(j,Y.children||[]),ae.return=q,q=ae;break e}else{g(q,j);break}else c(q,j);j=j.sibling}ae=d2(Y,q.mode,ae),ae.return=q,q=ae}return $(q);case O:return we=Y._init,Y=we(Y._payload),xt(q,j,Y,ae)}if(F(Y))return Fe(q,j,Y,ae);if(G(Y)){if(we=G(Y),typeof we!="function")throw Error(i(150));return Y=we.call(Y),Ne(q,j,Y,ae)}if(typeof Y.then=="function")return xt(q,j,im(Y),ae);if(Y.$$typeof===A)return xt(q,j,H0(q,Y),ae);rm(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(g(q,j.sibling),ae=x(j,Y),ae.return=q,q=ae):(g(q,j),ae=f2(Y,q.mode,ae),ae.return=q,q=ae),$(q)):g(q,j)}return function(q,j,Y,ae){try{xh=0;var we=xt(q,j,Y,ae);return qc=null,we}catch($e){if($e===fh||$e===Y0)throw $e;var Ye=Hi(29,$e,null,q.mode);return Ye.lanes=ae,Ye.return=q,Ye}finally{}}}var Hc=DO(!0),OO=DO(!1),yr=W(null),Sa=null;function bo(l){var c=l.alternate;se(sn,sn.current&1),se(yr,l),Sa===null&&(c===null||Bc.current!==null||c.memoizedState!==null)&&(Sa=l)}function RO(l){if(l.tag===22){if(se(sn,sn.current),se(yr,l),Sa===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Sa=l)}}else xo()}function xo(){se(sn,sn.current),se(yr,yr.current)}function bs(l){ne(yr),Sa===l&&(Sa=null),ne(sn)}var sn=W(0);function am(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||NS(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function G2(l,c,g,m){c=l.memoizedState,g=g(m,c),g=g==null?c:d({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Y2={enqueueSetState:function(l,c,g){l=l._reactInternals;var m=Vi(),x=mo(m);x.payload=c,g!=null&&(x.callback=g),c=yo(l,x,m),c!==null&&(Wi(c,l,m),hh(c,l,m))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var m=Vi(),x=mo(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=yo(l,x,m),c!==null&&(Wi(c,l,m),hh(c,l,m))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Vi(),m=mo(g);m.tag=2,c!=null&&(m.callback=c),c=yo(l,m,g),c!==null&&(Wi(c,l,g),hh(c,l,g))}};function NO(l,c,g,m,x,E,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,E,$):c.prototype&&c.prototype.isPureReactComponent?!ih(g,m)||!ih(x,E):!0}function zO(l,c,g,m){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==l&&Y2.enqueueReplaceState(c,c.state,null)}function Ql(l,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(l=l.defaultProps){g===c&&(g=d({},g));for(var x in l)g[x]===void 0&&(g[x]=l[x])}return g}var sm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function FO(l){sm(l)}function LO(l){console.error(l)}function UO(l){sm(l)}function om(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function BO(l,c,g){try{var m=l.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function X2(l,c,g){return g=mo(g),g.tag=3,g.payload={element:null},g.callback=function(){om(l,c)},g}function IO(l){return l=mo(l),l.tag=3,l}function PO(l,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;l.payload=function(){return x(E)},l.callback=function(){BO(c,g,m)}}var $=g.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(l.callback=function(){BO(c,g,m),typeof x!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function _X(l,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&lh(c,g,x,!0),g=yr.current,g!==null){switch(g.tag){case 13:return Sa===null?yS():g.alternate===null&&Bt===0&&(Bt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===E2?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),bS(l,m,x)),!1;case 22:return g.flags|=65536,m===E2?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),bS(l,m,x)),!1}throw Error(i(435,g.tag))}return bS(l,m,x),yS(),!1}if(ut)return c=yr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==p2&&(l=Error(i(422),{cause:m}),oh(hr(l,g)))):(m!==p2&&(c=Error(i(423),{cause:m}),oh(hr(c,g))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,m=hr(m,g),x=X2(l.stateNode,m,x),A2(l,x),Bt!==4&&(Bt=2)),!1;var E=Error(i(520),{cause:m});if(E=hr(E,g),$h===null?$h=[E]:$h.push(E),Bt!==4&&(Bt=2),c===null)return!0;m=hr(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=x&-x,g.lanes|=l,l=X2(g.stateNode,m,l),A2(g,l),!1;case 1:if(c=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Co===null||!Co.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=IO(x),PO(x,l,g,m),A2(g,x),!1}g=g.return}while(g!==null);return!1}var jO=Error(i(461)),mn=!1;function Tn(l,c,g,m){c.child=l===null?OO(c,null,g,m):Hc(c,l.child,g,m)}function qO(l,c,g,m,x){g=g.render;var E=c.ref;if("ref"in m){var $={};for(var D in m)D!=="ref"&&($[D]=m[D])}else $=m;return Xl(c),m=k2(l,c,g,$,E,x),D=D2(),l!==null&&!mn?(O2(l,c,x),xs(l,c,x)):(ut&&D&&h2(c),c.flags|=1,Tn(l,c,m,x),c.child)}function HO(l,c,g,m,x){if(l===null){var E=g.type;return typeof E=="function"&&!c2(E)&&E.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=E,GO(l,c,E,m,x)):(l=I0(g.type,null,m,c,c.mode,x),l.ref=c.ref,l.return=c,c.child=l)}if(E=l.child,!tS(l,x)){var $=E.memoizedProps;if(g=g.compare,g=g!==null?g:ih,g($,m)&&l.ref===c.ref)return xs(l,c,x)}return c.flags|=1,l=hs(E,m),l.ref=c.ref,l.return=c,c.child=l}function GO(l,c,g,m,x){if(l!==null){var E=l.memoizedProps;if(ih(E,m)&&l.ref===c.ref)if(mn=!1,c.pendingProps=m=E,tS(l,x))(l.flags&131072)!==0&&(mn=!0);else return c.lanes=l.lanes,xs(l,c,x)}return V2(l,c,g,m,x)}function YO(l,c,g){var m=c.pendingProps,x=m.children,E=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,l!==null){for(x=c.child=l.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return XO(l,c,m,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&G0(c,E!==null?E.cachePool:null),E!==null?GD(c,E):M2(),RO(c);else return c.lanes=c.childLanes=536870912,XO(l,c,E!==null?E.baseLanes|g:g,g)}else E!==null?(G0(c,E.cachePool),GD(c,E),xo(),c.memoizedState=null):(l!==null&&G0(c,null),M2(),xo());return Tn(l,c,x,g),c.child}function XO(l,c,g,m){var x=S2();return x=x===null?null:{parent:an._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},l!==null&&G0(c,null),M2(),RO(c),l!==null&&lh(l,c,m,!0),null}function lm(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(l===null||l.ref!==g)&&(c.flags|=4194816)}}function V2(l,c,g,m,x){return Xl(c),g=k2(l,c,g,m,void 0,x),m=D2(),l!==null&&!mn?(O2(l,c,x),xs(l,c,x)):(ut&&m&&h2(c),c.flags|=1,Tn(l,c,g,x),c.child)}function VO(l,c,g,m,x,E){return Xl(c),c.updateQueue=null,g=XD(c,m,g,x),YD(l),m=D2(),l!==null&&!mn?(O2(l,c,E),xs(l,c,E)):(ut&&m&&h2(c),c.flags|=1,Tn(l,c,g,E),c.child)}function WO(l,c,g,m,x){if(Xl(c),c.stateNode===null){var E=Nc,$=g.contextType;typeof $=="object"&&$!==null&&(E=jn($)),E=new g(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Y2,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},_2(c),$=g.contextType,E.context=typeof $=="object"&&$!==null?jn($):Nc,E.state=c.memoizedState,$=g.getDerivedStateFromProps,typeof $=="function"&&(G2(c,g,$,m),E.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||($=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),$!==E.state&&Y2.enqueueReplaceState(E,E.state,null),ph(c,m,E,x),gh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(l===null){E=c.stateNode;var D=c.memoizedProps,U=Ql(g,D);E.props=U;var V=E.context,ie=g.contextType;$=Nc,typeof ie=="object"&&ie!==null&&($=jn(ie));var oe=g.getDerivedStateFromProps;ie=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=c.pendingProps!==D,ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||V!==$)&&zO(c,E,m,$),po=!1;var Q=c.memoizedState;E.state=Q,ph(c,m,E,x),gh(),V=c.memoizedState,D||Q!==V||po?(typeof oe=="function"&&(G2(c,g,oe,m),V=c.memoizedState),(U=po||NO(c,g,U,m,Q,V,$))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=V),E.props=m,E.state=V,E.context=$,m=U):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,w2(l,c),$=c.memoizedProps,ie=Ql(g,$),E.props=ie,oe=c.pendingProps,Q=E.context,V=g.contextType,U=Nc,typeof V=="object"&&V!==null&&(U=jn(V)),D=g.getDerivedStateFromProps,(V=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||($!==oe||Q!==U)&&zO(c,E,m,U),po=!1,Q=c.memoizedState,E.state=Q,ph(c,m,E,x),gh();var Z=c.memoizedState;$!==oe||Q!==Z||po||l!==null&&l.dependencies!==null&&q0(l.dependencies)?(typeof D=="function"&&(G2(c,g,D,m),Z=c.memoizedState),(ie=po||NO(c,g,ie,m,Q,Z,U)||l!==null&&l.dependencies!==null&&q0(l.dependencies))?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,Z,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,Z,U)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Z),E.props=m,E.state=Z,E.context=U,m=ie):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=1024),m=!1)}return E=m,lm(l,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,l!==null&&m?(c.child=Hc(c,l.child,null,x),c.child=Hc(c,null,g,x)):Tn(l,c,g,x),c.memoizedState=E.state,l=c.child):l=xs(l,c,x),l}function QO(l,c,g,m){return sh(),c.flags|=256,Tn(l,c,g,m),c.child}var W2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q2(l){return{baseLanes:l,cachePool:LD()}}function Z2(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=vr),l}function ZO(l,c,g){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,$;if(($=E)||($=l!==null&&l.memoizedState===null?!1:(sn.current&2)!==0),$&&(x=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,l===null){if(ut){if(x?bo(c):xo(),ut){var D=Ut,U;if(U=D){e:{for(U=D,D=xa;U.nodeType!==8;){if(!D){D=null;break e}if(U=jr(U.nextSibling),U===null){D=null;break e}}D=U}D!==null?(c.memoizedState={dehydrated:D,treeContext:jl!==null?{id:gs,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},U=Hi(18,null,null,0),U.stateNode=D,U.return=c,c.child=U,ri=c,Ut=null,U=!0):U=!1}U||Gl(c)}if(D=c.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return NS(D)?c.lanes=32:c.lanes=536870912,null;bs(c)}return D=m.children,m=m.fallback,x?(xo(),x=c.mode,D=um({mode:"hidden",children:D},x),m=Pl(m,x,g,null),D.return=c,m.return=c,D.sibling=m,c.child=D,x=c.child,x.memoizedState=Q2(g),x.childLanes=Z2(l,$,g),c.memoizedState=W2,m):(bo(c),K2(c,D))}if(U=l.memoizedState,U!==null&&(D=U.dehydrated,D!==null)){if(E)c.flags&256?(bo(c),c.flags&=-257,c=J2(l,c,g)):c.memoizedState!==null?(xo(),c.child=l.child,c.flags|=128,c=null):(xo(),x=m.fallback,D=c.mode,m=um({mode:"visible",children:m.children},D),x=Pl(x,D,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Hc(c,l.child,null,g),m=c.child,m.memoizedState=Q2(g),m.childLanes=Z2(l,$,g),c.memoizedState=W2,c=x);else if(bo(c),NS(D)){if($=D.nextSibling&&D.nextSibling.dataset,$)var V=$.dgst;$=V,m=Error(i(419)),m.stack="",m.digest=$,oh({value:m,source:null,stack:null}),c=J2(l,c,g)}else if(mn||lh(l,c,g,!1),$=(g&l.childLanes)!==0,mn||$){if($=Ct,$!==null&&(m=g&-g,m=(m&42)!==0?1:zx(m),m=(m&($.suspendedLanes|g))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,Rc(l,m),Wi($,l,m),jO;D.data==="$?"||yS(),c=J2(l,c,g)}else D.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=U.treeContext,Ut=jr(D.nextSibling),ri=c,ut=!0,Hl=null,xa=!1,l!==null&&(pr[mr++]=gs,pr[mr++]=ps,pr[mr++]=jl,gs=l.id,ps=l.overflow,jl=c),c=K2(c,m.children),c.flags|=4096);return c}return x?(xo(),x=m.fallback,D=c.mode,U=l.child,V=U.sibling,m=hs(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,V!==null?x=hs(V,x):(x=Pl(x,D,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,D=l.child.memoizedState,D===null?D=Q2(g):(U=D.cachePool,U!==null?(V=an._currentValue,U=U.parent!==V?{parent:V,pool:V}:U):U=LD(),D={baseLanes:D.baseLanes|g,cachePool:U}),x.memoizedState=D,x.childLanes=Z2(l,$,g),c.memoizedState=W2,m):(bo(c),g=l.child,l=g.sibling,g=hs(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,l!==null&&($=c.deletions,$===null?(c.deletions=[l],c.flags|=16):$.push(l)),c.child=g,c.memoizedState=null,g)}function K2(l,c){return c=um({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function um(l,c){return l=Hi(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function J2(l,c,g){return Hc(c,l.child,null,g),l=K2(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function KO(l,c,g){l.lanes|=c;var m=l.alternate;m!==null&&(m.lanes|=c),y2(l.return,c,g)}function eS(l,c,g,m,x){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function JO(l,c,g){var m=c.pendingProps,x=m.revealOrder,E=m.tail;if(Tn(l,c,m.children,g),m=sn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&KO(l,g,c);else if(l.tag===19)KO(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(se(sn,m),x){case"forwards":for(g=c.child,x=null;g!==null;)l=g.alternate,l!==null&&am(l)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),eS(c,!1,x,g,E);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(l=x.alternate,l!==null&&am(l)===null){c.child=x;break}l=x.sibling,x.sibling=g,g=x,x=l}eS(c,!0,g,null,E);break;case"together":eS(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function xs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Ao|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(lh(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(i(153));if(c.child!==null){for(l=c.child,g=hs(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=hs(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function tS(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&q0(l)))}function wX(l,c,g){switch(c.tag){case 3:nt(c,c.stateNode.containerInfo),go(c,an,l.memoizedState.cache),sh();break;case 27:case 5:Ue(c);break;case 4:nt(c,c.stateNode.containerInfo);break;case 10:go(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(bo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?ZO(l,c,g):(bo(c),l=xs(l,c,g),l!==null?l.sibling:null);bo(c);break;case 19:var x=(l.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(lh(l,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return JO(l,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(sn,sn.current),m)break;return null;case 22:case 23:return c.lanes=0,YO(l,c,g);case 24:go(c,an,l.memoizedState.cache)}return xs(l,c,g)}function eR(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)mn=!0;else{if(!tS(l,g)&&(c.flags&128)===0)return mn=!1,wX(l,c,g);mn=(l.flags&131072)!==0}else mn=!1,ut&&(c.flags&1048576)!==0&&kD(c,j0,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")c2(m)?(l=Ql(m,l),c.tag=1,c=WO(null,c,m,l,g)):(c.tag=0,c=V2(null,c,m,l,g));else{if(m!=null){if(x=m.$$typeof,x===C){c.tag=11,c=qO(null,c,m,l,g);break e}else if(x===T){c.tag=14,c=HO(null,c,m,l,g);break e}}throw c=I(m)||m,Error(i(306,c,""))}}return c;case 0:return V2(l,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=Ql(m,c.pendingProps),WO(l,c,m,x,g);case 3:e:{if(nt(c,c.stateNode.containerInfo),l===null)throw Error(i(387));m=c.pendingProps;var E=c.memoizedState;x=E.element,w2(l,c),ph(c,m,null,g);var $=c.memoizedState;if(m=$.cache,go(c,an,m),m!==E.cache&&v2(c,[an],g,!0),gh(),m=$.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=QO(l,c,m,g);break e}else if(m!==x){x=hr(Error(i(424)),c),oh(x),c=QO(l,c,m,g);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ut=jr(l.firstChild),ri=c,ut=!0,Hl=null,xa=!0,g=OO(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(sh(),m===x){c=xs(l,c,g);break e}Tn(l,c,m,g)}c=c.child}return c;case 26:return lm(l,c),l===null?(g=rN(c.type,null,c.pendingProps,null))?c.memoizedState=g:ut||(g=c.type,l=c.pendingProps,m=_m(Ce.current).createElement(g),m[Pn]=c,m[Ei]=l,Dn(m,g,l),pn(m),c.stateNode=m):c.memoizedState=rN(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Ue(c),l===null&&ut&&(m=c.stateNode=tN(c.type,c.pendingProps,Ce.current),ri=c,xa=!0,x=Ut,To(c.type)?(zS=x,Ut=jr(m.firstChild)):Ut=x),Tn(l,c,c.pendingProps.children,g),lm(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&ut&&((x=m=Ut)&&(m=KX(m,c.type,c.pendingProps,xa),m!==null?(c.stateNode=m,ri=c,Ut=jr(m.firstChild),xa=!1,x=!0):x=!1),x||Gl(c)),Ue(c),x=c.type,E=c.pendingProps,$=l!==null?l.memoizedProps:null,m=E.children,DS(x,E)?m=null:$!==null&&DS(x,$)&&(c.flags|=32),c.memoizedState!==null&&(x=k2(l,c,mX,null,null,g),Lh._currentValue=x),lm(l,c),Tn(l,c,m,g),c.child;case 6:return l===null&&ut&&((l=g=Ut)&&(g=JX(g,c.pendingProps,xa),g!==null?(c.stateNode=g,ri=c,Ut=null,l=!0):l=!1),l||Gl(c)),null;case 13:return ZO(l,c,g);case 4:return nt(c,c.stateNode.containerInfo),m=c.pendingProps,l===null?c.child=Hc(c,null,m,g):Tn(l,c,m,g),c.child;case 11:return qO(l,c,c.type,c.pendingProps,g);case 7:return Tn(l,c,c.pendingProps,g),c.child;case 8:return Tn(l,c,c.pendingProps.children,g),c.child;case 12:return Tn(l,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,go(c,c.type,m.value),Tn(l,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Xl(c),x=jn(x),m=m(x),c.flags|=1,Tn(l,c,m,g),c.child;case 14:return HO(l,c,c.type,c.pendingProps,g);case 15:return GO(l,c,c.type,c.pendingProps,g);case 19:return JO(l,c,g);case 31:return m=c.pendingProps,g=c.mode,m={mode:m.mode,children:m.children},l===null?(g=um(m,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=hs(l.child,m),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return YO(l,c,g);case 24:return Xl(c),m=jn(an),l===null?(x=S2(),x===null&&(x=Ct,E=b2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),c.memoizedState={parent:m,cache:x},_2(c),go(c,an,x)):((l.lanes&g)!==0&&(w2(l,c),ph(c,null,null,g),gh()),x=l.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),go(c,an,m)):(m=E.cache,go(c,an,m),m!==x.cache&&v2(c,[an],g,!0))),Tn(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Ss(l){l.flags|=4}function tR(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!uN(c)){if(c=yr.current,c!==null&&((et&4194048)===et?Sa!==null:(et&62914560)!==et&&(et&536870912)===0||c!==Sa))throw dh=E2,UD;l.flags|=8192}}function cm(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?Rk():536870912,l.lanes|=c,Vc|=c)}function Eh(l,c){if(!ut)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Nt(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,m=0;if(c)for(var x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=m,l.childLanes=g,c}function AX(l,c,g){var m=c.pendingProps;switch(g2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(c),null;case 1:return Nt(c),null;case 3:return g=c.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ys(an),be(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(ah(c)?Ss(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,RD())),Nt(c),null;case 26:return g=c.memoizedState,l===null?(Ss(c),g!==null?(Nt(c),tR(c,g)):(Nt(c),c.flags&=-16777217)):g?g!==l.memoizedState?(Ss(c),Nt(c),tR(c,g)):(Nt(c),c.flags&=-16777217):(l.memoizedProps!==m&&Ss(c),Nt(c),c.flags&=-16777217),null;case 27:Ie(c),g=Ce.current;var x=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==m&&Ss(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}l=me.current,ah(c)?DD(c):(l=tN(x,m,g),c.stateNode=l,Ss(c))}return Nt(c),null;case 5:if(Ie(c),g=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&Ss(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}if(l=me.current,ah(c))DD(c);else{switch(x=_m(Ce.current),l){case 1:l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=x.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}l[Pn]=c,l[Ei]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=l;e:switch(Dn(l,g,m),g){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ss(c)}}return Nt(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==m&&Ss(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(l=Ce.current,ah(c)){if(l=c.stateNode,g=c.memoizedProps,m=null,x=ri,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}l[Pn]=c,l=!!(l.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||VR(l.nodeValue,g)),l||Gl(c)}else l=_m(l).createTextNode(m),l[Pn]=c,c.stateNode=l}return Nt(c),null;case 13:if(m=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=ah(c),m!==null&&m.dehydrated!==null){if(l===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Pn]=c}else sh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Nt(c),x=!1}else x=RD(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(bs(c),c):(bs(c),null)}if(bs(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=m!==null,l=l!==null&&l.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),cm(c,c.updateQueue),Nt(c),null;case 4:return be(),l===null&&CS(c.stateNode.containerInfo),Nt(c),null;case 10:return ys(c.type),Nt(c),null;case 19:if(ne(sn),x=c.memoizedState,x===null)return Nt(c),null;if(m=(c.flags&128)!==0,E=x.rendering,E===null)if(m)Eh(x,!1);else{if(Bt!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(E=am(l),E!==null){for(c.flags|=128,Eh(x,!1),l=E.updateQueue,c.updateQueue=l,cm(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)TD(g,l),g=g.sibling;return se(sn,sn.current&1|2),c.child}l=l.sibling}x.tail!==null&&Jt()>hm&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304)}else{if(!m)if(l=am(E),l!==null){if(c.flags|=128,m=!0,l=l.updateQueue,c.updateQueue=l,cm(c,l),Eh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!ut)return Nt(c),null}else 2*Jt()-x.renderingStartTime>hm&&g!==536870912&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(l=x.last,l!==null?l.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Jt(),c.sibling=null,l=sn.current,se(sn,m?l&1|2:l&1),c):(Nt(c),null);case 22:case 23:return bs(c),$2(),m=c.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(Nt(c),c.subtreeFlags&6&&(c.flags|=8192)):Nt(c),g=c.updateQueue,g!==null&&cm(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),l!==null&&ne(Vl),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ys(an),Nt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function CX(l,c){switch(g2(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return ys(an),be(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return Ie(c),null;case 13:if(bs(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(i(340));sh()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return ne(sn),null;case 4:return be(),null;case 10:return ys(c.type),null;case 22:case 23:return bs(c),$2(),l!==null&&ne(Vl),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return ys(an),null;case 25:return null;default:return null}}function nR(l,c){switch(g2(c),c.tag){case 3:ys(an),be();break;case 26:case 27:case 5:Ie(c);break;case 4:be();break;case 13:bs(c);break;case 19:ne(sn);break;case 10:ys(c.type);break;case 22:case 23:bs(c),$2(),l!==null&&ne(Vl);break;case 24:ys(an)}}function _h(l,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&l)===l){m=void 0;var E=g.create,$=g.inst;m=E(),$.destroy=m}g=g.next}while(g!==x)}}catch(D){_t(c,c.return,D)}}function So(l,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&l)===l){var $=m.inst,D=$.destroy;if(D!==void 0){$.destroy=void 0,x=c;var U=g,V=D;try{V()}catch(ie){_t(x,U,ie)}}}m=m.next}while(m!==E)}}catch(ie){_t(c,c.return,ie)}}function iR(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{HD(c,g)}catch(m){_t(l,l.return,m)}}}function rR(l,c,g){g.props=Ql(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(m){_t(l,c,m)}}function wh(l,c){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof g=="function"?l.refCleanup=g(m):g.current=m}}catch(x){_t(l,c,x)}}function Ea(l,c){var g=l.ref,m=l.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){_t(l,c,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){_t(l,c,x)}else g.current=null}function aR(l){var c=l.type,g=l.memoizedProps,m=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){_t(l,l.return,x)}}function nS(l,c,g){try{var m=l.stateNode;XX(m,l.type,g,c),m[Ei]=c}catch(x){_t(l,l.return,x)}}function sR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&To(l.type)||l.tag===4}function iS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||sR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&To(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function rS(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(l),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Em));else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode,c=null),l=l.child,l!==null))for(rS(l,c,g),l=l.sibling;l!==null;)rS(l,c,g),l=l.sibling}function fm(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?g.insertBefore(l,c):g.appendChild(l);else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(fm(l,c,g),l=l.sibling;l!==null;)fm(l,c,g),l=l.sibling}function oR(l){var c=l.stateNode,g=l.memoizedProps;try{for(var m=l.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Dn(c,m,g),c[Pn]=l,c[Ei]=g}catch(E){_t(l,l.return,E)}}var Es=!1,Xt=!1,aS=!1,lR=typeof WeakSet=="function"?WeakSet:Set,yn=null;function MX(l,c){if(l=l.containerInfo,TS=Tm,l=bD(l),i2(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var $=0,D=-1,U=-1,V=0,ie=0,oe=l,Q=null;t:for(;;){for(var Z;oe!==g||x!==0&&oe.nodeType!==3||(D=$+x),oe!==E||m!==0&&oe.nodeType!==3||(U=$+m),oe.nodeType===3&&($+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)Q=oe,oe=Z;for(;;){if(oe===l)break t;if(Q===g&&++V===x&&(D=$),Q===E&&++ie===m&&(U=$),(Z=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=Z}g=D===-1||U===-1?null:{start:D,end:U}}else g=null}g=g||{start:0,end:0}}else g=null;for(kS={focusedElem:l,selectionRange:g},Tm=!1,yn=c;yn!==null;)if(c=yn,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,yn=l;else for(;yn!==null;){switch(c=yn,E=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,g=c,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var Fe=Ql(g.type,x,g.elementType===g.type);l=m.getSnapshotBeforeUpdate(Fe,E),m.__reactInternalSnapshotBeforeUpdate=l}catch(Ne){_t(g,g.return,Ne)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,g=l.nodeType,g===9)RS(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":RS(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=c.sibling,l!==null){l.return=c.return,yn=l;break}yn=c.return}}function uR(l,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Eo(l,g),m&4&&_h(5,g);break;case 1:if(Eo(l,g),m&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch($){_t(g,g.return,$)}else{var x=Ql(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(x,c,l.__reactInternalSnapshotBeforeUpdate)}catch($){_t(g,g.return,$)}}m&64&&iR(g),m&512&&wh(g,g.return);break;case 3:if(Eo(l,g),m&64&&(l=g.updateQueue,l!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{HD(l,c)}catch($){_t(g,g.return,$)}}break;case 27:c===null&&m&4&&oR(g);case 26:case 5:Eo(l,g),c===null&&m&4&&aR(g),m&512&&wh(g,g.return);break;case 12:Eo(l,g);break;case 13:Eo(l,g),m&4&&dR(l,g),m&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=FX.bind(null,g),eV(l,g))));break;case 22:if(m=g.memoizedState!==null||Es,!m){c=c!==null&&c.memoizedState!==null||Xt,x=Es;var E=Xt;Es=m,(Xt=c)&&!E?_o(l,g,(g.subtreeFlags&8772)!==0):Eo(l,g),Es=x,Xt=E}break;case 30:break;default:Eo(l,g)}}function cR(l){var c=l.alternate;c!==null&&(l.alternate=null,cR(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Ux(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var kt=null,Ai=!1;function _s(l,c,g){for(g=g.child;g!==null;)fR(l,c,g),g=g.sibling}function fR(l,c,g){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Gd,g)}catch{}switch(g.tag){case 26:Xt||Ea(g,c),_s(l,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Xt||Ea(g,c);var m=kt,x=Ai;To(g.type)&&(kt=g.stateNode,Ai=!1),_s(l,c,g),Rh(g.stateNode),kt=m,Ai=x;break;case 5:Xt||Ea(g,c);case 6:if(m=kt,x=Ai,kt=null,_s(l,c,g),kt=m,Ai=x,kt!==null)if(Ai)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(g.stateNode)}catch(E){_t(g,c,E)}else try{kt.removeChild(g.stateNode)}catch(E){_t(g,c,E)}break;case 18:kt!==null&&(Ai?(l=kt,JR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Ph(l)):JR(kt,g.stateNode));break;case 4:m=kt,x=Ai,kt=g.stateNode.containerInfo,Ai=!0,_s(l,c,g),kt=m,Ai=x;break;case 0:case 11:case 14:case 15:Xt||So(2,g,c),Xt||So(4,g,c),_s(l,c,g);break;case 1:Xt||(Ea(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&rR(g,c,m)),_s(l,c,g);break;case 21:_s(l,c,g);break;case 22:Xt=(m=Xt)||g.memoizedState!==null,_s(l,c,g),Xt=m;break;default:_s(l,c,g)}}function dR(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Ph(l)}catch(g){_t(c,c.return,g)}}function $X(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new lR),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new lR),c;default:throw Error(i(435,l.tag))}}function sS(l,c){var g=$X(l);c.forEach(function(m){var x=LX.bind(null,l,m);g.has(m)||(g.add(m),m.then(x,x))})}function Gi(l,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=l,$=c,D=$;e:for(;D!==null;){switch(D.tag){case 27:if(To(D.type)){kt=D.stateNode,Ai=!1;break e}break;case 5:kt=D.stateNode,Ai=!1;break e;case 3:case 4:kt=D.stateNode.containerInfo,Ai=!0;break e}D=D.return}if(kt===null)throw Error(i(160));fR(E,$,x),kt=null,Ai=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)hR(c,l),c=c.sibling}var Pr=null;function hR(l,c){var g=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Gi(c,l),Yi(l),m&4&&(So(3,l,l.return),_h(3,l),So(5,l,l.return));break;case 1:Gi(c,l),Yi(l),m&512&&(Xt||g===null||Ea(g,g.return)),m&64&&Es&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Pr;if(Gi(c,l),Yi(l),m&512&&(Xt||g===null||Ea(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=l.memoizedState,g===null)if(m===null)if(l.stateNode===null){e:{m=l.type,g=l.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Vd]||E[Pn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Dn(E,m,g),E[Pn]=l,pn(E),m=E;break e;case"link":var $=oN("link","href",x).get(m+(g.href||""));if($){for(var D=0;D<$.length;D++)if(E=$[D],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){$.splice(D,1);break t}}E=x.createElement(m),Dn(E,m,g),x.head.appendChild(E);break;case"meta":if($=oN("meta","content",x).get(m+(g.content||""))){for(D=0;D<$.length;D++)if(E=$[D],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){$.splice(D,1);break t}}E=x.createElement(m),Dn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Pn]=l,pn(E),m=E}l.stateNode=m}else lN(x,l.type,l.stateNode);else l.stateNode=sN(x,m,l.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?lN(x,l.type,l.stateNode):sN(x,m,l.memoizedProps)):m===null&&l.stateNode!==null&&nS(l,l.memoizedProps,g.memoizedProps)}break;case 27:Gi(c,l),Yi(l),m&512&&(Xt||g===null||Ea(g,g.return)),g!==null&&m&4&&nS(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Gi(c,l),Yi(l),m&512&&(Xt||g===null||Ea(g,g.return)),l.flags&32){x=l.stateNode;try{Cc(x,"")}catch(Z){_t(l,l.return,Z)}}m&4&&l.stateNode!=null&&(x=l.memoizedProps,nS(l,x,g!==null?g.memoizedProps:x)),m&1024&&(aS=!0);break;case 6:if(Gi(c,l),Yi(l),m&4){if(l.stateNode===null)throw Error(i(162));m=l.memoizedProps,g=l.stateNode;try{g.nodeValue=m}catch(Z){_t(l,l.return,Z)}}break;case 3:if(Cm=null,x=Pr,Pr=wm(c.containerInfo),Gi(c,l),Pr=x,Yi(l),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Ph(c.containerInfo)}catch(Z){_t(l,l.return,Z)}aS&&(aS=!1,gR(l));break;case 4:m=Pr,Pr=wm(l.stateNode.containerInfo),Gi(c,l),Yi(l),Pr=m;break;case 12:Gi(c,l),Yi(l);break;case 13:Gi(c,l),Yi(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(dS=Jt()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,sS(l,m)));break;case 22:x=l.memoizedState!==null;var U=g!==null&&g.memoizedState!==null,V=Es,ie=Xt;if(Es=V||x,Xt=ie||U,Gi(c,l),Xt=ie,Es=V,Yi(l),m&8192)e:for(c=l.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(g===null||U||Es||Xt||Zl(l)),g=null,c=l;;){if(c.tag===5||c.tag===26){if(g===null){U=g=c;try{if(E=U.stateNode,x)$=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{D=U.stateNode;var oe=U.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){_t(U,U.return,Z)}}}else if(c.tag===6){if(g===null){U=c;try{U.stateNode.nodeValue=x?"":U.memoizedProps}catch(Z){_t(U,U.return,Z)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=l.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,sS(l,g))));break;case 19:Gi(c,l),Yi(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,sS(l,m)));break;case 30:break;case 21:break;default:Gi(c,l),Yi(l)}}function Yi(l){var c=l.flags;if(c&2){try{for(var g,m=l.return;m!==null;){if(sR(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=iS(l);fm(l,E,x);break;case 5:var $=g.stateNode;g.flags&32&&(Cc($,""),g.flags&=-33);var D=iS(l);fm(l,D,$);break;case 3:case 4:var U=g.stateNode.containerInfo,V=iS(l);rS(l,V,U);break;default:throw Error(i(161))}}catch(ie){_t(l,l.return,ie)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function gR(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;gR(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function Eo(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)uR(l,c.alternate,c),c=c.sibling}function Zl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:So(4,c,c.return),Zl(c);break;case 1:Ea(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&rR(c,c.return,g),Zl(c);break;case 27:Rh(c.stateNode);case 26:case 5:Ea(c,c.return),Zl(c);break;case 22:c.memoizedState===null&&Zl(c);break;case 30:Zl(c);break;default:Zl(c)}l=l.sibling}}function _o(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=l,E=c,$=E.flags;switch(E.tag){case 0:case 11:case 15:_o(x,E,g),_h(4,E);break;case 1:if(_o(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(V){_t(m,m.return,V)}if(m=E,x=m.updateQueue,x!==null){var D=m.stateNode;try{var U=x.shared.hiddenCallbacks;if(U!==null)for(x.shared.hiddenCallbacks=null,x=0;x<U.length;x++)qD(U[x],D)}catch(V){_t(m,m.return,V)}}g&&$&64&&iR(E),wh(E,E.return);break;case 27:oR(E);case 26:case 5:_o(x,E,g),g&&m===null&&$&4&&aR(E),wh(E,E.return);break;case 12:_o(x,E,g);break;case 13:_o(x,E,g),g&&$&4&&dR(x,E);break;case 22:E.memoizedState===null&&_o(x,E,g),wh(E,E.return);break;case 30:break;default:_o(x,E,g)}c=c.sibling}}function oS(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&uh(g))}function lS(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&uh(l))}function _a(l,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)pR(l,c,g,m),c=c.sibling}function pR(l,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:_a(l,c,g,m),x&2048&&_h(9,c);break;case 1:_a(l,c,g,m);break;case 3:_a(l,c,g,m),x&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&uh(l)));break;case 12:if(x&2048){_a(l,c,g,m),l=c.stateNode;try{var E=c.memoizedProps,$=E.id,D=E.onPostCommit;typeof D=="function"&&D($,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(U){_t(c,c.return,U)}}else _a(l,c,g,m);break;case 13:_a(l,c,g,m);break;case 23:break;case 22:E=c.stateNode,$=c.alternate,c.memoizedState!==null?E._visibility&2?_a(l,c,g,m):Ah(l,c):E._visibility&2?_a(l,c,g,m):(E._visibility|=2,Gc(l,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&oS($,c);break;case 24:_a(l,c,g,m),x&2048&&lS(c.alternate,c);break;default:_a(l,c,g,m)}}function Gc(l,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=l,$=c,D=g,U=m,V=$.flags;switch($.tag){case 0:case 11:case 15:Gc(E,$,D,U,x),_h(8,$);break;case 23:break;case 22:var ie=$.stateNode;$.memoizedState!==null?ie._visibility&2?Gc(E,$,D,U,x):Ah(E,$):(ie._visibility|=2,Gc(E,$,D,U,x)),x&&V&2048&&oS($.alternate,$);break;case 24:Gc(E,$,D,U,x),x&&V&2048&&lS($.alternate,$);break;default:Gc(E,$,D,U,x)}c=c.sibling}}function Ah(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,m=c,x=m.flags;switch(m.tag){case 22:Ah(g,m),x&2048&&oS(m.alternate,m);break;case 24:Ah(g,m),x&2048&&lS(m.alternate,m);break;default:Ah(g,m)}c=c.sibling}}var Ch=8192;function Yc(l){if(l.subtreeFlags&Ch)for(l=l.child;l!==null;)mR(l),l=l.sibling}function mR(l){switch(l.tag){case 26:Yc(l),l.flags&Ch&&l.memoizedState!==null&&hV(Pr,l.memoizedState,l.memoizedProps);break;case 5:Yc(l);break;case 3:case 4:var c=Pr;Pr=wm(l.stateNode.containerInfo),Yc(l),Pr=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Ch,Ch=16777216,Yc(l),Ch=c):Yc(l));break;default:Yc(l)}}function yR(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Mh(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];yn=m,bR(m,l)}yR(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vR(l),l=l.sibling}function vR(l){switch(l.tag){case 0:case 11:case 15:Mh(l),l.flags&2048&&So(9,l,l.return);break;case 3:Mh(l);break;case 12:Mh(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,dm(l)):Mh(l);break;default:Mh(l)}}function dm(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];yn=m,bR(m,l)}yR(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:So(8,c,c.return),dm(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,dm(c));break;default:dm(c)}l=l.sibling}}function bR(l,c){for(;yn!==null;){var g=yn;switch(g.tag){case 0:case 11:case 15:So(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:uh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,yn=m;else e:for(g=l;yn!==null;){m=yn;var x=m.sibling,E=m.return;if(cR(m),m===g){yn=null;break e}if(x!==null){x.return=E,yn=x;break e}yn=E}}}var TX={getCacheForType:function(l){var c=jn(an),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},kX=typeof WeakMap=="function"?WeakMap:Map,ht=0,Ct=null,We=null,et=0,gt=0,Xi=null,wo=!1,Xc=!1,uS=!1,ws=0,Bt=0,Ao=0,Kl=0,cS=0,vr=0,Vc=0,$h=null,Ci=null,fS=!1,dS=0,hm=1/0,gm=null,Co=null,kn=0,Mo=null,Wc=null,Qc=0,hS=0,gS=null,xR=null,Th=0,pS=null;function Vi(){if((ht&2)!==0&&et!==0)return et&-et;if(R.T!==null){var l=Lc;return l!==0?l:ES()}return Fk()}function SR(){vr===0&&(vr=(et&536870912)===0||ut?Ok():536870912);var l=yr.current;return l!==null&&(l.flags|=32),vr}function Wi(l,c,g){(l===Ct&&(gt===2||gt===9)||l.cancelPendingCommit!==null)&&(Zc(l,0),$o(l,et,vr,!1)),Xd(l,g),((ht&2)===0||l!==Ct)&&(l===Ct&&((ht&2)===0&&(Kl|=g),Bt===4&&$o(l,et,vr,!1)),wa(l))}function ER(l,c,g){if((ht&6)!==0)throw Error(i(327));var m=!g&&(c&124)===0&&(c&l.expiredLanes)===0||Yd(l,c),x=m?RX(l,c):vS(l,c,!0),E=m;do{if(x===0){Xc&&!m&&$o(l,c,0,!1);break}else{if(g=l.current.alternate,E&&!DX(g)){x=vS(l,c,!1),E=!1;continue}if(x===2){if(E=c,l.errorRecoveryDisabledLanes&E)var $=0;else $=l.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var D=l;x=$h;var U=D.current.memoizedState.isDehydrated;if(U&&(Zc(D,$).flags|=256),$=vS(D,$,!1),$!==2){if(uS&&!U){D.errorRecoveryDisabledLanes|=E,Kl|=E,x=4;break e}E=Ci,Ci=x,E!==null&&(Ci===null?Ci=E:Ci.push.apply(Ci,E))}x=$}if(E=!1,x!==2)continue}}if(x===1){Zc(l,0),$o(l,c,0,!0);break}e:{switch(m=l,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:$o(m,c,vr,!wo);break e;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=dS+300-Jt(),10<x)){if($o(m,c,vr,!wo),A0(m,0,!0)!==0)break e;m.timeoutHandle=ZR(_R.bind(null,m,g,Ci,gm,fS,c,vr,Kl,Vc,wo,E,2,-0,0),x);break e}_R(m,g,Ci,gm,fS,c,vr,Kl,Vc,wo,E,0,-0,0)}}break}while(!0);wa(l)}function _R(l,c,g,m,x,E,$,D,U,V,ie,oe,Q,Z){if(l.timeoutHandle=-1,oe=c.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Fh={stylesheets:null,count:0,unsuspend:dV},mR(c),oe=gV(),oe!==null)){l.cancelPendingCommit=oe(kR.bind(null,l,c,E,g,m,x,$,D,U,ie,1,Q,Z)),$o(l,E,$,!V);return}kR(l,c,E,g,m,x,$,D,U)}function DX(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!qi(E(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $o(l,c,g,m){c&=~cS,c&=~Kl,l.suspendedLanes|=c,l.pingedLanes&=~c,m&&(l.warmLanes|=c),m=l.expirationTimes;for(var x=c;0<x;){var E=31-ji(x),$=1<<E;m[E]=-1,x&=~$}g!==0&&Nk(l,g,c)}function pm(){return(ht&6)===0?(kh(0),!1):!0}function mS(){if(We!==null){if(gt===0)var l=We.return;else l=We,ms=Yl=null,R2(l),qc=null,xh=0,l=We;for(;l!==null;)nR(l.alternate,l),l=l.return;We=null}}function Zc(l,c){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,WX(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),mS(),Ct=l,We=g=hs(l.current,null),et=c,gt=0,Xi=null,wo=!1,Xc=Yd(l,c),uS=!1,Vc=vr=cS=Kl=Ao=Bt=0,Ci=$h=null,fS=!1,(c&8)!==0&&(c|=c&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=c;0<m;){var x=31-ji(m),E=1<<x;c|=l[x],m&=~E}return ws=c,L0(),g}function wR(l,c){He=null,R.H=nm,c===fh||c===Y0?(c=PD(),gt=3):c===UD?(c=PD(),gt=4):gt=c===jO?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Xi=c,We===null&&(Bt=1,om(l,hr(c,l.current)))}function AR(){var l=R.H;return R.H=nm,l===null?nm:l}function CR(){var l=R.A;return R.A=TX,l}function yS(){Bt=4,wo||(et&4194048)!==et&&yr.current!==null||(Xc=!0),(Ao&134217727)===0&&(Kl&134217727)===0||Ct===null||$o(Ct,et,vr,!1)}function vS(l,c,g){var m=ht;ht|=2;var x=AR(),E=CR();(Ct!==l||et!==c)&&(gm=null,Zc(l,c)),c=!1;var $=Bt;e:do try{if(gt!==0&&We!==null){var D=We,U=Xi;switch(gt){case 8:mS(),$=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(c=!0);var V=gt;if(gt=0,Xi=null,Kc(l,D,U,V),g&&Xc){$=0;break e}break;default:V=gt,gt=0,Xi=null,Kc(l,D,U,V)}}OX(),$=Bt;break}catch(ie){wR(l,ie)}while(!0);return c&&l.shellSuspendCounter++,ms=Yl=null,ht=m,R.H=x,R.A=E,We===null&&(Ct=null,et=0,L0()),$}function OX(){for(;We!==null;)MR(We)}function RX(l,c){var g=ht;ht|=2;var m=AR(),x=CR();Ct!==l||et!==c?(gm=null,hm=Jt()+500,Zc(l,c)):Xc=Yd(l,c);e:do try{if(gt!==0&&We!==null){c=We;var E=Xi;t:switch(gt){case 1:gt=0,Xi=null,Kc(l,c,E,1);break;case 2:case 9:if(BD(E)){gt=0,Xi=null,$R(c);break}c=function(){gt!==2&&gt!==9||Ct!==l||(gt=7),wa(l)},E.then(c,c);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:BD(E)?(gt=0,Xi=null,$R(c)):(gt=0,Xi=null,Kc(l,c,E,7));break;case 5:var $=null;switch(We.tag){case 26:$=We.memoizedState;case 5:case 27:var D=We;if(!$||uN($)){gt=0,Xi=null;var U=D.sibling;if(U!==null)We=U;else{var V=D.return;V!==null?(We=V,mm(V)):We=null}break t}}gt=0,Xi=null,Kc(l,c,E,5);break;case 6:gt=0,Xi=null,Kc(l,c,E,6);break;case 8:mS(),Bt=6;break e;default:throw Error(i(462))}}NX();break}catch(ie){wR(l,ie)}while(!0);return ms=Yl=null,R.H=m,R.A=x,ht=g,We!==null?0:(Ct=null,et=0,L0(),Bt)}function NX(){for(;We!==null&&!Kt();)MR(We)}function MR(l){var c=eR(l.alternate,l,ws);l.memoizedProps=l.pendingProps,c===null?mm(l):We=c}function $R(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=VO(g,c,c.pendingProps,c.type,void 0,et);break;case 11:c=VO(g,c,c.pendingProps,c.type.render,c.ref,et);break;case 5:R2(c);default:nR(g,c),c=We=TD(c,ws),c=eR(g,c,ws)}l.memoizedProps=l.pendingProps,c===null?mm(l):We=c}function Kc(l,c,g,m){ms=Yl=null,R2(c),qc=null,xh=0;var x=c.return;try{if(_X(l,x,c,g,et)){Bt=1,om(l,hr(g,l.current)),We=null;return}}catch(E){if(x!==null)throw We=x,E;Bt=1,om(l,hr(g,l.current)),We=null;return}c.flags&32768?(ut||m===1?l=!0:Xc||(et&536870912)!==0?l=!1:(wo=l=!0,(m===2||m===9||m===3||m===6)&&(m=yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),TR(c,l)):mm(c)}function mm(l){var c=l;do{if((c.flags&32768)!==0){TR(c,wo);return}l=c.return;var g=AX(c.alternate,c,ws);if(g!==null){We=g;return}if(c=c.sibling,c!==null){We=c;return}We=c=l}while(c!==null);Bt===0&&(Bt=5)}function TR(l,c){do{var g=CX(l.alternate,l);if(g!==null){g.flags&=32767,We=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){We=l;return}We=l=g}while(l!==null);Bt=6,We=null}function kR(l,c,g,m,x,E,$,D,U){l.cancelPendingCommit=null;do ym();while(kn!==0);if((ht&6)!==0)throw Error(i(327));if(c!==null){if(c===l.current)throw Error(i(177));if(E=c.lanes|c.childLanes,E|=l2,dY(l,g,E,$,D,U),l===Ct&&(We=Ct=null,et=0),Wc=c,Mo=l,Qc=g,hS=E,gS=x,xR=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,UX(E0,function(){return zR(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=R.T,R.T=null,x=P.p,P.p=2,$=ht,ht|=4;try{MX(l,c,g)}finally{ht=$,P.p=x,R.T=m}}kn=1,DR(),OR(),RR()}}function DR(){if(kn===1){kn=0;var l=Mo,c=Wc,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=R.T,R.T=null;var m=P.p;P.p=2;var x=ht;ht|=4;try{hR(c,l);var E=kS,$=bD(l.containerInfo),D=E.focusedElem,U=E.selectionRange;if($!==D&&D&&D.ownerDocument&&vD(D.ownerDocument.documentElement,D)){if(U!==null&&i2(D)){var V=U.start,ie=U.end;if(ie===void 0&&(ie=V),"selectionStart"in D)D.selectionStart=V,D.selectionEnd=Math.min(ie,D.value.length);else{var oe=D.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Fe=D.textContent.length,Ne=Math.min(U.start,Fe),xt=U.end===void 0?Ne:Math.min(U.end,Fe);!Z.extend&&Ne>xt&&($=xt,xt=Ne,Ne=$);var q=yD(D,Ne),j=yD(D,xt);if(q&&j&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==j.node||Z.focusOffset!==j.offset)){var Y=oe.createRange();Y.setStart(q.node,q.offset),Z.removeAllRanges(),Ne>xt?(Z.addRange(Y),Z.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),Z.addRange(Y))}}}}for(oe=[],Z=D;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<oe.length;D++){var ae=oe[D];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Tm=!!TS,kS=TS=null}finally{ht=x,P.p=m,R.T=g}}l.current=c,kn=2}}function OR(){if(kn===2){kn=0;var l=Mo,c=Wc,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=R.T,R.T=null;var m=P.p;P.p=2;var x=ht;ht|=4;try{uR(l,c.alternate,c)}finally{ht=x,P.p=m,R.T=g}}kn=3}}function RR(){if(kn===4||kn===3){kn=0,gn();var l=Mo,c=Wc,g=Qc,m=xR;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?kn=5:(kn=0,Wc=Mo=null,NR(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(Co=null),Fx(g),c=c.stateNode,Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Gd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=R.T,x=P.p,P.p=2,R.T=null;try{for(var E=l.onRecoverableError,$=0;$<m.length;$++){var D=m[$];E(D.value,{componentStack:D.stack})}}finally{R.T=c,P.p=x}}(Qc&3)!==0&&ym(),wa(l),x=l.pendingLanes,(g&4194090)!==0&&(x&42)!==0?l===pS?Th++:(Th=0,pS=l):Th=0,kh(0)}}function NR(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,uh(c)))}function ym(l){return DR(),OR(),RR(),zR()}function zR(){if(kn!==5)return!1;var l=Mo,c=hS;hS=0;var g=Fx(Qc),m=R.T,x=P.p;try{P.p=32>g?32:g,R.T=null,g=gS,gS=null;var E=Mo,$=Qc;if(kn=0,Wc=Mo=null,Qc=0,(ht&6)!==0)throw Error(i(331));var D=ht;if(ht|=4,vR(E.current),pR(E,E.current,$,g),ht=D,kh(0,!1),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Gd,E)}catch{}return!0}finally{P.p=x,R.T=m,NR(l,c)}}function FR(l,c,g){c=hr(g,c),c=X2(l.stateNode,c,2),l=yo(l,c,2),l!==null&&(Xd(l,2),wa(l))}function _t(l,c,g){if(l.tag===3)FR(l,l,g);else for(;c!==null;){if(c.tag===3){FR(c,l,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Co===null||!Co.has(m))){l=hr(g,l),g=IO(2),m=yo(c,g,2),m!==null&&(PO(g,m,c,l),Xd(m,2),wa(m));break}}c=c.return}}function bS(l,c,g){var m=l.pingCache;if(m===null){m=l.pingCache=new kX;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(uS=!0,x.add(g),l=zX.bind(null,l,c,g),c.then(l,l))}function zX(l,c,g){var m=l.pingCache;m!==null&&m.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Ct===l&&(et&g)===g&&(Bt===4||Bt===3&&(et&62914560)===et&&300>Jt()-dS?(ht&2)===0&&Zc(l,0):cS|=g,Vc===et&&(Vc=0)),wa(l)}function LR(l,c){c===0&&(c=Rk()),l=Rc(l,c),l!==null&&(Xd(l,c),wa(l))}function FX(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),LR(l,g)}function LX(l,c){var g=0;switch(l.tag){case 13:var m=l.stateNode,x=l.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),LR(l,g)}function UX(l,c){return Gt(l,c)}var vm=null,Jc=null,xS=!1,bm=!1,SS=!1,Jl=0;function wa(l){l!==Jc&&l.next===null&&(Jc===null?vm=Jc=l:Jc=Jc.next=l),bm=!0,xS||(xS=!0,IX())}function kh(l,c){if(!SS&&bm){SS=!0;do for(var g=!1,m=vm;m!==null;){if(l!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var $=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-ji(42|l)+1)-1,E&=x&~($&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,PR(m,E))}else E=et,E=A0(m,m===Ct?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Yd(m,E)||(g=!0,PR(m,E));m=m.next}while(g);SS=!1}}function BX(){UR()}function UR(){bm=xS=!1;var l=0;Jl!==0&&(VX()&&(l=Jl),Jl=0);for(var c=Jt(),g=null,m=vm;m!==null;){var x=m.next,E=BR(m,c);E===0?(m.next=null,g===null?vm=x:g.next=x,x===null&&(Jc=g)):(g=m,(l!==0||(E&3)!==0)&&(bm=!0)),m=x}kh(l)}function BR(l,c){for(var g=l.suspendedLanes,m=l.pingedLanes,x=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var $=31-ji(E),D=1<<$,U=x[$];U===-1?((D&g)===0||(D&m)!==0)&&(x[$]=fY(D,c)):U<=c&&(l.expiredLanes|=D),E&=~D}if(c=Ct,g=et,g=A0(l,l===c?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,g===0||l===c&&(gt===2||gt===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&it(m),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Yd(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(m!==null&&it(m),Fx(g)){case 2:case 8:g=kk;break;case 32:g=E0;break;case 268435456:g=Dk;break;default:g=E0}return m=IR.bind(null,l),g=Gt(g,m),l.callbackPriority=c,l.callbackNode=g,c}return m!==null&&m!==null&&it(m),l.callbackPriority=2,l.callbackNode=null,2}function IR(l,c){if(kn!==0&&kn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(ym()&&l.callbackNode!==g)return null;var m=et;return m=A0(l,l===Ct?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(ER(l,m,c),BR(l,Jt()),l.callbackNode!=null&&l.callbackNode===g?IR.bind(null,l):null)}function PR(l,c){if(ym())return null;ER(l,c,!0)}function IX(){QX(function(){(ht&6)!==0?Gt(Tk,BX):UR()})}function ES(){return Jl===0&&(Jl=Ok()),Jl}function jR(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:k0(""+l)}function qR(l,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,l.id&&g.setAttribute("form",l.id),c.parentNode.insertBefore(g,c),l=new FormData(l),g.parentNode.removeChild(g),l}function PX(l,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var E=jR((x[Ei]||null).action),$=m.submitter;$&&(c=(c=$[Ei]||null)?jR(c.formAction):$.getAttribute("formAction"),c!==null&&(E=c,$=null));var D=new N0("action","action",null,m,x);l.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Jl!==0){var U=$?qR(x,$):new FormData(x);j2(g,{pending:!0,data:U,method:x.method,action:E},null,U)}}else typeof E=="function"&&(D.preventDefault(),U=$?qR(x,$):new FormData(x),j2(g,{pending:!0,data:U,method:x.method,action:E},E,U))},currentTarget:x}]})}}for(var _S=0;_S<o2.length;_S++){var wS=o2[_S],jX=wS.toLowerCase(),qX=wS[0].toUpperCase()+wS.slice(1);Ir(jX,"on"+qX)}Ir(ED,"onAnimationEnd"),Ir(_D,"onAnimationIteration"),Ir(wD,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(sX,"onTransitionRun"),Ir(oX,"onTransitionStart"),Ir(lX,"onTransitionCancel"),Ir(AD,"onTransitionEnd"),_c("onMouseEnter",["mouseout","mouseover"]),_c("onMouseLeave",["mouseout","mouseover"]),_c("onPointerEnter",["pointerout","pointerover"]),_c("onPointerLeave",["pointerout","pointerover"]),Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dh));function HR(l,c){c=(c&4)!==0;for(var g=0;g<l.length;g++){var m=l[g],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var $=m.length-1;0<=$;$--){var D=m[$],U=D.instance,V=D.currentTarget;if(D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=V;try{E(x)}catch(ie){sm(ie)}x.currentTarget=null,E=U}else for($=0;$<m.length;$++){if(D=m[$],U=D.instance,V=D.currentTarget,D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=V;try{E(x)}catch(ie){sm(ie)}x.currentTarget=null,E=U}}}}function Qe(l,c){var g=c[Lx];g===void 0&&(g=c[Lx]=new Set);var m=l+"__bubble";g.has(m)||(GR(c,l,2,!1),g.add(m))}function AS(l,c,g){var m=0;c&&(m|=4),GR(g,l,m,c)}var xm="_reactListening"+Math.random().toString(36).slice(2);function CS(l){if(!l[xm]){l[xm]=!0,Uk.forEach(function(g){g!=="selectionchange"&&(HX.has(g)||AS(g,!1,l),AS(g,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[xm]||(c[xm]=!0,AS("selectionchange",!1,c))}}function GR(l,c,g,m){switch(pN(c)){case 2:var x=yV;break;case 8:x=vV;break;default:x=IS}g=x.bind(null,c,g,l),x=void 0,!Vx||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?l.addEventListener(c,g,{capture:!0,passive:x}):l.addEventListener(c,g,!0):x!==void 0?l.addEventListener(c,g,{passive:x}):l.addEventListener(c,g,!1)}function MS(l,c,g,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var D=m.stateNode.containerInfo;if(D===x)break;if($===4)for($=m.return;$!==null;){var U=$.tag;if((U===3||U===4)&&$.stateNode.containerInfo===x)return;$=$.return}for(;D!==null;){if($=xc(D),$===null)return;if(U=$.tag,U===5||U===6||U===26||U===27){m=E=$;continue e}D=D.parentNode}}m=m.return}Kk(function(){var V=E,ie=Yx(g),oe=[];e:{var Q=CD.get(l);if(Q!==void 0){var Z=N0,Fe=l;switch(l){case"keypress":if(O0(g)===0)break e;case"keydown":case"keyup":Z=UY;break;case"focusin":Fe="focus",Z=Kx;break;case"focusout":Fe="blur",Z=Kx;break;case"beforeblur":case"afterblur":Z=Kx;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=tD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=CY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=PY;break;case ED:case _D:case wD:Z=TY;break;case AD:Z=qY;break;case"scroll":case"scrollend":Z=wY;break;case"wheel":Z=GY;break;case"copy":case"cut":case"paste":Z=DY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=iD;break;case"toggle":case"beforetoggle":Z=XY}var Ne=(c&4)!==0,xt=!Ne&&(l==="scroll"||l==="scrollend"),q=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var j=V,Y;j!==null;){var ae=j;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=Qd(j,q),ae!=null&&Ne.push(Oh(j,ae,Y))),xt)break;j=j.return}0<Ne.length&&(Q=new Z(Q,Fe,null,g,ie),oe.push({event:Q,listeners:Ne}))}}if((c&7)===0){e:{if(Q=l==="mouseover"||l==="pointerover",Z=l==="mouseout"||l==="pointerout",Q&&g!==Gx&&(Fe=g.relatedTarget||g.fromElement)&&(xc(Fe)||Fe[bc]))break e;if((Z||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Fe=g.relatedTarget||g.toElement,Z=V,Fe=Fe?xc(Fe):null,Fe!==null&&(xt=a(Fe),Ne=Fe.tag,Fe!==xt||Ne!==5&&Ne!==27&&Ne!==6)&&(Fe=null)):(Z=null,Fe=V),Z!==Fe)){if(Ne=tD,ae="onMouseLeave",q="onMouseEnter",j="mouse",(l==="pointerout"||l==="pointerover")&&(Ne=iD,ae="onPointerLeave",q="onPointerEnter",j="pointer"),xt=Z==null?Q:Wd(Z),Y=Fe==null?Q:Wd(Fe),Q=new Ne(ae,j+"leave",Z,g,ie),Q.target=xt,Q.relatedTarget=Y,ae=null,xc(ie)===V&&(Ne=new Ne(q,j+"enter",Fe,g,ie),Ne.target=Y,Ne.relatedTarget=xt,ae=Ne),xt=ae,Z&&Fe)t:{for(Ne=Z,q=Fe,j=0,Y=Ne;Y;Y=ef(Y))j++;for(Y=0,ae=q;ae;ae=ef(ae))Y++;for(;0<j-Y;)Ne=ef(Ne),j--;for(;0<Y-j;)q=ef(q),Y--;for(;j--;){if(Ne===q||q!==null&&Ne===q.alternate)break t;Ne=ef(Ne),q=ef(q)}Ne=null}else Ne=null;Z!==null&&YR(oe,Q,Z,Ne,!1),Fe!==null&&xt!==null&&YR(oe,xt,Fe,Ne,!0)}}e:{if(Q=V?Wd(V):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var we=fD;else if(uD(Q))if(dD)we=iX;else{we=tX;var Ye=eX}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?V&&Hx(V.elementType)&&(we=fD):we=nX;if(we&&(we=we(l,V))){cD(oe,we,g,ie);break e}Ye&&Ye(l,Q,V),l==="focusout"&&V&&Q.type==="number"&&V.memoizedProps.value!=null&&qx(Q,"number",Q.value)}switch(Ye=V?Wd(V):window,l){case"focusin":(uD(Ye)||Ye.contentEditable==="true")&&(kc=Ye,r2=V,rh=null);break;case"focusout":rh=r2=kc=null;break;case"mousedown":a2=!0;break;case"contextmenu":case"mouseup":case"dragend":a2=!1,xD(oe,g,ie);break;case"selectionchange":if(aX)break;case"keydown":case"keyup":xD(oe,g,ie)}var $e;if(e2)e:{switch(l){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Tc?oD(l,g)&&(ze="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(ze="onCompositionStart");ze&&(rD&&g.locale!=="ko"&&(Tc||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Tc&&($e=Jk()):(ho=ie,Wx="value"in ho?ho.value:ho.textContent,Tc=!0)),Ye=Sm(V,ze),0<Ye.length&&(ze=new nD(ze,l,null,g,ie),oe.push({event:ze,listeners:Ye}),$e?ze.data=$e:($e=lD(g),$e!==null&&(ze.data=$e)))),($e=WY?QY(l,g):ZY(l,g))&&(ze=Sm(V,"onBeforeInput"),0<ze.length&&(Ye=new nD("onBeforeInput","beforeinput",null,g,ie),oe.push({event:Ye,listeners:ze}),Ye.data=$e)),PX(oe,l,V,g,ie)}HR(oe,c)})}function Oh(l,c,g){return{instance:l,listener:c,currentTarget:g}}function Sm(l,c){for(var g=c+"Capture",m=[];l!==null;){var x=l,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Qd(l,g),x!=null&&m.unshift(Oh(l,x,E)),x=Qd(l,c),x!=null&&m.push(Oh(l,x,E))),l.tag===3)return m;l=l.return}return[]}function ef(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function YR(l,c,g,m,x){for(var E=c._reactName,$=[];g!==null&&g!==m;){var D=g,U=D.alternate,V=D.stateNode;if(D=D.tag,U!==null&&U===m)break;D!==5&&D!==26&&D!==27||V===null||(U=V,x?(V=Qd(g,E),V!=null&&$.unshift(Oh(g,V,U))):x||(V=Qd(g,E),V!=null&&$.push(Oh(g,V,U)))),g=g.return}$.length!==0&&l.push({event:c,listeners:$})}var GX=/\r\n?/g,YX=/\u0000|\uFFFD/g;function XR(l){return(typeof l=="string"?l:""+l).replace(GX,`
`).replace(YX,"")}function VR(l,c){return c=XR(c),XR(l)===c}function Em(){}function bt(l,c,g,m,x,E){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Cc(l,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Cc(l,""+m);break;case"className":M0(l,"class",m);break;case"tabIndex":M0(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":M0(l,g,m);break;case"style":Qk(l,m,E);break;case"data":if(c!=="object"){M0(l,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){l.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(c!=="input"&&bt(l,c,"name",x.name,x,null),bt(l,c,"formEncType",x.formEncType,x,null),bt(l,c,"formMethod",x.formMethod,x,null),bt(l,c,"formTarget",x.formTarget,x,null)):(bt(l,c,"encType",x.encType,x,null),bt(l,c,"method",x.method,x,null),bt(l,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"onClick":m!=null&&(l.onclick=Em);break;case"onScroll":m!=null&&Qe("scroll",l);break;case"onScrollEnd":m!=null&&Qe("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}g=k0(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""+m):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":m===!0?l.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,m):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(g,m):l.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(g):l.setAttribute(g,m);break;case"popover":Qe("beforetoggle",l),Qe("toggle",l),C0(l,"popover",m);break;case"xlinkActuate":fs(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":fs(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":fs(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":fs(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":fs(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":fs(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":fs(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":fs(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":fs(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":C0(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=EY.get(g)||g,C0(l,g,m))}}function $S(l,c,g,m,x,E){switch(g){case"style":Qk(l,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"children":typeof m=="string"?Cc(l,m):(typeof m=="number"||typeof m=="bigint")&&Cc(l,""+m);break;case"onScroll":m!=null&&Qe("scroll",l);break;case"onScrollEnd":m!=null&&Qe("scrollend",l);break;case"onClick":m!=null&&(l.onclick=Em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bk.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),E=l[Ei]||null,E=E!=null?E[g]:null,typeof E=="function"&&l.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(c,m,x);break e}g in l?l[g]=m:m===!0?l.setAttribute(g,""):C0(l,g,m)}}}function Dn(l,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",l),Qe("load",l);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var $=g[E];if($!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(l,c,E,$,g,null)}}x&&bt(l,c,"srcSet",g.srcSet,g,null),m&&bt(l,c,"src",g.src,g,null);return;case"input":Qe("invalid",l);var D=E=$=x=null,U=null,V=null;for(m in g)if(g.hasOwnProperty(m)){var ie=g[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":$=ie;break;case"checked":U=ie;break;case"defaultChecked":V=ie;break;case"value":E=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,c));break;default:bt(l,c,m,ie,g,null)}}Yk(l,E,D,U,V,$,x,!1),$0(l);return;case"select":Qe("invalid",l),m=$=E=null;for(x in g)if(g.hasOwnProperty(x)&&(D=g[x],D!=null))switch(x){case"value":E=D;break;case"defaultValue":$=D;break;case"multiple":m=D;default:bt(l,c,x,D,g,null)}c=E,g=$,l.multiple=!!m,c!=null?Ac(l,!!m,c,!1):g!=null&&Ac(l,!!m,g,!0);return;case"textarea":Qe("invalid",l),E=x=m=null;for($ in g)if(g.hasOwnProperty($)&&(D=g[$],D!=null))switch($){case"value":m=D;break;case"defaultValue":x=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:bt(l,c,$,D,g,null)}Vk(l,m,x,E),$0(l);return;case"option":for(U in g)if(g.hasOwnProperty(U)&&(m=g[U],m!=null))switch(U){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:bt(l,c,U,m,g,null)}return;case"dialog":Qe("beforetoggle",l),Qe("toggle",l),Qe("cancel",l),Qe("close",l);break;case"iframe":case"object":Qe("load",l);break;case"video":case"audio":for(m=0;m<Dh.length;m++)Qe(Dh[m],l);break;case"image":Qe("error",l),Qe("load",l);break;case"details":Qe("toggle",l);break;case"embed":case"source":case"link":Qe("error",l),Qe("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in g)if(g.hasOwnProperty(V)&&(m=g[V],m!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(l,c,V,m,g,null)}return;default:if(Hx(c)){for(ie in g)g.hasOwnProperty(ie)&&(m=g[ie],m!==void 0&&$S(l,c,ie,m,g,void 0));return}}for(D in g)g.hasOwnProperty(D)&&(m=g[D],m!=null&&bt(l,c,D,m,g,null))}function XX(l,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,$=null,D=null,U=null,V=null,ie=null;for(Z in g){var oe=g[Z];if(g.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":U=oe;default:m.hasOwnProperty(Z)||bt(l,c,Z,null,m,oe)}}for(var Q in m){var Z=m[Q];if(oe=g[Q],m.hasOwnProperty(Q)&&(Z!=null||oe!=null))switch(Q){case"type":E=Z;break;case"name":x=Z;break;case"checked":V=Z;break;case"defaultChecked":ie=Z;break;case"value":$=Z;break;case"defaultValue":D=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,c));break;default:Z!==oe&&bt(l,c,Q,Z,m,oe)}}jx(l,$,D,U,V,ie,E,x);return;case"select":Z=$=D=Q=null;for(E in g)if(U=g[E],g.hasOwnProperty(E)&&U!=null)switch(E){case"value":break;case"multiple":Z=U;default:m.hasOwnProperty(E)||bt(l,c,E,null,m,U)}for(x in m)if(E=m[x],U=g[x],m.hasOwnProperty(x)&&(E!=null||U!=null))switch(x){case"value":Q=E;break;case"defaultValue":D=E;break;case"multiple":$=E;default:E!==U&&bt(l,c,x,E,m,U)}c=D,g=$,m=Z,Q!=null?Ac(l,!!g,Q,!1):!!m!=!!g&&(c!=null?Ac(l,!!g,c,!0):Ac(l,!!g,g?[]:"",!1));return;case"textarea":Z=Q=null;for(D in g)if(x=g[D],g.hasOwnProperty(D)&&x!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:bt(l,c,D,null,m,x)}for($ in m)if(x=m[$],E=g[$],m.hasOwnProperty($)&&(x!=null||E!=null))switch($){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&bt(l,c,$,x,m,E)}Xk(l,Q,Z);return;case"option":for(var Fe in g)if(Q=g[Fe],g.hasOwnProperty(Fe)&&Q!=null&&!m.hasOwnProperty(Fe))switch(Fe){case"selected":l.selected=!1;break;default:bt(l,c,Fe,null,m,Q)}for(U in m)if(Q=m[U],Z=g[U],m.hasOwnProperty(U)&&Q!==Z&&(Q!=null||Z!=null))switch(U){case"selected":l.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:bt(l,c,U,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in g)Q=g[Ne],g.hasOwnProperty(Ne)&&Q!=null&&!m.hasOwnProperty(Ne)&&bt(l,c,Ne,null,m,Q);for(V in m)if(Q=m[V],Z=g[V],m.hasOwnProperty(V)&&Q!==Z&&(Q!=null||Z!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:bt(l,c,V,Q,m,Z)}return;default:if(Hx(c)){for(var xt in g)Q=g[xt],g.hasOwnProperty(xt)&&Q!==void 0&&!m.hasOwnProperty(xt)&&$S(l,c,xt,void 0,m,Q);for(ie in m)Q=m[ie],Z=g[ie],!m.hasOwnProperty(ie)||Q===Z||Q===void 0&&Z===void 0||$S(l,c,ie,Q,m,Z);return}}for(var q in g)Q=g[q],g.hasOwnProperty(q)&&Q!=null&&!m.hasOwnProperty(q)&&bt(l,c,q,null,m,Q);for(oe in m)Q=m[oe],Z=g[oe],!m.hasOwnProperty(oe)||Q===Z||Q==null&&Z==null||bt(l,c,oe,Q,m,Z)}var TS=null,kS=null;function _m(l){return l.nodeType===9?l:l.ownerDocument}function WR(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QR(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function DS(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var OS=null;function VX(){var l=window.event;return l&&l.type==="popstate"?l===OS?!1:(OS=l,!0):(OS=null,!1)}var ZR=typeof setTimeout=="function"?setTimeout:void 0,WX=typeof clearTimeout=="function"?clearTimeout:void 0,KR=typeof Promise=="function"?Promise:void 0,QX=typeof queueMicrotask=="function"?queueMicrotask:typeof KR<"u"?function(l){return KR.resolve(null).then(l).catch(ZX)}:ZR;function ZX(l){setTimeout(function(){throw l})}function To(l){return l==="head"}function JR(l,c){var g=c,m=0,x=0;do{var E=g.nextSibling;if(l.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var $=l.ownerDocument;if(g&1&&Rh($.documentElement),g&2&&Rh($.body),g&4)for(g=$.head,Rh(g),$=g.firstChild;$;){var D=$.nextSibling,U=$.nodeName;$[Vd]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&$.rel.toLowerCase()==="stylesheet"||g.removeChild($),$=D}}if(x===0){l.removeChild(E),Ph(c);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);Ph(c)}function RS(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":RS(g),Ux(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function KX(l,c,g,m){for(;l.nodeType===1;){var x=g;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Vd])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=jr(l.nextSibling),l===null)break}return null}function JX(l,c,g){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=jr(l.nextSibling),l===null))return null;return l}function NS(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function eV(l,c){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function jr(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var zS=null;function eN(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return l;c--}else g==="/$"&&c++}l=l.previousSibling}return null}function tN(l,c,g){switch(c=_m(g),l){case"html":if(l=c.documentElement,!l)throw Error(i(452));return l;case"head":if(l=c.head,!l)throw Error(i(453));return l;case"body":if(l=c.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Rh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);Ux(l)}var br=new Map,nN=new Set;function wm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var As=P.d;P.d={f:tV,r:nV,D:iV,C:rV,L:aV,m:sV,X:lV,S:oV,M:uV};function tV(){var l=As.f(),c=pm();return l||c}function nV(l){var c=Sc(l);c!==null&&c.tag===5&&c.type==="form"?EO(c):As.r(l)}var tf=typeof document>"u"?null:document;function iN(l,c,g){var m=tf;if(m&&typeof c=="string"&&c){var x=dr(c);x='link[rel="'+l+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),nN.has(x)||(nN.add(x),l={rel:l,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),Dn(c,"link",l),pn(c),m.head.appendChild(c)))}}function iV(l){As.D(l),iN("dns-prefetch",l,null)}function rV(l,c){As.C(l,c),iN("preconnect",l,c)}function aV(l,c,g){As.L(l,c,g);var m=tf;if(m&&l&&c){var x='link[rel="preload"][as="'+dr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+dr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+dr(g.imageSizes)+'"]')):x+='[href="'+dr(l)+'"]';var E=x;switch(c){case"style":E=nf(l);break;case"script":E=rf(l)}br.has(E)||(l=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:l,as:c},g),br.set(E,l),m.querySelector(x)!==null||c==="style"&&m.querySelector(Nh(E))||c==="script"&&m.querySelector(zh(E))||(c=m.createElement("link"),Dn(c,"link",l),pn(c),m.head.appendChild(c)))}}function sV(l,c){As.m(l,c);var g=tf;if(g&&l){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+dr(m)+'"][href="'+dr(l)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=rf(l)}if(!br.has(E)&&(l=d({rel:"modulepreload",href:l},c),br.set(E,l),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(zh(E)))return}m=g.createElement("link"),Dn(m,"link",l),pn(m),g.head.appendChild(m)}}}function oV(l,c,g){As.S(l,c,g);var m=tf;if(m&&l){var x=Ec(m).hoistableStyles,E=nf(l);c=c||"default";var $=x.get(E);if(!$){var D={loading:0,preload:null};if($=m.querySelector(Nh(E)))D.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":c},g),(g=br.get(E))&&FS(l,g);var U=$=m.createElement("link");pn(U),Dn(U,"link",l),U._p=new Promise(function(V,ie){U.onload=V,U.onerror=ie}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Am($,c,m)}$={type:"stylesheet",instance:$,count:1,state:D},x.set(E,$)}}}function lV(l,c){As.X(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(l=d({src:l,async:!0},c),(c=br.get(x))&&LS(l,c),E=g.createElement("script"),pn(E),Dn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function uV(l,c){As.M(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(l=d({src:l,async:!0,type:"module"},c),(c=br.get(x))&&LS(l,c),E=g.createElement("script"),pn(E),Dn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function rN(l,c,g,m){var x=(x=Ce.current)?wm(x):null;if(!x)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=nf(g.href),g=Ec(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=nf(g.href);var E=Ec(x).hoistableStyles,$=E.get(l);if($||(x=x.ownerDocument||x,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,$),(E=x.querySelector(Nh(l)))&&!E._p&&($.instance=E,$.state.loading=5),br.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},br.set(l,g),E||cV(x,l,g,$.state))),c&&m===null)throw Error(i(528,""));return $}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=rf(g),g=Ec(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function nf(l){return'href="'+dr(l)+'"'}function Nh(l){return'link[rel="stylesheet"]['+l+"]"}function aN(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function cV(l,c,g,m){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=l.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Dn(c,"link",g),pn(c),l.head.appendChild(c))}function rf(l){return'[src="'+dr(l)+'"]'}function zh(l){return"script[async]"+l}function sN(l,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=l.querySelector('style[data-href~="'+dr(g.href)+'"]');if(m)return c.instance=m,pn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),pn(m),Dn(m,"style",x),Am(m,g.precedence,l),c.instance=m;case"stylesheet":x=nf(g.href);var E=l.querySelector(Nh(x));if(E)return c.state.loading|=4,c.instance=E,pn(E),E;m=aN(g),(x=br.get(x))&&FS(m,x),E=(l.ownerDocument||l).createElement("link"),pn(E);var $=E;return $._p=new Promise(function(D,U){$.onload=D,$.onerror=U}),Dn(E,"link",m),c.state.loading|=4,Am(E,g.precedence,l),c.instance=E;case"script":return E=rf(g.src),(x=l.querySelector(zh(E)))?(c.instance=x,pn(x),x):(m=g,(x=br.get(E))&&(m=d({},g),LS(m,x)),l=l.ownerDocument||l,x=l.createElement("script"),pn(x),Dn(x,"link",m),l.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Am(m,g.precedence,l));return c.instance}function Am(l,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,$=0;$<m.length;$++){var D=m[$];if(D.dataset.precedence===c)E=D;else if(E!==x)break}E?E.parentNode.insertBefore(l,E.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(l,c.firstChild))}function FS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function LS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var Cm=null;function oN(l,c,g){if(Cm===null){var m=new Map,x=Cm=new Map;x.set(g,m)}else x=Cm,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(l))return m;for(m.set(l,null),g=g.getElementsByTagName(l),x=0;x<g.length;x++){var E=g[x];if(!(E[Vd]||E[Pn]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var $=E.getAttribute(c)||"";$=l+$;var D=m.get($);D?D.push(E):m.set($,[E])}}return m}function lN(l,c,g){l=l.ownerDocument||l,l.head.insertBefore(g,c==="title"?l.querySelector("head > title"):null)}function fV(l,c,g){if(g===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function uN(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Fh=null;function dV(){}function hV(l,c,g){if(Fh===null)throw Error(i(475));var m=Fh;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=nf(g.href),E=l.querySelector(Nh(x));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=Mm.bind(m),l.then(m,m)),c.state.loading|=4,c.instance=E,pn(E);return}E=l.ownerDocument||l,g=aN(g),(x=br.get(x))&&FS(g,x),E=E.createElement("link"),pn(E);var $=E;$._p=new Promise(function(D,U){$.onload=D,$.onerror=U}),Dn(E,"link",g),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Mm.bind(m),l.addEventListener("load",c),l.addEventListener("error",c))}}function gV(){if(Fh===null)throw Error(i(475));var l=Fh;return l.stylesheets&&l.count===0&&US(l,l.stylesheets),0<l.count?function(c){var g=setTimeout(function(){if(l.stylesheets&&US(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Mm(){if(this.count--,this.count===0){if(this.stylesheets)US(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var $m=null;function US(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,$m=new Map,c.forEach(pV,l),$m=null,Mm.call(l))}function pV(l,c){if(!(c.state.loading&4)){var g=$m.get(l);if(g)var m=g.get(null);else{g=new Map,$m.set(l,g);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var $=x[E];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(g.set($.dataset.precedence,$),m=$)}m&&g.set(null,m)}x=c.instance,$=x.getAttribute("data-precedence"),E=g.get($)||m,E===m&&g.set(null,x),g.set($,x),this.count++,m=Mm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),c.state.loading|=4}}var Lh={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function mV(l,c,g,m,x,E,$,D){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nx(0),this.hiddenUpdates=Nx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function cN(l,c,g,m,x,E,$,D,U,V,ie,oe){return l=new mV(l,c,g,$,D,U,V,oe),c=1,E===!0&&(c|=24),E=Hi(3,null,null,c),l.current=E,E.stateNode=l,c=b2(),c.refCount++,l.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:c},_2(E),l}function fN(l){return l?(l=Nc,l):Nc}function dN(l,c,g,m,x,E){x=fN(x),m.context===null?m.context=x:m.pendingContext=x,m=mo(c),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=yo(l,m,c),g!==null&&(Wi(g,l,c),hh(g,l,c))}function hN(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function BS(l,c){hN(l,c),(l=l.alternate)&&hN(l,c)}function gN(l){if(l.tag===13){var c=Rc(l,67108864);c!==null&&Wi(c,l,67108864),BS(l,67108864)}}var Tm=!0;function yV(l,c,g,m){var x=R.T;R.T=null;var E=P.p;try{P.p=2,IS(l,c,g,m)}finally{P.p=E,R.T=x}}function vV(l,c,g,m){var x=R.T;R.T=null;var E=P.p;try{P.p=8,IS(l,c,g,m)}finally{P.p=E,R.T=x}}function IS(l,c,g,m){if(Tm){var x=PS(m);if(x===null)MS(l,c,m,km,g),mN(l,m);else if(xV(x,l,c,g,m))m.stopPropagation();else if(mN(l,m),c&4&&-1<bV.indexOf(l)){for(;x!==null;){var E=Sc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var $=Fl(E.pendingLanes);if($!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;$;){var U=1<<31-ji($);D.entanglements[1]|=U,$&=~U}wa(E),(ht&6)===0&&(hm=Jt()+500,kh(0))}}break;case 13:D=Rc(E,2),D!==null&&Wi(D,E,2),pm(),BS(E,2)}if(E=PS(m),E===null&&MS(l,c,m,km,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else MS(l,c,m,null,g)}}function PS(l){return l=Yx(l),jS(l)}var km=null;function jS(l){if(km=null,l=xc(l),l!==null){var c=a(l);if(c===null)l=null;else{var g=c.tag;if(g===13){if(l=s(c),l!==null)return l;l=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return km=l,null}function pN(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S0()){case Tk:return 2;case kk:return 8;case E0:case aY:return 32;case Dk:return 268435456;default:return 32}default:return 32}}var qS=!1,ko=null,Do=null,Oo=null,Uh=new Map,Bh=new Map,Ro=[],bV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mN(l,c){switch(l){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Uh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(c.pointerId)}}function Ih(l,c,g,m,x,E){return l===null||l.nativeEvent!==E?(l={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=Sc(c),c!==null&&gN(c)),l):(l.eventSystemFlags|=m,c=l.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),l)}function xV(l,c,g,m,x){switch(c){case"focusin":return ko=Ih(ko,l,c,g,m,x),!0;case"dragenter":return Do=Ih(Do,l,c,g,m,x),!0;case"mouseover":return Oo=Ih(Oo,l,c,g,m,x),!0;case"pointerover":var E=x.pointerId;return Uh.set(E,Ih(Uh.get(E)||null,l,c,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Bh.set(E,Ih(Bh.get(E)||null,l,c,g,m,x)),!0}return!1}function yN(l){var c=xc(l.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){l.blockedOn=c,hY(l.priority,function(){if(g.tag===13){var m=Vi();m=zx(m);var x=Rc(g,m);x!==null&&Wi(x,g,m),BS(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Dm(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var g=PS(l.nativeEvent);if(g===null){g=l.nativeEvent;var m=new g.constructor(g.type,g);Gx=m,g.target.dispatchEvent(m),Gx=null}else return c=Sc(g),c!==null&&gN(c),l.blockedOn=g,!1;c.shift()}return!0}function vN(l,c,g){Dm(l)&&g.delete(c)}function SV(){qS=!1,ko!==null&&Dm(ko)&&(ko=null),Do!==null&&Dm(Do)&&(Do=null),Oo!==null&&Dm(Oo)&&(Oo=null),Uh.forEach(vN),Bh.forEach(vN)}function Om(l,c){l.blockedOn===c&&(l.blockedOn=null,qS||(qS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,SV)))}var Rm=null;function bN(l){Rm!==l&&(Rm=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rm===l&&(Rm=null);for(var c=0;c<l.length;c+=3){var g=l[c],m=l[c+1],x=l[c+2];if(typeof m!="function"){if(jS(m||g)===null)continue;break}var E=Sc(g);E!==null&&(l.splice(c,3),c-=3,j2(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function Ph(l){function c(U){return Om(U,l)}ko!==null&&Om(ko,l),Do!==null&&Om(Do,l),Oo!==null&&Om(Oo,l),Uh.forEach(c),Bh.forEach(c);for(var g=0;g<Ro.length;g++){var m=Ro[g];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Ro.length&&(g=Ro[0],g.blockedOn===null);)yN(g),g.blockedOn===null&&Ro.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],$=x[Ei]||null;if(typeof E=="function")$||bN(g);else if($){var D=null;if(E&&E.hasAttribute("formAction")){if(x=E,$=E[Ei]||null)D=$.formAction;else if(jS(x)!==null)continue}else D=$.action;typeof D=="function"?g[m+1]=D:(g.splice(m,3),m-=3),bN(g)}}}function HS(l){this._internalRoot=l}Nm.prototype.render=HS.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=Vi();dN(g,m,l,c,null,null)},Nm.prototype.unmount=HS.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;dN(l.current,2,null,l,null,null),pm(),c[bc]=null}};function Nm(l){this._internalRoot=l}Nm.prototype.unstable_scheduleHydration=function(l){if(l){var c=Fk();l={blockedOn:null,target:l,priority:c};for(var g=0;g<Ro.length&&c!==0&&c<Ro[g].priority;g++);Ro.splice(g,0,l),g===0&&yN(l)}};var xN=t.version;if(xN!=="19.1.0")throw Error(i(527,xN,"19.1.0"));P.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=u(c),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var EV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{Gd=zm.inject(EV),Pi=zm}catch{}}return qh.createRoot=function(l,c){if(!r(l))throw Error(i(299));var g=!1,m="",x=FO,E=LO,$=UO,D=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(D=c.unstable_transitionCallbacks)),c=cN(l,1,!1,null,null,g,m,x,E,$,D,null),l[bc]=c.current,CS(l),new HS(c)},qh.hydrateRoot=function(l,c,g){if(!r(l))throw Error(i(299));var m=!1,x="",E=FO,$=LO,D=UO,U=null,V=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(D=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(U=g.unstable_transitionCallbacks),g.formState!==void 0&&(V=g.formState)),c=cN(l,1,!0,c,g??null,m,x,E,$,D,U,V),c.context=fN(null),g=c.current,m=Vi(),m=zx(m),x=mo(m),x.callback=null,yo(g,x,m),g=m,c.current.lanes=g,Xd(c,g),wa(c),l[bc]=c.current,CS(l),new Nm(c)},qh.version="19.1.0",qh}var kN;function RV(){if(kN)return XS.exports;kN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),XS.exports=OV(),XS.exports}var NV=RV();const Mv=[{id:1,versions:[{timestamp:"2023-01-01T12:00:00Z",status:"created",data:{id:1,firstName:"Jon",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}},{timestamp:"2024-01-01T00:00:00Z",status:"updated",data:{id:1,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}}]},{id:2,versions:[{timestamp:"2022-11-01T00:00:00Z",status:"created",data:{id:2,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}}]},{id:3,versions:[{timestamp:"2022-11-01T00:00:00Z",status:"created",data:{id:3,firstName:"John",lastName:"Smoth",postcode:"SW1A 0AB",DoB:"1990-01-02"}}]},{id:4,versions:[{timestamp:"2022-12-01T10:00:00Z",status:"created",data:{id:4,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}},{timestamp:"2023-01-01T12:00:00Z",status:"updated",data:{id:4,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}},{timestamp:"2023-06-15T09:30:00Z",status:"updated",data:{id:4,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"}},{timestamp:"2024-01-01T00:00:00Z",status:"updated",data:{id:4,firstName:"David",lastName:"Jones",postcode:"AB11 9CD",DoB:"1989-11-09",isCauseOfNeedsAttention:!0}}]}];function zV(e){const t=new Set;return e.forEach(n=>{n.versions.forEach(i=>{t.add(i.timestamp)})}),Array.from(t).sort()}function FV(e,t){const n=[];return e.forEach(i=>{const r=i.versions.filter(o=>o.timestamp<=t).pop();if(!r||r.status==="deleted")return;const a=i.versions.some(o=>o.data?.isCauseOfNeedsAttention),s=!!r.data.isCauseOfNeedsAttention;n.push({...r.data,id:i.id,hasEverCauseOfNeedsAttention:a,isCauseOfNeedsAttention:s})}),n}const LV=/("(?:[^\\"]|\\.)*")|[:,]/g;function ZS(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return function a(s,o,u){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-o.length-u;if(f.length<=d){const h=f.replace(LV,(p,y)=>y||`${p} `);if(h.length<=d)return h}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const h=o+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:S}=s;for(;y<S;y++)p.push(a(s[y],h,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(s),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,C=a(s[w],h,A.length+(y===_-1?0:1));C!==void 0&&p.push(A+C)}}if(p.length>0)return[v,n+p.join(`,
${h}`),b].join(`
${o}`)}return f}(e,"",0)}function Bi(e,t,n){return e.fields=t||[],e.fname=n,e}function qt(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function g8(e){return e.length===1?UV(e[0]):BV(e)}const UV=e=>function(t){return t[e]},BV=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function te(e){throw Error(e)}function Ka(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,u;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(u=e[o],u==="\\")a+=e.substring(s,o++),s=o;else if(u===i)f(),i=null,r=-1;else{if(i)continue;s===r&&u==='"'||s===r&&u==="'"?(s=o+1,i=u):u==="."&&!r?o>s?f():s=o+1:u==="["?(o>s&&f(),r=s=o+1):u==="]"&&(r||te("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function kr(e,t,n){const i=Ka(e);return e=i.length===1?i[0]:e,Bi((n&&n.get||g8)(i),[e],t||e)}const Tp=kr("id"),ni=Bi(e=>e,[],"identity"),Ho=Bi(()=>0,[],"zero"),vd=Bi(()=>1,[],"one"),Dr=Bi(()=>!0,[],"true"),Fo=Bi(()=>!1,[],"false");function IV(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const p8=0,aC=1,sC=2,m8=3,y8=4;function oC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:IV,i=e||p8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=aC&&n(t||"error","ERROR",arguments),this},warn(){return i>=sC&&n(t||"warn","WARN",arguments),this},info(){return i>=m8&&n(t||"log","INFO",arguments),this},debug(){return i>=y8&&n(t||"log","DEBUG",arguments),this}}}var re=Array.isArray;function ve(e){return e===Object(e)}const DN=e=>e!=="__proto__";function bd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=PV(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;xd(i,a,r[a],s)}return i},{})}function xd(e,t,n,i){if(!DN(t))return;let r,a;if(ve(n)&&!re(n)){a=ve(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?xd(a,r,n[r]):DN(r)&&(a[r]=n[r])}else e[t]=n}function PV(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Je(e){return e[e.length-1]}function Qn(e){return e==null||e===""?null:+e}const v8=e=>t=>e*Math.exp(t),b8=e=>t=>Math.log(e*t),x8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),S8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,V1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function $v(e,t,n,i){const r=n(e[0]),a=n(Je(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function E8(e,t){return $v(e,t,Qn,ni)}function _8(e,t){var n=Math.sign(e[0]);return $v(e,t,b8(n),v8(n))}function w8(e,t,n){return $v(e,t,V1(n),V1(1/n))}function A8(e,t,n){return $v(e,t,x8(n),S8(n))}function Tv(e,t,n,i,r){const a=i(e[0]),s=i(Je(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function lC(e,t,n){return Tv(e,t,n,Qn,ni)}function uC(e,t,n){const i=Math.sign(e[0]);return Tv(e,t,n,b8(i),v8(i))}function W1(e,t,n,i){return Tv(e,t,n,V1(i),V1(1/i))}function cC(e,t,n,i){return Tv(e,t,n,x8(i),S8(i))}function C8(e){return 1+~~(new Date(e).getMonth()/3)}function M8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function xe(e){return e!=null?re(e)?e:[e]:[]}function $8(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function je(e){return typeof e=="function"}const jV="descending";function fC(e,t,n){n=n||{},t=xe(t)||[];const i=[],r=[],a={},s=n.comparator||qV;return xe(e).forEach((o,u)=>{o!=null&&(i.push(t[u]===jV?-1:1),r.push(o=je(o)?o:kr(o,null,n)),(Kn(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Bi(s(r,i),Object.keys(a))}const Sd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),qV=(e,t)=>e.length===1?HV(e[0],t[0]):GV(e,t,e.length),HV=(e,t)=>function(n,i){return Sd(e(n),e(i))*t},GV=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Sd(a(i),a(r));return s*t[o]});function ii(e){return je(e)?e:()=>e}function dC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Pe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function qa(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function T8(e,t){const n=e.length;let i=-1,r,a,s,o,u;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}return[o,u]}function _e(e,t){return Object.hasOwn(e,t)}const Fm={};function Ed(e){let t={},n;function i(a){return _e(t,a)&&t[a]!==Fm}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===Fm&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Fm),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const u=t[o];u!==Fm&&(!n||!n(u))&&(a[o]=u,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function k8(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],u=Je(e),f;u<o&&(f=o,o=u,u=f),f=Math.abs(t-o);const d=Math.abs(u-t);return f<d&&f<=s?i:d<=s?r:a}function ge(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Pe(i,n)}function xf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Sl(e){return typeof e=="boolean"}function el(e){return Object.prototype.toString.call(e)==="[object Date]"}function D8(e){return e&&je(e[Symbol.iterator])}function st(e){return typeof e=="number"}function hC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ye(e){return typeof e=="string"}function gC(e,t,n){e&&(e=t?xe(e).map(o=>o.replace(/\\(.)/g,"$1")):xe(e));const i=e&&e.length,r=n&&n.get||g8,a=o=>r(t?[o]:Ka(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(u){return""+o(u)}}else{const o=e.map(a);s=function(u){let f=""+o[0](u),d=0;for(;++d<i;)f+="|"+o[d](u);return f}}return Bi(s,e,"key")}function O8(e,t){const n=e[0],i=Je(e),r=+t;return r?r===1?i:n+r*(i-n):n}const YV=1e4;function R8(e){e=+e||YV;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>_e(t,s)||_e(n,s),get:s=>_e(t,s)?t[s]:_e(n,s)?a(s,n[s]):void 0,set:(s,o)=>_e(t,s)?t[s]=o:a(s,o)}}function N8(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,u=0,f=0;for(;o<r&&u<a;++f)s[f]=e(t[o],n[u])>0?n[u++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;u<a;++u,++f)s[f]=n[u];return s}function pg(e,t){let n="";for(;--t>=0;)n+=e;return n}function z8(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?pg(r,s)+a:i==="center"?pg(r,~~(s/2))+a+pg(r,Math.ceil(s/2)):a+pg(r,s)}function kp(e){return e&&Je(e)-e[0]||0}function he(e){return re(e)?"["+e.map(he)+"]":ve(e)||ye(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function pC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const XV=e=>st(e)||el(e)?e:Date.parse(e);function mC(e,t){return t=t||XV,e==null||e===""?null:t(e)}function yC(e){return e==null||e===""?null:e+""}function aa(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function F8(e,t,n,i){const r=i??"…",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Bo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var ON={},KS={},JS=34,Hh=10,eE=13;function L8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function VV(e,t){var n=L8(e);return function(i,r){return t(n(i),r,e)}}function RN(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Mi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function WV(e){return e<0?"-"+Mi(-e,6):e>9999?"+"+Mi(e,6):Mi(e,4)}function QV(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":WV(e.getUTCFullYear())+"-"+Mi(e.getUTCMonth()+1,2)+"-"+Mi(e.getUTCDate(),2)+(r?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"."+Mi(r,3)+"Z":i?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"Z":n||t?"T"+Mi(t,2)+":"+Mi(n,2)+"Z":"")}function ZV(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,_){if(y)return y(S,_-1);v=S,y=p?VV(S,p):L8(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,_,w=v<=0,A=!1;h.charCodeAt(v-1)===Hh&&--v,h.charCodeAt(v-1)===eE&&--v;function C(){if(w)return KS;if(A)return A=!1,ON;var k,T=b,O;if(h.charCodeAt(T)===JS){for(;b++<v&&h.charCodeAt(b)!==JS||h.charCodeAt(++b)===JS;);return(k=b)>=v?w=!0:(O=h.charCodeAt(b++))===Hh?A=!0:O===eE&&(A=!0,h.charCodeAt(b)===Hh&&++b),h.slice(T+1,k-1).replace(/""/g,'"')}for(;b<v;){if((O=h.charCodeAt(k=b++))===Hh)A=!0;else if(O===eE)A=!0,h.charCodeAt(b)===Hh&&++b;else if(O!==n)continue;return h.slice(T,k)}return w=!0,h.slice(T,v)}for(;(_=C())!==KS;){for(var M=[];_!==ON&&_!==KS;)M.push(_),_=C();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=RN(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=RN(h)),a(h,p).join(`
`)}function u(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?QV(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:u,formatRow:f,formatValue:d}}function KV(e){return e}function JV(e){if(e==null)return KV;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,u){u||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function eW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function tW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return NN(e,n)})}:NN(e,t)}function NN(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=U8(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function U8(e,t){var n=JV(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&eW(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function u(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=u(d.arcs);break;case"MultiPolygon":p=d.arcs.map(u);break;default:return null}return{type:h,coordinates:p}}return f(t)}function nW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function u(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return u(r,i),u(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function iW(e){return U8(e,rW.apply(this,arguments))}function rW(e,t,n){var i,r,a;if(arguments.length>1)i=aW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:nW(e,i)}}function aW(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function u(h){h.forEach(o)}function f(h){h.forEach(u)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":u(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function Ps(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _d(e){let t,n,i;e.length!==2?(t=Ps,n=(o,u)=>Ps(e(o),u),i=(o,u)=>e(o)-u):(t=e===Ps||e===sW?e:oW,n=e,i=e);function r(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<0?f=h+1:d=h}while(f<d)}return f}function a(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,u,f=0,d=o.length){const h=r(o,u,f,d-1);return h>f&&i(o[h-1],u)>-i(o[h],u)?h-1:h}return{left:r,center:s,right:a}}function oW(){return 0}function B8(e){return e===null?NaN:+e}function*lW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const I8=_d(Ps),sl=I8.right,uW=I8.left;_d(B8).center;function cW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function fW(e,t){const n=cW(e,t);return n&&Math.sqrt(n)}class pi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class zN extends Map{constructor(t,n=q8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(q_(this,t))}has(t){return super.has(q_(this,t))}set(t,n){return super.set(P8(this,t),n)}delete(t){return super.delete(j8(this,t))}}class Q1 extends Set{constructor(t,n=q8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(q_(this,t))}add(t){return super.add(P8(this,t))}delete(t){return super.delete(j8(this,t))}}function q_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function P8({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function j8({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function q8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dW(e,t){return Array.from(t,n=>e[n])}function hW(e=Ps){if(e===Ps)return H8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function H8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gW=Math.sqrt(50),pW=Math.sqrt(10),mW=Math.sqrt(2);function Z1(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=gW?10:a>=pW?5:a>=mW?2:1;let o,u,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),u=Math.round(t*f),o/f<e&&++o,u/f>t&&--u,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),u=Math.round(t/f),o*f<e&&++o,u*f>t&&--u),u<o&&.5<=n&&n<2?Z1(e,t,n*2):[o,u,f]}function H_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Z1(t,e,n):Z1(e,t,n);if(!(a>=r))return[];const o=a-r+1,u=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)u[f]=(a-f)/-s;else for(let f=0;f<o;++f)u[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)u[f]=(r+f)/-s;else for(let f=0;f<o;++f)u[f]=(r+f)*s;return u}function G_(e,t,n){return t=+t,e=+e,n=+n,Z1(e,t,n)[2]}function ol(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?G_(t,e,n):G_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function _u(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Y_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function G8(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?H8:hW(r);i>n;){if(i-n>600){const u=i-n+1,f=t-n+1,d=Math.log(u),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(u-h)/u)*(f-u/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/u+p)),v=Math.min(i,Math.floor(t+(u-f)*h/u+p));G8(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Gh(e,n,t),r(e[i],a)>0&&Gh(e,n,i);s<o;){for(Gh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Gh(e,n,o):(++o,Gh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Gh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function X_(e,t,n){if(e=Float64Array.from(lW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Y_(e);if(t>=1)return _u(e);var i,r=(i-1)*t,a=Math.floor(r),s=_u(G8(e,a).subarray(0,a+1)),o=Y_(e.subarray(a+1));return s+(o-s)*(r-a)}}function Y8(e,t,n=B8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function yW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function X8(e,t){return X_(e,.5,t)}function*vW(e){for(const t of e)yield*t}function V8(e){return Array.from(vW(e))}function er(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function W8(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function bW(e,...t){e=new Q1(e),t=t.map(xW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function xW(e){return e instanceof Q1?e:new Q1(e)}function SW(...e){const t=new Q1;for(const n of e)for(const i of n)t.add(i);return t}function EW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function K1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Lf(e){return e=K1(Math.abs(e)),e?e[1]:NaN}function _W(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],u=0;r>0&&o>0&&(u+o+1>i&&(o=Math.max(1,i-u)),a.push(n.substring(r-=o,r+o)),!((u+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function wW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var AW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ru(e){if(!(t=AW.exec(e)))throw new Error("invalid format: "+e);var t;return new vC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ru.prototype=vC.prototype;function vC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var Q8;function MW(e,t){var n=K1(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Q8=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+K1(e,Math.max(0,t+a-1))[0]}function FN(e,t){var n=K1(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const LN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:EW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>FN(e*100,t),r:FN,s:MW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function UN(e){return e}var BN=Array.prototype.map,IN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Z8(e){var t=e.grouping===void 0||e.thousands===void 0?UN:_W(BN.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?UN:wW(BN.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Ru(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,_=h.width,w=h.comma,A=h.precision,C=h.trim,M=h.type;M==="n"?(w=!0,M="g"):LN[M]||(A===void 0&&(A=12),C=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?s:"",O=LN[M],N=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(L){var G=k,H=T,I,F,R;if(M==="c")H=O(L)+H,L="";else{L=+L;var P=L<0||1/L<0;if(L=isNaN(L)?u:O(Math.abs(L),A),C&&(L=CW(L)),P&&+L==0&&v!=="+"&&(P=!1),G=(P?v==="("?v:o:v==="-"||v==="("?"":v)+G,H=(M==="s"?IN[8+Q8/3]:"")+H+(P&&v==="("?")":""),N){for(I=-1,F=L.length;++I<F;)if(R=L.charCodeAt(I),48>R||R>57){H=(R===46?r+L.slice(I+1):L.slice(I))+H,L=L.slice(0,I);break}}}w&&!S&&(L=t(L,1/0));var X=G.length+L.length+H.length,K=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(L=t(K+L,K.length?_-H.length:1/0),K=""),y){case"<":L=G+L+H+K;break;case"=":L=G+K+L+H;break;case"^":L=K.slice(0,X=K.length>>1)+G+L+H+K.slice(X);break;default:L=K+G+L+H;break}return a(L)}return B.toString=function(){return h+""},B}function d(h,p){var y=f((h=Ru(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Lf(p)/3)))*3,b=Math.pow(10,-v),S=IN[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var Lm,kv,bC;$W({thousands:",",grouping:[3],currency:["$",""]});function $W(e){return Lm=Z8(e),kv=Lm.format,bC=Lm.formatPrefix,Lm}function K8(e){return Math.max(0,-Lf(Math.abs(e)))}function J8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lf(t)/3)))*3-Lf(Math.abs(e)))}function e9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lf(t)-Lf(e))+1}const tE=new Date,nE=new Date;function dn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const u=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return u;let f;do u.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return u},r.filter=a=>dn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(tE.setTime(+a),nE.setTime(+s),e(tE),e(nE),Math.floor(n(tE,nE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Uf=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uf);Uf.range;const zs=1e3,wr=zs*60,Fs=wr*60,Ws=Fs*24,xC=Ws*7,PN=Ws*30,iE=Ws*365,Ls=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCSeconds());Ls.range;const Dv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getMinutes());Dv.range;const Ov=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCMinutes());Ov.range;const Rv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs-e.getMinutes()*wr)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getHours());Rv.range;const Nv=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getUTCHours());Nv.range;const js=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wr)/Ws,e=>e.getDate()-1);js.range;const tl=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>e.getUTCDate()-1);tl.range;const t9=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>Math.floor(e/Ws));t9.range;function tc(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wr)/xC)}const wd=tc(0),J1=tc(1),TW=tc(2),kW=tc(3),Bf=tc(4),DW=tc(5),OW=tc(6);wd.range;J1.range;TW.range;kW.range;Bf.range;DW.range;OW.range;function nc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/xC)}const Ad=nc(0),ey=nc(1),RW=nc(2),NW=nc(3),If=nc(4),zW=nc(5),FW=nc(6);Ad.range;ey.range;RW.range;NW.range;If.range;zW.range;FW.range;const Kg=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Kg.range;const Jg=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jg.range;const Ha=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ha.range;const Ga=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ga.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ga.range;function n9(e,t,n,i,r,a){const s=[[Ls,1,zs],[Ls,5,5*zs],[Ls,15,15*zs],[Ls,30,30*zs],[a,1,wr],[a,5,5*wr],[a,15,15*wr],[a,30,30*wr],[r,1,Fs],[r,3,3*Fs],[r,6,6*Fs],[r,12,12*Fs],[i,1,Ws],[i,2,2*Ws],[n,1,xC],[t,1,PN],[t,3,3*PN],[e,1,iE]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:u(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function u(f,d,h){const p=Math.abs(d-f)/h,y=_d(([,,S])=>S).right(s,p);if(y===s.length)return e.every(ol(f/iE,d/iE,h));if(y===0)return Uf.every(Math.max(ol(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,u]}const[LW,UW]=n9(Ga,Jg,Ad,t9,Nv,Ov),[BW,IW]=n9(Ha,Kg,wd,js,Rv,Dv),Un="year",Ri="quarter",Jn="month",un="week",Ni="date",Wn="day",Ya="dayofyear",or="hours",lr="minutes",Or="seconds",sa="milliseconds",SC=[Un,Ri,Jn,un,Ni,Wn,Ya,or,lr,Or,sa],rE=SC.reduce((e,t,n)=>(e[t]=1+n,e),{});function EC(e){const t=xe(e).slice(),n={};return t.length||te("Missing time unit."),t.forEach(r=>{_e(rE,r)?n[r]=1:te(`Invalid time unit: ${r}.`)}),(n[un]||n[Wn]?1:0)+(n[Ri]||n[Jn]||n[Ni]?1:0)+(n[Ya]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((r,a)=>rE[r]-rE[a]),t}const PW={[Un]:"%Y ",[Ri]:"Q%q ",[Jn]:"%b ",[Ni]:"%d ",[un]:"W%U ",[Wn]:"%a ",[Ya]:"%j ",[or]:"%H:00",[lr]:"00:%M",[Or]:":%S",[sa]:".%L",[`${Un}-${Jn}`]:"%Y-%m ",[`${Un}-${Jn}-${Ni}`]:"%Y-%m-%d ",[`${or}-${lr}`]:"%H:%M"};function i9(e,t){const n=Pe({},PW,t),i=EC(e),r=i.length;let a="",s=0,o,u;for(s=0;s<r;)for(o=i.length;o>s;--o)if(u=i.slice(s,o).join("-"),n[u]!=null){a+=n[u],s=o;break}return a.trim()}const gu=new Date;function _C(e){return gu.setFullYear(e),gu.setMonth(0),gu.setDate(1),gu.setHours(0,0,0,0),gu}function r9(e){return s9(new Date(e))}function a9(e){return V_(new Date(e))}function s9(e){return js.count(_C(e.getFullYear())-1,e)}function V_(e){return wd.count(_C(e.getFullYear())-1,e)}function W_(e){return _C(e).getDay()}function jW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function o9(e){return u9(new Date(e))}function l9(e){return Q_(new Date(e))}function u9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tl.count(t-1,e)}function Q_(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ad.count(t-1,e)}function Z_(e){return gu.setTime(Date.UTC(e,0,1)),gu.getUTCDay()}function qW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function c9(e,t,n,i,r){const a=t||1,s=Je(e),o=(_,w,A)=>(A=A||_,HW(n[A],i[A],_===s&&a,w)),u=new Date,f=aa(e),d=f[Un]?o(Un):ii(2012),h=f[Jn]?o(Jn):f[Ri]?o(Ri):Ho,p=f[un]&&f[Wn]?o(Wn,1,un+Wn):f[un]?o(un,1):f[Wn]?o(Wn,1):f[Ni]?o(Ni,1):f[Ya]?o(Ya,1):vd,y=f[or]?o(or):Ho,v=f[lr]?o(lr):Ho,b=f[Or]?o(Or):Ho,S=f[sa]?o(sa):Ho;return function(_){u.setTime(+_);const w=d(u);return r(w,h(u),p(u,w),y(u),v(u),b(u),S(u))}}function HW(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Pf(e,t,n){return t+e*7-(n+6)%7}const GW={[Un]:e=>e.getFullYear(),[Ri]:e=>Math.floor(e.getMonth()/3),[Jn]:e=>e.getMonth(),[Ni]:e=>e.getDate(),[or]:e=>e.getHours(),[lr]:e=>e.getMinutes(),[Or]:e=>e.getSeconds(),[sa]:e=>e.getMilliseconds(),[Ya]:e=>s9(e),[un]:e=>V_(e),[un+Wn]:(e,t)=>Pf(V_(e),e.getDay(),W_(t)),[Wn]:(e,t)=>Pf(1,e.getDay(),W_(t))},YW={[Ri]:e=>3*e,[un]:(e,t)=>Pf(e,0,W_(t))};function f9(e,t){return c9(e,t||1,GW,YW,jW)}const XW={[Un]:e=>e.getUTCFullYear(),[Ri]:e=>Math.floor(e.getUTCMonth()/3),[Jn]:e=>e.getUTCMonth(),[Ni]:e=>e.getUTCDate(),[or]:e=>e.getUTCHours(),[lr]:e=>e.getUTCMinutes(),[Or]:e=>e.getUTCSeconds(),[sa]:e=>e.getUTCMilliseconds(),[Ya]:e=>u9(e),[un]:e=>Q_(e),[Wn]:(e,t)=>Pf(1,e.getUTCDay(),Z_(t)),[un+Wn]:(e,t)=>Pf(Q_(e),e.getUTCDay(),Z_(t))},VW={[Ri]:e=>3*e,[un]:(e,t)=>Pf(e,0,Z_(t))};function d9(e,t){return c9(e,t||1,XW,VW,qW)}const WW={[Un]:Ha,[Ri]:Kg.every(3),[Jn]:Kg,[un]:wd,[Ni]:js,[Wn]:js,[Ya]:js,[or]:Rv,[lr]:Dv,[Or]:Ls,[sa]:Uf},QW={[Un]:Ga,[Ri]:Jg.every(3),[Jn]:Jg,[un]:Ad,[Ni]:tl,[Wn]:tl,[Ya]:tl,[or]:Nv,[lr]:Ov,[Or]:Ls,[sa]:Uf};function Cd(e){return WW[e]}function Md(e){return QW[e]}function h9(e,t,n){return e?e.offset(t,n):void 0}function g9(e,t,n){return h9(Cd(e),t,n)}function p9(e,t,n){return h9(Md(e),t,n)}function m9(e,t,n,i){return e?e.range(t,n,i):void 0}function y9(e,t,n,i){return m9(Cd(e),t,n,i)}function v9(e,t,n,i){return m9(Md(e),t,n,i)}const mg=1e3,yg=mg*60,vg=yg*60,zv=vg*24,ZW=zv*7,jN=zv*30,K_=zv*365,b9=[Un,Jn,Ni,or,lr,Or,sa],bg=b9.slice(0,-1),xg=bg.slice(0,-1),Sg=xg.slice(0,-1),KW=Sg.slice(0,-1),JW=[Un,un],qN=[Un,Jn],x9=[Un],Yh=[[bg,1,mg],[bg,5,5*mg],[bg,15,15*mg],[bg,30,30*mg],[xg,1,yg],[xg,5,5*yg],[xg,15,15*yg],[xg,30,30*yg],[Sg,1,vg],[Sg,3,3*vg],[Sg,6,6*vg],[Sg,12,12*vg],[KW,1,zv],[JW,1,ZW],[qN,1,jN],[qN,3,3*jN],[x9,1,K_]];function S9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(kp(t))/n;let r=_d(o=>o[2]).right(Yh,i),a,s;return r===Yh.length?(a=x9,s=ol(t[0]/K_,t[1]/K_,n)):r?(r=Yh[i/Yh[r-1][2]<Yh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=b9,s=Math.max(ol(t[0],t[1],n),1)),{units:a,step:s}}function aE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function E9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,u=e.shortMonths,f=Vh(r),d=Wh(r),h=Vh(a),p=Wh(a),y=Vh(s),v=Wh(s),b=Vh(o),S=Wh(o),_=Vh(u),w=Wh(u),A={a:P,A:X,b:K,B:z,c:null,d:WN,e:WN,f:EQ,g:OQ,G:NQ,H:bQ,I:xQ,j:SQ,L:_9,m:_Q,M:wQ,p:W,q:ne,Q:KN,s:JN,S:AQ,u:CQ,U:MQ,V:$Q,w:TQ,W:kQ,x:null,X:null,y:DQ,Y:RQ,Z:zQ,"%":ZN},C={a:se,A:me,b:Se,B:Ce,c:null,d:QN,e:QN,f:BQ,g:WQ,G:ZQ,H:FQ,I:LQ,j:UQ,L:A9,m:IQ,M:PQ,p:Ht,q:nt,Q:KN,s:JN,S:jQ,u:qQ,U:HQ,V:GQ,w:YQ,W:XQ,x:null,X:null,y:VQ,Y:QQ,Z:KQ,"%":ZN},M={a:B,A:L,b:G,B:H,c:I,d:XN,e:XN,f:pQ,g:YN,G:GN,H:VN,I:VN,j:fQ,L:gQ,m:cQ,M:dQ,p:N,q:uQ,Q:yQ,s:vQ,S:hQ,u:rQ,U:aQ,V:sQ,w:iQ,W:oQ,x:F,X:R,y:YN,Y:GN,Z:lQ,"%":mQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),C.x=k(n,C),C.X=k(i,C),C.c=k(t,C);function k(be,Ue){return function(Ie){var ce=[],Gt=-1,it=0,Kt=be.length,gn,Jt,S0;for(Ie instanceof Date||(Ie=new Date(+Ie));++Gt<Kt;)be.charCodeAt(Gt)===37&&(ce.push(be.slice(it,Gt)),(Jt=HN[gn=be.charAt(++Gt)])!=null?gn=be.charAt(++Gt):Jt=gn==="e"?" ":"0",(S0=Ue[gn])&&(gn=S0(Ie,Jt)),ce.push(gn),it=Gt+1);return ce.push(be.slice(it,Gt)),ce.join("")}}function T(be,Ue){return function(Ie){var ce=Xh(1900,void 0,1),Gt=O(ce,be,Ie+="",0),it,Kt;if(Gt!=Ie.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Ue&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(it=sE(Xh(ce.y,0,1)),Kt=it.getUTCDay(),it=Kt>4||Kt===0?ey.ceil(it):ey(it),it=tl.offset(it,(ce.V-1)*7),ce.y=it.getUTCFullYear(),ce.m=it.getUTCMonth(),ce.d=it.getUTCDate()+(ce.w+6)%7):(it=aE(Xh(ce.y,0,1)),Kt=it.getDay(),it=Kt>4||Kt===0?J1.ceil(it):J1(it),it=js.offset(it,(ce.V-1)*7),ce.y=it.getFullYear(),ce.m=it.getMonth(),ce.d=it.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Kt="Z"in ce?sE(Xh(ce.y,0,1)).getUTCDay():aE(Xh(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Kt+5)%7:ce.w+ce.U*7-(Kt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,sE(ce)):aE(ce)}}function O(be,Ue,Ie,ce){for(var Gt=0,it=Ue.length,Kt=Ie.length,gn,Jt;Gt<it;){if(ce>=Kt)return-1;if(gn=Ue.charCodeAt(Gt++),gn===37){if(gn=Ue.charAt(Gt++),Jt=M[gn in HN?Ue.charAt(Gt++):gn],!Jt||(ce=Jt(be,Ie,ce))<0)return-1}else if(gn!=Ie.charCodeAt(ce++))return-1}return ce}function N(be,Ue,Ie){var ce=f.exec(Ue.slice(Ie));return ce?(be.p=d.get(ce[0].toLowerCase()),Ie+ce[0].length):-1}function B(be,Ue,Ie){var ce=y.exec(Ue.slice(Ie));return ce?(be.w=v.get(ce[0].toLowerCase()),Ie+ce[0].length):-1}function L(be,Ue,Ie){var ce=h.exec(Ue.slice(Ie));return ce?(be.w=p.get(ce[0].toLowerCase()),Ie+ce[0].length):-1}function G(be,Ue,Ie){var ce=_.exec(Ue.slice(Ie));return ce?(be.m=w.get(ce[0].toLowerCase()),Ie+ce[0].length):-1}function H(be,Ue,Ie){var ce=b.exec(Ue.slice(Ie));return ce?(be.m=S.get(ce[0].toLowerCase()),Ie+ce[0].length):-1}function I(be,Ue,Ie){return O(be,t,Ue,Ie)}function F(be,Ue,Ie){return O(be,n,Ue,Ie)}function R(be,Ue,Ie){return O(be,i,Ue,Ie)}function P(be){return s[be.getDay()]}function X(be){return a[be.getDay()]}function K(be){return u[be.getMonth()]}function z(be){return o[be.getMonth()]}function W(be){return r[+(be.getHours()>=12)]}function ne(be){return 1+~~(be.getMonth()/3)}function se(be){return s[be.getUTCDay()]}function me(be){return a[be.getUTCDay()]}function Se(be){return u[be.getUTCMonth()]}function Ce(be){return o[be.getUTCMonth()]}function Ht(be){return r[+(be.getUTCHours()>=12)]}function nt(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Ue=k(be+="",A);return Ue.toString=function(){return be},Ue},parse:function(be){var Ue=T(be+="",!1);return Ue.toString=function(){return be},Ue},utcFormat:function(be){var Ue=k(be+="",C);return Ue.toString=function(){return be},Ue},utcParse:function(be){var Ue=T(be+="",!0);return Ue.toString=function(){return be},Ue}}}var HN={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,eQ=/^%/,tQ=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function nQ(e){return e.replace(tQ,"\\$&")}function Vh(e){return new RegExp("^(?:"+e.map(nQ).join("|")+")","i")}function Wh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function iQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function rQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function aQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function sQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function oQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function GN(e,t,n){var i=Mn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function YN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function lQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function uQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function cQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function XN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function fQ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function VN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function dQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function hQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function gQ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function pQ(e,t,n){var i=Mn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function mQ(e,t,n){var i=eQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function yQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function vQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function WN(e,t){return ot(e.getDate(),t,2)}function bQ(e,t){return ot(e.getHours(),t,2)}function xQ(e,t){return ot(e.getHours()%12||12,t,2)}function SQ(e,t){return ot(1+js.count(Ha(e),e),t,3)}function _9(e,t){return ot(e.getMilliseconds(),t,3)}function EQ(e,t){return _9(e,t)+"000"}function _Q(e,t){return ot(e.getMonth()+1,t,2)}function wQ(e,t){return ot(e.getMinutes(),t,2)}function AQ(e,t){return ot(e.getSeconds(),t,2)}function CQ(e){var t=e.getDay();return t===0?7:t}function MQ(e,t){return ot(wd.count(Ha(e)-1,e),t,2)}function w9(e){var t=e.getDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function $Q(e,t){return e=w9(e),ot(Bf.count(Ha(e),e)+(Ha(e).getDay()===4),t,2)}function TQ(e){return e.getDay()}function kQ(e,t){return ot(J1.count(Ha(e)-1,e),t,2)}function DQ(e,t){return ot(e.getFullYear()%100,t,2)}function OQ(e,t){return e=w9(e),ot(e.getFullYear()%100,t,2)}function RQ(e,t){return ot(e.getFullYear()%1e4,t,4)}function NQ(e,t){var n=e.getDay();return e=n>=4||n===0?Bf(e):Bf.ceil(e),ot(e.getFullYear()%1e4,t,4)}function zQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function QN(e,t){return ot(e.getUTCDate(),t,2)}function FQ(e,t){return ot(e.getUTCHours(),t,2)}function LQ(e,t){return ot(e.getUTCHours()%12||12,t,2)}function UQ(e,t){return ot(1+tl.count(Ga(e),e),t,3)}function A9(e,t){return ot(e.getUTCMilliseconds(),t,3)}function BQ(e,t){return A9(e,t)+"000"}function IQ(e,t){return ot(e.getUTCMonth()+1,t,2)}function PQ(e,t){return ot(e.getUTCMinutes(),t,2)}function jQ(e,t){return ot(e.getUTCSeconds(),t,2)}function qQ(e){var t=e.getUTCDay();return t===0?7:t}function HQ(e,t){return ot(Ad.count(Ga(e)-1,e),t,2)}function C9(e){var t=e.getUTCDay();return t>=4||t===0?If(e):If.ceil(e)}function GQ(e,t){return e=C9(e),ot(If.count(Ga(e),e)+(Ga(e).getUTCDay()===4),t,2)}function YQ(e){return e.getUTCDay()}function XQ(e,t){return ot(ey.count(Ga(e)-1,e),t,2)}function VQ(e,t){return ot(e.getUTCFullYear()%100,t,2)}function WQ(e,t){return e=C9(e),ot(e.getUTCFullYear()%100,t,2)}function QQ(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function ZQ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?If(e):If.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function KQ(){return"+0000"}function ZN(){return"%"}function KN(e){return+e}function JN(e){return Math.floor(+e/1e3)}var af,wC,M9,AC,$9;JQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JQ(e){return af=E9(e),wC=af.format,M9=af.parse,AC=af.utcFormat,$9=af.utcParse,af}function Eg(e){const t={};return n=>t[n]||(t[n]=e(n))}function eZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=tZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function tZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function T9(e){const t=Eg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Ru(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return eZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Ru(s??",f");const o=ol(i,r,a),u=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=J8(o,u))||(s.precision=f),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(f=e9(o,u))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=K8(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let J_;k9();function k9(){return J_=T9({format:kv,formatPrefix:bC})}function D9(e){return T9(Z8(e))}function ty(e){return arguments.length?J_=D9(e):J_}function e5(e,t,n){n=n||{},ve(n)||te(`Invalid time multi-format specifier: ${n}`);const i=t(Or),r=t(lr),a=t(or),s=t(Ni),o=t(un),u=t(Jn),f=t(Ri),d=t(Un),h=e(n[sa]||".%L"),p=e(n[Or]||":%S"),y=e(n[lr]||"%I:%M"),v=e(n[or]||"%I %p"),b=e(n[Ni]||n[Wn]||"%a %d"),S=e(n[un]||"%b %d"),_=e(n[Jn]||"%B"),w=e(n[Ri]||"%B"),A=e(n[Un]||"%Y");return C=>(i(C)<C?h:r(C)<C?p:a(C)<C?y:s(C)<C?v:u(C)<C?o(C)<C?b:S:d(C)<C?f(C)<C?_:w:A)(C)}function O9(e){const t=Eg(e.format),n=Eg(e.utcFormat);return{timeFormat:i=>ye(i)?t(i):e5(t,Cd,i),utcFormat:i=>ye(i)?n(i):e5(n,Md,i),timeParse:Eg(e.parse),utcParse:Eg(e.utcParse)}}let ew;R9();function R9(){return ew=O9({format:wC,parse:M9,utcFormat:AC,utcParse:$9})}function N9(e){return O9(E9(e))}function ep(e){return arguments.length?ew=N9(e):ew}const tw=(e,t)=>Pe({},e,t);function z9(e,t){const n=e?D9(e):ty(),i=t?N9(t):ep();return tw(n,i)}function CC(e,t){const n=arguments.length;return n&&n!==2&&te("defaultLocale expects either zero or two arguments."),n?tw(ty(e),ep(t)):tw(ty(),ep())}function nZ(){return k9(),R9(),CC()}const iZ=/^(data:|([A-Za-z]+:)?\/\/)/,rZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,aZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,t5="file://";function sZ(e,t){return n=>({options:n||{},sanitize:lZ,load:oZ,fileAccess:!1,file:uZ(),http:fZ(e)})}async function oZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function lZ(e,t){t=Pe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=rZ.test(e.replace(aZ,""));(e==null||typeof e!="string"||!o)&&te("Sanitize failure, invalid URI: "+he(e));const u=iZ.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(t5))||t.mode==="file"||t.mode!=="http"&&!u&&n,r?e=e.slice(t5.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function uZ(e){return cZ}async function cZ(){te("No file system access.")}function fZ(e){return e?async function(t,n){const i=Pe({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?je(a[r])?a[r]():a.text():te(a.status+""+a.statusText)}:dZ}async function dZ(){te("No HTTP fetch method available.")}const hZ=e=>e!=null&&e===e,gZ=e=>e==="true"||e==="false"||e===!0||e===!1,pZ=e=>!Number.isNaN(Date.parse(e)),F9=e=>!Number.isNaN(+e)&&!(e instanceof Date),mZ=e=>F9(e)&&Number.isInteger(+e),nw={boolean:pC,integer:Qn,number:Qn,date:mC,string:yC,unknown:ni},Um=[gZ,mZ,F9,pZ],yZ=["boolean","integer","number","date"];function L9(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Um.length,r=Um.map((a,s)=>s+1);for(let a=0,s=0,o,u;a<n;++a)for(u=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&hZ(u)&&!Um[o](u)&&(r[o]=0,++s,s===Um.length))return"string";return yZ[r.reduce((a,s)=>a===0?s:a,0)-1]}function U9(e,t){return t.reduce((n,i)=>(n[i]=L9(e,i),n),{})}function n5(e){const t=function(n,i){const r={delimiter:e};return MC(n,i?Pe(i,r):r)};return t.responseType="text",t}function MC(e,t){return t.header&&(e=t.header.map(he).join(t.delimiter)+`
`+e),ZV(t.delimiter).parse(e+"")}MC.responseType="text";function vZ(e){return typeof Buffer=="function"&&je(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function $C(e,t){const n=t&&t.property?kr(t.property):ni;return ve(e)&&!vZ(e)?bZ(n(e),t):n(JSON.parse(e))}$C.responseType="json";function bZ(e,t){return!re(e)&&D8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const xZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function B9(e,t){let n,i,r,a;return e=$C(e,t),t&&t.feature?(n=tW,r=t.feature):t&&t.mesh?(n=iW,r=t.mesh,a=xZ[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):te("Invalid TopoJSON object: "+r),i&&i.features||[i]}B9.responseType="json";const E1={dsv:MC,csv:n5(","),tsv:n5("	"),json:$C,topojson:B9};function TC(e,t){return arguments.length>1?(E1[e]=t,this):_e(E1,e)?E1[e]:null}function I9(e){const t=TC(e);return t&&t.responseType||"text"}function P9(e,t,n,i){t=t||{};const r=TC(t.type||"json");return r||te("Unknown data format type: "+t.type),e=r(e,t),t.parse&&SZ(e,t.parse,n,i),_e(e,"columns")&&delete e.columns,e}function SZ(e,t,n,i){if(!e.length)return;const r=ep();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,u,f,d,h;t==="auto"&&(t=U9(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!nw[v])throw Error("Illegal format pattern: "+y+":"+v);return nw[v]});for(u=0,d=e.length,h=a.length;u<d;++u)for(s=e[u],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const Fv=sZ(typeof fetch<"u"&&fetch);function Lv(e){const t=e||ni,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function _1(e,t){try{await t(e)}catch(n){e.error(n)}}const j9=Symbol("vega_id");let EZ=1;function Uv(e){return!!(e&&ke(e))}function ke(e){return e[j9]}function q9(e,t){return e[j9]=t,e}function ct(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:q9(t,EZ++)}function kC(e){return Bv(e,ct({}))}function Bv(e,t){for(const n in e)t[n]=e[n];return t}function H9(e,t){return q9(t,ke(e))}function ic(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function G9(e){return e&&e.constructor===rc}function rc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:rc,insert(o){const u=xe(o),f=u.length;for(let d=0;d<f;++d)e.push(u[d]);return this},remove(o){const u=je(o)?i:t,f=xe(o),d=f.length;for(let h=0;h<d;++h)u.push(f[h]);return this},modify(o,u,f){const d={field:u,value:ii(f)};return je(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,u){return je(o)?r.push({filter:o,field:u}):n.push({tuple:o,field:u}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,u){const f={},d={};let h,p,y,v,b,S;for(h=0,p=u.length;h<p;++h)f[ke(u[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[ke(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],u.forEach(w=>{v(w)&&(f[ke(w)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=ke(b),f[S]?f[S]=1:o.add.push(ct(e[h]));for(h=0,p=u.length;h<p;++h)b=u[h],f[ke(b)]<0&&o.rem.push(b);function _(w,A,C){C?w[A]=C(w):o.encode=A,s||(d[ke(w)]=w)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=f[ke(b)],S>0&&(_(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,u.forEach(w=>{v(w)&&f[ke(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?u.filter(w=>f[ke(w)]>0):u.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const w1="_:mod:_";function Iv(){Object.defineProperty(this,w1,{writable:!0,value:{}})}Iv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[w1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=re(n)?1+n.length:-1),r},modified(e,t){const n=this[w1];if(arguments.length){if(re(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[w1]={},this}};let _Z=0;const wZ="pulse",AZ=new Iv,CZ=1,MZ=2;function wt(e,t,n,i){this.id=++_Z,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function i5(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}wt.prototype={targets(){return this._targets||(this._targets=Lv(Tp))},set(e){return this.value!==e?(this.value=e,1):0},skip:i5(CZ),modified:i5(MZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Iv,r=this._argops=this._argops||[],a=[];let s,o,u,f;const d=(h,p,y)=>{y instanceof wt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===wZ)xe(o).forEach(h=>{h instanceof wt?h!==this&&(h.targets().add(this),a.push(h)):te("Pulse parameters must be operator instances.")}),this.source=o;else if(re(o))for(i.set(s,-1,Array(u=o.length)),f=0;f<u;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||AZ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function $Z(e,t,n,i){let r=1,a;return e instanceof wt?a=e:e&&e.prototype instanceof wt?a=new e:je(e)?a=new wt(null,e):(r=0,a=new wt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function TZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let kZ=0;function Pv(e,t,n){this.id=++kZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Lo(e,t,n){return new Pv(e,t,n)}Pv.prototype={_filter:Dr,_apply:ni,targets(){return this._targets||(this._targets=Lv(Tp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Lo(e);return this.targets().add(t),t},apply(e){const t=Lo(null,e);return this.targets().add(t),t},merge(){const e=Lo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Lo();return this.targets().add(Lo(null,null,dC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Lo(null,null,()=>n=!0)),t.targets().add(Lo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Dr,this._targets=null}};function DZ(e,t,n,i){const r=this,a=Lo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=xe(e);const u=o.length;for(let f=0;f<u;++f)o[f].addEventListener(t,s);return a}function OZ(e,t){const n=this.locale();return P9(e,t,n.timeParse,n.utcParse)}function RZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function NZ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:I9(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function zZ(e,t,n){const i=this,r=i._pending||FZ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Dr).insert(a.data||[])),r.done(),a}function FZ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const LZ={skip:!0};function UZ(e,t,n,i,r){return(e instanceof wt?IZ:BZ)(this,e,t,n,i,r),this}function BZ(e,t,n,i,r,a){const s=Pe({},a,LZ);let o,u;je(n)||(n=ii(n)),i===void 0?o=f=>e.touch(n(f)):je(i)?(u=new wt(null,i,r,!1),o=f=>{u.evaluate(f);const d=n(f),h=u.value;G9(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function IZ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new wt(null,PZ(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function PZ(e,t){return t=je(t)?t:ii(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function jZ(e){e.rank=++this._rank}function qZ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&te("Cycle detected in dataflow graph.")}const ny={},Ta=1,Io=2,ks=4,HZ=Ta|Io,r5=Ta|ks,sf=Ta|Io|ks,a5=8,Qh=16,s5=32,o5=64;function nl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function oE(e,t){const n=[];return Bo(e,t,i=>n.push(i)),n}function l5(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function Bm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}nl.prototype={StopPropagation:ny,ADD:Ta,REM:Io,MOD:ks,ADD_REM:HZ,ADD_MOD:r5,ALL:sf,REFLOW:a5,SOURCE:Qh,NO_SOURCE:s5,NO_FIELDS:o5,fork(e){return new nl(this.dataflow).init(this,e)},clone(){const e=this.fork(sf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(sf|Qh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new nl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&o5)&&(n.fields=e.fields),t&Ta?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Io?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ks?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&s5?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||sf;return t&Ta&&this.add.length||t&Io&&this.rem.length||t&ks&&this.mod.length},reflow(e){if(e)return this.fork(sf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ks,l5(this,Ta))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return re(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?re(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ta&&(n.addF=Bm(n.addF,t)),e&Io&&(n.remF=Bm(n.remF,t)),e&ks&&(n.modF=Bm(n.modF,t)),e&Qh&&(n.srcF=Bm(n.srcF,t)),n},materialize(e){e=e||sf;const t=this;return e&Ta&&t.addF&&(t.add=oE(t.add,t.addF),t.addF=null),e&Io&&t.remF&&(t.rem=oE(t.rem,t.remF),t.remF=null),e&ks&&t.modF&&(t.mod=oE(t.mod,t.modF),t.modF=null),e&Qh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Qh)return Bo(n.source,n.srcF,i),n;e&Ta&&Bo(n.add,n.addF,i),e&Io&&Bo(n.rem,n.remF,i),e&ks&&Bo(n.mod,n.modF,i);const r=n.source;if(e&a5&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Bo(r,l5(n,r5),i):Bo(r,n.srcF,i))}return n}};function DC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const u in s.fields)o[u]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}ge(DC,nl,{fork(e){const t=new nl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?re(e)?e.some(i=>n[i]):n[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function GZ(e,t,n){const i=this,r=[];if(i._pulse)return Y9(i);if(i._pending&&await i._pending,t&&await _1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new nl(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Lv(Tp);let s=0,o,u,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}u=o.run(i._getPulse(o,e)),u.then?u=await u:u.async&&(r.push(u.async),u=ny),u!==ny&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await _1(i,d[h].callback)}return n&&await _1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function YZ(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function XZ(e,t,n){return this._pulse?Y9(this):(this.evaluate(e,t,n),this)}function VZ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function Y9(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function WZ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function QZ(e,t){const n=e.source,i=this._clock;return n&&re(n)?new DC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||ZZ(this._pulse,n&&n.pulse)}function ZZ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ny&&(e.source=t.source),e)}const OC={skip:!1,force:!1};function KZ(e,t){const n=t||OC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function JZ(e,t,n){const i=n||OC;return(e.set(t)||i.force)&&this.touch(e,i),this}function eK(e,t,n){this.touch(e,n||OC);const i=new nl(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function tK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),X9(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,nK(t,0,e)):i=n,i}}}function X9(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function nK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,X9(e,i,t,n)}function Mf(){this.logger(oC()),this.logLevel(aC),this._clock=0,this._rank=0,this._locale=CC();try{this._loader=Fv()}catch{}this._touched=Lv(Tp),this._input={},this._pulse=null,this._heap=tK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Zh(e){return function(){return this._log[e].apply(this,arguments)}}Mf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Zh("error"),warn:Zh("warn"),info:Zh("info"),debug:Zh("debug"),logLevel:Zh("level"),cleanThreshold:1e4,add:$Z,connect:TZ,rank:jZ,rerank:qZ,pulse:eK,touch:KZ,update:JZ,changeset:rc,ingest:RZ,parse:OZ,preload:zZ,request:NZ,events:DZ,on:UZ,evaluate:GZ,run:XZ,runAsync:YZ,runAfter:VZ,_enqueue:WZ,_getPulse:QZ};function J(e,t){wt.call(this,e,null,t)}ge(J,wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const jf={};function V9(e){const t=W9(e);return t&&t.Definition||null}function W9(e){return e=e&&e.toLowerCase(),_e(jf,e)?jf[e]:null}function*Q9(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function RC(e,t,n){const i=Float64Array.from(Q9(e,n));return i.sort(Ps),t.map(r=>Y8(i,r))}function NC(e,t){return RC(e,[.25,.5,.75],t)}function zC(e,t){const n=e.length,i=fW(e,t),r=NC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function Z9(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,u,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(u=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-u));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Rr=Math.random;function iK(e){Rr=e}function K9(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(Q9(e,i)),a=r.length,s=t;let o,u,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,u=0;u<a;++u)o+=r[~~(Rr()*a)];d[f]=o/a}return d.sort(Ps),[X_(d,n/2),X_(d,1-n/2)]}function J9(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,u=i(e[0]),f=u,d=u+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(u+f)/2;s<o;++s)a[s]=f;d=h+t,u=h}f=h}for(f=(u+f)/2;s<o;++s)a[s]=f;return n?rK(a,t+t/4):a}function rK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function aK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function sK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Rr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const e7=Math.sqrt(2*Math.PI),oK=Math.SQRT2;let Kh=NaN;function jv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(Kh===Kh)n=Kh,Kh=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,Kh=i*a}return e+n*t}function FC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*e7)}function qv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function Hv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*oK*lK(2*e-1)}function lK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function LC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>jv(n,i),pdf:a=>FC(a,n,i),cdf:a=>qv(a,n,i),icdf:a=>Hv(a,n,i)};return r.mean(e).stdev(t)}function UC(e,t){const n=LC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=zC(e)),r):t},sample(){return e[~~(Rr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function BC(e,t){return e=e||0,t=t??1,Math.exp(e+jv()*t)}function IC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*e7*e)}function PC(e,t,n){return qv(Math.log(e),t,n)}function jC(e,t,n){return Math.exp(Hv(e,t,n))}function t7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>BC(n,i),pdf:a=>IC(a,n,i),cdf:a=>PC(a,n,i),icdf:a=>jC(a,n,i)};return r.mean(e).stdev(t)}function n7(e,t){let n=0,i;function r(s){const o=[];let u=0,f;for(f=0;f<n;++f)u+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=u;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Rr();let o=e[n-1],u=i[0],f=0;for(;f<n-1;u+=i[++f])if(s<u){o=e[f];break}return o.sample()},pdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].pdf(s);return o},cdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function qC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rr()}function HC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function YC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function i7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>qC(n,i),pdf:a=>HC(a,n,i),cdf:a=>GC(a,n,i),icdf:a=>YC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function XC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Dp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Gv(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,u=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,u+=(d-u)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=u,s[o]-=f;return[a,s,u,f]}function Op(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function $d(e,t,n,i,r){let a=0,s=0;return Op(e,t,n,(o,u)=>{const f=u-r(o),d=u-i;a+=f*f,s+=d*d}),1-a/s}function VC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Op(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Dp(i,r,a,s),f=d=>u[0]+u[1]*d;return{coef:u,predict:f,rSquared:$d(e,t,n,r,f)}}function r7(e,t,n){let i=0,r=0,a=0,s=0,o=0;Op(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Dp(i,r,a,s),f=d=>u[0]+u[1]*Math.log(d);return{coef:u,predict:f,rSquared:$d(e,t,n,r,f)}}function a7(e,t,n){const[i,r,a,s]=Gv(e,t,n);let o=0,u=0,f=0,d=0,h=0,p,y,v;Op(e,t,n,(w,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,u+=(v-u)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,S]=Dp(u/s,o/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:$d(e,t,n,s,_)}}function s7(e,t,n){let i=0,r=0,a=0,s=0,o=0,u=0;Op(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++u,i+=(y-i)/u,r+=(v-r)/u,a+=(y*v-a)/u,s+=(y*y-s)/u,o+=(p-o)/u});const f=Dp(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:$d(e,t,n,o,d)}}function WC(e,t,n){const[i,r,a,s]=Gv(e,t,n),o=i.length;let u=0,f=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,u+=(S-u)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const _=d-u*u,w=u*_-f*f,A=(p*u-h*f)/w,C=(h*_-p*f)/w,M=-A*u,k=T=>(T=T-a,A*T*T+C*T+M+s);return{coef:[M-C*a+A*a*a+s,C-2*A*a,A],predict:k,rSquared:$d(e,t,n,s,k)}}function o7(e,t,n,i){if(i===0)return XC(e,t,n);if(i===1)return VC(e,t,n);if(i===2)return WC(e,t,n);const[r,a,s,o]=Gv(e,t,n),u=r.length,f=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=cK(d),w=A=>{A-=s;let C=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<h;++p)C+=_[p]*Math.pow(A,p);return C};return{coef:uK(h,_,-s,o),predict:w,rSquared:$d(e,t,n,o,w)}}function uK(e,t,n,i){const r=Array(e);let a,s,o,u;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,r[a]+=o,s=1;s<=a;++s)u*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*u;return r[0]+=i,r}function cK(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const u5=2,c5=1e-12;function l7(e,t,n,i){const[r,a,s,o]=Gv(e,t,n,!0),u=r.length,f=Math.max(2,~~(i*u)),d=new Float64Array(u),h=new Float64Array(u),p=new Float64Array(u).fill(1);for(let y=-1;++y<=u5;){const v=[0,f-1];for(let S=0;S<u;++S){const _=r[S],w=v[0],A=v[1],C=_-r[w]>r[A]-_?w:A;let M=0,k=0,T=0,O=0,N=0;const B=1/Math.abs(r[C]-_||1);for(let H=w;H<=A;++H){const I=r[H],F=a[H],R=fK(Math.abs(_-I)*B)*p[H],P=I*R;M+=R,k+=P,T+=F*R,O+=F*P,N+=I*P}const[L,G]=Dp(k/M,T/M,O/M,N/M);d[S]=L+G*_,h[S]=Math.abs(a[S]-d[S]),dK(r,S+1,v)}if(y===u5)break;const b=X8(h);if(Math.abs(b)<c5)break;for(let S=0,_,w;S<u;++S)_=h[S]/(6*b),p[S]=_>=1?c5:(w=1-_*_)*w}return hK(r,d,s,o)}function fK(e){return(e=1-e*e*e)*e*e}function dK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function hK(e,t,n,i){const r=e.length,a=[];let s=0,o=0,u=[],f;for(;s<r;++s)f=e[s]+n,u[0]===f?u[1]+=(t[s]-u[1])/++o:(o=0,u[1]+=i,u=[f,t[s]],a.push(u));return u[1]+=i,a}const gK=.5*Math.PI/180;function Yv(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,u=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=pK(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=u&&mK(h,b,p,y,v)>gK?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function pK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function mK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function yK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function iw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:yK(e)}function u7(e,t,n){return n||e+(t?"_"+t:"")}const lE=()=>{},vK={init:lE,add:lE,rem:lE,idx:0},tp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Rp=Object.keys(tp).filter(e=>e!=="__count__");function bK(e,t){return(n,i)=>Pe({name:e,aggregate_param:i,out:n||e},vK,t)}[...Rp,"__count__"].forEach(e=>{tp[e]=bK(e,tp[e])});function c7(e,t,n){return tp[e](n,t)}function f7(e,t){return e.idx-t.idx}function xK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=tp[r]())})};return e.forEach(n),Object.values(t).sort(f7)}function SK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function EK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function _K(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function wK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function d7(e,t){const n=t||ni,i=xK(e),r=e.slice().sort(f7);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=SK,a.prototype.add=EK,a.prototype.rem=_K,a.prototype.set=wK,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function QC(e){this._key=e?kr(e):ke,this.reset()}const In=QC.prototype;In.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};In.add=function(e){this._add.push(e)};In.rem=function(e){this._rem.push(e)};In.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,u,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,u=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[u++]=f;return this._rem=[],this._add=a};In.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",_e(n,a)||(n[a]=1,++r);return r};In.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=T8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};In.argmin=function(e){return this.extent(e)[0]||{}};In.argmax=function(e){return this.extent(e)[1]||{}};In.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};In.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};In.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=NC(this.values(),e),this._get=e),this._q};In.q1=function(e){return this.quartile(e)[0]};In.q2=function(e){return this.quartile(e)[1]};In.q3=function(e){return this.quartile(e)[2]};In.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=K9(this.values(),1e3,.05,e),this._get=e),this._ci};In.ci0=function(e){return this.ci(e)[0]};In.ci1=function(e){return this.ci(e)[1]};function ll(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ll.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ge(ll,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let u,f,d,h;for(u in o)for(d=o[u].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,u,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;u[d]=h[p],f<r?s(y,u,f):t[y]||e.cell(y,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=xe(Kn(w)),C=A.length;let M=0,k;for(;M<C;++M)i[k=A[M]]||(i[k]=1,t.push(k))}this._dims=xe(e.groupby),this._dnames=this._dims.map(w=>{const A=qt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:iw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],u=e.as||[],f=a.length,d={};let h,p,y,v,b,S,_;for(f!==s.length&&te("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(h=a[_],p=s[_],y=o[_]||null,h==null&&p!=="count"&&te("Null aggregate field specified."),b=qt(h),S=u7(p,b,u[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(c7(p,y,S))}return this._measures=this._measures.map(w=>d7(w,w.field)),Object.create(null)},cellkey:iw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new QC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?H9(t.tuple,a):ct(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let u,f,d,h;if(i)for(f in i)u=i[f],(!r||u.num)&&s.push(u.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)u=n[d],(u.num===0&&r?s:o).push(this.celltuple(u)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const AK=1e-14;function ZC(e){J.call(this,null,e)}ZC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ge(ZC,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],u=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[u]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Z9(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const u=function(f){let d=Qn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(AK+(d-r)/i))};return u.start=r,u.stop=n.stop,u.step=i,this.value=Bi(u,Kn(t),e.name||"bin_"+qt(t))}});function h7(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:u=>a.push(u),remove:u=>s[i(u)]=++o,size:()=>r.length,data:(u,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&u&&r.sort(u),a.length&&(r=u?N8(u,r,a.sort(u)):r.concat(a),a=[]),r)}}function KC(e){J.call(this,[],e)}KC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ge(KC,J,{transform(e,t){const n=t.fork(t.ALL),i=h7(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(ic(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function g7(e){wt.call(this,null,CK,e)}ge(g7,wt);function CK(e){return this.value&&!e.modified()?this.value:fC(e.fields,e.orders)}function JC(e){J.call(this,null,e)}JC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function MK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ge(JC,J,{transform(e,t){const n=h=>p=>{for(var y=MK(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,u=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,u,f;for(o in n)u=i[o],f=n[o]||0,!u&&f?(i[o]=u=ct({}),u[r]=o,u[a]=f,s.add.push(u)):f===0?(u&&s.rem.push(u),n[o]=null,i[o]=null):u[a]!==f&&(u[a]=f,s.mod.push(u));return s.modifies(t)}});function eM(e){J.call(this,null,e)}eM.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ge(eM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=$K(o,r,a,e.filter||Dr)):n.mod=o,n.source=this.value,n.modifies(i)}});function $K(e,t,n,i){for(var r=[],a={},s=e.length,o=0,u,f;o<s;++o)for(a[t]=f=e[o],u=0;u<s;++u)a[n]=e[u],i(a)&&(r.push(ct(a)),a={},a[t]=f);return r}const f5={kde:UC,mixture:n7,normal:LC,lognormal:t7,uniform:i7},TK="distributions",d5="function",kK="field";function p7(e,t){const n=e[d5];_e(f5,n)||te("Unknown distribution function: "+n);const i=f5[n]();for(const r in e)r===kK?i.data((e.from||t()).map(e[r])):r===TK?i[r](e[r].map(a=>p7(a,t))):typeof i[r]===d5&&i[r](e[r]);return i}function tM(e){J.call(this,null,e)}const m7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],DK={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:m7},{name:"weights",type:"number",array:!0}]};tM.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:m7.concat(DK)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(tM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=p7(e.distribution,OK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&te("Invalid density method: "+s),!e.extent&&!i.data&&te("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],u=e.extent||qa(i.data()),f=Yv(s,u,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],ct(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function OK(e){return()=>e.materialize(e.SOURCE).source}function y7(e,t){return e?e.map((n,i)=>t[i]||qt(n)):null}function nM(e,t,n){const i=[],r=h=>h(u);let a,s,o,u,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)u=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(u));return i}const v7="bin";function iM(e){J.call(this,null,e)}iM.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:v7}]};const RK=(e,t)=>kp(qa(e,t))/30;ge(iM,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=nM(t.source,e.groupby,ni),r=e.smooth||!1,a=e.field,s=e.step||RK(n,a),o=ic((v,b)=>a(v)-a(b)),u=e.as||v7,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of J9(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][u]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(u)}});function b7(e){wt.call(this,null,NK,e),this.modified(!0)}ge(b7,wt);function NK(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Bi(n=>t(n,e),Kn(t),qt(t))}function rM(e){J.call(this,[void 0,void 0],e)}rM.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ge(rM,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const u=Qn(i(o));u!=null&&(u<a&&(a=u),u>s&&(s=u))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=qt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function aM(e,t){wt.call(this,e),this.parent=t,this.count=0}ge(aM,wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Xv(e){J.call(this,{},e),this._keys=Ed();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ge(Xv,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=_e(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new aM(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const f=ke(u),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(u))}),t.visit(t.ADD,u=>{const f=i(u);a.set(ke(u),f),o(f).add(u)}),s||t.modified(i.fields)?t.visit(t.MOD,u=>{const f=ke(u),d=a.get(f),h=i(u);d===h?o(h).mod(u):(a.set(f,h),o(d).rem(u),o(h).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{o(a.get(ke(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const f=ke(u),d=a.get(f),h=i(u);d!==h&&(a.set(f,h),o(d).rem(u),o(h).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function x7(e){wt.call(this,null,zK,e)}ge(x7,wt);function zK(e){return this.value&&!e.modified()?this.value:re(e.name)?xe(e.name).map(t=>kr(t)):kr(e.name,e.as)}function sM(e){J.call(this,Ed(),e)}sM.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ge(sM,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,u=e.expr;let f=!0;t.visit(t.REM,h=>{const p=ke(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{u(h,e)?a.push(h):i.set(ke(h),1)});function d(h){const p=ke(h),y=u(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function oM(e){J.call(this,[],e)}oM.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ge(oM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=y7(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const u=i.map(v=>v(o)),f=u.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=kC(o),h=0;h<s;++h)p[r[h]]=(y=u[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function lM(e){J.call(this,[],e)}lM.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ge(lM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(qt),a=e.as||["key","value"],s=a[0],o=a[1],u=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<u;++d)h=kC(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function uM(e){J.call(this,null,e)}uM.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ge(uM,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function S7(e){J.call(this,[],e)}ge(S7,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,u;if(a>0){for(s=[];--a>=0;)s.push(u=ct(i(e))),r.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const Im={value:"value",median:X8,mean:yW,min:Y_,max:_u},FK=[];function cM(e){J.call(this,[],e)}cM.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function LK(e){var t=e.method||Im.value,n;if(Im[t]==null)te("Unrecognized imputation method: "+t);else return t===Im.value?(n=e.value!==void 0?e.value:0,()=>n):Im[t]}function UK(e){const t=e.field;return n=>n?t(n):NaN}ge(cM,J,{transform(e,t){var n=t.fork(t.ALL),i=LK(e),r=UK(e),a=qt(e.field),s=qt(e.key),o=(e.groupby||[]).map(qt),u=BK(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=u.domain.length,p,y,v,b,S,_,w,A,C,M;for(S=0,A=u.length;S<A;++S)for(p=u[S],v=p.values,y=NaN,w=0;w<h;++w)if(p[w]==null){for(b=u.domain[w],M={_impute:!0},_=0,C=v.length;_<C;++_)M[o[_]]=v[_];M[s]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ct(M))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function BK(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],o={},u={},f,d,h,p,y,v,b,S;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):FK)+"",(h=u[d])||(h=u[d]=[],a.push(h),h.values=f),h[y-1]=S;return a.domain=s,a}function fM(e){ll.call(this,e)}fM.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ge(fM,ll,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Pe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function dM(e){J.call(this,null,e)}dM.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(dM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=nM(i,e.groupby,e.field),a=(e.groupby||[]).map(qt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=qa(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=UC(y,s)[o],b=e.counts?y.length:1,S=d||qa(y);Yv(v,S,h,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[u[0]]=_[0],w[u[1]]=_[1]*b,f.push(ct(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function E7(e){wt.call(this,null,IK,e)}ge(E7,wt);function IK(e){return this.value&&!e.modified()?this.value:gC(e.fields,e.flat)}function _7(e){J.call(this,[],e),this._pending=null}ge(_7,J,{transform(e,t){const n=t.dataflow;return this._pending?uE(this,t,this._pending):PK(e)?t.StopPropagation:e.values?uE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=xe(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>uE(this,t,xe(i.data)))}});function PK(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function uE(e,t,n){n.forEach(ct);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function hM(e){J.call(this,{},e)}hM.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ge(hM,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let u=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&te('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&te('The "as" parameter has too few output field names.'),d=d||r.map(qt),h=function(v){for(var b=0,S=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||te("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),u|=y?t.MOD:0),t.visit(u,h),f.modifies(d)}});function w7(e){wt.call(this,null,jK,e)}ge(w7,wt);function jK(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function A7(e){wt.call(this,null,qK,e)}ge(A7,wt);function qK(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function C7(e){J.call(this,null,e)}ge(C7,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gM(e){ll.call(this,e)}gM.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ge(gM,ll,{_transform:ll.prototype.transform,transform(e,t){return this._transform(HK(e,t),t)}});function HK(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Kn(n).concat(Kn(i)),s=YK(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>GK(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function GK(e,t,n,i){return Bi(r=>t(r)===e?n(r):NaN,i,e+"")}function YK(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Sd),t?r.slice(0,t):r}function M7(e){Xv.call(this,e)}ge(M7,Xv,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(Kn(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(ct(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function pM(e){J.call(this,null,e)}pM.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ge(pM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=y7(e.fields,e.as||[]),a=i?(o,u)=>XK(o,u,i,r):Bv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const u=ke(o);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,o=>{const u=a(o,ct({}));s[ke(o)]=u,n.add.push(u)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[ke(o)]))}),n}});function XK(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function $7(e){J.call(this,null,e)}ge($7,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mM(e){J.call(this,null,e)}mM.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const VK=1e-14;ge(mM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=nM(r,e.groupby,e.field),s=(e.groupby||[]).map(qt),o=[],u=e.step||.01,f=e.probs||er(u/2,1-VK,u),d=f.length;return a.forEach(h=>{const p=RC(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(ct(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function T7(e){J.call(this,null,e)}ge(T7,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=kC(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function yM(e){J.call(this,[],e),this.count=0}yM.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ge(yM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[ke(h)]=1,d),{});let s=this.value,o=this.count,u=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Rr()),p<s.length&&p>=u&&(h=s[p],a[ke(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=ke(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(u=o=s.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),u=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[ke(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||u<0)&&(n.add=s.filter(d=>!a[ke(d)])),this.count=o,this.value=n.source=s,n}});function vM(e){J.call(this,null,e)}vM.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ge(vM,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=er(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ct(a)}),n.add=t.add.concat(this.value),n}});function k7(e){J.call(this,null,e),this.modified(!0)}ge(k7,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function bM(e){J.call(this,null,e)}const D7=["unit0","unit1"];bM.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:SC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:D7}]};ge(bM,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Md:Cd)(a.unit).offset,o=e.as||D7,u=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[u]=null,i&&(v[f]=null)):(v[u]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<h&&(h=S),_>p&&(p=_))}),a.start=h,a.stop=p,t.modifies(i?o:u)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:S9({extent:e.extent||qa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=EC(i),s=this.value||{},o=(n?d9:f9)(a,r);return o.unit=Je(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function O7(e){J.call(this,Ed(),e)}ge(O7,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function R7(e){J.call(this,null,e)}ge(R7,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ic(e.sort)):t.source).map(e.field))}});function WK(e,t,n,i){const r=np[e](t,n);return{init:r.init||Ho,update:function(a,s){s[i]=r.next(a)}}}const np={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=np.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");const n=np.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=QK(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function QK(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const ZK=Object.keys(np);function N7(e){const t=xe(e.ops),n=xe(e.fields),i=xe(e.params),r=xe(e.aggregate_params),a=xe(e.as),s=this.outputs=[],o=this.windows=[],u={},f={},d=[],h=[];let p=!0;function y(v){xe(Kn(v)).forEach(b=>u[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=qt(S),C=u7(v,A,a[b]);if(y(S),s.push(C),_e(np,v))o.push(WK(v,S,_,C));else{if(S==null&&v!=="count"&&te("Null aggregate field specified."),v==="count"){d.push(C);return}p=!1;let M=f[A];M||(M=f[A]=[],M.field=S,h.push(M)),M.push(c7(v,w,C))}}),(d.length||h.length)&&(this.cell=KK(h,d,p)),this.inputs=Object.keys(u)}const z7=N7.prototype;z7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};z7.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function KK(e,t,n){e=e.map(u=>d7(u,u.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new QC;return i.add=function(u){if(i.num+=1,!n){o&&o.add(u);for(let f=0;f<r;++f)a[f].add(a[f].get(u),u)}},i.rem=function(u){if(i.num-=1,!n){o&&o.rem(u);for(let f=0;f<r;++f)a[f].rem(a[f].get(u),u)}},i.set=function(u){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)u[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(u)},i.init=function(){i.num=0,o&&o.reset();for(let u=0;u<r;++u)a[u].init()},i}function xM(e){J.call(this,{},e),this._mlen=0,this._mods=[]}xM.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ZK.concat(Rp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ge(xM,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=ic(e.sort),r=iw(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new N7(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,u=this._mlen;o<u;++o)JK(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=h7(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function JK(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),u=o.length,f=a?_d(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||ii(-1)};t.init();for(let h=0;h<u;++h)eJ(d,s,h,u),a&&tJ(d,f),t.update(d,o[h])}function eJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function tJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const nJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ll,bin:ZC,collect:KC,compare:g7,countpattern:JC,cross:eM,density:tM,dotbin:iM,expression:b7,extent:rM,facet:Xv,field:x7,filter:sM,flatten:oM,fold:lM,formula:uM,generate:S7,impute:cM,joinaggregate:fM,kde:dM,key:E7,load:_7,lookup:hM,multiextent:w7,multivalues:A7,params:C7,pivot:gM,prefacet:M7,project:pM,proxy:$7,quantile:mM,relay:T7,sample:yM,sequence:vM,sieve:k7,subflow:aM,timeunit:bM,tupleindex:O7,values:R7,window:xM},Symbol.toStringTag,{value:"Module"}));function ft(e){return function(){return e}}const h5=Math.abs,Hn=Math.atan2,eu=Math.cos,iJ=Math.max,cE=Math.min,Aa=Math.sin,bu=Math.sqrt,Yn=1e-12,qf=Math.PI,iy=qf/2,F7=2*qf;function rJ(e){return e>1?0:e<-1?qf:Math.acos(e)}function g5(e){return e>=1?iy:e<=-1?-iy:Math.asin(e)}const rw=Math.PI,aw=2*rw,fu=1e-6,aJ=aw-fu;function L7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return L7;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let SM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?L7:sJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,u=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>fu)if(!(Math.abs(h*u-f*d)>fu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=u*u+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((rw-Math.acos((b+p-S)/(2*_*w)))/2),C=A/w,M=A/_;Math.abs(C-1)>fu&&this._append`L${t+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+M*u},${this._y1=n+M*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),u=i*Math.sin(r),f=t+o,d=n+u,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>fu||Math.abs(this._y1-d)>fu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%aw+aw),p>aJ?this._append`A${i},${i},0,1,${h},${t-o},${n-u}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>fu&&this._append`A${i},${i},0,${+(p>=rw)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Vv(){return new SM}Vv.prototype=SM.prototype;function Wv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new SM(t)}function oJ(e){return e.innerRadius}function lJ(e){return e.outerRadius}function uJ(e){return e.startAngle}function cJ(e){return e.endAngle}function fJ(e){return e&&e.padAngle}function dJ(e,t,n,i,r,a,s,o){var u=n-e,f=i-t,d=s-r,h=o-a,p=h*u-d*f;if(!(p*p<Yn))return p=(d*(t-a)-h*(e-r))/p,[e+p*u,t+p*f]}function Pm(e,t,n,i,r,a,s){var o=e-n,u=t-i,f=(s?a:-a)/bu(o*o+u*u),d=f*u,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,C=w*w+A*A,M=r-a,k=p*b-v*y,T=(A<0?-1:1)*bu(iJ(0,M*M*C-k*k)),O=(k*A-w*T)/C,N=(-k*w-A*T)/C,B=(k*A+w*T)/C,L=(-k*w+A*T)/C,G=O-S,H=N-_,I=B-S,F=L-_;return G*G+H*H>I*I+F*F&&(O=B,N=L),{cx:O,cy:N,x01:-d,y01:-h,x11:O*(r/M-1),y11:N*(r/M-1)}}function hJ(){var e=oJ,t=lJ,n=ft(0),i=null,r=uJ,a=cJ,s=fJ,o=null,u=Wv(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-iy,b=a.apply(this,arguments)-iy,S=h5(b-v),_=b>v;if(o||(o=d=u()),y<p&&(h=y,y=p,p=h),!(y>Yn))o.moveTo(0,0);else if(S>F7-Yn)o.moveTo(y*eu(v),y*Aa(v)),o.arc(0,0,y,v,b,!_),p>Yn&&(o.moveTo(p*eu(b),p*Aa(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,C=v,M=b,k=S,T=S,O=s.apply(this,arguments)/2,N=O>Yn&&(i?+i.apply(this,arguments):bu(p*p+y*y)),B=cE(h5(y-p)/2,+n.apply(this,arguments)),L=B,G=B,H,I;if(N>Yn){var F=g5(N/p*Aa(O)),R=g5(N/y*Aa(O));(k-=F*2)>Yn?(F*=_?1:-1,C+=F,M-=F):(k=0,C=M=(v+b)/2),(T-=R*2)>Yn?(R*=_?1:-1,w+=R,A-=R):(T=0,w=A=(v+b)/2)}var P=y*eu(w),X=y*Aa(w),K=p*eu(M),z=p*Aa(M);if(B>Yn){var W=y*eu(A),ne=y*Aa(A),se=p*eu(C),me=p*Aa(C),Se;if(S<qf)if(Se=dJ(P,X,se,me,W,ne,K,z)){var Ce=P-Se[0],Ht=X-Se[1],nt=W-Se[0],be=ne-Se[1],Ue=1/Aa(rJ((Ce*nt+Ht*be)/(bu(Ce*Ce+Ht*Ht)*bu(nt*nt+be*be)))/2),Ie=bu(Se[0]*Se[0]+Se[1]*Se[1]);L=cE(B,(p-Ie)/(Ue-1)),G=cE(B,(y-Ie)/(Ue+1))}else L=G=0}T>Yn?G>Yn?(H=Pm(se,me,P,X,y,G,_),I=Pm(W,ne,K,z,y,G,_),o.moveTo(H.cx+H.x01,H.cy+H.y01),G<B?o.arc(H.cx,H.cy,G,Hn(H.y01,H.x01),Hn(I.y01,I.x01),!_):(o.arc(H.cx,H.cy,G,Hn(H.y01,H.x01),Hn(H.y11,H.x11),!_),o.arc(0,0,y,Hn(H.cy+H.y11,H.cx+H.x11),Hn(I.cy+I.y11,I.cx+I.x11),!_),o.arc(I.cx,I.cy,G,Hn(I.y11,I.x11),Hn(I.y01,I.x01),!_))):(o.moveTo(P,X),o.arc(0,0,y,w,A,!_)):o.moveTo(P,X),!(p>Yn)||!(k>Yn)?o.lineTo(K,z):L>Yn?(H=Pm(K,z,W,ne,p,-L,_),I=Pm(P,X,se,me,p,-L,_),o.lineTo(H.cx+H.x01,H.cy+H.y01),L<B?o.arc(H.cx,H.cy,L,Hn(H.y01,H.x01),Hn(I.y01,I.x01),!_):(o.arc(H.cx,H.cy,L,Hn(H.y01,H.x01),Hn(H.y11,H.x11),!_),o.arc(0,0,p,Hn(H.cy+H.y11,H.cx+H.x11),Hn(I.cy+I.y11,I.cx+I.x11),_),o.arc(I.cx,I.cy,L,Hn(I.y11,I.x11),Hn(I.y01,I.x01),!_))):o.arc(0,0,p,M,C,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-qf/2;return[eu(h)*d,Aa(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ft(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ft(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ft(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ft(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ft(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ft(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ft(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function U7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function B7(e){this._context=e}B7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function EM(e){return new B7(e)}function I7(e){return e[0]}function P7(e){return e[1]}function j7(e,t){var n=ft(!0),i=null,r=EM,a=null,s=Wv(o);e=typeof e=="function"?e:e===void 0?I7:ft(e),t=typeof t=="function"?t:t===void 0?P7:ft(t);function o(u){var f,d=(u=U7(u)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=u[f],f,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,u),+t(h,f,u));if(y)return a=null,y+""||null}return o.x=function(u){return arguments.length?(e=typeof u=="function"?u:ft(+u),o):e},o.y=function(u){return arguments.length?(t=typeof u=="function"?u:ft(+u),o):t},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ft(!!u),o):n},o.curve=function(u){return arguments.length?(r=u,i!=null&&(a=r(i)),o):r},o.context=function(u){return arguments.length?(u==null?i=a=null:a=r(i=u),o):i},o}function q7(e,t,n){var i=null,r=ft(!0),a=null,s=EM,o=null,u=Wv(f);e=typeof e=="function"?e:e===void 0?I7:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?P7:ft(+n);function f(h){var p,y,v,b=(h=U7(h)).length,S,_=!1,w,A=new Array(b),C=new Array(b);for(a==null&&(o=s(w=u())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],C[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(S,p,h),C[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):C[p]))}if(w)return o=null,w+""||null}function d(){return j7().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ft(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ft(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ft(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const gJ={draw(e,t){const n=bu(t/qf);e.moveTo(n,0),e.arc(0,0,n,0,F7)}};function pJ(e,t){let n=null,i=Wv(r);e=typeof e=="function"?e:ft(e||gJ),t=typeof t=="function"?t:ft(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ft(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ft(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function ul(){}function ry(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qv(e){this._context=e}Qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ry(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mJ(e){return new Qv(e)}function H7(e){this._context=e}H7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yJ(e){return new H7(e)}function G7(e){this._context=e}G7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vJ(e){return new G7(e)}function Y7(e,t){this._basis=new Qv(e),this._beta=t}Y7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,u;++o<=n;)u=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+u*a),this._beta*t[o]+(1-this._beta)*(r+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const bJ=function e(t){function n(i){return t===1?new Qv(i):new Y7(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function ay(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _M(e,t){this._context=e,this._k=(1-t)/6}_M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ay(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xJ=function e(t){function n(i){return new _M(i,t)}return n.tension=function(i){return e(+i)},n}(0);function wM(e,t){this._context=e,this._k=(1-t)/6}wM.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const SJ=function e(t){function n(i){return new wM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function AM(e,t){this._context=e,this._k=(1-t)/6}AM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EJ=function e(t){function n(i){return new AM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function CM(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Yn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Yn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function X7(e,t){this._context=e,this._alpha=t}X7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:CM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _J=function e(t){function n(i){return t?new X7(i,t):new _M(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function V7(e,t){this._context=e,this._alpha=t}V7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:CM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wJ=function e(t){function n(i){return t?new V7(i,t):new wM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function W7(e,t){this._context=e,this._alpha=t}W7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:CM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const AJ=function e(t){function n(i){return t?new W7(i,t):new AM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Q7(e){this._context=e}Q7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function CJ(e){return new Q7(e)}function p5(e){return e<0?-1:1}function m5(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(p5(a)+p5(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function y5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function sy(e){this._context=e}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fE(this,this._t0,y5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fE(this,y5(this,n=m5(this,e,t)),n);break;default:fE(this,this._t0,n=m5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Z7(e){this._context=new K7(e)}(Z7.prototype=Object.create(sy.prototype)).point=function(e,t){sy.prototype.point.call(this,t,e)};function K7(e){this._context=e}K7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function MJ(e){return new sy(e)}function $J(e){return new Z7(e)}function J7(e){this._context=e}J7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=v5(e),r=v5(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function v5(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function TJ(e){return new J7(e)}function Zv(e,t){this._context=e,this._t=t}Zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function kJ(e){return new Zv(e,.5)}function DJ(e){return new Zv(e,0)}function OJ(e){return new Zv(e,1)}function il(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const RJ=()=>typeof Image<"u"?Image:null;function Ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function El(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sw=Symbol("implicit");function MM(){var e=new zN,t=[],n=[],i=sw;function r(a){let s=e.get(a);if(s===void 0){if(i!==sw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new zN;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return MM(t,n).unknown(i)},Ja.apply(r,arguments),r}function Td(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Np(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _l(){}var Nu=.7,Hf=1/Nu,$f="\\s*([+-]?\\d+)\\s*",ip="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",La="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NJ=/^#([0-9a-f]{3,8})$/,zJ=new RegExp(`^rgb\\(${$f},${$f},${$f}\\)$`),FJ=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),LJ=new RegExp(`^rgba\\(${$f},${$f},${$f},${ip}\\)$`),UJ=new RegExp(`^rgba\\(${La},${La},${La},${ip}\\)$`),BJ=new RegExp(`^hsl\\(${ip},${La},${La}\\)$`),IJ=new RegExp(`^hsla\\(${ip},${La},${La},${ip}\\)$`),b5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Td(_l,rp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x5,formatHex:x5,formatHex8:PJ,formatHsl:jJ,formatRgb:S5,toString:S5});function x5(){return this.rgb().formatHex()}function PJ(){return this.rgb().formatHex8()}function jJ(){return eL(this).formatHsl()}function S5(){return this.rgb().formatRgb()}function rp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=NJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?E5(t):n===3?new xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zJ.exec(e))?new xn(t[1],t[2],t[3],1):(t=FJ.exec(e))?new xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=LJ.exec(e))?jm(t[1],t[2],t[3],t[4]):(t=UJ.exec(e))?jm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=BJ.exec(e))?A5(t[1],t[2]/100,t[3]/100,1):(t=IJ.exec(e))?A5(t[1],t[2]/100,t[3]/100,t[4]):b5.hasOwnProperty(e)?E5(b5[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function E5(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function jm(e,t,n,i){return i<=0&&(e=t=n=NaN),new xn(e,t,n,i)}function $M(e){return e instanceof _l||(e=rp(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function cl(e,t,n,i){return arguments.length===1?$M(e):new xn(e,t,n,i??1)}function xn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Td(xn,cl,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xn(wu(this.r),wu(this.g),wu(this.b),oy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_5,formatHex:_5,formatHex8:qJ,formatRgb:w5,toString:w5}));function _5(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}`}function qJ(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}${xu((isNaN(this.opacity)?1:this.opacity)*255)}`}function w5(){const e=oy(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function oy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function A5(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zr(e,t,n,i)}function eL(e){if(e instanceof Zr)return new Zr(e.h,e.s,e.l,e.opacity);if(e instanceof _l||(e=rp(e)),!e)return new Zr;if(e instanceof Zr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,u=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=u<.5?a+r:2-a-r,s*=60):o=u>0&&u<1?0:s,new Zr(s,o,u,e.opacity)}function ly(e,t,n,i){return arguments.length===1?eL(e):new Zr(e,t,n,i??1)}function Zr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Zr,ly,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Zr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new Zr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new xn(dE(e>=240?e-240:e+120,r,i),dE(e,r,i),dE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Zr(C5(this.h),qm(this.s),qm(this.l),oy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oy(this.opacity);return`${e===1?"hsl(":"hsla("}${C5(this.h)}, ${qm(this.s)*100}%, ${qm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C5(e){return e=(e||0)%360,e<0?e+360:e}function qm(e){return Math.max(0,Math.min(1,e||0))}function dE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tL=Math.PI/180,nL=180/Math.PI,uy=18,iL=.96422,rL=1,aL=.82521,sL=4/29,Tf=6/29,oL=3*Tf*Tf,HJ=Tf*Tf*Tf;function lL(e){if(e instanceof Ua)return new Ua(e.l,e.a,e.b,e.opacity);if(e instanceof Us)return uL(e);e instanceof xn||(e=$M(e));var t=mE(e.r),n=mE(e.g),i=mE(e.b),r=hE((.2225045*t+.7168786*n+.0606169*i)/rL),a,s;return t===n&&n===i?a=s=r:(a=hE((.4360747*t+.3850649*n+.1430804*i)/iL),s=hE((.0139322*t+.0971045*n+.7141733*i)/aL)),new Ua(116*r-16,500*(a-r),200*(r-s),e.opacity)}function cy(e,t,n,i){return arguments.length===1?lL(e):new Ua(e,t,n,i??1)}function Ua(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Td(Ua,cy,Np(_l,{brighter(e){return new Ua(this.l+uy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ua(this.l-uy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=iL*gE(t),e=rL*gE(e),n=aL*gE(n),new xn(pE(3.1338561*t-1.6168667*e-.4906146*n),pE(-.9787684*t+1.9161415*e+.033454*n),pE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function hE(e){return e>HJ?Math.pow(e,1/3):e/oL+sL}function gE(e){return e>Tf?e*e*e:oL*(e-sL)}function pE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function GJ(e){if(e instanceof Us)return new Us(e.h,e.c,e.l,e.opacity);if(e instanceof Ua||(e=lL(e)),e.a===0&&e.b===0)return new Us(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nL;return new Us(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function fy(e,t,n,i){return arguments.length===1?GJ(e):new Us(e,t,n,i??1)}function Us(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function uL(e){if(isNaN(e.h))return new Ua(e.l,0,0,e.opacity);var t=e.h*tL;return new Ua(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Td(Us,fy,Np(_l,{brighter(e){return new Us(this.h,this.c,this.l+uy*(e??1),this.opacity)},darker(e){return new Us(this.h,this.c,this.l-uy*(e??1),this.opacity)},rgb(){return uL(this).rgb()}}));var cL=-.14861,TM=1.78277,kM=-.29227,Kv=-.90649,ap=1.97294,M5=ap*Kv,$5=ap*TM,T5=TM*kM-Kv*cL;function YJ(e){if(e instanceof Au)return new Au(e.h,e.s,e.l,e.opacity);e instanceof xn||(e=$M(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(T5*i+M5*t-$5*n)/(T5+M5-$5),a=i-r,s=(ap*(n-r)-kM*a)/Kv,o=Math.sqrt(s*s+a*a)/(ap*r*(1-r)),u=o?Math.atan2(s,a)*nL-120:NaN;return new Au(u<0?u+360:u,o,r,e.opacity)}function ow(e,t,n,i){return arguments.length===1?YJ(e):new Au(e,t,n,i??1)}function Au(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Au,ow,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Au(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new Au(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*tL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new xn(255*(t+n*(cL*i+TM*r)),255*(t+n*(kM*i+Kv*r)),255*(t+n*(ap*i)),this.opacity)}}));function fL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function dL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return fL((n-i/t)*t,s,r,a,o)}}function hL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return fL((n-i/t)*t,r,a,s,o)}}const Jv=e=>()=>e;function gL(e,t){return function(n){return e+n*t}}function XJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function eb(e,t){var n=t-e;return n?gL(e,n>180||n<-180?n-360*Math.round(n/360):n):Jv(isNaN(e)?t:e)}function VJ(e){return(e=+e)==1?Sn:function(t,n){return n-t?XJ(t,n,e):Jv(isNaN(t)?n:t)}}function Sn(e,t){var n=t-e;return n?gL(e,n):Jv(isNaN(e)?t:e)}const lw=function e(t){var n=VJ(t);function i(r,a){var s=n((r=cl(r)).r,(a=cl(a)).r),o=n(r.g,a.g),u=n(r.b,a.b),f=Sn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=u(d),r.opacity=f(d),r+""}}return i.gamma=e,i}(1);function pL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=cl(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=a(u),o+""}}}var WJ=pL(dL),QJ=pL(hL);function DM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function mL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ZJ(e,t){return(mL(t)?DM:yL)(e,t)}function yL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=wl(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function vL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Wr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=wl(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var uw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yE=new RegExp(uw.source,"g");function KJ(e){return function(){return e}}function JJ(e){return function(t){return e(t)+""}}function xL(e,t){var n=uw.lastIndex=yE.lastIndex=0,i,r,a,s=-1,o=[],u=[];for(e=e+"",t=t+"";(i=uw.exec(e))&&(r=yE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:Wr(i,r)})),n=yE.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?JJ(u[0].x):KJ(t):(t=u.length,function(f){for(var d=0,h;d<t;++d)o[(h=u[d]).i]=h.x(f);return o.join("")})}function wl(e,t){var n=typeof t,i;return t==null||n==="boolean"?Jv(t):(n==="number"?Wr:n==="string"?(i=rp(t))?(t=i,lw):xL:t instanceof rp?lw:t instanceof Date?vL:mL(t)?DM:Array.isArray(t)?yL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bL:Wr)(e,t)}function eee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function tee(e,t){var n=eb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function zp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var k5=180/Math.PI,cw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function SL(e,t,n,i,r,a){var s,o,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*k5,skewX:Math.atan(u)*k5,scaleX:s,scaleY:o}}var Hm;function nee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cw:SL(t.a,t.b,t.c,t.d,t.e,t.f)}function iee(e){return e==null||(Hm||(Hm=document.createElementNS("http://www.w3.org/2000/svg","g")),Hm.setAttribute("transform",e),!(e=Hm.transform.baseVal.consolidate()))?cw:(e=e.matrix,SL(e.a,e.b,e.c,e.d,e.e,e.f))}function EL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Wr(f,h)},{i:b-2,x:Wr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Wr(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Wr(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function u(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Wr(f,h)},{i:b-2,x:Wr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),u(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var ree=EL(nee,"px, ","px)","deg)"),aee=EL(iee,", ",")",")"),see=1e-12;function D5(e){return((e=Math.exp(e))+1/e)/2}function oee(e){return((e=Math.exp(e))-1/e)/2}function lee(e){return((e=Math.exp(2*e))-1)/(e+1)}const uee=function e(t,n,i){function r(a,s){var o=a[0],u=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-u,b=y*y+v*v,S,_;if(b<see)_=Math.log(p/f)/t,S=function(T){return[o+T*y,u+T*v,f*Math.exp(t*T*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),C=(p*p-f*f-i*b)/(2*p*n*w),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(C*C+1)-C);_=(k-M)/t,S=function(T){var O=T*_,N=D5(M),B=f/(n*w)*(N*lee(t*O+M)-oee(M));return[o+B*y,u+B*v,f*N/D5(t*O+M)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,u=o*o;return e(s,o,u)},r}(Math.SQRT2,2,4);function _L(e){return function(t,n){var i=e((t=ly(t)).h,(n=ly(n)).h),r=Sn(t.s,n.s),a=Sn(t.l,n.l),s=Sn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const cee=_L(eb);var fee=_L(Sn);function dee(e,t){var n=Sn((e=cy(e)).l,(t=cy(t)).l),i=Sn(e.a,t.a),r=Sn(e.b,t.b),a=Sn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function wL(e){return function(t,n){var i=e((t=fy(t)).h,(n=fy(n)).h),r=Sn(t.c,n.c),a=Sn(t.l,n.l),s=Sn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const hee=wL(eb);var gee=wL(Sn);function AL(e){return function t(n){n=+n;function i(r,a){var s=e((r=ow(r)).h,(a=ow(a)).h),o=Sn(r.s,a.s),u=Sn(r.l,a.l),f=Sn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=u(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i}(1)}const pee=AL(eb);var mee=AL(Sn);function OM(e,t){t===void 0&&(t=e,e=wl);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function yee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const vee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:wl,interpolateArray:ZJ,interpolateBasis:dL,interpolateBasisClosed:hL,interpolateCubehelix:pee,interpolateCubehelixLong:mee,interpolateDate:vL,interpolateDiscrete:eee,interpolateHcl:hee,interpolateHclLong:gee,interpolateHsl:cee,interpolateHslLong:fee,interpolateHue:tee,interpolateLab:dee,interpolateNumber:Wr,interpolateNumberArray:DM,interpolateObject:bL,interpolateRgb:lw,interpolateRgbBasis:WJ,interpolateRgbBasisClosed:QJ,interpolateRound:zp,interpolateString:xL,interpolateTransformCss:ree,interpolateTransformSvg:aee,interpolateZoom:uee,piecewise:OM,quantize:yee},Symbol.toStringTag,{value:"Module"}));function bee(e){return function(){return e}}function fw(e){return+e}var O5=[0,1];function Di(e){return e}function dw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:bee(isNaN(t)?NaN:.5)}function xee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function See(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=dw(r,i),a=n(s,a)):(i=dw(i,r),a=n(a,s)),function(o){return a(i(o))}}function Eee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=dw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var u=sl(e,o,1,i)-1;return a[u](r[u](o))}}function Fp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tb(){var e=O5,t=O5,n=wl,i,r,a,s=Di,o,u,f;function d(){var p=Math.min(e.length,t.length);return s!==Di&&(s=xee(e[0],e[p-1])),o=p>2?Eee:See,u=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(u||(u=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),Wr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,fw),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=zp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Di,d()):s!==Di},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function CL(){return tb()(Di,Di)}function ML(e,t,n,i){var r=ol(e,t,n),a;switch(i=Ru(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=J8(r,s))&&(i.precision=a),bC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=e9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=K8(r))&&(i.precision=a-(i.type==="%")*2);break}}return kv(i)}function ac(e){var t=e.domain;return e.ticks=function(n){var i=t();return H_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return ML(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],u,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=G_(s,o,n),f===u)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;u=f}return e},e}function $L(){var e=CL();return e.copy=function(){return Fp(e,$L())},Ja.apply(e,arguments),ac(e)}function TL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,fw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return TL(e).unknown(t)},e=arguments.length?Array.from(e,fw):[0,1],ac(n)}function kL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function R5(e){return Math.log(e)}function N5(e){return Math.exp(e)}function _ee(e){return-Math.log(-e)}function wee(e){return-Math.exp(-e)}function Aee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Cee(e){return e===10?Aee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Mee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z5(e){return(t,n)=>-e(-t,n)}function RM(e){const t=e(R5,N5),n=t.domain;let i=10,r,a;function s(){return r=Mee(i),a=Cee(i),n()[0]<0?(r=z5(r),a=z5(a),e(_ee,wee)):e(R5,N5),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const u=n();let f=u[0],d=u[u.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=o==null?10:+o;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=H_(f,d,S))}else _=H_(p,y,Math.min(y-p,S)).map(a);return h?_.reverse():_},t.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=Ru(u)).precision==null&&(u.trim=!0),u=kv(u)),o===1/0)return u;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?u(d):""}},t.nice=()=>n(kL(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function DL(){const e=RM(tb()).domain([1,10]);return e.copy=()=>Fp(e,DL()).base(e.base()),Ja.apply(e,arguments),e}function F5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function L5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function NM(e){var t=1,n=e(F5(t),L5(t));return n.constant=function(i){return arguments.length?e(F5(t=+i),L5(t)):t},ac(n)}function OL(){var e=NM(tb());return e.copy=function(){return Fp(e,OL()).constant(e.constant())},Ja.apply(e,arguments)}function U5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $ee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Tee(e){return e<0?-e*e:e*e}function zM(e){var t=e(Di,Di),n=1;function i(){return n===1?e(Di,Di):n===.5?e($ee,Tee):e(U5(n),U5(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},ac(t)}function FM(){var e=zM(tb());return e.copy=function(){return Fp(e,FM()).exponent(e.exponent())},Ja.apply(e,arguments),e}function kee(){return FM.apply(null,arguments).exponent(.5)}function RL(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=Y8(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[sl(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ps),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return RL().domain(e).range(t).unknown(i)},Ja.apply(a,arguments)}function NL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(u){return u!=null&&u<=u?r[sl(i,u,0,n)]:a}function o(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,o()):[e,t]},s.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,o()):r.slice()},s.invertExtent=function(u){var f=r.indexOf(u);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(u){return arguments.length&&(a=u),s},s.thresholds=function(){return i.slice()},s.copy=function(){return NL().domain([e,t]).range(r).unknown(a)},Ja.apply(ac(s),arguments)}function zL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[sl(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return zL().domain(e).range(t).unknown(n)},Ja.apply(r,arguments)}function Dee(e){return new Date(e)}function Oee(e){return e instanceof Date?+e:+new Date(+e)}function LM(e,t,n,i,r,a,s,o,u,f){var d=CL(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),C=f("%Y");function M(k){return(u(k)<k?y:o(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:C)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Oee)):p().map(Dee)},d.ticks=function(k){var T=p();return e(T[0],T[T.length-1],k??10)},d.tickFormat=function(k,T){return T==null?M:f(T)},d.nice=function(k){var T=p();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?p(kL(T,k)):d},d.copy=function(){return Fp(d,LM(e,t,n,i,r,a,s,o,u,f))},d}function Ree(){return Ja.apply(LM(BW,IW,Ha,Kg,wd,js,Rv,Dv,Ls,wC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Nee(){return Ja.apply(LM(LW,UW,Ga,Jg,Ad,tl,Nv,Ov,Ls,AC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nb(){var e=0,t=1,n,i,r,a,s=Di,o=!1,u;function f(h){return h==null||isNaN(h=+h)?u:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(wl),f.rangeRound=d(zp),f.unknown=function(h){return arguments.length?(u=h,f):u},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Al(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function UM(){var e=ac(nb()(Di));return e.copy=function(){return Al(e,UM())},El.apply(e,arguments)}function FL(){var e=RM(nb()).domain([1,10]);return e.copy=function(){return Al(e,FL()).base(e.base())},El.apply(e,arguments)}function LL(){var e=NM(nb());return e.copy=function(){return Al(e,LL()).constant(e.constant())},El.apply(e,arguments)}function BM(){var e=zM(nb());return e.copy=function(){return Al(e,BM()).exponent(e.exponent())},El.apply(e,arguments)}function zee(){return BM.apply(null,arguments).exponent(.5)}function ib(){var e=0,t=.5,n=1,i=1,r,a,s,o,u,f=Di,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:u),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=OM(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(wl),y.rangeRound=v(zp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function UL(){var e=ac(ib()(Di));return e.copy=function(){return Al(e,UL())},El.apply(e,arguments)}function BL(){var e=RM(ib()).domain([.1,1,10]);return e.copy=function(){return Al(e,BL()).base(e.base())},El.apply(e,arguments)}function IL(){var e=NM(ib());return e.copy=function(){return Al(e,IL()).constant(e.constant())},El.apply(e,arguments)}function IM(){var e=zM(ib());return e.copy=function(){return Al(e,IM()).exponent(e.exponent())},El.apply(e,arguments)}function Fee(){return IM.apply(null,arguments).exponent(.5)}function es(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Lee=es("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uee=es("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Bee=es("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Iee=es("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Pee=es("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),jee=es("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),qee=es("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Hee=es("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Gee=es("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Yee=es("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function PM(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Xee="identity",Gf="linear",Qs="log",Lp="pow",Up="sqrt",rb="symlog",zu="time",Fu="utc",Ba="sequential",kd="diverging",Yf="quantile",ab="quantize",sb="threshold",jM="ordinal",hw="point",PL="band",qM="bin-ordinal",hn="continuous",Bp="discrete",Ip="discretizing",Lr="interpolating",HM="temporal";function Vee(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Wee(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,u,f;for(r<i&&(o=i,i=r,r=o),u=0,f=n.length;u<f;++u)n[u]>=i&&n[u]<=r&&(a<0&&(a=u),s=u);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function GM(){const e=MM().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,u=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=PM(h,o,u);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=er(h).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),o=u,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,sl(y,b)-1),w=b===S?_:sl(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return GM().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(u).align(f)},d()}function jL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jL(t())},e}function Qee(){return jL(GM().paddingInner(1))}var Zee=Array.prototype.map;function Kee(e){return Zee.call(e,Qn)}const Jee=Array.prototype.slice;function qL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(sl(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Kee(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Jee.call(i),n):t.slice()},n.tickFormat=function(i,r){return ML(e[0],Je(e),i??10,r)},n.copy=function(){return qL().domain(n.domain()).range(n.range())},n}const dy=new Map,HL=Symbol("vega_scale");function GL(e){return e[HL]=!0,e}function B5(e){return e&&e[HL]===!0}function ete(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Vee(a):a.invertExtent?Wee(a):void 0),a.type=e,GL(a)};return i.metadata=aa(xe(n)),i}function lt(e,t,n){return arguments.length>1?(dy.set(e,ete(e,t,n)),this):YL(e)?dy.get(e):void 0}lt(Xee,TL);lt(Gf,$L,hn);lt(Qs,DL,[hn,Qs]);lt(Lp,FM,hn);lt(Up,kee,hn);lt(rb,OL,hn);lt(zu,Ree,[hn,HM]);lt(Fu,Nee,[hn,HM]);lt(Ba,UM,[hn,Lr]);lt(`${Ba}-${Gf}`,UM,[hn,Lr]);lt(`${Ba}-${Qs}`,FL,[hn,Lr,Qs]);lt(`${Ba}-${Lp}`,BM,[hn,Lr]);lt(`${Ba}-${Up}`,zee,[hn,Lr]);lt(`${Ba}-${rb}`,LL,[hn,Lr]);lt(`${kd}-${Gf}`,UL,[hn,Lr]);lt(`${kd}-${Qs}`,BL,[hn,Lr,Qs]);lt(`${kd}-${Lp}`,IM,[hn,Lr]);lt(`${kd}-${Up}`,Fee,[hn,Lr]);lt(`${kd}-${rb}`,IL,[hn,Lr]);lt(Yf,RL,[Ip,Yf]);lt(ab,NL,Ip);lt(sb,zL,Ip);lt(qM,qL,[Bp,Ip]);lt(jM,MM,Bp);lt(PL,GM,Bp);lt(hw,Qee,Bp);function YL(e){return dy.has(e)}function sc(e,t){const n=dy.get(e);return n&&n.metadata[t]}function YM(e){return sc(e,hn)}function Xf(e){return sc(e,Bp)}function gw(e){return sc(e,Ip)}function XL(e){return sc(e,Qs)}function tte(e){return sc(e,HM)}function VL(e){return sc(e,Lr)}function WL(e){return sc(e,Yf)}const nte=["clamp","base","constant","exponent"];function QL(e,t){const n=t[0],i=Je(t)-n;return function(r){return e(n+r*i)}}function ob(e,t,n){return OM(XM(t||"rgb",n),e)}function ZL(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function KL(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ii(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=lt(a)().domain([t,n]).range([0,1]),nte.forEach(o=>e[o]?s[o](e[o]()):0),s)}function XM(e,t){const n=vee[ite(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function ite(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const rte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ate={accent:Uee,category10:Lee,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Bee,observable10:Iee,paired:Pee,pastel1:jee,pastel2:qee,set1:Hee,set2:Gee,set3:Yee,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function JL(e){if(re(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function eU(e,t){for(const n in e)VM(n,t(e[n]))}const I5={};eU(ate,JL);eU(rte,e=>ob(JL(e)));function VM(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(I5[e]=t,this):I5[e]}const A1="symbol",ste="discrete",ote="gradient",lte=e=>re(e)?e.map(t=>String(t)):String(e),ute=(e,t)=>e[1]-t[1],cte=(e,t)=>t[1]-e[1];function WM(e,t,n){let i;return st(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(kp(e.domain())/n||1)+1))),ve(t)&&(i=t.step,t=t.interval),ye(t)&&(t=e.type===zu?Cd(t):e.type==Fu?Md(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function tU(e,t,n){let i=e.range(),r=i[0],a=Je(i),s=ute;if(r>a&&(i=a,a=r,r=i,s=cte),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Je(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,f)=>!(f%2));t.length<3&&(t=o)}return t}function QM(e,t){return e.bins?tU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function nU(e,t,n,i,r,a){const s=t.type;let o=lte;if(s===zu||r===zu)o=e.timeFormat(i);else if(s===Fu||r===Fu)o=e.utcFormat(i);else if(XL(s)){const u=e.formatFloat(i);if(a||t.bins)o=u;else{const f=iU(t,n,!1);o=d=>f(d)?u(d):""}}else if(t.tickFormat){const u=t.domain();o=e.formatSpan(u[0],u[u.length-1],n,i)}else i&&(o=e.format(i));return o}function iU(e,t,n){const i=QM(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=u=>{let f=u/Math.pow(r,Math.round(Math.log(u)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const pw={[Yf]:"quantiles",[ab]:"thresholds",[sb]:"domain"},rU={[Yf]:"quantiles",[ab]:"domain"};function aU(e,t){return e.bins?hte(e.bins):e.type===Qs?iU(e,t,!0):pw[e.type]?dte(e[pw[e.type]]()):QM(e,t)}function fte(e,t,n){const i=t[rU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function dte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function hte(e){const t=e.slice(0,-1);return t.max=Je(e),t}const gte=e=>pw[e.type]||e.bins;function sU(e,t,n,i,r,a,s){const o=rU[t.type]&&a!==zu&&a!==Fu?fte(e,t,r):nU(e,t,n,r,a,s);return i===A1&&gte(t)?pte(o):i===ste?mte(o):yte(o)}const pte=e=>(t,n,i)=>{const r=P5(i[n+1],P5(i.max,1/0)),a=j5(t,e),s=j5(r,e);return a&&s?a+" – "+s:s?"< "+s:"≥ "+a},P5=(e,t)=>e??t,mte=e=>(t,n)=>n?e(t):null,yte=e=>t=>e(t),j5=(e,t)=>Number.isFinite(e)?t(e):null;function vte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Je(t),a=r-i;if(e.type===sb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function bte(e,t,n,i){const r=i||t.type;return ye(n)&&tte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===zu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Fu?e.utcFormat("%A, %d %B %Y, %X UTC"):sU(e,t,5,null,n,i,!0)}function oU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=bte(e,t,n.format,n.formatType);if(gw(t.type)){const a=aU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Xf(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Je(a))}`}}let lU=0;function xte(){lU=0}const hy="p_";function ZM(e){return e&&e.gradient}function uU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?hy:"";return r||(r=e.id="gradient_"+lU++,i==="radial"?(e.x1=Ca(e.x1,.5),e.y1=Ca(e.y1,.5),e.r1=Ca(e.r1,0),e.x2=Ca(e.x2,.5),e.y2=Ca(e.y2,.5),e.r2=Ca(e.r2,.5),a=hy):(e.x1=Ca(e.x1,0),e.y1=Ca(e.y1,0),e.x2=Ca(e.x2,1),e.y2=Ca(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Ca(e,t){return e??t}function cU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const q5={basis:{curve:mJ},"basis-closed":{curve:yJ},"basis-open":{curve:vJ},bundle:{curve:bJ,tension:"beta",value:.85},cardinal:{curve:xJ,tension:"tension",value:0},"cardinal-open":{curve:EJ,tension:"tension",value:0},"cardinal-closed":{curve:SJ,tension:"tension",value:0},"catmull-rom":{curve:_J,tension:"alpha",value:.5},"catmull-rom-closed":{curve:wJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:AJ,tension:"alpha",value:.5},linear:{curve:EM},"linear-closed":{curve:CJ},monotone:{horizontal:$J,vertical:MJ},natural:{curve:TJ},step:{curve:kJ},"step-after":{curve:OJ},"step-before":{curve:DJ}};function KM(e,t,n){var i=_e(q5,e)&&q5[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Ste={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ete=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,_te=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,wte=/^((\s+,?\s*)|(,\s*))/,Ate=/^[01]/;function Vf(e){const t=[];return(e.match(Ete)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=Ste[a],o=Cte(a,s,i.slice(1).trim()),u=o.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),u!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<u;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function Cte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Ate:_te,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const u=n.slice(r).match(wte);u!==null&&(r+=u[0].length)}return i}const fl=Math.PI/180,Mte=1e-14,pu=Math.PI/2,Oa=Math.PI*2,of=Math.sqrt(3)/2;var vE={},bE={},fU=[].join;function $te(e,t,n,i,r,a,s,o,u){const f=fU.call(arguments);if(vE[f])return vE[f];const d=s*fl,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(u-t)*.5,v=p*(u-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=h/n,w=-h/i,A=p/i,C=S*o+_*u,M=w*o+A*u,k=S*e+_*t,T=w*e+A*t;let N=1/((k-C)*(k-C)+(T-M)*(T-M))-.25;N<0&&(N=0);let B=Math.sqrt(N);a==r&&(B=-B);const L=.5*(C+k)-B*(T-M),G=.5*(M+T)+B*(k-C),H=Math.atan2(M-G,C-L);let F=Math.atan2(T-G,k-L)-H;F<0&&a===1?F+=Oa:F>0&&a===0&&(F-=Oa);const R=Math.ceil(Math.abs(F/(pu+.001))),P=[];for(let X=0;X<R;++X){const K=H+X*F/R,z=H+(X+1)*F/R;P[X]=[L,G,K,z,n,i,h,p]}return vE[f]=P}function Tte(e){const t=fU.call(e);if(bE[t])return bE[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],f=e[7];const d=f*s,h=-u*o,p=u*s,y=f*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),C=8/3*A*A/Math.sin(w),M=n+v-C*b,k=i+b+C*v,T=n+S,O=i+_,N=T+C*_,B=O-C*S;return bE[t]=[d*M+h*k,p*M+y*k,d*N+h*B,p*N+y*B,d*T+h*O,p*T+y*O]}const xr=["l",0,0,0,0,0,0,0];function kte(e,t,n){const i=xr[0]=e[0];if(i==="a"||i==="A")xr[1]=t*e[1],xr[2]=n*e[2],xr[3]=e[3],xr[4]=e[4],xr[5]=e[5],xr[6]=t*e[6],xr[7]=n*e[7];else if(i==="h"||i==="H")xr[1]=t*e[1];else if(i==="v"||i==="V")xr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)xr[r]=(r%2==1?t:n)*e[r];return xr}function sp(e,t,n,i,r,a){var s,o=null,u=0,f=0,d=0,h=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=kte(s,r,a)),s[0]){case"l":u+=s[1],f+=s[2],e.lineTo(u+n,f+i);break;case"L":u=s[1],f=s[2],e.lineTo(u+n,f+i);break;case"h":u+=s[1],e.lineTo(u+n,f+i);break;case"H":u=s[1],e.lineTo(u+n,f+i);break;case"v":f+=s[1],e.lineTo(u+n,f+i);break;case"V":f=s[1],e.lineTo(u+n,f+i);break;case"m":u+=s[1],f+=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"M":u=s[1],f=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"c":p=u+s[5],y=f+s[6],d=u+s[3],h=f+s[4],e.bezierCurveTo(u+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),u=p,f=y;break;case"C":u=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,u+n,f+i);break;case"s":p=u+s[3],y=f+s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,u+s[1]+n,f+s[2]+i,p+n,y+i),d=u+s[1],h=f+s[2],u=p,f=y;break;case"S":p=s[3],y=s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"q":p=u+s[3],y=f+s[4],d=u+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"t":p=u+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=u,h=f):o[0]==="t"?(d=2*u-v,h=2*f-b):o[0]==="q"&&(d=2*u-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y,d=u+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*u-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"a":H5(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+f+i]),u+=s[6],f+=s[7];break;case"A":H5(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),u=s[6],f=s[7];break;case"z":case"Z":u=S,f=_,e.closePath();break}o=s}}function H5(e,t,n,i){const r=$te(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Tte(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const G5=.5773502691896257,Y5={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Oa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*G5,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*G5;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function dU(e){return _e(Y5,e)?Y5[e]:Dte(e)}var xE={};function Dte(e){if(!_e(xE,e)){const t=Vf(e);xE[e]={draw:function(n,i){sp(n,t,0,0,Math.sqrt(i)/2)}}}return xE[e]}const zo=.448084975506;function Ote(e){return e.x}function Rte(e){return e.y}function Nte(e){return e.width}function zte(e){return e.height}function Cs(e){return typeof e=="function"?e:()=>+e}function Gm(e,t,n){return Math.max(t,Math.min(e,n))}function hU(){var e=Ote,t=Rte,n=Nte,i=zte,r=Cs(0),a=r,s=r,o=r,u=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Gm(+r.call(this,d),0,w),C=Gm(+a.call(this,d),0,w),M=Gm(+s.call(this,d),0,w),k=Gm(+o.call(this,d),0,w);if(u||(u=y=Vv()),A<=0&&C<=0&&M<=0&&k<=0)u.rect(v,b,S,_);else{var T=v+S,O=b+_;u.moveTo(v+A,b),u.lineTo(T-C,b),u.bezierCurveTo(T-zo*C,b,T,b+zo*C,T,b+C),u.lineTo(T,O-k),u.bezierCurveTo(T,O-zo*k,T-zo*k,O,T-k,O),u.lineTo(v+M,O),u.bezierCurveTo(v+zo*M,O,v,O-zo*M,v,O-M),u.lineTo(v,b+A),u.bezierCurveTo(v,b+zo*A,v+zo*A,b,v+A,b),u.closePath()}if(y)return u=null,y+""||null}return f.x=function(d){return arguments.length?(e=Cs(d),f):e},f.y=function(d){return arguments.length?(t=Cs(d),f):t},f.width=function(d){return arguments.length?(n=Cs(d),f):n},f.height=function(d){return arguments.length?(i=Cs(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=Cs(d),a=h!=null?Cs(h):r,o=p!=null?Cs(p):r,s=y!=null?Cs(y):a,f):r},f.context=function(d){return arguments.length?(u=d??null,f):u},f}function gU(){var e,t,n,i,r=null,a,s,o,u;function f(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*u,A=(S/=_)*u,C=Math.atan2(S,b);r.moveTo(s-w,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,C-Math.PI,C),r.lineTo(s+w,o+A),r.arc(s,o,u,C,C+Math.PI)}else r.arc(h,p,v,0,Oa);r.closePath()}else a=1;s=h,o=p,u=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=Vv()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function Pp(e,t){return e??t}const jp=e=>e.x||0,qp=e=>e.y||0,Fte=e=>e.width||0,Lte=e=>e.height||0,Ute=e=>(e.x||0)+(e.width||0),Bte=e=>(e.y||0)+(e.height||0),Ite=e=>e.startAngle||0,Pte=e=>e.endAngle||0,jte=e=>e.padAngle||0,qte=e=>e.innerRadius||0,Hte=e=>e.outerRadius||0,Gte=e=>e.cornerRadius||0,Yte=e=>Pp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Xte=e=>Pp(e.cornerRadiusTopRight,e.cornerRadius)||0,Vte=e=>Pp(e.cornerRadiusBottomRight,e.cornerRadius)||0,Wte=e=>Pp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Qte=e=>Pp(e.size,64),Zte=e=>e.size||1,lb=e=>e.defined!==!1,Kte=e=>dU(e.shape||"circle"),Jte=hJ().startAngle(Ite).endAngle(Pte).padAngle(jte).innerRadius(qte).outerRadius(Hte).cornerRadius(Gte),ene=q7().x(jp).y1(qp).y0(Bte).defined(lb),tne=q7().y(qp).x1(jp).x0(Ute).defined(lb),nne=j7().x(jp).y(qp).defined(lb),ine=hU().x(jp).y(qp).width(Fte).height(Lte).cornerRadius(Yte,Xte,Vte,Wte),rne=pJ().type(Kte).size(Qte),ane=gU().x(jp).y(qp).defined(lb).size(Zte);function JM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function sne(e,t){return Jte.context(e)(t)}function one(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?tne:ene).curve(KM(i,n.orient,n.tension)).context(e)(t)}function lne(e,t){const n=t[0],i=n.interpolate||"linear";return nne.curve(KM(i,n.orient,n.tension)).context(e)(t)}function Dd(e,t,n,i){return ine.context(e)(t,n,i)}function une(e,t){return(t.mark.shape||t.shape).context(e)(t)}function cne(e,t){return rne.context(e)(t)}function fne(e,t){return ane.context(e)(t)}var pU=1;function dne(){pU=1}function e$(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+pU++),s=r.clipping[a]||(r.clipping[a]={id:a});return je(i)?s.path=i(null):JM(n)?s.path=Dd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function rn(e){this.clear(),e&&this.union(e)}rn.prototype={clone(){return new rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),u=Math.sin(e),f=t-t*o+n*u,d=n-t*u-n*o;return[o*i-u*r+f,u*i+o*r+d,o*i-u*s+f,u*i+o*s+d,o*a-u*r+f,u*a+o*r+d,o*a-u*s+f,u*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function ub(e){this.mark=e,this.bounds=this.bounds||new rn}function cb(e){ub.call(this,e),this.items=this.items||[]}ge(cb,ub);class mU{constructor(t){this._pending=0,this._loader=t||Fv()}pending(){return this._pending}sanitizeURL(t){const n=this;return X5(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Jh(n),i)).catch(()=>(Jh(n),null))}loadImage(t){const n=this,i=RJ();return X5(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=_e(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Jh(n),s.onerror=()=>Jh(n),s.src=a,s}).catch(r=>(Jh(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function X5(e){e._pending+=1}function Jh(e){e._pending-=1}function to(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?hne(t,i):0))}return e}function hne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const gne=Oa-1e-8;let fb,C1,M1,Su,mw,$1,yw,vw;const Go=(e,t)=>fb.add(e,t),T1=(e,t)=>Go(C1=e,M1=t),V5=e=>Go(e,fb.y1),W5=e=>Go(fb.x1,e),mu=(e,t)=>mw*e+yw*t,yu=(e,t)=>$1*e+vw*t,SE=(e,t)=>Go(mu(e,t),yu(e,t)),EE=(e,t)=>T1(mu(e,t),yu(e,t));function Hp(e,t){return fb=e,t?(Su=t*fl,mw=vw=Math.cos(Su),$1=Math.sin(Su),yw=-$1):(mw=vw=1,Su=$1=yw=0),pne}const pne={beginPath(){},closePath(){},moveTo:EE,lineTo:EE,rect(e,t,n,i){Su?(SE(e+n,t),SE(e+n,t+i),SE(e,t+i),EE(e,t)):(Go(e+n,t+i),T1(e,t))},quadraticCurveTo(e,t,n,i){const r=mu(e,t),a=yu(e,t),s=mu(n,i),o=yu(n,i);Q5(C1,r,s,V5),Q5(M1,a,o,W5),T1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=mu(e,t),o=yu(e,t),u=mu(n,i),f=yu(n,i),d=mu(r,a),h=yu(r,a);Z5(C1,s,u,d,V5),Z5(M1,o,f,h,W5),T1(d,h)},arc(e,t,n,i,r,a){if(i+=Su,r+=Su,C1=n*Math.cos(r)+e,M1=n*Math.sin(r)+t,Math.abs(r-i)>gne)Go(e-n,t-n),Go(e+n,t+n);else{const s=f=>Go(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,u;if(s(i),s(r),r!==i)if(i=i%Oa,i<0&&(i+=Oa),r=r%Oa,r<0&&(r+=Oa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Oa,o=i-i%pu,u=0;u<4&&o>r;++u,o-=pu)s(o);else for(o=i-i%pu+pu,u=0;u<4&&o<r;++u,o=o+pu)s(o)}}};function Q5(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function Z5(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let u=0,f=0,d;Math.abs(a)>Mte?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),u=(-s+d)/a,f=(-s-d)/a)):u=.5*o/s,0<u&&u<1&&r(K5(u,e,t,n,i)),0<f&&f<1&&r(K5(f,e,t,n,i))}function K5(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var rl=(rl=il(1,1))?rl.getContext("2d"):null;const bw=new rn;function t$(e){return function(t,n){if(!rl)return!0;e(rl,t),bw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=bw;for(let o=r;o<=s;++o)for(let u=i;u<=a;++u)if(rl.isPointInPath(u,o))return!0;return!1}}function n$(e,t){return t.contains(e.x||0,e.y||0)}function yU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(bw.set(n,i,n+r,i+a))}function vU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Sf(t,n,i,r,a)}function Sf(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:u}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=u-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Wf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Hr(e,t){return e??t}function J5(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function mne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Hr(t.x1,.5)*i,n.y1+Hr(t.y1,.5)*r,Math.max(i,r)*Hr(t.r1,0),n.x1+Hr(t.x2,.5)*i,n.y1+Hr(t.y2,.5)*r,Math.max(i,r)*Hr(t.r2,.5));else{const s=Hr(t.x1,0),o=Hr(t.y1,0),u=Hr(t.x2,1),f=Hr(t.y2,0);if(s===u||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+u*i,n.y1+f*r);else{const d=il(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=J5(h.createLinearGradient(s,o,u,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return J5(a,t.stops)}function bU(e,t,n){return ZM(n)?mne(e,n,t.bounds):n}function gy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=bU(e,t,t.fill),!0):!1}var yne=[];function Qf(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=bU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||yne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function vne(e,t){return e.zindex-t.zindex||e.index-t.index}function i$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(vne)}function oa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=i$(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function py(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=i$(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function r$(e){return function(t,n,i){oa(n,r=>{(!i||i.intersects(r.bounds))&&xU(e,t,r,r)})}}function bne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&xU(e,t,n.items[0],n.items)}}function xU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Wf(t,n),n.fill&&gy(t,n,r)&&t.fill(),n.stroke&&Qf(t,n,r)&&t.stroke()))}function db(e){return e=e||Dr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,py(n,o=>{const u=o.bounds;if(!(u&&!u.contains(a,s)||!u)&&e(t,o,i,r,a,s))return o})}}function Gp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,u=s.stroke&&n.isPointInStroke,f,d;return u&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||u&&n.isPointInStroke(r,a)}}function a$(e){return db(Gp(e))}function Cu(e,t){return"translate("+e+","+t+")"}function s$(e){return"rotate("+e+")"}function xne(e,t){return"scale("+e+","+t+")"}function SU(e){return Cu(e.x||0,e.y||0)}function Sne(e){return Cu(e.x||0,e.y||0)+(e.angle?" "+s$(e.angle):"")}function Ene(e){return Cu(e.x||0,e.y||0)+(e.angle?" "+s$(e.angle):"")+(e.scaleX||e.scaleY?" "+xne(e.scaleX||1,e.scaleY||1):"")}function o$(e,t,n){function i(s,o){s("transform",Sne(o)),s("d",t(null,o))}function r(s,o){return t(Hp(s,o.angle),o),to(s,o).translate(o.x||0,o.y||0)}function a(s,o){var u=o.x||0,f=o.y||0,d=o.angle||0;s.translate(u,f),d&&s.rotate(d*=fl),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-u,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:r$(a),pick:a$(a),isect:n||t$(a)}}var _ne=o$("arc",sne);function wne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function Ane(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function Cne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function l$(e,t,n){function i(u,f){var d=f.mark.items;d.length&&u("d",t(null,d))}function r(u,f){var d=f.items;return d.length===0?u:(t(Hp(u),d),to(u,d[0]))}function a(u,f){u.beginPath(),t(u,f)}const s=Gp(a);function o(u,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=u.pixelRatio,h*=u.pixelRatio,s(u,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:bne(a),pick:o,isect:n$,tip:n}}var Mne=l$("area",one,wne);function $ne(e,t){var n=t.clip;e.save(),je(n)?(e.beginPath(),n(e),e.clip()):EU(e,t.group)}function EU(e,t){e.beginPath(),JM(t)?Dd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function _U(e){const t=Hr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Tne(e,t){e("transform",SU(t))}function wU(e,t){const n=_U(t);e("d",Dd(null,t,n,n))}function kne(e,t){e("class","background"),e("aria-hidden",!0),wU(e,t)}function Dne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?wU(e,t):e("d","")}function One(e,t,n){const i=t.clip?e$(n,t,t):null;e("clip-path",i)}function Rne(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),to(e,t),e.translate(t.x||0,t.y||0)}function op(e,t,n,i){const r=_U(t);e.beginPath(),Dd(e,t,(n||0)+r,(i||0)+r)}const Nne=Gp(op),zne=Gp(op,!1),Fne=Gp(op,!0);function Lne(e,t,n,i){oa(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(op(e,r,a,s),Wf(e,r),r.fill&&gy(e,r,u)&&e.fill(),r.stroke&&!o&&Qf(e,r,u)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&EU(e,r),n&&n.translate(-a,-s),oa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&u&&(op(e,r,a,s),Wf(e,r),Qf(e,r,u)&&e.stroke())})}function Une(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return py(t,u=>{let f,d,h;const p=u.bounds;if(p&&!p.contains(r,a))return;d=u.x||0,h=u.y||0;const y=d+(u.width||0),v=h+(u.height||0),b=u.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&JM(u)&&!Fne(e,u,s,o))return e.restore(),null;const S=u.strokeForeground,_=t.interactive!==!1;return _&&S&&u.stroke&&zne(e,u,s,o)?(e.restore(),u):(f=py(u,w=>Bne(w,d,h)?this.pick(w,n,i,d,h):null),!f&&_&&(u.fill||!S&&u.stroke)&&Nne(e,u,s,o)&&(f=u),e.restore(),f||null)})}function Bne(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Ine={type:"group",tag:"g",nested:!1,attr:Tne,bound:Rne,draw:Lne,pick:Une,isect:yU,content:One,background:kne,foreground:Dne},lp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function u$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function c$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function f$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hb(e,t){return e==="center"?t/2:e==="right"?t:0}function gb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Pne(e,t,n){const i=u$(t,n),r=c$(t,i),a=f$(t,i),s=(t.x||0)-hb(t.align,r),o=(t.y||0)-gb(t.baseline,a),u=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",u,lp["xmlns:xlink"],"xlink:href"),e("transform",Cu(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function jne(e,t){const n=t.image,i=c$(t,n),r=f$(t,n),a=(t.x||0)-hb(t.align,i),s=(t.y||0)-gb(t.baseline,r);return e.set(a,s,a+i,s+r)}function qne(e,t,n){oa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=u$(i,this);let a=c$(i,r),s=f$(i,r);if(a===0||s===0)return;let o=(i.x||0)-hb(i.align,a),u=(i.y||0)-gb(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,u+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Wf(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,u,a,s))})}var Hne={type:"image",tag:"image",nested:!1,attr:Pne,bound:jne,draw:qne,pick:db(),isect:Dr,get:u$,xOffset:hb,yOffset:gb},Gne=l$("line",lne,Ane);function Yne(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Ene(t)),e("d",t.path)}function k1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*fl,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Vf(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),sp(e,u,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):sp(e,u,i,r,a,s)}function Xne(e,t){return k1(Hp(e,t.angle),t)?e.set(0,0,0,0):to(e,t,!0)}var Vne={type:"path",tag:"path",nested:!1,attr:Yne,bound:Xne,draw:r$(k1),pick:a$(k1),isect:t$(k1)};function Wne(e,t){e("d",Dd(null,t))}function Qne(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function e6(e,t){e.beginPath(),Dd(e,t)}var Zne={type:"rect",tag:"path",nested:!1,attr:Wne,bound:Qne,draw:r$(e6),pick:a$(e6),isect:yU};function Kne(e,t){e("transform",SU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Jne(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function AU(e,t,n){var i,r,a,s;return t.stroke&&Qf(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function eie(e,t,n){oa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&AU(e,i,r)&&(Wf(e,i),e.stroke())}})}function tie(e,t,n,i){return e.isPointInStroke?AU(e,t,1)&&e.isPointInStroke(n,i):!1}var nie={type:"rule",tag:"line",nested:!1,attr:Kne,bound:Jne,draw:eie,pick:db(tie),isect:vU},iie=o$("shape",une),rie=o$("symbol",cne,n$);const t6=R8();var ir={height:ts,measureWidth:d$,estimateWidth:my,width:my,canvas:CU};CU(!0);function CU(e){ir.width=e&&rl?d$:my}function my(e,t){return MU(hl(e,t),ts(e))}function MU(e,t){return~~(.8*e.length*t)}function d$(e,t){return ts(e)<=0||!(t=hl(e,t))?0:$U(t,pb(e))}function $U(e,t){const n=`(${t}) ${e}`;let i=t6.get(n);return i===void 0&&(rl.font=t,i=rl.measureText(e).width,t6.set(n,i)),i}function ts(e){return e.fontSize!=null?+e.fontSize||0:11}function dl(e){return e.lineHeight!=null?e.lineHeight:ts(e)+2}function aie(e){return re(e)?e.length>1?e:e[0]:e}function Yp(e){return aie(e.lineBreak&&e.text&&!re(e.text)?e.text.split(e.lineBreak):e.text)}function h$(e){const t=Yp(e);return(re(t)?t.length-1:0)*dl(e)}function hl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?oie(e,n):n}function sie(e){if(ir.width===d$){const t=pb(e);return n=>$U(n,t)}else if(ir.width===my){const t=ts(e);return n=>MU(n,t)}else return t=>ir.width(e,t)}function oie(e,t){var n=+e.limit,i=sie(e);if(i(t)<n)return t;var r=e.ellipsis||"…",a=e.dir==="rtl",s=0,o=t.length,u;if(n-=i(r),a){for(;s<o;)u=s+o>>>1,i(t.slice(u))>n?s=u+1:o=u;return r+t.slice(s)}else{for(;s<o;)u=1+(s+o>>>1),i(t.slice(0,u))<n?s=u:o=u-1;return t.slice(0,s)+r}}function Xp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function pb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ts(e)+"px "+Xp(e,t)}function g$(e){var t=e.baseline,n=ts(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*dl(e):t==="line-bottom"?.29*n-.5*dl(e):0)}const lie={left:"start",center:"middle",right:"end"},Ug=new rn;function mb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-pu,t+=i*Math.cos(r),n+=i*Math.sin(r)),Ug.x1=t,Ug.y1=n,Ug}function uie(e,t){var n=t.dx||0,i=(t.dy||0)+g$(t),r=mb(t),a=r.x1,s=r.y1,o=t.angle||0,u;e("text-anchor",lie[t.align]||"start"),o?(u=Cu(a,s)+" "+s$(o),(n||i)&&(u+=" "+Cu(n,i))):u=Cu(a+n,s+i),e("transform",u)}function p$(e,t,n){var i=ir.height(t),r=t.align,a=mb(t),s=a.x1,o=a.y1,u=t.dx||0,f=(t.dy||0)+g$(t)-Math.round(.8*i),d=Yp(t),h;if(re(d)?(i+=dl(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,ir.width(t,y)),0)):h=ir.width(t,d),r==="center"?u-=h/2:r==="right"&&(u-=h),e.set(u+=s,f+=o,u+h,f+i),t.angle&&!n)e.rotate(t.angle*fl,s,o);else if(n===2)return e.rotatedPoints(t.angle*fl,s,o);return e}function cie(e,t,n){oa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,u,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=pb(i),e.textAlign=i.align||"left",a=mb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*fl),s=o=0),s+=i.dx||0,o+=(i.dy||0)+g$(i),d=Yp(i),Wf(e,i),re(d))for(f=dl(i),u=0;u<d.length;++u)h=hl(i,d[u]),i.fill&&gy(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=hl(i,d),i.fill&&gy(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function fie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=mb(t),o=s.x1,u=s.y1,f=p$(Ug,t,1),d=-t.angle*fl,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*u),v=p*r+h*a+(u-p*o-h*u);return f.contains(y,v)}function die(e,t){const n=p$(Ug,e,2);return Sf(t,n[0],n[1],n[2],n[3])||Sf(t,n[0],n[1],n[4],n[5])||Sf(t,n[4],n[5],n[6],n[7])||Sf(t,n[2],n[3],n[6],n[7])}var hie={type:"text",tag:"text",nested:!1,attr:uie,bound:p$,draw:cie,pick:db(fie),isect:die},gie=l$("trail",fne,Cne),ur={arc:_ne,area:Mne,group:Ine,image:Hne,line:Gne,path:Vne,rect:Zne,rule:nie,shape:iie,symbol:rie,text:hie,trail:gie};function xw(e,t,n){var i=ur[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new rn),e,n)}var n6={mark:null};function TU(e,t,n){var i=ur[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,u,f,d;if(i.nested)return s?f=a[0]:(n6.mark=e,f=n6),d=xw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new rn,s)for(o=0,u=a.length;o<u;++o)t.union(xw(a[o],r,n));return e.bounds=t}const pie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function kU(e,t){return JSON.stringify(e,pie,t)}function DU(e){const t=typeof e=="string"?JSON.parse(e):e;return OU(t)}function OU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&OU(n[r]);return t&&TU(e),e}class RU{constructor(t){arguments.length?this.root=DU(t):(this.root=i6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cb(this.root)])}toJSON(t){return kU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=i6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function i6(e,t){const n={bounds:new rn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Yo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function m$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function ln(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Yo(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Er(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function NU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function mie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=ur[r.marktype]).tip){for(s=yb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let y$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Fv(),this._tooltip=n||yie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Yo(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=mie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let u=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,f+=t.y||0;return{x:u,y:f,width:s,height:o,left:u,top:f,right:u+s,bottom:f+o}}};function yie(e,t,n,i){e.element().setAttribute("title",i||"")}class Vp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new mU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const vie="keydown",bie="keypress",xie="keyup",zU="dragenter",D1="dragleave",FU="dragover",Sw="pointerdown",Sie="pointerup",yy="pointermove",O1="pointerout",LU="pointerover",Ew="mousedown",Eie="mouseup",UU="mousemove",vy="mouseout",BU="mouseover",by="click",_ie="dblclick",wie="wheel",IU="mousewheel",xy="touchstart",Sy="touchmove",Ey="touchend",Aie=[vie,bie,xie,zU,D1,FU,Sw,Sie,yy,O1,LU,Ew,Eie,UU,vy,BU,by,_ie,wie,IU,xy,Sy,Ey],_w=yy,Bg=vy,ww=by;class Wp extends y${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Aie,this.pointermove=a6([yy,UU],[LU,BU],[O1,vy]),this.dragover=a6([FU],[zU],[D1]),this.pointerout=s6([O1,vy]),this.dragleave=s6([D1])}initialize(t,n,i){return this._canvas=t&&m$(t,"canvas"),[by,Ew,Sw,yy,O1,D1].forEach(r=>r6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(IU,t)}pointerdown(t){this._down=this._active,this.fire(Sw,t)}mousedown(t){this._down=this._active,this.fire(Ew,t)}click(t){this._down===this._active&&(this.fire(by,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(xy,t,!0)}touchmove(t){this.fire(Sy,t,!0)}touchend(t){this.fire(Ey,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===ww&&r&&r.href?this.handleHref(n,r,r.href):(t===_w||t===Bg)&&this.handleTooltip(n,r,t!==Bg),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(r6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=yb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return ur[t.marktype].pick.call(this,s,t,n,i,r,a)}}const Cie=e=>e===xy||e===Sy||e===Ey?[xy,Sy,Ey]:[e];function r6(e,t){Cie(t).forEach(n=>Mie(e,n))}function Mie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function _g(e,t,n){t.forEach(i=>e.fire(i,n))}function a6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?_g(this,e,i):((!r||!r.exit)&&_g(this,n,i),this._active=a,_g(this,t,i),_g(this,e,i))}}function s6(e){return function(t){_g(this,e,t),this._active=null}}function $ie(){return typeof window<"u"&&window.devicePixelRatio||1}function Tie(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),u=s?$ie():r;e.width=t*u,e.height=n*u;for(const f in a)o[f]=a[f];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*i[0],u*i[1]),e}class _y extends Vp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new rn,this._tempb=new rn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:il(1,1,this._options.type),t&&this._canvas&&(Er(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Tie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||te("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,u=kie(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,u.expand(1)):Die(i,u.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=ur[n.marktype];n.clip&&$ne(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const kie=(e,t,n)=>new rn().set(0,0,t,n).translate(-e[0],-e[1]);function Die(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class PU extends y${constructor(t,n){super(t,n);const i=this;i._hrefHandler=_E(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=_E(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Bg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(ww,this._hrefHandler),r.removeEventListener(_w,this._tooltipHandler),r.removeEventListener(Bg,this._tooltipHandler)),this._svg=r=t&&m$(t,"svg"),r&&(r.addEventListener(ww,this._hrefHandler),r.addEventListener(_w,this._tooltipHandler),r.addEventListener(Bg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:_E(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const _E=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},jU="aria-hidden",v$="aria-label",b$="role",x$="aria-roledescription",qU="graphics-object",S$="graphics-symbol",HU=(e,t,n)=>({[b$]:e,[x$]:t,[v$]:n||void 0}),Oie=aa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),o6={axis:{desc:"axis",caption:zie},legend:{desc:"legend",caption:Fie},"title-text":{desc:"title",caption:e=>`Title text '${u6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${u6(e)}'`}},l6={ariaRole:b$,ariaRoleDescription:x$,description:v$};function GU(e,t){const n=t.aria===!1;if(e(jU,n||void 0),n||t.description==null)for(const i in l6)e(l6[i],void 0);else{const i=t.mark.marktype;e(v$,t.description),e(b$,t.ariaRole||(i==="group"?qU:S$)),e(x$,t.ariaRoleDescription||`${i} mark`)}}function YU(e){return e.aria===!1?{[jU]:!0}:Oie[e.role]?null:o6[e.role]?Nie(e,o6[e.role]):Rie(e)}function Rie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return HU(n?qU:S$,`${t} mark container`,e.description)}function Nie(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return HU(t.role||S$,t.desc,n.description||i(n))}catch{return null}}function u6(e){return xe(e.text).join(" ")}function zie(e){const t=e.datum,n=e.orient,i=t.title?XU(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Xf(o)?"discrete":o} scale with ${oU(s,a,e)}`}function Fie(e){const t=e.datum,n=t.title?XU(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,u=s.dataflow.locale();return Uie(i)+(n?` titled '${n}'`:"")+` for ${Lie(a)} with ${oU(u,o,e)}`}function XU(e){try{return xe(Je(e.items).items[0].text).join(" ")}catch{return null}}function Lie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Je(e)}function Uie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const VU=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Bie=e=>VU(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function E$(){let e="",t="",n="";const i=[],r=()=>t=n="",a=u=>{t&&(e+=`${t}>${n}`,r()),i.push(u)},s=(u,f)=>(f!=null&&(t+=` ${u}="${Bie(f)}"`),o),o={open(u){a(u),t="<"+u;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const u=i.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,r(),o},attr:s,text:u=>(n+=VU(u),o),toString:()=>e};return o}const WU=e=>QU(E$(),e)+"";function QU(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):QU(e,i)}return e.close()}const wy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Ay={blend:"mix-blend-mode"},ZU={fill:"none","stroke-miterlimit":10},eg=0,c6="http://www.w3.org/2000/xmlns/",on=lp.xmlns;class _$ extends Vp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=ln(t,0,"svg",on),this._svg.setAttributeNS(c6,"xmlns",on),this._svg.setAttributeNS(c6,"xmlns:xlink",lp["xmlns:xlink"]),this._svg.setAttribute("version",lp.version),this._svg.setAttribute("class","marks"),Er(t,1),this._root=ln(this._svg,eg,"g",on),Xo(this._root,ZU),Er(this._svg,eg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Xo(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=ln(t,eg,"rect",on),Xo(i,{width:this._width,height:this._height,fill:n}));const r=WU(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Er(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,u,f;for(o=0,u=t.length;o<u;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=ur[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,f6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,f6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=ur[s],u=n.interactive===!1?"none":null,f=o.tag==="g",d=d6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Er(d,0),n._svg;d.setAttribute("class",NU(n));const h=YU(n);for(const b in h)oi(d,b,h[b]);f||oi(d,"pointer-events",u),oi(d,"clip-path",n.clip?e$(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=d6(b,d,p,o.tag,a);S&&(this._update(o,_,b),f&&jie(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):oa(n,v),Er(d,y),d}_update(t,n,i){Bs=n,Vn=n.__values__,GU(Ig,i),t.attr(Ig,i,this);const r=Hie[t.type];r&&r.call(this,t,n,i),Bs&&this.style(Bs,i)}style(t,n){if(n!=null){for(const i in wy){let r=i==="font"?Xp(n):n[i];if(r===Vn[i])continue;const a=wy[i];r==null?t.removeAttribute(a):(ZM(r)&&(r=uU(r,this._defs.gradient,KU())),t.setAttribute(a,r+"")),Vn[i]=r}for(const i in Ay)R1(t,Ay[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=ln(t,eg+1,"defs",on)),r=Iie(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=ln(t,eg+1,"defs",on)),r=Pie(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Er(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function f6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Iie(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=ln(e,n++,"pattern",on);Xo(s,{id:hy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=ln(s,0,"rect",on),Xo(s,{width:1,height:1,fill:`url(${KU()}#${t.id})`}),e=ln(e,n++,"radialGradient",on),Xo(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ln(e,n++,"linearGradient",on),Xo(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=ln(e,i,"stop",on),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Er(e,i),n}function Pie(e,t,n){let i;return e=ln(e,n,"clipPath",on),e.setAttribute("id",t.id),t.path?(i=ln(e,0,"path",on),i.setAttribute("d",t.path)):(i=ln(e,0,"rect",on),Xo(i,{x:0,y:0,width:t.width,height:t.height})),Er(e,1),n+1}function jie(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;oa(n,s=>{r=e.mark(t,s,r,i),++a}),Er(t,1+a)}function d6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Yo(s,i,on),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Yo(s,"path",on);a.appendChild(o),o.__data__=e;const u=Yo(s,"g",on);a.appendChild(u),u.__data__=e;const f=Yo(s,"path",on);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||qie(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function qie(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bs=null,Vn=null;const Hie={group(e,t,n){const i=Bs=t.childNodes[2];Vn=i.__values__,e.foreground(Ig,n,this),Vn=t.__values__,Bs=t.childNodes[1],e.content(Ig,n,this);const r=Bs=t.childNodes[0];e.background(Ig,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Vn.events&&(oi(i,"pointer-events",a),oi(r,"pointer-events",a),Vn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;oi(i,"display",null),this.style(r,n),oi(r,"stroke",null),s&&(n.fill=null),Vn=i.__values__,this.style(i,n),s&&(n.fill=s),Bs=null}else oi(i,"display","none")},image(e,t,n){n.smooth===!1?(R1(t,"image-rendering","optimizeSpeed"),R1(t,"image-rendering","pixelated")):R1(t,"image-rendering",null)},text(e,t,n){const i=Yp(n);let r,a,s,o;re(i)?(a=i.map(u=>hl(n,u)),r=a.join(`
`),r!==Vn.text&&(Er(t,0),s=t.ownerDocument,o=dl(n),a.forEach((u,f)=>{const d=Yo(s,"tspan",on);d.__data__=n,d.textContent=u,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Vn.text=r)):(a=hl(n,i),a!==Vn.text&&(t.textContent=a,Vn.text=a)),oi(t,"font-family",Xp(n)),oi(t,"font-size",ts(n)+"px"),oi(t,"font-style",n.fontStyle),oi(t,"font-variant",n.fontVariant),oi(t,"font-weight",n.fontWeight)}};function Ig(e,t,n){t!==Vn[e]&&(n?Gie(Bs,e,t,n):oi(Bs,e,t),Vn[e]=t)}function R1(e,t,n){n!==Vn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vn[t]=n)}function Xo(e,t){for(const n in t)oi(e,n,t[n])}function oi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Gie(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function KU(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class JU extends Vp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=E$();n.open("svg",Pe({},lp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",ZU,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=ur[n.marktype],r=i.tag,a=[GU,i.attr];t.open("g",{class:NU(n),"clip-path":n.clip?e$(this,n,n.group):null},YU(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const u=this.href(o);if(u&&t.open("a",u),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=Yp(o);if(re(f)){const d={x:0,dy:dl(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text(hl(o,f[h])).close()}else t.text(hl(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),oa(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),u&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):oa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,u,f,d)=>{a[d||o]=u};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Yie(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:hy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<o.length;++u)t.open("stop",{offset:o[u].offset,"stop-color":o[u].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Yie(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Xp(t),e["font-size"]=ts(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in wy){let o=t[s];const u=wy[s];o==="transparent"&&(u==="fill"||u==="stroke")||o!=null&&(ZM(o)&&(o=uU(o,r.gradient,"")),e[u]=o)}for(const s in Ay){const o=t[s];o!=null&&(a=a||[],a.push(`${Ay[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Yr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Xie(e){Yr.svgMarkTypes=e.svgMarkTypes??["text"],Yr.svgOnTop=e.svgOnTop??!0,Yr.debug=e.debug??!1}class Aw extends Vp{constructor(t){super(t),this._svgRenderer=new _$(t),this._canvasRenderer=new _y(t)}initialize(t,n,i,r,a){this._root_el=ln(t,0,"div");const s=ln(this._root_el,0,"div"),o=ln(this._root_el,1,"div");return this._root_el.style.position="relative",Yr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Yr.svgOnTop?o:s,this._canvasEl=Yr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Yr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Yr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Yr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Yr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class eB extends Wp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=ln(ln(t,0,"div"),Yr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const tB="canvas",nB="hybrid",iB="png",rB="svg",aB="none",Vo={Canvas:tB,PNG:iB,SVG:rB,Hybrid:nB,None:aB},Lu={};Lu[tB]=Lu[iB]={renderer:_y,headless:_y,handler:Wp};Lu[rB]={renderer:_$,headless:JU,handler:PU};Lu[nB]={renderer:Aw,headless:Aw,handler:eB};Lu[aB]={};function vb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Lu[e]=t,this):Lu[e]}function sB(e,t,n){const i=[],r=new rn().union(t),a=e.marktype;return a?oB(e,r,n,i):a==="group"?lB(e,r,n,i):te("Intersect scene must be mark node or group item.")}function oB(e,t,n,i){if(Vie(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)lB(r[o],t,n,i);else for(const u=ur[a].isect;o<s;++o){const f=r[o];uB(f,t,u)&&i.push(f)}}return i}function Vie(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function lB(e,t,n,i){n&&n(e.mark)&&uB(e,t,ur.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let u=0;u<a;++u)oB(r[u],t,n,i);t.translate(s,o)}return i}function uB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const wE=new rn;function cB(e){const t=e.clip;if(je(t))t(Hp(wE.clear()));else if(t)wE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(wE)}const Wie=1e-9;function w$(e,t,n){return e===t?!0:n==="path"?fB(e,t):e instanceof Date&&t instanceof Date?+e==+t:st(e)&&st(t)?Math.abs(e-t)<=Wie:!e||!t||!ve(e)&&!ve(t)?e==t:Qie(e,t)}function fB(e,t){return w$(Vf(e),Vf(t))}function Qie(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!w$(e[r],t[r],r))return!1;return typeof e==typeof t}function Zie(){dne(),xte()}const Zf="top",Kr="left",Jr="right",gl="bottom",Kie="top-left",Jie="top-right",ere="bottom-left",tre="bottom-right",A$="start",Cw="middle",li="end",nre="x",ire="y",bb="group",C$="axis",M$="title",rre="frame",are="scope",$$="legend",dB="row-header",hB="row-footer",gB="row-title",pB="column-header",mB="column-footer",yB="column-title",sre="padding",ore="symbol",vB="fit",bB="fit-x",xB="fit-y",lre="pad",T$="none",Ym="all",Mw="each",k$="flush",Wo="column",Qo="row";function SB(e){J.call(this,null,e)}ge(SB,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=ur[r],s=a.bound;let o=i.bounds,u;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=Xm(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===bb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(Xm(f,s))),i.role){case C$:case $$:case M$:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(Xm(f,s))}),t.visit(t.MOD,f=>{u=u||o.alignsWith(f.bounds),n.dirty(f),o.union(Xm(f,s))}),u&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return cB(i),t.modifies("bounds")}});function Xm(e,t,n){return t(e.bounds.clear(),e,n)}const h6=":vega_identifier:";function D$(e){J.call(this,0,e)}D$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ge(D$,J,{transform(e,t){const n=ure(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function ure(e){return e._signals[h6]||(e._signals[h6]=e.add(0))}function EB(e){J.call(this,null,e)}ge(EB,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,cre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===bb?cb:ub;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function cre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function _B(e){J.call(this,null,e)}const g6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!wB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},wB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),p6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(wB(r,a=e[n].bounds,t))return!0},fre=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},dre=(e,t,n)=>{var i=e.range(),r=new rn;return t===Zf||t===gl?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},m6=e=>(e.forEach(t=>t.opacity=1),e),y6=(e,t)=>e.reflow(t.modified()).modifies("opacity");ge(_B,J,{transform(e,t){const n=g6[e.method]||g6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(m6(r),t=y6(t,e)),t;if(r=r.filter(fre),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=m6(r),t=y6(t,e),a.length>=3&&p6(a,i)){do a=n(a,i);while(a.length>=3&&p6(a,i));a.length<3&&!Je(r).opacity&&(a.length>1&&(Je(a).opacity=0),Je(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=dre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(u=>{s(u)||(u.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(u=>{u.opacity&&o.union(u.bounds)}),t}});function AB(e){J.call(this,null,e)}ge(AB,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Xn=new rn;function Ef(e,t,n){return e[t]===n?0:(e[t]=n,1)}function hre(e){var t=e.items[0].orient;return t===Kr||t===Jr}function gre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function pre(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,u=gre(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[u[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&h$(v),w=0,A=0,C,M;switch(Xn.clear().union(S),S.clear(),(C=u[0])>-1&&S.union(r.items[C].bounds),(C=u[1])>-1&&S.union(r.items[C].bounds),o){case Zf:w=h||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(f,0),v&&Vm(e,v,M,b,_,0,-1,S);break;case Kr:w=-d,A=h||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,f),v&&Vm(e,v,M,b,_,1,-1,S);break;case Jr:w=n+d,A=h||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,f),v&&Vm(e,v,M,b,_,1,1,S);break;case gl:w=h||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,M),v&&Vm(e,v,M,b,0,0,1,S);break;default:w=r.x,A=r.y}return to(S.translate(w,A),r),Ef(r,"x",w+s)|Ef(r,"y",A+s)&&(r.bounds=Xn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function Vm(e,t,n,i,r,a,s,o){const u=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(u.translate(-d,-h)),e.dirty(t)}o.union(u)}const v6=(e,t)=>Math.floor(Math.min(e,t)),b6=(e,t)=>Math.ceil(Math.max(e,t));function mre(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===bb)switch(r.role){case C$:case $$:case M$:break;case dB:s.rowheaders.push(...a);break;case hB:s.rowfooters.push(...a);break;case pB:s.colheaders.push(...a);break;case mB:s.colfooters.push(...a);break;case gB:s.rowtitle=a[0];break;case yB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function yre(e){return new rn().set(0,0,e.width||0,e.height||0)}function vre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Dt(e,t,n){const i=ve(e)?e[t]:e;return i??(n!==void 0?n:0)}function x6(e){return e<0?Math.ceil(-e):0}function CB(e,t,n){var i=!n.nodirty,r=n.bounds===k$?yre:vre,a=Xn.set(0,0,0,0),s=Dt(n.align,Wo),o=Dt(n.align,Qo),u=Dt(n.padding,Wo),f=Dt(n.padding,Qo),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(h),w=0,A=Array(p),C=Array(p),M=Array(p),k,T,O,N,B,L,G,H,I,F,R;for(T=0;T<d;++T)v[T]=0;for(T=0;T<h;++T)_[T]=0;for(T=0;T<p;++T)L=t[T],B=M[T]=r(L),L.x=L.x||0,A[T]=0,L.y=L.y||0,C[T]=0,O=T%d,N=~~(T/d),b=Math.max(b,G=Math.ceil(B.x2)),w=Math.max(w,H=Math.ceil(B.y2)),v[O]=Math.max(v[O],G),_[N]=Math.max(_[N],H),y[T]=u+x6(B.x1),S[T]=f+x6(B.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(s===Mw)for(O=1;O<d;++O){for(R=0,T=O;T<p;T+=d)R<y[T]&&(R=y[T]);for(T=O;T<p;T+=d)y[T]=R+v[O-1]}else if(s===Ym){for(R=0,T=0;T<p;++T)T%d&&R<y[T]&&(R=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=R+b)}else for(s=!1,O=1;O<d;++O)for(T=O;T<p;T+=d)y[T]+=v[O-1];if(o===Mw)for(N=1;N<h;++N){for(R=0,T=N*d,k=T+d;T<k;++T)R<S[T]&&(R=S[T]);for(T=N*d;T<k;++T)S[T]=R+_[N-1]}else if(o===Ym){for(R=0,T=d;T<p;++T)R<S[T]&&(R=S[T]);for(T=d;T<p;++T)S[T]=R+w}else for(o=!1,N=1;N<h;++N)for(T=N*d,k=T+d;T<k;++T)S[T]+=_[N-1];for(I=0,T=0;T<p;++T)I=y[T]+(T%d?I:0),A[T]+=I-t[T].x;for(O=0;O<d;++O)for(F=0,T=O;T<p;T+=d)F+=S[T],C[T]+=F-t[T].y;if(s&&Dt(n.center,Wo)&&h>1)for(T=0;T<p;++T)B=s===Ym?b:v[T%d],I=B-M[T].x2-t[T].x-A[T],I>0&&(A[T]+=I/2);if(o&&Dt(n.center,Qo)&&d!==1)for(T=0;T<p;++T)B=o===Ym?w:_[~~(T/d)],F=B-M[T].y2-t[T].y-C[T],F>0&&(C[T]+=F/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],C[T]));switch(I=Dt(n.anchor,nre),F=Dt(n.anchor,ire),Dt(n.anchor,Wo)){case li:I-=a.width();break;case Cw:I-=a.width()/2}switch(Dt(n.anchor,Qo)){case li:F-=a.height();break;case Cw:F-=a.height()/2}for(I=Math.round(I),F=Math.round(F),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)L=t[T],L.x+=A[T]+=I,L.y+=C[T]+=F,a.union(L.mark.bounds.union(L.bounds.translate(A[T],C[T]))),i&&e.dirty(L);return a}function bre(e,t,n){var i=mre(t),r=i.marks,a=n.bounds===k$?xre:Sre,s=n.offset,o=n.columns||r.length,u=o<=0?1:Math.ceil(r.length/o),f=u*o,d,h,p,y,v,b,S;const _=CB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Dt(n.headerBand,Qo,null),d=Wm(e,i.rowheaders,r,o,u,-Dt(s,"rowHeader"),v6,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Dt(n.headerBand,Wo,null),h=Wm(e,i.colheaders,r,o,o,-Dt(s,"columnHeader"),v6,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Dt(n.footerBand,Qo,null),p=Wm(e,i.rowfooters,r,o,u,Dt(s,"rowFooter"),b6,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Dt(n.footerBand,Wo,null),y=Wm(e,i.colfooters,r,o,o,Dt(s,"columnFooter"),b6,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=Dt(n.titleAnchor,Qo),S=Dt(s,"rowTitle"),S=v===li?p+S:d-S,b=Dt(n.titleBand,Qo,.5),S6(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Dt(n.titleAnchor,Wo),S=Dt(s,"columnTitle"),S=v===li?y+S:h-S,b=Dt(n.titleBand,Wo,.5),S6(e,i.coltitle,S,1,_,b))}function xre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Sre(e,t){return e.bounds[t]}function Wm(e,t,n,i,r,a,s,o,u,f,d,h,p,y){var v=n.length,b=0,S=0,_,w,A,C,M,k,T,O,N;if(!v)return b;for(_=d;_<v;_+=h)n[_]&&(b=s(b,u(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,C=t.length;w<C;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,C=t.length;w<C;++w,_+=h){for(k=t[w],M=k.mark.bounds,A=_;A>=0&&(T=n[A])==null;A-=p);o?(O=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),N=b):(O=b,N=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(k.bounds.translate(O-(k.x||0),N-(k.y||0))),k.x=O,k.y=N,e.dirty(k),S=s(S,M[f])}return S}function S6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function Ere(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function _re(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function wre(e,t,n,i,r,a,s){const o=Ere(n,t),u=_re(e,o("offset",0)),f=o("anchor",A$),d=f===li?1:f===Cw?.5:0,h={align:Mw,bounds:o("bounds",k$),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Kr:h.anchor={x:Math.floor(i.x1)-u,column:li,y:d*(s||i.height()+2*i.y1),row:f};break;case Jr:h.anchor={x:Math.ceil(i.x2)+u,y:d*(s||i.height()+2*i.y1),row:f};break;case Zf:h.anchor={y:Math.floor(r.y1)-u,row:li,x:d*(a||r.width()+2*r.x1),column:f};break;case gl:h.anchor={y:Math.ceil(r.y2)+u,x:d*(a||r.width()+2*r.x1),column:f};break;case Kie:h.anchor={x:u,y:u};break;case Jie:h.anchor={x:a-u,y:u,column:li};break;case ere:h.anchor={x:u,y:s-u,row:li};break;case tre:h.anchor={x:a-u,y:s-u,column:li,row:li};break}return h}function Are(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,u,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Mre(e,n,n.items[0].items[0]),a=Cre(n,a),u=2*n.padding,f=2*n.padding,a.empty()||(u=Math.ceil(a.width()+u),f=Math.ceil(a.height()+f)),i.type===ore&&$re(n.items[0].items[0].items[0].items),r!==T$&&(n.x=s=0,n.y=o=0),n.width=u,n.height=f,to(a.set(s,o,s+u,o+f),n),n.mark.bounds.clear().union(a),n}function Cre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Mre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&tg(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,u=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case Kr:r+=Math.ceil(s.bounds.width())+u;break;case Jr:case gl:break;default:a+=s.bounds.height()+u}switch((r||a)&&tg(e,n,r,a),s.orient){case Kr:d+=lf(t,n,s,o,1,1);break;case Jr:f+=lf(t,n,s,li,0,0)+u,d+=lf(t,n,s,o,1,1);break;case gl:f+=lf(t,n,s,o,0,0),d+=lf(t,n,s,li,-1,0,1)+u;break;default:f+=lf(t,n,s,o,0,0)}(f||d)&&tg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(tg(e,n,-f,0),tg(e,s,-f,0))}}function lf(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",u=n.datum.vgrad,f=o&&(a||!u)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=u&&a?d:0,p=u&&a?0:d,y=r<=0?0:h$(n);return Math.round(i===A$?h:i===li?p-y:.5*(d-y))}function tg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function $re(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Tre(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,u=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Kr||o===Jr?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==bb?o===Kr?(v=r.y2,y=r.y1):o===Jr?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Kr&&(v=i,y=0),A=u===A$?v:u===li?y:(v+y)/2,p&&p.text){switch(o){case Zf:case gl:w=h.bounds.height()+d;break;case Kr:_=h.bounds.width()+d;break;case Jr:_=-h.bounds.width()-d;break}Xn.clear().union(p.bounds),Xn.translate(_-(p.x||0),w-(p.y||0)),Ef(p,"x",_)|Ef(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Xn),p.mark.bounds.clear().union(Xn),e.dirty(p)),Xn.clear().union(p.bounds)}else Xn.clear();switch(Xn.union(h.bounds),o){case Zf:b=A,S=r.y1-Xn.height()-f;break;case Kr:b=r.x1-Xn.width()-f,S=A;break;case Jr:b=r.x2+Xn.width()+f,S=A;break;case gl:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return Ef(a,"x",b)|Ef(a,"y",S)&&(Xn.translate(b,S),e.dirty(a),a.bounds.clear().union(Xn),t.bounds.clear().union(Xn),e.dirty(a)),a.bounds}function MB(e){J.call(this,null,e)}ge(MB,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&bre(n,i,e.layout),Dre(n,i,e)}),kre(e.mark.group)?t.reflow():t}});function kre(e){return e&&e.mark.role!=="legend-entry"}function Dre(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new rn().set(0,0,r,a),o=s.clone(),u=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case C$:y=hre(h)?o:u,y.union(pre(e,h,r,a));break;case M$:d=h;break;case $$:f.push(Are(e,h));break;case rre:case are:case dB:case hB:case gB:case pB:case mB:case yB:o.union(h.bounds),u.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||Jr,p!==T$&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];CB(e,w,wre(w,_,n.legends,o,u,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===vB||n.autosize.type===bB||n.autosize.type===xB))switch(_.orient){case Kr:case Jr:s.add(w.x1,0).add(w.x2,0);break;case Zf:case gl:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(u),d&&s.union(Tre(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Ore(e,t,s,n)}function Ore(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,u=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-u)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===sre){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===T$?(f=0,h=0,u=s,d=o):a===vB?(u=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===bB?(u=Math.max(0,s-f-p),o=d+h+y):a===xB?(s=u+f+p,d=Math.max(0,o-h-y)):a===lre&&(s=u+f+p,o=d+h+y),e._resizeView(s,o,u,d,[f,h],r.resize)}const Rre=Object.freeze(Object.defineProperty({__proto__:null,bound:SB,identifier:D$,mark:EB,overlap:_B,render:AB,viewlayout:MB},Symbol.toStringTag,{value:"Module"}));function $B(e){J.call(this,null,e)}ge($B,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=WM(a,s,e.minstep),u=e.format||nU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?tU(a,e.values,o):QM(a,o);return r&&(i.rem=r),r=f.map((d,h)=>ct({index:h/(f.length-1||1),value:d,label:u(d)})),e.extra&&r.length&&r.push(ct({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function TB(e){J.call(this,null,e)}function Nre(){return ct({})}function zre(e){const t=Ed().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ge(TB,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Nre,a=e.key||ke,s=this.value;return re(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&te("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=zre(a)),t.visit(t.ADD,o=>{const u=a(o);let f=s.get(u);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(u,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const u=a(o),f=s.get(u);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const u=a(o),f=s.get(u);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function kB(e){J.call(this,null,e)}ge(kB,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(re(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||Fo,u=r.enter||Fo,f=r.exit||Fo,d=(a&&!s?r[a]:o)||Fo;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{u(h,e),o(h,e)}),n.modifies(u.output),n.modifies(o.output),d!==Fo&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Fo&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==Fo){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=u(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function DB(e){J.call(this,[],e)}ge(DB,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||A1,s=e.scale,o=+e.limit,u=WM(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===A1,d=e.format||sU(n,s,u,a,e.formatSpecifier,e.formatType,f),h=e.values||aU(s,u),p,y,v,b,S;return r&&(i.rem=r),a===A1?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,je(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ii(b=v||8),r=r.map((_,w)=>ct({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=h[r.length],r.push(ct({index:r.length,label:`…${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===ote?(p=s.domain(),y=KL(s,p[0],Je(p)),h.length<3&&!e.values&&p[0]!==Je(p)&&(h=[p[0],Je(p)]),r=h.map((_,w)=>ct({index:w,label:d(_,w,h),value:_,perc:y(_)}))):(v=h.length-1,y=vte(s),r=h.map((_,w)=>ct({index:w,label:d(_,w,h),value:_,perc:w?y(_):0,perc2:w===v?1:y(h[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const Fre=e=>e.source.x,Lre=e=>e.source.y,Ure=e=>e.target.x,Bre=e=>e.target.y;function O$(e){J.call(this,{},e)}O$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ge(O$,J,{transform(e,t){var n=e.sourceX||Fre,i=e.sourceY||Lre,r=e.targetX||Ure,a=e.targetY||Bre,s=e.as||"path",o=e.orient||"vertical",u=e.shape||"line",f=E6.get(u+"-"+o)||E6.get(u);return f||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const OB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Ire=(e,t,n,i)=>OB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),RB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Pre=(e,t,n,i)=>RB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),NB=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},jre=(e,t,n,i)=>NB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),qre=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Hre=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Gre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Yre=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Xre=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},Vre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=(t+i)/2;return"M"+t*r+","+t*a+"C"+u*r+","+u*a+" "+u*s+","+u*o+" "+i*s+","+i*o},E6=Ed({line:OB,"line-radial":Ire,arc:RB,"arc-radial":Pre,curve:NB,"curve-radial":jre,"orthogonal-horizontal":qre,"orthogonal-vertical":Hre,"orthogonal-radial":Gre,"diagonal-horizontal":Yre,"diagonal-vertical":Xre,"diagonal-radial":Vre});function R$(e){J.call(this,null,e)}R$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ge(R$,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||vd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,f=u.map(a),d=f.length,h=s,p=(o-s)/W8(f),y=er(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=u[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Wre=5;function Qre(e){const t=e.type;return!e.bins&&(t===Gf||t===Lp||t===Up)}function zB(e){return YM(e)&&e!==Ba}const Zre=aa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function FB(e){J.call(this,null,e),this.modified(!0)}ge(FB,J,{transform(e,t){var n=t.dataflow,i=this.value,r=Kre(e);(!i||r!==i.type)&&(this.value=i=lt(r)());for(r in e)if(!Zre[r]){if(r==="padding"&&zB(i.type))continue;je(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return rae(i,e,iae(i,e,eae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Kre(e){var t=e.type,n="",i;return t===Ba?Ba+"-"+Gf:(Jre(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ba+"-":i===3?kd+"-":""),(n+t||Gf).toLowerCase())}function Jre(e){const t=e.type;return YM(t)&&t!==zu&&t!==Fu&&(e.scheme||e.range&&e.range.length&&e.range.every(ye))}function eae(e,t,n){const i=tae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&Qre(e),o,u;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const f=u>r[o]?o+1:u<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",u),r.splice(f,0,u)}return zB(a)&&t.padding&&r[0]!==Je(r)&&(r=nae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(LB(a,r,n)),a===jM&&e.unknown(t.domainImplicit?sw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&WM(e,t.nice)||null),r.length}function tae(e,t,n){return t?(e.domain(LB(e.type,t,n)),t.length):-1}function nae(e,t,n,i,r,a){var s=Math.abs(Je(n)-n[0]),o=s/(s-2*i),u=e===Qs?uC(t,null,o):e===Up?W1(t,null,o,.5):e===Lp?W1(t,null,o,r||1):e===rb?cC(t,null,o,a||1):lC(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function LB(e,t,n){if(XL(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+he(t))}return t}function iae(e,t,n){let i=t.bins;if(i&&!re(i)){const r=e.domain(),a=r[0],s=Je(r),o=i.step;let u=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||te("Scale bins parameter missing step property."),u<a&&(u=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=er(u,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===qM&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function rae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=aae(i,t,n);else if(t.scheme&&(a=sae(i,t,n),je(a))){if(e.interpolator)return e.interpolator(a);te(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&VL(i))return e.interpolator(ob($w(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(XM(t.interpolate,t.interpolateGamma)):je(e.round)?e.round(r):je(e.rangeRound)&&e.interpolate(r?zp:wl),a&&e.range($w(a,t.reverse))}function aae(e,t,n){e!==PL&&e!==hw&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===hw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*PM(n,r,i)]}function sae(e,t,n){var i=t.schemeExtent,r,a;return re(t.scheme)?a=ob(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=VM(r),a||te(`Unrecognized scheme name: ${t.scheme}`)),n=e===sb?n+1:e===qM?n-1:e===Yf||e===ab?+t.schemeCount||Wre:n,VL(e)?_6(a,i,t.reverse):je(a)?ZL(_6(a,i),n):e===jM?a:a.slice(0,n)}function _6(e,t,n){return je(e)&&(t||n)?QL(e,$w(t||[0,1],n)):e}function $w(e,t){return t?e.slice().reverse():e}function UB(e){J.call(this,null,e)}ge(UB,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ic(e.sort)),this.modified(n),t}});const w6="zero",BB="center",IB="normalize",PB=["y0","y1"];function N$(e){J.call(this,null,e)}N$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:w6,values:[w6,BB,IB]},{name:"as",type:"string",array:!0,length:2,default:PB}]};ge(N$,J,{transform(e,t){var n=e.as||PB,i=n[0],r=n[1],a=ic(e.sort),s=e.field||vd,o=e.offset===BB?oae:e.offset===IB?lae:uae,u,f,d,h;for(u=cae(t.source,e.groupby,a,s),f=0,d=u.length,h=u.max;f<d;++f)o(u[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function oae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,u;o<s;++o)u=e[o],u[i]=a,u[r]=a+=Math.abs(n(u))}function lae(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,u=0,f=0,d;u<o;++u)d=e[u],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function uae(e,t,n,i,r){for(var a=0,s=0,o=e.length,u=0,f,d;u<o;++u)d=e[u],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function cae(e,t,n,i){var r=[],a=b=>b(d),s,o,u,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,u=e.length;o<u;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,u=p.length;o<u;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const fae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:$B,datajoin:TB,encode:kB,legendentries:DB,linkpath:O$,pie:R$,scale:FB,sortitems:UB,stack:N$},Symbol.toStringTag,{value:"Module"}));var Oe=1e-6,Cy=1e-12,Xe=Math.PI,jt=Xe/2,My=Xe/4,yi=Xe*2,Vt=180/Xe,Ge=Xe/180,Ke=Math.abs,Od=Math.atan,Nr=Math.atan2,Re=Math.cos,Qm=Math.ceil,jB=Math.exp,Tw=Math.hypot,$y=Math.log,AE=Math.pow,De=Math.sin,Ar=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,z$=Math.tan;function qB(e){return e>1?0:e<-1?Xe:Math.acos(e)}function zi(e){return e>1?jt:e<-1?-jt:Math.asin(e)}function Fn(){}function Ty(e,t){e&&C6.hasOwnProperty(e.type)&&C6[e.type](e,t)}var A6={Feature:function(e,t){Ty(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ty(n[i].geometry,t)}},C6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){kw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)kw(n[i],t,0)},Polygon:function(e,t){M6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)M6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ty(n[i],t)}};function kw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function M6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)kw(e[n],t,1);t.polygonEnd()}function Rs(e,t){e&&A6.hasOwnProperty(e.type)?A6[e.type](e,t):Ty(e,t)}var ky=new pi,Dy=new pi,HB,GB,Dw,Ow,Rw,Xa={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){ky=new pi,Xa.lineStart=dae,Xa.lineEnd=hae},polygonEnd:function(){var e=+ky;Dy.add(e<0?yi+e:e),this.lineStart=this.lineEnd=this.point=Fn},sphere:function(){Dy.add(yi)}};function dae(){Xa.point=gae}function hae(){YB(HB,GB)}function gae(e,t){Xa.point=YB,HB=e,GB=t,e*=Ge,t*=Ge,Dw=e,Ow=Re(t=t/2+My),Rw=De(t)}function YB(e,t){e*=Ge,t*=Ge,t=t/2+My;var n=e-Dw,i=n>=0?1:-1,r=i*n,a=Re(t),s=De(t),o=Rw*s,u=Ow*a+o*Re(r),f=o*i*De(r);ky.add(Nr(f,u)),Dw=e,Ow=a,Rw=s}function pae(e){return Dy=new pi,Rs(e,Xa),Dy*2}function Oy(e){return[Nr(e[1],e[0]),zi(e[2])]}function Uu(e){var t=e[0],n=e[1],i=Re(n);return[i*Re(t),i*De(t),De(n)]}function Zm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function CE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Km(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ry(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var zt,Ti,It,Ki,du,XB,VB,kf,Pg,Po,Zs,Ds={point:Nw,lineStart:$6,lineEnd:T6,polygonStart:function(){Ds.point=QB,Ds.lineStart=mae,Ds.lineEnd=yae,Pg=new pi,Xa.polygonStart()},polygonEnd:function(){Xa.polygonEnd(),Ds.point=Nw,Ds.lineStart=$6,Ds.lineEnd=T6,ky<0?(zt=-(It=180),Ti=-(Ki=90)):Pg>Oe?Ki=90:Pg<-Oe&&(Ti=-90),Zs[0]=zt,Zs[1]=It},sphere:function(){zt=-(It=180),Ti=-(Ki=90)}};function Nw(e,t){Po.push(Zs=[zt=e,It=e]),t<Ti&&(Ti=t),t>Ki&&(Ki=t)}function WB(e,t){var n=Uu([e*Ge,t*Ge]);if(kf){var i=Kf(kf,n),r=[i[1],-i[0],0],a=Kf(r,i);Ry(a),a=Oy(a);var s=e-du,o=s>0?1:-1,u=a[0]*Vt*o,f,d=Ke(s)>180;d^(o*du<u&&u<o*e)?(f=a[1]*Vt,f>Ki&&(Ki=f)):(u=(u+360)%360-180,d^(o*du<u&&u<o*e)?(f=-a[1]*Vt,f<Ti&&(Ti=f)):(t<Ti&&(Ti=t),t>Ki&&(Ki=t))),d?e<du?Zi(zt,e)>Zi(zt,It)&&(It=e):Zi(e,It)>Zi(zt,It)&&(zt=e):It>=zt?(e<zt&&(zt=e),e>It&&(It=e)):e>du?Zi(zt,e)>Zi(zt,It)&&(It=e):Zi(e,It)>Zi(zt,It)&&(zt=e)}else Po.push(Zs=[zt=e,It=e]);t<Ti&&(Ti=t),t>Ki&&(Ki=t),kf=n,du=e}function $6(){Ds.point=WB}function T6(){Zs[0]=zt,Zs[1]=It,Ds.point=Nw,kf=null}function QB(e,t){if(kf){var n=e-du;Pg.add(Ke(n)>180?n+(n>0?360:-360):n)}else XB=e,VB=t;Xa.point(e,t),WB(e,t)}function mae(){Xa.lineStart()}function yae(){QB(XB,VB),Xa.lineEnd(),Ke(Pg)>Oe&&(zt=-(It=180)),Zs[0]=zt,Zs[1]=It,kf=null}function Zi(e,t){return(t-=e)<0?t+360:t}function vae(e,t){return e[0]-t[0]}function k6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function bae(e){var t,n,i,r,a,s,o;if(Ki=It=-(zt=Ti=1/0),Po=[],Rs(e,Ds),n=Po.length){for(Po.sort(vae),t=1,i=Po[0],a=[i];t<n;++t)r=Po[t],k6(i,r[0])||k6(i,r[1])?(Zi(i[0],r[1])>Zi(i[0],i[1])&&(i[1]=r[1]),Zi(r[0],i[1])>Zi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Zi(i[1],r[0]))>s&&(s=o,zt=r[0],It=i[1])}return Po=Zs=null,zt===1/0||Ti===1/0?[[NaN,NaN],[NaN,NaN]]:[[zt,Ti],[It,Ki]]}var wg,Ny,zy,Fy,Ly,Uy,By,Iy,zw,Fw,Lw,ZB,KB,ui,ci,fi,ea={sphere:Fn,point:F$,lineStart:D6,lineEnd:O6,polygonStart:function(){ea.lineStart=Eae,ea.lineEnd=_ae},polygonEnd:function(){ea.lineStart=D6,ea.lineEnd=O6}};function F$(e,t){e*=Ge,t*=Ge;var n=Re(t);Qp(n*Re(e),n*De(e),De(t))}function Qp(e,t,n){++wg,zy+=(e-zy)/wg,Fy+=(t-Fy)/wg,Ly+=(n-Ly)/wg}function D6(){ea.point=xae}function xae(e,t){e*=Ge,t*=Ge;var n=Re(t);ui=n*Re(e),ci=n*De(e),fi=De(t),ea.point=Sae,Qp(ui,ci,fi)}function Sae(e,t){e*=Ge,t*=Ge;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=Nr(vi((s=ci*a-fi*r)*s+(s=fi*i-ui*a)*s+(s=ui*r-ci*i)*s),ui*i+ci*r+fi*a);Ny+=s,Uy+=s*(ui+(ui=i)),By+=s*(ci+(ci=r)),Iy+=s*(fi+(fi=a)),Qp(ui,ci,fi)}function O6(){ea.point=F$}function Eae(){ea.point=wae}function _ae(){JB(ZB,KB),ea.point=F$}function wae(e,t){ZB=e,KB=t,e*=Ge,t*=Ge,ea.point=JB;var n=Re(t);ui=n*Re(e),ci=n*De(e),fi=De(t),Qp(ui,ci,fi)}function JB(e,t){e*=Ge,t*=Ge;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=ci*a-fi*r,o=fi*i-ui*a,u=ui*r-ci*i,f=Tw(s,o,u),d=zi(f),h=f&&-d/f;zw.add(h*s),Fw.add(h*o),Lw.add(h*u),Ny+=d,Uy+=d*(ui+(ui=i)),By+=d*(ci+(ci=r)),Iy+=d*(fi+(fi=a)),Qp(ui,ci,fi)}function Aae(e){wg=Ny=zy=Fy=Ly=Uy=By=Iy=0,zw=new pi,Fw=new pi,Lw=new pi,Rs(e,ea);var t=+zw,n=+Fw,i=+Lw,r=Tw(t,n,i);return r<Cy&&(t=Uy,n=By,i=Iy,Ny<Oe&&(t=zy,n=Fy,i=Ly),r=Tw(t,n,i),r<Cy)?[NaN,NaN]:[Nr(n,t)*Vt,zi(i/r)*Vt]}function Uw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Bw(e,t){return Ke(e)>Xe&&(e-=Math.round(e/yi)*yi),[e,t]}Bw.invert=Bw;function eI(e,t,n){return(e%=yi)?t||n?Uw(N6(e),z6(t,n)):N6(e):t||n?z6(t,n):Bw}function R6(e){return function(t,n){return t+=e,Ke(t)>Xe&&(t-=Math.round(t/yi)*yi),[t,n]}}function N6(e){var t=R6(e);return t.invert=R6(-e),t}function z6(e,t){var n=Re(e),i=De(e),r=Re(t),a=De(t);function s(o,u){var f=Re(u),d=Re(o)*f,h=De(o)*f,p=De(u),y=p*n+d*i;return[Nr(h*r-y*a,d*n-p*i),zi(y*r+h*a)]}return s.invert=function(o,u){var f=Re(u),d=Re(o)*f,h=De(o)*f,p=De(u),y=p*r-h*a;return[Nr(h*r+p*a,d*n+y*i),zi(y*n-d*i)]},s}function Cae(e){e=eI(e[0]*Ge,e[1]*Ge,e.length>2?e[2]*Ge:0);function t(n){return n=e(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n}return t.invert=function(n){return n=e.invert(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n},t}function Mae(e,t,n,i,r,a){if(n){var s=Re(t),o=De(t),u=i*n;r==null?(r=t+i*yi,a=t-u/2):(r=F6(s,r),a=F6(s,a),(i>0?r<a:r>a)&&(r+=i*yi));for(var f,d=r;i>0?d>a:d<a;d-=u)f=Oy([s,-o*Re(d),-o*De(d)]),e.point(f[0],f[1])}}function F6(e,t){t=Uu(t),t[0]-=e,Ry(t);var n=qB(-t[1]);return((-t[2]<0?-n:n)+yi-Oe)%yi}function tI(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Fn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function N1(e,t){return Ke(e[0]-t[0])<Oe&&Ke(e[1]-t[1])<Oe}function Jm(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function nI(e,t,n,i,r){var a=[],s=[],o,u;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(N1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}_[0]+=2*Oe}a.push(w=new Jm(S,v,null,!0)),s.push(w.o=new Jm(S,null,w,!1)),a.push(w=new Jm(_,v,null,!1)),s.push(w.o=new Jm(_,null,w,!0))}}),!!a.length){for(s.sort(t),L6(a),L6(s),o=0,u=s.length;o<u;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,u=d.length;o<u;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function L6(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function ME(e){return Ke(e[0])<=Xe?e[0]:Ar(e[0])*((Ke(e[0])+Xe)%yi-Xe)}function $ae(e,t){var n=ME(t),i=t[1],r=De(i),a=[De(n),-Re(n),0],s=0,o=0,u=new pi;r===1?i=jt+Oe:r===-1&&(i=-jt-Oe);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=ME(y),b=y[1]/2+My,S=De(b),_=Re(b),w=0;w<p;++w,v=C,S=k,_=T,y=A){var A=h[w],C=ME(A),M=A[1]/2+My,k=De(M),T=Re(M),O=C-v,N=O>=0?1:-1,B=N*O,L=B>Xe,G=S*k;if(u.add(Nr(G*N*De(B),_*T+G*Re(B))),s+=L?O+N*yi:O,L^v>=n^C>=n){var H=Kf(Uu(y),Uu(A));Ry(H);var I=Kf(a,H);Ry(I);var F=(L^O>=0?-1:1)*zi(I[2]);(i>F||i===F&&(H[0]||H[1]))&&(o+=L^O>=0?1:-1)}}return(s<-Oe||s<Oe&&u<-Cy)^o&1}function iI(e,t,n,i){return function(r){var a=t(r),s=tI(),o=t(s),u=!1,f,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=V8(d);var C=$ae(f,i);d.length?(u||(r.polygonStart(),u=!0),nI(d,kae,C,n,r)):C&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(C,M){e(C,M)&&r.point(C,M)}function v(C,M){a.point(C,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _(C,M){h.push([C,M]),o.point(C,M)}function w(){o.lineStart(),h=[]}function A(){_(h[0][0],h[0][1]),o.lineEnd();var C=o.clean(),M=s.result(),k,T=M.length,O,N,B;if(h.pop(),f.push(h),h=null,!!T){if(C&1){if(N=M[0],(O=N.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),k=0;k<O;++k)r.point((B=N[k])[0],B[1]);r.lineEnd()}return}T>1&&C&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(Tae))}}return p}}function Tae(e){return e.length>1}function kae(e,t){return((e=e.x)[0]<0?e[1]-jt-Oe:jt-e[1])-((t=t.x)[0]<0?t[1]-jt-Oe:jt-t[1])}const U6=iI(function(){return!0},Dae,Rae,[-Xe,-jt]);function Dae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Xe:-Xe,u=Ke(a-t);Ke(u-Xe)<Oe?(e.point(t,n=(n+s)/2>0?jt:-jt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&u>=Xe&&(Ke(t-i)<Oe&&(t-=i*Oe),Ke(a-o)<Oe&&(a-=o*Oe),n=Oae(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Oae(e,t,n,i){var r,a,s=De(e-n);return Ke(s)>Oe?Od((De(t)*(a=Re(i))*De(n)-De(i)*(r=Re(t))*De(e))/(r*a*s)):(t+i)/2}function Rae(e,t,n,i){var r;if(e==null)r=n*jt,i.point(-Xe,r),i.point(0,r),i.point(Xe,r),i.point(Xe,0),i.point(Xe,-r),i.point(0,-r),i.point(-Xe,-r),i.point(-Xe,0),i.point(-Xe,r);else if(Ke(e[0]-t[0])>Oe){var a=e[0]<t[0]?Xe:-Xe;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Nae(e){var t=Re(e),n=2*Ge,i=t>0,r=Ke(t)>Oe;function a(d,h,p,y){Mae(y,e,n,p,d,h)}function s(d,h){return Re(d)*Re(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,C=s(S,_),M=i?C?0:f(S,_):C?f(S+(S<0?Xe:-Xe),_):0;if(!h&&(v=y=C)&&d.lineStart(),C!==y&&(A=u(h,w),(!A||N1(h,A)||N1(w,A))&&(w[2]=1)),C!==y)b=0,C?(d.lineStart(),A=u(w,h),d.point(A[0],A[1])):(A=u(h,w),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^C){var k;!(M&p)&&(k=u(w,h,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}C&&(!h||!N1(h,w))&&d.point(w[0],w[1]),h=w,y=C,p=M},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function u(d,h,p){var y=Uu(d),v=Uu(h),b=[1,0,0],S=Kf(y,v),_=Zm(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var C=t*_/A,M=-t*w/A,k=Kf(b,S),T=Km(b,C),O=Km(S,M);CE(T,O);var N=k,B=Zm(T,N),L=Zm(N,N),G=B*B-L*(Zm(T,T)-1);if(!(G<0)){var H=vi(G),I=Km(N,(-B-H)/L);if(CE(I,T),I=Oy(I),!p)return I;var F=d[0],R=h[0],P=d[1],X=h[1],K;R<F&&(K=F,F=R,R=K);var z=R-F,W=Ke(z-Xe)<Oe,ne=W||z<Oe;if(!W&&X<P&&(K=P,P=X,X=K),ne?W?P+X>0^I[1]<(Ke(I[0]-F)<Oe?P:X):P<=I[1]&&I[1]<=X:z>Xe^(F<=I[0]&&I[0]<=R)){var se=Km(N,(-B+H)/L);return CE(se,T),[I,Oy(se)]}}}function f(d,h){var p=i?e:Xe-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return iI(s,o,a,i?[0,-e]:[-Xe,e-Xe])}function zae(e,t,n,i,r,a){var s=e[0],o=e[1],u=t[0],f=t[1],d=0,h=1,p=u-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var Ag=1e9,e1=-Ag;function rI(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||u(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return Ke(f[0]-e)<Oe?d>0?0:3:Ke(f[0]-n)<Oe?d>0?2:1:Ke(f[1]-t)<Oe?d>0?1:0:d>0?3:2}function o(f,d){return u(f.x,d.x)}function u(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=tI(),p,y,v,b,S,_,w,A,C,M,k,T={point:O,lineStart:G,lineEnd:H,polygonStart:B,polygonEnd:L};function O(F,R){r(F,R)&&d.point(F,R)}function N(){for(var F=0,R=0,P=y.length;R<P;++R)for(var X=y[R],K=1,z=X.length,W=X[0],ne,se,me=W[0],Se=W[1];K<z;++K)ne=me,se=Se,W=X[K],me=W[0],Se=W[1],se<=i?Se>i&&(me-ne)*(i-se)>(Se-se)*(e-ne)&&++F:Se<=i&&(me-ne)*(i-se)<(Se-se)*(e-ne)&&--F;return F}function B(){d=h,p=[],y=[],k=!0}function L(){var F=N(),R=k&&F,P=(p=V8(p)).length;(R||P)&&(f.polygonStart(),R&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),P&&nI(p,o,F,a,f),f.polygonEnd()),d=f,p=y=v=null}function G(){T.point=I,y&&y.push(v=[]),M=!0,C=!1,w=A=NaN}function H(){p&&(I(b,S),_&&C&&h.rejoin(),p.push(h.result())),T.point=O,C&&d.lineEnd()}function I(F,R){var P=r(F,R);if(y&&v.push([F,R]),M)b=F,S=R,_=P,M=!1,P&&(d.lineStart(),d.point(F,R));else if(P&&C)d.point(F,R);else{var X=[w=Math.max(e1,Math.min(Ag,w)),A=Math.max(e1,Math.min(Ag,A))],K=[F=Math.max(e1,Math.min(Ag,F)),R=Math.max(e1,Math.min(Ag,R))];zae(X,K,e,t,n,i)?(C||(d.lineStart(),d.point(X[0],X[1])),d.point(K[0],K[1]),P||d.lineEnd(),k=!1):P&&(d.lineStart(),d.point(F,R),k=!1)}w=F,A=R,C=P}return T}}function B6(e,t,n){var i=er(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function I6(e,t,n){var i=er(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Fae(){var e,t,n,i,r,a,s,o,u=10,f=u,d=90,h=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return er(Qm(i/d)*d,n,d).map(v).concat(er(Qm(o/h)*h,s,h).map(b)).concat(er(Qm(t/u)*u,e,u).filter(function(A){return Ke(A%d)>Oe}).map(p)).concat(er(Qm(a/f)*f,r,f).filter(function(A){return Ke(A%h)>Oe}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(S)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],_):[d,h]},_.stepMinor=function(A){return arguments.length?(u=+A[0],f=+A[1],_):[u,f]},_.precision=function(A){return arguments.length?(S=+A,p=B6(a,r,90),y=I6(t,e,S),v=B6(o,s,90),b=I6(i,n,S),_):S},_.extentMajor([[-180,-90+Oe],[180,90-Oe]]).extentMinor([[-180,-80-Oe],[180,80+Oe]])}const up=e=>e;var $E=new pi,Iw=new pi,aI,sI,Pw,jw,Ns={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Ns.lineStart=Lae,Ns.lineEnd=Bae},polygonEnd:function(){Ns.lineStart=Ns.lineEnd=Ns.point=Fn,$E.add(Ke(Iw)),Iw=new pi},result:function(){var e=$E/2;return $E=new pi,e}};function Lae(){Ns.point=Uae}function Uae(e,t){Ns.point=oI,aI=Pw=e,sI=jw=t}function oI(e,t){Iw.add(jw*e-Pw*t),Pw=e,jw=t}function Bae(){oI(aI,sI)}var Jf=1/0,Py=Jf,cp=-Jf,jy=cp,qy={point:Iae,lineStart:Fn,lineEnd:Fn,polygonStart:Fn,polygonEnd:Fn,result:function(){var e=[[Jf,Py],[cp,jy]];return cp=jy=-(Py=Jf=1/0),e}};function Iae(e,t){e<Jf&&(Jf=e),e>cp&&(cp=e),t<Py&&(Py=t),t>jy&&(jy=t)}var qw=0,Hw=0,Cg=0,Hy=0,Gy=0,_f=0,Gw=0,Yw=0,Mg=0,lI,uI,Ra,Na,_r={point:Bu,lineStart:P6,lineEnd:j6,polygonStart:function(){_r.lineStart=qae,_r.lineEnd=Hae},polygonEnd:function(){_r.point=Bu,_r.lineStart=P6,_r.lineEnd=j6},result:function(){var e=Mg?[Gw/Mg,Yw/Mg]:_f?[Hy/_f,Gy/_f]:Cg?[qw/Cg,Hw/Cg]:[NaN,NaN];return qw=Hw=Cg=Hy=Gy=_f=Gw=Yw=Mg=0,e}};function Bu(e,t){qw+=e,Hw+=t,++Cg}function P6(){_r.point=Pae}function Pae(e,t){_r.point=jae,Bu(Ra=e,Na=t)}function jae(e,t){var n=e-Ra,i=t-Na,r=vi(n*n+i*i);Hy+=r*(Ra+e)/2,Gy+=r*(Na+t)/2,_f+=r,Bu(Ra=e,Na=t)}function j6(){_r.point=Bu}function qae(){_r.point=Gae}function Hae(){cI(lI,uI)}function Gae(e,t){_r.point=cI,Bu(lI=Ra=e,uI=Na=t)}function cI(e,t){var n=e-Ra,i=t-Na,r=vi(n*n+i*i);Hy+=r*(Ra+e)/2,Gy+=r*(Na+t)/2,_f+=r,r=Na*e-Ra*t,Gw+=r*(Ra+e),Yw+=r*(Na+t),Mg+=r*3,Bu(Ra=e,Na=t)}function fI(e){this._context=e}fI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yi);break}}},result:Fn};var Xw=new pi,TE,dI,hI,$g,Tg,fp={point:Fn,lineStart:function(){fp.point=Yae},lineEnd:function(){TE&&gI(dI,hI),fp.point=Fn},polygonStart:function(){TE=!0},polygonEnd:function(){TE=null},result:function(){var e=+Xw;return Xw=new pi,e}};function Yae(e,t){fp.point=gI,dI=$g=e,hI=Tg=t}function gI(e,t){$g-=e,Tg-=t,Xw.add(vi($g*$g+Tg*Tg)),$g=e,Tg=t}let q6,Yy,H6,G6;class Y6{constructor(t){this._append=t==null?pI:Xae(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==H6||this._append!==Yy){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,H6=i,Yy=this._append,G6=this._,this._=r}this._+=G6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function pI(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Xae(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return pI;if(t!==q6){const n=10**t;q6=t,Yy=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Yy}function mI(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Rs(o,r(a))),a.result()}return s.area=function(o){return Rs(o,r(Ns)),Ns.result()},s.measure=function(o){return Rs(o,r(fp)),fp.result()},s.bounds=function(o){return Rs(o,r(qy)),qy.result()},s.centroid=function(o){return Rs(o,r(_r)),_r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,up):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new Y6(n)):new fI(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const u=Math.floor(o);if(!(u>=0))throw new RangeError(`invalid digits: ${o}`);n=u}return t===null&&(a=new Y6(n)),s},s.projection(e).digits(n).context(t)}function xb(e){return function(t){var n=new Vw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Vw(){}Vw.prototype={constructor:Vw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function L$(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Rs(n,e.stream(qy)),t(qy.result()),i!=null&&e.clipExtent(i),e}function Sb(e,t,n){return L$(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,u])},n)}function U$(e,t,n){return Sb(e,[[0,0],t],n)}function B$(e,t,n){return L$(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function I$(e,t,n){return L$(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var X6=16,Vae=Re(30*Ge);function V6(e,t){return+t?Qae(e,t):Wae(e)}function Wae(e){return xb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Qae(e,t){function n(i,r,a,s,o,u,f,d,h,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var C=s+p,M=o+y,k=u+v,T=vi(C*C+M*M+k*k),O=zi(k/=T),N=Ke(Ke(k)-1)<Oe||Ke(a-h)<Oe?(a+h)/2:Nr(M,C),B=e(N,O),L=B[0],G=B[1],H=L-i,I=G-r,F=w*H-_*I;(F*F/A>t||Ke((_*H+w*I)/A-.5)>.3||s*p+o*y+u*v<Vae)&&(n(i,r,a,s,o,u,L,G,N,C/=T,M/=T,k,b,S),S.point(L,G),n(L,G,N,C,M,k,f,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,u,f,d,h,p,y,v,b,S={point:_,lineStart:w,lineEnd:C,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(O,N){O=e(O,N),i.point(O[0],O[1])}function w(){h=NaN,S.point=A,i.lineStart()}function A(O,N){var B=Uu([O,N]),L=e(O,N);n(h,p,d,y,v,b,h=L[0],p=L[1],d=O,y=B[0],v=B[1],b=B[2],X6,i),i.point(h,p)}function C(){S.point=_,i.lineEnd()}function M(){w(),S.point=k,S.lineEnd=T}function k(O,N){A(r=O,N),a=h,s=p,o=y,u=v,f=b,S.point=A}function T(){n(h,p,d,y,v,b,a,s,r,o,u,f,X6,i),S.lineEnd=C,C()}return S}}var Zae=xb({point:function(e,t){this.stream.point(e*Ge,t*Ge)}});function Kae(e){return xb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Jae(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function W6(e,t,n,i,r,a){if(!a)return Jae(e,t,n,i,r);var s=Re(a),o=De(a),u=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[u*b-f*S+t,n-f*b-u*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ns(e){return yI(function(){return e})()}function yI(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,u=0,f=0,d,h=0,p=1,y=1,v=null,b=U6,S=null,_,w,A,C=up,M=.5,k,T,O,N,B;function L(F){return O(F[0]*Ge,F[1]*Ge)}function G(F){return F=O.invert(F[0],F[1]),F&&[F[0]*Vt,F[1]*Vt]}L.stream=function(F){return N&&B===F?N:N=Zae(Kae(d)(b(k(C(B=F)))))},L.preclip=function(F){return arguments.length?(b=F,v=void 0,I()):b},L.postclip=function(F){return arguments.length?(C=F,S=_=w=A=null,I()):C},L.clipAngle=function(F){return arguments.length?(b=+F?Nae(v=F*Ge):(v=null,U6),I()):v*Vt},L.clipExtent=function(F){return arguments.length?(C=F==null?(S=_=w=A=null,up):rI(S=+F[0][0],_=+F[0][1],w=+F[1][0],A=+F[1][1]),I()):S==null?null:[[S,_],[w,A]]},L.scale=function(F){return arguments.length?(n=+F,H()):n},L.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],H()):[i,r]},L.center=function(F){return arguments.length?(a=F[0]%360*Ge,s=F[1]%360*Ge,H()):[a*Vt,s*Vt]},L.rotate=function(F){return arguments.length?(o=F[0]%360*Ge,u=F[1]%360*Ge,f=F.length>2?F[2]%360*Ge:0,H()):[o*Vt,u*Vt,f*Vt]},L.angle=function(F){return arguments.length?(h=F%360*Ge,H()):h*Vt},L.reflectX=function(F){return arguments.length?(p=F?-1:1,H()):p<0},L.reflectY=function(F){return arguments.length?(y=F?-1:1,H()):y<0},L.precision=function(F){return arguments.length?(k=V6(T,M=F*F),I()):vi(M)},L.fitExtent=function(F,R){return Sb(L,F,R)},L.fitSize=function(F,R){return U$(L,F,R)},L.fitWidth=function(F,R){return B$(L,F,R)},L.fitHeight=function(F,R){return I$(L,F,R)};function H(){var F=W6(n,0,0,p,y,h).apply(null,t(a,s)),R=W6(n,i-F[0],r-F[1],p,y,h);return d=eI(o,u,f),T=Uw(t,R),O=Uw(d,T),k=V6(T,M),I()}function I(){return N=B=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&G,H()}}function P$(e){var t=0,n=Xe/3,i=yI(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ge,n=a[1]*Ge):[t*Vt,n*Vt]},r}function ese(e){var t=Re(e);function n(i,r){return[i*t,De(r)/t]}return n.invert=function(i,r){return[i/t,zi(r*t)]},n}function tse(e,t){var n=De(e),i=(n+De(t))/2;if(Ke(i)<Oe)return ese(e);var r=1+n*(2*i-n),a=vi(r)/i;function s(o,u){var f=vi(r-2*i*De(u))/i;return[f*De(o*=i),a-f*Re(o)]}return s.invert=function(o,u){var f=a-u,d=Nr(o,Ke(f))*Ar(f);return f*i<0&&(d-=Xe*Ar(o)*Ar(f)),[d/i,zi((r-(o*o+f*f)*i*i)/(2*i))]},s}function Xy(){return P$(tse).scale(155.424).center([0,33.6442])}function vI(){return Xy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function nse(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ise(){var e,t,n=vI(),i,r=Xy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Xy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,u,f={point:function(p,y){u=[p,y]}};function d(p){var y=p[0],v=p[1];return u=null,i.point(y,v),u||(a.point(y,v),u)||(o.point(y,v),u)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=nse([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Oe,b+.12*y+Oe],[v-.214*y-Oe,b+.234*y-Oe]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Oe,b+.166*y+Oe],[v-.115*y-Oe,b+.234*y-Oe]]).stream(f),h()},d.fitExtent=function(p,y){return Sb(d,p,y)},d.fitSize=function(p,y){return U$(d,p,y)},d.fitWidth=function(p,y){return B$(d,p,y)},d.fitHeight=function(p,y){return I$(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function bI(e){return function(t,n){var i=Re(t),r=Re(n),a=e(i*r);return a===1/0?[2,0]:[a*r*De(t),a*De(n)]}}function Zp(e){return function(t,n){var i=vi(t*t+n*n),r=e(i),a=De(r),s=Re(r);return[Nr(t*a,i*s),zi(i&&n*a/i)]}}var xI=bI(function(e){return vi(2/(1+e))});xI.invert=Zp(function(e){return 2*zi(e/2)});function rse(){return ns(xI).scale(124.75).clipAngle(180-.001)}var SI=bI(function(e){return(e=qB(e))&&e/De(e)});SI.invert=Zp(function(e){return e});function ase(){return ns(SI).scale(79.4188).clipAngle(180-.001)}function Eb(e,t){return[e,$y(z$((jt+t)/2))]}Eb.invert=function(e,t){return[e,2*Od(jB(t))-jt]};function sse(){return EI(Eb).scale(961/yi)}function EI(e){var t=ns(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,u,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=u=f=null:(s=+h[0][0],o=+h[0][1],u=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[u,f]]};function d(){var h=Xe*i(),p=t(Cae(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Eb?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,u),f]]:[[s,Math.max(p[1]-h,o)],[u,Math.min(p[1]+h,f)]])}return d()}function t1(e){return z$((jt+e)/2)}function ose(e,t){var n=Re(e),i=e===t?De(e):$y(n/Re(t))/$y(t1(t)/t1(e)),r=n*AE(t1(e),i)/i;if(!i)return Eb;function a(s,o){r>0?o<-jt+Oe&&(o=-jt+Oe):o>jt-Oe&&(o=jt-Oe);var u=r/AE(t1(o),i);return[u*De(i*s),r-u*Re(i*s)]}return a.invert=function(s,o){var u=r-o,f=Ar(i)*vi(s*s+u*u),d=Nr(s,Ke(u))*Ar(u);return u*i<0&&(d-=Xe*Ar(s)*Ar(u)),[d/i,2*Od(AE(r/f,1/i))-jt]},a}function lse(){return P$(ose).scale(109.5).parallels([30,30])}function Vy(e,t){return[e,t]}Vy.invert=Vy;function use(){return ns(Vy).scale(152.63)}function cse(e,t){var n=Re(e),i=e===t?De(e):(n-Re(t))/(t-e),r=n/i+e;if(Ke(i)<Oe)return Vy;function a(s,o){var u=r-o,f=i*s;return[u*De(f),r-u*Re(f)]}return a.invert=function(s,o){var u=r-o,f=Nr(s,Ke(u))*Ar(u);return u*i<0&&(f-=Xe*Ar(s)*Ar(u)),[f/i,r-Ar(i)*vi(s*s+u*u)]},a}function fse(){return P$(cse).scale(131.154).center([0,13.9389])}var jg=1.340264,qg=-.081106,Hg=893e-6,Gg=.003796,Wy=vi(3)/2,dse=12;function _I(e,t){var n=zi(Wy*De(t)),i=n*n,r=i*i*i;return[e*Re(n)/(Wy*(jg+3*qg*i+r*(7*Hg+9*Gg*i))),n*(jg+qg*i+r*(Hg+Gg*i))]}_I.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,u;a<dse&&(o=n*(jg+qg*i+r*(Hg+Gg*i))-t,u=jg+3*qg*i+r*(7*Hg+9*Gg*i),n-=s=o/u,i=n*n,r=i*i*i,!(Ke(s)<Cy));++a);return[Wy*e*(jg+3*qg*i+r*(7*Hg+9*Gg*i))/Re(n),zi(De(n)/Wy)]};function hse(){return ns(_I).scale(177.158)}function wI(e,t){var n=Re(t),i=Re(e)*n;return[n*De(e)/i,De(t)/i]}wI.invert=Zp(Od);function gse(){return ns(wI).scale(144.049).clipAngle(60)}function pse(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,u=null,f,d,h,p=1,y=1,v=xb({point:function(C,M){var k=A([C,M]);this.stream.point(k[0],k[1])}}),b=up,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A(C){var M=C[0]*p,k=C[1]*y;if(a){var T=k*s-M*o;M=M*s+k*o,k=T}return[M+t,k+n]}return A.invert=function(C){var M=C[0]-t,k=C[1]-n;if(a){var T=k*s+M*o;M=M*s-k*o,k=T}return[M/p,k/y]},A.stream=function(C){return S&&_===C?S:S=v(b(_=C))},A.postclip=function(C){return arguments.length?(b=C,u=f=d=h=null,w()):b},A.clipExtent=function(C){return arguments.length?(b=C==null?(u=f=d=h=null,up):rI(u=+C[0][0],f=+C[0][1],d=+C[1][0],h=+C[1][1]),w()):u==null?null:[[u,f],[d,h]]},A.scale=function(C){return arguments.length?(e=+C,w()):e},A.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],w()):[t,n]},A.angle=function(C){return arguments.length?(a=C%360*Ge,o=De(a),s=Re(a),w()):a*Vt},A.reflectX=function(C){return arguments.length?(i=C?-1:1,w()):i<0},A.reflectY=function(C){return arguments.length?(r=C?-1:1,w()):r<0},A.fitExtent=function(C,M){return Sb(A,C,M)},A.fitSize=function(C,M){return U$(A,C,M)},A.fitWidth=function(C,M){return B$(A,C,M)},A.fitHeight=function(C,M){return I$(A,C,M)},A}function AI(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}AI.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Ke(r)>Oe&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function mse(){return ns(AI).scale(175.295)}function CI(e,t){return[Re(t)*De(e),De(t)]}CI.invert=Zp(zi);function yse(){return ns(CI).scale(249.5).clipAngle(90+Oe)}function MI(e,t){var n=Re(t),i=1+Re(e)*n;return[n*De(e)/i,De(t)/i]}MI.invert=Zp(function(e){return 2*Od(e)});function vse(){return ns(MI).scale(250).clipAngle(142)}function $I(e,t){return[$y(z$((jt+t)/2)),-e]}$I.invert=function(e,t){return[-t,2*Od(jB(e))-jt]};function bse(){var e=EI($I),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var xse=Math.abs,Ww=Math.cos,Qy=Math.sin,Sse=1e-6,TI=Math.PI,Qw=TI/2,Q6=Ese(2);function Z6(e){return e>1?Qw:e<-1?-Qw:Math.asin(e)}function Ese(e){return e>0?Math.sqrt(e):0}function _se(e,t){var n=e*Qy(t),i=30,r;do t-=r=(t+Qy(t)-n)/(1+Ww(t));while(xse(r)>Sse&&--i>0);return t/2}function wse(e,t,n){function i(r,a){return[e*r*Ww(a=_se(n,a)),t*Qy(a)]}return i.invert=function(r,a){return a=Z6(a/t),[r/(e*Ww(a)),Z6((2*a+Qy(2*a))/n)]},i}var Ase=wse(Q6/Qw,Q6,TI);function Cse(){return ns(Ase).scale(169.529)}const Mse=mI(),Zw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function $se(e,t){return function n(){const i=t();return i.type=e,i.path=mI().projection(i),i.copy=i.copy||function(){const r=n();return Zw.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},GL(i)}}function j$(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Zy[e]=$se(e,t),this):Zy[e]||null}function kI(e){return e&&e.path||Mse}const Zy={albers:vI,albersusa:ise,azimuthalequalarea:rse,azimuthalequidistant:ase,conicconformal:lse,conicequalarea:Xy,conicequidistant:fse,equalEarth:hse,equirectangular:use,gnomonic:gse,identity:pse,mercator:sse,mollweide:Cse,naturalEarth1:mse,orthographic:yse,stereographic:vse,transversemercator:bse};for(const e in Zy)j$(e,Zy[e]);function Tse(){}const Ms=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function DI(){var e=1,t=1,n=o;function i(u,f){return f.map(d=>r(u,d))}function r(u,f){var d=[],h=[];return a(u,f,p=>{n(p,u,f),kse(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Dse((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(u,f,d){var h=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=u[0]>=f,Ms[S<<1].forEach(A);++y<e-1;)b=S,S=u[y+1]>=f,Ms[b|S<<1].forEach(A);for(Ms[S<<0].forEach(A);++v<t-1;){for(y=-1,S=u[v*e+e]>=f,_=u[v*e]>=f,Ms[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=u[v*e+e+y+1]>=f,w=_,_=u[v*e+y+1]>=f,Ms[b|S<<1|_<<2|w<<3].forEach(A);Ms[S|_<<3].forEach(A)}for(y=-1,_=u[v*e]>=f,Ms[_<<2].forEach(A);++y<e-1;)w=_,_=u[v*e+y+1]>=f,Ms[_<<2|w<<3].forEach(A);Ms[_<<3].forEach(A);function A(C){var M=[C[0][0]+y,C[0][1]+v],k=[C[1][0]+y,C[1][1]+v],T=s(M),O=s(k),N,B;(N=p[T])?(B=h[O])?(delete p[N.end],delete h[B.start],N===B?(N.ring.push(k),d(N.ring)):h[N.start]=p[B.end]={start:N.start,end:B.end,ring:N.ring.concat(B.ring)}):(delete p[N.end],N.ring.push(k),p[N.end=O]=N):(N=h[O])?(B=p[T])?(delete h[N.start],delete p[B.end],N===B?(N.ring.push(k),d(N.ring)):h[B.start]=p[N.end]={start:B.start,end:N.end,ring:B.ring.concat(N.ring)}):(delete h[N.start],N.ring.unshift(M),h[N.start=T]=N):h[T]=p[O]={start:T,end:O,ring:[M,k]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function o(u,f,d){u.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],h[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],h[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(u){if(!arguments.length)return[e,t];var f=Math.floor(u[0]),d=Math.floor(u[1]);return f>=0&&d>=0||te("invalid size"),e=f,t=d,i},i.smooth=function(u){return arguments.length?(n=u?o:Tse,i):n===o},i}function kse(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Dse(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Ose(e,t[n]))return r;return 0}function Ose(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var u=e[a],f=u[0],d=u[1],h=e[o],p=h[0],y=h[1];if(Rse(u,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Rse(e,t,n){var i;return Nse(e,t,n)&&zse(e[i=+(e[0]===t[0])],n[i],t[i])}function Nse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function zse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function OI(e,t,n){return function(i){var r=qa(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,u=t?ol(a,s,e):o/(e+1);return er(a+u,s,u)}}function q$(e){J.call(this,null,e)}q$.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ge(q$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ni,a=DI().smooth(e.smooth!==!1),s=e.thresholds||Fse(i,r,e),o=e.as===null?null:e.as||"contour",u=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,re(s)?s:s(d.values));Lse(h,d,f,e),h.forEach(p=>{u.push(Bv(f,ct(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Fse(e,t,n){const i=OI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>_u(t(r).values)))}function Lse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(je(r)&&(r=r(n,i)),je(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(st(r)?r:r[0])||1,o=(st(r)?r:r[1])||1,u=a&&a[0]||0,f=a&&a[1]||0;e.forEach(RI(t,s,o,u,f))}function RI(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function u(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(u),h}}function K6(e,t,n){const i=e>=0?e:zC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function kE(e){return je(e)?e:ii(+e)}function NI(){var e=u=>u[0],t=u=>u[1],n=vd,i=[-1,-1],r=960,a=500,s=2;function o(u,f){const d=K6(i[0],u,e)>>s,h=K6(i[1],u,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;u.forEach(C=>{const M=p+(+e(C)>>s),k=y+(+t(C)>>s);M>=0&&M<v&&k>=0&&k<b&&(S[M+k*v]+=+n(C))}),d>0&&h>0?(uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h)):d>0?(uf(v,b,S,_,d),uf(v,b,_,S,d),uf(v,b,S,_,d),w=_):h>0&&(cf(v,b,S,_,h),cf(v,b,_,S,h),cf(v,b,S,_,h),w=_);const A=f?Math.pow(2,-2*s):1/W8(w);for(let C=0,M=v*b;C<M;++C)w[C]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(u){return arguments.length?(e=kE(u),o):e},o.y=function(u){return arguments.length?(t=kE(u),o):t},o.weight=function(u){return arguments.length?(n=kE(u),o):n},o.size=function(u){if(!arguments.length)return[r,a];var f=+u[0],d=+u[1];return f>=0&&d>=0||te("invalid size"),r=f,a=d,o},o.cellSize=function(u){return arguments.length?((u=+u)>=1||te("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),o):1<<s},o.bandwidth=function(u){return arguments.length?(u=xe(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&te("invalid bandwidth"),i=u,o):i},o}function uf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,u=0;o<e+r;++o)o<e&&(u+=n[o+s*e]),o>=r&&(o>=a&&(u-=n[o-a+s*e]),i[o-r+s*e]=u/Math.min(o+1,e-1+a-o,a))}function cf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,u=0;o<t+r;++o)o<t&&(u+=n[s+o*e]),o>=r&&(o>=a&&(u-=n[s+(o-a)*e]),i[s+(o-r)*e]=u/Math.min(o+1,t-1+a-o,a))}function H$(e){J.call(this,null,e)}H$.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Use=["x","y","weight","size","cellSize","bandwidth"];function zI(e,t){return Use.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ge(H$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Bse(i,e.groupby),a=(e.groupby||[]).map(qt),s=zI(NI(),e),o=e.as||"grid",u=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return u=r.map(d=>ct(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Bse(e,t){var n=[],i=d=>d(o),r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function G$(e){J.call(this,null,e)}G$.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ge(G$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=DI().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||OI(e.count||10,e.nice,!!r),s=e.size,o,u;return r||(r=t.materialize(t.SOURCE).source,o=zI(NI(),e)(r,!0),u=RI(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=re(a)?a:a(r),r=i.size(s)(r,a),u&&r.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ct),n}});const Kw="Feature",Y$="FeatureCollection",Ise="MultiPoint";function X$(e){J.call(this,null,e)}X$.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ge(X$,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&ni,u=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Kn(o))||a&&t.modified(Kn(a))||s&&t.modified(Kn(s)),(!this.value||f)&&(u=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(u,d=>n.push(o(d))),a&&s&&(t.visit(u,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:Kw,geometry:{type:Ise,coordinates:i}})),this.value={type:Y$,features:n}}});function V$(e){J.call(this,null,e)}V$.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ge(V$,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ni,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=kI(e.projection),n.materialize().reflow()):s=r===ni||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=Pse(i,e.pointRadius);return n.visit(s,u=>u[a]=i(r(u))),i.pointRadius(o),n.modifies(a)}});function Pse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function W$(e){J.call(this,null,e)}W$.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ge(W$,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],u;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(u=t.modified(i.fields)||t.modified(r.fields),t.visit(u?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function Q$(e){J.call(this,null,e)}Q$.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ge(Q$,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=jse(kI(e.projection),e.field||kr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function jse(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function Z$(e){J.call(this,[],e),this.generator=Fae()}Z$.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ge(Z$,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)je(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(H9(n[0],r)):t.add.push(ct(r)),n[0]=r,t}});function K$(e){J.call(this,null,e)}K$.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ge(K$,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ni,a=Hse(e.opacity,e),s=qse(e.color,e),o=e.as||"image",u={$x:0,$y:0,$value:0,$max:i?_u(n.map(f=>_u(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=Pe({},f,u);i||(h.$max=_u(d.values||[])),f[o]=Gse(d,h,s.dep?s:ii(s(h)),a.dep?a:ii(a(h)))}),t.reflow(!0).modifies(o)}});function qse(e,t){let n;return je(e)?(n=i=>cl(e(i,t)),n.dep=FI(e)):n=ii(cl(e||"#888")),n}function Hse(e,t){let n;return je(e)?(n=i=>e(i,t),n.dep=FI(e)):e?n=ii(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function FI(e){if(!je(e))return!1;const t=aa(Kn(e));return t.$x||t.$y||t.$value||t.$max}function Gse(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,u=e.x2||r,f=e.y2||a,d=e.values,h=d?S=>d[S]:Ho,p=il(u-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,u-s,f-o),b=v.data;for(let S=o,_=0;S<f;++S){t.$y=S-o;for(let w=s,A=S*r;w<u;++w,_+=4){t.$x=w-s,t.$value=h(w+A);const C=n(t);b[_+0]=C.r,b[_+1]=C.g,b[_+2]=C.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function LI(e){J.call(this,null,e),this.modified(!0)}ge(LI,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Xse(e.type),Zw.forEach(i=>{e[i]!=null&&J6(n,i,e[i])})):Zw.forEach(i=>{e.modified(i)&&J6(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Yse(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Yse(e,t){const n=Vse(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Xse(e){const t=j$((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function J6(e,t,n){je(e[t])&&e[t](n)}function Vse(e){return e=xe(e),e.length===1?e[0]:{type:Y$,features:e.reduce((t,n)=>t.concat(Wse(n)),[])}}function Wse(e){return e.type===Y$?e.features:xe(e).filter(t=>t!=null).map(t=>t.type===Kw?t:{type:Kw,geometry:t})}const Qse=Object.freeze(Object.defineProperty({__proto__:null,contour:G$,geojson:X$,geopath:V$,geopoint:W$,geoshape:Q$,graticule:Z$,heatmap:K$,isocontour:q$,kde2d:H$,projection:LI},Symbol.toStringTag,{value:"Module"}));function Zse(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,u=0,f=0;for(a=0;a<s;++a)o=n[a],u+=o.x,f+=o.y;for(u=(u/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=u,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Kse(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return UI(this.cover(t,n),t,n,e)}function UI(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,u=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=h));return r[w]=a,r[_]=s,e}function Jse(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),u=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<u&&(u=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(u>d||f>h)return this;for(this.cover(u,f).cover(d,h),n=0;n<i;++n)UI(this,s[n],o[n],e[n]);return this}function eoe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,u,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,u=new Array(4),u[f]=o,o=u,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function toe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function noe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function di(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function ioe(e,t,n){var i,r=this._x0,a=this._y0,s,o,u,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new di(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(u=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+u)/2,_=(o+f)/2;p.push(new di(y[3],S,_,u,f),new di(y[2],s,_,S,f),new di(y[1],S,o,u,_),new di(y[0],s,o,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),C=w*w+A*A;if(C<n){var M=Math.sqrt(n=C);r=e-M,a=t-M,d=e+M,h=t+M,i=y.data}}return i}function roe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,u=this._x1,f=this._y1,d,h,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+u)/2))?s=p:u=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function aoe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function soe(){return this._root}function ooe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function loe(e){var t=[],n,i=this._root,r,a,s,o,u;for(i&&t.push(new di(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,u=n.y1)&&i.length){var f=(a+o)/2,d=(s+u)/2;(r=i[3])&&t.push(new di(r,f,d,o,u)),(r=i[2])&&t.push(new di(r,a,d,f,u)),(r=i[1])&&t.push(new di(r,f,s,o,d)),(r=i[0])&&t.push(new di(r,a,s,f,d))}return this}function uoe(e){var t=[],n=[],i;for(this._root&&t.push(new di(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,u=i.x1,f=i.y1,d=(s+u)/2,h=(o+f)/2;(a=r[0])&&t.push(new di(a,s,o,d,h)),(a=r[1])&&t.push(new di(a,d,o,u,h)),(a=r[2])&&t.push(new di(a,s,h,d,f)),(a=r[3])&&t.push(new di(a,d,h,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function coe(e){return e[0]}function foe(e){return arguments.length?(this._x=e,this):this._x}function doe(e){return e[1]}function hoe(e){return arguments.length?(this._y=e,this):this._y}function J$(e,t,n){var i=new eT(t??coe,n??doe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function eT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function e4(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xi=J$.prototype=eT.prototype;xi.copy=function(){var e=new eT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=e4(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=e4(i));return e};xi.add=Kse;xi.addAll=Jse;xi.cover=eoe;xi.data=toe;xi.extent=noe;xi.find=ioe;xi.remove=roe;xi.removeAll=aoe;xi.root=soe;xi.size=ooe;xi.visit=loe;xi.visitAfter=uoe;xi.x=foe;xi.y=hoe;function hi(e){return function(){return e}}function Zo(e){return(e()-.5)*1e-6}function goe(e){return e.x+e.vx}function poe(e){return e.y+e.vy}function moe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=hi(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,S,_=0;_<a;++_)for(h=J$(t,goe,poe).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(w);function w(A,C,M,k,T){var O=A.data,N=A.r,B=b+N;if(O){if(O.index>p.index){var L=y-O.x-O.vx,G=v-O.y-O.vy,H=L*L+G*G;H<B*B&&(L===0&&(L=Zo(i),H+=L*L),G===0&&(G=Zo(i),H+=G*G),H=(B-(H=Math.sqrt(H)))/H*r,p.vx+=(L*=H)*(B=(N*=N)/(S+N)),p.vy+=(G*=H)*B,O.vx-=L*(B=1-B),O.vy-=G*B)}return}return C>y+B||k<y-B||M>v+B||T<v-B}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function u(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,u()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:hi(+f),u(),s):e},s}function yoe(e){return e.index}function t4(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function voe(e){var t=yoe,n=h,i,r=hi(30),a,s,o,u,f,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,C,M,k,T,O,N,B;A<w;++A)C=e[A],M=C.source,k=C.target,T=k.x+k.vx-M.x-M.vx||Zo(f),O=k.y+k.vy-M.y-M.vy||Zo(f),N=Math.sqrt(T*T+O*O),N=(N-a[A])/N*S*i[A],T*=N,O*=N,k.vx-=T*(B=u[A]),k.vy-=O*B,M.vx+=T*(B=1-B),M.vy+=O*B}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map((M,k)=>[t(M,k,s),M])),C;for(S=0,o=new Array(_);S<w;++S)C=e[S],C.index=S,typeof C.source!="object"&&(C.source=t4(A,C.source)),typeof C.target!="object"&&(C.target=t4(A,C.target)),o[C.source.index]=(o[C.source.index]||0)+1,o[C.target.index]=(o[C.target.index]||0)+1;for(S=0,u=new Array(w);S<w;++S)C=e[S],u[S]=o[C.source.index]/(o[C.source.index]+o[C.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:hi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:hi(+S),b(),p):r},p}var boe={value:()=>{}};function BI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new z1(n)}function z1(e){this._=e}function xoe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}z1.prototype=BI.prototype={constructor:z1,on:function(e,t){var n=this._,i=xoe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Soe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=n4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=n4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new z1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Soe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function n4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=boe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ed=0,kg=0,ng=0,II=1e3,Ky,Dg,Jy=0,Iu=0,_b=0,dp=typeof performance=="object"&&performance.now?performance:Date,PI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tT(){return Iu||(PI(Eoe),Iu=dp.now()+_b)}function Eoe(){Iu=0}function ev(){this._call=this._time=this._next=null}ev.prototype=jI.prototype={constructor:ev,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?tT():+n)+(t==null?0:+t),!this._next&&Dg!==this&&(Dg?Dg._next=this:Ky=this,Dg=this),this._call=e,this._time=n,Jw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jw())}};function jI(e,t,n){var i=new ev;return i.restart(e,t,n),i}function _oe(){tT(),++ed;for(var e=Ky,t;e;)(t=Iu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ed}function i4(){Iu=(Jy=dp.now())+_b,ed=kg=0;try{_oe()}finally{ed=0,Aoe(),Iu=0}}function woe(){var e=dp.now(),t=e-Jy;t>II&&(_b-=t,Jy=e)}function Aoe(){for(var e,t=Ky,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ky=n);Dg=e,Jw(i)}function Jw(e){if(!ed){kg&&(kg=clearTimeout(kg));var t=e-Iu;t>24?(e<1/0&&(kg=setTimeout(i4,e-dp.now()-_b)),ng&&(ng=clearInterval(ng))):(ng||(Jy=dp.now(),ng=setInterval(woe,II)),ed=1,PI(i4))}}function Coe(e,t,n){var i=new ev,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?tT():+o,i._restart(function u(f){f+=r,i._restart(u,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const Moe=1664525,$oe=1013904223,r4=4294967296;function Toe(){let e=1;return()=>(e=(Moe*e+$oe)%r4)/r4}function koe(e){return e.x}function Doe(e){return e.y}var Ooe=10,Roe=Math.PI*(3-Math.sqrt(5));function Noe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,u=jI(h),f=BI("tick","end"),d=Toe();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(u.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function(C){C(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Ooe*Math.sqrt(.5+b),A=b*Roe;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return u.restart(h),t},stop:function(){return u.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,_){var w=0,A=e.length,C,M,k,T,O;for(_==null?_=1/0:_*=_,w=0;w<A;++w)T=e[w],C=b-T.x,M=S-T.y,k=C*C+M*M,k<_&&(O=T,_=k);return O},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function zoe(){var e,t,n,i,r=hi(-30),a,s=1,o=1/0,u=.81;function f(y){var v,b=e.length,S=J$(e,koe,Doe).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,_=0,w,A,C;if(y.length){for(w=A=C=0;C<4;++C)(b=y[C])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,C=_*_+w*w;if(A*A/u<C)return C<o&&(_===0&&(_=Zo(n),C+=_*_),w===0&&(w=Zo(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)),t.vx+=_*y.value*i/C,t.vy+=w*y.value*i/C),!0;if(y.length||C>=o)return;(y.data!==t||y.next)&&(_===0&&(_=Zo(n),C+=_*_),w===0&&(w=Zo(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)));do y.data!==t&&(A=a[y.data.index]*i/C,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:hi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(u=y*y,f):Math.sqrt(u)},f}function Foe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vx+=(r[u]-d.x)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}function Loe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vy+=(r[u]-d.y)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}const a4={center:Zse,collide:moe,nbody:zoe,link:voe,x:Foe,y:Loe},Og="forces",eA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Uoe=["static","iterations"],qI=["x","y","vx","vy"];function nT(e){J.call(this,null,e)}nT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:qI}]};ge(nT,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(eA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&HI(n,e,0,t)):(this.value=n=Ioe(t.source,e),n.on("tick",Boe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Uoe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,u=0,f=o.length,d;u<f;++u)if(d=o[u],!(d.name!==Og||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(qI)}});function Boe(e,t){return()=>e.touch(t).run()}function Ioe(e,t){const n=Noe(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),HI(n,t,!0).on("end",()=>a=!0)}function HI(e,t,n,i){var r=xe(t.forces),a,s,o,u;for(a=0,s=eA.length;a<s;++a)o=eA[a],o!==Og&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)u=Og+a,o=n||t.modified(Og,a)?joe(r[a]):i&&Poe(r[a],i)?e.force(u):null,o&&e.force(u,o);for(s=e.numForces||0;a<s;++a)e.force(Og+a,null);return e.numForces=r.length,e}function Poe(e,t){var n,i;for(n in e)if(je(i=e[n])&&t.modified(Kn(i)))return 1;return 0}function joe(e){var t,n;_e(a4,e.force)||te("Unrecognized force: "+e.force),t=a4[e.force]();for(n in e)je(t[n])&&qoe(t[n],e[n],e);return t}function qoe(e,t,n){e(je(t)?i=>t(i,n):t)}const Hoe=Object.freeze(Object.defineProperty({__proto__:null,force:nT},Symbol.toStringTag,{value:"Module"}));function Goe(e,t){return e.parent===t.parent?1:2}function Yoe(e){return e.reduce(Xoe,0)/e.length}function Xoe(e,t){return e+t.x}function Voe(e){return 1+e.reduce(Woe,0)}function Woe(e,t){return Math.max(e,t.y)}function Qoe(e){for(var t;t=e.children;)e=t[0];return e}function Zoe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Koe(){var e=Goe,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Yoe(y),p.y=Voe(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var u=Qoe(a),f=Zoe(a),d=u.x-e(u,f)/2,h=f.x+e(f,u)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Joe(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function ele(){return this.eachAfter(Joe)}function tle(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function nle(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function ile(e,t){for(var n=this,i=[n],r=[],a,s,o,u=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function rle(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function ale(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function sle(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ole(e){for(var t=this,n=lle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function lle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function ule(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function cle(){return Array.from(this)}function fle(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function dle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*hle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function iT(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=mle)):t===void 0&&(t=ple);for(var n=new td(e),i,r=[n],a,s,o,u;i=r.pop();)if((s=t(i.data))&&(u=(s=Array.from(s)).length))for(i.children=s,o=u-1;o>=0;--o)r.push(a=s[o]=new td(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(GI)}function gle(){return iT(this).eachBefore(yle)}function ple(e){return e.children}function mle(e){return Array.isArray(e)?e[1]:null}function yle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function GI(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function td(e){this.data=e,this.depth=this.height=0,this.parent=null}td.prototype=iT.prototype={constructor:td,count:ele,each:tle,eachAfter:ile,eachBefore:nle,find:rle,sum:ale,sort:sle,path:ole,ancestors:ule,descendants:cle,leaves:fle,links:dle,copy:gle,[Symbol.iterator]:hle};function F1(e){return e==null?null:YI(e)}function YI(e){if(typeof e!="function")throw new Error;return e}function vu(){return 0}function yf(e){return function(){return e}}const vle=1664525,ble=1013904223,s4=4294967296;function xle(){let e=1;return()=>(e=(vle*e+ble)%s4)/s4}function Sle(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ele(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function _le(e,t){for(var n=0,i=(e=Ele(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&XI(s,a)?++n:(s=Ale(r=wle(r,a)),n=0);return s}function wle(e,t){var n,i;if(DE(t,e))return[t];for(n=0;n<e.length;++n)if(n1(t,e[n])&&DE(Rg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(n1(Rg(e[n],e[i]),t)&&n1(Rg(e[n],t),e[i])&&n1(Rg(e[i],t),e[n])&&DE(VI(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function n1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function XI(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function DE(e,t){for(var n=0;n<t.length;++n)if(!XI(e,t[n]))return!1;return!0}function Ale(e){switch(e.length){case 1:return Cle(e[0]);case 2:return Rg(e[0],e[1]);case 3:return VI(e[0],e[1],e[2])}}function Cle(e){return{x:e.x,y:e.y,r:e.r}}function Rg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,u=a-n,f=s-i,d=o-r,h=Math.sqrt(u*u+f*f);return{x:(n+a+u/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function VI(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,u=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,S=u-a,_=h-a,w=i*i+r*r-a*a,A=w-s*s-o*o+u*u,C=w-f*f-d*d+h*h,M=y*v-p*b,k=(v*C-b*A)/(M*2)-i,T=(b*S-v*_)/M,O=(y*A-p*C)/(M*2)-r,N=(p*_-y*S)/M,B=T*T+N*N-1,L=2*(a+k*T+O*N),G=k*k+O*O-a*a,H=-(Math.abs(B)>1e-6?(L+Math.sqrt(L*L-4*B*G))/(2*B):G/L);return{x:i+k+T*H,y:r+O+N*H,r:H}}function o4(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,u,f=i*i+s*s;f?(a=t.r+n.r,a*=a,u=e.r+n.r,u*=u,a>u?(r=(f+u-a)/(2*f),o=Math.sqrt(Math.max(0,u/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-u)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function l4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function u4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function i1(e){this._=e,this.next=null,this.previous=null}function Mle(e,t){if(!(a=(e=Sle(e)).length))return 0;var n,i,r,a,s,o,u,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;o4(i,n,r=e[2]),n=new i1(n),i=new i1(i),r=new i1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(u=3;u<a;++u){o4(n._,i._,r=e[u]),r=new i1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(l4(f._,r._)){i=f,n.next=i,i.previous=n,--u;continue e}h+=f._.r,f=f.next}else{if(l4(d._,r._)){n=d,n.next=i,i.previous=n,--u;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=u4(n);(r=r.next)!==i;)(o=u4(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=_le(n,t),u=0;u<a;++u)n=e[u],n.x-=r.x,n.y-=r.y;return r.r}function $le(e){return Math.sqrt(e.value)}function Tle(){var e=null,t=1,n=1,i=vu;function r(a){const s=xle();return a.x=t/2,a.y=n/2,e?a.eachBefore(c4(e)).eachAfter(OE(i,.5,s)).eachBefore(f4(1)):a.eachBefore(c4($le)).eachAfter(OE(vu,1,s)).eachAfter(OE(i,a.r/Math.min(t,n),s)).eachBefore(f4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=F1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:yf(+a),r):i},r}function c4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function OE(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,u;if(o)for(a=0;a<s;++a)r[a].r+=o;if(u=Mle(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=u+o}}}function f4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function WI(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Kp(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(i-t)/e.value;++o<u;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function kle(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(WI),s}function a(s,o){return function(u){u.children&&Kp(u,u.x0,s*(u.depth+1)/o,u.x1,s*(u.depth+2)/o);var f=u.x0,d=u.y0,h=u.x1-n,p=u.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),u.x0=f,u.y0=d,u.x1=h,u.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var Dle={depth:-1},d4={},RE={};function Ole(e){return e.id}function Rle(e){return e.parentId}function h4(){var e=Ole,t=Rle,n;function i(r){var a=Array.from(r),s=e,o=t,u,f,d,h,p,y,v,b,S=new Map;if(n!=null){const _=a.map((C,M)=>Nle(n(C,M,r))),w=_.map(g4),A=new Set(_).add("");for(const C of w)A.has(C)||(A.add(C),_.push(C),w.push(g4(C)),a.push(RE));s=(C,M)=>_[M],o=(C,M)=>w[M]}for(d=0,u=a.length;d<u;++d)f=a[d],y=a[d]=new td(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?d4:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<u;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===d4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===RE&&h.children.length===1;)h=h.children[0],--u;for(let _=a.length-1;_>=0&&(y=a[_],y.data===RE);--_)y.data=null}if(h.parent=Dle,h.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(GI),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=F1(r),i):e},i.parentId=function(r){return arguments.length?(t=F1(r),i):t},i.path=function(r){return arguments.length?(n=F1(r),i):n},i}function Nle(e){e=`${e}`;let t=e.length;return tA(e,t-1)&&!tA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function g4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!tA(e,t););return e.slice(0,t)}function tA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function zle(e,t){return e.parent===t.parent?1:2}function NE(e){var t=e.children;return t?t[0]:e.t}function zE(e){var t=e.children;return t?t[t.length-1]:e.t}function Fle(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Lle(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Ule(e,t,n){return e.a.parent===t.parent?e.a:n}function L1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}L1.prototype=Object.create(td.prototype);function Ble(e){for(var t=new L1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new L1(a[s],s)),r.parent=n;return(t.parent=new L1(null,0)).children=[t],t}function Ile(){var e=zle,t=1,n=1,i=null;function r(f){var d=Ble(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(u);else{var h=f,p=f,y=f;f.eachBefore(function(w){w.x<h.x&&(h=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){Lle(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,C;v=zE(v),p=NE(p),v&&p;)b=NE(b),y=zE(y),y.a=f,C=v.z+w-p.z-S+e(v._,p._),C>0&&(Fle(Ule(v,f,h),f,C),S+=C,_+=C),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!zE(y)&&(y.t=v,y.m+=w-_),p&&!NE(b)&&(b.t=p,b.m+=S-A,h=f)}return h}function u(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function wb(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(r-n)/e.value;++o<u;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var QI=(1+Math.sqrt(5))/2;function ZI(e,t,n,i,r,a){for(var s=[],o=t.children,u,f,d=0,h=0,p=o.length,y,v,b=t.value,S,_,w,A,C,M,k;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(_=w=S,M=Math.max(v/y,y/v)/(b*e),k=S*S*M,C=Math.max(w/k,k/_);h<p;++h){if(S+=f=o[h].value,f<_&&(_=f),f>w&&(w=f),k=S*S*M,A=Math.max(w/k,k/_),A>C){S-=f;break}C=A}s.push(u={value:S,dice:y<v,children:o.slice(d,h)}),u.dice?Kp(u,n,i,r,b?i+=v*S/b:a):wb(u,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const KI=function e(t){function n(i,r,a,s,o){ZI(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(QI);function Ple(){var e=KI,t=!1,n=1,i=1,r=[0],a=vu,s=vu,o=vu,u=vu,f=vu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(WI),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=o(p)-y,_-=u(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=YI(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:yf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:yf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:yf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:yf(+p),d):u},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:yf(+p),d):f},d}function jle(e,t,n,i,r){var a=e.children,s,o=a.length,u,f=new Array(o+1);for(f[0]=u=s=0;s<o;++s)f[s+1]=u+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,_){if(h>=p-1){var w=a[h];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[h],C=y/2+A,M=h+1,k=p-1;M<k;){var T=M+k>>>1;f[T]<C?M=T+1:k=T}C-f[M-1]<f[M]-C&&h+1<M&&--M;var O=f[M]-A,N=y-O;if(S-v>_-b){var B=y?(v*N+S*O)/y:S;d(h,M,O,v,b,B,_),d(M,p,N,B,b,S,_)}else{var L=y?(b*N+_*O)/y:_;d(h,M,O,v,b,S,L),d(M,p,N,v,L,S,_)}}}function qle(e,t,n,i,r){(e.depth&1?wb:Kp)(e,t,n,i,r)}const Hle=function e(t){function n(i,r,a,s,o){if((u=i._squarify)&&u.ratio===t)for(var u,f,d,h,p=-1,y,v=u.length,b=i.value;++p<v;){for(f=u[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?Kp(f,r,a,s,b?a+=(o-a)*f.value/b:o):wb(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=u=ZI(t,i,r,a,s,o),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(QI);function nA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function rT(e){J.call(this,null,e)}rT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Gle=e=>e.values;ge(rT,J,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Uv(s.data)&&r.rem.push(s.data)}),this.value=a=iT({values:xe(e.keys).reduce((s,o)=>(s.key(o),s),Yle()).entries(r.source)},Gle),n&&a.each(s=>{s.children&&(s=ct(s.data),r.add.push(s),r.source.push(s))}),nA(a,ke,ke)),r.source.root=a,r}});function Yle(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],u={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=u[h])?y.push(p):u[h]=[p];for(h in u)f[h]=n(u[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function no(e){J.call(this,null,e)}const Xle=(e,t)=>e.parent===t.parent?1:2;ge(no,J,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(ic(e.sort,s=>s.data)),Vle(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Xle:vd);try{this.value=n(r)}catch(s){te(s)}return r.each(s=>Wle(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function Vle(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Wle(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const iA=["x","y","r","depth","children"];function aT(e){no.call(this,e)}aT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:iA.length,default:iA}]};ge(aT,no,{layout:Tle,params:["radius","size","padding"],fields:iA});const rA=["x0","y0","x1","y1","depth","children"];function sT(e){no.call(this,e)}sT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rA.length,default:rA}]};ge(sT,no,{layout:kle,params:["size","round","padding"],fields:rA});function oT(e){J.call(this,null,e)}oT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ge(oT,J,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?nA(h4().id(e.key).parentId(e.parentKey)(r.source),e.key,Dr):nA(h4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const p4={tidy:Ile,cluster:Koe},aA=["x","y","depth","children"];function lT(e){no.call(this,e)}lT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aA.length,default:aA}]};ge(lT,no,{layout(e){const t=e||"tidy";if(_e(p4,t))return p4[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:aA});function uT(e){J.call(this,[],e)}uT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ge(uT,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),i.each(s=>{const o=s.data,u=s.parent&&s.parent.data;u&&a[ke(o)]&&a[ke(u)]&&r.add.push(ct({source:u,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&r.mod.push(s)})),r}});const m4={binary:jle,dice:Kp,slice:wb,slicedice:qle,squarify:KI,resquarify:Hle},sA=["x0","y0","x1","y1","depth","children"];function cT(e){no.call(this,e)}cT.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sA.length,default:sA}]};ge(cT,no,{layout(){const e=Ple();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(m4,t)?e.tile(m4[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:sA});const Qle=Object.freeze(Object.defineProperty({__proto__:null,nest:rT,pack:aT,partition:sT,stratify:oT,tree:lT,treelinks:uT,treemap:cT},Symbol.toStringTag,{value:"Module"})),FE=4278190080;function Zle(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Kle(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,u=il(a,s).getContext("2d"),f=il(a,s).getContext("2d"),d=o&&il(a,s).getContext("2d");n.forEach(O=>U1(u,O,!1)),U1(f,t,!1),o&&U1(d,t,!0);const h=LE(u,a,s),p=LE(f,a,s),y=o&&LE(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,_,w,A,C,M,k,T;for(_=0;_<s;++_)for(S=0;S<a;++S)C=_*a+S,M=h[C]&FE,T=p[C]&FE,k=o&&y[C]&FE,(M||k||T)&&(w=e(S),A=e(_),!r&&(M||T)&&v.set(w,A),o&&(M||k)&&b.set(w,A));return[v,b]}function LE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function U1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>U1(e,a.items,n))}):ur[i].draw(e,{items:n?t.map(Jle):t})}function Jle(e){const t=Bv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const $s=5,ai=31,hp=32,jo=new Uint32Array(hp+1),Qr=new Uint32Array(hp+1);Qr[0]=0;jo[0]=~Qr[0];for(let e=1;e<=hp;++e)Qr[e]=Qr[e-1]<<1|1,jo[e]=~Qr[e];function eue(e,t){const n=new Uint32Array(~~((e*t+hp)/hp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>$s]&1<<(o&ai)},set:(a,s)=>{const o=s*e+a;i(o>>>$s,1<<(o&ai))},clear:(a,s)=>{const o=s*e+a;r(o>>>$s,~(1<<(o&ai)))},getRange:(a,s,o,u)=>{let f=u,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>$s,y=h>>>$s,p===y){if(n[p]&jo[d&ai]&Qr[(h&ai)+1])return!0}else{if(n[p]&jo[d&ai]||n[y]&Qr[(h&ai)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>$s,p=d>>>$s,h===p)i(h,jo[f&ai]&Qr[(d&ai)+1]);else for(i(h,jo[f&ai]),i(p,Qr[(d&ai)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>$s,p=d>>>$s,h===p)r(h,Qr[f&ai]|jo[(d&ai)+1]);else for(r(h,Qr[f&ai]),r(p,jo[(d&ai)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,u)=>a<0||s<0||u>=t||o>=e}}function tue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>eue(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function nue(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,u=o.length,f=s.datum.fontSize,d=ir.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,_,w;for(let A=0;A<u;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=h&&(h=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function tv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Ko(e,t,n,i,r,a,s,o){const u=r*a/(i*2),f=e(t-u),d=e(t+u),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function iue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function u(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let S=h,_=a,w;if(!tv(v,b,p,y,r,a)&&!Ko(e,v,b,y,p,S,s,o)&&!Ko(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,Ko(e,v,b,y,p,w,s,o)?_=w:S=w;if(S>h)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,C,M,k,T,O,N,B,L,G,H,I,F,R,P,X;for(let K=0;K<h;++K){for(w=d[K].x,C=d[K].y,A=d[K].x2===void 0?w:d[K].x2,M=d[K].y2===void 0?C:d[K].y2,w>A&&(X=w,w=A,A=X),C>M&&(X=C,C=M,M=X),B=e(w),G=e(A),L=~~((B+G)/2),H=e(C),F=e(M),I=~~((H+F)/2),O=L;O>=B;--O)for(N=I;N>=H;--N)P=u(O,N,v,y,p),P&&([f.x,f.y,v,b]=P);for(O=L;O<=G;++O)for(N=I;N<=F;++N)P=u(O,N,v,y,p),P&&([f.x,f.y,v,b]=P);!b&&!n&&(R=Math.abs(A-w+M-C),k=(w+A)/2,T=(C+M)/2,R>=_&&!tv(k,T,y,p,r,a)&&!Ko(e,k,T,p,y,p,s,null)&&(_=R,f.x=k,f.y=T,S=!0))}return b||S?(k=y/2,T=p/2,s.setRange(e(f.x-k),e(f.y-T),e(f.x+k),e(f.y+T)),f.align="center",f.baseline="middle",!0):!1}}const rue=[-1,-1,1,1],aue=[-1,1,-1,1];function sue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,C,M,k,T,O,N,B,L,G,H,I;for(let F=0;F<h;++F){for(A=d[F].x,M=d[F].y,C=d[F].x2===void 0?A:d[F].x2,k=d[F].y2===void 0?M:d[F].y2,v.push([e((A+C)/2),e((M+k)/2)]);v.length;)if([N,B]=v.pop(),!(s.get(N,B)||o.get(N,B)||u.get(N,B))){u.set(N,B);for(let R=0;R<4;++R)T=N+rue[R],O=B+aue[R],u.outOfBounds(T,O,T,O)||v.push([T,O]);if(T=e.invert(N),O=e.invert(B),L=b,G=a,!tv(T,O,y,p,r,a)&&!Ko(e,T,O,p,y,L,s,o)&&!Ko(e,T,O,p,y,p,s,null)){for(;G-L>=1;)H=(L+G)/2,Ko(e,T,O,p,y,H,s,o)?G=H:L=H;L>b&&(f.x=T,f.y=O,b=L,S=!0)}}!S&&!n&&(I=Math.abs(C-A+k-M),T=(A+C)/2,O=(M+k)/2,I>=w&&!tv(T,O,y,p,r,a)&&!Ko(e,T,O,p,y,p,s,null)&&(w=I,f.x=T,f.y=O,_=!0))}return S||_?(T=y/2,O=p/2,s.setRange(e(f.x-T),e(f.y-O),e(f.x+T),e(f.y+O)),f.align="center",f.baseline="middle",!0):!1}}const oue=["right","center","left"],lue=["bottom","middle","top"];function uue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,C,M,k,T,O,N,B,L;for(let G=0;G<u;++G){if(y=(n[G]&3)-1,v=(n[G]>>>2&3)-1,b=y===0&&v===0||i[G]<0,S=y&&v?Math.SQRT1_2:1,_=i[G]<0?-1:1,w=d[1+y]+i[G]*y*S,T=d[4+v]+_*h*v/2+i[G]*v*S,C=T-h/2,M=T+h/2,O=e(w),B=e(C),L=e(M),!p)if(y4(O,O,B,L,s,o,w,w,C,M,d,b))p=ir.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,O=e(w),N=e(A),y4(O,N,B,L,s,o,w,A,C,M,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?M:C:T,f.align=oue[y*_+1],f.baseline=lue[v*_+1],s.setRange(O,B,N,L),!0}return!1}}function y4(e,t,n,i,r,a,s,o,u,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const UE=0,BE=4,IE=8,PE=0,jE=1,qE=2,cue={"top-left":UE+PE,top:UE+jE,"top-right":UE+qE,left:BE+PE,middle:BE+jE,right:BE+qE,"bottom-left":IE+PE,bottom:IE+jE,"bottom-right":IE+qE},fue={naive:nue,"reduced-search":iue,floodfill:sue};function due(e,t,n,i,r,a,s,o,u,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=hue(i,h),y=gue(r,h),v=pue(e[0].datum),b=v==="group"&&e[0].datum.items[u].marktype,S=b==="area",_=mue(v,b,o,u),w=f===null||f===1/0,A=S&&d==="naive";let C=-1,M=-1;const k=e.map(B=>{const L=w?ir.width(B,B.text):void 0;return C=Math.max(C,L),M=Math.max(M,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:L}});f=f===null||f===1/0?Math.max(C,M)+Math.max(...i):f;const T=tue(t[0],t[1],f);let O;if(!A){n&&k.sort((G,H)=>n(G.datum,H.datum));let B=!1;for(let G=0;G<y.length&&!B;++G)B=y[G]===5||p[G]<0;const L=(v&&s||S)&&e.map(G=>G.datum);O=a.length||L?Kle(T,L||[],a,B,S):Zle(T,s&&k)}const N=S?fue[d](T,O,s,u):uue(T,O,y,p);return k.forEach(B=>B.opacity=+N(B)),k}function hue(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function gue(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=cue[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function pue(e){return e&&e.mark&&e.mark.marktype}function mue(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const oA=["x","y","opacity","align","baseline"],JI=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function fT(e){J.call(this,null,e)}fT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:JI},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:oA.length,default:oA}]};ge(fT,J,{transform(e,t){function n(a){const s=e[a];return je(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");const r=e.as||oA;return due(t.materialize(t.SOURCE).source||[],e.size,e.sort,xe(e.offset==null?1:e.offset),xe(e.anchor||JI),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const yue=Object.freeze(Object.defineProperty({__proto__:null,label:fT},Symbol.toStringTag,{value:"Module"}));function eP(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function dT(e){J.call(this,null,e)}dT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ge(dT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=eP(i,e.groupby),a=(e.groupby||[]).map(qt),s=a.length,o=e.as||[qt(e.x),qt(e.y)],u=[];r.forEach(f=>{l7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],u.push(ct(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const lA={constant:XC,linear:VC,log:r7,exp:a7,pow:s7,quad:WC,poly:o7},vue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function hT(e){J.call(this,null,e)}hT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(lA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ge(hT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=eP(i,e.groupby),a=(e.groupby||[]).map(qt),s=e.method||"linear",o=e.order==null?3:e.order,u=vue(s,o),f=e.as||[qt(e.x),qt(e.y)],d=lA[s],h=[];let p=e.extent;_e(lA,s)||te("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(ct({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||qa(y,e.x),_=w=>{const A={};for(let C=0;C<a.length;++C)A[a[C]]=y.dims[C];A[f[0]]=w[0],A[f[1]]=w[1],h.push(ct(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):Yv(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const bue=Object.freeze(Object.defineProperty({__proto__:null,loess:dT,regression:hT},Symbol.toStringTag,{value:"Module"})),qs=11102230246251565e-32,Gn=134217729,xue=(3+8*qs)*qs;function HE(e,t,n,i,r){let a,s,o,u,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h]):(s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function Sue(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Jp(e){return new Float64Array(e)}const Eue=(3+16*qs)*qs,_ue=(2+12*qs)*qs,wue=(9+64*qs)*qs*qs,ff=Jp(4),v4=Jp(8),b4=Jp(12),x4=Jp(16),si=Jp(4);function Aue(e,t,n,i,r,a,s){let o,u,f,d,h,p,y,v,b,S,_,w,A,C,M,k,T,O;const N=e-r,B=n-r,L=t-a,G=i-a;C=N*G,p=Gn*N,y=p-(p-N),v=N-y,p=Gn*G,b=p-(p-G),S=G-b,M=v*S-(C-y*b-v*b-y*S),k=L*B,p=Gn*L,y=p-(p-L),v=L-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,ff[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,ff[1]=A-(_+h)+(h-k),O=w+_,h=O-w,ff[2]=w-(O-h)+(_-h),ff[3]=O;let H=Sue(4,ff),I=_ue*s;if(H>=I||-H>=I||(h=e-N,o=e-(N+h)+(h-r),h=n-B,f=n-(B+h)+(h-r),h=t-L,u=t-(L+h)+(h-a),h=i-G,d=i-(G+h)+(h-a),o===0&&u===0&&f===0&&d===0)||(I=wue*s+xue*Math.abs(H),H+=N*d+G*o-(L*f+B*u),H>=I||-H>=I))return H;C=o*G,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*G,b=p-(p-G),S=G-b,M=v*S-(C-y*b-v*b-y*S),k=u*B,p=Gn*u,y=p-(p-u),v=u-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const F=HE(4,ff,4,si,v4);C=N*d,p=Gn*N,y=p-(p-N),v=N-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-(C-y*b-v*b-y*S),k=L*f,p=Gn*L,y=p-(p-L),v=L-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const R=HE(F,v4,4,si,b4);C=o*d,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-(C-y*b-v*b-y*S),k=u*f,p=Gn*u,y=p-(p-u),v=u-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const P=HE(R,b4,4,si,x4);return x4[P-1]}function r1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),u=s-o,f=Math.abs(s+o);return Math.abs(u)>=Eue*f?u:-Aue(e,t,n,i,r,a,f)}const S4=Math.pow(2,-52),a1=new Uint32Array(512);class nv{static from(t,n=kue,i=Due){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new nv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,u=1/0,f=-1/0,d=-1/0;for(let N=0;N<s;N++){const B=t[2*N],L=t[2*N+1];B<o&&(o=B),L<u&&(u=L),B>f&&(f=B),L>d&&(d=L),this._ids[N]=N}const h=(o+f)/2,p=(u+d)/2;let y,v,b;for(let N=0,B=1/0;N<s;N++){const L=GE(h,p,t[2*N],t[2*N+1]);L<B&&(y=N,B=L)}const S=t[2*y],_=t[2*y+1];for(let N=0,B=1/0;N<s;N++){if(N===y)continue;const L=GE(S,_,t[2*N],t[2*N+1]);L<B&&L>0&&(v=N,B=L)}let w=t[2*v],A=t[2*v+1],C=1/0;for(let N=0;N<s;N++){if(N===y||N===v)continue;const B=$ue(S,_,w,A,t[2*N],t[2*N+1]);B<C&&(b=N,C=B)}let M=t[2*b],k=t[2*b+1];if(C===1/0){for(let L=0;L<s;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];wf(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let B=0;for(let L=0,G=-1/0;L<s;L++){const H=this._ids[L],I=this._dists[H];I>G&&(N[B++]=H,G=I)}this.hull=N.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(r1(S,_,w,A,M,k)<0){const N=v,B=w,L=A;v=b,w=M,A=k,b=N,M=B,k=L}const T=Tue(S,_,w,A,M,k);this._cx=T.x,this._cy=T.y;for(let N=0;N<s;N++)this._dists[N]=GE(t[2*N],t[2*N+1],T.x,T.y);wf(this._ids,this._dists,0,s-1),this._hullStart=y;let O=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(M,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let N=0,B,L;N<this._ids.length;N++){const G=this._ids[N],H=t[2*G],I=t[2*G+1];if(N>0&&Math.abs(H-B)<=S4&&Math.abs(I-L)<=S4||(B=H,L=I,G===y||G===v||G===b))continue;let F=0;for(let z=0,W=this._hashKey(H,I);z<this._hashSize&&(F=a[(W+z)%this._hashSize],!(F!==-1&&F!==i[F]));z++);F=n[F];let R=F,P;for(;P=i[R],r1(H,I,t[2*R],t[2*R+1],t[2*P],t[2*P+1])>=0;)if(R=P,R===F){R=-1;break}if(R===-1)continue;let X=this._addTriangle(R,G,i[R],-1,-1,r[R]);r[G]=this._legalize(X+2),r[R]=X,O++;let K=i[R];for(;P=i[K],r1(H,I,t[2*K],t[2*K+1],t[2*P],t[2*P+1])<0;)X=this._addTriangle(K,G,P,r[G],-1,r[K]),r[G]=this._legalize(X+2),i[K]=K,O--,K=P;if(R===F)for(;P=n[R],r1(H,I,t[2*P],t[2*P+1],t[2*R],t[2*R+1])<0;)X=this._addTriangle(P,G,R,-1,r[R],r[P]),this._legalize(X+2),r[P]=X,i[R]=R,O--,R=P;this._hullStart=n[G]=R,i[R]=n[K]=G,i[G]=K,a[this._hashKey(H,I)]=G,a[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(O);for(let N=0,B=this._hullStart;N<O;N++)this.hull[N]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Cue(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],u=t-t%3;if(s=u+(t+2)%3,o===-1){if(a===0)break;t=a1[--a];continue}const f=o-o%3,d=u+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(Mue(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[h];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,h);const w=f+(o+1)%3;a<a1.length&&(a1[a++]=w)}else{if(a===0)break;t=a1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Cue(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function GE(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Mue(e,t,n,i,r,a,s,o){const u=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=u*u+f*f,b=d*d+h*h,S=p*p+y*y;return u*(h*S-b*y)-f*(d*S-b*p)+v*(d*y-h*p)<0}function $ue(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=(f*d-o*h)*p,v=(s*h-u*d)*p;return y*y+v*v}function Tue(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=e+(f*d-o*h)*p,v=t+(s*h-u*d)*p;return{x:y,y:v}}function wf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;ig(e,r,a),t[e[n]]>t[e[i]]&&ig(e,n,i),t[e[a]]>t[e[i]]&&ig(e,a,i),t[e[n]]>t[e[a]]&&ig(e,n,a);const o=e[a],u=t[o];for(;;){do a++;while(t[e[a]]<u);do s--;while(t[e[s]]>u);if(s<a)break;ig(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(wf(e,t,a,i),wf(e,t,n,s-1)):(wf(e,t,n,s-1),wf(e,t,a,i))}}function ig(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function kue(e){return e[0]}function Due(e){return e[1]}const E4=1e-6;class Eu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>E4||Math.abs(this._y1-a)>E4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class uA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Oue=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const C=i[b]*2,M=i[b+1]*2,k=i[b+2]*2,T=t[C],O=t[C+1],N=t[M],B=t[M+1],L=t[k],G=t[k+1],H=N-T,I=B-O,F=L-T,R=G-O,P=(H*R-I*F)*2;if(Math.abs(P)<1e-9){if(a===void 0){a=s=0;for(const K of n)a+=t[K*2],s+=t[K*2+1];a/=n.length,s/=n.length}const X=1e9*Math.sign((a-T)*R-(s-O)*F);w=(T+L)/2-X*R,A=(O+G)/2+X*F}else{const X=1/P,K=H*H+I*I,z=F*F+R*R;w=T+(R*K-I*z)*X,A=O+(H*z-F*K)*X}o[S]=w,o[S+1]=A}let u=n[n.length-1],f,d=u*4,h,p=t[2*u],y,v=t[2*u+1];r.fill(0);for(let b=0;b<n.length;++b)u=n[b],f=d,h=p,y=v,d=u*4,p=t[2*u],v=t[2*u+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Eu:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let u,f=a[a.length-1];for(let d=0;d<a.length;++d){u=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=u*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Eu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Eu:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new uA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),u=this._regioncode(i,r);o===0&&u===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,u))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,u=r.length;o<u;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+u-2)%u]&&n[(a+3)%s]===r[(o+u-1)%u]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let u=s;do{const f=Math.floor(u/3);if(o.push(n[f*2],n[f*2+1]),u=u%3===2?u-2:u+1,a[u]!==t)break;u=r[u]}while(u!==s&&u!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],u=n[i-1],f,d=this._regioncode(o,u),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=u,o=n[y],u=n[y+1],f=d,d=this._regioncode(o,u),f===0&&d===0)h=p,p=0,r?r.push(o,u):r=[o,u];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,o,u,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(o,u,a,s,d,f))===null)continue;[_,w,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(_,w),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let u,f,d=a||s;d&8?(u=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(u=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),u=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),u=this.xmin),a?(t=u,n=f,a=this._regioncode(t,n)):(i=u,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),u;if((u=this._project(o[0],o[1],i,r))&&o.unshift(u[0],u[1]),(u=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(u[0],u[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,u;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(u=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(u=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,u=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,u=n+(a=s)*r)}return[o,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Rue=2*Math.PI,df=Math.pow;function Nue(e){return e[0]}function zue(e){return e[1]}function Fue(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Lue(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class gT{static from(t,n=Nue,i=zue,r){return new gT("length"in t?Uue(t,n,i,r):Float64Array.from(Bue(t,n,i,r)))}constructor(t){this._delaunator=new nv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Fue(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const u=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*u],n[2*u+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Lue(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new nv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let u=0,f=i.length;u<f;++u){const d=a[u%3===2?u-2:u+1];(i[u]===-1||s[d]===-1)&&(s[d]=u)}for(let u=0,f=r.length;u<f;++u)o[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Oue(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const u=n[t];if(u===-1)return;let f=u,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==u)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:u,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=df(n-f[t*2],2)+df(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=u[y];const b=df(n-f[v*2],2)+df(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,u[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&df(n-f[y*2],2)+df(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Eu:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const u=r[s];if(u<s)continue;const f=a[s]*2,d=a[u]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Eu:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],u=r[a+1];t.moveTo(o+n,u),t.arc(o,u,n,0,Rue)}return i&&i.value()}renderHull(t){const n=t==null?t=new Eu:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const u=2*i[o];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new uA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Eu:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,u=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new uA;return this.renderTriangle(t,n),n.value()}}function Uue(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Bue(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function pT(e){J.call(this,null,e)}pT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Iue=[-1e5,-1e5,1e5,1e5];ge(pT,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Iue;const a=this.value=gT.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const u=a.cellPolygon(s);i[s][n]=u&&!jue(u)?Pue(u):null}return t.reflow(e.modified()).modifies(n)}});function Pue(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function jue(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const que=Object.freeze(Object.defineProperty({__proto__:null,voronoi:pT},Symbol.toStringTag,{value:"Module"}));var YE=Math.PI/180,Ng=64,B1=2048;function Hue(){var e=[256,256],t,n,i,r,a,s,o,u=tP,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(il()),b=Que((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],C=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:o(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,T)=>T.size-k.size);++w<_;){var M=C[w];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,Gue(v,M,C,w),M.hasText&&y(b,M,S)&&(A.push(M),S?Xue(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ng<<5)/b,v.height=B1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),C=u(e),M=d()<.5?1:-1,k=-M,T,O,N;(T=C(k+=M))&&(O=~~T[0],N=~~T[1],!(Math.min(Math.abs(O),Math.abs(N))>=A));)if(b.x=_+O,b.y=w+N,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!Yue(b,v,e[0]))&&(!S||Vue(b,S))){for(var B=b.sprite,L=b.width>>5,G=e[0]>>5,H=b.x-(L<<4),I=H&127,F=32-I,R=b.y1-b.y0,P=(b.y+b.y0)*G+(H>>5),X,K=0;K<R;K++){X=0;for(var z=0;z<=L;z++)v[P+z]|=X<<F|(z<L?(X=B[K*L+z])>>>I:0);P+=G}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=tu(v),h):n},h.fontStyle=function(v){return arguments.length?(r=tu(v),h):r},h.fontWeight=function(v){return arguments.length?(a=tu(v),h):a},h.rotate=function(v){return arguments.length?(s=tu(v),h):s},h.text=function(v){return arguments.length?(t=tu(v),h):t},h.spiral=function(v){return arguments.length?(u=Zue[v]||v,h):u},h.fontSize=function(v){return arguments.length?(i=tu(v),h):i},h.padding=function(v){return arguments.length?(o=tu(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function Gue(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ng<<5)/a,B1/a);var s=0,o=0,u=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*YE),S=Math.cos(t.rotate*YE),_=d*S,w=d*b,A=p*S,C=p*b;d=Math.max(Math.abs(_+C),Math.abs(_-C))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>u&&(u=p),s+d>=Ng<<5&&(s=0,o+=u,u=0),o+p>=B1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*YE),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var M=r.getImageData(0,0,(Ng<<5)/a,B1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)k[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var T=0,O=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=h*v+(y>>5),B=M[(o+v)*(Ng<<5)+(s+y)<<2]?1<<31-y%32:0;k[N]|=B,T|=B}T?O=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+O,t.sprite=k.slice(0,(t.y1-t.y0)*h)}}}function Yue(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,u=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<u;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function Xue(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Vue(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function tP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Wue(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Que(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tu(e){return typeof e=="function"?e:function(){return e}}var Zue={archimedean:tP,rectangular:Wue};const nP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Kue=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mT(e){J.call(this,Hue(),e)}mT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:nP}]};ge(mT,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return je(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Kue.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||nP;let o=e.fontSize||14,u;if(je(o)?u=e.fontSizeRange:o=ii(o),u){const v=o,b=lt("sqrt")().domain(qa(r,v)).range(u);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Rr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const Jue=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:mT},Symbol.toStringTag,{value:"Module"})),ece=e=>new Uint8Array(e),tce=e=>new Uint16Array(e),Yg=e=>new Uint32Array(e);function nce(){let e=8,t=[],n=Yg(0),i=s1(0,e),r=s1(0,e);return{data:()=>t,seen:()=>n=ice(n,t.length),add(a){for(let s=0,o=t.length,u=a.length,f;s<u;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,u=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)u[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],u[p]=d,d._index=p++),i[h]=0;return t=u,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=s1(a,e,i),r=s1(a,e))}}}function ice(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function s1(e,t,n){const i=(t<257?ece:t<65537?tce:Yg)(e);return n&&i.set(n),i}function _4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),u=r.index,f=o[0],d=o[1],h=u.length;let p;for(p=0;p<f;++p)a[u[p]]|=i;for(p=d;p<h;++p)a[u[p]]|=i;return s}}}function w4(){let e=Yg(0),t=[],n=0;function i(o,u,f){if(!u.length)return[];const d=n,h=u.length,p=Yg(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(u[S]),p[S]=S;if(y=rce(y,p),d)v=t,b=e,t=Array(d+h),e=Yg(d+h),ace(f,v,b,d,y,p,h,t,e);else{if(f>0)for(S=0;S<h;++S)p[S]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,u){const f=n;let d,h,p;for(h=0;!u[e[h]]&&h<f;++h);for(p=h;h<f;++h)u[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let u=0,f=n;u<f;++u)e[u]=o[e[u]]}function s(o,u){let f;return u?f=u.length:(u=t,f=n),[uW(u,o[0],0,f),sl(u,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function rce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),dW(e,t)}function ace(e,t,n,i,r,a,s,o,u){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],u[h]=n[f++]):(o[h]=r[d],u[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],u[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],u[h]=a[d]+e}function yT(e){J.call(this,nce(),e),this._indices=null,this._dims=null}yT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ge(yT,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,u,f;for(;o<s;++o)u=n[o].fname,f=r[u]||(r[u]=w4()),a.push(_4(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,u=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,C,M,k,T;if(f.set(u),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(C={},w=t.mod,M=0,k=w.length;M<k;++M)C[w[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!s[M]||e.modified("fields",M)||t.modified(T.fields))&&(_=T.fname,(b=v[_])||(a[_]=S=w4(),v[_]=b=S.insert(T,t.source,0)),s[M]=_4(S,M,r[M]).onAdd(b,u));for(M=0,k=o.data().length;M<k;++M)A[M]||(f[M]!==u[M]?h.push(M):C[M]&&u[M]!==d&&p.push(M));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,u={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<h;++y)v=o[y].fname,b=u[v]||(u[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,u,f;for(o=0,u=s.length;o<u;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),u={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,u[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,u);return this.reindex(t,p,u),u},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,u,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(u=f,++o);if(o===1)o=i[u].one,this.incrementOne(i[u],r[u],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),u=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(h<y)for(S=h,_=Math.min(y,p);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(h>y)for(S=y,_=Math.min(h,v);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(h,v),_=p;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function vT(e){J.call(this,null,e)}vT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ge(vT,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),u=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^u[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^u[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const sce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:yT,resolvefilter:vT},Symbol.toStringTag,{value:"Module"})),oce="RawCode",Pu="Literal",lce="Property",uce="Identifier",cce="ArrayExpression",fce="BinaryExpression",iP="CallExpression",dce="ConditionalExpression",hce="LogicalExpression",gce="MemberExpression",pce="ObjectExpression",mce="UnaryExpression";function da(e){this.type=e}da.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=yce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function yce(e){switch(e.type){case cce:return e.elements;case fce:case hce:return[e.left,e.right];case iP:return[e.callee].concat(e.arguments);case dce:return[e.test,e.consequent,e.alternate];case gce:return[e.object,e.property];case pce:return e.properties;case lce:return[e.key,e.value];case mce:return[e.argument];case uce:case Pu:case oce:default:return[]}}var is,Ae,ee,ei,mt,Ab=1,e0=2,ju=3,Cl=4,Cb=5,oc=6,$i=7,t0=8,vce=9;is={};is[Ab]="Boolean";is[e0]="<end>";is[ju]="Identifier";is[Cl]="Keyword";is[Cb]="Null";is[oc]="Numeric";is[$i]="Punctuator";is[t0]="String";is[vce]="RegularExpression";var bce="ArrayExpression",xce="BinaryExpression",Sce="CallExpression",Ece="ConditionalExpression",rP="Identifier",_ce="Literal",wce="LogicalExpression",Ace="MemberExpression",Cce="ObjectExpression",Mce="Property",$ce="UnaryExpression",En="Unexpected token %0",Tce="Unexpected number",kce="Unexpected string",Dce="Unexpected identifier",Oce="Unexpected reserved word",Rce="Unexpected end of input",cA="Invalid regular expression",XE="Invalid regular expression: missing /",aP="Octal literals are not allowed in strict mode.",Nce="Duplicate data property in object literal not allowed in strict mode",Ln="ILLEGAL",gp="Disabled.",zce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Fce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Mb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Os(e){return e>=48&&e<=57}function bT(e){return"0123456789abcdefABCDEF".includes(e)}function Xg(e){return"01234567".includes(e)}function Lce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function pp(e){return e===10||e===13||e===8232||e===8233}function n0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&zce.test(String.fromCharCode(e))}function iv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Fce.test(String.fromCharCode(e))}const Uce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function sP(){for(;ee<ei;){const e=Ae.charCodeAt(ee);if(Lce(e)||pp(e))++ee;else break}}function fA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<ei&&bT(Ae[ee])?(i=Ae[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):at({},En,Ln);return String.fromCharCode(r)}function Bce(){var e,t,n,i;for(e=Ae[ee],t=0,e==="}"&&at({},En,Ln);ee<ei&&(e=Ae[ee++],!!bT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&at({},En,Ln),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function oP(){var e,t;for(e=Ae.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(Ae.charCodeAt(ee)!==117&&at({},En,Ln),++ee,e=fA("u"),(!e||e==="\\"||!n0(e.charCodeAt(0)))&&at({},En,Ln),t=e);ee<ei&&(e=Ae.charCodeAt(ee),!!iv(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ae.charCodeAt(ee)!==117&&at({},En,Ln),++ee,e=fA("u"),(!e||e==="\\"||!iv(e.charCodeAt(0)))&&at({},En,Ln),t+=e);return t}function Ice(){var e,t;for(e=ee++;ee<ei;){if(t=Ae.charCodeAt(ee),t===92)return ee=e,oP();if(iv(t))++ee;else break}return Ae.slice(e,ee)}function Pce(){var e,t,n;return e=ee,t=Ae.charCodeAt(ee)===92?oP():Ice(),t.length===1?n=ju:Uce.hasOwnProperty(t)?n=Cl:t==="null"?n=Cb:t==="true"||t==="false"?n=Ab:n=ju,{type:n,value:t,start:e,end:ee}}function VE(){var e=ee,t=Ae.charCodeAt(ee),n,i=Ae[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:$i,value:String.fromCharCode(t),start:e,end:ee};default:if(n=Ae.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:$i,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,Ae.charCodeAt(ee)===61&&++ee,{type:$i,value:Ae.slice(e,ee),start:e,end:ee}}}if(s=Ae.substr(ee,4),s===">>>=")return ee+=4,{type:$i,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:$i,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:$i,value:r,start:e,end:ee};if(r==="//"&&at({},En,Ln),"<>=!+-*%&|^/".includes(i))return++ee,{type:$i,value:i,start:e,end:ee};at({},En,Ln)}function jce(e){let t="";for(;ee<ei&&bT(Ae[ee]);)t+=Ae[ee++];return t.length===0&&at({},En,Ln),n0(Ae.charCodeAt(ee))&&at({},En,Ln),{type:oc,value:parseInt("0x"+t,16),start:e,end:ee}}function qce(e){let t="0"+Ae[ee++];for(;ee<ei&&Xg(Ae[ee]);)t+=Ae[ee++];return(n0(Ae.charCodeAt(ee))||Os(Ae.charCodeAt(ee)))&&at({},En,Ln),{type:oc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function A4(){var e,t,n;if(n=Ae[ee],Mb(Os(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=Ae[ee++],n=Ae[ee],e==="0"){if(n==="x"||n==="X")return++ee,jce(t);if(Xg(n))return qce(t);n&&Os(n.charCodeAt(0))&&at({},En,Ln)}for(;Os(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="."){for(e+=Ae[ee++];Os(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="e"||n==="E")if(e+=Ae[ee++],n=Ae[ee],(n==="+"||n==="-")&&(e+=Ae[ee++]),Os(Ae.charCodeAt(ee)))for(;Os(Ae.charCodeAt(ee));)e+=Ae[ee++];else at({},En,Ln);return n0(Ae.charCodeAt(ee))&&at({},En,Ln),{type:oc,value:parseFloat(e),start:t,end:ee}}function Hce(){var e="",t,n,i,r,a=!1;for(t=Ae[ee],Mb(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<ei;)if(i=Ae[ee++],i===t){t="";break}else if(i==="\\")if(i=Ae[ee++],!i||!pp(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ee]==="{"?(++ee,e+=Bce()):e+=fA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Xg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<ei&&Xg(Ae[ee])&&(a=!0,r=r*8+"01234567".indexOf(Ae[ee++]),"0123".includes(i)&&ee<ei&&Xg(Ae[ee])&&(r=r*8+"01234567".indexOf(Ae[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ae[ee]===`
`&&++ee;else{if(pp(i.charCodeAt(0)))break;e+=i}return t!==""&&at({},En,Ln),{type:t0,value:e,octal:a,start:n,end:ee}}function Gce(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";at({},cA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{at({},cA)}try{return new RegExp(e,t)}catch{return null}}function Yce(){var e,t,n,i,r;for(e=Ae[ee],Mb(e==="/","Regular expression literal must start with a slash"),t=Ae[ee++],n=!1,i=!1;ee<ei;)if(e=Ae[ee++],t+=e,e==="\\")e=Ae[ee++],pp(e.charCodeAt(0))&&at({},XE),t+=e;else if(pp(e.charCodeAt(0)))at({},XE);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||at({},XE),r=t.substr(1,t.length-2),{value:r,literal:t}}function Xce(){var e,t,n;for(t="",n="";ee<ei&&(e=Ae[ee],!!iv(e.charCodeAt(0)));)++ee,e==="\\"&&ee<ei?at({},En,Ln):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&at({},cA,n),{value:n,literal:t}}function Vce(){var e,t,n,i;return mt=null,sP(),e=ee,t=Yce(),n=Xce(),i=Gce(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function Wce(e){return e.type===ju||e.type===Cl||e.type===Ab||e.type===Cb}function lP(){if(sP(),ee>=ei)return{type:e0,start:ee,end:ee};const e=Ae.charCodeAt(ee);return n0(e)?Pce():e===40||e===41||e===59?VE():e===39||e===34?Hce():e===46?Os(Ae.charCodeAt(ee+1))?A4():VE():Os(e)?A4():VE()}function ki(){const e=mt;return ee=e.end,mt=lP(),ee=e.end,e}function uP(){const e=ee;mt=lP(),ee=e}function Qce(e){const t=new da(bce);return t.elements=e,t}function C4(e,t,n){const i=new da(e==="||"||e==="&&"?wce:xce);return i.operator=e,i.left=t,i.right=n,i}function Zce(e,t){const n=new da(Sce);return n.callee=e,n.arguments=t,n}function Kce(e,t,n){const i=new da(Ece);return i.test=e,i.consequent=t,i.alternate=n,i}function xT(e){const t=new da(rP);return t.name=e,t}function zg(e){const t=new da(_ce);return t.value=e.value,t.raw=Ae.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function M4(e,t,n){const i=new da(Ace);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Jce(e){const t=new da(Cce);return t.properties=e,t}function $4(e,t,n){const i=new da(Mce);return i.key=t,i.value=n,i.kind=e,i}function efe(e,t){const n=new da($ce);return n.operator=e,n.argument=t,n.prefix=!0,n}function at(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Mb(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function $b(e){e.type===e0&&at(e,Rce),e.type===oc&&at(e,Tce),e.type===t0&&at(e,kce),e.type===ju&&at(e,Dce),e.type===Cl&&at(e,Oce),at(e,En,e.value)}function ti(e){const t=ki();(t.type!==$i||t.value!==e)&&$b(t)}function $t(e){return mt.type===$i&&mt.value===e}function WE(e){return mt.type===Cl&&mt.value===e}function tfe(){const e=[];for(ee=mt.start,ti("[");!$t("]");)$t(",")?(ki(),e.push(null)):(e.push(qu()),$t("]")||ti(","));return ki(),Qce(e)}function T4(){ee=mt.start;const e=ki();return e.type===t0||e.type===oc?(e.octal&&at(e,aP),zg(e)):xT(e.value)}function nfe(){var e,t,n,i;if(ee=mt.start,e=mt,e.type===ju)return n=T4(),ti(":"),i=qu(),$4("init",n,i);if(e.type===e0||e.type===$i)$b(e);else return t=T4(),ti(":"),i=qu(),$4("init",t,i)}function ife(){var e=[],t,n,i,r={},a=String;for(ee=mt.start,ti("{");!$t("}");)t=nfe(),t.key.type===rP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?at({},Nce):r[i]=!0,e.push(t),$t("}")||ti(",");return ti("}"),Jce(e)}function rfe(){ti("(");const e=ST();return ti(")"),e}const afe={if:1};function sfe(){var e,t,n;if($t("("))return rfe();if($t("["))return tfe();if($t("{"))return ife();if(e=mt.type,ee=mt.start,e===ju||afe[mt.value])n=xT(ki().value);else if(e===t0||e===oc)mt.octal&&at(mt,aP),n=zg(ki());else{if(e===Cl)throw new Error(gp);e===Ab?(t=ki(),t.value=t.value==="true",n=zg(t)):e===Cb?(t=ki(),t.value=null,n=zg(t)):$t("/")||$t("/=")?(n=zg(Vce()),uP()):$b(ki())}return n}function ofe(){const e=[];if(ti("("),!$t(")"))for(;ee<ei&&(e.push(qu()),!$t(")"));)ti(",");return ti(")"),e}function lfe(){ee=mt.start;const e=ki();return Wce(e)||$b(e),xT(e.value)}function ufe(){return ti("."),lfe()}function cfe(){ti("[");const e=ST();return ti("]"),e}function ffe(){var e,t,n;for(e=sfe();;)if($t("."))n=ufe(),e=M4(".",e,n);else if($t("("))t=ofe(),e=Zce(e,t);else if($t("["))n=cfe(),e=M4("[",e,n);else break;return e}function k4(){const e=ffe();if(mt.type===$i&&($t("++")||$t("--")))throw new Error(gp);return e}function I1(){var e,t;if(mt.type!==$i&&mt.type!==Cl)t=k4();else{if($t("++")||$t("--"))throw new Error(gp);if($t("+")||$t("-")||$t("~")||$t("!"))e=ki(),t=I1(),t=efe(e.value,t);else{if(WE("delete")||WE("void")||WE("typeof"))throw new Error(gp);t=k4()}}return t}function D4(e){let t=0;if(e.type!==$i&&e.type!==Cl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function dfe(){var e,t,n,i,r,a,s,o,u,f;if(e=mt,u=I1(),i=mt,r=D4(i),r===0)return u;for(i.prec=r,ki(),t=[e,mt],s=I1(),a=[u,i,s];(r=D4(mt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,u=a.pop(),t.pop(),n=C4(o,u,s),a.push(n);i=ki(),i.prec=r,a.push(i),t.push(mt),n=I1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=C4(a[f-1].value,a[f-2],n),f-=2;return n}function qu(){var e,t,n;return e=dfe(),$t("?")&&(ki(),t=qu(),ti(":"),n=qu(),e=Kce(e,t,n)),e}function ST(){const e=qu();if($t(","))throw new Error(gp);return e}function ET(e){Ae=e,ee=0,ei=Ae.length,mt=null,uP();const t=ST();if(mt.type!==e0)throw new Error("Unexpect token after expression.");return t}var cP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function fP(e){function t(s,o,u,f){let d=e(o[0]);return u&&(d=u+"("+d+")",u.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,u){return f=>t(s,f,o,u)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&te("Missing arguments to clamp function."),s.length>3&&te("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&te("Missing arguments to if function."),s.length>3&&te("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function hfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function dP(e){e=e||{};const t=e.allowed?aa(e.allowed):{},n=e.forbidden?aa(e.forbidden):{},i=e.constants||cP,r=(e.functions||fP)(h),a=e.globalvar,s=e.fieldvar,o=je(a)?a:v=>`${a}["${v}"]`;let u={},f={},d=0;function h(v){if(ye(v))return v;const b=p[v.type];return b==null&&te("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:_e(n,b)?te("Illegal identifier: "+b):_e(i,b)?i[b]:_e(t,b)?b:(u[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const _=h(v.property);return S===s&&(f[hfe(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&te("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=_e(r,b)&&r[b];return _||te("Unrecognized function: "+b),je(_)?_(S):_+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(u),fields:Object.keys(f)};return u={},f={},b}return y.functions=r,y.constants=i,y}const O4=Symbol("vega_selection_getter");function hP(e){return(!e.getter||!e.getter[O4])&&(e.getter=kr(e.field),e.getter[O4]=!0),e.getter}const _T="intersect",R4="union",gfe="vlMulti",pfe="vlPoint",N4="or",mfe="and",Da="_vgsid_",mp=kr(Da),yfe="E",vfe="R",bfe="R-E",xfe="R-LE",Sfe="R-RE",Efe="E-LT",_fe="E-LTE",wfe="E-GT",Afe="E-GTE",Cfe="E-VALID",Mfe="E-ONE",rv="index:unit";function z4(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=hP(o)(e),el(s)&&(s=Qn(s)),el(i[a])&&(i[a]=Qn(i[a])),re(i[a])&&el(i[a][0])&&(i[a]=i[a].map(Qn)),o.type===yfe){if(re(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===vfe){if(!xf(s,i[a]))return!1}else if(o.type===Sfe){if(!xf(s,i[a],!0,!1))return!1}else if(o.type===bfe){if(!xf(s,i[a],!1,!1))return!1}else if(o.type===xfe){if(!xf(s,i[a],!1,!0))return!1}else if(o.type===Efe){if(s>=i[a])return!1}else if(o.type===_fe){if(s>i[a])return!1}else if(o.type===wfe){if(s<=i[a])return!1}else if(o.type===Afe){if(s<i[a])return!1}else if(o.type===Cfe){if(s===null||isNaN(s))return!1}else if(o.type===Mfe&&i[a].indexOf(s)===-1)return!1;return!0}function $fe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[rv]&&i[rv].value:void 0,s=n===_T,o=r.length,u=0,f,d,h,p,y;u<o;++u)if(f=r[u],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=z4(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=z4(t,f),s^y)return y;return o&&s}const gP=_d(mp),Tfe=gP.left,kfe=gP.right;function Dfe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[rv]&&i[rv].value:void 0,s=n===_T,o=mp(t),u=Tfe(r,o);if(u===r.length||mp(r[u])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(kfe(r,o)-u<a.size)return!1}return!0}function Ofe(e,t){return e.map(n=>Pe(t.fields?{values:t.fields.map(i=>hP(i)(n.datum))}:{[Da]:mp(n.datum)},t))}function Rfe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},u={},f,d,h,p,y,v,b,S,_,w,A=a.length,C=0,M,k;C<A;++C)if(f=a[C],p=f.unit,d=f.fields,h=f.values,d&&h){for(M=0,k=d.length;M<k;++M)y=d[M],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),u[y.field]=_=y.type.charAt(0),w=QE[`${_}_union`],b[p]=w(S,xe(h[M]));n&&(S=o[p]||(o[p]=[]),S.push(xe(h).reduce((T,O,N)=>(T[d[N].field]=O,T),{})))}else y=Da,v=mp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[Da]:v}));if(t=t||R4,s[Da]?s[Da]=QE[`${Da}_${t}`](...Object.values(s[Da])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(O=>s[T][O]).reduce((O,N)=>O===void 0?N:QE[`${u[T]}_${t}`](O,N))}),a=Object.keys(o),n&&a.length){const T=i?pfe:gfe;s[T]=t===R4?{[N4]:a.reduce((O,N)=>(O.push(...o[N]),O),[])}:{[mfe]:a.map(O=>({[N4]:o[O]}))}}return s}var QE={[`${Da}_union`]:SW,[`${Da}_intersect`]:bW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Nfe=":",zfe="@";function wT(e,t,n,i){t[0].type!==Pu&&te("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Je(t).value,s="unit",o=zfe+s,u=Nfe+r;a===_T&&!_e(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),_e(i,u)||(i[u]=n.getData(r).tuplesRef())}function pP(e){const t=this.context.data[e];return t?t.values.value:[]}function Ffe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Lfe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Dr).insert(t)),1}function Ufe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const i0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Bfe=i0("format"),mP=i0("timeFormat"),Ife=i0("utcFormat"),Pfe=i0("timeParse"),jfe=i0("utcParse"),o1=new Date(2e3,0,1);function Tb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(o1.setYear(2e3),o1.setMonth(e),o1.setDate(t),mP.call(this,o1,n))}function qfe(e){return Tb.call(this,e,1,"%B")}function Hfe(e){return Tb.call(this,e,1,"%b")}function Gfe(e){return Tb.call(this,0,2+e,"%A")}function Yfe(e){return Tb.call(this,0,2+e,"%a")}const Xfe=":",Vfe="@",dA="%",yP="$";function AT(e,t,n,i){t[0].type!==Pu&&te("First argument to data functions must be a string literal.");const r=t[0].value,a=Xfe+r;if(!_e(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Wfe(e,t,n,i){t[0].type!==Pu&&te("First argument to indata must be a string literal."),t[1].type!==Pu&&te("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=Vfe+a;_e(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function mi(e,t,n,i){if(t[0].type===Pu)F4(n,i,t[0].value);else for(e in n.scales)F4(n,i,e)}function F4(e,t,n){const i=dA+n;if(!_e(t,i))try{t[i]=e.scaleRef(n)}catch{}}function rs(e,t){if(ye(e)){const n=t.scales[e];return n&&B5(n.value)?n.value:void 0}else if(je(e))return B5(e)?e:void 0}function Qfe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=mi,n._range=mi,n._scale=mi;const i=r=>"_["+(r.type===Pu?he(dA+r.value):he(dA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function CT(e,t){return function(n,i,r){if(n){const a=rs(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Zfe=CT("area",pae),Kfe=CT("bounds",bae),Jfe=CT("centroid",Aae);function ede(e,t){const n=rs(e,(t||this).context);return n&&n.scale()}function tde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function MT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function nde(){return MT(this.context.dataflow,"warn",arguments)}function ide(){return MT(this.context.dataflow,"info",arguments)}function rde(){return MT(this.context.dataflow,"debug",arguments)}function ZE(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hA(e){const t=cl(e),n=ZE(t.r),i=ZE(t.g),r=ZE(t.b);return .2126*n+.7152*i+.0722*r}function ade(e,t){const n=hA(e),i=hA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function sde(){const e=[].slice.call(arguments);return e.unshift({}),Pe(...e)}function vP(e,t){return e===t||e!==e&&t!==t?!0:re(e)?re(t)&&e.length===t.length?ode(e,t):!1:ve(e)&&ve(t)?bP(e,t):!1}function ode(e,t){for(let n=0,i=e.length;n<i;++n)if(!vP(e[n],t[n]))return!1;return!0}function bP(e,t){for(const n in e)if(!vP(e[n],t[n]))return!1;return!0}function L4(e){return t=>bP(e,t)}function lde(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],u=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(u.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(u,d).run()},!0,1)),n&&(h=n===!0?Dr:re(n)||Uv(n)?n:L4(n),d.remove(h)),t&&d.insert(t),i&&(h=L4(i),u.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function ude(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function cde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const U4={};function fde(e,t){const n=U4[t]||(U4[t]=kr(t));return re(e)?e.map(n):n(e)}function kb(e){return re(e)||ArrayBuffer.isView(e)?e:null}function $T(e){return kb(e)||(ye(e)?e:null)}function dde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return kb(e).join(...n)}function hde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return $T(e).indexOf(...n)}function gde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return $T(e).lastIndexOf(...n)}function pde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return $T(e).slice(...n)}function mde(e,t,n){return je(n)&&te("Function argument passed to replace."),!ye(t)&&!hC(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function yde(e){return kb(e).slice().reverse()}function vde(e){return kb(e).slice().sort(Sd)}function bde(e,t,n){return PM(e||0,t||0,n||0)}function xde(e,t){const n=rs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Sde(e,t){const n=rs(e,(t||this).context);return n?n.copy():void 0}function Ede(e,t){const n=rs(e,(t||this).context);return n?n.domain():[]}function _de(e,t,n){const i=rs(e,(n||this).context);return i?re(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function wde(e,t){const n=rs(e,(t||this).context);return n&&n.range?n.range():[]}function Ade(e,t,n){const i=rs(e,(n||this).context);return i?i(t):void 0}function Cde(e,t,n,i,r){e=rs(e,(r||this).context);const a=cU(t,n);let s=e.domain(),o=s[0],u=Je(s),f=ni;return u-o?f=KL(e,o,u):e=(e.interpolator?lt("sequential")().interpolator(e.interpolator()):lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,u=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),u!==Je(s)&&s.push(u)),s.forEach(d=>a.stop(f(d),e(d))),a}function Mde(e,t,n){const i=rs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function $de(e){let t=null;return function(n){return n?sp(n,t=t||Vf(e)):e}}const xP=e=>e.data;function SP(e,t){const n=pP.call(t,e);return n.root&&n.root.lookup||{}}function Tde(e,t,n){const i=SP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(xP):void 0}function kde(e,t){const n=SP(e,this)[t];return n?n.ancestors().map(xP):void 0}const EP=()=>typeof window<"u"&&window||null;function Dde(){const e=EP();return e?e.screen:{}}function Ode(){const e=EP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Rde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function _P(e,t,n){if(!e)return[];const[i,r]=e,a=new rn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return sB(s,a,Nde(t))}function Nde(e){let t=null;if(e){const n=xe(e.marktype),i=xe(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function zde(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=xe(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Fde(e){return xe(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Lde(e,t,n){const{x:i,y:r,mark:a}=n,s=new rn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,f]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),_P([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(u=>Ude(u.x,u.y,t))}function Ude(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[u,f]=n[r];f>t!=o>t&&e<(s-u)*(t-f)/(o-f)+u&&i++}return i&1}const yp={random(){return Rr()},cumulativeNormal:qv,cumulativeLogNormal:PC,cumulativeUniform:GC,densityNormal:FC,densityLogNormal:IC,densityUniform:HC,quantileNormal:Hv,quantileLogNormal:jC,quantileUniform:YC,sampleNormal:jv,sampleLogNormal:BC,sampleUniform:qC,isArray:re,isBoolean:Sl,isDate:el,isDefined(e){return e!==void 0},isNumber:st,isObject:ve,isRegExp:hC,isString:ye,isTuple:Uv,isValid(e){return e!=null&&e===e},toBoolean:pC,toDate(e){return mC(e)},toNumber:Qn,toString:yC,indexof:hde,join:dde,lastindexof:gde,replace:mde,reverse:yde,sort:vde,slice:pde,flush:k8,lerp:O8,merge:sde,pad:z8,peek:Je,pluck:fde,span:kp,inrange:xf,truncate:F8,rgb:cl,lab:cy,hcl:fy,hsl:ly,luminance:hA,contrast:ade,sequence:er,format:Bfe,utcFormat:Ife,utcParse:jfe,utcOffset:p9,utcSequence:v9,timeFormat:mP,timeParse:Pfe,timeOffset:g9,timeSequence:y9,timeUnitSpecifier:i9,monthFormat:qfe,monthAbbrevFormat:Hfe,dayFormat:Gfe,dayAbbrevFormat:Yfe,quarter:C8,utcquarter:M8,week:a9,utcweek:l9,dayofyear:r9,utcdayofyear:o9,warn:nde,info:ide,debug:rde,extent(e){return qa(e)},inScope:tde,intersect:_P,clampRange:$8,pinchDistance:ude,pinchAngle:cde,screen:Dde,containerSize:Rde,windowSize:Ode,bandspace:bde,setdata:Lfe,pathShape:$de,panLinear:E8,panLog:_8,panPow:w8,panSymlog:A8,zoomLinear:lC,zoomLog:uC,zoomPow:W1,zoomSymlog:cC,encode:Ufe,modify:lde,lassoAppend:zde,lassoPath:Fde,intersectLasso:Lde},Bde=["view","item","group","xy","x","y"],Ide="event.vega.",wP="this.",TT={},AP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${he(yP+e)}]`,functions:Pde,constants:cP,visitors:TT},gA=dP(AP);function Pde(e){const t=fP(e);Bde.forEach(n=>t[n]=Ide+n);for(const n in yp)t[n]=wP+n;return Pe(t,Qfe(e,yp,TT)),t}function Zt(e,t,n){return arguments.length===1?yp[e]:(yp[e]=t,n&&(TT[e]=n),gA&&(gA.functions[e]=wP+e),this)}Zt("bandwidth",xde,mi);Zt("copy",Sde,mi);Zt("domain",Ede,mi);Zt("range",wde,mi);Zt("invert",_de,mi);Zt("scale",Ade,mi);Zt("gradient",Cde,mi);Zt("geoArea",Zfe,mi);Zt("geoBounds",Kfe,mi);Zt("geoCentroid",Jfe,mi);Zt("geoShape",Mde,mi);Zt("geoScale",ede,mi);Zt("indata",Ffe,Wfe);Zt("data",pP,AT);Zt("treePath",Tde,AT);Zt("treeAncestors",kde,AT);Zt("vlSelectionTest",$fe,wT);Zt("vlSelectionIdTest",Dfe,wT);Zt("vlSelectionResolve",Rfe,wT);Zt("vlSelectionTuples",Ofe);function Va(e,t){const n={};let i;try{e=ye(e)?e:he(e)+"",i=ET(e)}catch{te("Expression parse error: "+e)}i.visit(a=>{if(a.type!==iP)return;const s=a.callee.name,o=AP.visitors[s];o&&o(s,a.arguments,t,n)});const r=gA(i);return r.globals.forEach(a=>{const s=yP+a;!_e(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Pe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function jde(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const qde=aa(["rule"]),B4=aa(["group","image","rect"]);function Hde(e,t){let n="";return qde[t]||(e.x2&&(e.x?(B4[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(B4[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function kT(e){return(e+"").toLowerCase()}function Gde(e){return kT(e)==="operator"}function Yde(e){return kT(e)==="collect"}function rg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Xde(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Vde={operator:(e,t)=>rg(e,["_"],t.code),parameter:(e,t)=>rg(e,["datum","_"],t.code),event:(e,t)=>rg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return rg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+he(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Hde(i,n),r+="return m;",rg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(he).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let u,f;return a.path?(u=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,u=`this.f${s}(a)`,f=`this.f${s}(b)`),Xde(u,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Wde(e){const t=this;Gde(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Qde(e){const t=this;if(e.params){const n=t.get(e.id);n||te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Zde(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=re(r)?r.map(a=>I4(a,n,t)):I4(r,n,t)}return t}function I4(e,t,n){if(!e||!ve(e))return e;for(let i=0,r=P4.length,a;i<r;++i)if(a=P4[i],_e(e,a.key))return a.parse(e,t,n);return e}var P4=[{key:"$ref",parse:Kde},{key:"$key",parse:ehe},{key:"$expr",parse:Jde},{key:"$field",parse:the},{key:"$encode",parse:ihe},{key:"$compare",parse:nhe},{key:"$context",parse:rhe},{key:"$subflow",parse:ahe},{key:"$tupleid",parse:she}];function Kde(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function Jde(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Bi(t.parameterExpression(e.$expr),e.$fields))}function ehe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=gC(e.$key,e.$flat,t.expr.codegen))}function the(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=kr(e.$field,e.$name,t.expr.codegen))}function nhe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=xe(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=fC(i,e.$order,t.expr.codegen))}function ihe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Bi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function rhe(e,t){return t}function ahe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(a),o.detachSubflow=()=>t.detach(s),o}}function she(){return ke}function ohe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function lhe(e){var t=this,n=ve(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||te("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const uhe={skip:!0};function che(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function fhe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],uhe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Dr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function CP(e,t,n,i){return new MP(e,t,n,i)}function MP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Vde,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function j4(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}MP.prototype=j4.prototype={fork(){const e=new j4(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Yde(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[kT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:jde,parseOperator:Wde,parseOperatorParameters:Qde,parseParameters:Zde,parseStream:ohe,parseUpdate:lhe,getState:che,setState:fhe};function dhe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),$P(t,e.description()))}function $P(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function hhe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const KE="default";function ghe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:KE,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?ye(r)?r:r.user:KE,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return ye(i)||(r=i.item,i=i.user),pA(e,i&&i!==KE?i:r||i),r},{cursor:t})}function pA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function av(e,t){var n=e._runtime.data;return _e(n,t)||te("Unrecognized data set: "+t),n[t]}function phe(e,t){return arguments.length<2?av(this,e).values.value:Db.call(this,e,rc().remove(Dr).insert(t))}function Db(e,t){G9(t)||te("Second argument to changes must be a changeset.");const n=av(this,e);return n.modified=!0,this.pulse(n.input,t)}function mhe(e,t){return Db.call(this,e,rc().insert(t))}function yhe(e,t){return Db.call(this,e,rc().remove(t))}function TP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function kP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Ob(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function vhe(e){var t=Ob(e),n=TP(e),i=kP(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function bhe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=Ob(e),s=t.changedTouches?t.changedTouches[0]:t,a=yb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=xhe(e,n,a),t}function xhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){o=u;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;ye(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:ii(e),item:ii(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const q4="view",She="timer",Ehe="window",_he={trap:!1};function whe(e){const t=Pe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{re(i[a])&&(i[a]=aa(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function DP(e,t,n,i){e._eventListeners.push({type:n,sources:xe(t),handler:i})}function Ahe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function l1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||ve(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Che(e,t,n){var i=this,r=new Pv(n),a=function(f,d){i.runAsync(null,()=>{e===q4&&Ahe(i,t)&&f.preventDefault(),r.receive(bhe(i,f,d))})},s;if(e===She)l1(i,"timer",t)&&i.timer(a,t);else if(e===q4)l1(i,"view",t)&&i.addEventListener(t,a,_he);else if(e===Ehe?l1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&l1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,u=s.length;o<u;++o)s[o].addEventListener(t,a);DP(i,s,t,a)}return r}function H4(e){return e.item}function G4(e){return e.item.mark.source}function Y4(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Mhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",H4),G4,Y4(e)),this.on(this.events("view","pointerout",H4),G4,Y4(t)),this}function $he(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,u;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)u=n[r].type,o=n[r].handler,this._handler.off(u,o);return this}function rr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const The="vega-bind",khe="vega-bind-name",Dhe="vega-bind-radio";function Ohe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=dC(i.debounce,r.update))),(i.input==null&&i.element?Rhe:zhe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Rhe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),DP(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Nhe(r))}}function Nhe(e){return typeof Event<"u"?new Event(e):{type:e}}function zhe(e,t,n,i){const r=i.signal(n.signal),a=rr("div",{class:The}),s=n.input==="radio"?a:a.appendChild(rr("label"));s.appendChild(rr("span",{class:khe},n.name||n.signal)),t.appendChild(a);let o=Fhe;switch(n.input){case"checkbox":o=Lhe;break;case"select":o=Uhe;break;case"radio":o=Bhe;break;case"range":o=Ihe;break}o(e,s,n,r)}function Fhe(e,t,n,i){const r=rr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Lhe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=rr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Uhe(e,t,n,i){const r=rr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const u={value:s};sv(s,i)&&(u.selected=!0),r.appendChild(rr("option",u,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,u=n.options.length;o<u;++o)if(sv(n.options[o],s)){r.selectedIndex=o;return}}}function Bhe(e,t,n,i){const r=rr("span",{class:Dhe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const u={type:"radio",name:n.signal,value:s};sv(s,i)&&(u.checked=!0);const f=rr("input",u);f.addEventListener("change",()=>e.update(s));const d=rr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,u=o.length;for(let f=0;f<u;++f)sv(o[f].value,s)&&(o[f].checked=!0)}}function Ihe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||ol(a,r,100),o=rr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const u=rr("span",{},+i);t.appendChild(o),t.appendChild(u);const f=()=>{u.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,u.textContent=d}}function sv(e,t){return e===t||e+""==t+""}function OP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,TP(e),kP(e),Ob(e),r,a).background(e.background())}function DT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Phe(e,t,n,i){const r=new i(e.loader(),DT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Ob(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function jhe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=vb(i);e=n._el=e?JE(n,e,!0):null,dhe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Wp,o=e?a.renderer:a.headless;return n._renderer=o?OP(n,n._renderer,e,o):null,n._handler=Phe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=JE(n,t,!0):e.appendChild(rr("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&r!=="container"&&(u.element=JE(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Ohe(n,u.element||t,u)})),n}function JE(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ag=e=>+e||0,qhe=e=>({top:e,bottom:e,left:e,right:e});function X4(e){return ve(e)?{top:ag(e.top),bottom:ag(e.bottom),left:ag(e.left),right:ag(e.right)}:qhe(ag(e))}async function OT(e,t,n,i){const r=vb(t),a=r&&r.headless;return a||te("Unrecognized renderer type: "+t),await e.runAsync(),OP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Hhe(e,t){e!==Vo.Canvas&&e!==Vo.SVG&&e!==Vo.PNG&&te("Unrecognized image type: "+e);const n=await OT(this,e,t);return e===Vo.SVG?Ghe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Ghe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Yhe(e,t){return(await OT(this,Vo.Canvas,e,t)).canvas()}async function Xhe(e){return(await OT(this,Vo.SVG,e)).svg()}function Vhe(e,t,n){return CP(e,jf,yp,n).parse(t)}function Whe(e){var t=this._runtime.scales;return _e(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var RP="width",NP="height",RT="padding",V4={skip:!0};function zP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===RT?i.left+i.right:0)}function FP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===RT?i.top+i.bottom:0)}function Qhe(e){var t=e._signals,n=t[RP],i=t[NP],r=t[RT];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=zP(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=FP(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function Zhe(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(RP,n,V4),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(NP,i,V4),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(u=>u.resize())},!1,1)}function Khe(e){return this._runtime.getState(e||{data:Jhe,signals:ege,recurse:!0})}function Jhe(e,t){return t.modified&&re(t.input.value)&&!e.startsWith("_:vega:_")}function ege(e,t){return!(e==="parent"||t instanceof jf.proxy)}function tge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function nge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Coe(n,t))}function ige(e,t,n,i){const r=e.element();r&&r.setAttribute("title",rge(i))}function rge(e){return e==null?"":re(e)?LP(e):ve(e)&&!el(e)?age(e):e+""}function age(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(re(n)?LP(n):UP(n))}).join(`
`)}function LP(e){return"["+e.map(UP).join(", ")+"]"}function UP(e){return re(e)?"[…]":ve(e)&&!el(e)?"{…}":e}function sge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function BP(e,t){const n=this;if(t=t||{},Mf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Pe({},e.locale,t.locale);n.locale(z9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vo.Canvas,n._scenegraph=new RU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ige,n._redraw=!0,n._handler=new Wp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=whe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Vhe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Pe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=zP(n,n._width),n._viewHeight=FP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Qhe(n),hhe(n),ghe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function u1(e,t){return _e(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+he(t))}function IP(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function W4(e,t,n,i){let r=IP(n,i);return r||(r=DT(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Q4(e,t,n){const i=IP(t,n);return i&&t._targets.remove(i),e}ge(BP,Mf,{async evaluate(e,t,n){if(await Mf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,vhe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&_1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&$P(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=u1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",X4(e)):X4(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(vb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Mf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(u1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Zhe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=DT(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return W4(this,e,u1(this,e),t)},removeSignalListener(e,t){return Q4(this,u1(this,e),t)},addDataListener(e,t){return W4(this,e,av(this,e).values,t)},removeDataListener(e,t){return Q4(this,av(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=pA(this,null);this._globalCursor=!!e,t&&pA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:nge,events:Che,finalize:$he,hover:Mhe,data:phe,change:Db,insert:mhe,remove:yhe,scale:Whe,initialize:jhe,toImageURL:Hhe,toCanvas:Yhe,toSVG:Xhe,getState:Khe,setState:tge,_watchPixelRatio:sge});const oge="view",ov="[",lv="]",PP="{",jP="}",lge=":",qP=",",uge="@",cge=">",fge=/[[\]{}]/,dge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let HP,GP;function Ml(e,t,n){return HP=t||oge,GP=n||dge,YP(e.trim()).map(mA)}function hge(e){return GP[e]}function Vg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function YP(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Vg(e,r,qP,ov+PP,lv+jP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function mA(e){return e[0]==="["?gge(e):pge(e)}function gge(e){const t=e.length;let n=1,i;if(n=Vg(e,n,lv,ov,lv),n===t)throw"Empty between selector: "+e;if(i=YP(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==cge)throw"Expected '>' after between selector: "+e;i=i.map(mA);const r=mA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function pge(e){const t={source:HP},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,u,f;if(e[s-1]===jP){if(o=e.lastIndexOf(PP),o>=0){try{i=mge(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===uge&&(r=++o),u=Vg(e,o,lge),u<s&&(n.push(e.substring(a,u).trim()),a=o=++u),o=Vg(e,o,ov),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Vg(e,o,lv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==ov)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||fge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):hge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function mge(e){const t=e.split(qP);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function yge(e){return ve(e)?e:{type:e||"pad"}}const sg=e=>+e||0,vge=e=>({top:e,bottom:e,left:e,right:e});function bge(e){return ve(e)?e.signal?e:{top:sg(e.top),bottom:sg(e.bottom),left:sg(e.left),right:sg(e.right)}:vge(sg(e))}const _n=e=>ve(e)&&!re(e)?Pe({},e):{value:e};function Z4(e,t,n,i){return n!=null?(ve(n)&&!re(n)||re(n)&&n.length&&ve(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Bn(e,t,n){for(const i in t)Z4(e,i,t[i]);for(const i in n)Z4(e,i,n[i],"update")}function Rd(e,t,n){for(const i in t)n&&_e(n,i)||(e[i]=Pe(e[i]||{},t[i]));return e}function vf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const NT="mark",zT="frame",FT="scope",xge="axis",Sge="axis-domain",Ege="axis-grid",_ge="axis-label",wge="axis-tick",Age="axis-title",Cge="legend",Mge="legend-band",$ge="legend-entry",Tge="legend-gradient",XP="legend-label",kge="legend-symbol",Dge="legend-title",Oge="title",Rge="title-text",Nge="title-subtitle";function zge(e,t,n,i,r){const a={},s={};let o,u,f,d;u="lineBreak",t==="text"&&r[u]!=null&&!vf(u,e)&&e_(a,u,r[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===zT?r.group:n===NT?Pe({},r.mark,r[t]):null;for(u in d)f=vf(u,e)||(u==="fill"||u==="stroke")&&(vf("fill",e)||vf("stroke",e)),f||e_(a,u,d[u]);xe(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)vf(y,e)||e_(a,y,p[y])}),e=Pe({},e);for(u in a)d=a[u],d.signal?(o=o||{})[u]=d:s[u]=d;return e.enter=Pe(s,e.enter),o&&(e.update=Pe(o,e.update)),e}function e_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const VP=e=>ye(e)?he(e):e.signal?`(${e.signal})`:WP(e);function Rb(e){if(e.gradient!=null)return Lge(e);let t=e.signal?`(${e.signal})`:e.color?Fge(e.color):e.field!=null?WP(e.field):e.value!==void 0?he(e.value):void 0;return e.scale!=null&&(t=Uge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${P1(e.exponent)})`),e.mult!=null&&(t+=`*${P1(e.mult)}`),e.offset!=null&&(t+=`+${P1(e.offset)}`),e.round&&(t=`round(${t})`),t}const c1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Rb).join(",")})+'')`;function Fge(e){return e.c?c1("hcl",e.h,e.c,e.l):e.h||e.s?c1("hsl",e.h,e.s,e.l):e.l||e.a?c1("lab",e.l,e.a,e.b):e.r||e.g||e.b?c1("rgb",e.r,e.g,e.b):null}function Lge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:he(n));for(;t.length&&Je(t)==null;)t.pop();return t.unshift(VP(e.gradient)),`gradient(${t.join(",")})`}function P1(e){return ve(e)?"("+Rb(e)+")":e}function WP(e){return QP(ve(e)?e:{datum:e})}function QP(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+he(e));return e.signal||(i=ye(i)?Ka(i).map(he).join("]["):QP(i)),t+"["+i+"]"}function Uge(e,t){const n=VP(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+P1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Bge(e){let t="";return e.forEach(n=>{const i=Rb(n);t+=n.test?`(${n.test})?${i}:`:i}),Je(t)===":"&&(t+="null"),t}function ZP(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=zge(e,t,n,i,r.config);for(const o in e)s[o]=Ige(e[o],t,a,r);return a}function Ige(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=jge(Pge(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Pge(e){return re(e)?Bge(e):Rb(e)}function jge(e,t,n,i){const r=Va(e,t);return r.$fields.forEach(a=>i[a]=1),Pe(n,r.$params),r.$expr}const qge="outer",Hge=["value","update","init","react","bind"];function K4(e,t){te(e+' for "outer" push: '+he(t))}function KP(e,t){const n=e.name;if(e.push===qge)t.signals[n]||K4("No prior signal definition",n),Hge.forEach(i=>{e[i]!==void 0&&K4("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function yA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Nb(e,t,n,i){return new yA(e,t,n,i)}function uv(e,t){return Nb("operator",e,t)}function Te(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function vp(e,t){return t?{$field:e,$name:t}:{$field:e}}const vA=vp("key");function J4(e,t){return{$compare:e,$order:t}}function Gge(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Yge="ascending",Xge="descending";function Vge(e){return ve(e)?(e.order===Xge?"-":"+")+zb(e.op,e.field):""}function zb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const LT="scope",bA="view";function fn(e){return e&&e.signal}function Wge(e){return e&&e.expr}function j1(e){if(fn(e))return!0;if(ve(e)){for(const t in e)if(j1(e[t]))return!0}return!1}function Xr(e,t){return e??t}function Mu(e){return e&&e.signal||e}const ez="timer";function bp(e,t){return(e.merge?Zge:e.stream?Kge:e.type?Jge:te("Invalid stream specification: "+he(e)))(e,t)}function Qge(e){return e===LT?bA:e||bA}function Zge(e,t){const n=e.merge.map(r=>bp(r,t)),i=UT({merge:n},e,t);return t.addStream(i).id}function Kge(e,t){const n=bp(e.stream,t),i=UT({stream:n},e,t);return t.addStream(i).id}function Jge(e,t){let n;e.type===ez?(n=t.event(ez,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Qge(e.source),e.type);const i=UT({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function UT(e,t,n){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+he(t)),e.between=[bp(i[0],n),bp(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(epe(t.marktype,t.markname,t.markrole)),t.source===LT&&i.push("inScope(event.item)"),i.length&&(e.filter=Va("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function epe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const tpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function npe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||te("Signal update missing events specification."),ye(a)&&(a=Ml(a,t.isSubscope()?LT:bA)),a=xe(a).filter(u=>u.signal||u.scale?(o.push(u),0):1),o.length>1&&(o=[rpe(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&te("Signal encode and update are mutually exclusive."),s="encode(item(),"+he(i)+")"),r.update=ye(s)?Va(s,t):s.expr!=null?Va(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:tpe,$params:{$value:t.signalRef(s.signal)}}:te("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(u=>t.addUpdate(Pe(ipe(u,t),r)))}function ipe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):bp(e,t)}}function rpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function ape(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Va(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>npe(r,t,n.id))}const Et=e=>(t,n,i)=>Nb(e,n,t||void 0,i),JP=Et("aggregate"),spe=Et("axisticks"),ej=Et("bound"),ha=Et("collect"),tz=Et("compare"),ope=Et("datajoin"),tj=Et("encode"),lpe=Et("expression"),upe=Et("facet"),cpe=Et("field"),fpe=Et("key"),dpe=Et("legendentries"),hpe=Et("load"),gpe=Et("mark"),ppe=Et("multiextent"),mpe=Et("multivalues"),ype=Et("overlap"),vpe=Et("params"),nj=Et("prefacet"),bpe=Et("projection"),xpe=Et("proxy"),Spe=Et("relay"),ij=Et("render"),Epe=Et("scale"),lc=Et("sieve"),_pe=Et("sortitems"),rj=Et("viewlayout"),wpe=Et("values");let Ape=0;const aj={min:"min",max:"max",count:"sum"};function Cpe(e,t){const n=e.type||"linear";YL(n)||te("Unrecognized scale type: "+he(n)),t.addScale(e.name,{type:n,domain:void 0})}function Mpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=sj(e.domain,e,t),e.range!=null&&(n.range=lj(e,t,n)),e.interpolate!=null&&Lpe(e.interpolate,n),e.nice!=null&&(n.nice=Fpe(e.nice,t)),e.bins!=null&&(n.bins=zpe(e.bins,t));for(i in e)_e(n,i)||i==="name"||(n[i]=Cr(e[i],t))}function Cr(e,t){return ve(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+he(e)):e}function q1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cr(n,t))}function Fb(e){te("Can not find data set: "+he(e))}function sj(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(re(e)?$pe:e.fields?kpe:Tpe)(e,t,n)}function $pe(e,t,n){return e.map(i=>Cr(i,n))}function Tpe(e,t,n){const i=n.getData(e.data);return i||Fb(e.data),Xf(t.type)?i.valuesRef(n,e.field,oj(e.sort,!1)):WL(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function kpe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=ye(s)?{data:i,field:s}:re(s)||s.signal?Dpe(s,n):s,a.push(s),a),[]);return(Xf(t.type)?Ope:WL(t.type)?Rpe:Npe)(e,n,r)}function Dpe(e,t){const n="_:vega:_"+Ape++,i=ha({});if(re(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+he(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,lc({})]),{data:n,field:"data"}}function Ope(e,t,n){const i=oj(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Fb(f.data),d.countsRef(t,f.field,i)}),o={groupby:vA,pulse:s};i&&(r=i.op||"count",a=i.field?zb(r,i.field):"count",o.ops=[aj[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(JP(o));const u=t.add(ha({pulse:Te(r)}));return a=t.add(wpe({field:vA,sort:t.sortRef(i),pulse:Te(u)})),Te(a)}function oj(e,t){return e&&(!e.field&&!e.op?ve(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!aj[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function Rpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Fb(r.data),a.domainRef(t,r.field)});return Te(t.add(mpe({values:i})))}function Npe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Fb(r.data),a.extentRef(t,r.field)});return Te(t.add(ppe({extents:i})))}function zpe(e,t){return e.signal||re(e)?q1(e,t):t.objectProperty(e)}function Fpe(e,t){return e.signal?t.signalRef(e.signal):ve(e)?{interval:Cr(e.interval),step:Cr(e.step)}:Cr(e)}function Lpe(e,t){t.interpolate=Cr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cr(e.gamma))}function lj(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(ye(r)){if(i&&_e(i,r))return e=Pe({},e,{range:i[r]}),lj(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Xf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+he(r))}else if(r.scheme){n.scheme=re(r.scheme)?q1(r.scheme,t):Cr(r.scheme,t),r.extent&&(n.schemeExtent=q1(r.extent,t)),r.count&&(n.schemeCount=Cr(r.count,t));return}else if(r.step){n.rangeStep=Cr(r.step,t);return}else{if(Xf(e.type)&&!re(r))return sj(r,e,t);re(r)||te("Unsupported range type: "+he(r))}return r.map(a=>(re(a)?q1:Cr)(a,t))}function Upe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=xA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=xA(n[r],r,t));t.addProjection(e.name,i)}function xA(e,t,n){return re(e)?e.map(i=>xA(i,t,n)):ve(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+he(e)):e}const ga="top",Nd="left",zd="right",pl="bottom",uj="center",Bpe="vertical",Ipe="start",Ppe="middle",jpe="end",SA="index",BT="label",qpe="offset",nd="perc",Hpe="perc2",$r="value",r0="guide-label",IT="guide-title",Gpe="group-title",Ype="group-subtitle",nz="symbol",H1="gradient",EA="discrete",_A="size",Xpe="shape",Vpe="fill",Wpe="stroke",Qpe="strokeWidth",Zpe="strokeDash",Kpe="opacity",PT=[_A,Xpe,Vpe,Wpe,Qpe,Zpe,Kpe],a0={name:1,style:1,interactive:1},tt={value:0},Tr={value:1},Lb="group",cj="rect",jT="rule",Jpe="symbol",uc="text";function xp(e){return e.type=Lb,e.interactive=e.interactive||!1,e}function Ii(e,t){const n=(i,r)=>Xr(e[i],Xr(t[i],r));return n.isVertical=i=>Bpe===Xr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xr(e.columns,Xr(t.columns,+n.isVertical(!0))),n}function fj(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function e0e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Ub(e,t,n){return`item.anchor === '${Ipe}' ? ${e} : item.anchor === '${jpe}' ? ${t} : ${n}`}const qT=Ub(he(Nd),he(zd),he(uj));function t0e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},ve(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function dj(e,t){return t?e?ve(e)?Object.assign({},e,{offset:dj(e.offset,t)}):{value:e,offset:t}:t:e}function cr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Rd(e.encode,t,a0)):e.interactive=!1,e}function n0e(e,t,n,i){const r=Ii(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let u,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:u={opacity:tt,x:tt,y:tt,width:_n(h),height:_n(p)},update:Pe({},u,{opacity:Tr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:tt}};return Bn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),cr({type:cj,role:Tge,encode:y},i)}function i0e(e,t,n,i,r){const a=Ii(e,n),s=a.isVertical(),o=a.gradientThickness(),u=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:tt,fill:{scale:t,field:$r}};v[f]={signal:y+"datum."+nd,mult:u},v[d]=tt,v[h]={signal:y+"datum."+Hpe,mult:u},v[p]=_n(o);const b={enter:v,update:Pe({},v,{opacity:Tr}),exit:{opacity:tt}};return Bn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),cr({type:cj,role:Mge,key:$r,from:r,encode:b},i)}const r0e=`datum.${nd}<=0?"${Nd}":datum.${nd}>=1?"${zd}":"${uj}"`,a0e=`datum.${nd}<=0?"${pl}":datum.${nd}>=1?"${ga}":"${Ppe}"`;function iz(e,t,n,i){const r=Ii(e,t),a=r.isVertical(),s=_n(r.gradientThickness()),o=r.gradientLength();let u=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:tt},update:d={opacity:Tr,text:{field:BT}},exit:{opacity:tt}};return Bn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Xr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:a0e},h="y",p="x",y="1-"):(f.align=d.align={signal:r0e},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+nd,mult:o},f[p]=d[p]=s,s.offset=Xr(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:r("labelSeparation"),method:u,order:"datum."+SA}:void 0,cr({type:uc,role:XP,style:r0,key:$r,from:i,encode:v,overlap:u},n)}function s0e(e,t,n,i,r){const a=Ii(e,t),s=n.entries,o=!!(s&&s.interactive),u=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${qpe} : datum.${_A}`,y=f?_n(f):{field:_A},v=`datum.${SA}`,b=`max(1, ${r})`;let S,_,w,A,C;y.mult=.5,S={enter:_={opacity:tt,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Tr,x:_.x,y:_.y},exit:{opacity:tt}};let M=null,k=null;e.fill||(M=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),Bn(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),PT.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:$r})});const T=cr({type:Jpe,role:kge,key:$r,from:h,clip:f?!0:void 0,encode:S},n.symbols),O=_n(d);O.offset=a("labelOffset"),S={enter:_={opacity:tt,x:{signal:p,offset:O},y},update:w={opacity:Tr,text:{field:BT},x:_.x,y:_.y},exit:{opacity:tt}},Bn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=cr({type:uc,role:XP,style:r0,key:$r,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:tt,height:f?_n(f):tt,opacity:tt},exit:{opacity:tt},update:w={opacity:Tr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,C={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,C={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:SA}},xp({role:FT,from:i,encode:Rd(S,s,a0),marks:[T,N],name:u,interactive:o,sort:C})}function o0e(e,t){const n=Ii(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const HT='item.orient === "left"',GT='item.orient === "right"',Bb=`(${HT} || ${GT})`,l0e=`datum.vgrad && ${Bb}`,u0e=Ub('"top"','"bottom"','"middle"'),c0e=Ub('"right"','"left"','"center"'),f0e=`datum.vgrad && ${GT} ? (${c0e}) : (${Bb} && !(datum.vgrad && ${HT})) ? "left" : ${qT}`,d0e=`item._anchor || (${Bb} ? "middle" : "start")`,h0e=`${l0e} ? (${HT} ? -90 : 90) : 0`,g0e=`${Bb} ? (datum.vgrad ? (${GT} ? "bottom" : "top") : ${u0e}) : "top"`;function p0e(e,t,n,i){const r=Ii(e,t),a={enter:{opacity:tt},update:{opacity:Tr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tt}};return Bn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:d0e},angle:{signal:h0e},align:{signal:f0e},baseline:{signal:g0e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),cr({type:uc,role:Dge,style:IT,from:i,encode:a},n)}function m0e(e,t){let n;return ve(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+rz(e.path)+")":e.sphere&&(n="geoShape("+rz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function rz(e){return ve(e)&&e.signal?e.signal:he(e)}function hj(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Lb?FT:t||NT}function y0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||hj(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function v0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function YT(e,t){const n=V9(e.type);n||te("Unrecognized transform type: "+he(e.type));const i=Nb(n.type.toLowerCase(),null,gj(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function gj(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=b0e(s,t,n)}return i}function b0e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return x0e(e,t,n);if(r===void 0){e.required&&te("Missing required "+he(t.type)+" parameter: "+he(e.name));return}else{if(i==="param")return S0e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!fn(r)?r.map(a=>az(e,a,n)):az(e,r,n)}function az(e,t,n){const i=e.type;if(fn(t))return oz(i)?te("Expression references can not be signals."):t_(i)?n.fieldRef(t):lz(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||t_(i);return r&&E0e(t)?n.exprRef(t.expr,t.as):r&&_0e(t)?vp(t.field,t.as):oz(i)?Va(t,n):w0e(i)?Te(n.getData(t).values):t_(i)?vp(t):lz(i)?n.compareRef(t):t}}function x0e(e,t,n){return ye(t.from)||te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function S0e(e,t,n){const i=t[e.name];return e.array?(re(i)||te("Expected an array of sub-parameters. Instead: "+he(i)),i.map(r=>sz(e,r,n))):sz(e,i,n)}function sz(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||te("Unsupported parameter: "+he(t));const a=Pe(gj(r,t,n),r.key);return Te(n.add(vpe(a)))}const E0e=e=>e&&e.expr,_0e=e=>e&&e.field,w0e=e=>e==="data",oz=e=>e==="expr",t_=e=>e==="field",lz=e=>e==="compare";function A0e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?s=o=G1(i,n):(e.data?o=Te(n.getData(e.data).aggregate):(a=YT(Pe({type:"aggregate",groupby:xe(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=G1(i,n),s=o=Te(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Te(n.add(ha(null,[{}]))),s||(s=G1(e,n)),{key:r,pulse:s,parent:o}}function G1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Te(t.getData(e.data).output)}function Hu(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Hu.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Te(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new Hu(e,a,r,i,s)};function pj(e){return ye(e)?e:null}function uz(e,t,n){const i=zb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function og(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),u=Vge(a);let f=pj(r),d,h;if(f!=null&&(e=t.scope,f=f+(u?"|"+u:""),d=o[f]),!d){const p=a?{field:vA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Te(t.output)};u&&(p.sort=e.sortRef(a)),h=e.add(Nb(i,void 0,p)),s&&(t.index[r]=h),d=Te(h),f!=null&&(o[f]=d)}return d}Hu.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=pj(t);let s,o,u;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&uz(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Te(i.output)},n&&n.field&&uz(e,u,n),o=e.add(JP(u)),s=e.add(ha({pulse:Te(o)})),s={agg:o,ref:Te(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Te(this.values)},extentRef(e,t){return og(e,this,"extent","extent",t,!1)},domainRef(e,t){return og(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return og(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return og(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return og(e,this,"indata","tupleindex",t,!0,!0)}};function C0e(e,t,n){const i=e.from.facet,r=i.name,a=G1(i,t);let s;i.name||te("Facet must have a name: "+he(i)),i.data||te("Facet must reference a data set: "+he(i)),i.field?s=t.add(nj({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(upe({key:t.keyRef(i.groupby),group:Te(t.proxy(n.parent)),pulse:a})):te("Facet must specify groupby or field: "+he(i));const o=t.fork(),u=o.add(ha()),f=o.add(lc({pulse:Te(u)}));o.addData(r,new Hu(o,u,u,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function M0e(e,t,n){const i=t.add(nj({pulse:n.pulse})),r=t.fork();r.add(lc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function mj(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,u=t.add(uv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=Va(f,t);u.update=d.$expr,u.params=d.$params}function Ib(e,t){const n=hj(e),i=e.type===Lb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===FT||n===zT,o,u,f,d,h,p,y;const v=n===NT||s||r,b=A0e(e.from,i,t);u=t.add(ope({key:b.key||(e.key?vp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Te(u);u=f=t.add(ha({pulse:S})),u=t.add(gpe({markdef:y0e(e),interactive:v0e(e.interactive,t),clip:m0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Te(u)}));const _=Te(u);u=d=t.add(tj(ZP(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const T=YT(k,t),O=T.metadata;(O.generates||O.changes)&&te("Mark transforms should not generate new data."),O.nomod||(d.params.mod=!0),T.params.pulse=Te(u),t.add(u=T)}),e.sort&&(u=t.add(_pe({sort:t.compareRef(e.sort),pulse:Te(u)})));const w=Te(u);(r||s)&&(s=t.add(rj({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Te(s));const A=t.add(ej({mark:_,pulse:p||w}));y=Te(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,S),r?C0e(e,t,b):v?M0e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=$0e(a,y,t));const C=t.add(ij({pulse:y})),M=t.add(lc({pulse:Te(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Hu(t,f,C,M)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&te("Marks only support modify triggers."),mj(k,t,h)}))}function $0e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:fn(a)?n.signalRef(a.signal):a,method:fn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=fn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Te(n.add(ype(s)))}function T0e(e,t){const n=t.config.legend,i=e.encode||{},r=Ii(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,u=a.style,f={};let d=0,h,p,y;PT.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||te("Missing valid scale for legend.");const v=k0e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Te(t.add(ha(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Te(t.add(dpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===H1?(y=[n0e(e,d,n,i.gradient),iz(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Mu(r.gradientLength())})/100))`)):v===EA?y=[i0e(e,d,n,i.gradient,w),iz(e,n,i.labels,w)]:(h=o0e(e,n),y=[s0e(e,n,i,w,Mu(h.columns))],p.size=R0e(e,t,y[0].marks)),y=[xp({role:$ge,from:S,encode:_,marks:y,layout:h,interactive:o})],b.title&&y.push(p0e(e,n,i.title,S)),Ib(xp({role:Cge,from:S,encode:Rd(O0e(r,e,n),a,a0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:u}),t)}function k0e(e,t){let n=e.type||nz;return!e.type&&D0e(e)===1&&(e.fill||e.stroke)&&(n=YM(t)?H1:gw(t)?EA:nz),n!==H1?n:gw(t)?EA:H1}function D0e(e){return PT.reduce((t,n)=>t+(e[n]?1:0),0)}function O0e(e,t,n){const i={enter:{},update:{}};return Bn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function R0e(e,t,n){const i=Mu(cz("size",e,n)),r=Mu(cz("strokeWidth",e,n)),a=Mu(N0e(n[1].encode,t,r0));return Va(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function cz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:fj(e,n[0].encode)}function N0e(e,t,n){return fj("fontSize",e)||e0e("fontSize",t,n)}const z0e=`item.orient==="${Nd}"?-90:item.orient==="${zd}"?90:0`;function F0e(e,t){e=ye(e)?{text:e}:e;const n=Ii(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,u=[],f={},d=Te(t.add(ha(null,[f])));return u.push(B0e(e,n,L0e(e),d)),e.subtitle&&u.push(I0e(e,n,i.subtitle,d)),Ib(xp({role:Oge,from:d,encode:U0e(n,r),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function L0e(e){const t=e.encode;return t&&t.title||Pe({name:e.name,interactive:e.interactive,style:e.style},t)}function U0e(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:qT},angle:{signal:z0e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Rd(n,t,a0)}function B0e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:Rge,style:Gpe,from:i,encode:s},n)}function I0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:Nge,style:Ype,from:i,encode:s},n)}function P0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(YT(i,t))}),e.on&&e.on.forEach(i=>{mj(i,t,e.name)}),t.addDataPipeline(e.name,j0e(e,t,n))}function j0e(e,t,n){const i=[];let r=null,a=!1,s=!1,o,u,f,d,h;for(e.values?fn(e.values)||j1(e.format)?(i.push(fz(t,e)),i.push(r=nu())):i.push(r=nu({$ingest:e.values,$format:e.format})):e.url?j1(e.url)||j1(e.format)?(i.push(fz(t,e)),i.push(r=nu())):i.push(r=nu({$request:e.url,$format:e.format})):e.source&&(r=o=xe(e.source).map(p=>Te(t.getData(p).output)),i.push(null)),u=0,f=n.length;u<f;++u)d=n[u],h=d.metadata,!r&&!h.source&&i.push(r=nu()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=Spe({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,nu())),r||i.push(nu()),i.push(lc({})),i}function nu(e){const t=ha({},e);return t.metadata={source:!0},t}function fz(e,t){return hpe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const yj=e=>e===pl||e===ga,Pb=(e,t,n)=>fn(e)?Y0e(e.signal,t,n):e===Nd||e===ga?t:n,wn=(e,t,n)=>fn(e)?H0e(e.signal,t,n):yj(e)?t:n,ia=(e,t,n)=>fn(e)?G0e(e.signal,t,n):yj(e)?n:t,vj=(e,t,n)=>fn(e)?X0e(e.signal,t,n):e===ga?{value:t}:{value:n},q0e=(e,t,n)=>fn(e)?V0e(e.signal,t,n):e===zd?{value:t}:{value:n},H0e=(e,t,n)=>bj(`${e} === '${ga}' || ${e} === '${pl}'`,t,n),G0e=(e,t,n)=>bj(`${e} !== '${ga}' && ${e} !== '${pl}'`,t,n),Y0e=(e,t,n)=>XT(`${e} === '${Nd}' || ${e} === '${ga}'`,t,n),X0e=(e,t,n)=>XT(`${e} === '${ga}'`,t,n),V0e=(e,t,n)=>XT(`${e} === '${zd}'`,t,n),bj=(e,t,n)=>(t=t!=null?_n(t):t,n=n!=null?_n(n):n,dz(t)&&dz(n)?(t=t?t.signal||he(t.value):null,n=n?n.signal||he(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pe({test:e},t)].concat(n||[])),dz=e=>e==null||Object.keys(e).length===1,XT=(e,t,n)=>({signal:`${e} ? (${Af(t)}) : (${Af(n)})`}),W0e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Nd}' ? (${Af(i)}) : `:"")+(n!=null?`${e} === '${pl}' ? (${Af(n)}) : `:"")+(r!=null?`${e} === '${zd}' ? (${Af(r)}) : `:"")+(t!=null?`${e} === '${ga}' ? (${Af(t)}) : `:"")+"(null)"}),Af=e=>fn(e)?e.signal:e==null?null:he(e),Q0e=(e,t)=>t===0?0:fn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Df=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hf(e,t,n,i){let r;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[IT][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[r0][r]}return null}function hz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Z0e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,u,f;if(fn(s)){const h=hz([n.axisX,n.axisY]),p=hz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=wn(s,hf(f,n.axisX,r,i),hf(f,n.axisY,r,i));u={};for(f of p)u[f]=W0e(s.signal,hf(f,n.axisTop,r,i),hf(f,n.axisBottom,r,i),hf(f,n.axisLeft,r,i),hf(f,n.axisRight,r,i))}else o=s===ga||s===pl?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||u||a?Pe({},r,o,u,a):r}function K0e(e,t,n,i){const r=Ii(e,t),a=e.orient;let s,o;const u={enter:s={opacity:tt},update:o={opacity:Tr},exit:{opacity:tt}};Bn(u,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=gz(e,0),d=gz(e,1);return s.x=o.x=wn(a,f,tt),s.x2=o.x2=wn(a,d),s.y=o.y=ia(a,f,tt),s.y2=o.y2=ia(a,d),cr({type:jT,role:Sge,from:i,encode:u},n)}function gz(e,t){return{scale:e.scale,range:t}}function J0e(e,t,n,i,r){const a=Ii(e,t),s=e.orient,o=e.gridScale,u=Pb(s,1,-1),f=eme(e.offset,u);let d,h,p;const y={enter:d={opacity:tt},update:p={opacity:Tr},exit:h={opacity:tt}};Bn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:$r,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=wn(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:u,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:u,offset:f}:Pe(b,{mult:u,offset:f});return d.x=p.x=wn(s,v,S),d.y=p.y=ia(s,v,S),d.x2=p.x2=ia(s,_),d.y2=p.y2=wn(s,_),h.x=wn(s,v),h.y=ia(s,v),cr({type:jT,role:Ege,key:$r,from:i,encode:y},n)}function eme(e,t){if(t!==1)if(!ve(e))e=fn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pe({},e);for(;n.mult!=null;)if(ve(n.mult))n=n.mult=Pe({},n.mult);else return n.mult=fn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function tme(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,u=Pb(o,-1,1);let f,d,h;const p={enter:f={opacity:tt},update:h={opacity:Tr},exit:d={opacity:tt}};Bn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=_n(r);y.mult=u;const v={scale:e.scale,field:$r,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=wn(o,tt,v),h.y2=f.y2=wn(o,y),d.x=wn(o,v),h.x=f.x=ia(o,tt,v),h.x2=f.x2=ia(o,y),d.y=ia(o,v),cr({type:jT,role:wge,key:$r,from:i,encode:p},n)}function n_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function nme(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,u=e.scale,f=Pb(o,-1,1),d=Mu(s("labelFlush")),h=Mu(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=_n(r);S.mult=f,S.offset=_n(s("labelPadding")||0),S.offset.mult=f;const _={scale:u,field:$r,band:.5,offset:dj(a.offset,s("labelOffset"))},w=wn(o,v?n_(u,d,'"left"','"right"','"center"'):{value:"center"},q0e(o,"left","right")),A=wn(o,vj(o,"bottom","top"),v?n_(u,d,'"top"','"bottom"','"middle"'):{value:"middle"}),C=n_(u,d,`-(${h})`,h,0);v=v&&h;const M={opacity:tt,x:wn(o,_,S),y:ia(o,_,S)},k={enter:M,update:b={opacity:Tr,text:{field:BT},x:M.x,y:M.y,align:w,baseline:A},exit:{opacity:tt,x:M.x,y:M.y}};Bn(k,{dx:!p&&v?wn(o,C):null,dy:!y&&v?ia(o,C):null}),Bn(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const T=s("labelBound");let O=s("labelOverlap");return O=O||T?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:T?{scale:u,orient:o,tolerance:T}:null}:void 0,b.align!==w&&(b.align=Df(b.align,w)),b.baseline!==A&&(b.baseline=Df(b.baseline,A)),cr({type:uc,role:_ge,style:r0,key:$r,from:i,encode:k,overlap:O},n)}function ime(e,t,n,i){const r=Ii(e,t),a=e.orient,s=Pb(a,-1,1);let o,u;const f={enter:o={opacity:tt,anchor:_n(r("titleAnchor",null)),align:{signal:qT}},update:u=Pe({},o,{opacity:Tr,text:_n(e.title)}),exit:{opacity:tt}},d={signal:`lerp(range("${e.scale}"), ${Ub(0,1,.5)})`};return u.x=wn(a,d),u.y=ia(a,d),o.angle=wn(a,tt,Q0e(s,90)),o.baseline=wn(a,vj(a,pl,ga),{value:pl}),u.angle=o.angle,u.baseline=o.baseline,Bn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),rme(r,a,f,n),f.update.align=Df(f.update.align,o.align),f.update.angle=Df(f.update.angle,o.angle),f.update.baseline=Df(f.update.baseline,o.baseline),cr({type:uc,role:Age,style:IT,from:i,encode:f},n)}function rme(e,t,n,i){const r=(o,u)=>o!=null?(n.update[u]=Df(_n(o),n.update[u]),!1):!vf(u,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?_n(s):wn(t,_n(s),_n(a))}function ame(e,t){const n=Z0e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,u=Ii(e,n),f=t0e(u),d={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},h=Te(t.add(ha({},[d]))),p=Te(t.add(spe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(J0e(e,n,i.grid,p,f)),d.ticks&&(v=u("tickSize"),y.push(tme(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(nme(e,n,i.labels,p,v,f))),d.domain&&y.push(K0e(e,n,i.domain,h)),d.title&&y.push(ime(e,n,i.title,h)),Ib(xp({role:xge,from:h,encode:Rd(sme(u,e),r,a0),marks:y,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:a,interactive:s,style:o}),t)}function sme(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),offset:e("offset")||0,position:Xr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function xj(e,t,n){const i=xe(e.signals),r=xe(e.scales);return n||i.forEach(a=>KP(a,t)),xe(e.projections).forEach(a=>Upe(a,t)),r.forEach(a=>Cpe(a,t)),xe(e.data).forEach(a=>P0e(a,t)),r.forEach(a=>Mpe(a,t)),(n||i).forEach(a=>ape(a,t)),xe(e.axes).forEach(a=>ame(a,t)),xe(e.marks).forEach(a=>Ib(a,t)),xe(e.legends).forEach(a=>T0e(a,t)),e.title&&F0e(e.title,t),t.parseLambdas(),t}const ome=e=>Rd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function lme(e,t){const n=t.config,i=Te(t.root=t.add(uv())),r=ume(e,n);r.forEach(f=>KP(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ha()),s=t.add(tj(ZP(ome(e.encode),Lb,zT,e.style,t,{pulse:Te(a)}))),o=t.add(rj({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Te(s)}));t.operators.pop(),t.pushState(Te(s),Te(o),null),xj(e,t,r),t.operators.push(o);let u=t.add(ej({mark:i,pulse:Te(o)}));return u=t.add(ij({pulse:Te(u)})),u=t.add(lc({pulse:Te(u)})),t.addData("root",new Hu(t,a,a,u)),t}function lg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function ume(e,t){const n=s=>Xr(e[s],t[s]),i=[lg("background",n("background")),lg("autosize",yge(n("autosize"))),lg("padding",bge(n("padding"))),lg("width",n("width")||0),lg("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return xe(e.signals).forEach(s=>{_e(r,s.name)?s=Pe(r[s.name],s):i.push(s),a[s.name]=s}),xe(t.signals).forEach(s=>{!_e(a,s.name)&&!_e(r,s.name)&&i.push(s)}),i}function Sj(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function pz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Sj.prototype=pz.prototype={parse(e){return xj(e,this)},fork(){return new pz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof yA?Te(e):e;return this.add(xpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Te(this.add(lc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Te(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Je(this._parent)},encode(){return Je(this._encode)},lookup(){return Je(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ye(e))return vp(e,t);e.signal||te("Unsupported field reference: "+he(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Te(this.add(cpe(r)))}return i},compareRef(e){let t=!1;const n=a=>fn(a)?(t=!0,this.signalRef(a.signal)):Wge(a)?(t=!0,this.exprRef(a.expr)):a,i=xe(e.field).map(n),r=xe(e.order).map(n);return t?Te(this.add(tz({fields:i,orders:r}))):J4(i,r)},keyRef(e,t){let n=!1;const i=a=>fn(a)?(n=!0,Te(r[a.signal])):a,r=this.signals;return e=xe(e).map(i),n?Te(this.add(fpe({fields:e,flat:t}))):Gge(e,t)},sortRef(e){if(!e)return e;const t=zb(e.op,e.field),n=e.order||Yge;return n.signal?Te(this.add(tz({fields:t,orders:this.signalRef(n.signal)}))):J4(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+he(e));const n=t instanceof yA?t:this.add(uv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+he(e)),this.signals[e]},signalRef(e){return this.signals[e]?Te(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(uv(null))),Te(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Va(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ve(e)?e:this.signalRef(e.signal||VT(e))},exprRef(e,t){const n={expr:Va(e,this)};return t&&(n.expr.$name=t),Te(this.add(lpe(n)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+he(e)),this.bindings.push(Pe({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&te("Duplicate scale or projection name: "+he(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Epe(t))},addProjection(e,t){this.addScaleProj(e,bpe(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+he(e)),this.scales[e]},scaleRef(e){return Te(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+he(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+he(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+he(e)),this.addData(e,Hu.fromEntries(this,t))}};function VT(e){return(re(e)?cme:fme)(e)}function cme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(ve(r)?r.signal||VT(r):he(r))}return n+"]"}function fme(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+he(i)+":"+(ve(r)?r.signal||VT(r):he(r));return t+"}"}function dme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function hme(e,t,n){return ve(e)||te("Input Vega specification must be an object."),t=bd(dme(),t,e.config),lme(e,new Sj(t,n)).toRuntime()}var gme="6.1.2";Pe(jf,nJ,Rre,fae,Qse,Hoe,yue,Qle,bue,que,Jue,sce);const pme=gme,mme=Object.freeze(Object.defineProperty({__proto__:null,Bounds:rn,CanvasHandler:Wp,CanvasRenderer:_y,DATE:Ni,DAY:Wn,DAYOFYEAR:Ya,Dataflow:Mf,Debug:y8,Error:aC,EventStream:Pv,Gradient:cU,GroupItem:cb,HOURS:or,Handler:y$,HybridHandler:eB,HybridRenderer:Aw,Info:m8,Item:ub,MILLISECONDS:sa,MINUTES:lr,MONTH:Jn,Marks:ur,MultiPulse:DC,None:p8,Operator:wt,Parameters:Iv,Pulse:nl,QUARTER:Ri,RenderType:Vo,Renderer:Vp,ResourceLoader:mU,SECONDS:Or,SVGHandler:PU,SVGRenderer:_$,SVGStringRenderer:JU,Scenegraph:RU,TIME_UNITS:SC,Transform:J,View:BP,WEEK:un,Warn:sC,YEAR:Un,accessor:Bi,accessorFields:Kn,accessorName:qt,array:xe,ascending:Sd,bandwidthNRD:zC,bin:Z9,bootstrapCI:K9,boundClip:cB,boundContext:Hp,boundItem:xw,boundMark:TU,boundStroke:to,changeset:rc,clampRange:$8,codegenExpression:dP,compare:fC,constant:ii,cumulativeLogNormal:PC,cumulativeNormal:qv,cumulativeUniform:GC,dayofyear:r9,debounce:dC,defaultLocale:CC,definition:V9,densityLogNormal:IC,densityNormal:FC,densityUniform:HC,domChild:ln,domClear:Er,domCreate:Yo,domFind:m$,dotbin:J9,error:te,expressionFunction:Zt,extend:Pe,extent:qa,extentIndex:T8,falsy:Fo,fastmap:Ed,field:kr,flush:k8,font:pb,fontFamily:Xp,fontSize:ts,format:E1,formatLocale:ty,formats:TC,hasOwnProperty:_e,id:Tp,identity:ni,inferType:L9,inferTypes:U9,ingest:ct,inherits:ge,inrange:xf,interpolate:XM,interpolateColors:ob,interpolateRange:QL,intersect:sB,intersectBoxLine:Sf,intersectPath:t$,intersectPoint:n$,intersectRule:vU,isArray:re,isBoolean:Sl,isDate:el,isFunction:je,isIterable:D8,isNumber:st,isObject:ve,isRegExp:hC,isString:ye,isTuple:Uv,key:gC,lerp:O8,lineHeight:dl,loader:Fv,locale:z9,logger:oC,lruCache:R8,markup:E$,merge:N8,mergeConfig:bd,multiLineOffset:h$,one:vd,pad:z8,panLinear:E8,panLog:_8,panPow:w8,panSymlog:A8,parse:hme,parseExpression:ET,parseSelector:Ml,path:Vv,pathCurves:KM,pathEqual:fB,pathParse:Vf,pathRectangle:hU,pathRender:sp,pathSymbols:dU,pathTrail:gU,peek:Je,point:yb,projection:j$,quantileLogNormal:jC,quantileNormal:Hv,quantileUniform:YC,quantiles:RC,quantizeInterpolator:ZL,quarter:C8,quartiles:NC,get random(){return Rr},randomInteger:sK,randomKDE:UC,randomLCG:aK,randomLogNormal:t7,randomMixture:n7,randomNormal:LC,randomUniform:i7,read:P9,regressionConstant:XC,regressionExp:a7,regressionLinear:VC,regressionLoess:l7,regressionLog:r7,regressionPoly:o7,regressionPow:s7,regressionQuad:WC,renderModule:vb,repeat:pg,resetDefaultLocale:nZ,resetSVGDefIds:Zie,responseType:I9,runtimeContext:CP,sampleCurve:Yv,sampleLogNormal:BC,sampleNormal:jv,sampleUniform:qC,scale:lt,sceneEqual:w$,sceneFromJSON:DU,scenePickVisit:py,sceneToJSON:kU,sceneVisit:oa,sceneZOrder:i$,scheme:VM,serializeXML:WU,setHybridRendererOptions:Xie,setRandom:iK,span:kp,splitAccessPath:Ka,stringValue:he,textMetrics:ir,timeBin:S9,timeFloor:f9,timeFormatLocale:ep,timeInterval:Cd,timeOffset:g9,timeSequence:y9,timeUnitSpecifier:i9,timeUnits:EC,toBoolean:pC,toDate:mC,toNumber:Qn,toSet:aa,toString:yC,transform:W9,transforms:jf,truncate:F8,truthy:Dr,tupleid:ke,typeParsers:nw,utcFloor:d9,utcInterval:Md,utcOffset:p9,utcSequence:v9,utcdayofyear:o9,utcquarter:M8,utcweek:l9,version:pme,visitArray:Bo,week:a9,writeConfig:xd,zero:Ho,zoomLinear:lC,zoomLog:uC,zoomPow:W1,zoomSymlog:cC},Symbol.toStringTag,{value:"Module"}));function yme(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var vme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},bme={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},xme={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Sme=Array.prototype.slice,iu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Sme.call(t,1))},Eme=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return ye(e)?new Date(e):new Date(e,t,n,i,r,a,s)};var _me={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Eme,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return iu("join",arguments)},indexof:function(){return iu("indexOf",arguments)},lastindexof:function(){return iu("lastIndexOf",arguments)},slice:function(){return iu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Sd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return iu("substring",arguments,String)},split:function(){return iu("split",arguments,String)},replace:function(){return iu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const wme=["view","item","group","xy","x","y"],wA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&wA.add(setImmediate);const Ame={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:vme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),wA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||_me[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>bme[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>xme[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,wA.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function ug(e,t,n,i,r,a){const s=o=>Ame[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,wme.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var Cme={operator(e,t){const n=t.ast,i=e.functions;return r=>ug(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>ug(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>ug(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return ug(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const u=s.datum;let f=0,d;for(const h in i)d=ug(i[h].ast,r,o,u,void 0,s),s[h]!==d&&(s[h]=d,f=1);return n!=="rule"&&yme(s,i,a),f}}},Mme="6.2.0",$me={version:Mme};function WT(e){return ue(e,"or")}function QT(e){return ue(e,"and")}function ZT(e){return ue(e,"not")}function Y1(e,t){if(ZT(e))Y1(e.not,t);else if(QT(e))for(const n of e.and)Y1(n,t);else if(WT(e))for(const n of e.or)Y1(n,t);else t(e)}function Of(e,t){return ZT(e)?{not:Of(e.not,t)}:QT(e)?{and:e.and.map(n=>Of(n,t))}:WT(e)?{or:e.or.map(n=>Of(n,t))}:t(e)}const Le=structuredClone;function Ej(e){throw new Error(e)}function id(e,t){const n={};for(const i of t)_e(e,i)&&(n[i]=e[i]);return n}function ar(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>dt(e)).join(",")})`};function Ze(e){if(st(e))return e;const t=ye(e)?e:dt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function AA(e){return e===!1||e===null}function Ve(e,t){return e.includes(t)}function rd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function KT(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function _j(e,...t){for(const n of t)Tme(e,n??{});return e}function Tme(e,t){for(const n of le(t))xd(e,n,t[n],!0)}function za(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function kme(e,t){const n=le(e),i=le(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function wj(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function JT(e,t){for(const n of e)if(t.has(n))return!0;return!1}function CA(e){const t=new Set;for(const n of e){const r=Ka(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function e3(e,t){return e===void 0||t===void 0?!0:JT(CA(e),CA(t))}function At(e){return le(e).length===0}const le=Object.keys,nn=Object.values,ml=Object.entries;function Sp(e){return e===!0||e===!1}function Ot(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Wg(e,t){return ZT(e)?`!(${Wg(e.not,t)})`:QT(e)?`(${e.and.map(n=>Wg(n,t)).join(") && (")})`:WT(e)?`(${e.or.map(n=>Wg(n,t)).join(") || (")})`:t(e)}function cv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&cv(e[n],t)&&delete e[n],At(e)}function s0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function t3(e,t="datum"){const n=Ka(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(he).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function Aj(e,t="datum"){return`${t}[${he(Ka(e).join("."))}]`}function pt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Dme(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zr(e){return`${Ka(e).map(Dme).join("\\.")}`}function Gu(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Fd(e){return`${Ka(e).join(".")}`}function ad(e){return e?Ka(e).length:0}function Wt(...e){return e.find(t=>t!==void 0)}let Cj=42;function Mj(e){const t=++Cj;return e?String(e)+t:t}function Ome(){Cj=42}function $j(e){return Tj(e)?e:`__${e}`}function Tj(e){return e.startsWith("__")}function Ep(e){if(e!==void 0)return(e%360+360)%360}function jb(e){return st(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const mz=Object.getPrototypeOf(structuredClone({}));function tr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!tr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!tr(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==mz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==mz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!tr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function dt(e){const t=[];return function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const u=o[r],f=n(i[u]);f&&(a&&(a+=","),a+=`${JSON.stringify(u)}:${f}`)}return t.splice(s,1),`{${a}}`}(e)}function ue(e,t){return ve(e)&&_e(e,t)&&e[t]!==void 0}const Hs="row",Gs="column",qb="facet",Rt="x",$n="y",pa="x2",as="y2",$l="xOffset",Ld="yOffset",ma="radius",io="radius2",Ur="theta",ro="theta2",ya="latitude",va="longitude",ba="latitude2",Fr="longitude2",Tl="time",Fi="color",ss="fill",os="stroke",Li="shape",ao="size",cc="angle",so="opacity",kl="fillOpacity",Dl="strokeOpacity",Ol="strokeWidth",Rl="strokeDash",o0="text",sd="order",l0="detail",Hb="key",Yu="tooltip",Gb="href",Yb="url",Xb="description",Rme={x:1,y:1,x2:1,y2:1},kj={theta:1,theta2:1,radius:1,radius2:1};function Dj(e){return _e(kj,e)}const n3={longitude:1,longitude2:1,latitude:1,latitude2:1};function Oj(e){switch(e){case ya:return"y";case ba:return"y2";case va:return"x";case Fr:return"x2"}}function Rj(e){return _e(n3,e)}const Nme=le(n3),i3={...Rme,...kj,...n3,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Rf(e){return e===Fi||e===ss||e===os}const Nj={row:1,column:1,facet:1},Mr=le(Nj),r3={...i3,...Nj},zme=le(r3),{order:dAe,detail:hAe,tooltip:gAe,...Fme}=r3,{row:pAe,column:mAe,facet:yAe,...Lme}=Fme;function Ume(e){return _e(Lme,e)}function zj(e){return _e(r3,e)}const Bme=[pa,as,ba,Fr,ro,io];function Fj(e){return fc(e)!==e}function fc(e){switch(e){case pa:return Rt;case as:return $n;case ba:return ya;case Fr:return va;case ro:return Ur;case io:return ma}return e}function yl(e){if(Dj(e))switch(e){case Ur:return"startAngle";case ro:return"endAngle";case ma:return"outerRadius";case io:return"innerRadius"}return e}function ls(e){switch(e){case Rt:return pa;case $n:return as;case ya:return ba;case va:return Fr;case Ur:return ro;case ma:return io}}function Ui(e){switch(e){case Rt:case pa:return"width";case $n:case as:return"height"}}function Lj(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset";case pa:return"x2Offset";case as:return"y2Offset";case Ur:return"thetaOffset";case ma:return"radiusOffset";case ro:return"theta2Offset";case io:return"radius2Offset"}}function a3(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset"}}function Ime(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Pme=le(i3),{x:vAe,y:bAe,x2:xAe,y2:SAe,xOffset:EAe,yOffset:_Ae,latitude:wAe,longitude:AAe,latitude2:CAe,longitude2:MAe,theta:$Ae,theta2:TAe,radius:kAe,radius2:DAe,...s3}=i3,jme=le(s3),o3={x:1,y:1},oo=le(o3);function Qt(e){return _e(o3,e)}const l3={theta:1,radius:1},qme=le(l3);function Vb(e){return e==="width"?Rt:$n}const Uj={xOffset:1,yOffset:1};function u0(e){return _e(Uj,e)}const Hme={time:1};function i_(e){return e in Hme}const{text:OAe,tooltip:RAe,href:NAe,url:zAe,description:FAe,detail:LAe,key:UAe,order:BAe,...Bj}=s3,Gme=le(Bj);function Yme(e){return _e(s3,e)}function Xme(e){switch(e){case Fi:case ss:case os:case ao:case Li:case so:case Ol:case Rl:return!0;case kl:case Dl:case cc:case Tl:return!1}}const Ij={...o3,...l3,...Uj,...Bj},u3=le(Ij);function us(e){return _e(Ij,e)}function Vme(e,t){return Qme(e)[t]}const Pj={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:IAe,...Wme}=Pj;function Qme(e){switch(e){case Fi:case ss:case os:case Xb:case l0:case Hb:case Yu:case Gb:case sd:case so:case kl:case Dl:case Ol:case qb:case Hs:case Gs:return Pj;case Rt:case $n:case $l:case Ld:case ya:case va:case Tl:return Wme;case pa:case as:case ba:case Fr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ao:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Rl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Li:return{point:"always",geoshape:"always"};case o0:return{text:"always"};case cc:return{point:"always",square:"always",text:"always"};case Yb:return{image:"always"};case Ur:return{text:"always",arc:"always"};case ma:return{text:"always",arc:"always"};case ro:case io:return{arc:"always"}}}function r_(e){switch(e){case Rt:case $n:case Ur:case ma:case $l:case Ld:case ao:case cc:case Ol:case so:case kl:case Dl:case Tl:case pa:case as:case ro:case io:return;case qb:case Hs:case Gs:case Li:case Rl:case o0:case Yu:case Gb:case Yb:case Xb:return"discrete";case Fi:case ss:case os:return"flexible";case ya:case va:case ba:case Fr:case l0:case Hb:case sd:return}}const Zme={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Kme={count:1,min:1,max:1};function Ks(e){return ue(e,"argmin")}function Nl(e){return ue(e,"argmax")}function c3(e){return ye(e)&&_e(Zme,e)}const Jme=new Set(["count","valid","missing","distinct"]);function Wb(e){return ye(e)&&Jme.has(e)}function e1e(e){return ye(e)&&Ve(["min","max"],e)}const t1e=new Set(["count","sum","distinct","valid","missing"]),n1e=new Set(["mean","average","median","q1","q3","min","max"]);function jj(e){return Sl(e)&&(e=ox(e,void 0)),`bin${le(e).map(t=>Qb(e[t])?Ot(`_${t}_${ml(e[t])}`):Ot(`_${t}_${e[t]}`)).join("")}`}function Mt(e){return e===!0||dc(e)&&!e.binned}function On(e){return e==="binned"||dc(e)&&e.binned===!0}function dc(e){return ve(e)}function Qb(e){return ue(e,"param")}function yz(e){switch(e){case Hs:case Gs:case ao:case Fi:case ss:case os:case Ol:case so:case kl:case Dl:case Li:return 6;case Rl:return 4;default:return 10}}function c0(e){return ue(e,"expr")}function Rn(e,{level:t}={level:0}){const n=le(e||{}),i={};for(const r of n)i[r]=t===0?Ji(e[r]):Rn(e[r],{level:t-1});return i}function qj(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:u,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...u?{subtitleColor:u}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function qo(e){return ye(e)||re(e)&&ye(e[0])}function Me(e){return ue(e,"signal")}function hc(e){return ue(e,"step")}function i1e(e){return re(e)?!1:ue(e,"fields")&&!ue(e,"data")}function r1e(e){return re(e)?!1:ue(e,"fields")&&ue(e,"data")}function Is(e){return re(e)?!1:ue(e,"field")&&ue(e,"data")}const a1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},s1e=le(a1e),o1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},MA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],l1e=" – ";function Hj(e){const t=re(e.condition)?e.condition.map(vz):vz(e.condition);return{...Ji(e),condition:t}}function Ji(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vz(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Me(e)?e:e!==void 0?{value:e}:void 0}function u1e(e){return Me(e)?e.signal:he(e)}function bz(e){return Me(e)?e.signal:he(e.value)}function ta(e){return Me(e)?e.signal:e==null?null:he(e)}function c1e(e,t,n){for(const i of n){const r=Wa(i,t.markDef,t.config);r!==void 0&&(e[i]=Tt(r))}return e}function Gj(e){return[].concat(e.type,e.style??[])}function St(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ue(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Wa(e,t,n,i)}function Wa(e,t,n,{vgChannel:i}={}){const r=$A(e,t,n.style);return Wt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function $A(e,t,n){return Yj(e,Gj(t),n)}function Yj(e,t,n){t=xe(t);let i;for(const r of t){const a=n[r];ue(a,e)&&(i=a[e])}return i}function Xj(e,t){return xe(e).reduce((n,i)=>(n.field.push(pe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function Vj(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(tr(r,i))return;n.push(i)}),n}function Wj(e,t){return tr(e,t)||!t?e:e?[...xe(e),...xe(t)].join(", "):t}function Qj(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((qo(n)||Me(n))&&(qo(i)||Me(i)))return{explicit:e.explicit,value:Wj(n,i)};if(qo(n)||Me(n))return{explicit:e.explicit,value:n};if(qo(i)||Me(i))return{explicit:e.explicit,value:i};if(!qo(n)&&!Me(n)&&!qo(i)&&!Me(i))return{explicit:e.explicit,value:Vj(n,i)};throw new Error("It should never reach here")}function f3(e){return`Invalid specification ${dt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const f1e='Autosize "fit" only works for single views and layered views.';function xz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Sz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ez(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ui(e)}.`:'Dropping "fit" because spec has discrete size.'}function d3(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _z(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function d1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function h1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function Zj(e){return`Selection not supported for ${e} yet.`}function g1e(e){return`Cannot find a selection named "${e}".`}const p1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",m1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",y1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function v1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function b1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const x1e="The same selection must be used to override scale domains in a layered view.",S1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function E1e(e){return`Unknown repeated value "${e}".`}function wz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const _1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",h3="Animation involving facet, layer, or concat is currently unsupported.";function w1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${he(e)}.`}function A1e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${he(t)} encoding found for selection ${he(n.param)}. Using "field": ${he(i)}.`}const C1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function M1e(e){return`Unrecognized parse "${e}".`}function Az(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const $1e="Attempt to add the same child twice.";function T1e(e){return`Ignoring an invalid transform: ${dt(e)}.`}const k1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Cz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function D1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${dt(t)} is overridden by a child projection ${dt(n)}.`}const O1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function R1e(e){return`${e}Offset dropped because ${e} is continuous`}function N1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${dt(n)}}.`}function Kj(e){return`Invalid field type "${e}".`}function z1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function F1e(e){return`Invalid aggregation operator "${e}".`}function Jj(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function L1e(e){return`Position range does not support relative band size for ${e}.`}function TA(e,t){return`Dropping ${dt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const U1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Zb(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function B1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function I1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function P1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function j1e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function a_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function q1e(e){return`The ${e} for range marks cannot be an expression`}function H1e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function G1e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Y1e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function X1e(e){return`Cannot use the relative band size with ${e} scale.`}function V1e(e){return`Using unaggregated domain with raw field has no effect (${dt(e)}).`}function W1e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Q1e(e){return`Unaggregated domain is currently unsupported for log scale (${dt(e)}).`}function Z1e(e){return`Cannot apply size to non-oriented mark "${e}".`}function K1e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function J1e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function eq(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function tq(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function eye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using ${dt(n)}.`}function tye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using the union of the two domains.`}function nye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function iye(e){return`Dropping sort property ${dt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Mz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",rye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",aye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",sye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function oye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function lye(e){return`Stack is applied to a non-linear scale (${e}).`}function uye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function fv(e,t){return`Invalid ${e}: ${dt(t)}.`}function cye(e){return`Dropping day from datetime ${dt(e)} as day cannot be combined with other units.`}function fye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function dye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function hye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function $z(e){return`1D error band does not support ${e}.`}function nq(e){return`Channel ${e} is required for "binned" bin.`}function gye(e){return`Channel ${e} should not be used with "binned" bin.`}function pye(e){return`Domain for ${e} is required for threshold scale.`}const iq=oC(sC);let Xu=iq;function mye(e){return Xu=e,Xu}function yye(){return Xu=iq,Xu}function g3(...e){Xu.error(...e)}function fe(...e){Xu.warn(...e)}function vye(...e){Xu.debug(...e)}function gc(e){if(e&&ve(e)){for(const t of m3)if(ue(e,t))return!0}return!1}const rq=["january","february","march","april","may","june","july","august","september","october","november","december"],bye=rq.map(e=>e.substr(0,3)),aq=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],xye=aq.map(e=>e.substr(0,3));function Sye(e){if(jb(e)&&(e=+e),st(e))return e>4&&fe(fv("quarter",e)),e-1;throw new Error(fv("quarter",e))}function Eye(e){if(jb(e)&&(e=+e),st(e))return e-1;{const t=e.toLowerCase(),n=rq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=bye.indexOf(i);if(r!==-1)return r;throw new Error(fv("month",e))}}function _ye(e){if(jb(e)&&(e=+e),st(e))return e%7;{const t=e.toLowerCase(),n=aq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=xye.indexOf(i);if(r!==-1)return r;throw new Error(fv("day",e))}}function p3(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(fe(cye(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Eye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Sye(e.quarter):e.quarter;n.push(st(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?_ye(e.day):e.day;n.push(st(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Vu(e){const n=p3(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function wye(e){const n=p3(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Aye(e){const t=p3(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const sq={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},m3=le(sq);function Cye(e){return _e(sq,e)}function pc(e){return ve(e)?e.binned:oq(e)}function oq(e){return e?.startsWith("binned")}function y3(e){return e.startsWith("utc")}function Mye(e){return e.substring(3)}const $ye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Kb(e){return m3.filter(t=>uq(e,t))}function lq(e){const t=Kb(e);return t[t.length-1]}function uq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Tye(e,t,{end:n}={end:!1}){const i=t3(t),r=y3(e)?"utc":"";function a(u){return u==="quarter"?`(${r}quarter(${i})-1)`:`${r}${u}(${i})`}let s;const o={};for(const u of m3)uq(e,u)&&(o[u]=a(u),s=u);return n&&(o[s]+="+1"),wye(o)}function cq(e){if(!e)return;const t=Kb(e);return`timeUnitSpecifier(${dt(t)}, ${dt($ye)})`}function kye(e,t,n){if(!e)return;const i=cq(e);return`${n||y3(e)?"utc":"time"}Format(${t}, ${i})`}function An(e){if(!e)return;let t;return ye(e)?oq(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ve(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),y3(t.unit)&&(t.utc=!0,t.unit=Mye(t.unit)),t}function Dye(e){const{utc:t,...n}=An(e);return n.unit?(t?"utc":"")+le(n).map(i=>Ot(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(i=>Ot(`_${i}_${n[i]}`)).join("")}`}function fq(e,t=n=>n){const n=An(e),i=lq(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=dq(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Vu(o))} - ${t(Vu(r))}`}}const Oye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Rye(e){return _e(Oye,e)}function dq(e,t=1){if(Rye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Nye(e){return ue(e,"param")}function v3(e){return!!e?.field&&e.equal!==void 0}function b3(e){return!!e?.field&&e.lt!==void 0}function x3(e){return!!e?.field&&e.lte!==void 0}function S3(e){return!!e?.field&&e.gt!==void 0}function E3(e){return!!e?.field&&e.gte!==void 0}function _3(e){if(e?.field){if(re(e.range)&&e.range.length===2)return!0;if(Me(e.range))return!0}return!1}function w3(e){return!!e?.field&&(re(e.oneOf)||re(e.in))}function zye(e){return!!e?.field&&e.valid!==void 0}function hq(e){return w3(e)||v3(e)||_3(e)||b3(e)||S3(e)||x3(e)||E3(e)}function Ma(e,t){return lx(e,{timeUnit:t,wrapTime:!0})}function Fye(e,t){return e.map(n=>Ma(n,t))}function gq(e,t=!0){const{field:n}=e,i=An(e.timeUnit),{unit:r,binned:a}=i||{},s=pe(e,{expr:"datum"}),o=r?`time(${a?s:Tye(r,n)})`:s;if(v3(e))return`${o}===${Ma(e.equal,r)}`;if(b3(e)){const u=e.lt;return`${o}<${Ma(u,r)}`}else if(S3(e)){const u=e.gt;return`${o}>${Ma(u,r)}`}else if(x3(e)){const u=e.lte;return`${o}<=${Ma(u,r)}`}else if(E3(e)){const u=e.gte;return`${o}>=${Ma(u,r)}`}else{if(w3(e))return`indexof([${Fye(e.oneOf,r).join(",")}], ${o}) !== -1`;if(zye(e))return Jb(o,e.valid);if(_3(e)){const{range:u}=Rn(e),f=Me(u)?{signal:`${u.signal}[0]`}:u[0],d=Me(u)?{signal:`${u.signal}[1]`}:u[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${Ma(f,r)}, ${Ma(d,r)}])`;const h=[];return f!==null&&h.push(`${o} >= ${Ma(f,r)}`),d!==null&&h.push(`${o} <= ${Ma(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${dt(e)}`)}function Jb(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Lye(e){return hq(e)&&e.timeUnit?{...e,timeUnit:An(e.timeUnit)}:e}const f0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Uye(e){return e==="quantitative"||e==="temporal"}function pq(e){return e==="ordinal"||e==="nominal"}const Wu=f0.quantitative,A3=f0.ordinal,od=f0.temporal,C3=f0.nominal,Ud=f0.geojson;function Bye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Wu:return"quantitative";case"t":case od:return"temporal";case"o":case A3:return"ordinal";case"n":case C3:return"nominal";case Ud:return"geojson"}}const Nn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},kA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Iye(e,t){const n=kA[e],i=kA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Pye={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Tz(e){return Pye[e]}const mq=new Set(["linear","log","pow","sqrt","symlog"]),yq=new Set([...mq,"time","utc"]);function vq(e){return mq.has(e)}const bq=new Set(["quantile","quantize","threshold"]),jye=new Set([...yq,...bq,"sequential","identity"]),qye=new Set(["ordinal","bin-ordinal","point","band"]);function Cn(e){return qye.has(e)}function la(e){return jye.has(e)}function Fa(e){return yq.has(e)}function ld(e){return bq.has(e)}const Hye={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Gye(e){return!ye(e)&&ue(e,"name")}function xq(e){return ue(e,"param")}function Yye(e){return ue(e,"unionWith")}function Xye(e){return ve(e)&&"field"in e}const Vye={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:PAe,domain:jAe,range:qAe,rangeMax:HAe,rangeMin:GAe,scheme:YAe,...Wye}=Vye,Qye=le(Wye);function DA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Fa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Fa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Fa(e);case"nice":return Fa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return la(e)&&!Ve(["log","time","utc","threshold","quantile"],e)}}function Sq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Rf(e)?void 0:Y1e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Zye(e,t){return Ve([A3,C3],t)?e===void 0||Cn(e):t===od?Ve([Nn.TIME,Nn.UTC,void 0],e):t===Wu?vq(e)||ld(e)||e===void 0:!0}function Kye(e,t,n=!1){if(!us(e))return!1;switch(e){case Rt:case $n:case $l:case Ld:case Ur:case ma:return Fa(t)||t==="band"?!0:t==="point"?!n:!1;case Tl:return Ve(["linear","band"],t);case ao:case Ol:case so:case kl:case Dl:case cc:return Fa(t)||ld(t)||Ve(["band","point","ordinal"],t);case Fi:case ss:case os:return t!=="band";case Rl:case Li:return t==="ordinal"||ld(t)}}function Jye(e){return ve(e)&&"value"in e}const Si={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Eq=Si.arc,ex=Si.area,tx=Si.bar,eve=Si.image,nx=Si.line,ix=Si.point,tve=Si.rect,dv=Si.rule,_q=Si.text,M3=Si.tick,nve=Si.trail,$3=Si.circle,T3=Si.square,wq=Si.geoshape;function zl(e){return["line","area","trail"].includes(e)}function _p(e){return["rect","bar","image","arc","tick"].includes(e)}const ive=new Set(le(Si));function Qa(e){return ue(e,"type")}const rve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ave=["fill","fillOpacity"],sve=[...rve,...ave],ove={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},kz=le(ove),s_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],lve={area:["line","point"],bar:s_,rect:s_,line:["point"],tick:["bandSize","thickness",...s_]},uve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},cve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Aq=le(cve);function Qu(e){return ue(e,"band")}const fve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},dve=5,k3={binSpacing:0,continuousBandSize:dve,minBandSize:.25,timeUnitBandPosition:.5},hve={...k3,binSpacing:1},gve={...k3,thickness:1};function pve(e){return Qa(e)?e.type:e}function Cq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function D3({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!la(i)||r)return"always-valid";const a=Cq(St("invalid",e,t),{isPath:zl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function mve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Mq({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function $q({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=ca(t),u=Wb(o?.aggregate),f=D3({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:u});if(o&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:Jb(pe(o,{expr:"datum"}),!1),...yve(d,n,i)}}}function yve(e,t,n){if(Jye(e)){const{value:i}=e;return Me(i)?{signal:i.signal}:{value:i}}return Mq({scale:t,scaleName:n,mode:"zeroOrMin"})}function O3(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=fc(t),u=R3(e),f=$q({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,u]:u}function vve(e){const{datum:t}=e;return gc(t)?Vu(t):`${dt(t)}`}function $u(e,t,n,i){const r={};if(t&&(r.scale=t),cs(e)){const{datum:a}=e;gc(a)?r.signal=Vu(a):Me(a)?r.signal=a.signal:c0(a)?r.signal=a.expr:r.value=a}else r.field=pe(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function hv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!Me(s)&&0<s&&s<1?"datum":void 0,u=pe(t,{expr:o,suffix:r}),f=n!==void 0?pe(n,{expr:o}):pe(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?u:f;d.field=h}else{const h=Me(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${f}`:`${1-s} * ${u} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function bve({scaleName:e,fieldDef:t}){const n=pe(t,{expr:"datum"}),i=pe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function R3({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f,bandPosition:d}){if(t){if(Be(t)){const h=s?.get("type");if(bi(t)){d??=vl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Mt(p)||d&&y&&v===od)return o?.impute?$u(t,a,{binSuffix:"mid"},{offset:u}):d&&!Cn(h)?hv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:u}):$u(t,a,m0(t,e)?{binSuffix:"range"}:{},{offset:u});if(On(p)){if(de(n))return hv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:u});fe(nq(e===Rt?pa:as))}}return $u(t,a,Cn(h)?{binSuffix:"range"}:{},{offset:u,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(ua(t)){const h=t.value,p=u?{offset:u}:{};return{...Qg(e,h),...p}}}return je(f)&&(f=f()),f&&{...f,...u?{offset:u}:{}}}function Qg(e,t){return Ve(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ve(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function Zu(e){return e&&e!=="number"&&e!=="time"}function Tq(e,t,n){return`${e}(${t}${n?`, ${dt(n)}`:""})`}function N3({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Zu(n))return na({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=kq(e,i,r),o=ud(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return na({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return na({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&de(e)&&e.timeUnit===void 0)return na({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function u(f){return de(f)?An(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(fd(e)){const{unit:f,utc:d}=u(e),h=Sve({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||mc(e)&&e.scale?.type===Nn.UTC});return h?{signal:h}:void 0}if(t=OA({type:o,specifiedFormat:t,config:a,normalizeStack:r}),de(e)&&Mt(e.bin)){const f=pe(e,{expr:i,binSuffix:"end"});return{signal:d0(s,f,t,n,a)}}else return t||ud(e)==="quantitative"?{signal:`${Rq(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function kq(e,t,n){return de(e)?n?`${pe(e,{expr:t,suffix:"end"})}-${pe(e,{expr:t,suffix:"start"})}`:pe(e,{expr:t}):vve(e)}function na({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=kq(e,i,r),s!=="datum.value"&&de(e)&&Mt(e.bin)){const o=pe(e,{expr:i,binSuffix:"end"});return{signal:d0(s,o,t,n,a)}}return{signal:Tq(n,s,t)}}function Dq(e,t,n,i,r,a){if(!(ye(i)&&Zu(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&ud(e)==="quantitative"&&(r.normalizedNumberFormatType&&cd(e)&&e.stack==="normalize"||r.numberFormatType))){if(cd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return OA({type:"quantitative",config:r,normalizeStack:!0});if(fd(e)){const s=de(e)?An(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:xve({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return OA({type:t,specifiedFormat:n,config:r})}}function Oq(e,t,n){if(e&&(Me(e)||e==="number"||e==="time"))return e;if(fd(t)&&n!=="time"&&n!=="utc")return de(t)&&An(t?.timeUnit)?.utc?"utc":"time"}function OA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(ye(t))return t;if(e===Wu)return i?n.normalizedNumberFormat:n.numberFormat}function xve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:cq(t)}:i?void 0:n.timeFormat)}function Rq(e,t){return`format(${e}, "${t||""}")`}function Dz(e,t,n,i){return Zu(n)?Tq(n,e,t):Rq(e,(ye(t)?t:void 0)??i.numberFormat)}function d0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return d0(e,t,r.numberFormat,r.numberFormatType,r);const a=Dz(e,n,i,r),s=Dz(t,n,i,r);return`${Jb(e,!1)} ? "null" : ${a} + "${l1e}" + ${s}`}function Sve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${dt(n)})`:(n=ye(n)?n:r,`${a?"utc":"time"}Format(${e}, ${dt(n)})`):kye(t,e,a)}const rx="min",Eve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Oz(e){return _e(Eve,e)}function _ve(e){return ue(e,"encoding")}function Ys(e){return e&&(e.op==="count"||ue(e,"field"))}function Nq(e){return e&&re(e)}function h0(e){return ue(e,"row")||ue(e,"column")}function z3(e){return ue(e,"header")}function ax(e){return ue(e,"facet")}function wve(e){return ue(e,"param")}function Ave(e){return!ye(e)&&ue(e,"repeat")}function Rz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function F3(e){return ue(e,"sort")}function vl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Be(e)&&e.bandPosition!==void 0)return e.bandPosition;if(de(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Wa("timeUnitBandPosition",n,i);if(Mt(a))return .5}}function zq({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=Ui(e),u=St(s?"size":o,i,r,{vgChannel:o});if(u!==void 0)return u;if(de(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Wa("timeUnitBandSize",i,r)};if(Mt(d)&&!Cn(a))return{band:1}}if(_p(i.type))return a?Cn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function Fq(e,t,n,i){return Mt(e.bin)||e.timeUnit&&bi(e)&&e.type==="temporal"?vl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function Lq(e){return ue(e,"sort")&&!ue(e,"field")}function g0(e){return ue(e,"condition")}function sx(e){const t=e?.condition;return!!t&&!re(t)&&de(t)}function p0(e){const t=e?.condition;return!!t&&!re(t)&&Be(t)}function Cve(e){const t=e?.condition;return!!t&&(re(t)||ua(t))}function de(e){return ue(e,"field")||e?.aggregate==="count"}function ud(e){return e?.type}function cs(e){return ue(e,"datum")}function Jo(e){return bi(e)&&!pv(e)||gv(e)}function Nz(e){return bi(e)&&e.type==="quantitative"&&!e.bin||gv(e)}function gv(e){return cs(e)&&st(e.datum)}function Be(e){return de(e)||cs(e)}function bi(e){return e&&(ue(e,"field")||e.aggregate==="count")&&ue(e,"type")}function ua(e){return ue(e,"value")}function mc(e){return ue(e,"scale")||ue(e,"sort")}function cd(e){return ue(e,"axis")||ue(e,"stack")||ue(e,"impute")}function Uq(e){return ue(e,"legend")}function Bq(e){return ue(e,"format")||ue(e,"formatType")}function Mve(e){return ar(e,["legend","axis","header","scale"])}function $ve(e){return ue(e,"op")}function pe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(kve(e))n=$j("count");else{let s;if(!t.nofn)if($ve(e))s=e.op;else{const{bin:o,aggregate:u,timeUnit:f}=e;Mt(o)?(s=jj(o),r=(t.binSuffix??"")+(t.suffix??"")):u?Nl(u)?(a=`["${n}"]`,n=`argmax_${u.argmax}`):Ks(u)?(a=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):f&&!pc(f)&&(s=Dye(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Fd(n):t.expr?Aj(n,t.expr)+a:zr(n)+a}function pv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return de(e)&&!!e.bin;case"temporal":return!1}throw new Error(Kj(e.type))}function Tve(e){return mc(e)&&ld(e.scale?.type)}function kve(e){return e.aggregate==="count"}function Dve(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Mt(i))return`${n} (binned)`;if(r&&!pc(r)){const s=An(r)?.unit;if(s)return`${n} (${Kb(s).join("-")})`}else if(a)return Nl(a)?`${n} for max ${a.argmax}`:Ks(a)?`${n} for min ${a.argmin}`:`${s0(a)} of ${n}`;return n}function Ove(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Nl(t))return`${r} for argmax(${t.argmax})`;if(Ks(t))return`${r} for argmin(${t.argmin})`;const a=i&&!pc(i)?An(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Mt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const Iq=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Ove(e);default:return Dve(e,t)}};let Pq=Iq;function jq(e){Pq=e}function Rve(){jq(Iq)}function Nf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=L3(e)?.title;if(!de(e))return r??e.title;const a=e,s=i?U3(a,t):void 0;return n?Wt(r,a.title,s):r??a.title??s}function L3(e){if(cd(e)&&e.axis)return e.axis;if(Uq(e)&&e.legend)return e.legend;if(z3(e)&&e.header)return e.header}function U3(e,t){return Pq(e,t)}function mv(e){if(Bq(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=L3(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Nve(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(F3(e)&&re(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Nl(n)&&!Ks(n))return"quantitative";if(mc(e)&&e.scale?.type)switch(kA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ca(e){if(de(e))return e;if(sx(e))return e.condition}function cn(e){if(Be(e))return e;if(p0(e))return e.condition}function qq(e,t,n,i={}){if(ye(e)||st(e)||Sl(e)){const r=ye(e)?"string":st(e)?"number":"boolean";return fe(N1e(t,r,e)),{value:e}}return Be(e)?yv(e,t,n,i):p0(e)?{...e,condition:yv(e.condition,t,n,i)}:e}function yv(e,t,n,i){if(Bq(e)){const{format:r,formatType:a,...s}=e;if(Zu(a)&&!n.customFormatTypes)return fe(Cz(t)),yv(s,t,n,i)}else{const r=cd(e)?"axis":Uq(e)?"legend":z3(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Zu(s)&&!n.customFormatTypes)return fe(Cz(t)),yv({...e,[r]:o},t,n,i)}}return de(e)?B3(e,t,i):zve(e)}function zve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=st(n)?"quantitative":ye(n)?"nominal":gc(n)?"temporal":void 0,{...e,type:t}}function B3(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!c3(i)&&!Nl(i)&&!Ks(i)&&(fe(F1e(i)),delete o.aggregate),r&&(o.timeUnit=An(r)),s&&(o.field=`${s}`),Mt(a)&&(o.bin=ox(a,t)),On(a)&&!Qt(t)&&fe(gye(t)),bi(o)){const{type:u}=o,f=Bye(u);u!==f&&(o.type=f),u!=="quantitative"&&Wb(i)&&(fe(z1e(u,i)),o.type="quantitative")}else if(!Fj(t)){const u=Nve(o,t);o.type=u}if(bi(o)){const{compatible:u,warning:f}=Fve(o,t)||{};u===!1&&fe(f)}if(F3(o)&&ye(o.sort)){const{sort:u}=o;if(Oz(u))return{...o,sort:{encoding:u}};const f=u.substring(1);if(u.charAt(0)==="-"&&Oz(f))return{...o,sort:{encoding:f,order:"descending"}}}if(z3(o)){const{header:u}=o;if(u){const{orient:f,...d}=u;if(f)return{...o,header:{...d,labelOrient:u.labelOrient||f,titleOrient:u.titleOrient||f}}}}return o}function ox(e,t){return Sl(e)?{maxbins:yz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:yz(t)}:e}const gf={compatible:!0};function Fve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Hs:case Gs:case qb:return pv(e)?gf:{compatible:!1,warning:I1e(t)};case Rt:case $n:case $l:case Ld:case Fi:case ss:case os:case o0:case l0:case Hb:case Yu:case Gb:case Yb:case cc:case Ur:case ma:case Xb:return gf;case va:case Fr:case ya:case ba:return n!==Wu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:gf;case so:case kl:case Dl:case Ol:case ao:case ro:case io:case pa:case as:case Tl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:gf;case Li:case Rl:return!pv(e)&&!Tve(e)?{compatible:!1,warning:P1e(t)}:gf;case sd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:gf}}function fd(e){const{formatType:t}=mv(e);return t==="time"||!t&&Lve(e)}function Lve(e){return e&&(e.type==="temporal"||de(e)&&!!e.timeUnit)}function lx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&An(t)?.unit;let s=a||n==="temporal",o;return c0(e)?o=e.expr:Me(e)?o=e.signal:gc(e)?(s=!0,o=Vu(e)):(ye(e)||st(e))&&s&&(o=`datetime(${dt(e)})`,Cye(a)&&(st(e)&&e<1e4||ye(e)&&isNaN(Date.parse(e)))&&(o=Vu({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:dt(e)}function Hq(e,t){const{type:n}=e;return t.map(i=>{const r=de(e)&&!pc(e.timeUnit)?e.timeUnit:void 0,a=lx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function m0(e,t){return Mt(e.bin)?us(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zz={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function y0(e){return e?.condition}const Gq=["domain","grid","labels","ticks","title"],Uve={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Yq={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Bve={...Yq,style:1,labelExpr:1,encoding:1};function Fz(e){return _e(Bve,e)}const Ive={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Xq=le(Ive);function lo(e){return ue(e,"mark")}class ux{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return lo(t)?pve(t.mark)===this.name:!1}}function Tu(e,t){const n=e?.[t];return n?re(n)?rd(n,i=>!!i.field):de(n)||sx(n):!1}function Vq(e,t){const n=e?.[t];return n?re(n)?rd(n,i=>!!i.field):de(n)||cs(n)||p0(n):!1}function Wq(e,t){if(Qt(t)){const n=e[t];if((de(n)||cs(n))&&(pq(n.type)||de(n)&&n.timeUnit)){const i=a3(t);return Vq(e,i)}}return!1}function Qq(e){return rd(zme,t=>{if(Tu(e,t)){const n=e[t];if(re(n))return rd(n,i=>!!i.aggregate);{const i=ca(n);return i&&!!i.aggregate}}return!1})}function Zq(e,t){const n=[],i=[],r=[],a=[],s={};return I3(e,(o,u)=>{if(de(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=L3(o)?.title;let S=pe(o,{forAs:!0});const _={...b?[]:{title:Nf(o,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Nl(d)?(w="argmax",S=pe({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):Ks(d)?(w="argmin",S=pe({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),bi(o)&&Mt(h)){if(i.push({bin:h,field:f,as:S}),n.push(pe(o,{binSuffix:"end"})),m0(o,u)&&n.push(pe(o,{binSuffix:"range"})),Qt(u)){const w={field:`${S}_end`};s[`${u}2`]=w}_.bin="binned",Fj(u)||(_.type=Wu)}else if(p&&!pc(p)){r.push({timeUnit:p,field:f,as:S});const w=bi(o)&&o.type!==od&&"time";w&&(u===o0||u===Yu?_.formatType=w:Yme(u)?_.legend={formatType:w,..._.legend}:Qt(u)&&(_.axis={formatType:w,..._.axis}))}s[u]=_}else n.push(f),s[u]=e[u]}else s[u]=e[u]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Pve(e,t,n){const i=Vme(t,n);if(i){if(i==="binned"){const r=e[t===pa?Rt:$n];return!!(de(r)&&de(e[t])&&On(r.bin))}}else return!1;return!0}function jve(e,t,n,i){const r={};for(const a of le(e))zj(a)||fe(B1e(a));for(let a of Pme){if(!e[a])continue;const s=e[a];if(u0(a)){const o=Ime(a),u=r[o];if(de(u)&&Uye(u.type)&&de(s)&&!u.timeUnit){fe(R1e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(fe(O1e),a=Ur),!Pve(e,a,t)){fe(Zb(a,t));continue}if(a===ao&&t==="line"&&ca(e[a])?.aggregate){fe(U1e);continue}if(a===Fi&&(n?"fill"in e:"stroke"in e)){fe(Jj("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===l0||a===sd&&!re(s)&&!ua(s)||a===Yu&&re(s)){if(s){if(a===sd){const o=e[a];if(Lq(o)){r[a]=o;continue}}r[a]=xe(s).reduce((o,u)=>(de(u)?o.push(B3(u,a)):fe(TA(u,a)),o),[])}}else{if(a===Yu&&s===null)r[a]=null;else if(!de(s)&&!cs(s)&&!ua(s)&&!g0(s)&&!Me(s)){fe(TA(s,a));continue}r[a]=qq(s,a,i)}}return r}function cx(e,t){const n={};for(const i of le(e)){const r=qq(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function qve(e){const t=[];for(const n of le(e))if(Tu(e,n)){const i=e[n],r=xe(i);for(const a of r)de(a)?t.push(a):sx(a)&&t.push(a.condition)}return t}function I3(e,t,n){if(e)for(const i of le(e)){const r=e[i];if(re(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Hve(e,t,n,i){return e?le(e).reduce((r,a)=>{const s=e[a];return re(s)?s.reduce((o,u)=>t.call(i,o,u,a),r):t.call(i,r,s,a)},n):n}function Kq(e,t){return le(t).reduce((n,i)=>{switch(i){case Rt:case $n:case Gb:case Xb:case Yb:case pa:case as:case $l:case Ld:case Ur:case ro:case ma:case io:case Tl:case ya:case va:case ba:case Fr:case o0:case Li:case cc:case Yu:return n;case sd:if(e==="line"||e==="trail")return n;case l0:case Hb:{const r=t[i];if(re(r)||de(r))for(const a of xe(r))a.aggregate||n.push(pe(a,{}));return n}case ao:if(e==="trail")return n;case Fi:case ss:case os:case so:case kl:case Dl:case Rl:case Ol:{const r=ca(t[i]);return r&&!r.aggregate&&n.push(pe(r,{})),n}}},[])}function Gve(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(re(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return re(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function RA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const u=i?` of ${P3(t)}`:"";return{field:s+t.field,type:t.type,title:Me(o)?{signal:`${o}"${escape(u)}"`}:o+u}}),a=qve(n).map(Mve);return{tooltip:[...r,...za(a,Ze)]}}function P3(e){const{title:t,field:n}=e;return Wt(t,n)}function j3(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:u,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=P3(n);return Jq(e,o,r,{mark:u,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...ye(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function Jq(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...Qa(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...Sl(e[t])?{}:e[t]}}]:[]}function eH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],u=i[`${r}Error2`];return{continuousAxisChannelDef:f1(a,n),continuousAxisChannelDef2:f1(s,n),continuousAxisChannelDefError:f1(o,n),continuousAxisChannelDefError2:f1(u,n),continuousAxis:r}}function f1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&fe(hye(n,t)),i}else return e}function tH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Qa(n)&&n.orient)return n.orient;if(Jo(r)){if(Jo(a)){const s=de(r)&&r.aggregate,o=de(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return fd(a)&&!fd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Jo(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const vv="boxplot",Yve=["box","median","outliers","rule","ticks"],Xve=new ux(vv,iH);function nH(e){return st(e)?"tukey":e}function iH(e,{config:t}){e={...e,encoding:cx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=Qa(n)?n:{type:n};r&&fe(Zj("boxplot"));const u=o.extent??t.boxplot.extent,f=St("size",o,t),d=o.invalid,h=nH(u),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:M,customTooltipWithoutAggregatedField:k}=Vve(e,u,t),T=Fd(b.field),{color:O,size:N,...B}=A,L=Jt=>j3(o,S,b,Jt,t.boxplot),G=L(B),H=L(A),I=(ve(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=L({...B,...N?{size:N}:{},color:{condition:{test:`${pt(`lower_box_${b.field}`)} >= ${pt(`upper_box_${b.field}`)}`,...O||{value:I}}}}),R=RA([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),P={type:"tick",color:"black",opacity:1,orient:C,invalid:d,aria:!1},X=h==="min-max"?R:RA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),K=[...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:X})],z=[...h!=="tukey"?K:[],...H({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...F({partName:"median",mark:{type:"tick",invalid:d,...ve(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:z};const W=pt(`lower_box_${b.field}`),ne=pt(`upper_box_${b.field}`),se=`(${ne} - ${W})`,me=`${W} - ${u} * ${se}`,Se=`${ne} + ${u} * ${se}`,Ce=pt(b.field),Ht={joinaggregate:rH(b.field),groupby:_},nt={transform:[{filter:`(${me} <= ${Ce}) && (${Ce} <= ${Se})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},...w],groupby:_}],layer:K},{tooltip:be,...Ue}=B,{scale:Ie,axis:ce}=b,Gt=P3(b),it=Jq(o,"outliers",t.boxplot,{transform:[{filter:`(${Ce} < ${me}) || (${Ce} > ${Se})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...Gt!==void 0?{title:Gt}:{},...Ie!==void 0?{scale:Ie}:{},...ce!==void 0?{axis:ce}:{}},...Ue,...O?{color:O}:{},...k?{tooltip:k}:{}}})[0];let Kt;const gn=[...p,...y,Ht];return it?Kt={transform:gn,layer:[it,nt]}:(Kt=nt,Kt.transform.unshift(...gn)),{...s,layer:[Kt,{transform:v,layer:z}]}}function rH(e){const t=Fd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Vve(e,t,n){const i=tH(e,vv),{continuousAxisChannelDef:r,continuousAxis:a}=eH(e,i,vv),s=r.field,o=Fd(s),u=nH(t),f=[...rH(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+o}],d=u==="min-max"||u==="tukey"?[]:[{calculate:`${pt(`upper_box_${o}`)} - ${pt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${pt(`upper_box_${o}`)} + ${pt(`iqr_${o}`)} * ${t}, ${pt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${pt(`lower_box_${o}`)} - ${pt(`iqr_${o}`)} * ${t}, ${pt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Gve(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=Zq(v,n),C=i==="vertical"?"horizontal":"vertical",M=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:M,customTooltipWithoutAggregatedField:y}}const q3="errorbar",Wve=["ticks","rule"],Qve=new ux(q3,aH);function aH(e,{config:t}){e={...e,encoding:cx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:u,tooltipEncoding:f}=sH(e,q3,t);delete a.size;const d=j3(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...u,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function Zve(e,t){const{encoding:n}=e;if(Kve(n))return{orient:tH(e,t),inputType:"raw"};const i=Jve(n),r=ebe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,u=n.y2;if(Be(o)&&Be(u))throw new Error(`${t} cannot have both x2 and y2`);if(Be(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Be(u)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,u=n.xError2,f=n.yError,d=n.yError2;if(Be(u)&&!Be(o))throw new Error(`${t} cannot have xError2 without xError`);if(Be(d)&&!Be(f))throw new Error(`${t} cannot have yError2 without yError`);if(Be(o)&&Be(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Be(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Be(f)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Kve(e){return(Be(e.x)||Be(e.y))&&!Be(e.x2)&&!Be(e.y2)&&!Be(e.xError)&&!Be(e.xError2)&&!Be(e.yError)&&!Be(e.yError2)}function Jve(e){return Be(e.x2)||Be(e.y2)}function ebe(e){return Be(e.xError)||Be(e.xError2)||Be(e.yError)||Be(e.yError2)}function sH(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,u=Qa(i)?i:{type:i};a&&fe(Zj(t));const{orient:f,inputType:d}=Zve(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=eH(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=tbe(u,h,p,y,v,d,t,n),{[b]:C,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:T,...O}=r,{bins:N,timeUnits:B,aggregate:L,groupby:G,encoding:H}=Zq(O,n),I=[...L,...S],F=d!=="raw"?[]:G,R=RA(w,h,H,A);return{transform:[...o.transform??[],...N,...B,...I.length===0?[]:[{aggregate:I,groupby:F}],..._],groupby:F,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:H,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:o,tooltipEncoding:R}}function tbe(e,t,n,i,r,a,s,o){let u=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&fe(dye(y,v,s)),v==="stderr"||v==="stdev")u=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${pt(`center_${d}`)} + ${pt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${pt(`center_${d}`)} - ${pt(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:s0(y)},{fieldPrefix:"upper_",titlePrefix:Lz(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:Lz(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),u=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:Nf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nf({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(fye(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:pt(n.field),as:`upper_${d}`},{calculate:pt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${pt(d)} + ${pt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${pt(d)} + ${pt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${pt(d)} - ${pt(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Gu(Gu(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:u,tooltipSummary:h,tooltipTitleWithFieldName:p}}function Lz(e,t,n){return`${s0(e)} ${n} ${t}`}const H3="errorband",nbe=["band","borders"],ibe=new ux(H3,oH);function oH(e,{config:t}){e={...e,encoding:cx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:u}=sH(e,H3,t),f=s,d=j3(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?fe($z("interpolate")):f.tension&&fe($z("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:u})]}}const lH={};function G3(e,t,n){const i=new ux(e,t);lH[e]={normalizer:i,parts:n}}function rbe(){return le(lH)}G3(vv,iH,Yve);G3(q3,aH,Wve);G3(H3,oH,nbe);const abe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],uH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},sbe=le(uH),obe=le(cH),lbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},fH=le(lbe),dH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ube={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},cbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},fa="_vgsid_",fbe={point:{on:"click",fields:[fa],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Y3(e){return e==="legend"||!!e?.legend}function o_(e){return Y3(e)&&ve(e)}function X3(e){return!!e?.select}function hH(e){const t=[];for(const n of e||[]){if(X3(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function dbe(e){return fx(e)||W3(e)||V3(e)}function V3(e){return ue(e,"concat")}function fx(e){return ue(e,"vconcat")}function W3(e){return ue(e,"hconcat")}function gH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Za(e){return ue(e,"step")}function Uz(e){return ue(e,"view")||ue(e,"width")||ue(e,"height")}const Bz=20,hbe={align:1,bounds:1,center:1,columns:1,spacing:1},gbe=le(hbe);function pbe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(ax(e)&&!h0(e.facet)||V3(e))&&(r.columns=s),fx(e)&&(r.columns=1);for(const o of gbe)if(e[o]!==void 0)if(o==="spacing"){const u=e[o];r[o]=st(u)?u:{row:u.row??a,column:u.column??a}}else r[o]=e[o];return r}function NA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function zA(e,t){const n=bv(e,t);return Za(n)?n.step:pH}function bv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Wt(n,{step:e.step})}const pH=20,mbe={continuousWidth:300,continuousHeight:300,step:pH},ybe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:mbe,mark:uve,arc:{},area:{},bar:hve,circle:{},geoshape:{},image:{},line:{},point:{},rect:k3,rule:{color:"black"},square:{},text:{color:"black"},tick:gve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Hye,projection:{},legend:ube,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:fbe,style:{},title:{},facet:{spacing:Bz},concat:{spacing:Bz},normalizedNumberFormat:".0%"},Ts=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Iz={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Pz={blue:Ts[0],orange:Ts[1],red:Ts[2],teal:Ts[3],green:Ts[4],yellow:Ts[5],purple:Ts[6],pink:Ts[7],brown:Ts[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function vbe(e={}){return{signals:[{name:"color",value:ve(e)?{...Pz,...e}:Pz}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function bbe(e){return{signals:[{name:"fontSize",value:ve(e)?{...Iz,...e}:Iz}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function xbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function mH(e){const t=le(e||{}),n={};for(const i of t){const r=e[i];n[i]=y0(r)?Hj(r):Ji(r)}return n}function Sbe(e){const t=le(e),n={};for(const i of t)n[i]=mH(e[i]);return n}const Ebe=[...Aq,...Xq,...fH,"background","padding","legend","lineBreak","scale","style","title","view"];function yH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=bd({},Le(ybe),n?xbe(n):{},t?vbe(t):{},i?bbe(i):{},a||{});r&&xd(s,"selection",r,!0);const o=ar(s,Ebe);for(const u of["background","lineBreak","padding"])s[u]&&(o[u]=Ji(s[u]));for(const u of Aq)s[u]&&(o[u]=Rn(s[u]));for(const u of Xq)s[u]&&(o[u]=mH(s[u]));for(const u of fH)s[u]&&(o[u]=Rn(s[u]));if(s.legend&&(o.legend=Rn(s.legend)),s.scale){const{invalid:u,...f}=s.scale,d=Rn(u,{level:1});o.scale={...Rn(f),...le(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=Sbe(s.style)),s.title&&(o.title=Rn(s.title)),s.view&&(o.view=Rn(s.view)),o}const _be=new Set(["view",...ive]),wbe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Abe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...lve};function Cbe(e){e=Le(e);for(const t of wbe)delete e[t];if(e.axis)for(const t in e.axis)y0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of abe)delete e.legend[t];if(e.mark){for(const t of kz)delete e.mark[t];e.mark.tooltip&&ve(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(hH(e.params)),delete e.params);for(const t of _be){for(const i of kz)delete e[t][i];const n=Abe[t];if(n)for(const i of n)delete e[t][i];$be(e,t)}for(const t of rbe())delete e[t];Mbe(e);for(const t in e)ve(e[t])&&At(e[t])&&delete e[t];return At(e)?void 0:e}function Mbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=qj(e.title);At(t)||(e.style["group-title"]={...e.style["group-title"],...t}),At(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),At(i)?delete e.title:e.title=i}function $be(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};At(a)||(e.style[n??t]=a),delete e[t]}function dx(e){return ue(e,"layer")}function Tbe(e){return ue(e,"repeat")}function kbe(e){return!re(e.repeat)&&ue(e.repeat,"layer")}class Q3{map(t,n){return ax(t)?this.mapFacet(t,n):Tbe(t)?this.mapRepeat(t,n):W3(t)?this.mapHConcat(t,n):fx(t)?this.mapVConcat(t,n):V3(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(dx(t))return this.mapLayer(t,n);if(lo(t))return this.mapUnit(t,n);throw new Error(f3(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Dbe={zero:1,center:1,normalize:1};function Obe(e){return _e(Dbe,e)}const Rbe=new Set([Eq,tx,ex,dv,ix,$3,T3,nx,_q,M3]),Nbe=new Set([tx,ex,Eq]);function pf(e){return de(e)&&ud(e)==="quantitative"&&!e.bin}function jz(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(de(s)&&de(o))if(pf(s)&&pf(o)){if(s.stack)return t;if(o.stack)return r;const u=de(s)&&!!s.aggregate,f=de(o)&&!!o.aggregate;if(u!==f)return u?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(pf(s))return t;if(pf(o))return r}else{if(pf(s))return a&&n==="vertical"?void 0:t;if(pf(o))return a&&n==="horizontal"?void 0:r}}function zbe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vH(e,t){const n=Qa(e)?e:{type:e},i=n.type;if(!Rbe.has(i))return null;const r=jz(t,"x",n)||jz(t,"theta",n);if(!r)return null;const a=t[r],s=de(a)?pe(a,{}):void 0,o=zbe(r),u=[],f=new Set;if(t[o]){const b=t[o],S=de(b)?pe(b,{}):void 0;S&&S!==s&&(u.push(o),f.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=de(h)?pe(h,{}):void 0;p&&p!==s&&(u.push(d),f.add(p));const y=jme.reduce((b,S)=>{if(S!=="tooltip"&&Tu(t,S)){const _=t[S];for(const w of xe(_)){const A=ca(w);if(A.aggregate)continue;const C=pe(A,{});(!C||!f.has(C))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?Sl(a.stack)?v=a.stack?"zero":null:v=a.stack:Nbe.has(i)&&(v="zero"),!v||!Obe(v)||Qq(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Nn.LINEAR&&a?.stack&&fe(lye(a.scale.type)),Be(t[ls(r)])?(a.stack!==void 0&&fe(oye(r)),null):(de(a)&&a.aggregate&&!t1e.has(a.aggregate)&&fe(uye(a.aggregate)),{groupbyChannels:u,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:zl(i),stackBy:y,offset:v}))}function bH(e,t,n){const i=Rn(e),r=St("orient",i,n);if(i.orient=Bbe(i.type,t,r),r!==void 0&&r!==i.orient&&fe(G1e(i.orient,r)),i.type==="bar"&&i.orient){const u=St("cornerRadiusEnd",i,n);if(u!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:fve[i.orient];for(const d of f)i[d]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=St("opacity",i,n),s=St("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Lbe(i.type,t)),St("cursor",i,n)===void 0&&(i.cursor=Fbe(i,t,n)),i}function Fbe(e,t,n){return t.href||e.href||St("href",e,n)?"pointer":e.cursor}function Lbe(e,t){if(Ve([ix,M3,$3,T3],e)&&!Qq(t))return .7}function Ube(e,t,{graticule:n}){if(n)return!1;const i=Wa("filled",e,t),r=e.type;return Wt(i,r!==ix&&r!==nx&&r!==dv)}function Bbe(e,t,n){switch(e){case ix:case $3:case T3:case _q:case tve:case eve:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case tx:if(de(i)&&(On(i.bin)||de(r)&&r.aggregate&&!i.aggregate))return"vertical";if(de(r)&&(On(r.bin)||de(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(de(i)&&i.type===Wu&&!Mt(i.bin)||gv(i))&&de(r)&&On(r.bin)?"horizontal":"vertical";if(!s)return(de(r)&&r.type===Wu&&!Mt(r.bin)||gv(r))&&de(i)&&On(i.bin)?"vertical":"horizontal"}case dv:if(a&&!(de(i)&&On(i.bin))&&s&&!(de(r)&&On(r.bin)))return;case ex:if(s)return de(r)&&On(r.bin)?"horizontal":"vertical";if(a)return de(i)&&On(i.bin)?"vertical":"horizontal";if(e===dv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case nx:case M3:{const o=Nz(i),u=Nz(r);if(n)return n;if(o&&!u)return e!=="tick"?"horizontal":"vertical";if(!o&&u)return e!=="tick"?"vertical":"horizontal";if(o&&u)return"vertical";{const f=bi(i)&&i.type===od,d=bi(r)&&r.type===od;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function Ibe(e){const{point:t,line:n,...i}=e;return le(i).length>1?i:i.type}function Pbe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ar(e[t],["point","line"])});return e}function l_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ve(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ve(t.point)?t.point:{}:void 0}function qz(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class jbe{name="path-overlay";hasMatchingType(t,n){if(lo(t)){const{mark:i,encoding:r}=t,a=Qa(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!l_(a,n[a.type],r);case"area":return!!l_(a,n[a.type],r)||!!qz(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:u,encoding:f,...d}=t,h=cx(f,r),p=Qa(o)?o:{type:o},y=l_(p,r[p.type],h),v=p.type==="area"&&qz(p,r[p.type]),b=[{name:u,...a?{params:a}:{},mark:Ibe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ar(h,["shape"])}],S=vH(bH(p,h,r),h);let _=h;if(S){const{fieldChannel:w,offset:A}=S;_={...h,[w]:{...h[w],...A?{stack:A}:{}}}}return _=ar(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...id(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:Pbe(r)})}}function qbe(e,t){return t?h0(e)?SH(e,t):xH(e,t):e}function u_(e,t){return t?SH(e,t):e}function FA(e,t,n){const i=t[e];if(Ave(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};fe(E1e(i.repeat));return}return t}function xH(e,t){if(e=FA("field",e,t),e!==void 0){if(e===null)return null;if(F3(e)&&Ys(e.sort)){const n=FA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Hz(e,t){if(de(e))return xH(e,t);{const n=FA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Gz(e,t){if(Be(e)){const n=Hz(e,t);if(n)return n;if(g0(e))return{condition:e.condition}}else{if(p0(e)){const n=Hz(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function SH(e,t){const n={};for(const i in e)if(ue(e,i)){const r=e[i];if(re(r))n[i]=r.map(a=>Gz(a,t)).filter(a=>a);else{const a=Gz(r,t);a!==void 0&&(n[i]=a)}}return n}class Hbe{name="RuleForRangedLine";hasMatchingType(t){if(lo(t)){const{encoding:n,mark:i}=t;if(i==="line"||Qa(i)&&i.type==="line")for(const r of Bme){const a=fc(r),s=n[a];if(n[r]&&(de(s)&&!On(s.bin)||cs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return fe(H1e(!!r.x2,!!r.y2)),i({...t,mark:ve(a)?{...a,type:"rule"}:"rule"},n)}}class Gbe extends Q3{nonFacetUnitNormalizers=[Xve,Qve,ibe,new jbe,new Hbe];map(t,n){if(lo(t)){const i=Tu(t.encoding,Hs),r=Tu(t.encoding,Gs),a=Tu(t.encoding,qb);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=u_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,o);return s}mapRepeat(t,n){return kbe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:u}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:u},spec:r}},n):{...a,layer:u.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Ot(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!re(i)&&t.columns&&(t=ar(t,["columns"]),fe(wz("repeat")));const o=[],{repeater:u={},repeaterPrefix:f=""}=n,d=!re(i)&&i.row||[u?u.row:null],h=!re(i)&&i.column||[u?u.column:null],p=re(i)&&i||[u?u.repeat:null];for(const v of p)for(const b of d)for(const S of h){const _={repeat:v,row:b,column:S,layer:u.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${re(i)?`${Ot(v)}`:(i.row?`row_${Ot(b)}`:"")+(i.column?`column_${Ot(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,o.push(ar(A,["data"]))}const y=re(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return h0(i)&&t.columns&&(t=ar(t,["columns"]),fe(wz("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,u=Xz({parentProjection:s,projection:r}),f=Yz({parentEncoding:a,encoding:u_(i,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:u,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=u_(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...u?{width:u}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&fe(j1e([...i?[Hs]:[],...r?[Gs]:[]]));const s={},o={};for(const u of[Hs,Gs]){const f=t[u];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[u]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??={},o[b][u]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:u,columns:f,...d}=a;return{facetMapping:qbe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,u={...r,parentEncoding:Yz({parentEncoding:n,encoding:a,layer:!0}),parentProjection:Xz({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[u.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},u)}}function Yz({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...le(e),...le(t)]);for(const a of r){const s=t[a],o=e[a];if(Be(s)){const u={...o,...s};i[a]=u}else p0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||ua(o)||Me(o)||Be(o)||re(o))&&(i[a]=o)}}else i=t;return!i||At(i)?void 0:i}function Xz(e){const{parentProjection:t,projection:n}=e;return t&&n&&fe(D1e({parentProjection:t,projection:n})),n??t}function Z3(e){return ue(e,"filter")}function Ybe(e){return ue(e,"stop")}function EH(e){return ue(e,"lookup")}function Xbe(e){return ue(e,"data")}function Vbe(e){return ue(e,"param")}function Wbe(e){return ue(e,"pivot")}function Qbe(e){return ue(e,"density")}function Zbe(e){return ue(e,"quantile")}function Kbe(e){return ue(e,"regression")}function Jbe(e){return ue(e,"loess")}function exe(e){return ue(e,"sample")}function txe(e){return ue(e,"window")}function nxe(e){return ue(e,"joinaggregate")}function ixe(e){return ue(e,"flatten")}function rxe(e){return ue(e,"calculate")}function _H(e){return ue(e,"bin")}function axe(e){return ue(e,"impute")}function sxe(e){return ue(e,"timeUnit")}function oxe(e){return ue(e,"aggregate")}function lxe(e){return ue(e,"stack")}function uxe(e){return ue(e,"fold")}function cxe(e){return ue(e,"extent")&&!ue(e,"density")&&!ue(e,"regression")}function fxe(e){return e.map(t=>Z3(t)?{filter:Of(t.filter,Lye)}:t)}class dxe extends Q3{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=Vz(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Vz(t,n),t.encoding){const i={};for(const[r,a]of ml(t.encoding))i[r]=wH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:ml(i).map(([a,s])=>{const{init:o,bind:u,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of nn(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:u}})}:t}}function Vz(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(Z3(a))return{filter:LA(a,t)};if(_H(a)&&dc(a.bin))return{...a,bin:AH(a.bin)};if(EH(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function wH(e,t){const n=Le(e);if(de(n)&&dc(n.bin)&&(n.bin=AH(n.bin)),mc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(g0(n))if(re(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:LA(i,t)}});else{const{selection:i,param:r,test:a,...s}=wH(n.condition,t);n.condition=r?n.condition:{...s,test:LA(n.condition,t)}}return n}function AH(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function LA(e,t){const n=i=>Of(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Of(e.test||e.filter,i=>i.selection?n(i.selection):i)}class UA extends Q3{map(t,n){const i=n.selections??[];if(t.params&&!lo(t)){const r=[];for(const a of t.params)X3(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(ye(o)&&(o===t.name||r.includes(o))||re(o)&&o.map(u=>r.indexOf(u)).every((u,f,d)=>u!==-1&&(f===0||u>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=UA.prototype[e];UA.prototype[e]=function(n,i){return t.call(this,n,hxe(n,i))}}function hxe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function CH(e,t){t===void 0&&(t=yH(e.config));const n=yxe(e,t),{width:i,height:r}=e,a=vxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const gxe=new Gbe,pxe=new dxe,mxe=new UA;function yxe(e,t={}){const n={config:t};return mxe.map(gxe.map(pxe.map(e,n),n),n)}function Wz(e){return ye(e)?{type:e}:e??{}}function vxe(e,t,n){let{width:i,height:r}=t;const a=lo(e)||dx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(fe(xz("width")),i=void 0),r=="container"&&(fe(xz("height")),r=void 0));const o={type:"pad",...s,...n?Wz(n.autosize):{},...Wz(e.autosize)};if(o.type==="fit"&&!a&&(fe(f1e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&fe(Sz("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&fe(Sz("height")),!tr(o,{type:"pad"}))return o}function bxe(e){return["fit","fit-x","fit-y"].includes(e)}function xxe(e){return e?`fit-${Vb(e)}`:"fit"}const Sxe=["background","padding"];function Qz(e,t){const n={};for(const i of Sxe)e&&e[i]!==void 0&&(n[i]=Ji(e[i]));return t&&(n.params=e.params),n}class uo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new uo(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Wt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function ka(e){return{explicit:!0,value:e}}function Qi(e){return{explicit:!1,value:e}}function MH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:hx(t,n,i,r)}}function hx(e,t,n,i){return e.explicit&&t.explicit&&fe(eye(n,i,e.value,t.value)),e}function bl(e,t,n,i,r=hx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:tr(e.value,t.value)?e:r(e,t,n,i)}class Exe extends uo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dd(e){return ue(e,"url")}function wp(e){return ue(e,"values")}function $H(e){return ue(e,"name")&&!dd(e)&&!wp(e)&&!al(e)}function al(e){return e&&(TH(e)||kH(e)||K3(e))}function TH(e){return ue(e,"sequence")}function kH(e){return ue(e,"sphere")}function K3(e){return ue(e,"graticule")}var Lt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Lt||(Lt={}));function DH({invalid:e,isPath:t}){switch(Cq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function _xe(e){const{marks:t,scales:n}=DH(e);return t===n?Lt.Main:n==="include-invalid-values"?Lt.PreFilterInvalid:Lt.PostFilterInvalid}class yt{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){fe($1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Oi extends yt{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Mj()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function c_(e){return e.as!==void 0}function Zz(e){return`${e}_end`}class Ia extends yt{timeUnits;clone(){return new Ia(null,Le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:u}=a;if(u){let f;if(pc(u)){if(Ft(n)){const{mark:d,markDef:h,config:p}=n,y=vl({fieldDef:a,markDef:h,config:p});(_p(d)||y)&&(f={timeUnit:An(u),field:o})}}else f={as:pe(a,{forAs:!0}),field:o,timeUnit:u};if(Ft(n)){const{mark:d,markDef:h,config:p}=n,y=vl({fieldDef:a,markDef:h,config:p});_p(d)&&Qt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[Ze(f)]=f)}return r},{});return At(i)?null:new Ia(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=An(i),s={...r,timeUnit:a};return new Ia(t,{[Ze(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of ml(this.timeUnits)){const a=c_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(nn(this.timeUnits).map(t=>c_(t)?t.as:Zz(t.field)))}dependentFields(){return new Set(nn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ze(this.timeUnits)}`}assemble(){const t=[];for(const n of nn(this.timeUnits)){const{rectBandPosition:i}=n,r=An(n.timeUnit);if(c_(n)){const{field:a,as:s}=n,{unit:o,utc:u,...f}=r,d=[s,`${s}_end`];t.push({field:zr(a),type:"timeunit",...o?{units:Kb(o)}:{},...u?{timezone:"utc"}:{},...f,as:d}),t.push(...Kz(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=OH({timeUnit:r,field:s}),u=Zz(s);t.push({type:"formula",expr:o,as:u}),t.push(...Kz([s,u],i,r))}}return t}}const gx="offsetted_rect_start",px="offsetted_rect_end";function OH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=lq(i),{part:s,step:o}=dq(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${pt(t)}, ${n?-o:o})`}function Kz([e,t],n,i){if(n!==void 0&&n!==.5){const r=pt(e),a=pt(t);return[{type:"formula",expr:Jz([OH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${gx}`},{type:"formula",expr:Jz([r,a],n+.5),as:`${e}_${px}`}]}return[]}function Jz([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const v0="_tuple_fields";class wxe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Axe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new wxe,a={},s={},o=new Set,u=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Ot(`${i}_${S}`);for(let w=1;o.has(_);w++)_=Ot(`${i}_${S}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?xe(n.value):null;let{fields:p,encodings:y}=ve(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(ve(v))for(const b of le(v))Ume(b)?(y||(y=[])).push(b):f==="interval"?(fe(S1e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){fe(d1e(v,b.aggregate));continue}else if(!S){fe(_z(v));continue}if(b.timeUnit&&!pc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[Ze(_)]=_}if(!a[S]){const _=f==="interval"&&us(v)&&la(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...u(w,"data"),...u(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===fa,Rj(v)?(w.geoChannel=v,w.channel=Oj(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else fe(_z(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...u(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===fa}h&&(t.init=h.map(v=>r.items.map(b=>ve(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),At(s)||(r.timeUnit=new Ia(null,s))},signals:(e,t,n)=>{const i=t.name+v0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(FH)})}},RH="_curr",X1="anim_value",bf="anim_clock",BA="eased_anim_clock",NH="min_extent",zH="max_range_extent",f_="last_tick_at",d_="is_playing",Cxe=1/60*1e3,Mxe=(e,t)=>[{name:BA,update:bf},{name:`${e}_domain`,init:`domain('${t}')`},{name:NH,init:`extent(${e}_domain)[0]`},{name:zH,init:`extent(range('${t}'))[1]`},{name:X1,update:`invert('${t}', ${BA})`}],$xe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Pa(t)&&(n=n.concat([{name:bf,init:"0",on:[{events:{type:"timer",throttle:Cxe},update:`${d_} ? (${bf} + (now() - ${f_}) > ${zH} ? 0 : ${bf} + (now() - ${f_})) : ${bf}`}]},{name:f_,init:"now()",on:[{events:[{signal:bf},{signal:d_}],update:"now()"}]},{name:d_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+v0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=nn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+zf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${ku(e)}, `;if(t.project.hasSelectionId)f+=`${fa}: ${s}[${he(fa)}]`;else if(Pa(t))f+=`fields: ${r}, values: [${X1} ? ${X1} : ${NH}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${he(e.vgField(h.channel,{}))}], ${s}[${he(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${he(h.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Pa(t))return n.concat(Mxe(t.name,e.scaleName(Tl)),[{name:i+eo,on:[{events:[{signal:BA},{signal:X1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+eo,on:d?[{events:d,update:`${u} ? {${f}} : null`,force:!0}]:[]}])}}};function FH(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=zr(r.field),r}function Ku(e,t=!0,n=ni){if(re(e)){const i=e.map(r=>Ku(r,t,n));return t?`[${i.join(", ")}]`:i}else if(gc(e))return n(t?Vu(e):Aye(e));return t?n(dt(e)):e}function Txe(e,t){for(const n of nn(e.component.selection??{})){const i=n.name;let r=`${i}${eo}, ${n.resolve==="global"?"true":`{unit: ${ku(e)}}`}`;for(const a of yx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+n2e,on:[{events:{signal:n.name+eo},update:`modify(${he(n.name+Ju)}, ${r})`}]})}return J3(t)}function kxe(e,t){if(e.component.selection&&le(e.component.selection).length){const n=he(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ml("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return J3(t)}function Dxe(e,t){let n=!1;for(const i of nn(e.component.selection??{})){const r=i.name,a=he(r+Ju);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${JH}(${a}, ${he(o)}${u}`})}n=!0;for(const o of yx)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),J3(t)}function Oxe(e,t){const n=[],i=[],r=ku(e,{escape:!1});for(const a of nn(e.component.selection??{})){const s={name:a.name+Ju};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:fa}}]),a.init){const u=a.project.items.map(FH);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[fa]:Ku(f,!1)[0]})):a.init.map(f=>({unit:r,fields:u,values:Ku(f,!1)}))}if([...n,...t].filter(u=>u.name===a.name+Ju).length||n.push(s),Pa(a)&&t.length){const u=e.lookupDataSource(e.getDataName(Lt.Main)),f=t.find(h=>h.name===u),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+RH,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function LH(e,t){for(const n of nn(e.component.selection??{}))for(const i of yx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function Rxe(e,t){for(const n of e.children)Ft(n)&&(t=LH(n,t));return t}function Nxe(e,t,n,i){const r=rG(e,t.param,t);return{signal:la(n.get("type"))&&re(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function J3(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Xs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!us(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&fe(m1e),!a||!la(s)){fe(p1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||PA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(JH))r.update=`{${i.map(s=>`${he(zr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${he(zr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!PA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function IA(e,t){return`domain(${he(e.scaleName(t))})`}function PA(e){return e.parent&&qd(e.parent)&&(!e.parent.parent||PA(e.parent.parent))}const zf="_brush",UH="_scale_trigger",cg="geo_interval_init_tick",BH="_init",zxe="_center",Fxe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...ve(n.select)?n.select:{}};i.fields=[fa],i.encodings||(i.encodings=n.value?le(n.value):[va,ya]),n.select={type:"interval",...i}}if(t.translate&&!Xs.defined(t)){const i=`!event.item || event.item.mark.name !== ${he(t.name+zf)}`;for(const r of t.events){if(!r.between){fe(`${r} is not an ordered event stream for interval selections.`);continue}const a=xe(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+eo,a=nn(t.project.hasChannel).filter(o=>o.channel===Rt||o.channel===$n),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,u)=>o.concat(Lxe(e,t,u,s?.[u.index])),[])),e.hasProjection){const o=he(e.projectionName()),u=e.projectionName()+zxe,{x:f,y:d}=t.project.hasChannel,h=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${u}[0]`,v=d?s?.[d.index]:`${u}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+BH,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===u)||n.unshift({name:u,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${he(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${ku(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,C=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:cg}]:[]],update:A}]})}else{if(!Xs.defined(t)){const f=i+UH,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=he(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=la(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),u=`unit: ${ku(e)}, fields: ${i+v0}, values`;return n.concat({name:r,...s?{init:`{${u}: ${Ku(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${u}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ft(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===cg).length||n.unshift({name:cg,value:null,on:[{events:"timer{1}",update:`${cg} === null ? {} : ${cg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,u=`data(${he(t.name+Ju)})`;if(Xs.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of le(f))f[S]=[{test:`${u}.length && ${u}[0].unit === ${ku(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=le(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+zf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+zf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function Lxe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=he(r?e.scaleName(a):e.projectionName()),u=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===Rt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=Xs.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Ku(i,!0,u)}:{value:[]};return h.push({events:{signal:t.name+UH},update:la(b)?`[${u(`${p}[0]`)}, ${u(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Ku(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===Rt?0:1,y=t.name+BH,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Bd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=g0(t)&&t.condition;let s=[];a&&(s=xe(a).map(f=>{const d=r(f);if(wve(f)){const{param:h,empty:p}=f;return{test:iG(e,{param:h,empty:p}),...d}}else return{test:Ev(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function ek(e,t="text"){const n=e.encoding[t];return Bd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>mx(i,e.config),invalidValueRef:void 0})}function mx(e,t,n="datum"){if(e){if(ua(e))return Tt(e.value);if(Be(e)){const{format:i,formatType:r}=mv(e);return N3({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function IH(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(re(s))return{tooltip:eF({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Bd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=mx(f,r,o);if(d)return d;if(f===null)return;let h=St("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),ye(h))return{value:h};if(ve(h))return Me(h)?h:h.content==="encoding"?eF(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function PH(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function u(d,h){const p=fc(h),y=bi(d)?d:{...d,type:e[p].type},v=y.title||U3(y,r),b=xe(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Qt(h)){const _=h==="x"?"x2":"y2",w=ca(e[_]);if(On(y.bin)&&w){const A=pe(y,{expr:s}),C=pe(w,{expr:s}),{format:M,formatType:k}=mv(y);S=d0(A,C,M,k,r),a.add(_)}}if((Qt(h)||h===Ur||h===ma)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:_,formatType:w}=mv(y);S=N3({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=mx(y,r,s).signal,o.push({channel:h,key:b,value:S})}I3(e,(d,h)=>{de(d)?u(d,h):sx(d)&&u(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function eF(e,t,n,{reactiveGeom:i}={}){const r=PH(e,t,n,{reactiveGeom:i}),a=ml(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Uxe(e){const{markDef:t,config:n}=e,i=St("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...Bxe(e),...Ixe(e)}}function Bxe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=St("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:_e(o1e,t)?{}:{ariaRoleDescription:{value:t}}}function Ixe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Bd({model:e,channelDef:a,vgChannel:"description",mainRefFn:u=>mx(u,e.config),invalidValueRef:void 0});const s=St("description",n,i);if(s!=null)return{description:Tt(s)};if(i.aria===!1)return{};const o=PH(t,r,i);if(!At(o))return{description:{signal:ml(o).map(([u,f],d)=>`"${d>0?"; ":""}${u}: " + (${f})`).join(" + ")}}}function zn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:u}=n;const f=r[e];o===void 0&&(u??=St(e,i,a,{vgChannel:s,ignoreVgConfig:!g0(f)}),u!==void 0&&(o=Tt(u)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=$q({...d,scaleChannel:e,channelDef:f});return Bd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>R3({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function jH(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??St("filled",n,r),o=Ve(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=St(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=St(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...u?{fill:Tt(u)}:{},...f?{stroke:Tt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&fe(Jj("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...zn("color",e,{vgChannel:d,defaultValue:s?u:f}),...zn("fill",e,{defaultValue:i.fill?u:void 0}),...zn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function Pxe(e){const{encoding:t,mark:n}=e,i=t.order;return!zl(n)&&ua(i)?Bd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Tt(r.value),invalidValueRef:void 0}):{}}function hd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:R3({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Tt(s),bandPosition:r})};const u=t[a];return u?{offsetType:"visual",offset:u}:{}}function gi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,u=r[e],f=r[ls(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=hd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=tk({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!u&&Qt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:jxe({channel:e,channelDef:u,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function jxe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Be(n)&&r&&t===r.fieldChannel){if(de(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return hv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return $u(n,i,{suffix:"end"},{offset:a})}return O3(e)}function tk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=fc(n),u=yl(n),f=St(n,a,s,{vgChannel:u});if(f!==void 0)return Qg(n,f);switch(t){case"zeroOrMin":return tF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return tF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Ui(n)],mult:.5}}}}function tF({mainChannel:e,config:t,...n}){const i=Mq(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const qxe={left:"x",center:"xc",right:"x2"},Hxe={top:"y",middle:"yc",bottom:"y2"};function qH(e,t,n,i="middle"){if(e==="radius"||e==="theta")return yl(e);const r=e==="x"?"align":"baseline",a=St(r,t,n);let s;return Me(a)?(fe(q1e(r)),s=void 0):s=a,e==="x"?qxe[s||(i==="top"?"left":"center")]:Hxe[s||i]}function xv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?HH(e,t,{defaultPos:n,defaultPos2:i}):gi(e,t,{defaultPos:n})}function HH(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ls(e),o=Ui(e),u=Gxe(t,i,s),f=u[o]?qH(e,r,a):yl(e);return{...gi(e,t,{defaultPos:n,vgChannel:f}),...u}}function Gxe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,u=fc(n),f=Ui(n),d=yl(n),h=i[u],p=e.scaleName(u),y=e.getScaleComponent(u),{offset:v}=n in i||n in a?hd({channel:n,markDef:a,encoding:i,model:e}):hd({channel:u,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Ui(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=Yxe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:d1(n,a)||d1(n,{[n]:$A(n,a,o.style),[f]:$A(f,a,o.style)})||d1(n,o[r])||d1(n,o.mark)||{[d]:tk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function Yxe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f}){return Be(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?$u(t,a,{suffix:"start"},{offset:u}):O3({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:u,defaultRef:f})}function d1(e,t){const n=Ui(e),i=yl(e);if(t[i]!==void 0)return{[i]:Qg(e,t[i])};if(t[e]!==void 0)return{[i]:Qg(e,t[e])};if(t[n]){const r=t[n];if(Qu(r))fe(L1e(n));else return{[n]:Qg(e,r)}}}function Js(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ls(t),o=Ui(t),u=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??St("size",r,n,{vgChannel:o}),v=Lj(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return de(u)&&(Mt(u.bin)||On(u.bin)||u.timeUnit&&!f)&&!(y&&!Qu(y))&&!i[v]&&!Cn(h)?Wxe({fieldDef:u,fieldDef2:f,channel:t,model:e}):(Be(u)&&Cn(h)||b)&&!f?Vxe(u,t,e):HH(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Xxe(e,t,n,i,r,a,s){if(Qu(r))if(n){const u=n.get("type");if(u==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Wa("minBandSize",{type:s},i);return{signal:d?`max(${ta(d)}, ${f})`:f}}else r.band!==1&&(fe(X1e(u)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Me(r))return r;if(r)return{value:r}}if(n){const u=n.get("range");if(hc(u)&&st(u.step))return{value:u.step-2}}if(!a){const{bandPaddingInner:u,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Wt(u,s==="tick"?h:s==="bar"?f:d);if(Me(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(st(p))return{signal:`${1-p} * ${e}`}}return{value:zA(i.view,e)-2}}function Vxe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,u=n.scaleName(t),f=n.getScaleComponent(t),d=Ui(t),h=ls(t),p=Lj(t),y=n.scaleName(p),v=n.getScaleComponent(a3(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=zn("size",n,{vgChannel:d,defaultRef:Tt(i.size)}):fe(Z1e(i.type)));const _=!!S,w=zq({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:Xxe(d,y||u,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&Qu(w)&&!_?"top":"middle",C=qH(t,i,a,A),M=C==="xc"||C==="yc",{offset:k,offsetType:T}=hd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),O=O3({channel:t,channelDef:e,markDef:i,config:a,scaleName:u,scale:f,stack:s,offset:k,defaultRef:tk({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:f}),bandPosition:M?T==="encoding"?0:.5:Me(w)?{signal:`(1-${w})/2`}:Qu(w)?(1-w.band)/2:0});if(d)return{[C]:O,...S};{const N=yl(h),B=S[d],L=k?{...B,offset:k}:B;return{[C]:O,[N]:re(O)?[O[0],{...O[1],offset:L}]:{...O,offset:L}}}}function nF(e,t,n,i,r,a,s){if(Dj(e))return 0;const o=e==="x"||e==="y2",u=o?-t/2:t/2;if(Me(n)||Me(r)||Me(i)||a){const f=ta(n),d=ta(r),h=ta(i),p=ta(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${u})`:u,b=h?`${h} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-u:+r+u)}function Wxe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),u=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=zq({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Qt(n)?St("binSpacing",a,r)??0:0,b=ls(n),S=yl(n),_=yl(b),w=Wa("minBandSize",a,r),{offset:A}=hd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:C}=hd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),M=bve({fieldDef:e,scaleName:u}),k=nF(n,v,d,y,A,w,M),T=nF(b,v,d,y,C??A,w,M),O=Me(h)?{signal:`(1-${h.signal})/2`}:Qu(h)?(1-h.band)/2:.5,N=vl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Mt(e.bin)||e.timeUnit){const B=e.timeUnit&&N!==.5;return{[_]:iF({fieldDef:e,scaleName:u,bandPosition:O,offset:T,useRectOffsetField:B}),[S]:iF({fieldDef:e,scaleName:u,bandPosition:Me(O)?{signal:`1-${O.signal}`}:1-O,offset:k,useRectOffsetField:B})}}else if(On(e.bin)){const B=$u(e,u,{},{offset:T});if(de(t))return{[_]:B,[S]:$u(t,u,{},{offset:k})};if(dc(e.bin)&&e.bin.step)return{[_]:B,[S]:{signal:`scale("${u}", ${pe(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}fe(nq(b))}function iF({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return hv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:gx,endSuffix:px}:{}})}const Qxe=new Set(["aria","width","height"]);function Br(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?jH(e):{};return{...Zxe(e.markDef,t),...rF("fill",n),...rF("stroke",i),...zn("opacity",e),...zn("fillOpacity",e),...zn("strokeOpacity",e),...zn("strokeWidth",e),...zn("strokeDash",e),...Pxe(e),...IH(e),...ek(e,"href"),...Uxe(e)}}function rF(e,t){return t?{[e]:t}:{}}function Zxe(e,t){return s1e.reduce((n,i)=>(!Qxe.has(i)&&ue(e,i)&&t[i]!=="ignore"&&(n[i]=Tt(e[i])),n),{})}function nk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!us(a)||!(s=e.getScaleType(a)))return;const o=Wb(r.aggregate),u=D3({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(mve(u)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>Jb(a,!0)).join(" && ")}}}function aF(e,t){if(t!==void 0)return{[e]:Tt(t)}}const h_="voronoi",GH={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(h_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(zl(a))return fe(h1e(a)),n;const s={name:e.getName(h_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...IH(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,u=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(h_)&&(u=!0)}),u||n.splice(o+1,0,s),n}},YH={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Y3(e.bind),parse:(e,t,n)=>eG(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=GH.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((u,f)=>{const d=Ot(`${i}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Ku(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${he(u.field)}] : null`}]:[],bind:a[u.field]??a[u.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+eo),s=i+v0,o=r.items.map(f=>Ot(`${i}_${f.field}`)),u=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${u} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Sv="_toggle",XH={defined:e=>e.type==="point"&&!Pa(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Sv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+eo,i=t.name+Sv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ku(e)}}, `}${i} ? ${n} : null`}},Kxe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Pa(e),parse:(e,t)=>{t.clear&&(t.clear=ye(t.clear)?Ml(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(YH.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Ot(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+eo);i(r,"null"),XH.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Sv),i(r,"false"))}return n}},VH={defined:e=>{const t=e.resolve==="global"&&e.bind&&Y3(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==fa;return t&&!n&&fe(y1e),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=ye(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},eG(t,i),ve(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=xe(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=o_(t.bind)?t.bind.legend:"click",a=ye(r)?Ml(r,"view"):xe(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=o_(t.bind)&&t.bind.legend,a=s=>o=>{const u=Le(o);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Ot(s.field)}_legend`,u=`${i}_${o}`;if(n.filter(d=>d.name===u).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+eo),s=i+v0,o=r.items.filter(p=>p.hasLegend).map(p=>Ot(`${i}_${Ot(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Sv),h=o_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function Jxe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of nn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&VH.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const WH="_translate_anchor",QH="_translate_delta",e2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+WH,{x:s,y:o}=t.project.hasChannel;let u=Ml(t.translate,"scope");return r||(u=u.map(f=>(f.between[0].markname=i+zf,f))),n.push({name:a,value:{},on:[{events:u.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?IA(e,Rt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?IA(e,$n):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+QH,value:{},on:[{events:u,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&sF(e,t,s,"width",n),o!==void 0&&sF(e,t,o,"height",n),n}};function sF(e,t,n,i,r){const a=t.name,s=a+WH,o=a+QH,u=n.channel,f=Xs.defined(t),d=r.find(M=>M.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(u),y=p?.get("type"),v=p?.get("reverse"),b=f?u===Rt?v?"":"-":v?"-":"":"",S=`${s}.extent_${u}`,_=`${b}${o}.${u} / ${f?`${h}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:o},update:f?C:`clampRange(${C}, 0, ${h})`})}const ZH="_zoom_anchor",KH="_zoom_delta",t2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+KH,{x:s,y:o}=t.project.hasChannel,u=he(e.scaleName(Rt)),f=he(e.scaleName($n));let d=Ml(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+zf,h))),n.push({name:i+ZH,on:[{events:d,update:r?`{${[u?`x: invert(${u}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&oF(e,t,s,"width",n),o!==void 0&&oF(e,t,o,"height",n),n}};function oF(e,t,n,i,r){const a=t.name,s=n.channel,o=Xs.defined(t),u=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?IA(e,s):u.name,y=a+KH,v=`${a}${ZH}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;u.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const Ju="_store",eo="_tuple",n2e="_modify",JH="vlSelectionResolve",yx=[$xe,Fxe,Axe,XH,YH,Xs,VH,Kxe,e2e,t2e,GH];function i2e(e){let t=e.parent;for(;t&&!sr(t);)t=t.parent;return t}function ku(e,{escape:t}={escape:!0}){let n=t?he(e.name):e.name;const i=i2e(e);if(i){const{facet:r}=i;for(const a of Mr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${he(i.vgField(a))}])`)}return n}function ik(e){return nn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function eG(e,t){(ye(t.select)||!t.select.on)&&delete e.events,(ye(t.select)||!t.select.clear)&&delete e.clear,(ye(t.select)||!t.select.toggle)&&delete e.toggle}function Pa(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function jA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...jA(e.object)),t.push(...jA(e.property))),t)}function tG(e){return e.object.type==="MemberExpression"?tG(e.object):e.object.name==="datum"}function nG(e){const t=ET(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&tG(i)&&n.add(jA(i).slice(1).join("."))}),n}class Id extends yt{model;filter;expr;_dependentFields;clone(){return new Id(null,this.model,Le(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Ev(this.model,this.filter,this),this._dependentFields=nG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function r2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Ot(a.name),o=a.select,u=ye(o)?o:o.type,f=ve(o)?Le(o):{type:u},d=i[u];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const h=n[s]={...f,name:s,type:u,init:a.value,bind:a.bind,events:ye(f.on)?Ml(f.on,"scope"):xe(Le(f.on))};if(Pa(h)&&(r++,r>1)){delete n[s];continue}const p=Le(a);for(const y of yx)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&fe(_1e),n}function iG(e,t,n,i="datum"){const r=ye(t)?t:t.param,a=Ot(r),s=he(a+Ju);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const u=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${he(o.resolve)})`,d=`${u}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function rG(e,t,n){const i=Ot(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&fe(w1e(a));else if(r&&!a){const o=s.project.items.filter(u=>u.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,fe(A1e(o,r,n,a))):a=o[0].field}return`${s.name}[${he(zr(a))}]`}function a2e(e,t){for(const[n,i]of ml(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Oi(new Id(t,e,{param:n}),r,Lt.Lookup,e.component.data.outputNodeRefCounts)}}function Ev(e,t,n){return Wg(t,i=>ye(i)?i:Nye(i)?iG(e,i,n):gq(i))}function s2e(e,t){if(e)return re(e)&&!qo(e)?e.map(n=>U3(n,t)).join(", "):e}function g_(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Fg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:u,zindex:f,...d}=e.combine();if(!r){for(const h in d){const p=h,y=Uve[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(y0(v)){const{condition:b,...S}=v,_=xe(b),w=zz[p];if(w){const{vgProp:A,part:C}=w,M=[..._.map(k=>{const{test:T,...O}=k;return{test:Ev(null,T),...O}}),S];g_(d,C,A,M),delete d[p]}else if(w===null){const A={signal:_.map(C=>{const{test:M,...k}=C;return`${Ev(null,M)} ? ${bz(k)} : `}).join("")+bz(S)};d[p]=A}}else if(Me(v)){const b=zz[p];if(b){const{vgProp:S,part:_}=b;g_(d,_,S,v),delete d[p]}}Ve(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},At(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Wt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&Me(d.encode.labels.update.text)&&(p=Gu(o,"datum.label",d.encode.labels.update.text.signal)),g_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of Gq)e.hasAxisPart(p)||delete d.encode[p];At(d.encode)&&delete d.encode}const h=s2e(u,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Wt(f,0)}}}}function aG(e){const{axes:t}=e.component,n=[];for(const i of oo)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function o2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Fg(r,"grid",t)),...i.map(r=>Fg(r,"grid",t)),...n.map(r=>Fg(r,"main",t)),...i.map(r=>Fg(r,"main",t))].filter(r=>r)}function lF(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...le(s),...le(o)]),f={};for(const d of u.values())f[d]={signal:`${i.signal} === "${a}" ? ${ta(s[d])} : ${ta(o[d])}`};return f}return t[r]})])}function l2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:vq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Me(n)?"axisOrient":`axis${s0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],u=["axis",s,a];return{vlOnlyAxisConfig:lF(o,i,e,n),vgAxisConfig:lF(u,i,e,n),axisConfigStyle:u2e([...u,...o],i)}}function u2e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=xe(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function qA(e,t,n,i={}){const r=Yj(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const uF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??c2e(n,e),gridScale:({model:e,channel:t})=>f2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||oG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||sG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??h2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??g2e(t.type,n,de(t)&&!!t.timeUnit,de(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??m2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??y2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=lG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return Vj(r?[Rz(r)]:[],de(s)?[Rz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>v2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??b2e(n,t)};function c2e(e,t){return!Cn(e)&&de(t)&&!Mt(t?.bin)&&!On(t?.bin)}function f2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function d2e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Me(a)?a:Ep(a);{const{configValue:s}=qA("labelAngle",i,t?.style,r);return s!==void 0?Ep(s):n===Rt&&Ve([C3,A3],e.type)&&!(de(e)&&e.timeUnit)?270:void 0}}function HA(e){return`(((${e.signal} % 360) + 360) % 360)`}function sG(e,t,n,i){if(e!==void 0)if(n==="x"){if(Me(e)){const r=HA(e),a=Me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Me(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Me(e)){const r=HA(e),a=Me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Me(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function oG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Me(e)){const s=HA(e),o=Me(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Me(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function h2e(e,t){if(t==="x"&&Ve(["quantitative","temporal"],e))return!0}function g2e(e,t,n,i){if(n&&!ve(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function p2e(e){return e==="x"?"bottom":"left"}function m2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Cn(t)&&t!=="log"){if(de(e)){if(Mt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ve(["month","hours","day","quarter"],An(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function y2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(de(t)){const{timeUnit:n}=t;if(n){const i=fq(n);if(i)return{signal:i}}}}function lG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return Wj(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function v2e(e,t){const n=e.values;if(re(n))return Hq(t,n);if(Me(n))return n}function b2e(e,t){return e==="rect"&&pv(t)?1:0}class gd extends yt{transform;_dependentFields;clone(){return new gd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=nG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(mc(i)&&Nq(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,u=o.map((f,d)=>`${gq({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new gd(t,{calculate:u,as:pd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ze(this.transform)}`}}function pd(e,t,n){return pe(e,{prefix:t,suffix:"sort_index",...n})}function vx(e,t){return Ve(["top","bottom"],t)?"column":Ve(["left","right"],t)||e==="row"?"row":"column"}function md(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Wt((t||{})[e],r[e],n.header[e])}function bx(e,t,n,i){const r={};for(const a of e){const s=md(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const rk=["row","column"],ak=["header","footer"];function x2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=bx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),u=vx(t,o),f=Ep(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...cG(f,u),...uG(u,f,a),...fG(i,r,t,sbe,uH)}}}function uG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=oG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function cG(e,t){const n=sG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function S2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of ak)if(n[r])for(const a of n[r]){const s=_2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function E2e(e,t){const{sort:n}=e;return Ys(n)?{field:pe(n,{expr:"datum"}),order:n.order??"ascending"}:re(n)?{field:pd(e,t,{expr:"datum"}),order:"ascending"}:{field:pe(e,{expr:"datum"}),order:n??"ascending"}}function GA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:u}=bx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=N3({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=vx(t,o);return{text:{signal:u?Gu(Gu(u,"datum.label",f),"datum.value",pe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...cG(a,d),...uG(d,a,s),...fG(n,e,t,obe,cH)}}function _2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=bx(["labelOrient"],s.header,o,t);(t==="row"&&!Ve(["top","bottom"],h)||t==="column"&&!Ve(["left","right"],h))&&(a=GA(s,t,o))}const u=sr(e)&&!h0(e.facet),f=r.axes,d=f?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:E2e(s,t)}:{},...d&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const w2e={column:{start:0,end:1},row:{start:1,end:0}};function A2e(e,t){return w2e[t][e]}function C2e(e,t){const n={};for(const i of Mr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=bx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=vx(i,s),u=A2e(a,o);u!==void 0&&(n[o]=u)}}return At(n)?void 0:n}function fG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=md(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function sk(e){return[...h1(e,"width"),...h1(e,"height"),...h1(e,"childWidth"),...h1(e,"childHeight")]}function h1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(Cn(s)&&hc(o)){const u=e.scaleName(n);return sr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[cF(u,o)]:[cF(u,o),{name:r,update:dG(u,a,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=NA(e.config.view,a?"width":"height"),u=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:r,value:i}]}function cF(e,t){const n=`${e}_step`;return Me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function dG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Wt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ta(s)}, ${ta(a)}) * ${e}_step`}function hG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function gG(e,t){return le(e).reduce((n,i)=>({...n,...Bd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Tt(r.value),invalidValueRef:void 0})}),{})}function pG(e,t){if(sr(t))return e==="theta"?"independent":"shared";if(qd(t))return"shared";if(hk(t))return Qt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ok(e,t){const n=e.scale[t],i=Qt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&fe(nye(t)),"independent"):e[i][t]||"shared"}const M2e={...cbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},mG=le(M2e);class $2e extends uo{}const fF={symbols:T2e,gradient:k2e,labels:D2e,entries:O2e};function T2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:u,mark:f}=n,d=s.filled&&f!=="trail";let h={...c1e({},n,sve),...jH(n,{filled:d})};const p=r.get("symbolOpacity")??u.legend.symbolOpacity,y=r.get("symbolFillColor")??u.legend.symbolFillColor,v=r.get("symbolStrokeColor")??u.legend.symbolStrokeColor,b=p===void 0?yG(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Fi)delete h.fill;else if(ue(h.fill,"field"))y?delete h.fill:(h.fill=Tt(u.legend.symbolBaseFillColor??"black"),h.fillOpacity=Tt(b??1));else if(re(h.fill)){const S=YA(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=Tt(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Fi)delete h.stroke;else if(ue(h.stroke,"field")||v)delete h.stroke;else if(re(h.stroke)){const S=Wt(YA(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==so){const S=de(t)&&bG(n,r,t);S?h.opacity=[{test:S,...Tt(b??1)},Tt(u.legend.unselectedOpacity)]:b&&(h.opacity=Tt(b))}return h={...h,...e},At(h)?void 0:h}function k2e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?yG(s.opacity)||a.opacity:void 0;return f&&(o.opacity=Tt(f)),o={...o,...e},At(o)?void 0:o}function D2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=de(t)?bG(n,r,t):void 0,u=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;Zu(d)?h=na({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=na({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&de(t)&&t.timeUnit===void 0&&(h=na({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...u?{opacity:u}:{},...h?{text:h}:{},...e};return At(p)?void 0:p}function O2e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function yG(e){return vG(e,(t,n)=>Math.max(t,n.value))}function YA(e){return vG(e,(t,n)=>Wt(t,n.value))}function vG(e,t){if(Cve(e))return xe(e.condition).reduce(t,e.value);if(ua(e))return e.value}function bG(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=he(n.field);return i.map(a=>`(!length(data(${he(Ot(a)+Ju)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const dF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Dq(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Oq(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??B2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??I2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??N2e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Rf(n)&&Fa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>R2e(t,e)};function R2e(e,t){const n=e.values;if(re(n))return Hq(t,n);if(Me(n))return n}function N2e(e,t,n,i){if(t!=="shape"){const r=YA(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function z2e(e){const{legend:t}=e;return Wt(t.type,F2e(e))}function F2e({channel:e,timeUnit:t,scaleType:n}){if(Rf(e)){if(Ve(["quarter","month","day"],t))return"symbol";if(Fa(n))return"gradient"}return"symbol"}function L2e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??U2e(n,t)}function U2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function B2e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:u}=e;if(Fa(r))return n==="horizontal"?i==="top"||i==="bottom"?hF(t,"width",s,a):s:hF(t,"height",u,o)}function hF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function I2e(e){if(Ve(["quantile","threshold","log","symlog"],e))return"greedy"}function xG(e){const t=Ft(e)?P2e(e):G2e(e);return e.component.legends=t,t}function P2e(e){const{encoding:t}=e,n={};for(const i of[Fi,...dH]){const r=cn(t[i]);!r||!e.getScaleComponent(i)||i===Li&&de(r)&&r.type===Ud||(n[i]=H2e(e,i))}return n}function j2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function q2e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function H2e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new $2e({},j2e(e,t));Jxe(e,t,o);const u=n!==void 0?!n:s.disable;if(o.set("disable",u,n!==void 0),u)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=cn(r[t]),h=de(d)?An(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=z2e({legend:n,channel:t,timeUnit:h,scaleType:f}),v=L2e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const C of mG){if(y==="gradient"&&C.startsWith("symbol")||y==="symbol"&&C.startsWith("gradient"))continue;const M=C in dF?dF[C](b):n[C];if(M!==void 0){const k=q2e(M,C,n,e.fieldDef(t));(k||a.legend[C]===void 0)&&o.set(C,M,k)}}const S=n?.encoding??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const C of["labels","legend","title","symbols","gradient","entries"]){const M=gG(S[C]??{},e),k=C in fF?fF[C](M,A):M;k!==void 0&&!At(k)&&(w[C]={..._?.length&&de(d)?{name:`${Ot(d.field)}_legend_${C}`}:{},..._?.length?{interactive:!!_}:{},update:k})}return At(w)||o.set("encode",w,!!n?.encoding),o}function G2e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){xG(i);for(const r of le(i.component.legends))n.legend[r]=ok(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=SG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of le(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function SG(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of mG){const s=bl(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,u)=>{switch(a){case"symbolType":return Y2e(o,u);case"title":return Qj(o,u);case"type":return r=!0,Qi("symbol")}return hx(o,u,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&cv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&cv(e.explicit,["encode","gradient"])),e}function Y2e(e,t){return t.value==="circle"?t:e}function X2e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function EG(e){const t=e.component.legends,n={};for(const r of le(t)){const a=e.getScaleComponent(r),s=dt(a.get("domains"));if(n[s])for(const o of n[s])SG(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return nn(n).flat().map(r=>V2e(r,e.config)).filter(r=>r!==void 0)}function V2e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of dH)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Me(a.encode.labels.update.text)&&(s=Gu(i,"datum.label",a.encode.labels.update.text.signal)),X2e(a,"labels","text",{signal:s})}return a}}function W2e(e){return qd(e)||hk(e)?Q2e(e):_G(e)}function Q2e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),_G(e))}function _G(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const u=Me(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ve(s,u)||s.push(u),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const Z2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wG extends uo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function AG(e){e.component.projection=Ft(e)?K2e(e):tSe(e)}function K2e(e){if(e.hasProjection){const t=Rn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?J2e(e):void 0,a=new wG(e.projectionName(!0),{...Rn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function J2e(e){const t=[],{encoding:n}=e;for(const i of[[va,ya],[Fr,ba]])(cn(n[i[0]])||cn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Li)&&e.typedFieldDef(Li).type===Ud&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Lt.Main)),t}function eSe(e,t){const n=KT(Z2e,r=>!!(!_e(e.explicit,r)&&!_e(t.explicit,r)||_e(e.explicit,r)&&_e(t.explicit,r)&&tr(e.get(r),t.get(r))));if(tr(e.size,t.size)){if(n)return e;if(tr(e.explicit,{}))return t;if(tr(t.explicit,{}))return e}return null}function tSe(e){if(e.children.length===0)return;let t;for(const i of e.children)AG(i);const n=KT(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=eSe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new wG(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function nSe(e,t,n,i){if(m0(t,n)){const r=Ft(e)?e.axis(n)??e.legend(n)??{}:{},a=pe(t,{expr:"datum"}),s=pe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:pe(t,{binSuffix:"range",forAs:!0}),formula:d0(a,s,r.format,r.formatType,i)}}return{}}function CG(e,t){return`${jj(e)}_${t}`}function iSe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function lk(e,t,n){const i=ox(n,void 0)??{},r=CG(i,t);return e.getName(`${r}_bins`)}function rSe(e){return"as"in e}function gF(e,t,n){let i,r;rSe(e)?i=ye(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[pe(e,{forAs:!0}),pe(e,{binSuffix:"end",forAs:!0})];const a={...ox(t,void 0)},s=CG(a,e.field),{signal:o,extentSignal:u}=iSe(n,s);if(Qb(a.extent)){const d=a.extent;r=rG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...u?{extentSignal:u}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class ja extends yt{bins;clone(){return new ja(null,Le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(bi(a)&&Mt(a.bin)){const{key:o,binComponent:u}=gF(a,a.bin,n);r[o]={...u,...r[o],...nSe(n,a,s,n.config)}}return r},{});return At(i)?null:new ja(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=gF(n,n.bin,i);return new ja(t,{[r]:a})}merge(t,n){for(const i of le(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=za([...this.bins[i].as,...t.bins[i].as],Ze)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(nn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(nn(this.bins).map(t=>t.field))}hash(){return`Bin ${Ze(this.bins)}`}assemble(){return nn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:zr(t.field),as:i,signal:t.signal,...Qb(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:zr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const u of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:pe({field:i[f]},{expr:"datum"}),as:u[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function aSe(e,t,n,i){const r=Ft(i)?i.encoding[ls(t)]:void 0;if(bi(n)&&Ft(i)&&Fq(n,r,i.markDef,i.config)){e.add(pe(n,{})),e.add(pe(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,u=vl({fieldDef:n,markDef:s,config:o});_p(a)&&u!==.5&&Qt(t)&&(e.add(pe(n,{suffix:gx})),e.add(pe(n,{suffix:px}))),n.bin&&m0(n,t)&&e.add(pe(n,{binSuffix:"range"}))}else if(Rj(t)){const a=Oj(t);e.add(i.getName(a))}else e.add(pe(n));return mc(n)&&Xye(n.scale?.range)&&e.add(n.scale.range.field),e}function sSe(e,t){for(const n of le(t)){const i=t[n];for(const r of le(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ra extends yt{dimensions;measures;clone(){return new ra(null,new Set(this.dimensions),Le(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:u,field:f}=s;if(u)if(u==="count")r["*"]??={},r["*"].count=new Set([pe(s,{forAs:!0})]);else{if(Ks(u)||Nl(u)){const d=Ks(u)?"argmin":"argmax",h=u[d];r[h]??={},r[h][d]=new Set([pe({op:d,field:h},{forAs:!0})])}else r[f]??={},r[f][u]=new Set([pe(s,{forAs:!0})]);us(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??={},r[f].min=new Set([pe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([pe({field:f,aggregate:"max"},{forAs:!0})]))}else aSe(a,o,s,n)}),a.size+le(r).length===0)?null:new ra(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:u}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([u||pe(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(u||pe(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+le(r).length===0?null:new ra(t,i,r)}merge(t){return wj(this.dimensions,t.dimensions)?(sSe(this.measures,t.measures),!0):(vye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const t=new Set;for(const n of le(this.measures))for(const i of le(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ze({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of le(this.measures))for(const s of le(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:zr(a));return{type:"aggregate",groupby:[...this.dimensions].map(zr),ops:t,fields:n,as:i}}}class Pd extends yt{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Mr){const s=n.facet[a];if(s){const{bin:o,sort:u}=s;this[a]={name:n.getName(`${a}_domain`),fields:[pe(s),...Mt(o)?[pe(s,{binSuffix:"end"})]:[]],...Ys(u)?{sortField:u}:re(u)?{sortIndexField:pd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Mr)this[n]&&(t+=` ${n.charAt(0)}:${Ze(this[n])}`);return t}get fields(){const t=[];for(const n of Mr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Mr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of oo){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Cn(r)&&hc(a)){const s=xx(this.childModel,n),o=dk(s);o?t[n]=o:fe(d3(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:u,sortIndexField:f}=this[t];if(u){const{op:d=rx,field:h}=u;a.push(h),s.push(d),o.push(pe(u,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const u of rk){for(const f of ak){const d=i[u]?.[f]??[];for(const h of d)if(h.axes?.length>0){a[u]=!0;break}}if(a[u]){const f=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),u=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:u}]})}for(const o of[Gs,Hs])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function pF(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function oSe(e,t){const n=t3(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=pF(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=pF(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return fe(M1e(t)),null}function lSe(e){const t={};return Y1(e.filter,n=>{if(hq(n)){let i=null;v3(n)?i=Ji(n.equal):x3(n)?i=Ji(n.lte):b3(n)?i=Ji(n.lt):S3(n)?i=Ji(n.gt):E3(n)?i=Ji(n.gte):_3(n)?i=n.range[0]:w3(n)&&(i=(n.oneOf??n.in)[0]),i&&(gc(i)?t[n.field]="date":st(i)?t[n.field]="number":ye(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function uSe(e){const t={};function n(i){fd(i)?t[i.field]="date":i.type==="quantitative"&&e1e(i.aggregate)?t[i.field]="number":ad(i.field)>1?i.field in t||(t[i.field]="flatten"):mc(i)&&Ys(i.sort)&&ad(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Ft(e)||sr(e))&&e.forEachFieldDef((i,r)=>{if(bi(i))n(i);else{const a=fc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Ft(e)){const{mark:i,markDef:r,encoding:a}=e;if(zl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];de(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function cSe(e){const t={};if(Ft(e)&&e.component.selection)for(const n of le(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&ad(r.field)>1&&(t[r.field]="flatten")}return t}class Zn extends yt{_parse;clone(){return new Zn(null,Le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ze(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!al(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of le(i)){const u=r.getWithExplicit(o);u.value!==void 0&&(u.explicit||u.value===i[o]||u.value==="derived"||i[o]==="flatten"?delete i[o]:fe(Az(o,i[o],u.value)))}for(const o of le(n)){const u=r.get(o);u!==void 0&&(u===n[o]?delete n[o]:fe(Az(o,n[o],u)))}const a=new uo(n,i);r.copyAll(a);const s={};for(const o of le(a.combine())){const u=a.get(o);u!==null&&(s[o]=u)}return le(s).length===0||r.parseNothing?null:new Zn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of le(this._parse)){const i=this._parse[n];ad(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(t=!1){return le(this._parse).filter(n=>t?ad(n)>1:!0).map(n=>{const i=oSe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Fd(n)}:null}).filter(n=>n!==null)}}class xl extends yt{clone(){return new xl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([fa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:fa}}}class b0 extends yt{params;clone(){return new b0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ze(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class x0 extends yt{params;clone(){return new x0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ze(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ec extends yt{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(al(t)||(n=t.format?{...ar(t.format,["parse"])}:{}),wp(t))this._data={values:t.values};else if(dd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ve(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else kH(t)?this._data={values:[{type:"Sphere"}]}:($H(t)||al(t))&&(this._data={});this._generator=al(t),t.name&&(this._name=t.name),n&&!At(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function uk(e){return e instanceof ec||e instanceof b0||e instanceof x0}class ck{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class yc extends ck{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class fk extends ck{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class fSe extends fk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of le(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class dSe extends fk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&ik(t)}run(t){t instanceof xl&&(this.requiresSelectionId&&(uk(t.parent)||t.parent instanceof ra||t.parent instanceof Zn)||(this.setModified(),t.remove()))}}class hSe extends ck{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ia&&(i=t.producedFields(),JT(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class gSe extends fk{constructor(){super()}run(t){t instanceof Oi&&!t.isRequired()&&(this.setModified(),t.remove())}}class pSe extends yc{run(t){if(!uk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Zn)if(t instanceof Zn)this.setModified(),t.merge(n);else{if(e3(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class mSe extends yc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Zn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const u of le(o))u in r?r[u]!==o[u]&&a.add(u):r[u]=o[u]}for(const s of a)delete r[s];if(!At(r)){this.setModified();const s=new Zn(t,r);for(const o of n){if(o instanceof Zn)for(const u of le(r))delete o.parse[u];t.removeChild(o),o.parent=s,o instanceof Zn&&le(o.parse).length===0&&o.remove()}}}}}class ySe extends yc{run(t){t instanceof Oi||t.numChildren()>0||t instanceof Pd||t instanceof ec||(this.setModified(),t.remove())}}class vSe extends yc{run(t){const n=t.children.filter(r=>r instanceof Ia),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class bSe extends yc{run(t){const n=t.children.filter(r=>r instanceof ra),i={};for(const r of n){const a=Ze(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of le(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class xSe extends yc{model;constructor(t){super(),this.model=t}run(t){const n=!(uk(t)||t instanceof Id||t instanceof Zn||t instanceof xl),i=[],r=[];for(const a of t.children)a instanceof ja&&(n&&!e3(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ja?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class SSe extends yc{run(t){const n=[...t.children];if(!rd(n,s=>s instanceof Oi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Oi){let o=s;for(;o.numChildren()===1;){const[u]=o.children;if(u instanceof Oi)o=u;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class vc extends yt{transform;clone(){return new vc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??pe(t)}hash(){return`JoinAggregateTransform ${Ze(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class yd extends yt{filter;clone(){return new yd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const u=n.reduceFieldDef((f,d,h)=>{const p=us(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=D3({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:Wb(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return le(u).length?new yd(t,u):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ze(this.filter)}`}assemble(){const t=le(this.filter).reduce((n,i)=>{const r=this.filter[i],a=pe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${XA(a)}))`):r.type==="quantitative"&&n.push(XA(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function XA(e){return`isValid(${e}) && isFinite(+${e})`}function ESe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=pe(i);return r&&t.push(r),t},[])}function _Se(e){return re(e)&&e.every(t=>ye(t))&&e.length>1}class Vs extends yt{_stack;clone(){return new Vs(null,Le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],u=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),u.push(Wt(h.order,"ascending"));const f={field:o,order:u};let d;return _Se(a)?d=a:ye(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Vs(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:u}=i,f=a.map(y=>{const v=r[y];return ca(v)}).filter(y=>!!y),d=ESe(n),h=n.encoding.order;let p;if(re(h)||de(h))p=Xj(h);else{const y=Lq(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new Vs(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ze(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[pe(r,{binSuffix:"mid"})]:[pe(r,{}),pe(r,{binSuffix:"end"})]:[pe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:u,as:f}=this._stack;if(u)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=pe(d,{expr:"datum"}),v=pe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${XA(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:pe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:pe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class jd extends yt{transform;clone(){return new jd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??pe(t)}hash(){return`WindowTransform ${Ze(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>c3(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],u=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),u.push(h.order??"ascending");const f={field:o,order:u},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function wSe(e){function t(n){if(!(n instanceof Pd)){const i=n.clone();if(i instanceof Oi){const r=WA+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ra||i instanceof Vs||i instanceof jd||i instanceof vc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function VA(e){if(e instanceof Pd)if(e.numChildren()===1&&!(e.children[0]instanceof Oi)){const t=e.children[0];(t instanceof ra||t instanceof Vs||t instanceof jd||t instanceof vc)&&t.addDimensions(e.fields),t.swapWithParent(),VA(e)}else{const t=e.model.component.data.main;MG(t);const n=wSe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(VA)}function MG(e){if(e instanceof Oi&&e.type===Lt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Pd||(t.swapWithParent(),MG(e))}}const WA="scale_",g1=5;function QA(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!QA(t.children))return!1}return!0}function qr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function mF(e,t,n){let i=e.sources,r=!1;return r=qr(new gSe,i)||r,r=qr(new dSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=qr(new ySe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=qr(new pSe,i)||r,r=qr(new xSe(t),i)||r,r=qr(new hSe,i)||r,r=qr(new mSe,i)||r,r=qr(new bSe,i)||r,r=qr(new vSe,i)||r,r=qr(new fSe,i)||r,r=qr(new SSe,i)||r),e.sources=i,r}function ASe(e,t){QA(e.sources);let n=0,i=0;for(let r=0;r<g1&&mF(e,t,!0);r++)n++;e.sources.map(VA);for(let r=0;r<g1&&mF(e,t,!1);r++)i++;QA(e.sources),Math.max(n,i)===g1&&fe(`Maximum optimization runs(${g1}) reached.`)}class bn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new bn(()=>t(n))}}function $G(e){Ft(e)?CSe(e):MSe(e)}function CSe(e){const t=e.component.scales;for(const n of le(t)){const i=TSe(e,n);if(t[n].setWithExplicit("domains",i),DSe(e,n),e.component.data.isFaceted){let a=e;for(;!sr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Is(o)&&(o.data=WA+o.data.replace(WA,""))}}}function MSe(e){for(const n of e.children)$G(n);const t=e.component.scales;for(const n of le(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=bl(i,s.getWithExplicit("domains"),"domains","scale",ZA);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&fe(x1e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function $Se(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=yF(t,n);if(!r){fe(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=yF(t,n);if(r)return"unaggregated"}return e}function TSe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=$Se(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&cn(i.x2)?cn(i.x)?bl(Uo(n,r,e,"x"),Uo(n,r,e,"x2"),"domain","scale",ZA):Uo(n,r,e,"x2"):t==="y"&&cn(i.y2)?cn(i.y)?bl(Uo(n,r,e,"y"),Uo(n,r,e,"y2"),"domain","scale",ZA):Uo(n,r,e,"y2"):Uo(n,r,e,t)}function kSe(e,t,n){return e.map(i=>({signal:`{data: ${lx(i,{timeUnit:n,type:t})}}`}))}function p_(e,t,n){const i=An(n)?.unit;return t==="temporal"||i?kSe(e,t,i):[e]}function Uo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:u}=n,f=cn(r[i]),{type:d}=f,h=f.timeUnit,p=_xe({invalid:Wa("invalid",a,o),isPath:zl(s)});if(Yye(t)){const b=Uo(e,void 0,n,i),S=p_(t.unionWith,d,h);return ka([...S,...b.value])}else{if(Me(t))return ka([t]);if(t&&t!=="unaggregated"&&!xq(t))return ka(p_(t,d,h))}if(u&&i===u.fieldChannel){if(u.offset==="normalize")return Qi([[0,1]]);const b=n.requestDataName(p);return Qi([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=us(i)&&de(f)?OSe(n,i,e):void 0;if(cs(f)){const b=p_([f.datum],d,h);return Qi(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Qi([{data:n.requestDataName(p),field:pe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:pe({field:b,aggregate:"max"})}])}else if(Mt(v.bin)){if(Cn(e))return Qi(e==="bin-ordinal"?[]:[{data:Sp(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i,m0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!ve(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Mt(b)){const S=lk(n,v.field,b);return Qi([new bn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return Qi([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ve(["time","utc"],e)){const b=r[ls(i)];if(Fq(v,b,a,o)){const S=n.requestDataName(p),_=vl({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=_p(s)&&_!==.5&&Qt(i);return Qi([{data:S,field:n.vgField(i,w?{suffix:gx}:{})},{data:S,field:n.vgField(i,{suffix:w?px:"end"})}])}}return Qi(y?[{data:Sp(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function m_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":rx),...i?{field:zr(i)}:{},...r?{order:r}:{}}}function DSe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=xq(i)?i:void 0,s=dc(r)&&Qb(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function OSe(e,t,n){if(!Cn(n))return;const i=e.fieldDef(t),r=i.sort;if(Nq(r))return{op:"min",field:pd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Ys(r)){const o=a&&!s.has(r.field);return m_(r,o)}else if(_ve(r)){const{encoding:o,order:u}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(Ks(d)||Nl(d))return m_({field:pe(f),order:u},p);if(c3(d)||!d)return m_({op:d,field:h,order:u},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ve(["ascending",void 0],r))return!0}}function yF(e,t){const{aggregate:n,type:i}=e;return n?ye(n)&&!n1e.has(n)?{valid:!1,reason:W1e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Q1e(e)}:{valid:!0}:{valid:!1,reason:V1e(e)}}function ZA(e,t,n,i){return e.explicit&&t.explicit&&fe(tye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function RSe(e){const t=za(e.map(s=>{if(Is(s)){const{sort:o,...u}=s;return u}return s}),Ze),n=za(e.map(s=>{if(Is(s)){const o=s.sort;return o!==void 0&&!Sp(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ze);if(t.length===0)return;if(t.length===1){const s=e[0];if(Is(s)&&n.length>0){let o=n[0];if(n.length>1){fe(Mz);const u=n.filter(f=>ve(f)&&"op"in f&&f.op!=="min");n.every(f=>ve(f)&&"op"in f)&&u.length===1?o=u[0]:o=!0}else if(ve(o)&&"field"in o){const u=o.field;s.field===u&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=za(n.map(s=>Sp(s)||!("op"in s)||ye(s.op)&&_e(Kme,s.op)?s:(fe(iye(s)),!0)),Ze);let r;i.length===1?r=i[0]:i.length>1&&(fe(Mz),r=!0);const a=za(e.map(s=>Is(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function dk(e){if(Is(e)&&ye(e.field))return e.field;if(i1e(e)){let t;for(const n of e.fields)if(Is(n)&&ye(n.field)){if(!t)t=n.field;else if(t!==n.field)return fe(rye),t}return fe(aye),t}else if(r1e(e)){fe(sye);const t=e.fields[0];return ye(t)?t:void 0}}function xx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Is(r)&&(r.data=e.lookupDataSource(r.data)),r));return RSe(i)}function TG(e){return qd(e)||hk(e)?e.children.reduce((t,n)=>t.concat(TG(n)),vF(e)):vF(e)}function vF(e){return le(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:u,range:f,reverse:d,...h}=r,p=NSe(r.range,a,n,e),y=xx(e,n),v=o?Nxe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function NSe(e,t,n,i){if(Qt(n)){if(hc(e))return{step:{signal:`${t}_step`}}}else if(ve(e)&&Is(e))return{...e,data:i.lookupDataSource(e.data)};return e}class kG extends uo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ve([Nn.LOG,Nn.TIME,Nn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ve([Nn.LINEAR,Nn.SQRT,Nn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(re(o)){const u=o[0],f=o[o.length-1];if(st(u)&&st(f))if(u<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const zSe=["range","scheme"];function FSe(e){const t=e.component.scales;for(const n of u3){const i=t[n];if(!i)continue;const r=LSe(n,e);i.setWithExplicit("range",r)}}function bF(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Ui(t),s=e.getName(a);if(ve(i)&&i.binned&&i.step!==void 0)return new bn(()=>{const o=e.scaleName(t),u=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${u})`});if(Mt(i)){const o=lk(e,r,i);return new bn(()=>{const u=e.getSignalName(o),f=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function LSe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of zSe)if(n[h]!==void 0){const p=DA(a,h),y=Sq(e,h);if(!p)fe(eq(a,h,e));else if(y)fe(y);else switch(h){case"range":{const v=n.range;if(re(v)){if(Qt(e))return ka(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return bn.fromName(_,S)}return b}))}else if(ve(v))return ka({data:t.requestDataName(Lt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return ka(v)}case"scheme":return ka(USe(n[h]))}}const s=e===Rt||e==="xOffset"?"width":"height",o=i[s];if(Za(o)){if(Qt(e))if(Cn(a)){const h=OG(o,t,e);if(h)return ka({step:h})}else fe(tq(s));else if(u0(e)){const h=e===$l?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=RG(o,a);if(v)return ka(v)}}}const{rangeMin:u,rangeMax:f}=n,d=BSe(e,t);return(u!==void 0||f!==void 0)&&DA(a,"rangeMin")&&re(d)&&d.length===2?ka([u??d[0],f??d[1]]):Qi(d)}function USe(e){return Gye(e)?{scheme:e.name,...ar(e,["name"])}:{scheme:e}}function DG(e,t,n,{center:i}={}){const r=Ui(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===$n&&la(n)?i?[bn.fromName(o=>`${s(o)}/2`,a),bn.fromName(o=>`-${s(o)}/2`,a)]:[bn.fromName(s,a),0]:i?[bn.fromName(o=>`-${s(o)}/2`,a),bn.fromName(o=>`${s(o)}/2`,a)]:[0,bn.fromName(s,a)]}function BSe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=cn(a[e]),u=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Rt:case $n:{if(Ve(["point","band"],u)){const h=NG(e,n,i.view);if(Za(h))return{step:OG(h,t,e)}}return DG(e,t,u)}case $l:case Ld:return ISe(e,t,u);case ao:{const h=qSe(r,i),p=HSe(r,n,t,i);return ld(u)?jSe(h,p,PSe(u,i,f,e)):[h,p]}case Ur:return[0,Math.PI*2];case cc:return[0,360];case ma:return[0,new bn(()=>{const h=t.getSignalName(sr(t.parent)?"child_width":"width"),p=t.getSignalName(sr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Tl:return{step:1e3/i.scale.framesPerSecond};case Ol:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Rl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Li:return"symbol";case Fi:case ss:case os:return u==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case so:case kl:case Dl:return[i.scale.minOpacity,i.scale.maxOpacity]}}function OG(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=a3(n),s=i[a];if(gH({step:e,offsetIsDiscrete:Be(s)&&pq(s.type)})==="offset"&&Vq(i,a)){const u=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(u.get("type")==="band"){const p=u.get("paddingInner")??u.get("padding")??0,y=u.get("paddingOuter")??u.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${u1e(h)})`}}else return e.step}function RG(e,t){if(gH({step:e,offsetIsDiscrete:Cn(t)})==="offset")return{step:e.step}}function ISe(e,t,n){const i=e===$l?"x":"y",r=t.getScaleComponent(i);if(!r)return DG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:u}=t;if(a==="band"){const f=NG(i,t.size,t.config.view);if(Za(f)){const d=RG(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(de(f)&&f.timeUnit){const d=fq(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=vl({fieldDef:f,markDef:o,config:u})-.5,y=p!==0?` + ${p}`:"";if(h){const v=Me(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=Me(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return Ej(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function NG(e,t,n){const i=e===Rt?"width":"height",r=t[i];return r||bv(n,i)}function PSe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&re(n)?n.length+1:(fe(pye(i)),3)}}function jSe(e,t,n){const i=()=>{const r=ta(t),a=ta(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Me(t)?new bn(i):{signal:i()}}function qSe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Zb("size",e))}const xF=.95;function HSe(e,t,n,i){const r={x:bF(n,"x"),y:bF(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=SF(t,r,i.view);return st(a)?a-1:new bn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=SF(t,r,i.view);return st(a)?Math.pow(xF*a,2):new bn(()=>`pow(${xF} * ${a.signal}, 2)`)}}throw new Error(Zb("size",e))}function SF(e,t,n){const i=Za(e.width)?e.width.step:zA(n,"width"),r=Za(e.height)?e.height.step:zA(n,"height");return t.x||t.y?new bn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function zG(e,t){Ft(e)?GSe(e,t):LG(e,t)}function GSe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of le(n)){const u=s[o],f=n[o],d=e.getScaleComponent(o),h=cn(r[o]),p=u[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=DA(y,t),_=Sq(o,t);if(p!==void 0&&(S?_&&fe(_):fe(eq(y,t,o))),S&&_===void 0)if(p!==void 0){const w=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":gc(u[t])||A==="temporal"||w?f.set(t,{signal:lx(u[t],{type:A,timeUnit:w})},!0):f.set(t,u[t],!0);break;default:f.copyKeyFromObject(t,u)}}else{const w=ue(EF,t)?EF[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:a,config:i,hasNestedOffsetScale:Wq(r,o),hasSecondaryRangeChannel:!!r[ls(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const EF={bins:({model:e,fieldOrDatumDef:t})=>de(t)?YSe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>XSe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>VSe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>WSe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>QSe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>ZSe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=de(e)?e.sort:void 0;return KSe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>JSe(e,t,n,i,r,a.scale,s)};function FG(e){Ft(e)?FSe(e):LG(e,"range")}function LG(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?FG(i):zG(i,t);for(const i of le(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=bl(r,o,t,"scale",MH((u,f)=>{switch(t){case"range":return u.step&&f.step?u.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function YSe(e,t){const n=t.bin;if(Mt(n)){const i=lk(e,t.field,n);return new bn(()=>e.getSignalName(i))}else if(On(n)&&dc(n)&&n.step!==void 0)return{step:n.step}}function XSe(e,t){if(Ve([Fi,ss,os],e)&&t!=="nominal")return"hcl"}function VSe(e,t,n,i,r,a){if(!(ca(a)?.bin||re(n)||r!=null||i!=null||Ve([Nn.TIME,Nn.UTC],e)))return Qt(t)?!0:void 0}function WSe(e,t,n,i,r,a){if(Qt(e)){if(Fa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(de(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Nn.POINT)return n.pointPadding}}function QSe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:u,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Wt(s,n==="bar"?o:n==="tick"?f:u)}else if(u0(t)&&i===Nn.BAND)return r.offsetBandPaddingInner}}function ZSe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Nn.BAND)return Wt(s,Me(i)?{signal:`${i.signal}/2`}:i/2)}else if(u0(t)){if(n===Nn.POINT)return .5;if(n===Nn.BAND)return r.offsetBandPaddingOuter}}}function KSe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return la(e)&&t==="descending"?Me(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(la(e)&&t==="descending")return!0}function JSe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&la(r)){if(re(n)){const u=n[0],f=n[n.length-1];if(st(u)&&u<=0&&st(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ld(r))return!0;if(!(de(t)&&t.bin)&&Ve([...oo,...qme],e)){const{orient:u,type:f}=i;return Ve(["bar","area","line","trail"],f)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ve(["bar","area"],f)&&!s?!0:a?.zero}return!1}function eEe(e,t,n,i,r=!1){const a=tEe(t,n,i,r),{type:s}=e;return us(t)?s!==void 0?Kye(t,s)?de(n)&&!Zye(s,n.type)?(fe(J1e(s,a)),a):s:(fe(K1e(t,s,a)),a):a:null}function tEe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(Rf(e)||r_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&fe(a_(e,"ordinal")),"ordinal";if(i_(e))return"band";if(Qt(e)||u0(e)){if(Ve(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in l3)return"band";const r=n[Ui(e)];return Qu(r)||cd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Rf(e)?"time":r_(e)==="discrete"?(fe(a_(e,"temporal")),"ordinal"):de(t)&&t.timeUnit&&An(t.timeUnit).utc?"utc":i_(e)?"band":"time";case"quantitative":return Rf(e)?de(t)&&Mt(t.bin)?"bin-ordinal":"linear":r_(e)==="discrete"?(fe(a_(e,"quantitative")),"ordinal"):i_(e)?"band":"linear";case"geojson":return}throw new Error(Kj(t.type))}function nEe(e,{ignoreRange:t}={}){UG(e),$G(e);for(const n of Qye)zG(e,n);t||FG(e)}function UG(e){Ft(e)?e.component.scales=iEe(e):e.component.scales=aEe(e)}function iEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of u3){const s=cn(t[a]);if(s&&n===wq&&a===Li&&s.type===Ud)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const u=Wq(t,a),f=eEe(o,a,s,i,u);r[a]=new kG(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const rEe=MH((e,t)=>Tz(e)-Tz(t));function aEe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){UG(r);for(const a of le(r.component.scales))if(i.scale[a]??=pG(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?Iye(s.value,o.value)?n[a]=bl(s,o,"type","scale",rEe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of le(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new kG(a,s);for(const o of e.children){const u=o.component.scales[r];u&&(o.renameScale(u.get("name"),a),u.merged=!0)}}return t}class y_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ft(e){return e?.type==="unit"}function sr(e){return e?.type==="facet"}function hk(e){return e?.type==="concat"}function qd(e){return e?.type==="layer"}class gk{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Rn(o),this.name=t.name??r,this.title=qo(t.title)?{text:t.title}:t.title?Rn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new y_,this.projectionNameMap=i?i.projectionNameMap:new y_,this.signalNameMap=i?i.signalNameMap:new y_,this.data=t.data,this.description=t.description,this.transforms=fxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:pbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:ax(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new uo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){nEe(this)}parseProjection(){AG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){xG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of le(i)){const s=i[a];s!==void 0&&(r[a]=Tt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:At(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=C2e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Mr)t[i].title&&n.push(x2e(this,i));for(const i of rk)n=n.concat(S2e(this,i));return n}assembleAxes(){return o2e(this.component.axes,this.config)}assembleLegends(){return EG(this)}assembleProjections(){return W2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...qj(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ve(["unit","layer"],this.type)?Ve(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",At(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||sr(this.parent)?TG(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ot((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Lt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(sr(this.parent)){const n=hG(t),i=Vb(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Cn(a)&&hc(s)){const o=r.get("name"),u=xx(this,i),f=dk(u);if(f){const d=pe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:dG(o,r,d)}}else return fe(d3(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(zj(t)&&us(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(g1e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class BG extends gk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return pe(i,n)}reduceFieldDef(t,n){return Hve(this.getMapping(),(i,r,a)=>{const s=ca(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){I3(this.getMapping(),(i,r)=>{const a=ca(i);a&&t(a,r)},n)}}class Sx extends yt{transform;clone(){return new Sx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ze(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Ex extends yt{transform;clone(){return new Ex(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ze(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class _x extends yt{transform;clone(){return new _x(this.parent,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ze(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class wx extends yt{transform;clone(){return new wx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ze(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ff extends yt{fields;geojson;signal;clone(){return new Ff(null,Le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[va,ya],[Fr,ba]]){const a=r.map(s=>{const o=cn(n.encoding[s]);return de(o)?o.field:cs(o)?{expr:`${o.datum}`}:ua(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Ff(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Li)){const r=n.typedFieldDef(Li);r.type===Ud&&(t=new Ff(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(ye);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ze(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Ap extends yt{projection;fields;as;clone(){return new Ap(null,this.projection,Le(this.fields),Le(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[va,ya],[Fr,ba]]){const r=i.map(s=>{const o=cn(n.encoding[s]);return de(o)?o.field:cs(o)?{expr:`${o.datum}`}:ua(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Fr?"2":"";(r[0]||r[1])&&(t=new Ap(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ye))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ze(this.fields)} ${Ze(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Du extends yt{transform;clone(){return new Du(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Du(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(de(r)&&de(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:u,value:f,frame:d,keyvals:h}=s.impute,p=Kq(n.mark,i);return new Du(t,{impute:s.field,key:o.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Ze(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...i?{keyvals:Ybe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,f,d]}else return[u]}}class Ax extends yt{transform;clone(){return new Ax(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ze(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Cp extends yt{transform;secondary;clone(){return new Cp(null,Le(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(Xbe(s)){let u=jG(s.data,a);u||(u=new ec(s.data),a.push(u));const f=n.getName(`lookup_${r}`);o=new Oi(u,f,Lt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(Vbe(s)){const u=s.param;i={as:u,...i};let f;try{f=n.getSelectionComponent(Ot(u),u)}catch{throw new Error(v1e(u))}if(o=f.materialized,!o)throw new Error(b1e(u))}return new Cp(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?xe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ze({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:xe(this.transform.as)}:{}};else{let n=this.transform.as;ye(n)||(fe(k1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Cx extends yt{transform;clone(){return new Cx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ze(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Mx extends yt{transform;clone(){return new Mx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ze(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class $x extends yt{transform;clone(){return new $x(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ze(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class Tx extends yt{transform;clone(){return new Tx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ze(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function IG(e){let t=0;function n(i,r){if(i instanceof ec&&!i.isGenerator&&!dd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Zn&&(i.parent instanceof ec&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Pd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof b0||i instanceof x0||i instanceof yd||i instanceof Id||i instanceof gd||i instanceof Ap||i instanceof ra||i instanceof Cp||i instanceof jd||i instanceof vc||i instanceof wx||i instanceof _x||i instanceof Sx||i instanceof Ax||i instanceof Cx||i instanceof Mx||i instanceof xl||i instanceof Tx||i instanceof $x||i instanceof Ex)&&r.transform.push(i.assemble()),(i instanceof ja||i instanceof Ia||i instanceof Du||i instanceof Vs||i instanceof Ff)&&r.transform.push(...i.assemble()),i instanceof Oi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Oi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Oi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function sEe(e){const t=[],n=IG(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function oEe(e,t){const n=[],i=IG(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function lEe(e){return e==="top"||e==="left"||Me(e)?"header":"footer"}function uEe(e){for(const t of Mr)cEe(e,t);_F(e,"x"),_F(e,"y")}function cEe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=md("title",null,i,t);let u=Nf(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(u=re(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=md("labelOrient",s.header,i,t),d=s.header!==null?Wt(s.header?.labels,i.header.labels,!0):!1,h=Ve(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[PG(e,t,d)]}}}function PG(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function _F(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=ok(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const u=lEe(o.get("orient"));s[u]??=[PG(e,a,!1)];const f=Fg(o,"main",e.config,{header:!0});f&&s[u][0].axes.push(f),o.mainExtracted=!0}}}}function fEe(e){pk(e),_v(e,"width"),_v(e,"height")}function dEe(e){pk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";_v(e,t),_v(e,n)}function pk(e){for(const t of e.children)t.parseLayoutSize()}function _v(e,t){const n=hG(t),i=Vb(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const u=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??pG(i,e);if(f==="independent"&&u.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==u.value){s=void 0;break}s=bl(s,u,n,"")}else s=u}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function hEe(e){const{size:t,component:n}=e;for(const i of oo){const r=Ui(i);if(t[r]){const a=t[r];n.layoutSize.set(r,Za(a)?"step":a,!0)}else{const a=gEe(e,r);n.layoutSize.set(r,a,!1)}}}function gEe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Cn(a)){const o=bv(i.view,t);return hc(s)||Za(o)?"step":o}else return NA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return NA(i.view,t);{const a=bv(i.view,t);return Za(a)?a.step:a}}}function KA(e,t,n){return pe(t,{suffix:`by_${pe(e)}`,...n})}class Zg extends BG{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=xk(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!h0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=le(t),i={};for(const r of n){if(![Hs,Gs].includes(r)){fe(Zb(r,"facet"));break}const a=t[r];if(a.field===void 0){fe(TA(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=B3(t,n);return i.header?i.header=Rn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ue(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=kx(this),this.child.parseData()}parseLayoutSize(){pk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,nn(this.component.selection).some(t=>Pa(t))&&g3(h3)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),uEe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Mr)for(const i of ak){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=md("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const u=vx(n,o);t.titleAnchor??={},t.titleAnchor[u]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[u]??={},t[u][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Zg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Zg?{...this.channelHasField("column")?{encode:{update:{columns:{field:pe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Zg){if(this.child.channelHasField("column")){const r=pe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of oo){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(Cn(s)&&hc(o)){const u=xx(this.child,r),f=dk(u);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):fe(d3(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),u=[];for(const d of Mr){const h=this.facet[d];if(h){u.push(pe(h));const{bin:p,sort:y}=h;if(Mt(p)&&u.push(pe(h,{binSuffix:"end"})),Ys(y)){const{field:v,op:b=rx}=y,S=KA(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(re(y)){const v=pd(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:u,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ys(i.sort)?[KA(i,i.sort,{expr:"datum"})]:re(i.sort)?[pd(i,t,{expr:"datum"})]:[pe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Ys(r)?r.order:!re(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return GA(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of rk)if(t[r]){const a=md("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return GA(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=sEe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Mr.map(u=>this.facetSortFields(u)).flat(),order:Mr.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(kxe(this,[]))}]}getMapping(){return this.facet}}function pEe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Ys(a.sort)){const{field:s,op:o=rx}=a.sort;e=r=new vc(e,{joinaggregate:[{op:o,field:s,as:KA(a,a.sort,{forAs:!0})}],groupby:[pe(a)]})}return r}return null}function jG(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(wp(e)&&wp(i)){if(tr(e.values,i.values))return n}else if(dd(e)&&dd(i)){if(e.url===i.url)return n}else if($H(e)&&e.name===n.dataName)return n}}return null}function mEe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new ec({values:[]});return t.push(i),i}const n=jG(e.data,t);if(n)return al(e.data)||(n.data.format=_j({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new ec(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function yEe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(rxe(r))s=e=new gd(e,r),a="derived";else if(Z3(r)){const o=lSe(r);s=e=Zn.makeWithAncestors(e,{},o,n)??e,e=new Id(e,t,r.filter)}else if(_H(r))s=e=ja.makeFromTransform(e,r,t),a="number";else if(sxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Zn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ia.makeFromTransform(e,r);else if(oxe(r))s=e=ra.makeFromTransform(e,r),a="number",ik(t)&&(e=new xl(e));else if(EH(r))s=e=Cp.make(e,t,r,i++),a="derived";else if(txe(r))s=e=new jd(e,r),a="number";else if(nxe(r))s=e=new vc(e,r),a="number";else if(lxe(r))s=e=Vs.makeFromTransform(e,r),a="derived";else if(uxe(r))s=e=new wx(e,r),a="derived";else if(cxe(r))s=e=new Ex(e,r),a="derived";else if(ixe(r))s=e=new _x(e,r),a="derived";else if(Wbe(r))s=e=new $x(e,r),a="derived";else if(exe(r))e=new Tx(e,r);else if(axe(r))s=e=Du.makeFromTransform(e,r),a="derived";else if(Qbe(r))s=e=new Sx(e,r),a="derived";else if(Zbe(r))s=e=new Cx(e,r),a="derived";else if(Kbe(r))s=e=new Mx(e,r),a="derived";else if(Jbe(r))s=e=new Ax(e,r),a="derived";else{fe(T1e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function kx(e){let t=mEe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(al(r)||dd(r)||wp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Exe;al(r)?(TH(r)?t=new x0(t,r.sequence):K3(r)&&(t=new b0(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Zn.makeExplicit(t,e,s)??t,t=new xl(t);const o=e.parent&&qd(e.parent);(Ft(e)||sr(e))&&o&&(t=ja.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=yEe(t,e,s));const u=cSe(e),f=uSe(e);t=Zn.makeWithAncestors(t,{},{...u,...f},s)??t,Ft(e)&&(t=Ff.parseAll(t,e),t=Ap.parseAll(t,e)),(Ft(e)||sr(e))&&(o||(t=ja.makeFromEncoding(t,e)??t),t=Ia.makeFromEncoding(t,e)??t,t=gd.parseAllForSortIndex(t,e));const d=t=p1(Lt.Raw,e,t);if(Ft(e)){const S=ra.makeFromEncoding(t,e);S&&(t=S,ik(e)&&(t=new xl(t))),t=Du.makeFromEncoding(t,e)??t,t=Vs.makeFromEncoding(t,e)??t}let h,p;if(Ft(e)){const{markDef:S,mark:_,config:w}=e,A=St("invalid",S,w),{marks:C,scales:M}=p=DH({invalid:A,isPath:zl(_)});C!==M&&M==="include-invalid-values"&&(h=t=p1(Lt.PreFilterInvalid,e,t)),C==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t)}const y=t=p1(Lt.Main,e,t);let v;if(Ft(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t,v=t=p1(Lt.PostFilterInvalid,e,t))}Ft(e)&&a2e(e,y);let b=null;if(sr(e)){const S=e.getName("facet");t=pEe(t,e.facet)??t,b=new Pd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function p1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Oi(n,a,e,r);return i[a]=s,s}class vEe extends gk{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&fe(C1e),this.children=this.getChildren(t).map((a,s)=>xk(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=kx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Pa(t))&&g3(h3)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return fx(t)?t.vconcat:W3(t)?t.hconcat:t.concat}parseLayoutSize(){dEe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=sk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function bEe(e){return e===!1||e===null}const xEe={disable:1,gridScale:1,scale:1,...Yq,labelExpr:1,encode:1},qG=le(xEe);class mk extends uo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new mk(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!bEe(this.get(t))}hasOrientSignalRef(){return Me(this.explicit.orient)}}function SEe(e,t,n){const{encoding:i,config:r}=e,a=cn(i[t])??cn(i[ls(t)]),s=e.axis(t)||{},{format:o,formatType:u}=s;if(Zu(u))return{text:na({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:u,config:r}),...n};if(o===void 0&&u===void 0&&r.customFormatTypes){if(ud(a)==="quantitative"){if(cd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(ud(a)==="temporal"&&r.timeFormatType&&de(a)&&!a.timeUnit)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function EEe(e){return oo.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[TEe(n,e)]),t),{})}const _Ee={bottom:"top",top:"bottom",left:"right",right:"left"};function wEe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of le(r.component.axes))n.axis[a]=ok(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=AEe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of oo){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:u}=s.getWithExplicit("orient");if(!Me(o)){if(i[o]>0&&!u){const f=_Ee[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function AEe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=CEe(r,a)}}}else return t.map(n=>n.clone());return e}function CEe(e,t){for(const n of qG){const i=bl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return Qj(r,a);case"gridScale":return{explicit:r.explicit,value:Wt(r.value,a.value)}}return hx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function MEe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Me(n.labelAngle)?n.labelAngle:Ep(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===lG(i,r))return!0}return e===n[t]}const $Ee=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function TEe(e,t){let n=t.axis(e);const i=new mk,r=cn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||p2e(e),u=t.getScaleComponent(e).get("type"),f=l2e(e,u,o,t.config),d=n!==void 0?!n:qA("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=d2e(r,n,e,s.style,f),p=Oq(n.formatType,r,u),y=Dq(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:u,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const _ of qG){const w=_ in uF?uF[_](v):Fz(_)?n[_]:void 0,A=w!==void 0,C=MEe(w,_,n,t,e);if(A&&C)i.set(_,w,C);else{const{configValue:M=void 0,configFrom:k=void 0}=Fz(_)&&_!=="values"?qA(_,s.style,n.style,f):{},T=M!==void 0;A&&!T?i.set(_,w,C):(k!=="vgAxisConfig"||$Ee.has(_)&&T||y0(M)||Me(M))&&i.set(_,M,!1)}}const b=n.encoding??{},S=Gq.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=gG(b[w]??{},t),C=w==="labels"?SEe(t,e,A):A;return C!==void 0&&!At(C)&&(_[w]={update:C}),_},{});return At(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function kEe({encoding:e,size:t}){for(const n of oo){const i=Ui(n);Za(t[i])&&Jo(e[n])&&(delete t[i],fe(tq(i)))}return t}const DEe={vgMark:"arc",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Js(e,"radius"),...Js(e,"theta")})},OEe={vgMark:"area",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...xv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...xv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...nk(e)})},REe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},NEe={vgMark:"shape",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&de(n)&&n.type===Ud?{field:pe(n,{expr:"datum"})}:{}}]}},zEe={vgMark:"image",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y"),...ek(e,"url")})},FEe={vgMark:"line",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e,{vgChannel:"strokeWidth"}),...nk(e)})},LEe={vgMark:"trail",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...nk(e)})};function yk(e,t){const{config:n}=e;return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...zn("angle",e),...UEe(e,n,t)}}function UEe(e,t,n){return n?{shape:{value:n}}:zn("shape",e)}const BEe={vgMark:"symbol",encodeEntry:e=>yk(e)},IEe={vgMark:"symbol",encodeEntry:e=>yk(e,"circle")},PEe={vgMark:"symbol",encodeEntry:e=>yk(e,"square")},jEe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},qEe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...xv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...xv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...zn("size",e,{vgChannel:"strokeWidth"})}}},HEe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Br(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...ek(e),...zn("size",e,{vgChannel:"fontSize"}),...zn("angle",e),...aF("align",GEe(e.markDef,n,t)),...aF("baseline",YEe(e.markDef,n,t)),...gi("radius",e,{defaultPos:null}),...gi("theta",e,{defaultPos:null})}}};function GEe(e,t,n){if(St("align",e,n)===void 0)return"center"}function YEe(e,t,n){if(St("baseline",e,n)===void 0)return"middle"}const XEe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,r),...gi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Tt(St("thickness",n,t))}}},m1={arc:DEe,area:OEe,bar:REe,circle:IEe,geoshape:NEe,image:zEe,line:FEe,point:BEe,rect:jEe,rule:qEe,square:PEe,text:HEe,tick:XEe,trail:LEe};function VEe(e){if(Ve([nx,ex,nve],e.mark)){const t=Kq(e.mark,e.encoding);if(t.length>0)return WEe(e,t)}else if(e.mark===tx){const t=MA.some(n=>St(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return QEe(e)}return vk(e)}const wF="faceted_path_";function WEe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:wF+e.requestDataName(Lt.Main),data:e.requestDataName(Lt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:vk(e,{fromPrefix:wF})}]}const AF="stack_group_";function QEe(e){const[t]=vk(e,{fromPrefix:AF}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...id(t.encode.update,["y","yc","y2","height",...MA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ar(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ar(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of MA){const d=Wa(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Tt(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),h=pe(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(pe(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const h=Wa(d,e.markDef,e.config);return h!==void 0?{...f,[d]:Tt(h)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Lt.Main),name:AF+e.requestDataName(Lt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function ZEe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!re(s)&&ua(s)&&AA(s.value)||!s&&AA(St("order",r,a)))){if((re(s)||de(s))&&!n)return Xj(s,{expr:"datum"});if(zl(i)){const o=r.orient==="horizontal"?"y":"x",u=t[o];if(de(u))return{field:o}}}}function vk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Wt(i.clip,KEe(e),JEe(e)),o=Gj(i),u=r.key,f=ZEe(e),d=e_e(e),h=St("aria",i,a),p=m1[n].postEncodingTransform?m1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:m1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...u?{key:u.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Lt.Main)},encode:{update:m1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function KEe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function JEe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function e_e(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=le(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class HG extends BG{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,Uz(t)?t.view:void 0);const s=Qa(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=Ube(s,a,{graticule:t.data&&K3(t.data)}));const u=this.encoding=jve(t.encoding||{},o,s.filled,a);this.markDef=bH(s,u,a),this.size=kEe({encoding:u,size:Uz(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=vH(this.markDef,u),this.specifiedScales=this.initScales(o,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>X3(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===wq,i=t&&Nme.some(r=>Be(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return u3.reduce((i,r)=>{const a=cn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Rn(t);return re(n)&&(r.domain=n.map(Ji)),re(i)&&(r.range=i.map(Ji)),r}initAxes(t){return oo.reduce((n,i)=>{const r=t[i];if(Be(r)||i===Rt&&Be(t.x2)||i===$n&&Be(t.y2)){const a=Be(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=le(t),i={};for(const r of n){const a=t[r];i[r]=y0(a)?Hj(a):Ji(a)}return i}initLegends(t){return Gme.reduce((n,i)=>{const r=cn(t[i]);if(r&&Xme(i)){const a=r.legend;n[i]=a&&Rn(a)}return n},{})}parseData(){this.component.data=kx(this)}parseLayoutSize(){hEe(this)}parseSelections(){this.component.selection=r2e(this,this.selection)}parseMarkGroup(){this.component.mark=VEe(this)}parseAxesAndHeaders(){this.component.axes=EEe(this)}assembleSelectionTopLevelSignals(t){return Dxe(this,t)}assembleSignals(){return[...aG(this),...Txe(this,[])]}assembleSelectionData(t){return Oxe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return sk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+RH)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!qd(this.parent))&&(t=LH(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Tu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ca(n)}typedFieldDef(t){const n=this.fieldDef(t);return bi(n)?n:null}}class bk extends gk{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,u)=>{if(dx(o))return new bk(o,this,this.getName(`layer_${u}`),s,a);if(lo(o))return new HG(o,this,this.getName(`layer_${u}`),s,a);throw new Error(f3(o))})}parseData(){this.component.data=kx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){fEe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Pa(t))&&g3(h3)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){wEe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),aG(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),sk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of xe(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Rxe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),EG(this))}}function xk(e,t,n,i,r){if(ax(e))return new Zg(e,t,n,r);if(dx(e))return new bk(e,t,n,i,r);if(lo(e))return new HG(e,t,n,i,r);if(dbe(e))return new vEe(e,t,n,r);throw new Error(f3(e))}function t_e(e,t={}){t.logger&&mye(t.logger),t.fieldTitle&&jq(t.fieldTitle);try{const n=yH(bd(t.config,e.config)),i=CH(e,n),r=xk(i,null,"",void 0,n);return r.parse(),ASe(r.component.data,r),{spec:i_e(r,n_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&yye(),t.fieldTitle&&Rve()}}function n_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):ye(t)&&(t={type:t}),r&&a&&bxe(t.type)){if(r==="step"&&a==="step")fe(Ez()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";fe(Ez(Vb(s)));const o=s==="width"?"height":"width";t.type=xxe(o)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Qz(n,!1),...Qz(e,!0)}}function i_e(e,t,n={},i){const r=e.config?Cbe(e.config):void 0,a=oEe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),u=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...u?{title:u}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...hH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const r_e=$me.version,a_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ad,accessPathWithDatum:t3,accessWithDatumToUnescapedPath:pt,compile:t_e,contains:Ve,deepEqual:tr,deleteNestedProperty:cv,duplicate:Le,entries:ml,every:KT,fieldIntersection:e3,flatAccessWithDatum:Aj,getFirstDefined:Wt,hasIntersection:JT,hasProperty:ue,hash:Ze,internalField:$j,isBoolean:Sp,isEmpty:At,isEqual:kme,isInternalField:Tj,isNullOrFalse:AA,isNumeric:jb,keys:le,logicalExpr:Wg,mergeDeep:_j,never:Ej,normalize:CH,normalizeAngle:Ep,omit:ar,pick:id,prefixGenerator:CA,removePathFromField:Fd,replaceAll:Gu,replacePathInField:zr,resetIdCounter:Ome,setEqual:wj,some:rd,stringify:dt,titleCase:s0,unique:za,uniqueId:Mj,vals:nn,varName:Ot,version:r_e},Symbol.toStringTag,{value:"Module"}));function GG(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var s_e="3.0.0",o_e={version:s_e};const mf="#fff",CF="#888",l_e={background:"#333",view:{stroke:CF},title:{color:mf,subtitleColor:mf},style:{"guide-label":{fill:mf},"guide-title":{fill:mf}},axis:{domainColor:mf,gridColor:CF,tickColor:mf}},ru="#4572a7",u_e={background:"#fff",arc:{fill:ru},area:{fill:ru},line:{stroke:ru,strokeWidth:2},path:{stroke:ru},rect:{fill:ru},shape:{stroke:ru},symbol:{fill:ru,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},au="#30a2da",v_="#cbcbcb",c_e="#999",f_e="#333",MF="#f0f0f0",$F="#333",d_e={arc:{fill:au},area:{fill:au},axis:{domainColor:v_,grid:!0,gridColor:v_,gridWidth:1,labelColor:c_e,labelFontSize:10,titleColor:f_e,tickColor:v_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:MF,group:{fill:MF},legend:{labelColor:$F,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:$F,titleFontSize:14,titlePadding:10},line:{stroke:au,strokeWidth:2},path:{stroke:au,strokeWidth:.5},rect:{fill:au},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:au},bar:{binSpacing:2,fill:au,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},su="#000",h_e={group:{fill:"#e5e5e5"},arc:{fill:su},area:{fill:su},line:{stroke:su},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{fill:su,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},g_e=22,p_e="normal",TF="Benton Gothic, sans-serif",kF=11.5,m_e="normal",ou="#82c6df",b_="Benton Gothic Bold, sans-serif",DF="normal",OF=13,fg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},y_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:b_,fontSize:g_e,fontWeight:p_e},arc:{fill:ou},area:{fill:ou},line:{stroke:ou,strokeWidth:2},path:{stroke:ou},rect:{fill:ou},shape:{stroke:ou},symbol:{fill:ou,size:30},axis:{labelFont:TF,labelFontSize:kF,labelFontWeight:m_e,titleFont:b_,titleFontSize:OF,titleFontWeight:DF},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:TF,labelFontSize:kF,symbolType:"square",titleFont:b_,titleFontSize:OF,titleFontWeight:DF},range:{category:fg["category-6"],diverging:fg["fireandice-6"],heatmap:fg["fire-7"],ordinal:fg["fire-7"],ramp:fg["fire-7"]}},lu="#ab5787",y1="#979797",v_e={background:"#f9f9f9",arc:{fill:lu},area:{fill:lu},line:{stroke:lu},path:{stroke:lu},rect:{fill:lu},shape:{stroke:lu},symbol:{fill:lu,size:30},axis:{domainColor:y1,domainWidth:.5,gridWidth:.2,labelColor:y1,tickColor:y1,tickWidth:.2,titleColor:y1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},uu="#3e5c69",b_e={background:"#fff",arc:{fill:uu},area:{fill:uu},line:{stroke:uu},path:{stroke:uu},rect:{fill:uu},shape:{stroke:uu},symbol:{fill:uu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Sr="#1696d2",RF="#000000",x_e="#FFFFFF",v1="Lato",x_="Lato",S_e="Lato",E_e="#DEDDDD",__e=18,dg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},w_e={background:x_e,title:{anchor:"start",fontSize:__e,font:v1},axisX:{domain:!0,domainColor:RF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:x_,labelAngle:0,tickColor:RF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:v1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:E_e,gridWidth:1,labelFontSize:12,labelFont:x_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:v1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:x_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:v1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:dg["six-groups-cat-1"],diverging:dg["diverging-colors"],heatmap:dg["diverging-colors"],ordinal:dg["six-groups-seq"],ramp:dg["shades-blue"]},area:{fill:Sr},rect:{fill:Sr},line:{color:Sr,stroke:Sr,strokeWidth:5},trail:{color:Sr,stroke:Sr,strokeWidth:0,size:1},path:{stroke:Sr,strokeWidth:.5},point:{filled:!0},text:{font:S_e,color:Sr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Sr,stroke:null}},arc:{fill:Sr},shape:{stroke:Sr},symbol:{fill:Sr,size:30}},cu="#3366CC",NF="#ccc",b1="Arial, sans-serif",A_e={arc:{fill:cu},area:{fill:cu},path:{stroke:cu},rect:{fill:cu},shape:{stroke:cu},symbol:{stroke:cu},circle:{fill:cu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:b1,fontSize:12},"guide-title":{font:b1,fontSize:12},"group-title":{font:b1,fontSize:12}},title:{font:b1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:NF,tickColor:NF,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Sk=e=>e*(1/3+1),zF=Sk(9),FF=Sk(10),LF=Sk(12),hg="Segoe UI",UF="wf_standard-font, helvetica, arial, sans-serif",BF="#252423",gg="#605E5C",IF="transparent",C_e="#C8C6C4",Gr="#118DFF",M_e="#12239E",$_e="#E66C37",T_e="#6B007B",k_e="#E044A7",D_e="#744EC2",O_e="#D9B300",R_e="#D64550",YG=Gr,XG="#DEEFFF",PF=[XG,YG],N_e=[XG,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",YG],z_e={view:{stroke:IF},background:IF,font:hg,header:{titleFont:UF,titleFontSize:LF,titleColor:BF,labelFont:hg,labelFontSize:FF,labelColor:gg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:gg,labelFontSize:zF,titleFont:UF,titleColor:BF,titleFontSize:LF,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:C_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Gr},line:{stroke:Gr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:hg,fontSize:zF,fill:gg},arc:{fill:Gr},area:{fill:Gr,line:!0,opacity:.6},path:{stroke:Gr},rect:{fill:Gr},point:{fill:Gr,filled:!0,size:75},shape:{stroke:Gr},symbol:{fill:Gr,strokeWidth:1.5,size:50},legend:{titleFont:hg,titleFontWeight:"bold",titleColor:gg,labelFont:hg,labelFontSize:FF,labelColor:gg,symbolType:"circle",symbolSize:75},range:{category:[Gr,M_e,$_e,T_e,k_e,D_e,O_e,R_e],diverging:PF,heatmap:PF,ordinal:N_e}},S_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',F_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',E_=400,x1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},L_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],U_e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Dx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=x1.gridBg[e],r=x1.textPrimary[e],a=x1.textSecondary[e],s=n==="dark"?L_e:U_e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:S_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:F_e,labelFontWeight:E_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:x1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:S_,fill:a,fontWeight:E_},"guide-title":{font:S_,fill:a,fontWeight:E_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const B_e=Dx({theme:"white",background:"#ffffff"}),I_e=Dx({theme:"g10",background:"#f4f4f4"}),P_e=Dx({theme:"g90",background:"#262626"}),j_e=Dx({theme:"g100",background:"#161616"}),q_e=o_e.version,H_e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:I_e,carbong100:j_e,carbong90:P_e,carbonwhite:B_e,dark:l_e,excel:u_e,fivethirtyeight:d_e,ggplot2:h_e,googlecharts:A_e,latimes:y_e,powerbi:z_e,quartz:v_e,urbaninstitute:w_e,version:q_e,vox:b_e},Symbol.toStringTag,{value:"Module"}));function G_e(e,t,n,i){if(re(e))return`[${e.map(r=>t(ye(r)?r:jF(r,n))).join(", ")}]`;if(ve(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const u=Object.keys(o);if(u.length>0){r+="<table>";for(const f of u){let d=o[f];d!==void 0&&(ve(d)&&(d=jF(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Y_e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function jF(e,t){return JSON.stringify(e,Y_e(t))}var X_e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const VG="vg-tooltip-element",V_e={offsetX:10,offsetY:10,id:VG,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:W_e,maxDepth:2,formatTooltip:G_e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function W_e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Q_e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return X_e.toString().replaceAll(VG,e)}function WG(e,t,{offsetX:n,offsetY:i}){const r=QG({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(ZG(r[s],t))return r[s];return r["top-left"]}function Z_e(e,t,n,i,r){const{position:a,offsetX:s,offsetY:o}=r,u=e._el.getBoundingClientRect(),f=e._origin,d=K_e(u,f,n),h=QG(d,i,s,o),p=Array.isArray(a)?a:[a];for(const y of p)if(ZG(h[y],i)&&!J_e(t,h[y],i))return h[y];return WG(t,i,r)}function K_e(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const o=i.x2-i.x1,u=i.y2-i.y1;return{x1:r,x2:r+o,y1:a,y2:a+u}}function QG(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,o=r-t.width/2,u=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,h=e.y2+i;return{top:{x:o,y:f},bottom:{x:o,y:h},left:{x:s,y:d},right:{x:u,y:d},"top-left":{x:s,y:f},"top-right":{x:u,y:f},"bottom-left":{x:s,y:h},"bottom-right":{x:u,y:h}}}function ZG(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function J_e(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class ewe{call;options;el;constructor(t){this.options={...V_e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Q_e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?Z_e(t,n,i,this.el.getBoundingClientRect(),this.options):WG(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var __={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var twe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),nwe=Object.prototype.hasOwnProperty;function JA(e,t){return nwe.call(e,t)}function eC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)JA(e,r)&&i.push(r);return i}function nr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function tC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function hu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function KG(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function nC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(nC(e[t]))return!0}else if(typeof e=="object"){for(var i=eC(e),r=i.length,a=0;a<r;a++)if(nC(e[i[a]]))return!0}}return!1}function qF(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var JG=function(e){twe(t,e);function t(n,i,r,a,s){var o=this.constructor,u=e.call(this,qF(n,{name:i,index:r,operation:a,tree:s}))||this;return u.name=i,u.index=r,u.operation=a,u.tree=s,Object.setPrototypeOf(u,o.prototype),u.message=qF(n,{name:i,index:r,operation:a,tree:s}),u}return t}(Error),Pt=JG,iwe=nr,Cf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=wv(n,this.path);i&&(i=nr(i));var r=Ou(n,{op:"remove",path:this.from}).removed;return Ou(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=wv(n,this.from);return Ou(n,{op:"add",path:this.path,value:nr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Mp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},rwe={add:function(e,t,n){return tC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Cf.move,copy:Cf.copy,test:Cf.test,_get:Cf._get};function wv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ou(e,n),n.value}function Ou(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Av(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=wv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Mp(e,t.value),s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=nr(e));var o=t.path||"",u=o.split("/"),f=e,d=1,h=u.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Av;;){if(y=u[d],y&&y.indexOf("~")!=-1&&(y=KG(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&u[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=u.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!tC(y))throw new Pt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);tC(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new Pt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=rwe[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=Cf[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new Pt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Ox(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=nr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Ou(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function awe(e,t,n){var i=Ou(e,t);if(i.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Av(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Cf[e.op]){if(typeof e.path!="string")throw new Pt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&nC(e.value))throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Pt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Pt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=eY([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function eY(e,t,n){try{if(!Array.isArray(e))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Ox(nr(t),nr(e),n||!0);else{n=n||Av;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Pt)return r;throw r}}function Mp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Mp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Mp(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var swe=Object.freeze({__proto__:null,JsonPatchError:Pt,_areEquals:Mp,applyOperation:Ou,applyPatch:Ox,applyReducer:awe,deepClone:iwe,getValueByPointer:wv,validate:eY,validator:Av});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ek=new WeakMap,owe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),lwe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function uwe(e){return Ek.get(e)}function cwe(e,t){return e.observers.get(t)}function fwe(e,t){e.observers.delete(t.callback)}function dwe(e,t){t.unobserve()}function hwe(e,t){var n=[],i,r=uwe(e);if(!r)r=new owe(e),Ek.set(e,r);else{var a=cwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=nr(e),t){i.callback=t,i.next=null;var s=function(){iC(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){iC(i),clearTimeout(i.next),fwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new lwe(t,i)),i}function iC(e,t){t===void 0&&(t=!1);var n=Ek.get(e.object);_k(n.value,e.object,e.patches,"",t),e.patches.length&&Ox(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function _k(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=eC(t),s=eC(e),o=!1,u=s.length-1;u>=0;u--){var f=s[u],d=e[f];if(JA(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?_k(d,h,n,i+"/"+hu(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+hu(f),value:nr(d)}),n.push({op:"replace",path:i+"/"+hu(f),value:nr(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+hu(f),value:nr(d)}),n.push({op:"remove",path:i+"/"+hu(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var u=0;u<a.length;u++){var f=a[u];!JA(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+hu(f),value:nr(t[f])})}}}function gwe(e,t,n){n===void 0&&(n=!1);var i=[];return _k(e,t,i,"",n),i}var pwe=Object.freeze({__proto__:null,compare:gwe,generate:iC,observe:hwe,unobserve:dwe});Object.assign({},swe,pwe,{JsonPatchError:JG,deepClone:nr,escapePathComponent:hu,unescapePathComponent:KG});function mwe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w_,HF;function ywe(){if(HF)return w_;HF=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return w_=e,w_}var A_,GF;function wk(){if(GF)return A_;GF=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return A_=i=>i?typeof i!="object"?e:i:t,A_}var S1={exports:{}},C_,YF;function Ak(){if(YF)return C_;YF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return C_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C_}var M_,XF;function Rx(){return XF||(XF=1,M_=typeof process=="object"&&__&&__.NODE_DEBUG&&/\bsemver\b/i.test(__.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),M_}var VF;function Ck(){return VF||(VF=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Ak(),a=Rx();t=e.exports={};const s=t.re=[],o=t.safeRe=[],u=t.src=[],f=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),C=h++;a(S,C,_),d[S]=C,u[C]=_,f[C]=A,s[C]=new RegExp(_,w?"g":void 0),o[C]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),b("FULL",`^${u[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),b("LOOSE",`^${u[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),b("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?(?:${u[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",u[d.COERCE],!0),b("COERCERTLFULL",u[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(S1,S1.exports)),S1.exports}var $_,WF;function vwe(){if(WF)return $_;WF=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return $_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},$_}var T_,QF;function Mk(){if(QF)return T_;QF=1;const e=Rx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Ak(),{safeRe:i,safeSrc:r,t:a}=Ck(),s=wk(),{compareIdentifiers:o}=vwe();class u{constructor(d,h){if(h=s(h),d instanceof u){if(d.loose===!!h.loose&&d.includePrerelease===!!h.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",d,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const p=d.trim().match(h.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const v=+y;if(v>=0&&v<n)return v}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(e("SemVer.compare",this.version,this.options,d),!(d instanceof u)){if(typeof d=="string"&&d===this.version)return 0;d=new u(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof u||(d=new u(d,this.options)),o(this.major,d.major)||o(this.minor,d.minor)||o(this.patch,d.patch)}comparePre(d){if(d instanceof u||(d=new u(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let h=0;do{const p=this.prerelease[h],y=d.prerelease[h];if(e("prerelease compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++h)}compareBuild(d){d instanceof u||(d=new u(d,this.options));let h=0;do{const p=this.build[h],y=d.build[h];if(e("build compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++h)}inc(d,h,p){if(d.startsWith("pre")){if(!h&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const y=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),v=`-${h}`.match(y);if(!v||v[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,p),this.inc("pre",h,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,p),this.inc("pre",h,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(h===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(h){let v=[h,y];p===!1&&(v=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return T_=u,T_}var k_,ZF;function Hd(){if(ZF)return k_;ZF=1;const e=Mk();return k_=(n,i,r)=>new e(n,r).compare(new e(i,r)),k_}var D_,KF;function bwe(){if(KF)return D_;KF=1;const e=Hd();return D_=(n,i,r)=>e(n,i,r)===0,D_}var O_,JF;function xwe(){if(JF)return O_;JF=1;const e=Hd();return O_=(n,i,r)=>e(n,i,r)!==0,O_}var R_,e8;function Swe(){if(e8)return R_;e8=1;const e=Hd();return R_=(n,i,r)=>e(n,i,r)>0,R_}var N_,t8;function Ewe(){if(t8)return N_;t8=1;const e=Hd();return N_=(n,i,r)=>e(n,i,r)>=0,N_}var z_,n8;function _we(){if(n8)return z_;n8=1;const e=Hd();return z_=(n,i,r)=>e(n,i,r)<0,z_}var F_,i8;function wwe(){if(i8)return F_;i8=1;const e=Hd();return F_=(n,i,r)=>e(n,i,r)<=0,F_}var L_,r8;function Awe(){if(r8)return L_;r8=1;const e=bwe(),t=xwe(),n=Swe(),i=Ewe(),r=_we(),a=wwe();return L_=(o,u,f,d)=>{switch(u){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${u}`)}},L_}var U_,a8;function Cwe(){if(a8)return U_;a8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new u(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}U_=t;const n=wk(),{safeRe:i,t:r}=Ck(),a=Awe(),s=Rx(),o=Mk(),u=tY();return U_}var B_,s8;function tY(){if(s8)return B_;s8=1;const e=/\s+/g;class t{constructor(F,R){if(R=r(R),F instanceof t)return F.loose===!!R.loose&&F.includePrerelease===!!R.includePrerelease?F:new t(F.raw,R);if(F instanceof a)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const R=this.set[F];for(let P=0;P<R.length;P++)P>0&&(this.formatted+=" "),this.formatted+=R[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const P=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+F,X=i.get(P);if(X)return X;const K=this.options.loose,z=K?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];F=F.replace(z,G(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(u[f.COMPARATORTRIM],d),s("comparator trim",F),F=F.replace(u[f.TILDETRIM],h),s("tilde trim",F),F=F.replace(u[f.CARETTRIM],p),s("caret trim",F);let W=F.split(" ").map(Se=>w(Se,this.options)).join(" ").split(/\s+/).map(Se=>L(Se,this.options));K&&(W=W.filter(Se=>(s("loose invalid filter",Se,this.options),!!Se.match(u[f.COMPARATORLOOSE])))),s("range list",W);const ne=new Map,se=W.map(Se=>new a(Se,this.options));for(const Se of se){if(b(Se))return[Se];ne.set(Se.value,Se)}ne.size>1&&ne.has("")&&ne.delete("");const me=[...ne.values()];return i.set(P,me),me}intersects(F,R){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(P=>_(P,R)&&F.set.some(X=>_(X,R)&&P.every(K=>X.every(z=>K.intersects(z,R)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(H(this.set[R],F,this.options))return!0;return!1}}B_=t;const n=ywe(),i=new n,r=wk(),a=Cwe(),s=Rx(),o=Mk(),{safeRe:u,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=Ck(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=Ak(),b=I=>I.value==="<0.0.0-0",S=I=>I.value==="",_=(I,F)=>{let R=!0;const P=I.slice();let X=P.pop();for(;R&&P.length;)R=P.every(K=>X.intersects(K,F)),X=P.pop();return R},w=(I,F)=>(s("comp",I,F),I=k(I,F),s("caret",I),I=C(I,F),s("tildes",I),I=O(I,F),s("xrange",I),I=B(I,F),s("stars",I),I),A=I=>!I||I.toLowerCase()==="x"||I==="*",C=(I,F)=>I.trim().split(/\s+/).map(R=>M(R,F)).join(" "),M=(I,F)=>{const R=F.loose?u[f.TILDELOOSE]:u[f.TILDE];return I.replace(R,(P,X,K,z,W)=>{s("tilde",I,P,X,K,z,W);let ne;return A(X)?ne="":A(K)?ne=`>=${X}.0.0 <${+X+1}.0.0-0`:A(z)?ne=`>=${X}.${K}.0 <${X}.${+K+1}.0-0`:W?(s("replaceTilde pr",W),ne=`>=${X}.${K}.${z}-${W} <${X}.${+K+1}.0-0`):ne=`>=${X}.${K}.${z} <${X}.${+K+1}.0-0`,s("tilde return",ne),ne})},k=(I,F)=>I.trim().split(/\s+/).map(R=>T(R,F)).join(" "),T=(I,F)=>{s("caret",I,F);const R=F.loose?u[f.CARETLOOSE]:u[f.CARET],P=F.includePrerelease?"-0":"";return I.replace(R,(X,K,z,W,ne)=>{s("caret",I,X,K,z,W,ne);let se;return A(K)?se="":A(z)?se=`>=${K}.0.0${P} <${+K+1}.0.0-0`:A(W)?K==="0"?se=`>=${K}.${z}.0${P} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.0${P} <${+K+1}.0.0-0`:ne?(s("replaceCaret pr",ne),K==="0"?z==="0"?se=`>=${K}.${z}.${W}-${ne} <${K}.${z}.${+W+1}-0`:se=`>=${K}.${z}.${W}-${ne} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.${W}-${ne} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?z==="0"?se=`>=${K}.${z}.${W}${P} <${K}.${z}.${+W+1}-0`:se=`>=${K}.${z}.${W}${P} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.${W} <${+K+1}.0.0-0`),s("caret return",se),se})},O=(I,F)=>(s("replaceXRanges",I,F),I.split(/\s+/).map(R=>N(R,F)).join(" ")),N=(I,F)=>{I=I.trim();const R=F.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return I.replace(R,(P,X,K,z,W,ne)=>{s("xRange",I,P,X,K,z,W,ne);const se=A(K),me=se||A(z),Se=me||A(W),Ce=Se;return X==="="&&Ce&&(X=""),ne=F.includePrerelease?"-0":"",se?X===">"||X==="<"?P="<0.0.0-0":P="*":X&&Ce?(me&&(z=0),W=0,X===">"?(X=">=",me?(K=+K+1,z=0,W=0):(z=+z+1,W=0)):X==="<="&&(X="<",me?K=+K+1:z=+z+1),X==="<"&&(ne="-0"),P=`${X+K}.${z}.${W}${ne}`):me?P=`>=${K}.0.0${ne} <${+K+1}.0.0-0`:Se&&(P=`>=${K}.${z}.0${ne} <${K}.${+z+1}.0-0`),s("xRange return",P),P})},B=(I,F)=>(s("replaceStars",I,F),I.trim().replace(u[f.STAR],"")),L=(I,F)=>(s("replaceGTE0",I,F),I.trim().replace(u[F.includePrerelease?f.GTE0PRE:f.GTE0],"")),G=I=>(F,R,P,X,K,z,W,ne,se,me,Se,Ce)=>(A(P)?R="":A(X)?R=`>=${P}.0.0${I?"-0":""}`:A(K)?R=`>=${P}.${X}.0${I?"-0":""}`:z?R=`>=${R}`:R=`>=${R}${I?"-0":""}`,A(se)?ne="":A(me)?ne=`<${+se+1}.0.0-0`:A(Se)?ne=`<${se}.${+me+1}.0-0`:Ce?ne=`<=${se}.${me}.${Se}-${Ce}`:I?ne=`<${se}.${me}.${+Se+1}-0`:ne=`<=${ne}`,`${R} ${ne}`.trim()),H=(I,F,R)=>{for(let P=0;P<I.length;P++)if(!I[P].test(F))return!1;if(F.prerelease.length&&!R.includePrerelease){for(let P=0;P<I.length;P++)if(s(I[P].semver),I[P].semver!==a.ANY&&I[P].semver.prerelease.length>0){const X=I[P].semver;if(X.major===F.major&&X.minor===F.minor&&X.patch===F.patch)return!0}return!1}return!0};return B_}var I_,o8;function Mwe(){if(o8)return I_;o8=1;const e=tY();return I_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},I_}var $we=Mwe(),nY=mwe($we);function Twe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function u(){s<=0||(i.postMessage(n,a),setTimeout(u,r),s-=1)}setTimeout(u,r)}var kwe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function iY(e,...t){for(const n of t)Dwe(e,n);return e}function Dwe(e,t){for(const n of Object.keys(t))xd(e,n,t[n],!0)}const $a=mme;let $p=a_e;const l8=typeof window<"u"?window:void 0;$p===void 0&&l8?.vl?.compile&&($p=l8.vl);const Owe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Rwe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Lg={vega:"Vega","vega-lite":"Vega-Lite"},Cv={vega:$a.version,"vega-lite":$p?$p.version:"not available"},Nwe={vega:e=>e,"vega-lite":(e,t)=>$p.compile(e,{config:t}).spec},zwe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Fwe="chart-wrapper";function Lwe(e){return typeof e=="function"}function u8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Lg[i]} JSON Source`}function Uwe(e,t){if(e.$schema){const n=GG(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Lg[n.library]}, but mode argument sets ${Lg[t]??t}.`);const i=n.library;return nY(Cv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Lg[i]} ${n.version}, but the current version of ${Lg[i]} is v${Cv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function rY(e){return!!(e&&"load"in e)}function c8(e){return rY(e)?e:$a.loader(e)}function Bwe(e){const t=e.usermeta?.embedOptions??{};return ye(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Iwe(e,t,n={}){let i,r;ye(t)?(r=c8(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=Bwe(i),s=a.loader;(!r||s)&&(r=c8(n.loader??s));const o=await f8(a,r),u=await f8(n,r),f={...iY(u,o),config:bd(u.config??{},o.config??{})};return await jwe(e,i,f,r)}async function f8(e,t){const n=ye(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ye(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function Pwe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function jwe(e,t,n={},i){const r=n.theme?bd(H_e[n.theme],n.config??{}):n.config,a=Sl(n.actions)?n.actions:iY({},Owe,n.actions??{}),s={...Rwe,...n.i18n},o=n.renderer??"svg",u=n.logLevel??$a.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:k,rootContainer:T}=Pwe(d);if(!k.getElementById(M)){const O=document.createElement("style");O.id=M,O.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?kwe.toString():n.defaultStyle,T.appendChild(O)}}const h=Uwe(t,n.mode);let p=Nwe[h](t,r);if(h==="vega-lite"&&p.$schema){const M=GG(p.$schema);nY(Cv.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Cv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(Fwe),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):Ox(p,v,!0,!1).newDocument),n.formatLocale&&$a.formatLocale(n.formatLocale),n.timeFormatLocale&&$a.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const k=n.expressionFunctions[M];"fn"in k?$a.expressionFunction(M,k.fn,k.visitor):k instanceof Function&&$a.expressionFunction(M,k)}const{ast:b}=n,S=$a.parse(p,h==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||$a.View)(S,{loader:i,logLevel:u,renderer:o,...b?{expr:$a.expressionInterpreter??n.expr??Cme}:{}});if(_.addSignalListener("autosize",(M,k)=>{const{type:T}=k;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:k}=n,T=M&&!rY(M)?M?.baseURL:void 0,O=Lwe(k)?k:new ewe({baseURL:T,...k===!0?{}:k}).call;_.tooltip(O)}let{hover:w}=n;if(w===void 0&&(w=h==="vega"),w){const{hoverSet:M,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(M,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const O=document.createElement("summary");O.innerHTML=zwe,T.append(O),A=N=>{T.contains(N.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const O=s[`${T.toUpperCase()}_ACTION`],N=document.createElement("a"),B=ve(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;N.text=O,N.href="#",N.target="_blank",N.download=`${f}.${T}`,N.addEventListener("mousedown",async function(L){L.preventDefault();const G=await _.toImageURL(T,B);this.href=G}),k.append(N)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(O){u8(ZS(t),n.sourceHeader??"",n.sourceFooter??"",h),O.preventDefault()}),k.append(T)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(O){u8(ZS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),O.preventDefault()}),k.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",O=document.createElement("a");O.text=s.EDITOR_ACTION,O.href="#",O.addEventListener("click",function(N){Twe(window,T,{config:r,mode:v?"vega":h,renderer:o,spec:ZS(v?p:t)}),N.preventDefault()}),k.append(O)}}function C(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:C,embedOptions:n}}var P_={exports:{}},d8;function qwe(){return d8||(d8=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,r=0;t.Diff=function(a,s){return[a,s]},t.prototype.diff_main=function(a,s,o,u){typeof u>"u"&&(this.Diff_Timeout<=0?u=Number.MAX_VALUE:u=new Date().getTime()+this.Diff_Timeout*1e3);var f=u;if(a==null||s==null)throw new Error("Null input. (diff_main)");if(a==s)return a?[new t.Diff(r,a)]:[];typeof o>"u"&&(o=!0);var d=o,h=this.diff_commonPrefix(a,s),p=a.substring(0,h);a=a.substring(h),s=s.substring(h),h=this.diff_commonSuffix(a,s);var y=a.substring(a.length-h);a=a.substring(0,a.length-h),s=s.substring(0,s.length-h);var v=this.diff_compute_(a,s,d,f);return p&&v.unshift(new t.Diff(r,p)),y&&v.push(new t.Diff(r,y)),this.diff_cleanupMerge(v),v},t.prototype.diff_compute_=function(a,s,o,u){var f;if(!a)return[new t.Diff(i,s)];if(!s)return[new t.Diff(n,a)];var d=a.length>s.length?a:s,h=a.length>s.length?s:a,p=d.indexOf(h);if(p!=-1)return f=[new t.Diff(i,d.substring(0,p)),new t.Diff(r,h),new t.Diff(i,d.substring(p+h.length))],a.length>s.length&&(f[0][0]=f[2][0]=n),f;if(h.length==1)return[new t.Diff(n,a),new t.Diff(i,s)];var y=this.diff_halfMatch_(a,s);if(y){var v=y[0],b=y[1],S=y[2],_=y[3],w=y[4],A=this.diff_main(v,S,o,u),C=this.diff_main(b,_,o,u);return A.concat([new t.Diff(r,w)],C)}return o&&a.length>100&&s.length>100?this.diff_lineMode_(a,s,u):this.diff_bisect_(a,s,u)},t.prototype.diff_lineMode_=function(a,s,o){var u=this.diff_linesToChars_(a,s);a=u.chars1,s=u.chars2;var f=u.lineArray,d=this.diff_main(a,s,!1,o);this.diff_charsToLines_(d,f),this.diff_cleanupSemantic(d),d.push(new t.Diff(r,""));for(var h=0,p=0,y=0,v="",b="";h<d.length;){switch(d[h][0]){case i:y++,b+=d[h][1];break;case n:p++,v+=d[h][1];break;case r:if(p>=1&&y>=1){d.splice(h-p-y,p+y),h=h-p-y;for(var S=this.diff_main(v,b,!1,o),_=S.length-1;_>=0;_--)d.splice(h,0,S[_]);h=h+S.length}y=0,p=0,v="",b="";break}h++}return d.pop(),d},t.prototype.diff_bisect_=function(a,s,o){for(var u=a.length,f=s.length,d=Math.ceil((u+f)/2),h=d,p=2*d,y=new Array(p),v=new Array(p),b=0;b<p;b++)y[b]=-1,v[b]=-1;y[h+1]=0,v[h+1]=0;for(var S=u-f,_=S%2!=0,w=0,A=0,C=0,M=0,k=0;k<d&&!(new Date().getTime()>o);k++){for(var T=-k+w;T<=k-A;T+=2){var O=h+T,N;T==-k||T!=k&&y[O-1]<y[O+1]?N=y[O+1]:N=y[O-1]+1;for(var B=N-T;N<u&&B<f&&a.charAt(N)==s.charAt(B);)N++,B++;if(y[O]=N,N>u)A+=2;else if(B>f)w+=2;else if(_){var L=h+S-T;if(L>=0&&L<p&&v[L]!=-1){var G=u-v[L];if(N>=G)return this.diff_bisectSplit_(a,s,N,B,o)}}}for(var H=-k+C;H<=k-M;H+=2){var L=h+H,G;H==-k||H!=k&&v[L-1]<v[L+1]?G=v[L+1]:G=v[L-1]+1;for(var I=G-H;G<u&&I<f&&a.charAt(u-G-1)==s.charAt(f-I-1);)G++,I++;if(v[L]=G,G>u)M+=2;else if(I>f)C+=2;else if(!_){var O=h+S-H;if(O>=0&&O<p&&y[O]!=-1){var N=y[O],B=h+N-O;if(G=u-G,N>=G)return this.diff_bisectSplit_(a,s,N,B,o)}}}}return[new t.Diff(n,a),new t.Diff(i,s)]},t.prototype.diff_bisectSplit_=function(a,s,o,u,f){var d=a.substring(0,o),h=s.substring(0,u),p=a.substring(o),y=s.substring(u),v=this.diff_main(d,h,!1,f),b=this.diff_main(p,y,!1,f);return v.concat(b)},t.prototype.diff_linesToChars_=function(a,s){var o=[],u={};o[0]="";function f(y){for(var v="",b=0,S=-1,_=o.length;S<y.length-1;){S=y.indexOf(`
`,b),S==-1&&(S=y.length-1);var w=y.substring(b,S+1);(u.hasOwnProperty?u.hasOwnProperty(w):u[w]!==void 0)?v+=String.fromCharCode(u[w]):(_==d&&(w=y.substring(b),S=y.length),v+=String.fromCharCode(_),u[w]=_,o[_++]=w),b=S+1}return v}var d=4e4,h=f(a);d=65535;var p=f(s);return{chars1:h,chars2:p,lineArray:o}},t.prototype.diff_charsToLines_=function(a,s){for(var o=0;o<a.length;o++){for(var u=a[o][1],f=[],d=0;d<u.length;d++)f[d]=s[u.charCodeAt(d)];a[o][1]=f.join("")}},t.prototype.diff_commonPrefix=function(a,s){if(!a||!s||a.charAt(0)!=s.charAt(0))return 0;for(var o=0,u=Math.min(a.length,s.length),f=u,d=0;o<f;)a.substring(d,f)==s.substring(d,f)?(o=f,d=o):u=f,f=Math.floor((u-o)/2+o);return f},t.prototype.diff_commonSuffix=function(a,s){if(!a||!s||a.charAt(a.length-1)!=s.charAt(s.length-1))return 0;for(var o=0,u=Math.min(a.length,s.length),f=u,d=0;o<f;)a.substring(a.length-f,a.length-d)==s.substring(s.length-f,s.length-d)?(o=f,d=o):u=f,f=Math.floor((u-o)/2+o);return f},t.prototype.diff_commonOverlap_=function(a,s){var o=a.length,u=s.length;if(o==0||u==0)return 0;o>u?a=a.substring(o-u):o<u&&(s=s.substring(0,o));var f=Math.min(o,u);if(a==s)return f;for(var d=0,h=1;;){var p=a.substring(f-h),y=s.indexOf(p);if(y==-1)return d;h+=y,(y==0||a.substring(f-h)==s.substring(0,h))&&(d=h,h++)}},t.prototype.diff_halfMatch_=function(a,s){if(this.Diff_Timeout<=0)return null;var o=a.length>s.length?a:s,u=a.length>s.length?s:a;if(o.length<4||u.length*2<o.length)return null;var f=this;function d(A,C,M){for(var k=A.substring(M,M+Math.floor(A.length/4)),T=-1,O="",N,B,L,G;(T=C.indexOf(k,T+1))!=-1;){var H=f.diff_commonPrefix(A.substring(M),C.substring(T)),I=f.diff_commonSuffix(A.substring(0,M),C.substring(0,T));O.length<I+H&&(O=C.substring(T-I,T)+C.substring(T,T+H),N=A.substring(0,M-I),B=A.substring(M+H),L=C.substring(0,T-I),G=C.substring(T+H))}return O.length*2>=A.length?[N,B,L,G,O]:null}var h=d(o,u,Math.ceil(o.length/4)),p=d(o,u,Math.ceil(o.length/2)),y;if(!h&&!p)return null;p?h?y=h[4].length>p[4].length?h:p:y=p:y=h;var v,b,S,_;a.length>s.length?(v=y[0],b=y[1],S=y[2],_=y[3]):(S=y[0],_=y[1],v=y[2],b=y[3]);var w=y[4];return[v,b,S,_,w]},t.prototype.diff_cleanupSemantic=function(a){for(var s=!1,o=[],u=0,f=null,d=0,h=0,p=0,y=0,v=0;d<a.length;)a[d][0]==r?(o[u++]=d,h=y,p=v,y=0,v=0,f=a[d][1]):(a[d][0]==i?y+=a[d][1].length:v+=a[d][1].length,f&&f.length<=Math.max(h,p)&&f.length<=Math.max(y,v)&&(a.splice(o[u-1],0,new t.Diff(n,f)),a[o[u-1]+1][0]=i,u--,u--,d=u>0?o[u-1]:-1,h=0,p=0,y=0,v=0,f=null,s=!0)),d++;for(s&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),d=1;d<a.length;){if(a[d-1][0]==n&&a[d][0]==i){var b=a[d-1][1],S=a[d][1],_=this.diff_commonOverlap_(b,S),w=this.diff_commonOverlap_(S,b);_>=w?(_>=b.length/2||_>=S.length/2)&&(a.splice(d,0,new t.Diff(r,S.substring(0,_))),a[d-1][1]=b.substring(0,b.length-_),a[d+1][1]=S.substring(_),d++):(w>=b.length/2||w>=S.length/2)&&(a.splice(d,0,new t.Diff(r,b.substring(0,w))),a[d-1][0]=i,a[d-1][1]=S.substring(0,S.length-w),a[d+1][0]=n,a[d+1][1]=b.substring(w),d++),d++}d++}},t.prototype.diff_cleanupSemanticLossless=function(a){function s(w,A){if(!w||!A)return 6;var C=w.charAt(w.length-1),M=A.charAt(0),k=C.match(t.nonAlphaNumericRegex_),T=M.match(t.nonAlphaNumericRegex_),O=k&&C.match(t.whitespaceRegex_),N=T&&M.match(t.whitespaceRegex_),B=O&&C.match(t.linebreakRegex_),L=N&&M.match(t.linebreakRegex_),G=B&&w.match(t.blanklineEndRegex_),H=L&&A.match(t.blanklineStartRegex_);return G||H?5:B||L?4:k&&!O&&N?3:O||N?2:k||T?1:0}for(var o=1;o<a.length-1;){if(a[o-1][0]==r&&a[o+1][0]==r){var u=a[o-1][1],f=a[o][1],d=a[o+1][1],h=this.diff_commonSuffix(u,f);if(h){var p=f.substring(f.length-h);u=u.substring(0,u.length-h),f=p+f.substring(0,f.length-h),d=p+d}for(var y=u,v=f,b=d,S=s(u,f)+s(f,d);f.charAt(0)===d.charAt(0);){u+=f.charAt(0),f=f.substring(1)+d.charAt(0),d=d.substring(1);var _=s(u,f)+s(f,d);_>=S&&(S=_,y=u,v=f,b=d)}a[o-1][1]!=y&&(y?a[o-1][1]=y:(a.splice(o-1,1),o--),a[o][1]=v,b?a[o+1][1]=b:(a.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(a){for(var s=!1,o=[],u=0,f=null,d=0,h=!1,p=!1,y=!1,v=!1;d<a.length;)a[d][0]==r?(a[d][1].length<this.Diff_EditCost&&(y||v)?(o[u++]=d,h=y,p=v,f=a[d][1]):(u=0,f=null),y=v=!1):(a[d][0]==n?v=!0:y=!0,f&&(h&&p&&y&&v||f.length<this.Diff_EditCost/2&&h+p+y+v==3)&&(a.splice(o[u-1],0,new t.Diff(n,f)),a[o[u-1]+1][0]=i,u--,f=null,h&&p?(y=v=!0,u=0):(u--,d=u>0?o[u-1]:-1,y=v=!1),s=!0)),d++;s&&this.diff_cleanupMerge(a)},t.prototype.diff_cleanupMerge=function(a){a.push(new t.Diff(r,""));for(var s=0,o=0,u=0,f="",d="",h;s<a.length;)switch(a[s][0]){case i:u++,d+=a[s][1],s++;break;case n:o++,f+=a[s][1],s++;break;case r:o+u>1?(o!==0&&u!==0&&(h=this.diff_commonPrefix(d,f),h!==0&&(s-o-u>0&&a[s-o-u-1][0]==r?a[s-o-u-1][1]+=d.substring(0,h):(a.splice(0,0,new t.Diff(r,d.substring(0,h))),s++),d=d.substring(h),f=f.substring(h)),h=this.diff_commonSuffix(d,f),h!==0&&(a[s][1]=d.substring(d.length-h)+a[s][1],d=d.substring(0,d.length-h),f=f.substring(0,f.length-h))),s-=o+u,a.splice(s,o+u),f.length&&(a.splice(s,0,new t.Diff(n,f)),s++),d.length&&(a.splice(s,0,new t.Diff(i,d)),s++),s++):s!==0&&a[s-1][0]==r?(a[s-1][1]+=a[s][1],a.splice(s,1)):s++,u=0,o=0,f="",d="";break}a[a.length-1][1]===""&&a.pop();var p=!1;for(s=1;s<a.length-1;)a[s-1][0]==r&&a[s+1][0]==r&&(a[s][1].substring(a[s][1].length-a[s-1][1].length)==a[s-1][1]?(a[s][1]=a[s-1][1]+a[s][1].substring(0,a[s][1].length-a[s-1][1].length),a[s+1][1]=a[s-1][1]+a[s+1][1],a.splice(s-1,1),p=!0):a[s][1].substring(0,a[s+1][1].length)==a[s+1][1]&&(a[s-1][1]+=a[s+1][1],a[s][1]=a[s][1].substring(a[s+1][1].length)+a[s+1][1],a.splice(s+1,1),p=!0)),s++;p&&this.diff_cleanupMerge(a)},t.prototype.diff_xIndex=function(a,s){var o=0,u=0,f=0,d=0,h;for(h=0;h<a.length&&(a[h][0]!==i&&(o+=a[h][1].length),a[h][0]!==n&&(u+=a[h][1].length),!(o>s));h++)f=o,d=u;return a.length!=h&&a[h][0]===n?d:d+(s-f)},t.prototype.diff_prettyHtml=function(a){for(var s=[],o=/&/g,u=/</g,f=/>/g,d=/\n/g,h=0;h<a.length;h++){var p=a[h][0],y=a[h][1],v=y.replace(o,"&amp;").replace(u,"&lt;").replace(f,"&gt;").replace(d,"&para;<br>");switch(p){case i:s[h]='<ins style="background:#e6ffe6;">'+v+"</ins>";break;case n:s[h]='<del style="background:#ffe6e6;">'+v+"</del>";break;case r:s[h]="<span>"+v+"</span>";break}}return s.join("")},t.prototype.diff_text1=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==i&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_text2=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==n&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_levenshtein=function(a){for(var s=0,o=0,u=0,f=0;f<a.length;f++){var d=a[f][0],h=a[f][1];switch(d){case i:o+=h.length;break;case n:u+=h.length;break;case r:s+=Math.max(o,u),o=0,u=0;break}}return s+=Math.max(o,u),s},t.prototype.diff_toDelta=function(a){for(var s=[],o=0;o<a.length;o++)switch(a[o][0]){case i:s[o]="+"+encodeURI(a[o][1]);break;case n:s[o]="-"+a[o][1].length;break;case r:s[o]="="+a[o][1].length;break}return s.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(a,s){for(var o=[],u=0,f=0,d=s.split(/\t/g),h=0;h<d.length;h++){var p=d[h].substring(1);switch(d[h].charAt(0)){case"+":try{o[u++]=new t.Diff(i,decodeURI(p))}catch{throw new Error("Illegal escape in diff_fromDelta: "+p)}break;case"-":case"=":var y=parseInt(p,10);if(isNaN(y)||y<0)throw new Error("Invalid number in diff_fromDelta: "+p);var v=a.substring(f,f+=y);d[h].charAt(0)=="="?o[u++]=new t.Diff(r,v):o[u++]=new t.Diff(n,v);break;default:if(d[h])throw new Error("Invalid diff operation in diff_fromDelta: "+d[h])}}if(f!=a.length)throw new Error("Delta length ("+f+") does not equal source text length ("+a.length+").");return o},t.prototype.match_main=function(a,s,o){if(a==null||s==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,a.length)),a==s?0:a.length?a.substring(o,o+s.length)==s?o:this.match_bitap_(a,s,o):-1},t.prototype.match_bitap_=function(a,s,o){if(s.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var u=this.match_alphabet_(s),f=this;function d(N,B){var L=N/s.length,G=Math.abs(o-B);return f.Match_Distance?L+G/f.Match_Distance:G?1:L}var h=this.Match_Threshold,p=a.indexOf(s,o);p!=-1&&(h=Math.min(d(0,p),h),p=a.lastIndexOf(s,o+s.length),p!=-1&&(h=Math.min(d(0,p),h)));var y=1<<s.length-1;p=-1;for(var v,b,S=s.length+a.length,_,w=0;w<s.length;w++){for(v=0,b=S;v<b;)d(w,o+b)<=h?v=b:S=b,b=Math.floor((S-v)/2+v);S=b;var A=Math.max(1,o-b+1),C=Math.min(o+b,a.length)+s.length,M=Array(C+2);M[C+1]=(1<<w)-1;for(var k=C;k>=A;k--){var T=u[a.charAt(k-1)];if(w===0?M[k]=(M[k+1]<<1|1)&T:M[k]=(M[k+1]<<1|1)&T|((_[k+1]|_[k])<<1|1)|_[k+1],M[k]&y){var O=d(w,k-1);if(O<=h)if(h=O,p=k-1,p>o)A=Math.max(1,2*o-p);else break}}if(d(w+1,o)>h)break;_=M}return p},t.prototype.match_alphabet_=function(a){for(var s={},o=0;o<a.length;o++)s[a.charAt(o)]=0;for(var o=0;o<a.length;o++)s[a.charAt(o)]|=1<<a.length-o-1;return s},t.prototype.patch_addContext_=function(a,s){if(s.length!=0){if(a.start2===null)throw Error("patch not initialized");for(var o=s.substring(a.start2,a.start2+a.length1),u=0;s.indexOf(o)!=s.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)u+=this.Patch_Margin,o=s.substring(a.start2-u,a.start2+a.length1+u);u+=this.Patch_Margin;var f=s.substring(a.start2-u,a.start2);f&&a.diffs.unshift(new t.Diff(r,f));var d=s.substring(a.start2+a.length1,a.start2+a.length1+u);d&&a.diffs.push(new t.Diff(r,d)),a.start1-=f.length,a.start2-=f.length,a.length1+=f.length+d.length,a.length2+=f.length+d.length}},t.prototype.patch_make=function(a,s,o){var u,f;if(typeof a=="string"&&typeof s=="string"&&typeof o>"u")u=a,f=this.diff_main(u,s,!0),f.length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(a&&typeof a=="object"&&typeof s>"u"&&typeof o>"u")f=a,u=this.diff_text1(f);else if(typeof a=="string"&&s&&typeof s=="object"&&typeof o>"u")u=a,f=s;else if(typeof a=="string"&&typeof s=="string"&&o&&typeof o=="object")u=a,f=o;else throw new Error("Unknown call format to patch_make.");if(f.length===0)return[];for(var d=[],h=new t.patch_obj,p=0,y=0,v=0,b=u,S=u,_=0;_<f.length;_++){var w=f[_][0],A=f[_][1];switch(!p&&w!==r&&(h.start1=y,h.start2=v),w){case i:h.diffs[p++]=f[_],h.length2+=A.length,S=S.substring(0,v)+A+S.substring(v);break;case n:h.length1+=A.length,h.diffs[p++]=f[_],S=S.substring(0,v)+S.substring(v+A.length);break;case r:A.length<=2*this.Patch_Margin&&p&&f.length!=_+1?(h.diffs[p++]=f[_],h.length1+=A.length,h.length2+=A.length):A.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(h,b),d.push(h),h=new t.patch_obj,p=0,b=S,y=v);break}w!==i&&(y+=A.length),w!==n&&(v+=A.length)}return p&&(this.patch_addContext_(h,b),d.push(h)),d},t.prototype.patch_deepCopy=function(a){for(var s=[],o=0;o<a.length;o++){var u=a[o],f=new t.patch_obj;f.diffs=[];for(var d=0;d<u.diffs.length;d++)f.diffs[d]=new t.Diff(u.diffs[d][0],u.diffs[d][1]);f.start1=u.start1,f.start2=u.start2,f.length1=u.length1,f.length2=u.length2,s[o]=f}return s},t.prototype.patch_apply=function(a,s){if(a.length==0)return[s,[]];a=this.patch_deepCopy(a);var o=this.patch_addPadding(a);s=o+s+o,this.patch_splitMax(a);for(var u=0,f=[],d=0;d<a.length;d++){var h=a[d].start2+u,p=this.diff_text1(a[d].diffs),y,v=-1;if(p.length>this.Match_MaxBits?(y=this.match_main(s,p.substring(0,this.Match_MaxBits),h),y!=-1&&(v=this.match_main(s,p.substring(p.length-this.Match_MaxBits),h+p.length-this.Match_MaxBits),(v==-1||y>=v)&&(y=-1))):y=this.match_main(s,p,h),y==-1)f[d]=!1,u-=a[d].length2-a[d].length1;else{f[d]=!0,u=y-h;var b;if(v==-1?b=s.substring(y,y+p.length):b=s.substring(y,v+this.Match_MaxBits),p==b)s=s.substring(0,y)+this.diff_text2(a[d].diffs)+s.substring(y+p.length);else{var S=this.diff_main(p,b,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(S)/p.length>this.Patch_DeleteThreshold)f[d]=!1;else{this.diff_cleanupSemanticLossless(S);for(var _=0,w,A=0;A<a[d].diffs.length;A++){var C=a[d].diffs[A];C[0]!==r&&(w=this.diff_xIndex(S,_)),C[0]===i?s=s.substring(0,y+w)+C[1]+s.substring(y+w):C[0]===n&&(s=s.substring(0,y+w)+s.substring(y+this.diff_xIndex(S,_+C[1].length))),C[0]!==n&&(_+=C[1].length)}}}}}return s=s.substring(o.length,s.length-o.length),[s,f]},t.prototype.patch_addPadding=function(a){for(var s=this.Patch_Margin,o="",u=1;u<=s;u++)o+=String.fromCharCode(u);for(var u=0;u<a.length;u++)a[u].start1+=s,a[u].start2+=s;var f=a[0],d=f.diffs;if(d.length==0||d[0][0]!=r)d.unshift(new t.Diff(r,o)),f.start1-=s,f.start2-=s,f.length1+=s,f.length2+=s;else if(s>d[0][1].length){var h=s-d[0][1].length;d[0][1]=o.substring(d[0][1].length)+d[0][1],f.start1-=h,f.start2-=h,f.length1+=h,f.length2+=h}if(f=a[a.length-1],d=f.diffs,d.length==0||d[d.length-1][0]!=r)d.push(new t.Diff(r,o)),f.length1+=s,f.length2+=s;else if(s>d[d.length-1][1].length){var h=s-d[d.length-1][1].length;d[d.length-1][1]+=o.substring(0,h),f.length1+=h,f.length2+=h}return o},t.prototype.patch_splitMax=function(a){for(var s=this.Match_MaxBits,o=0;o<a.length;o++)if(!(a[o].length1<=s)){var u=a[o];a.splice(o--,1);for(var f=u.start1,d=u.start2,h="";u.diffs.length!==0;){var p=new t.patch_obj,y=!0;for(p.start1=f-h.length,p.start2=d-h.length,h!==""&&(p.length1=p.length2=h.length,p.diffs.push(new t.Diff(r,h)));u.diffs.length!==0&&p.length1<s-this.Patch_Margin;){var v=u.diffs[0][0],b=u.diffs[0][1];v===i?(p.length2+=b.length,d+=b.length,p.diffs.push(u.diffs.shift()),y=!1):v===n&&p.diffs.length==1&&p.diffs[0][0]==r&&b.length>2*s?(p.length1+=b.length,f+=b.length,y=!1,p.diffs.push(new t.Diff(v,b)),u.diffs.shift()):(b=b.substring(0,s-p.length1-this.Patch_Margin),p.length1+=b.length,f+=b.length,v===r?(p.length2+=b.length,d+=b.length):y=!1,p.diffs.push(new t.Diff(v,b)),b==u.diffs[0][1]?u.diffs.shift():u.diffs[0][1]=u.diffs[0][1].substring(b.length))}h=this.diff_text2(p.diffs),h=h.substring(h.length-this.Patch_Margin);var S=this.diff_text1(u.diffs).substring(0,this.Patch_Margin);S!==""&&(p.length1+=S.length,p.length2+=S.length,p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=S:p.diffs.push(new t.Diff(r,S))),y||a.splice(++o,0,p)}}},t.prototype.patch_toText=function(a){for(var s=[],o=0;o<a.length;o++)s[o]=a[o];return s.join("")},t.prototype.patch_fromText=function(a){var s=[];if(!a)return s;for(var o=a.split(`
`),u=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;u<o.length;){var d=o[u].match(f);if(!d)throw new Error("Invalid patch string: "+o[u]);var h=new t.patch_obj;for(s.push(h),h.start1=parseInt(d[1],10),d[2]===""?(h.start1--,h.length1=1):d[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(d[2],10)),h.start2=parseInt(d[3],10),d[4]===""?(h.start2--,h.length2=1):d[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(d[4],10)),u++;u<o.length;){var p=o[u].charAt(0);try{var y=decodeURI(o[u].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+y)}if(p=="-")h.diffs.push(new t.Diff(n,y));else if(p=="+")h.diffs.push(new t.Diff(i,y));else if(p==" ")h.diffs.push(new t.Diff(r,y));else{if(p=="@")break;if(p!=="")throw new Error('Invalid patch mode "'+p+'" in: '+y)}u++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var a,s;this.length1===0?a=this.start1+",0":this.length1==1?a=this.start1+1:a=this.start1+1+","+this.length1,this.length2===0?s=this.start2+",0":this.length2==1?s=this.start2+1:s=this.start2+1+","+this.length2;for(var o=["@@ -"+a+" +"+s+` @@
`],u,f=0;f<this.diffs.length;f++){switch(this.diffs[f][0]){case i:u="+";break;case n:u="-";break;case r:u=" ";break}o[f+1]=u+encodeURI(this.diffs[f][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r}(P_)),P_.exports}var Hwe=qwe();const $k=wV(Hwe),Gwe="https://vega.github.io/schema/vega/v6.json",Ywe="A node-link diagram with force-directed layout, depicting character co-occurrence in the novel Les Misérables.",Xwe=700,Vwe=500,Wwe=0,Qwe="none",Zwe=[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{name:"nodeRadius",value:22},{name:"nodeCharge",value:-30},{name:"linkDistance",value:100},{name:"static",value:!1},{name:"scoreThreshold",value:24,bind:{input:"range",min:0,max:30,step:1,name:"Score Threshold:"}},{description:"Freeze node while it is being dragged (no hover).",name:"fix",value:!1,on:[{events:"[symbol:pointerdown, window:pointerup] > window:pointermove!",update:"xy()",force:!0},{events:"window:pointerup",update:"false"}]},{name:"node",value:null,on:[{events:"symbol:click",update:"item()"}]},{name:"restart",value:0,on:[{events:{signal:"scoreThreshold"},update:"restart + 1"}]},{name:"clickedLink",value:null,on:[{events:"path:click",update:"item()"}]},{name:"clickedNode",value:null,on:[{events:"symbol:click",update:"item()"}]}],Kwe=[],Jwe=[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"category10"}},{name:"linkColor",type:"linear",domain:[0,10,24,30],range:["red","red","green","green"]}],eAe=[{name:"nodes",type:"symbol",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{stroke:[{test:"datum.hasEverCauseOfNeedsAttention",value:"yellow"},{value:"white"}],strokeWidth:[{test:"datum.hasEverCauseOfNeedsAttention",value:3},{value:1}]},update:{fill:[{test:"datum.isCauseOfNeedsAttention",value:"red"},{test:"datum.group === 0",value:"#808080"},{scale:"color",field:"group"}],size:{signal:"2 * nodeRadius * nodeRadius"},cursor:{value:"pointer"},tooltip:{signal:"datum"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},static:{signal:"static"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide",radius:{signal:"nodeRadius"}},{force:"nbody",strength:{signal:"nodeCharge"}},{force:"link",links:"link-data",distance:{signal:"linkDistance"}}]}]},{type:"path",from:{data:"link-data"},interactive:!0,encode:{enter:{stroke:{value:"#ccc"},strokeWidth:{value:3}},update:{stroke:{scale:"linkColor",field:"value"},tooltip:{signal:"datum"}},hover:{stroke:{value:"darkgreen"}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]},{type:"text",from:{data:"nodes"},interactive:!1,zindex:2,encode:{enter:{align:{value:"center"},baseline:{value:"middle"},fontSize:{value:12},fontWeight:{value:"bold"},fill:{value:"white"},text:{field:"datum.id"},x:{field:"x"},y:{field:"y"}},update:{x:{field:"x"},y:{field:"y"}}}}],h8={$schema:Gwe,description:Ywe,width:Xwe,height:Vwe,padding:Wwe,autosize:Qwe,signals:Zwe,data:Kwe,scales:Jwe,marks:eAe};function tAe(e,t){const n=new $k,i=["firstName","lastName","postcode","DoB"];let r=0;return i.forEach(a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",u=n.diff_main(s,o);r+=u.filter(f=>f[0]!==0).length}),30-r}function nAe({records:e,onEdgeClick:t,onNodeClick:n,scoreThreshold:i,onScoreThresholdChange:r}){const a=Vr.useRef(null),s=Vr.useRef(null);return Vr.useEffect(()=>{if(!e||!a.current)return;const o=e.map(d=>({...d,group:0})),u=[];for(let d=0;d<e.length;d++)for(let h=d+1;h<e.length;h++){const p=tAe(e[d],e[h]);u.push({source:d,target:h,value:p})}const f={...h8,data:[{name:"node-data",values:o},{name:"links-raw",values:u},{name:"link-data",source:"links-raw",transform:[{type:"filter",expr:"datum.value >= scoreThreshold"}]}],signals:h8.signals.map(d=>d.name==="scoreThreshold"?{...d,value:i}:d)};return Iwe(a.current,f,{actions:!0}).then(d=>{s.current=d.view,t&&s.current.addSignalListener("clickedLink",(h,p)=>t?.(p)),n&&s.current.addSignalListener("clickedNode",(h,p)=>n?.(p.datum)),s.current.addSignalListener("scoreThreshold",(h,p)=>{typeof r=="function"&&r(p)}),document.querySelectorAll(".vg-tooltip").forEach(h=>h.parentNode.removeChild(h))}).catch(console.error),()=>{if(s.current)try{t&&s.current.removeSignalListener("clickedLink",t),n&&s.current.removeSignalListener("clickedNode",n),s.current.removeSignalListener("scoreThreshold",r)}catch{}}},[e,t,i,r]),Vr.useEffect(()=>{s.current&&s.current.signal("scoreThreshold",i).run()},[i]),Ee.jsx("div",{ref:a})}function iAe({comparisonSlots:e}){const[t,n]=e,i=new $k,r=s=>{if(t&&n){const o=t[s]||"",u=n[s]||"",f=i.diff_main(String(o),String(u));return i.diff_cleanupSemantic(f),i.diff_prettyHtml(f).replace(/background:#ffe6e6/g,"background:#ffaaaa").replace(/background:#e6ffe6/g,"background:#aaffaa")}return""},a=(s,o)=>s?Ee.jsxs("tr",{children:[Ee.jsx("td",{children:o===1?"1️⃣":"2️⃣"}),Ee.jsx("td",{children:s.id}),Ee.jsx("td",{children:s.firstName}),Ee.jsx("td",{children:s.lastName}),Ee.jsx("td",{children:s.postcode}),Ee.jsx("td",{children:s.DoB})]}):Ee.jsxs("tr",{children:[Ee.jsx("td",{children:o===1?"1️⃣":"2️⃣"}),Ee.jsx("td",{colSpan:"5",className:"record-not-found",children:"Record did not exist at this point in time."})]});return Ee.jsxs("div",{className:"comparison-table-container",children:[Ee.jsx("h2",{children:"Detailed Comparison"}),(!t||!n)&&Ee.jsx("div",{className:"notice",children:Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Notice:"})," One or both of the selected records do not exist at this timestamp. The available data is shown below."]})}),Ee.jsxs("table",{children:[Ee.jsx("thead",{children:Ee.jsxs("tr",{children:[Ee.jsx("th",{children:"Slot"}),Ee.jsx("th",{children:"ID"}),Ee.jsx("th",{children:"First Name"}),Ee.jsx("th",{children:"Last Name"}),Ee.jsx("th",{children:"Postcode"}),Ee.jsx("th",{children:"DoB"})]})}),Ee.jsxs("tbody",{children:[a(t,1),a(n,2),t&&n&&Ee.jsxs("tr",{children:[Ee.jsx("td",{children:"Diff"}),Ee.jsx("td",{}),Ee.jsx("td",{dangerouslySetInnerHTML:{__html:r("firstName")}}),Ee.jsx("td",{dangerouslySetInnerHTML:{__html:r("lastName")}}),Ee.jsx("td",{dangerouslySetInnerHTML:{__html:r("postcode")}}),Ee.jsx("td",{dangerouslySetInnerHTML:{__html:r("DoB")}})]})]})]})]})}function rAe({recordId:e,currentTimestamp:t}){const n=new $k,i=Mv.find(f=>f.id===e);if(!i)return null;const r=Array.isArray(i.versions)?[...i.versions].sort((f,d)=>new Date(f.timestamp)-new Date(d.timestamp)):[];if(r.length===0)return null;const a=r.findIndex(f=>f.timestamp===t),s=a!==-1?a:r.findIndex(f=>f.timestamp>t)-1,o=["firstName","lastName","postcode","DoB"],u=(f,d)=>o.reduce((h,p)=>{const y=(f?.data?.[p]??"").toString(),v=(d.data[p]??"").toString();let b=v;if(f){const S=n.diff_main(y,v);n.diff_cleanupSemantic(S),b=n.diff_prettyHtml(S).replace(/background:#ffe6e6/g,"background:#ffaaaa").replace(/background:#e6ffe6/g,"background:#aaffaa")}return h[p]=b,h},{});return Ee.jsxs("div",{className:"panel history-panel",children:[Ee.jsxs("h2",{children:["History for Record #",e]}),Ee.jsxs("table",{children:[Ee.jsx("thead",{children:Ee.jsxs("tr",{children:[Ee.jsx("th",{children:"Timestamp"}),o.map(f=>Ee.jsx("th",{children:f},f))]})}),Ee.jsx("tbody",{children:r.map((f,d)=>{const h=d===0?null:r[d-1],p=u(h,f);return Ee.jsxs("tr",{className:d===s?"current-row":void 0,children:[Ee.jsx("td",{children:new Date(f.timestamp).toLocaleString()}),o.map(y=>Ee.jsx("td",{dangerouslySetInnerHTML:{__html:p[y]}},y))]},f.timestamp)})})]})]})}function aAe({timestamps:e,selectedIndex:t,onTimestampChange:n}){if(!e||e.length===0)return null;const i=r=>{n(parseInt(r.target.value,10))};return Ee.jsxs("div",{className:"time-slider-container",children:[Ee.jsx("h3",{children:"Time Travel"}),Ee.jsx("input",{type:"range",min:"0",max:e.length-1,value:t,onChange:i,step:"1",className:"slider"}),Ee.jsxs("div",{className:"timestamp-display",children:[Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Date:"})," ",new Date(e[t]).toLocaleString()]}),Ee.jsxs("p",{children:["Step ",t+1," of ",e.length]})]})]})}function sAe(){let e=null;for(const t of Mv){for(const n of t.versions)if(n.data?.isCauseOfNeedsAttention){e={id:t.id,timestamp:n.timestamp};break}if(e)break}return e?Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"panel",children:[Ee.jsx("p",{children:Ee.jsx("strong",{children:"Attention Trigger:"})}),Ee.jsxs("p",{children:["Record ID ",e.id," at ",new Date(e.timestamp).toLocaleString()," was the cause of needs attention."]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Reason:"})," cluster split"]})]})}):Ee.jsx("p",{children:"No attention‐cause record found."})}const j_=zV(Mv),oAe=24;function lAe(){const[e,t]=Vr.useState(j_.length-1),[n,i]=Vr.useState(oAe),[r,a]=Vr.useState([null,null]),[s,o]=Vr.useState(null),u=j_[e],f=Vr.useMemo(()=>FV(Mv,u),[e]),d=Vr.useMemo(()=>{const[p,y]=r;if(!p||!y)return[null,null];const v=f.find(S=>S.id===p),b=f.find(S=>S.id===y);return[v||null,b||null]},[r,f]),h=p=>{if(p&&p.datum){const{source:y,target:v}=p.datum;a([y.datum.id,v.datum.id])}};return Ee.jsxs("div",{className:"app-container",children:[Ee.jsxs("div",{className:"panel",children:[Ee.jsx("h1",{children:"Record Similarity Graph Explorer"}),Ee.jsxs("p",{children:["This prototype displays a network of records. Use the slider to travel through time and see how the data evolves. ",Ee.jsx("strong",{children:"Click on any edge"})," to compare two records."]}),Ee.jsx(aAe,{timestamps:j_,selectedIndex:e,onTimestampChange:t}),Ee.jsx(nAe,{records:f,onEdgeClick:h,onNodeClick:p=>o(p.id),scoreThreshold:n,onScoreThresholdChange:i})]}),r[0]&&Ee.jsx("div",{className:"panel comparison-panel",children:Ee.jsx(iAe,{comparisonSlots:d})}),s&&Ee.jsx(rAe,{recordId:s,currentTimestamp:u}),Ee.jsx(sAe,{})]})}NV.createRoot(document.getElementById("root")).render(Ee.jsx(Vr.StrictMode,{children:Ee.jsx(lAe,{})}));</script>
  <style rel="stylesheet" crossorigin>.history-panel .current-row{background-color:#e6f7ff;font-weight:700}.history-panel{margin-top:1rem;overflow-x:auto}body{font-family:sans-serif;margin:0;background-color:#f0f2f5}.app-container{display:flex;flex-direction:column;gap:1.5rem;padding:1.5rem;box-sizing:border-box}.panel{border:1px solid #d9d9d9;border-radius:8px;background-color:#fff;box-shadow:0 2px 8px #00000017;padding:1.5rem}h1,h2{margin-top:0;color:#333}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}.comparison-panel{margin-top:1rem}.comparison-panel ins{background-color:#afa;text-decoration:none}.comparison-panel del{background-color:#faa;text-decoration:line-through}.time-slider-container{border-top:1px solid #eee;border-bottom:1px solid #eee;padding:1rem 0;margin:1.5rem 0}.time-slider-container h3{margin-top:0;margin-bottom:.5rem}.slider{width:100%;margin-bottom:.5rem}.timestamp-display{display:flex;justify-content:space-between;font-size:.9em;color:#555}.timestamp-display p{margin:0}.notice{background-color:#fffbe6;border:1px solid #ffe58f;border-radius:4px;padding:.5rem 1rem;margin-bottom:1rem}.notice p{margin:0;color:#614700}.record-not-found{background-color:#fafafa;color:#888;font-style:italic;text-align:center}</style>
</head>

<body>
  <div id="root"></div>
</body>

</html>