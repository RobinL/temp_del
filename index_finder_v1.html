<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function _V(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HS={exports:{}},Ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN;function wV(){if(vN)return Ih;vN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Ih.Fragment=t,Ih.jsx=n,Ih.jsxs=n,Ih}var bN;function AV(){return bN||(bN=1,HS.exports=wV()),HS.exports}var le=AV(),GS={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN;function CV(){if(xN)return qe;xN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(z){return z===null||typeof z!="object"?null:(z=h&&z[h]||z["@@iterator"],typeof z=="function"?z:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function S(z,W,ne){this.props=z,this.context=W,this.refs=b,this.updater=ne||y}S.prototype.isReactComponent={},S.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=S.prototype;function w(z,W,ne){this.props=z,this.context=W,this.refs=b,this.updater=ne||y}var A=w.prototype=new _;A.constructor=w,v(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function T(z,W,ne,se,ye,Ee){return ne=Ee.ref,{$$typeof:e,type:z,key:W,ref:ne!==void 0?ne:null,props:Ee}}function O(z,W){return T(z.type,W,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ne){return W[ne]})}var L=/\/+/g;function G(z,W){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):W.toString(36)}function H(){}function j(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function F(z,W,ne,se,ye){var Ee=typeof z;(Ee==="undefined"||Ee==="boolean")&&(z=null);var Ce=!1;if(z===null)Ce=!0;else switch(Ee){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(z.$$typeof){case e:case t:Ce=!0;break;case d:return Ce=z._init,F(Ce(z._payload),W,ne,se,ye)}}if(Ce)return ye=ye(z),Ce=se===""?"."+G(z,0):se,C(ye)?(ne="",Ce!=null&&(ne=Ce.replace(L,"$&/")+"/"),F(ye,W,ne,"",function(xe){return xe})):ye!=null&&(N(ye)&&(ye=O(ye,ne+(ye.key==null||z&&z.key===ye.key?"":(""+ye.key).replace(L,"$&/")+"/")+Ce)),W.push(ye)),1;Ce=0;var Ht=se===""?".":se+":";if(C(z))for(var nt=0;nt<z.length;nt++)se=z[nt],Ee=Ht+G(se,nt),Ce+=F(se,W,ne,Ee,ye);else if(nt=p(z),typeof nt=="function")for(z=nt.call(z),nt=0;!(se=z.next()).done;)se=se.value,Ee=Ht+G(se,nt++),Ce+=F(se,W,ne,Ee,ye);else if(Ee==="object"){if(typeof z.then=="function")return F(j(z),W,ne,se,ye);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function R(z,W,ne){if(z==null)return z;var se=[],ye=0;return F(z,se,"","",function(Ee){return W.call(ne,Ee,ye++)}),se}function P(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=ne)},function(ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=ne)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var X=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function K(){}return qe.Children={map:R,forEach:function(z,W,ne){R(z,function(){W.apply(this,arguments)},ne)},count:function(z){var W=0;return R(z,function(){W++}),W},toArray:function(z){return R(z,function(W){return W})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},qe.Component=S,qe.Fragment=n,qe.Profiler=r,qe.PureComponent=w,qe.StrictMode=i,qe.Suspense=u,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,qe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},qe.cache=function(z){return function(){return z.apply(null,arguments)}},qe.cloneElement=function(z,W,ne){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var se=v({},z.props),ye=z.key,Ee=void 0;if(W!=null)for(Ce in W.ref!==void 0&&(Ee=void 0),W.key!==void 0&&(ye=""+W.key),W)!k.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(se[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)se.children=ne;else if(1<Ce){for(var Ht=Array(Ce),nt=0;nt<Ce;nt++)Ht[nt]=arguments[nt+2];se.children=Ht}return T(z.type,ye,void 0,void 0,Ee,se)},qe.createContext=function(z){return z={$$typeof:s,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},qe.createElement=function(z,W,ne){var se,ye={},Ee=null;if(W!=null)for(se in W.key!==void 0&&(Ee=""+W.key),W)k.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ye[se]=W[se]);var Ce=arguments.length-2;if(Ce===1)ye.children=ne;else if(1<Ce){for(var Ht=Array(Ce),nt=0;nt<Ce;nt++)Ht[nt]=arguments[nt+2];ye.children=Ht}if(z&&z.defaultProps)for(se in Ce=z.defaultProps,Ce)ye[se]===void 0&&(ye[se]=Ce[se]);return T(z,Ee,void 0,void 0,null,ye)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(z){return{$$typeof:o,render:z}},qe.isValidElement=N,qe.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:P}},qe.memo=function(z,W){return{$$typeof:f,type:z,compare:W===void 0?null:W}},qe.startTransition=function(z){var W=M.T,ne={};M.T=ne;try{var se=z(),ye=M.S;ye!==null&&ye(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(K,X)}catch(Ee){X(Ee)}finally{M.T=W}},qe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},qe.use=function(z){return M.H.use(z)},qe.useActionState=function(z,W,ne){return M.H.useActionState(z,W,ne)},qe.useCallback=function(z,W){return M.H.useCallback(z,W)},qe.useContext=function(z){return M.H.useContext(z)},qe.useDebugValue=function(){},qe.useDeferredValue=function(z,W){return M.H.useDeferredValue(z,W)},qe.useEffect=function(z,W,ne){var se=M.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(z,W)},qe.useId=function(){return M.H.useId()},qe.useImperativeHandle=function(z,W,ne){return M.H.useImperativeHandle(z,W,ne)},qe.useInsertionEffect=function(z,W){return M.H.useInsertionEffect(z,W)},qe.useLayoutEffect=function(z,W){return M.H.useLayoutEffect(z,W)},qe.useMemo=function(z,W){return M.H.useMemo(z,W)},qe.useOptimistic=function(z,W){return M.H.useOptimistic(z,W)},qe.useReducer=function(z,W,ne){return M.H.useReducer(z,W,ne)},qe.useRef=function(z){return M.H.useRef(z)},qe.useState=function(z){return M.H.useState(z)},qe.useSyncExternalStore=function(z,W,ne){return M.H.useSyncExternalStore(z,W,ne)},qe.useTransition=function(){return M.H.useTransition()},qe.version="19.1.0",qe}var SN;function nC(){return SN||(SN=1,GS.exports=CV()),GS.exports}var Os=nC(),YS={exports:{}},qh={},XS={exports:{}},VS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN;function MV(){return EN||(EN=1,function(e){function t(R,P){var X=R.length;R.push(P);e:for(;0<X;){var K=X-1>>>1,z=R[K];if(0<r(z,P))R[K]=P,R[X]=z,X=K;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var P=R[0],X=R.pop();if(X!==P){R[0]=X;e:for(var K=0,z=R.length,W=z>>>1;K<W;){var ne=2*(K+1)-1,se=R[ne],ye=ne+1,Ee=R[ye];if(0>r(se,X))ye<z&&0>r(Ee,se)?(R[K]=Ee,R[ye]=X,K=ye):(R[K]=se,R[ne]=X,K=ne);else if(ye<z&&0>r(Ee,X))R[K]=Ee,R[ye]=X,K=ye;else break e}}return P}function r(R,P){var X=R.sortIndex-P.sortIndex;return X!==0?X:R.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var u=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(R){for(var P=n(f);P!==null;){if(P.callback===null)i(f);else if(P.startTime<=R)i(f),P.sortIndex=P.expirationTime,t(u,P);else break;P=n(f)}}function M(R){if(b=!1,C(R),!v)if(n(u)!==null)v=!0,k||(k=!0,G());else{var P=n(f);P!==null&&F(M,P.startTime-R)}}var k=!1,T=-1,O=5,N=-1;function B(){return S?!0:!(e.unstable_now()-N<O)}function L(){if(S=!1,k){var R=e.unstable_now();N=R;var P=!0;try{e:{v=!1,b&&(b=!1,w(T),T=-1),y=!0;var X=p;try{t:{for(C(R),h=n(u);h!==null&&!(h.expirationTime>R&&B());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var z=K(h.expirationTime<=R);if(R=e.unstable_now(),typeof z=="function"){h.callback=z,C(R),P=!0;break t}h===n(u)&&i(u),C(R)}else i(u);h=n(u)}if(h!==null)P=!0;else{var W=n(f);W!==null&&F(M,W.startTime-R),P=!1}}break e}finally{h=null,p=X,y=!1}P=void 0}}finally{P?G():k=!1}}}var G;if(typeof A=="function")G=function(){A(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,j=H.port2;H.port1.onmessage=L,G=function(){j.postMessage(null)}}else G=function(){_(L,0)};function F(R,P){T=_(function(){R(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var X=p;p=P;try{return R()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var X=p;p=R;try{return P()}finally{p=X}},e.unstable_scheduleCallback=function(R,P,X){var K=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,R={id:d++,callback:P,priorityLevel:R,startTime:X,expirationTime:z,sortIndex:-1},X>K?(R.sortIndex=X,t(f,R),n(u)===null&&R===n(f)&&(b?(w(T),T=-1):b=!0,F(M,X-K))):(R.sortIndex=z,t(u,R),v||y||(v=!0,k||(k=!0,G()))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var P=p;return function(){var X=p;p=P;try{return R.apply(this,arguments)}finally{p=X}}}}(VS)),VS}var _N;function $V(){return _N||(_N=1,XS.exports=MV()),XS.exports}var WS={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function TV(){if(wN)return qn;wN=1;var e=nC();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:u,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(u,f,null,d)},qn.flushSync=function(u){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,u)return u()}finally{s.T=f,i.p=d,i.d.f()}},qn.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},qn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},qn.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},qn.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},qn.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(u,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},qn.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},qn.requestFormReset=function(u){i.d.r(u)},qn.unstable_batchedUpdates=function(u,f){return u(f)},qn.useFormState=function(u,f,d){return s.H.useFormState(u,f,d)},qn.useFormStatus=function(){return s.H.useHostTransitionStatus()},qn.version="19.1.0",qn}var AN;function kV(){if(AN)return WS.exports;AN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),WS.exports=TV(),WS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function DV(){if(CN)return qh;CN=1;var e=$V(),t=nC(),n=kV();function i(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function s(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(i(188))}function u(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(i(188));return c!==l?null:l}for(var g=l,m=c;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),l;if(E===m)return o(x),c;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var $=!1,D=x.child;D;){if(D===g){$=!0,g=x,m=E;break}if(D===m){$=!0,m=x,g=E;break}D=D.sibling}if(!$){for(D=E.child;D;){if(D===g){$=!0,g=E,m=x;break}if(D===m){$=!0,m=E,g=x;break}D=D.sibling}if(!$)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?l:c}function f(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=f(l),c!==null)return c;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var H=Symbol.for("react.client.reference");function j(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===H?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case w:return(l._context.displayName||"Context")+".Consumer";case C:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case T:return c=l.displayName||null,c!==null?c:j(l.type)||"Memo";case O:c=l._payload,l=l._init;try{return j(l(c))}catch{}}return null}var F=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},K=[],z=-1;function W(l){return{current:l}}function ne(l){0>z||(l.current=K[z],K[z]=null,z--)}function se(l,c){z++,K[z]=l.current,l.current=c}var ye=W(null),Ee=W(null),Ce=W(null),Ht=W(null);function nt(l,c){switch(se(Ce,c),se(Ee,l),se(ye,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?YR(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=YR(c),l=XR(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(ye),se(ye,l)}function xe(){ne(ye),ne(Ee),ne(Ce)}function Ue(l){l.memoizedState!==null&&se(Ht,l);var c=ye.current,g=XR(c,l.type);c!==g&&(se(Ee,l),se(ye,g))}function je(l){Ee.current===l&&(ne(ye),ne(Ee)),Ht.current===l&&(ne(Ht),Lh._currentValue=X)}var fe=Object.prototype.hasOwnProperty,Gt=e.unstable_scheduleCallback,it=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,gn=e.unstable_requestPaint,Jt=e.unstable_now,S0=e.unstable_getCurrentPriorityLevel,Ck=e.unstable_ImmediatePriority,Mk=e.unstable_UserBlockingPriority,E0=e.unstable_NormalPriority,rY=e.unstable_LowPriority,$k=e.unstable_IdlePriority,aY=e.log,sY=e.unstable_setDisableYieldValue,Gd=null,Pi=null;function co(l){if(typeof aY=="function"&&sY(l),Pi&&typeof Pi.setStrictMode=="function")try{Pi.setStrictMode(Gd,l)}catch{}}var Ii=Math.clz32?Math.clz32:uY,oY=Math.log,lY=Math.LN2;function uY(l){return l>>>=0,l===0?32:31-(oY(l)/lY|0)|0}var _0=256,w0=4194304;function Fl(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function A0(l,c,g){var m=l.pendingLanes;if(m===0)return 0;var x=0,E=l.suspendedLanes,$=l.pingedLanes;l=l.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?x=Fl(m):($&=D,$!==0?x=Fl($):g||(g=D&~l,g!==0&&(x=Fl(g))))):(D=m&~E,D!==0?x=Fl(D):$!==0?x=Fl($):g||(g=m&~l,g!==0&&(x=Fl(g)))),x===0?0:c!==0&&c!==x&&(c&E)===0&&(E=x&-x,g=c&-c,E>=g||E===32&&(g&4194048)!==0)?c:x}function Yd(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function cY(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(){var l=_0;return _0<<=1,(_0&4194048)===0&&(_0=256),l}function kk(){var l=w0;return w0<<=1,(w0&62914560)===0&&(w0=4194304),l}function Rx(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function Xd(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function fY(l,c,g,m,x,E){var $=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var D=l.entanglements,U=l.expirationTimes,V=l.hiddenUpdates;for(g=$&~g;0<g;){var ie=31-Ii(g),oe=1<<ie;D[ie]=0,U[ie]=-1;var Q=V[ie];if(Q!==null)for(V[ie]=null,ie=0;ie<Q.length;ie++){var Z=Q[ie];Z!==null&&(Z.lane&=-536870913)}g&=~oe}m!==0&&Dk(l,m,0),E!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=E&~($&~c))}function Dk(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var m=31-Ii(c);l.entangledLanes|=c,l.entanglements[m]=l.entanglements[m]|1073741824|g&4194090}function Ok(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var m=31-Ii(g),x=1<<m;x&c|l[m]&c&&(l[m]|=c),g&=~x}}function Nx(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function zx(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Rk(){var l=P.p;return l!==0?l:(l=window.event,l===void 0?32:dN(l.type))}function dY(l,c){var g=P.p;try{return P.p=l,c()}finally{P.p=g}}var fo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+fo,Ei="__reactProps$"+fo,bc="__reactContainer$"+fo,Fx="__reactEvents$"+fo,hY="__reactListeners$"+fo,gY="__reactHandles$"+fo,Nk="__reactResources$"+fo,Vd="__reactMarker$"+fo;function Lx(l){delete l[Pn],delete l[Ei],delete l[Fx],delete l[hY],delete l[gY]}function xc(l){var c=l[Pn];if(c)return c;for(var g=l.parentNode;g;){if(c=g[bc]||g[Pn]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(l=ZR(l);l!==null;){if(g=l[Pn])return g;l=ZR(l)}return c}l=g,g=l.parentNode}return null}function Sc(l){if(l=l[Pn]||l[bc]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Wd(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(i(33))}function Ec(l){var c=l[Nk];return c||(c=l[Nk]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function pn(l){l[Vd]=!0}var zk=new Set,Fk={};function Ll(l,c){_c(l,c),_c(l+"Capture",c)}function _c(l,c){for(Fk[l]=c,l=0;l<c.length;l++)zk.add(c[l])}var pY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lk={},Uk={};function mY(l){return fe.call(Uk,l)?!0:fe.call(Lk,l)?!1:pY.test(l)?Uk[l]=!0:(Lk[l]=!0,!1)}function C0(l,c,g){if(mY(c))if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+g)}}function M0(l,c,g){if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+g)}}function cs(l,c,g,m){if(m===null)l.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(c,g,""+m)}}var Ux,Bk;function wc(l){if(Ux===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Ux=c&&c[1]||"",Bk=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ux+l+Bk}var Bx=!1;function jx(l,c){if(!l||Bx)return"";Bx=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var Q=Z}Reflect.construct(l,[],oe)}else{try{oe.call()}catch(Z){Q=Z}l.call(oe.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(oe=l())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),$=E[0],D=E[1];if($&&D){var U=$.split(`
`),V=D.split(`
`);for(x=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;x<V.length&&!V[x].includes("DetermineComponentFrameRoot");)x++;if(m===U.length||x===V.length)for(m=U.length-1,x=V.length-1;1<=m&&0<=x&&U[m]!==V[x];)x--;for(;1<=m&&0<=x;m--,x--)if(U[m]!==V[x]){if(m!==1||x!==1)do if(m--,x--,0>x||U[m]!==V[x]){var ie=`
`+U[m].replace(" at new "," at ");return l.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",l.displayName)),ie}while(1<=m&&0<=x);break}}}finally{Bx=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?wc(g):""}function yY(l){switch(l.tag){case 26:case 27:case 5:return wc(l.type);case 16:return wc("Lazy");case 13:return wc("Suspense");case 19:return wc("SuspenseList");case 0:case 15:return jx(l.type,!1);case 11:return jx(l.type.render,!1);case 1:return jx(l.type,!0);case 31:return wc("Activity");default:return""}}function jk(l){try{var c="";do c+=yY(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function fr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Pk(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function vY(l){var c=Pk(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),m=""+l[c];if(!l.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return x.call(this)},set:function($){m=""+$,E.call(this,$)}}),Object.defineProperty(l,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function $0(l){l._valueTracker||(l._valueTracker=vY(l))}function Ik(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return l&&(m=Pk(l)?l.checked?"true":"false":l.value),l=m,l!==g?(c.setValue(l),!0):!1}function T0(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var bY=/[\n"\\]/g;function dr(l){return l.replace(bY,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Px(l,c,g,m,x,E,$,D){l.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.type=$:l.removeAttribute("type"),c!=null?$==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+fr(c)):l.value!==""+fr(c)&&(l.value=""+fr(c)):$!=="submit"&&$!=="reset"||l.removeAttribute("value"),c!=null?Ix(l,$,fr(c)):g!=null?Ix(l,$,fr(g)):m!=null&&l.removeAttribute("value"),x==null&&E!=null&&(l.defaultChecked=!!E),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+fr(D):l.removeAttribute("name")}function qk(l,c,g,m,x,E,$,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),c!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;g=g!=null?""+fr(g):"",c=c!=null?""+fr(c):g,D||c===l.value||(l.value=c),l.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=D?l.checked:!!m,l.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.name=$)}function Ix(l,c,g){c==="number"&&T0(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Ac(l,c,g,m){if(l=l.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<l.length;g++)x=c.hasOwnProperty("$"+l[g].value),l[g].selected!==x&&(l[g].selected=x),x&&m&&(l[g].defaultSelected=!0)}else{for(g=""+fr(g),c=null,x=0;x<l.length;x++){if(l[x].value===g){l[x].selected=!0,m&&(l[x].defaultSelected=!0);return}c!==null||l[x].disabled||(c=l[x])}c!==null&&(c.selected=!0)}}function Hk(l,c,g){if(c!=null&&(c=""+fr(c),c!==l.value&&(l.value=c),g==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=g!=null?""+fr(g):""}function Gk(l,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=fr(c),l.defaultValue=g,m=l.textContent,m===g&&m!==""&&m!==null&&(l.value=m)}function Cc(l,c){if(c){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=c;return}}l.textContent=c}var xY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yk(l,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":m?l.setProperty(c,g):typeof g!="number"||g===0||xY.has(c)?c==="float"?l.cssFloat=g:l[c]=(""+g).trim():l[c]=g+"px"}function Xk(l,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(l=l.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&Yk(l,x,m)}else for(var E in c)c.hasOwnProperty(E)&&Yk(l,E,c[E])}function qx(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function k0(l){return EY.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Hx=null;function Gx(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Mc=null,$c=null;function Vk(l){var c=Sc(l);if(c&&(l=c.stateNode)){var g=l[Ei]||null;e:switch(l=c.stateNode,c.type){case"input":if(Px(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+dr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==l&&m.form===l.form){var x=m[Ei]||null;if(!x)throw Error(i(90));Px(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===l.form&&Ik(m)}break e;case"textarea":Hk(l,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Ac(l,!!g.multiple,c,!1)}}}var Yx=!1;function Wk(l,c,g){if(Yx)return l(c,g);Yx=!0;try{var m=l(c);return m}finally{if(Yx=!1,(Mc!==null||$c!==null)&&(pm(),Mc&&(c=Mc,l=$c,$c=Mc=null,Vk(c),l)))for(c=0;c<l.length;c++)Vk(l[c])}}function Qd(l,c){var g=l.stateNode;if(g===null)return null;var m=g[Ei]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xx=!1;if(fs)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){Xx=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{Xx=!1}var ho=null,Vx=null,D0=null;function Qk(){if(D0)return D0;var l,c=Vx,g=c.length,m,x="value"in ho?ho.value:ho.textContent,E=x.length;for(l=0;l<g&&c[l]===x[l];l++);var $=g-l;for(m=1;m<=$&&c[g-m]===x[E-m];m++);return D0=x.slice(l,1<m?1-m:void 0)}function O0(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function R0(){return!0}function Zk(){return!1}function _i(l){function c(g,m,x,E,$){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=$,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(g=l[D],this[D]=g?g(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?R0:Zk,this.isPropagationStopped=Zk,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=R0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=R0)},persist:function(){},isPersistent:R0}),c}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=_i(Ul),Kd=d({},Ul,{view:0,detail:0}),_Y=_i(Kd),Wx,Qx,Jd,z0=d({},Kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kx,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Jd&&(Jd&&l.type==="mousemove"?(Wx=l.screenX-Jd.screenX,Qx=l.screenY-Jd.screenY):Qx=Wx=0,Jd=l),Wx)},movementY:function(l){return"movementY"in l?l.movementY:Qx}}),Kk=_i(z0),wY=d({},z0,{dataTransfer:0}),AY=_i(wY),CY=d({},Kd,{relatedTarget:0}),Zx=_i(CY),MY=d({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),$Y=_i(MY),TY=d({},Ul,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),kY=_i(TY),DY=d({},Ul,{data:0}),Jk=_i(DY),OY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zY(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=NY[l])?!!c[l]:!1}function Kx(){return zY}var FY=d({},Kd,{key:function(l){if(l.key){var c=OY[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=O0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?RY[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kx,charCode:function(l){return l.type==="keypress"?O0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?O0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),LY=_i(FY),UY=d({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eD=_i(UY),BY=d({},Kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kx}),jY=_i(BY),PY=d({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),IY=_i(PY),qY=d({},z0,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),HY=_i(qY),GY=d({},Ul,{newState:0,oldState:0}),YY=_i(GY),XY=[9,13,27,32],Jx=fs&&"CompositionEvent"in window,eh=null;fs&&"documentMode"in document&&(eh=document.documentMode);var VY=fs&&"TextEvent"in window&&!eh,tD=fs&&(!Jx||eh&&8<eh&&11>=eh),nD=" ",iD=!1;function rD(l,c){switch(l){case"keyup":return XY.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aD(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Tc=!1;function WY(l,c){switch(l){case"compositionend":return aD(c);case"keypress":return c.which!==32?null:(iD=!0,nD);case"textInput":return l=c.data,l===nD&&iD?null:l;default:return null}}function QY(l,c){if(Tc)return l==="compositionend"||!Jx&&rD(l,c)?(l=Qk(),D0=Vx=ho=null,Tc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tD&&c.locale!=="ko"?null:c.data;default:return null}}var ZY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sD(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!ZY[l.type]:c==="textarea"}function oD(l,c,g,m){Mc?$c?$c.push(m):$c=[m]:Mc=m,c=Sm(c,"onChange"),0<c.length&&(g=new N0("onChange","change",null,g,m),l.push({event:g,listeners:c}))}var th=null,nh=null;function KY(l){PR(l,0)}function F0(l){var c=Wd(l);if(Ik(c))return l}function lD(l,c){if(l==="change")return c}var uD=!1;if(fs){var e2;if(fs){var t2="oninput"in document;if(!t2){var cD=document.createElement("div");cD.setAttribute("oninput","return;"),t2=typeof cD.oninput=="function"}e2=t2}else e2=!1;uD=e2&&(!document.documentMode||9<document.documentMode)}function fD(){th&&(th.detachEvent("onpropertychange",dD),nh=th=null)}function dD(l){if(l.propertyName==="value"&&F0(nh)){var c=[];oD(c,nh,l,Gx(l)),Wk(KY,c)}}function JY(l,c,g){l==="focusin"?(fD(),th=c,nh=g,th.attachEvent("onpropertychange",dD)):l==="focusout"&&fD()}function eX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return F0(nh)}function tX(l,c){if(l==="click")return F0(c)}function nX(l,c){if(l==="input"||l==="change")return F0(c)}function iX(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var qi=typeof Object.is=="function"?Object.is:iX;function ih(l,c){if(qi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!fe.call(c,x)||!qi(l[x],c[x]))return!1}return!0}function hD(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function gD(l,c){var g=hD(l);l=0;for(var m;g;){if(g.nodeType===3){if(m=l+g.textContent.length,l<=c&&m>=c)return{node:g,offset:c-l};l=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=hD(g)}}function pD(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?pD(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function mD(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=T0(l.document);c instanceof l.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)l=c.contentWindow;else break;c=T0(l.document)}return c}function n2(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var rX=fs&&"documentMode"in document&&11>=document.documentMode,kc=null,i2=null,rh=null,r2=!1;function yD(l,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;r2||kc==null||kc!==T0(m)||(m=kc,"selectionStart"in m&&n2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),rh&&ih(rh,m)||(rh=m,m=Sm(i2,"onSelect"),0<m.length&&(c=new N0("onSelect","select",null,c,g),l.push({event:c,listeners:m}),c.target=kc)))}function Bl(l,c){var g={};return g[l.toLowerCase()]=c.toLowerCase(),g["Webkit"+l]="webkit"+c,g["Moz"+l]="moz"+c,g}var Dc={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},a2={},vD={};fs&&(vD=document.createElement("div").style,"AnimationEvent"in window||(delete Dc.animationend.animation,delete Dc.animationiteration.animation,delete Dc.animationstart.animation),"TransitionEvent"in window||delete Dc.transitionend.transition);function jl(l){if(a2[l])return a2[l];if(!Dc[l])return l;var c=Dc[l],g;for(g in c)if(c.hasOwnProperty(g)&&g in vD)return a2[l]=c[g];return l}var bD=jl("animationend"),xD=jl("animationiteration"),SD=jl("animationstart"),aX=jl("transitionrun"),sX=jl("transitionstart"),oX=jl("transitioncancel"),ED=jl("transitionend"),_D=new Map,s2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");s2.push("scrollEnd");function jr(l,c){_D.set(l,c),Ll(c,[l])}var wD=new WeakMap;function hr(l,c){if(typeof l=="object"&&l!==null){var g=wD.get(l);return g!==void 0?g:(c={value:l,source:c,stack:jk(c)},wD.set(l,c),c)}return{value:l,source:c,stack:jk(c)}}var gr=[],Oc=0,o2=0;function L0(){for(var l=Oc,c=o2=Oc=0;c<l;){var g=gr[c];gr[c++]=null;var m=gr[c];gr[c++]=null;var x=gr[c];gr[c++]=null;var E=gr[c];if(gr[c++]=null,m!==null&&x!==null){var $=m.pending;$===null?x.next=x:(x.next=$.next,$.next=x),m.pending=x}E!==0&&AD(g,x,E)}}function U0(l,c,g,m){gr[Oc++]=l,gr[Oc++]=c,gr[Oc++]=g,gr[Oc++]=m,o2|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function l2(l,c,g,m){return U0(l,c,g,m),B0(l)}function Rc(l,c){return U0(l,null,null,c),B0(l)}function AD(l,c,g){l.lanes|=g;var m=l.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=l.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(x=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,x&&c!==null&&(x=31-Ii(g),l=E.hiddenUpdates,m=l[x],m===null?l[x]=[c]:m.push(c),c.lane=g|536870912),E):null}function B0(l){if(50<Th)throw Th=0,gS=null,Error(i(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var Nc={};function lX(l,c,g,m){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,c,g,m){return new lX(l,c,g,m)}function u2(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ds(l,c){var g=l.alternate;return g===null?(g=Hi(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function CD(l,c){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function j0(l,c,g,m,x,E){var $=0;if(m=l,typeof l=="function")u2(l)&&($=1);else if(typeof l=="string")$=cV(l,g,ye.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=Hi(31,g,c,x),l.elementType=N,l.lanes=E,l;case v:return Pl(g.children,x,E,c);case b:$=8,x|=24;break;case S:return l=Hi(12,g,c,x|2),l.elementType=S,l.lanes=E,l;case M:return l=Hi(13,g,c,x),l.elementType=M,l.lanes=E,l;case k:return l=Hi(19,g,c,x),l.elementType=k,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:case A:$=10;break e;case w:$=9;break e;case C:$=11;break e;case T:$=14;break e;case O:$=16,m=null;break e}$=29,g=Error(i(130,l===null?"null":typeof l,"")),m=null}return c=Hi($,g,c,x),c.elementType=l,c.type=m,c.lanes=E,c}function Pl(l,c,g,m){return l=Hi(7,l,m,c),l.lanes=g,l}function c2(l,c,g){return l=Hi(6,l,null,c),l.lanes=g,l}function f2(l,c,g){return c=Hi(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var zc=[],Fc=0,P0=null,I0=0,pr=[],mr=0,Il=null,hs=1,gs="";function ql(l,c){zc[Fc++]=I0,zc[Fc++]=P0,P0=l,I0=c}function MD(l,c,g){pr[mr++]=hs,pr[mr++]=gs,pr[mr++]=Il,Il=l;var m=hs;l=gs;var x=32-Ii(m)-1;m&=~(1<<x),g+=1;var E=32-Ii(c)+x;if(30<E){var $=x-x%5;E=(m&(1<<$)-1).toString(32),m>>=$,x-=$,hs=1<<32-Ii(c)+x|g<<x|m,gs=E+l}else hs=1<<E|g<<x|m,gs=l}function d2(l){l.return!==null&&(ql(l,1),MD(l,1,0))}function h2(l){for(;l===P0;)P0=zc[--Fc],zc[Fc]=null,I0=zc[--Fc],zc[Fc]=null;for(;l===Il;)Il=pr[--mr],pr[mr]=null,gs=pr[--mr],pr[mr]=null,hs=pr[--mr],pr[mr]=null}var ri=null,Ut=null,ut=!1,Hl=null,ba=!1,g2=Error(i(519));function Gl(l){var c=Error(i(418,""));throw oh(hr(c,l)),g2}function $D(l){var c=l.stateNode,g=l.type,m=l.memoizedProps;switch(c[Pn]=l,c[Ei]=m,g){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(g=0;g<Dh.length;g++)Qe(Dh[g],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":Qe("invalid",c),qk(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),$0(c);break;case"select":Qe("invalid",c);break;case"textarea":Qe("invalid",c),Gk(c,m.value,m.defaultValue,m.children),$0(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||GR(c.textContent,g)?(m.popover!=null&&(Qe("beforetoggle",c),Qe("toggle",c)),m.onScroll!=null&&Qe("scroll",c),m.onScrollEnd!=null&&Qe("scrollend",c),m.onClick!=null&&(c.onclick=Em),c=!0):c=!1,c||Gl(l)}function TD(l){for(ri=l.return;ri;)switch(ri.tag){case 5:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:ri=ri.return}}function ah(l){if(l!==ri)return!1;if(!ut)return TD(l),ut=!0,!1;var c=l.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||kS(l.type,l.memoizedProps)),g=!g),g&&Ut&&Gl(l),TD(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(c===0){Ut=Ir(l.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;l=l.nextSibling}Ut=null}}else c===27?(c=Ut,To(l.type)?(l=NS,NS=null,Ut=l):Ut=c):Ut=ri?Ir(l.stateNode.nextSibling):null;return!0}function sh(){Ut=ri=null,ut=!1}function kD(){var l=Hl;return l!==null&&(Ci===null?Ci=l:Ci.push.apply(Ci,l),Hl=null),l}function oh(l){Hl===null?Hl=[l]:Hl.push(l)}var p2=W(null),Yl=null,ps=null;function go(l,c,g){se(p2,c._currentValue),c._currentValue=g}function ms(l){l._currentValue=p2.current,ne(p2)}function m2(l,c,g){for(;l!==null;){var m=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),l===g)break;l=l.return}}function y2(l,c,g,m){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var E=x.dependencies;if(E!==null){var $=x.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=x;for(var U=0;U<c.length;U++)if(D.context===c[U]){E.lanes|=g,D=E.alternate,D!==null&&(D.lanes|=g),m2(E.return,g,l),m||($=null);break e}E=D.next}}else if(x.tag===18){if($=x.return,$===null)throw Error(i(341));$.lanes|=g,E=$.alternate,E!==null&&(E.lanes|=g),m2($,g,l),$=null}else $=x.child;if($!==null)$.return=x;else for($=x;$!==null;){if($===l){$=null;break}if(x=$.sibling,x!==null){x.return=$.return,$=x;break}$=$.return}x=$}}function lh(l,c,g,m){l=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var $=x.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var D=x.type;qi(x.pendingProps.value,$.value)||(l!==null?l.push(D):l=[D])}}else if(x===Ht.current){if($=x.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(Lh):l=[Lh])}x=x.return}l!==null&&y2(c,l,g,m),c.flags|=262144}function q0(l){for(l=l.firstContext;l!==null;){if(!qi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Xl(l){Yl=l,ps=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function In(l){return DD(Yl,l)}function H0(l,c){return Yl===null&&Xl(l),DD(l,c)}function DD(l,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},ps===null){if(l===null)throw Error(i(308));ps=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else ps=ps.next=c;return g}var uX=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,m){l.push(m)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},cX=e.unstable_scheduleCallback,fX=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v2(){return{controller:new uX,data:new Map,refCount:0}}function uh(l){l.refCount--,l.refCount===0&&cX(fX,function(){l.controller.abort()})}var ch=null,b2=0,Lc=0,Uc=null;function dX(l,c){if(ch===null){var g=ch=[];b2=0,Lc=SS(),Uc={status:"pending",value:void 0,then:function(m){g.push(m)}}}return b2++,c.then(OD,OD),c}function OD(){if(--b2===0&&ch!==null){Uc!==null&&(Uc.status="fulfilled");var l=ch;ch=null,Lc=0,Uc=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function hX(l,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return l.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var RD=R.S;R.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&dX(l,c),RD!==null&&RD(l,c)};var Vl=W(null);function x2(){var l=Vl.current;return l!==null?l:Ct.pooledCache}function G0(l,c){c===null?se(Vl,Vl.current):se(Vl,c.pool)}function ND(){var l=x2();return l===null?null:{parent:an._currentValue,pool:l}}var fh=Error(i(460)),zD=Error(i(474)),Y0=Error(i(542)),S2={then:function(){}};function FD(l){return l=l.status,l==="fulfilled"||l==="rejected"}function X0(){}function LD(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(X0,X0),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,BD(l),l;default:if(typeof c.status=="string")c.then(X0,X0);else{if(l=Ct,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=c,l.status="pending",l.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,BD(l),l}throw dh=c,fh}}var dh=null;function UD(){if(dh===null)throw Error(i(459));var l=dh;return dh=null,l}function BD(l){if(l===fh||l===Y0)throw Error(i(483))}var po=!1;function E2(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _2(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function mo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function yo(l,c,g){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(ht&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=B0(l),AD(l,null,g),c}return U0(l,m,c,g),B0(l)}function hh(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,Ok(l,g)}}function w2(l,c){var g=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var $={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=$:E=E.next=$,g=g.next}while(g!==null);E===null?x=E=c:E=E.next=c}else x=E=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}var A2=!1;function gh(){if(A2){var l=Uc;if(l!==null)throw l}}function ph(l,c,g,m){A2=!1;var x=l.updateQueue;po=!1;var E=x.firstBaseUpdate,$=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var U=D,V=U.next;U.next=null,$===null?E=V:$.next=V,$=U;var ie=l.alternate;ie!==null&&(ie=ie.updateQueue,D=ie.lastBaseUpdate,D!==$&&(D===null?ie.firstBaseUpdate=V:D.next=V,ie.lastBaseUpdate=U))}if(E!==null){var oe=x.baseState;$=0,ie=V=U=null,D=E;do{var Q=D.lane&-536870913,Z=Q!==D.lane;if(Z?(et&Q)===Q:(m&Q)===Q){Q!==0&&Q===Lc&&(A2=!0),ie!==null&&(ie=ie.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Fe=l,Ne=D;Q=c;var xt=g;switch(Ne.tag){case 1:if(Fe=Ne.payload,typeof Fe=="function"){oe=Fe.call(xt,oe,Q);break e}oe=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ne.payload,Q=typeof Fe=="function"?Fe.call(xt,oe,Q):Fe,Q==null)break e;oe=d({},oe,Q);break e;case 2:po=!0}}Q=D.callback,Q!==null&&(l.flags|=64,Z&&(l.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ie===null?(V=ie=Z,U=oe):ie=ie.next=Z,$|=Q;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;Z=D,D=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ie===null&&(U=oe),x.baseState=U,x.firstBaseUpdate=V,x.lastBaseUpdate=ie,E===null&&(x.shared.lanes=0),Ao|=$,l.lanes=$,l.memoizedState=oe}}function jD(l,c){if(typeof l!="function")throw Error(i(191,l));l.call(c)}function PD(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)jD(g[l],c)}var Bc=W(null),V0=W(0);function ID(l,c){l=_s,se(V0,l),se(Bc,c),_s=l|c.baseLanes}function C2(){se(V0,_s),se(Bc,Bc.current)}function M2(){_s=V0.current,ne(Bc),ne(V0)}var vo=0,He=null,vt=null,en=null,W0=!1,jc=!1,Wl=!1,Q0=0,mh=0,Pc=null,gX=0;function Yt(){throw Error(i(321))}function $2(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!qi(l[g],c[g]))return!1;return!0}function T2(l,c,g,m,x,E){return vo=E,He=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=l===null||l.memoizedState===null?AO:CO,Wl=!1,E=g(m,x),Wl=!1,jc&&(E=HD(c,g,m,x)),qD(l),E}function qD(l){R.H=nm;var c=vt!==null&&vt.next!==null;if(vo=0,en=vt=He=null,W0=!1,mh=0,Pc=null,c)throw Error(i(300));l===null||mn||(l=l.dependencies,l!==null&&q0(l)&&(mn=!0))}function HD(l,c,g,m){He=l;var x=0;do{if(jc&&(Pc=null),mh=0,jc=!1,25<=x)throw Error(i(301));if(x+=1,en=vt=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}R.H=SX,E=c(g,m)}while(jc);return E}function pX(){var l=R.H,c=l.useState()[0];return c=typeof c.then=="function"?yh(c):c,l=l.useState()[0],(vt!==null?vt.memoizedState:null)!==l&&(He.flags|=1024),c}function k2(){var l=Q0!==0;return Q0=0,l}function D2(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function O2(l){if(W0){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}W0=!1}vo=0,en=vt=He=null,jc=!1,mh=Q0=0,Pc=null}function wi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=l:en=en.next=l,en}function tn(){if(vt===null){var l=He.alternate;l=l!==null?l.memoizedState:null}else l=vt.next;var c=en===null?He.memoizedState:en.next;if(c!==null)en=c,vt=l;else{if(l===null)throw He.alternate===null?Error(i(467)):Error(i(310));vt=l,l={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},en===null?He.memoizedState=en=l:en=en.next=l}return en}function R2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(l){var c=mh;return mh+=1,Pc===null&&(Pc=[]),l=LD(Pc,l,c),c=He,(en===null?c.memoizedState:en.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?AO:CO),l}function Z0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return yh(l);if(l.$$typeof===A)return In(l)}throw Error(i(438,String(l)))}function N2(l){var c=null,g=He.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=He.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=R2(),He.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),m=0;m<l;m++)g[m]=B;return c.index++,g}function ys(l,c){return typeof c=="function"?c(l):c}function K0(l){var c=tn();return z2(c,vt,l)}function z2(l,c,g){var m=l.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=l.baseQueue,E=m.pending;if(E!==null){if(x!==null){var $=x.next;x.next=E.next,E.next=$}c.baseQueue=x=E,m.pending=null}if(E=l.baseState,x===null)l.memoizedState=E;else{c=x.next;var D=$=null,U=null,V=c,ie=!1;do{var oe=V.lane&-536870913;if(oe!==V.lane?(et&oe)===oe:(vo&oe)===oe){var Q=V.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),oe===Lc&&(ie=!0);else if((vo&Q)===Q){V=V.next,Q===Lc&&(ie=!0);continue}else oe={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},U===null?(D=U=oe,$=E):U=U.next=oe,He.lanes|=Q,Ao|=Q;oe=V.action,Wl&&g(E,oe),E=V.hasEagerState?V.eagerState:g(E,oe)}else Q={lane:oe,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},U===null?(D=U=Q,$=E):U=U.next=Q,He.lanes|=oe,Ao|=oe;V=V.next}while(V!==null&&V!==c);if(U===null?$=E:U.next=D,!qi(E,l.memoizedState)&&(mn=!0,ie&&(g=Uc,g!==null)))throw g;l.memoizedState=E,l.baseState=$,l.baseQueue=U,m.lastRenderedState=E}return x===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function F2(l){var c=tn(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=l;var m=g.dispatch,x=g.pending,E=c.memoizedState;if(x!==null){g.pending=null;var $=x=x.next;do E=l(E,$.action),$=$.next;while($!==x);qi(E,c.memoizedState)||(mn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),g.lastRenderedState=E}return[E,m]}function GD(l,c,g){var m=He,x=tn(),E=ut;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=c();var $=!qi((vt||x).memoizedState,g);$&&(x.memoizedState=g,mn=!0),x=x.queue;var D=VD.bind(null,m,x,l);if(vh(2048,8,D,[l]),x.getSnapshot!==c||$||en!==null&&en.memoizedState.tag&1){if(m.flags|=2048,Ic(9,J0(),XD.bind(null,m,x,g,c),null),Ct===null)throw Error(i(349));E||(vo&124)!==0||YD(m,c,g)}return g}function YD(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=He.updateQueue,c===null?(c=R2(),He.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function XD(l,c,g,m){c.value=g,c.getSnapshot=m,WD(c)&&QD(l)}function VD(l,c,g){return g(function(){WD(c)&&QD(l)})}function WD(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!qi(l,g)}catch{return!0}}function QD(l){var c=Rc(l,2);c!==null&&Wi(c,l,2)}function L2(l){var c=wi();if(typeof l=="function"){var g=l;if(l=g(),Wl){co(!0);try{g()}finally{co(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:l},c}function ZD(l,c,g,m){return l.baseState=g,z2(l,vt,typeof m=="function"?m:ys)}function mX(l,c,g,m,x){if(tm(l))throw Error(i(485));if(l=c.action,l!==null){var E={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){E.listeners.push($)}};R.T!==null?g(!0):E.isTransition=!1,m(E),g=c.pending,g===null?(E.next=c.pending=E,KD(c,E)):(E.next=g.next,c.pending=g.next=E)}}function KD(l,c){var g=c.action,m=c.payload,x=l.state;if(c.isTransition){var E=R.T,$={};R.T=$;try{var D=g(x,m),U=R.S;U!==null&&U($,D),JD(l,c,D)}catch(V){U2(l,c,V)}finally{R.T=E}}else try{E=g(x,m),JD(l,c,E)}catch(V){U2(l,c,V)}}function JD(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){eO(l,c,m)},function(m){return U2(l,c,m)}):eO(l,c,g)}function eO(l,c,g){c.status="fulfilled",c.value=g,tO(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,KD(l,g)))}function U2(l,c,g){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,tO(c),c=c.next;while(c!==m)}l.action=null}function tO(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function nO(l,c){return c}function iO(l,c){if(ut){var g=Ct.formState;if(g!==null){e:{var m=He;if(ut){if(Ut){t:{for(var x=Ut,E=ba;x.nodeType!==8;){if(!E){x=null;break t}if(x=Ir(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Ut=Ir(x.nextSibling),m=x.data==="F!";break e}}Gl(m)}m=!1}m&&(c=g[0])}}return g=wi(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nO,lastRenderedState:c},g.queue=m,g=EO.bind(null,He,m),m.dispatch=g,m=L2(!1),E=q2.bind(null,He,!1,m.queue),m=wi(),x={state:c,dispatch:null,action:l,pending:null},m.queue=x,g=mX.bind(null,He,x,E,g),x.dispatch=g,m.memoizedState=l,[c,g,!1]}function rO(l){var c=tn();return aO(c,vt,l)}function aO(l,c,g){if(c=z2(l,c,nO)[0],l=K0(ys)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=yh(c)}catch($){throw $===fh?Y0:$}else m=c;c=tn();var x=c.queue,E=x.dispatch;return g!==c.memoizedState&&(He.flags|=2048,Ic(9,J0(),yX.bind(null,x,g),null)),[m,E,l]}function yX(l,c){l.action=c}function sO(l){var c=tn(),g=vt;if(g!==null)return aO(c,g,l);tn(),c=c.memoizedState,g=tn();var m=g.queue.dispatch;return g.memoizedState=l,[c,m,!1]}function Ic(l,c,g,m){return l={tag:l,create:g,deps:m,inst:c,next:null},c=He.updateQueue,c===null&&(c=R2(),He.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(m=g.next,g.next=l,l.next=m,c.lastEffect=l),l}function J0(){return{destroy:void 0,resource:void 0}}function oO(){return tn().memoizedState}function em(l,c,g,m){var x=wi();m=m===void 0?null:m,He.flags|=l,x.memoizedState=Ic(1|c,J0(),g,m)}function vh(l,c,g,m){var x=tn();m=m===void 0?null:m;var E=x.memoizedState.inst;vt!==null&&m!==null&&$2(m,vt.memoizedState.deps)?x.memoizedState=Ic(c,E,g,m):(He.flags|=l,x.memoizedState=Ic(1|c,E,g,m))}function lO(l,c){em(8390656,8,l,c)}function uO(l,c){vh(2048,8,l,c)}function cO(l,c){return vh(4,2,l,c)}function fO(l,c){return vh(4,4,l,c)}function dO(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function hO(l,c,g){g=g!=null?g.concat([l]):null,vh(4,4,dO.bind(null,c,l),g)}function B2(){}function gO(l,c){var g=tn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&$2(c,m[1])?m[0]:(g.memoizedState=[l,c],l)}function pO(l,c){var g=tn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&$2(c,m[1]))return m[0];if(m=l(),Wl){co(!0);try{l()}finally{co(!1)}}return g.memoizedState=[m,c],m}function j2(l,c,g){return g===void 0||(vo&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=vR(),He.lanes|=l,Ao|=l,g)}function mO(l,c,g,m){return qi(g,c)?g:Bc.current!==null?(l=j2(l,g,m),qi(l,c)||(mn=!0),l):(vo&42)===0?(mn=!0,l.memoizedState=g):(l=vR(),He.lanes|=l,Ao|=l,c)}function yO(l,c,g,m,x){var E=P.p;P.p=E!==0&&8>E?E:8;var $=R.T,D={};R.T=D,q2(l,!1,c,g);try{var U=x(),V=R.S;if(V!==null&&V(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=hX(U,m);bh(l,c,ie,Vi(l))}else bh(l,c,m,Vi(l))}catch(oe){bh(l,c,{then:function(){},status:"rejected",reason:oe},Vi())}finally{P.p=E,R.T=$}}function vX(){}function P2(l,c,g,m){if(l.tag!==5)throw Error(i(476));var x=vO(l).queue;yO(l,x,c,X,g===null?vX:function(){return bO(l),g(m)})}function vO(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:X},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function bO(l){var c=vO(l).next.queue;bh(l,c,{},Vi())}function I2(){return In(Lh)}function xO(){return tn().memoizedState}function SO(){return tn().memoizedState}function bX(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=Vi();l=mo(g);var m=yo(c,l,g);m!==null&&(Wi(m,c,g),hh(m,c,g)),c={cache:v2()},l.payload=c;return}c=c.return}}function xX(l,c,g){var m=Vi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},tm(l)?_O(c,g):(g=l2(l,c,g,m),g!==null&&(Wi(g,l,m),wO(g,c,m)))}function EO(l,c,g){var m=Vi();bh(l,c,g,m)}function bh(l,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(tm(l))_O(c,x);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var $=c.lastRenderedState,D=E($,g);if(x.hasEagerState=!0,x.eagerState=D,qi(D,$))return U0(l,c,x,0),Ct===null&&L0(),!1}catch{}finally{}if(g=l2(l,c,x,m),g!==null)return Wi(g,l,m),wO(g,c,m),!0}return!1}function q2(l,c,g,m){if(m={lane:2,revertLane:SS(),action:m,hasEagerState:!1,eagerState:null,next:null},tm(l)){if(c)throw Error(i(479))}else c=l2(l,g,m,2),c!==null&&Wi(c,l,2)}function tm(l){var c=l.alternate;return l===He||c!==null&&c===He}function _O(l,c){jc=W0=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function wO(l,c,g){if((g&4194048)!==0){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,Ok(l,g)}}var nm={readContext:In,use:Z0,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},AO={readContext:In,use:Z0,useCallback:function(l,c){return wi().memoizedState=[l,c===void 0?null:c],l},useContext:In,useEffect:lO,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,em(4194308,4,dO.bind(null,c,l),g)},useLayoutEffect:function(l,c){return em(4194308,4,l,c)},useInsertionEffect:function(l,c){em(4,2,l,c)},useMemo:function(l,c){var g=wi();c=c===void 0?null:c;var m=l();if(Wl){co(!0);try{l()}finally{co(!1)}}return g.memoizedState=[m,c],m},useReducer:function(l,c,g){var m=wi();if(g!==void 0){var x=g(c);if(Wl){co(!0);try{g(c)}finally{co(!1)}}}else x=c;return m.memoizedState=m.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},m.queue=l,l=l.dispatch=xX.bind(null,He,l),[m.memoizedState,l]},useRef:function(l){var c=wi();return l={current:l},c.memoizedState=l},useState:function(l){l=L2(l);var c=l.queue,g=EO.bind(null,He,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:B2,useDeferredValue:function(l,c){var g=wi();return j2(g,l,c)},useTransition:function(){var l=L2(!1);return l=yO.bind(null,He,l.queue,!0,!1),wi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var m=He,x=wi();if(ut){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Ct===null)throw Error(i(349));(et&124)!==0||YD(m,c,g)}x.memoizedState=g;var E={value:g,getSnapshot:c};return x.queue=E,lO(VD.bind(null,m,E,l),[l]),m.flags|=2048,Ic(9,J0(),XD.bind(null,m,E,g,c),null),g},useId:function(){var l=wi(),c=Ct.identifierPrefix;if(ut){var g=gs,m=hs;g=(m&~(1<<32-Ii(m)-1)).toString(32)+g,c="«"+c+"R"+g,g=Q0++,0<g&&(c+="H"+g.toString(32)),c+="»"}else g=gX++,c="«"+c+"r"+g.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:I2,useFormState:iO,useActionState:iO,useOptimistic:function(l){var c=wi();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=q2.bind(null,He,!0,g),g.dispatch=c,[l,c]},useMemoCache:N2,useCacheRefresh:function(){return wi().memoizedState=bX.bind(null,He)}},CO={readContext:In,use:Z0,useCallback:gO,useContext:In,useEffect:uO,useImperativeHandle:hO,useInsertionEffect:cO,useLayoutEffect:fO,useMemo:pO,useReducer:K0,useRef:oO,useState:function(){return K0(ys)},useDebugValue:B2,useDeferredValue:function(l,c){var g=tn();return mO(g,vt.memoizedState,l,c)},useTransition:function(){var l=K0(ys)[0],c=tn().memoizedState;return[typeof l=="boolean"?l:yh(l),c]},useSyncExternalStore:GD,useId:xO,useHostTransitionStatus:I2,useFormState:rO,useActionState:rO,useOptimistic:function(l,c){var g=tn();return ZD(g,vt,l,c)},useMemoCache:N2,useCacheRefresh:SO},SX={readContext:In,use:Z0,useCallback:gO,useContext:In,useEffect:uO,useImperativeHandle:hO,useInsertionEffect:cO,useLayoutEffect:fO,useMemo:pO,useReducer:F2,useRef:oO,useState:function(){return F2(ys)},useDebugValue:B2,useDeferredValue:function(l,c){var g=tn();return vt===null?j2(g,l,c):mO(g,vt.memoizedState,l,c)},useTransition:function(){var l=F2(ys)[0],c=tn().memoizedState;return[typeof l=="boolean"?l:yh(l),c]},useSyncExternalStore:GD,useId:xO,useHostTransitionStatus:I2,useFormState:sO,useActionState:sO,useOptimistic:function(l,c){var g=tn();return vt!==null?ZD(g,vt,l,c):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:N2,useCacheRefresh:SO},qc=null,xh=0;function im(l){var c=xh;return xh+=1,qc===null&&(qc=[]),LD(qc,l,c)}function Sh(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function rm(l,c){throw c.$$typeof===h?Error(i(525)):(l=Object.prototype.toString.call(c),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function MO(l){var c=l._init;return c(l._payload)}function $O(l){function c(q,I){if(l){var Y=q.deletions;Y===null?(q.deletions=[I],q.flags|=16):Y.push(I)}}function g(q,I){if(!l)return null;for(;I!==null;)c(q,I),I=I.sibling;return null}function m(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function x(q,I){return q=ds(q,I),q.index=0,q.sibling=null,q}function E(q,I,Y){return q.index=Y,l?(Y=q.alternate,Y!==null?(Y=Y.index,Y<I?(q.flags|=67108866,I):Y):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function $(q){return l&&q.alternate===null&&(q.flags|=67108866),q}function D(q,I,Y,ae){return I===null||I.tag!==6?(I=c2(Y,q.mode,ae),I.return=q,I):(I=x(I,Y),I.return=q,I)}function U(q,I,Y,ae){var we=Y.type;return we===v?ie(q,I,Y.props.children,ae,Y.key):I!==null&&(I.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===O&&MO(we)===I.type)?(I=x(I,Y.props),Sh(I,Y),I.return=q,I):(I=j0(Y.type,Y.key,Y.props,null,q.mode,ae),Sh(I,Y),I.return=q,I)}function V(q,I,Y,ae){return I===null||I.tag!==4||I.stateNode.containerInfo!==Y.containerInfo||I.stateNode.implementation!==Y.implementation?(I=f2(Y,q.mode,ae),I.return=q,I):(I=x(I,Y.children||[]),I.return=q,I)}function ie(q,I,Y,ae,we){return I===null||I.tag!==7?(I=Pl(Y,q.mode,ae,we),I.return=q,I):(I=x(I,Y),I.return=q,I)}function oe(q,I,Y){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=c2(""+I,q.mode,Y),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case p:return Y=j0(I.type,I.key,I.props,null,q.mode,Y),Sh(Y,I),Y.return=q,Y;case y:return I=f2(I,q.mode,Y),I.return=q,I;case O:var ae=I._init;return I=ae(I._payload),oe(q,I,Y)}if(F(I)||G(I))return I=Pl(I,q.mode,Y,null),I.return=q,I;if(typeof I.then=="function")return oe(q,im(I),Y);if(I.$$typeof===A)return oe(q,H0(q,I),Y);rm(q,I)}return null}function Q(q,I,Y,ae){var we=I!==null?I.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return we!==null?null:D(q,I,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return Y.key===we?U(q,I,Y,ae):null;case y:return Y.key===we?V(q,I,Y,ae):null;case O:return we=Y._init,Y=we(Y._payload),Q(q,I,Y,ae)}if(F(Y)||G(Y))return we!==null?null:ie(q,I,Y,ae,null);if(typeof Y.then=="function")return Q(q,I,im(Y),ae);if(Y.$$typeof===A)return Q(q,I,H0(q,Y),ae);rm(q,Y)}return null}function Z(q,I,Y,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,D(I,q,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return q=q.get(ae.key===null?Y:ae.key)||null,U(I,q,ae,we);case y:return q=q.get(ae.key===null?Y:ae.key)||null,V(I,q,ae,we);case O:var Ye=ae._init;return ae=Ye(ae._payload),Z(q,I,Y,ae,we)}if(F(ae)||G(ae))return q=q.get(Y)||null,ie(I,q,ae,we,null);if(typeof ae.then=="function")return Z(q,I,Y,im(ae),we);if(ae.$$typeof===A)return Z(q,I,Y,H0(I,ae),we);rm(I,ae)}return null}function Fe(q,I,Y,ae){for(var we=null,Ye=null,$e=I,ze=I=0,vn=null;$e!==null&&ze<Y.length;ze++){$e.index>ze?(vn=$e,$e=null):vn=$e.sibling;var rt=Q(q,$e,Y[ze],ae);if(rt===null){$e===null&&($e=vn);break}l&&$e&&rt.alternate===null&&c(q,$e),I=E(rt,I,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt,$e=vn}if(ze===Y.length)return g(q,$e),ut&&ql(q,ze),we;if($e===null){for(;ze<Y.length;ze++)$e=oe(q,Y[ze],ae),$e!==null&&(I=E($e,I,ze),Ye===null?we=$e:Ye.sibling=$e,Ye=$e);return ut&&ql(q,ze),we}for($e=m($e);ze<Y.length;ze++)vn=Z($e,q,ze,Y[ze],ae),vn!==null&&(l&&vn.alternate!==null&&$e.delete(vn.key===null?ze:vn.key),I=E(vn,I,ze),Ye===null?we=vn:Ye.sibling=vn,Ye=vn);return l&&$e.forEach(function(No){return c(q,No)}),ut&&ql(q,ze),we}function Ne(q,I,Y,ae){if(Y==null)throw Error(i(151));for(var we=null,Ye=null,$e=I,ze=I=0,vn=null,rt=Y.next();$e!==null&&!rt.done;ze++,rt=Y.next()){$e.index>ze?(vn=$e,$e=null):vn=$e.sibling;var No=Q(q,$e,rt.value,ae);if(No===null){$e===null&&($e=vn);break}l&&$e&&No.alternate===null&&c(q,$e),I=E(No,I,ze),Ye===null?we=No:Ye.sibling=No,Ye=No,$e=vn}if(rt.done)return g(q,$e),ut&&ql(q,ze),we;if($e===null){for(;!rt.done;ze++,rt=Y.next())rt=oe(q,rt.value,ae),rt!==null&&(I=E(rt,I,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return ut&&ql(q,ze),we}for($e=m($e);!rt.done;ze++,rt=Y.next())rt=Z($e,q,ze,rt.value,ae),rt!==null&&(l&&rt.alternate!==null&&$e.delete(rt.key===null?ze:rt.key),I=E(rt,I,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return l&&$e.forEach(function(EV){return c(q,EV)}),ut&&ql(q,ze),we}function xt(q,I,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===v&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:e:{for(var we=Y.key;I!==null;){if(I.key===we){if(we=Y.type,we===v){if(I.tag===7){g(q,I.sibling),ae=x(I,Y.props.children),ae.return=q,q=ae;break e}}else if(I.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===O&&MO(we)===I.type){g(q,I.sibling),ae=x(I,Y.props),Sh(ae,Y),ae.return=q,q=ae;break e}g(q,I);break}else c(q,I);I=I.sibling}Y.type===v?(ae=Pl(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=j0(Y.type,Y.key,Y.props,null,q.mode,ae),Sh(ae,Y),ae.return=q,q=ae)}return $(q);case y:e:{for(we=Y.key;I!==null;){if(I.key===we)if(I.tag===4&&I.stateNode.containerInfo===Y.containerInfo&&I.stateNode.implementation===Y.implementation){g(q,I.sibling),ae=x(I,Y.children||[]),ae.return=q,q=ae;break e}else{g(q,I);break}else c(q,I);I=I.sibling}ae=f2(Y,q.mode,ae),ae.return=q,q=ae}return $(q);case O:return we=Y._init,Y=we(Y._payload),xt(q,I,Y,ae)}if(F(Y))return Fe(q,I,Y,ae);if(G(Y)){if(we=G(Y),typeof we!="function")throw Error(i(150));return Y=we.call(Y),Ne(q,I,Y,ae)}if(typeof Y.then=="function")return xt(q,I,im(Y),ae);if(Y.$$typeof===A)return xt(q,I,H0(q,Y),ae);rm(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,I!==null&&I.tag===6?(g(q,I.sibling),ae=x(I,Y),ae.return=q,q=ae):(g(q,I),ae=c2(Y,q.mode,ae),ae.return=q,q=ae),$(q)):g(q,I)}return function(q,I,Y,ae){try{xh=0;var we=xt(q,I,Y,ae);return qc=null,we}catch($e){if($e===fh||$e===Y0)throw $e;var Ye=Hi(29,$e,null,q.mode);return Ye.lanes=ae,Ye.return=q,Ye}finally{}}}var Hc=$O(!0),TO=$O(!1),yr=W(null),xa=null;function bo(l){var c=l.alternate;se(sn,sn.current&1),se(yr,l),xa===null&&(c===null||Bc.current!==null||c.memoizedState!==null)&&(xa=l)}function kO(l){if(l.tag===22){if(se(sn,sn.current),se(yr,l),xa===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(xa=l)}}else xo()}function xo(){se(sn,sn.current),se(yr,yr.current)}function vs(l){ne(yr),xa===l&&(xa=null),ne(sn)}var sn=W(0);function am(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||RS(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function H2(l,c,g,m){c=l.memoizedState,g=g(m,c),g=g==null?c:d({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var G2={enqueueSetState:function(l,c,g){l=l._reactInternals;var m=Vi(),x=mo(m);x.payload=c,g!=null&&(x.callback=g),c=yo(l,x,m),c!==null&&(Wi(c,l,m),hh(c,l,m))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var m=Vi(),x=mo(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=yo(l,x,m),c!==null&&(Wi(c,l,m),hh(c,l,m))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Vi(),m=mo(g);m.tag=2,c!=null&&(m.callback=c),c=yo(l,m,g),c!==null&&(Wi(c,l,g),hh(c,l,g))}};function DO(l,c,g,m,x,E,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,E,$):c.prototype&&c.prototype.isPureReactComponent?!ih(g,m)||!ih(x,E):!0}function OO(l,c,g,m){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==l&&G2.enqueueReplaceState(c,c.state,null)}function Ql(l,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(l=l.defaultProps){g===c&&(g=d({},g));for(var x in l)g[x]===void 0&&(g[x]=l[x])}return g}var sm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function RO(l){sm(l)}function NO(l){console.error(l)}function zO(l){sm(l)}function om(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function FO(l,c,g){try{var m=l.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Y2(l,c,g){return g=mo(g),g.tag=3,g.payload={element:null},g.callback=function(){om(l,c)},g}function LO(l){return l=mo(l),l.tag=3,l}function UO(l,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;l.payload=function(){return x(E)},l.callback=function(){FO(c,g,m)}}var $=g.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(l.callback=function(){FO(c,g,m),typeof x!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function EX(l,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&lh(c,g,x,!0),g=yr.current,g!==null){switch(g.tag){case 13:return xa===null?mS():g.alternate===null&&Bt===0&&(Bt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===S2?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),vS(l,m,x)),!1;case 22:return g.flags|=65536,m===S2?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),vS(l,m,x)),!1}throw Error(i(435,g.tag))}return vS(l,m,x),mS(),!1}if(ut)return c=yr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==g2&&(l=Error(i(422),{cause:m}),oh(hr(l,g)))):(m!==g2&&(c=Error(i(423),{cause:m}),oh(hr(c,g))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,m=hr(m,g),x=Y2(l.stateNode,m,x),w2(l,x),Bt!==4&&(Bt=2)),!1;var E=Error(i(520),{cause:m});if(E=hr(E,g),$h===null?$h=[E]:$h.push(E),Bt!==4&&(Bt=2),c===null)return!0;m=hr(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=x&-x,g.lanes|=l,l=Y2(g.stateNode,m,l),w2(g,l),!1;case 1:if(c=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Co===null||!Co.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=LO(x),UO(x,l,g,m),w2(g,x),!1}g=g.return}while(g!==null);return!1}var BO=Error(i(461)),mn=!1;function Tn(l,c,g,m){c.child=l===null?TO(c,null,g,m):Hc(c,l.child,g,m)}function jO(l,c,g,m,x){g=g.render;var E=c.ref;if("ref"in m){var $={};for(var D in m)D!=="ref"&&($[D]=m[D])}else $=m;return Xl(c),m=T2(l,c,g,$,E,x),D=k2(),l!==null&&!mn?(D2(l,c,x),bs(l,c,x)):(ut&&D&&d2(c),c.flags|=1,Tn(l,c,m,x),c.child)}function PO(l,c,g,m,x){if(l===null){var E=g.type;return typeof E=="function"&&!u2(E)&&E.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=E,IO(l,c,E,m,x)):(l=j0(g.type,null,m,c,c.mode,x),l.ref=c.ref,l.return=c,c.child=l)}if(E=l.child,!eS(l,x)){var $=E.memoizedProps;if(g=g.compare,g=g!==null?g:ih,g($,m)&&l.ref===c.ref)return bs(l,c,x)}return c.flags|=1,l=ds(E,m),l.ref=c.ref,l.return=c,c.child=l}function IO(l,c,g,m,x){if(l!==null){var E=l.memoizedProps;if(ih(E,m)&&l.ref===c.ref)if(mn=!1,c.pendingProps=m=E,eS(l,x))(l.flags&131072)!==0&&(mn=!0);else return c.lanes=l.lanes,bs(l,c,x)}return X2(l,c,g,m,x)}function qO(l,c,g){var m=c.pendingProps,x=m.children,E=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,l!==null){for(x=c.child=l.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return HO(l,c,m,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&G0(c,E!==null?E.cachePool:null),E!==null?ID(c,E):C2(),kO(c);else return c.lanes=c.childLanes=536870912,HO(l,c,E!==null?E.baseLanes|g:g,g)}else E!==null?(G0(c,E.cachePool),ID(c,E),xo(),c.memoizedState=null):(l!==null&&G0(c,null),C2(),xo());return Tn(l,c,x,g),c.child}function HO(l,c,g,m){var x=x2();return x=x===null?null:{parent:an._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},l!==null&&G0(c,null),C2(),kO(c),l!==null&&lh(l,c,m,!0),null}function lm(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(l===null||l.ref!==g)&&(c.flags|=4194816)}}function X2(l,c,g,m,x){return Xl(c),g=T2(l,c,g,m,void 0,x),m=k2(),l!==null&&!mn?(D2(l,c,x),bs(l,c,x)):(ut&&m&&d2(c),c.flags|=1,Tn(l,c,g,x),c.child)}function GO(l,c,g,m,x,E){return Xl(c),c.updateQueue=null,g=HD(c,m,g,x),qD(l),m=k2(),l!==null&&!mn?(D2(l,c,E),bs(l,c,E)):(ut&&m&&d2(c),c.flags|=1,Tn(l,c,g,E),c.child)}function YO(l,c,g,m,x){if(Xl(c),c.stateNode===null){var E=Nc,$=g.contextType;typeof $=="object"&&$!==null&&(E=In($)),E=new g(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=G2,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},E2(c),$=g.contextType,E.context=typeof $=="object"&&$!==null?In($):Nc,E.state=c.memoizedState,$=g.getDerivedStateFromProps,typeof $=="function"&&(H2(c,g,$,m),E.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||($=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),$!==E.state&&G2.enqueueReplaceState(E,E.state,null),ph(c,m,E,x),gh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(l===null){E=c.stateNode;var D=c.memoizedProps,U=Ql(g,D);E.props=U;var V=E.context,ie=g.contextType;$=Nc,typeof ie=="object"&&ie!==null&&($=In(ie));var oe=g.getDerivedStateFromProps;ie=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=c.pendingProps!==D,ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||V!==$)&&OO(c,E,m,$),po=!1;var Q=c.memoizedState;E.state=Q,ph(c,m,E,x),gh(),V=c.memoizedState,D||Q!==V||po?(typeof oe=="function"&&(H2(c,g,oe,m),V=c.memoizedState),(U=po||DO(c,g,U,m,Q,V,$))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=V),E.props=m,E.state=V,E.context=$,m=U):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,_2(l,c),$=c.memoizedProps,ie=Ql(g,$),E.props=ie,oe=c.pendingProps,Q=E.context,V=g.contextType,U=Nc,typeof V=="object"&&V!==null&&(U=In(V)),D=g.getDerivedStateFromProps,(V=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||($!==oe||Q!==U)&&OO(c,E,m,U),po=!1,Q=c.memoizedState,E.state=Q,ph(c,m,E,x),gh();var Z=c.memoizedState;$!==oe||Q!==Z||po||l!==null&&l.dependencies!==null&&q0(l.dependencies)?(typeof D=="function"&&(H2(c,g,D,m),Z=c.memoizedState),(ie=po||DO(c,g,ie,m,Q,Z,U)||l!==null&&l.dependencies!==null&&q0(l.dependencies))?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,Z,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,Z,U)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Z),E.props=m,E.state=Z,E.context=U,m=ie):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Q===l.memoizedState||(c.flags|=1024),m=!1)}return E=m,lm(l,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,l!==null&&m?(c.child=Hc(c,l.child,null,x),c.child=Hc(c,null,g,x)):Tn(l,c,g,x),c.memoizedState=E.state,l=c.child):l=bs(l,c,x),l}function XO(l,c,g,m){return sh(),c.flags|=256,Tn(l,c,g,m),c.child}var V2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W2(l){return{baseLanes:l,cachePool:ND()}}function Q2(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=vr),l}function VO(l,c,g){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,$;if(($=E)||($=l!==null&&l.memoizedState===null?!1:(sn.current&2)!==0),$&&(x=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,l===null){if(ut){if(x?bo(c):xo(),ut){var D=Ut,U;if(U=D){e:{for(U=D,D=ba;U.nodeType!==8;){if(!D){D=null;break e}if(U=Ir(U.nextSibling),U===null){D=null;break e}}D=U}D!==null?(c.memoizedState={dehydrated:D,treeContext:Il!==null?{id:hs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},U=Hi(18,null,null,0),U.stateNode=D,U.return=c,c.child=U,ri=c,Ut=null,U=!0):U=!1}U||Gl(c)}if(D=c.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return RS(D)?c.lanes=32:c.lanes=536870912,null;vs(c)}return D=m.children,m=m.fallback,x?(xo(),x=c.mode,D=um({mode:"hidden",children:D},x),m=Pl(m,x,g,null),D.return=c,m.return=c,D.sibling=m,c.child=D,x=c.child,x.memoizedState=W2(g),x.childLanes=Q2(l,$,g),c.memoizedState=V2,m):(bo(c),Z2(c,D))}if(U=l.memoizedState,U!==null&&(D=U.dehydrated,D!==null)){if(E)c.flags&256?(bo(c),c.flags&=-257,c=K2(l,c,g)):c.memoizedState!==null?(xo(),c.child=l.child,c.flags|=128,c=null):(xo(),x=m.fallback,D=c.mode,m=um({mode:"visible",children:m.children},D),x=Pl(x,D,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Hc(c,l.child,null,g),m=c.child,m.memoizedState=W2(g),m.childLanes=Q2(l,$,g),c.memoizedState=V2,c=x);else if(bo(c),RS(D)){if($=D.nextSibling&&D.nextSibling.dataset,$)var V=$.dgst;$=V,m=Error(i(419)),m.stack="",m.digest=$,oh({value:m,source:null,stack:null}),c=K2(l,c,g)}else if(mn||lh(l,c,g,!1),$=(g&l.childLanes)!==0,mn||$){if($=Ct,$!==null&&(m=g&-g,m=(m&42)!==0?1:Nx(m),m=(m&($.suspendedLanes|g))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,Rc(l,m),Wi($,l,m),BO;D.data==="$?"||mS(),c=K2(l,c,g)}else D.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=U.treeContext,Ut=Ir(D.nextSibling),ri=c,ut=!0,Hl=null,ba=!1,l!==null&&(pr[mr++]=hs,pr[mr++]=gs,pr[mr++]=Il,hs=l.id,gs=l.overflow,Il=c),c=Z2(c,m.children),c.flags|=4096);return c}return x?(xo(),x=m.fallback,D=c.mode,U=l.child,V=U.sibling,m=ds(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,V!==null?x=ds(V,x):(x=Pl(x,D,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,D=l.child.memoizedState,D===null?D=W2(g):(U=D.cachePool,U!==null?(V=an._currentValue,U=U.parent!==V?{parent:V,pool:V}:U):U=ND(),D={baseLanes:D.baseLanes|g,cachePool:U}),x.memoizedState=D,x.childLanes=Q2(l,$,g),c.memoizedState=V2,m):(bo(c),g=l.child,l=g.sibling,g=ds(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,l!==null&&($=c.deletions,$===null?(c.deletions=[l],c.flags|=16):$.push(l)),c.child=g,c.memoizedState=null,g)}function Z2(l,c){return c=um({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function um(l,c){return l=Hi(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function K2(l,c,g){return Hc(c,l.child,null,g),l=Z2(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function WO(l,c,g){l.lanes|=c;var m=l.alternate;m!==null&&(m.lanes|=c),m2(l.return,c,g)}function J2(l,c,g,m,x){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function QO(l,c,g){var m=c.pendingProps,x=m.revealOrder,E=m.tail;if(Tn(l,c,m.children,g),m=sn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&WO(l,g,c);else if(l.tag===19)WO(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(se(sn,m),x){case"forwards":for(g=c.child,x=null;g!==null;)l=g.alternate,l!==null&&am(l)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),J2(c,!1,x,g,E);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(l=x.alternate,l!==null&&am(l)===null){c.child=x;break}l=x.sibling,x.sibling=g,g=x,x=l}J2(c,!0,g,null,E);break;case"together":J2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Ao|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(lh(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(i(153));if(c.child!==null){for(l=c.child,g=ds(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=ds(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function eS(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&q0(l)))}function _X(l,c,g){switch(c.tag){case 3:nt(c,c.stateNode.containerInfo),go(c,an,l.memoizedState.cache),sh();break;case 27:case 5:Ue(c);break;case 4:nt(c,c.stateNode.containerInfo);break;case 10:go(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(bo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?VO(l,c,g):(bo(c),l=bs(l,c,g),l!==null?l.sibling:null);bo(c);break;case 19:var x=(l.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(lh(l,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return QO(l,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(sn,sn.current),m)break;return null;case 22:case 23:return c.lanes=0,qO(l,c,g);case 24:go(c,an,l.memoizedState.cache)}return bs(l,c,g)}function ZO(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)mn=!0;else{if(!eS(l,g)&&(c.flags&128)===0)return mn=!1,_X(l,c,g);mn=(l.flags&131072)!==0}else mn=!1,ut&&(c.flags&1048576)!==0&&MD(c,I0,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")u2(m)?(l=Ql(m,l),c.tag=1,c=YO(null,c,m,l,g)):(c.tag=0,c=X2(null,c,m,l,g));else{if(m!=null){if(x=m.$$typeof,x===C){c.tag=11,c=jO(null,c,m,l,g);break e}else if(x===T){c.tag=14,c=PO(null,c,m,l,g);break e}}throw c=j(m)||m,Error(i(306,c,""))}}return c;case 0:return X2(l,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=Ql(m,c.pendingProps),YO(l,c,m,x,g);case 3:e:{if(nt(c,c.stateNode.containerInfo),l===null)throw Error(i(387));m=c.pendingProps;var E=c.memoizedState;x=E.element,_2(l,c),ph(c,m,null,g);var $=c.memoizedState;if(m=$.cache,go(c,an,m),m!==E.cache&&y2(c,[an],g,!0),gh(),m=$.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=XO(l,c,m,g);break e}else if(m!==x){x=hr(Error(i(424)),c),oh(x),c=XO(l,c,m,g);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ut=Ir(l.firstChild),ri=c,ut=!0,Hl=null,ba=!0,g=TO(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(sh(),m===x){c=bs(l,c,g);break e}Tn(l,c,m,g)}c=c.child}return c;case 26:return lm(l,c),l===null?(g=tN(c.type,null,c.pendingProps,null))?c.memoizedState=g:ut||(g=c.type,l=c.pendingProps,m=_m(Ce.current).createElement(g),m[Pn]=c,m[Ei]=l,Dn(m,g,l),pn(m),c.stateNode=m):c.memoizedState=tN(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Ue(c),l===null&&ut&&(m=c.stateNode=KR(c.type,c.pendingProps,Ce.current),ri=c,ba=!0,x=Ut,To(c.type)?(NS=x,Ut=Ir(m.firstChild)):Ut=x),Tn(l,c,c.pendingProps.children,g),lm(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&ut&&((x=m=Ut)&&(m=ZX(m,c.type,c.pendingProps,ba),m!==null?(c.stateNode=m,ri=c,Ut=Ir(m.firstChild),ba=!1,x=!0):x=!1),x||Gl(c)),Ue(c),x=c.type,E=c.pendingProps,$=l!==null?l.memoizedProps:null,m=E.children,kS(x,E)?m=null:$!==null&&kS(x,$)&&(c.flags|=32),c.memoizedState!==null&&(x=T2(l,c,pX,null,null,g),Lh._currentValue=x),lm(l,c),Tn(l,c,m,g),c.child;case 6:return l===null&&ut&&((l=g=Ut)&&(g=KX(g,c.pendingProps,ba),g!==null?(c.stateNode=g,ri=c,Ut=null,l=!0):l=!1),l||Gl(c)),null;case 13:return VO(l,c,g);case 4:return nt(c,c.stateNode.containerInfo),m=c.pendingProps,l===null?c.child=Hc(c,null,m,g):Tn(l,c,m,g),c.child;case 11:return jO(l,c,c.type,c.pendingProps,g);case 7:return Tn(l,c,c.pendingProps,g),c.child;case 8:return Tn(l,c,c.pendingProps.children,g),c.child;case 12:return Tn(l,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,go(c,c.type,m.value),Tn(l,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Xl(c),x=In(x),m=m(x),c.flags|=1,Tn(l,c,m,g),c.child;case 14:return PO(l,c,c.type,c.pendingProps,g);case 15:return IO(l,c,c.type,c.pendingProps,g);case 19:return QO(l,c,g);case 31:return m=c.pendingProps,g=c.mode,m={mode:m.mode,children:m.children},l===null?(g=um(m,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=ds(l.child,m),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return qO(l,c,g);case 24:return Xl(c),m=In(an),l===null?(x=x2(),x===null&&(x=Ct,E=v2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),c.memoizedState={parent:m,cache:x},E2(c),go(c,an,x)):((l.lanes&g)!==0&&(_2(l,c),ph(c,null,null,g),gh()),x=l.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),go(c,an,m)):(m=E.cache,go(c,an,m),m!==x.cache&&y2(c,[an],g,!0))),Tn(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function xs(l){l.flags|=4}function KO(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!sN(c)){if(c=yr.current,c!==null&&((et&4194048)===et?xa!==null:(et&62914560)!==et&&(et&536870912)===0||c!==xa))throw dh=S2,zD;l.flags|=8192}}function cm(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?kk():536870912,l.lanes|=c,Vc|=c)}function Eh(l,c){if(!ut)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Nt(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,m=0;if(c)for(var x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=m,l.childLanes=g,c}function wX(l,c,g){var m=c.pendingProps;switch(h2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(c),null;case 1:return Nt(c),null;case 3:return g=c.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ms(an),xe(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(ah(c)?xs(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,kD())),Nt(c),null;case 26:return g=c.memoizedState,l===null?(xs(c),g!==null?(Nt(c),KO(c,g)):(Nt(c),c.flags&=-16777217)):g?g!==l.memoizedState?(xs(c),Nt(c),KO(c,g)):(Nt(c),c.flags&=-16777217):(l.memoizedProps!==m&&xs(c),Nt(c),c.flags&=-16777217),null;case 27:je(c),g=Ce.current;var x=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}l=ye.current,ah(c)?$D(c):(l=KR(x,m,g),c.stateNode=l,xs(c))}return Nt(c),null;case 5:if(je(c),g=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}if(l=ye.current,ah(c))$D(c);else{switch(x=_m(Ce.current),l){case 1:l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=x.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}l[Pn]=c,l[Ei]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=l;e:switch(Dn(l,g,m),g){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xs(c)}}return Nt(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(l=Ce.current,ah(c)){if(l=c.stateNode,g=c.memoizedProps,m=null,x=ri,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}l[Pn]=c,l=!!(l.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||GR(l.nodeValue,g)),l||Gl(c)}else l=_m(l).createTextNode(m),l[Pn]=c,c.stateNode=l}return Nt(c),null;case 13:if(m=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=ah(c),m!==null&&m.dehydrated!==null){if(l===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Pn]=c}else sh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Nt(c),x=!1}else x=kD(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(vs(c),c):(vs(c),null)}if(vs(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=m!==null,l=l!==null&&l.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),cm(c,c.updateQueue),Nt(c),null;case 4:return xe(),l===null&&AS(c.stateNode.containerInfo),Nt(c),null;case 10:return ms(c.type),Nt(c),null;case 19:if(ne(sn),x=c.memoizedState,x===null)return Nt(c),null;if(m=(c.flags&128)!==0,E=x.rendering,E===null)if(m)Eh(x,!1);else{if(Bt!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(E=am(l),E!==null){for(c.flags|=128,Eh(x,!1),l=E.updateQueue,c.updateQueue=l,cm(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)CD(g,l),g=g.sibling;return se(sn,sn.current&1|2),c.child}l=l.sibling}x.tail!==null&&Jt()>hm&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304)}else{if(!m)if(l=am(E),l!==null){if(c.flags|=128,m=!0,l=l.updateQueue,c.updateQueue=l,cm(c,l),Eh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!ut)return Nt(c),null}else 2*Jt()-x.renderingStartTime>hm&&g!==536870912&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(l=x.last,l!==null?l.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Jt(),c.sibling=null,l=sn.current,se(sn,m?l&1|2:l&1),c):(Nt(c),null);case 22:case 23:return vs(c),M2(),m=c.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(Nt(c),c.subtreeFlags&6&&(c.flags|=8192)):Nt(c),g=c.updateQueue,g!==null&&cm(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),l!==null&&ne(Vl),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ms(an),Nt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function AX(l,c){switch(h2(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return ms(an),xe(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return je(c),null;case 13:if(vs(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(i(340));sh()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return ne(sn),null;case 4:return xe(),null;case 10:return ms(c.type),null;case 22:case 23:return vs(c),M2(),l!==null&&ne(Vl),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return ms(an),null;case 25:return null;default:return null}}function JO(l,c){switch(h2(c),c.tag){case 3:ms(an),xe();break;case 26:case 27:case 5:je(c);break;case 4:xe();break;case 13:vs(c);break;case 19:ne(sn);break;case 10:ms(c.type);break;case 22:case 23:vs(c),M2(),l!==null&&ne(Vl);break;case 24:ms(an)}}function _h(l,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&l)===l){m=void 0;var E=g.create,$=g.inst;m=E(),$.destroy=m}g=g.next}while(g!==x)}}catch(D){_t(c,c.return,D)}}function So(l,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&l)===l){var $=m.inst,D=$.destroy;if(D!==void 0){$.destroy=void 0,x=c;var U=g,V=D;try{V()}catch(ie){_t(x,U,ie)}}}m=m.next}while(m!==E)}}catch(ie){_t(c,c.return,ie)}}function eR(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{PD(c,g)}catch(m){_t(l,l.return,m)}}}function tR(l,c,g){g.props=Ql(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(m){_t(l,c,m)}}function wh(l,c){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof g=="function"?l.refCleanup=g(m):g.current=m}}catch(x){_t(l,c,x)}}function Sa(l,c){var g=l.ref,m=l.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){_t(l,c,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){_t(l,c,x)}else g.current=null}function nR(l){var c=l.type,g=l.memoizedProps,m=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){_t(l,l.return,x)}}function tS(l,c,g){try{var m=l.stateNode;YX(m,l.type,g,c),m[Ei]=c}catch(x){_t(l,l.return,x)}}function iR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&To(l.type)||l.tag===4}function nS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||iR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&To(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function iS(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(l),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Em));else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode,c=null),l=l.child,l!==null))for(iS(l,c,g),l=l.sibling;l!==null;)iS(l,c,g),l=l.sibling}function fm(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?g.insertBefore(l,c):g.appendChild(l);else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(fm(l,c,g),l=l.sibling;l!==null;)fm(l,c,g),l=l.sibling}function rR(l){var c=l.stateNode,g=l.memoizedProps;try{for(var m=l.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Dn(c,m,g),c[Pn]=l,c[Ei]=g}catch(E){_t(l,l.return,E)}}var Ss=!1,Xt=!1,rS=!1,aR=typeof WeakSet=="function"?WeakSet:Set,yn=null;function CX(l,c){if(l=l.containerInfo,$S=Tm,l=mD(l),n2(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var $=0,D=-1,U=-1,V=0,ie=0,oe=l,Q=null;t:for(;;){for(var Z;oe!==g||x!==0&&oe.nodeType!==3||(D=$+x),oe!==E||m!==0&&oe.nodeType!==3||(U=$+m),oe.nodeType===3&&($+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)Q=oe,oe=Z;for(;;){if(oe===l)break t;if(Q===g&&++V===x&&(D=$),Q===E&&++ie===m&&(U=$),(Z=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=Z}g=D===-1||U===-1?null:{start:D,end:U}}else g=null}g=g||{start:0,end:0}}else g=null;for(TS={focusedElem:l,selectionRange:g},Tm=!1,yn=c;yn!==null;)if(c=yn,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,yn=l;else for(;yn!==null;){switch(c=yn,E=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,g=c,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var Fe=Ql(g.type,x,g.elementType===g.type);l=m.getSnapshotBeforeUpdate(Fe,E),m.__reactInternalSnapshotBeforeUpdate=l}catch(Ne){_t(g,g.return,Ne)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,g=l.nodeType,g===9)OS(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":OS(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=c.sibling,l!==null){l.return=c.return,yn=l;break}yn=c.return}}function sR(l,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Eo(l,g),m&4&&_h(5,g);break;case 1:if(Eo(l,g),m&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch($){_t(g,g.return,$)}else{var x=Ql(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(x,c,l.__reactInternalSnapshotBeforeUpdate)}catch($){_t(g,g.return,$)}}m&64&&eR(g),m&512&&wh(g,g.return);break;case 3:if(Eo(l,g),m&64&&(l=g.updateQueue,l!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{PD(l,c)}catch($){_t(g,g.return,$)}}break;case 27:c===null&&m&4&&rR(g);case 26:case 5:Eo(l,g),c===null&&m&4&&nR(g),m&512&&wh(g,g.return);break;case 12:Eo(l,g);break;case 13:Eo(l,g),m&4&&uR(l,g),m&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=zX.bind(null,g),JX(l,g))));break;case 22:if(m=g.memoizedState!==null||Ss,!m){c=c!==null&&c.memoizedState!==null||Xt,x=Ss;var E=Xt;Ss=m,(Xt=c)&&!E?_o(l,g,(g.subtreeFlags&8772)!==0):Eo(l,g),Ss=x,Xt=E}break;case 30:break;default:Eo(l,g)}}function oR(l){var c=l.alternate;c!==null&&(l.alternate=null,oR(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Lx(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var kt=null,Ai=!1;function Es(l,c,g){for(g=g.child;g!==null;)lR(l,c,g),g=g.sibling}function lR(l,c,g){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Gd,g)}catch{}switch(g.tag){case 26:Xt||Sa(g,c),Es(l,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Xt||Sa(g,c);var m=kt,x=Ai;To(g.type)&&(kt=g.stateNode,Ai=!1),Es(l,c,g),Rh(g.stateNode),kt=m,Ai=x;break;case 5:Xt||Sa(g,c);case 6:if(m=kt,x=Ai,kt=null,Es(l,c,g),kt=m,Ai=x,kt!==null)if(Ai)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(g.stateNode)}catch(E){_t(g,c,E)}else try{kt.removeChild(g.stateNode)}catch(E){_t(g,c,E)}break;case 18:kt!==null&&(Ai?(l=kt,QR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Ph(l)):QR(kt,g.stateNode));break;case 4:m=kt,x=Ai,kt=g.stateNode.containerInfo,Ai=!0,Es(l,c,g),kt=m,Ai=x;break;case 0:case 11:case 14:case 15:Xt||So(2,g,c),Xt||So(4,g,c),Es(l,c,g);break;case 1:Xt||(Sa(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&tR(g,c,m)),Es(l,c,g);break;case 21:Es(l,c,g);break;case 22:Xt=(m=Xt)||g.memoizedState!==null,Es(l,c,g),Xt=m;break;default:Es(l,c,g)}}function uR(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Ph(l)}catch(g){_t(c,c.return,g)}}function MX(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new aR),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new aR),c;default:throw Error(i(435,l.tag))}}function aS(l,c){var g=MX(l);c.forEach(function(m){var x=FX.bind(null,l,m);g.has(m)||(g.add(m),m.then(x,x))})}function Gi(l,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=l,$=c,D=$;e:for(;D!==null;){switch(D.tag){case 27:if(To(D.type)){kt=D.stateNode,Ai=!1;break e}break;case 5:kt=D.stateNode,Ai=!1;break e;case 3:case 4:kt=D.stateNode.containerInfo,Ai=!0;break e}D=D.return}if(kt===null)throw Error(i(160));lR(E,$,x),kt=null,Ai=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)cR(c,l),c=c.sibling}var Pr=null;function cR(l,c){var g=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Gi(c,l),Yi(l),m&4&&(So(3,l,l.return),_h(3,l),So(5,l,l.return));break;case 1:Gi(c,l),Yi(l),m&512&&(Xt||g===null||Sa(g,g.return)),m&64&&Ss&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Pr;if(Gi(c,l),Yi(l),m&512&&(Xt||g===null||Sa(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=l.memoizedState,g===null)if(m===null)if(l.stateNode===null){e:{m=l.type,g=l.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Vd]||E[Pn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Dn(E,m,g),E[Pn]=l,pn(E),m=E;break e;case"link":var $=rN("link","href",x).get(m+(g.href||""));if($){for(var D=0;D<$.length;D++)if(E=$[D],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){$.splice(D,1);break t}}E=x.createElement(m),Dn(E,m,g),x.head.appendChild(E);break;case"meta":if($=rN("meta","content",x).get(m+(g.content||""))){for(D=0;D<$.length;D++)if(E=$[D],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){$.splice(D,1);break t}}E=x.createElement(m),Dn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Pn]=l,pn(E),m=E}l.stateNode=m}else aN(x,l.type,l.stateNode);else l.stateNode=iN(x,m,l.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?aN(x,l.type,l.stateNode):iN(x,m,l.memoizedProps)):m===null&&l.stateNode!==null&&tS(l,l.memoizedProps,g.memoizedProps)}break;case 27:Gi(c,l),Yi(l),m&512&&(Xt||g===null||Sa(g,g.return)),g!==null&&m&4&&tS(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Gi(c,l),Yi(l),m&512&&(Xt||g===null||Sa(g,g.return)),l.flags&32){x=l.stateNode;try{Cc(x,"")}catch(Z){_t(l,l.return,Z)}}m&4&&l.stateNode!=null&&(x=l.memoizedProps,tS(l,x,g!==null?g.memoizedProps:x)),m&1024&&(rS=!0);break;case 6:if(Gi(c,l),Yi(l),m&4){if(l.stateNode===null)throw Error(i(162));m=l.memoizedProps,g=l.stateNode;try{g.nodeValue=m}catch(Z){_t(l,l.return,Z)}}break;case 3:if(Cm=null,x=Pr,Pr=wm(c.containerInfo),Gi(c,l),Pr=x,Yi(l),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Ph(c.containerInfo)}catch(Z){_t(l,l.return,Z)}rS&&(rS=!1,fR(l));break;case 4:m=Pr,Pr=wm(l.stateNode.containerInfo),Gi(c,l),Yi(l),Pr=m;break;case 12:Gi(c,l),Yi(l);break;case 13:Gi(c,l),Yi(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(fS=Jt()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,aS(l,m)));break;case 22:x=l.memoizedState!==null;var U=g!==null&&g.memoizedState!==null,V=Ss,ie=Xt;if(Ss=V||x,Xt=ie||U,Gi(c,l),Xt=ie,Ss=V,Yi(l),m&8192)e:for(c=l.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(g===null||U||Ss||Xt||Zl(l)),g=null,c=l;;){if(c.tag===5||c.tag===26){if(g===null){U=g=c;try{if(E=U.stateNode,x)$=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{D=U.stateNode;var oe=U.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){_t(U,U.return,Z)}}}else if(c.tag===6){if(g===null){U=c;try{U.stateNode.nodeValue=x?"":U.memoizedProps}catch(Z){_t(U,U.return,Z)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=l.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,aS(l,g))));break;case 19:Gi(c,l),Yi(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,aS(l,m)));break;case 30:break;case 21:break;default:Gi(c,l),Yi(l)}}function Yi(l){var c=l.flags;if(c&2){try{for(var g,m=l.return;m!==null;){if(iR(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=nS(l);fm(l,E,x);break;case 5:var $=g.stateNode;g.flags&32&&(Cc($,""),g.flags&=-33);var D=nS(l);fm(l,D,$);break;case 3:case 4:var U=g.stateNode.containerInfo,V=nS(l);iS(l,V,U);break;default:throw Error(i(161))}}catch(ie){_t(l,l.return,ie)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function fR(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;fR(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function Eo(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)sR(l,c.alternate,c),c=c.sibling}function Zl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:So(4,c,c.return),Zl(c);break;case 1:Sa(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&tR(c,c.return,g),Zl(c);break;case 27:Rh(c.stateNode);case 26:case 5:Sa(c,c.return),Zl(c);break;case 22:c.memoizedState===null&&Zl(c);break;case 30:Zl(c);break;default:Zl(c)}l=l.sibling}}function _o(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=l,E=c,$=E.flags;switch(E.tag){case 0:case 11:case 15:_o(x,E,g),_h(4,E);break;case 1:if(_o(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(V){_t(m,m.return,V)}if(m=E,x=m.updateQueue,x!==null){var D=m.stateNode;try{var U=x.shared.hiddenCallbacks;if(U!==null)for(x.shared.hiddenCallbacks=null,x=0;x<U.length;x++)jD(U[x],D)}catch(V){_t(m,m.return,V)}}g&&$&64&&eR(E),wh(E,E.return);break;case 27:rR(E);case 26:case 5:_o(x,E,g),g&&m===null&&$&4&&nR(E),wh(E,E.return);break;case 12:_o(x,E,g);break;case 13:_o(x,E,g),g&&$&4&&uR(x,E);break;case 22:E.memoizedState===null&&_o(x,E,g),wh(E,E.return);break;case 30:break;default:_o(x,E,g)}c=c.sibling}}function sS(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&uh(g))}function oS(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&uh(l))}function Ea(l,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)dR(l,c,g,m),c=c.sibling}function dR(l,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Ea(l,c,g,m),x&2048&&_h(9,c);break;case 1:Ea(l,c,g,m);break;case 3:Ea(l,c,g,m),x&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&uh(l)));break;case 12:if(x&2048){Ea(l,c,g,m),l=c.stateNode;try{var E=c.memoizedProps,$=E.id,D=E.onPostCommit;typeof D=="function"&&D($,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(U){_t(c,c.return,U)}}else Ea(l,c,g,m);break;case 13:Ea(l,c,g,m);break;case 23:break;case 22:E=c.stateNode,$=c.alternate,c.memoizedState!==null?E._visibility&2?Ea(l,c,g,m):Ah(l,c):E._visibility&2?Ea(l,c,g,m):(E._visibility|=2,Gc(l,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&sS($,c);break;case 24:Ea(l,c,g,m),x&2048&&oS(c.alternate,c);break;default:Ea(l,c,g,m)}}function Gc(l,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=l,$=c,D=g,U=m,V=$.flags;switch($.tag){case 0:case 11:case 15:Gc(E,$,D,U,x),_h(8,$);break;case 23:break;case 22:var ie=$.stateNode;$.memoizedState!==null?ie._visibility&2?Gc(E,$,D,U,x):Ah(E,$):(ie._visibility|=2,Gc(E,$,D,U,x)),x&&V&2048&&sS($.alternate,$);break;case 24:Gc(E,$,D,U,x),x&&V&2048&&oS($.alternate,$);break;default:Gc(E,$,D,U,x)}c=c.sibling}}function Ah(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,m=c,x=m.flags;switch(m.tag){case 22:Ah(g,m),x&2048&&sS(m.alternate,m);break;case 24:Ah(g,m),x&2048&&oS(m.alternate,m);break;default:Ah(g,m)}c=c.sibling}}var Ch=8192;function Yc(l){if(l.subtreeFlags&Ch)for(l=l.child;l!==null;)hR(l),l=l.sibling}function hR(l){switch(l.tag){case 26:Yc(l),l.flags&Ch&&l.memoizedState!==null&&dV(Pr,l.memoizedState,l.memoizedProps);break;case 5:Yc(l);break;case 3:case 4:var c=Pr;Pr=wm(l.stateNode.containerInfo),Yc(l),Pr=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Ch,Ch=16777216,Yc(l),Ch=c):Yc(l));break;default:Yc(l)}}function gR(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Mh(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];yn=m,mR(m,l)}gR(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)pR(l),l=l.sibling}function pR(l){switch(l.tag){case 0:case 11:case 15:Mh(l),l.flags&2048&&So(9,l,l.return);break;case 3:Mh(l);break;case 12:Mh(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,dm(l)):Mh(l);break;default:Mh(l)}}function dm(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];yn=m,mR(m,l)}gR(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:So(8,c,c.return),dm(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,dm(c));break;default:dm(c)}l=l.sibling}}function mR(l,c){for(;yn!==null;){var g=yn;switch(g.tag){case 0:case 11:case 15:So(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:uh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,yn=m;else e:for(g=l;yn!==null;){m=yn;var x=m.sibling,E=m.return;if(oR(m),m===g){yn=null;break e}if(x!==null){x.return=E,yn=x;break e}yn=E}}}var $X={getCacheForType:function(l){var c=In(an),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},TX=typeof WeakMap=="function"?WeakMap:Map,ht=0,Ct=null,We=null,et=0,gt=0,Xi=null,wo=!1,Xc=!1,lS=!1,_s=0,Bt=0,Ao=0,Kl=0,uS=0,vr=0,Vc=0,$h=null,Ci=null,cS=!1,fS=0,hm=1/0,gm=null,Co=null,kn=0,Mo=null,Wc=null,Qc=0,dS=0,hS=null,yR=null,Th=0,gS=null;function Vi(){if((ht&2)!==0&&et!==0)return et&-et;if(R.T!==null){var l=Lc;return l!==0?l:SS()}return Rk()}function vR(){vr===0&&(vr=(et&536870912)===0||ut?Tk():536870912);var l=yr.current;return l!==null&&(l.flags|=32),vr}function Wi(l,c,g){(l===Ct&&(gt===2||gt===9)||l.cancelPendingCommit!==null)&&(Zc(l,0),$o(l,et,vr,!1)),Xd(l,g),((ht&2)===0||l!==Ct)&&(l===Ct&&((ht&2)===0&&(Kl|=g),Bt===4&&$o(l,et,vr,!1)),_a(l))}function bR(l,c,g){if((ht&6)!==0)throw Error(i(327));var m=!g&&(c&124)===0&&(c&l.expiredLanes)===0||Yd(l,c),x=m?OX(l,c):yS(l,c,!0),E=m;do{if(x===0){Xc&&!m&&$o(l,c,0,!1);break}else{if(g=l.current.alternate,E&&!kX(g)){x=yS(l,c,!1),E=!1;continue}if(x===2){if(E=c,l.errorRecoveryDisabledLanes&E)var $=0;else $=l.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var D=l;x=$h;var U=D.current.memoizedState.isDehydrated;if(U&&(Zc(D,$).flags|=256),$=yS(D,$,!1),$!==2){if(lS&&!U){D.errorRecoveryDisabledLanes|=E,Kl|=E,x=4;break e}E=Ci,Ci=x,E!==null&&(Ci===null?Ci=E:Ci.push.apply(Ci,E))}x=$}if(E=!1,x!==2)continue}}if(x===1){Zc(l,0),$o(l,c,0,!0);break}e:{switch(m=l,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:$o(m,c,vr,!wo);break e;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=fS+300-Jt(),10<x)){if($o(m,c,vr,!wo),A0(m,0,!0)!==0)break e;m.timeoutHandle=VR(xR.bind(null,m,g,Ci,gm,cS,c,vr,Kl,Vc,wo,E,2,-0,0),x);break e}xR(m,g,Ci,gm,cS,c,vr,Kl,Vc,wo,E,0,-0,0)}}break}while(!0);_a(l)}function xR(l,c,g,m,x,E,$,D,U,V,ie,oe,Q,Z){if(l.timeoutHandle=-1,oe=c.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Fh={stylesheets:null,count:0,unsuspend:fV},hR(c),oe=hV(),oe!==null)){l.cancelPendingCommit=oe(MR.bind(null,l,c,E,g,m,x,$,D,U,ie,1,Q,Z)),$o(l,E,$,!V);return}MR(l,c,E,g,m,x,$,D,U)}function kX(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!qi(E(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $o(l,c,g,m){c&=~uS,c&=~Kl,l.suspendedLanes|=c,l.pingedLanes&=~c,m&&(l.warmLanes|=c),m=l.expirationTimes;for(var x=c;0<x;){var E=31-Ii(x),$=1<<E;m[E]=-1,x&=~$}g!==0&&Dk(l,g,c)}function pm(){return(ht&6)===0?(kh(0),!1):!0}function pS(){if(We!==null){if(gt===0)var l=We.return;else l=We,ps=Yl=null,O2(l),qc=null,xh=0,l=We;for(;l!==null;)JO(l.alternate,l),l=l.return;We=null}}function Zc(l,c){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,VX(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),pS(),Ct=l,We=g=ds(l.current,null),et=c,gt=0,Xi=null,wo=!1,Xc=Yd(l,c),lS=!1,Vc=vr=uS=Kl=Ao=Bt=0,Ci=$h=null,cS=!1,(c&8)!==0&&(c|=c&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=c;0<m;){var x=31-Ii(m),E=1<<x;c|=l[x],m&=~E}return _s=c,L0(),g}function SR(l,c){He=null,R.H=nm,c===fh||c===Y0?(c=UD(),gt=3):c===zD?(c=UD(),gt=4):gt=c===BO?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Xi=c,We===null&&(Bt=1,om(l,hr(c,l.current)))}function ER(){var l=R.H;return R.H=nm,l===null?nm:l}function _R(){var l=R.A;return R.A=$X,l}function mS(){Bt=4,wo||(et&4194048)!==et&&yr.current!==null||(Xc=!0),(Ao&134217727)===0&&(Kl&134217727)===0||Ct===null||$o(Ct,et,vr,!1)}function yS(l,c,g){var m=ht;ht|=2;var x=ER(),E=_R();(Ct!==l||et!==c)&&(gm=null,Zc(l,c)),c=!1;var $=Bt;e:do try{if(gt!==0&&We!==null){var D=We,U=Xi;switch(gt){case 8:pS(),$=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(c=!0);var V=gt;if(gt=0,Xi=null,Kc(l,D,U,V),g&&Xc){$=0;break e}break;default:V=gt,gt=0,Xi=null,Kc(l,D,U,V)}}DX(),$=Bt;break}catch(ie){SR(l,ie)}while(!0);return c&&l.shellSuspendCounter++,ps=Yl=null,ht=m,R.H=x,R.A=E,We===null&&(Ct=null,et=0,L0()),$}function DX(){for(;We!==null;)wR(We)}function OX(l,c){var g=ht;ht|=2;var m=ER(),x=_R();Ct!==l||et!==c?(gm=null,hm=Jt()+500,Zc(l,c)):Xc=Yd(l,c);e:do try{if(gt!==0&&We!==null){c=We;var E=Xi;t:switch(gt){case 1:gt=0,Xi=null,Kc(l,c,E,1);break;case 2:case 9:if(FD(E)){gt=0,Xi=null,AR(c);break}c=function(){gt!==2&&gt!==9||Ct!==l||(gt=7),_a(l)},E.then(c,c);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:FD(E)?(gt=0,Xi=null,AR(c)):(gt=0,Xi=null,Kc(l,c,E,7));break;case 5:var $=null;switch(We.tag){case 26:$=We.memoizedState;case 5:case 27:var D=We;if(!$||sN($)){gt=0,Xi=null;var U=D.sibling;if(U!==null)We=U;else{var V=D.return;V!==null?(We=V,mm(V)):We=null}break t}}gt=0,Xi=null,Kc(l,c,E,5);break;case 6:gt=0,Xi=null,Kc(l,c,E,6);break;case 8:pS(),Bt=6;break e;default:throw Error(i(462))}}RX();break}catch(ie){SR(l,ie)}while(!0);return ps=Yl=null,R.H=m,R.A=x,ht=g,We!==null?0:(Ct=null,et=0,L0(),Bt)}function RX(){for(;We!==null&&!Kt();)wR(We)}function wR(l){var c=ZO(l.alternate,l,_s);l.memoizedProps=l.pendingProps,c===null?mm(l):We=c}function AR(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=GO(g,c,c.pendingProps,c.type,void 0,et);break;case 11:c=GO(g,c,c.pendingProps,c.type.render,c.ref,et);break;case 5:O2(c);default:JO(g,c),c=We=CD(c,_s),c=ZO(g,c,_s)}l.memoizedProps=l.pendingProps,c===null?mm(l):We=c}function Kc(l,c,g,m){ps=Yl=null,O2(c),qc=null,xh=0;var x=c.return;try{if(EX(l,x,c,g,et)){Bt=1,om(l,hr(g,l.current)),We=null;return}}catch(E){if(x!==null)throw We=x,E;Bt=1,om(l,hr(g,l.current)),We=null;return}c.flags&32768?(ut||m===1?l=!0:Xc||(et&536870912)!==0?l=!1:(wo=l=!0,(m===2||m===9||m===3||m===6)&&(m=yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),CR(c,l)):mm(c)}function mm(l){var c=l;do{if((c.flags&32768)!==0){CR(c,wo);return}l=c.return;var g=wX(c.alternate,c,_s);if(g!==null){We=g;return}if(c=c.sibling,c!==null){We=c;return}We=c=l}while(c!==null);Bt===0&&(Bt=5)}function CR(l,c){do{var g=AX(l.alternate,l);if(g!==null){g.flags&=32767,We=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){We=l;return}We=l=g}while(l!==null);Bt=6,We=null}function MR(l,c,g,m,x,E,$,D,U){l.cancelPendingCommit=null;do ym();while(kn!==0);if((ht&6)!==0)throw Error(i(327));if(c!==null){if(c===l.current)throw Error(i(177));if(E=c.lanes|c.childLanes,E|=o2,fY(l,g,E,$,D,U),l===Ct&&(We=Ct=null,et=0),Wc=c,Mo=l,Qc=g,dS=E,hS=x,yR=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,LX(E0,function(){return OR(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=R.T,R.T=null,x=P.p,P.p=2,$=ht,ht|=4;try{CX(l,c,g)}finally{ht=$,P.p=x,R.T=m}}kn=1,$R(),TR(),kR()}}function $R(){if(kn===1){kn=0;var l=Mo,c=Wc,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=R.T,R.T=null;var m=P.p;P.p=2;var x=ht;ht|=4;try{cR(c,l);var E=TS,$=mD(l.containerInfo),D=E.focusedElem,U=E.selectionRange;if($!==D&&D&&D.ownerDocument&&pD(D.ownerDocument.documentElement,D)){if(U!==null&&n2(D)){var V=U.start,ie=U.end;if(ie===void 0&&(ie=V),"selectionStart"in D)D.selectionStart=V,D.selectionEnd=Math.min(ie,D.value.length);else{var oe=D.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Fe=D.textContent.length,Ne=Math.min(U.start,Fe),xt=U.end===void 0?Ne:Math.min(U.end,Fe);!Z.extend&&Ne>xt&&($=xt,xt=Ne,Ne=$);var q=gD(D,Ne),I=gD(D,xt);if(q&&I&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==I.node||Z.focusOffset!==I.offset)){var Y=oe.createRange();Y.setStart(q.node,q.offset),Z.removeAllRanges(),Ne>xt?(Z.addRange(Y),Z.extend(I.node,I.offset)):(Y.setEnd(I.node,I.offset),Z.addRange(Y))}}}}for(oe=[],Z=D;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<oe.length;D++){var ae=oe[D];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Tm=!!$S,TS=$S=null}finally{ht=x,P.p=m,R.T=g}}l.current=c,kn=2}}function TR(){if(kn===2){kn=0;var l=Mo,c=Wc,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=R.T,R.T=null;var m=P.p;P.p=2;var x=ht;ht|=4;try{sR(l,c.alternate,c)}finally{ht=x,P.p=m,R.T=g}}kn=3}}function kR(){if(kn===4||kn===3){kn=0,gn();var l=Mo,c=Wc,g=Qc,m=yR;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?kn=5:(kn=0,Wc=Mo=null,DR(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(Co=null),zx(g),c=c.stateNode,Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Gd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=R.T,x=P.p,P.p=2,R.T=null;try{for(var E=l.onRecoverableError,$=0;$<m.length;$++){var D=m[$];E(D.value,{componentStack:D.stack})}}finally{R.T=c,P.p=x}}(Qc&3)!==0&&ym(),_a(l),x=l.pendingLanes,(g&4194090)!==0&&(x&42)!==0?l===gS?Th++:(Th=0,gS=l):Th=0,kh(0)}}function DR(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,uh(c)))}function ym(l){return $R(),TR(),kR(),OR()}function OR(){if(kn!==5)return!1;var l=Mo,c=dS;dS=0;var g=zx(Qc),m=R.T,x=P.p;try{P.p=32>g?32:g,R.T=null,g=hS,hS=null;var E=Mo,$=Qc;if(kn=0,Wc=Mo=null,Qc=0,(ht&6)!==0)throw Error(i(331));var D=ht;if(ht|=4,pR(E.current),dR(E,E.current,$,g),ht=D,kh(0,!1),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Gd,E)}catch{}return!0}finally{P.p=x,R.T=m,DR(l,c)}}function RR(l,c,g){c=hr(g,c),c=Y2(l.stateNode,c,2),l=yo(l,c,2),l!==null&&(Xd(l,2),_a(l))}function _t(l,c,g){if(l.tag===3)RR(l,l,g);else for(;c!==null;){if(c.tag===3){RR(c,l,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Co===null||!Co.has(m))){l=hr(g,l),g=LO(2),m=yo(c,g,2),m!==null&&(UO(g,m,c,l),Xd(m,2),_a(m));break}}c=c.return}}function vS(l,c,g){var m=l.pingCache;if(m===null){m=l.pingCache=new TX;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(lS=!0,x.add(g),l=NX.bind(null,l,c,g),c.then(l,l))}function NX(l,c,g){var m=l.pingCache;m!==null&&m.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Ct===l&&(et&g)===g&&(Bt===4||Bt===3&&(et&62914560)===et&&300>Jt()-fS?(ht&2)===0&&Zc(l,0):uS|=g,Vc===et&&(Vc=0)),_a(l)}function NR(l,c){c===0&&(c=kk()),l=Rc(l,c),l!==null&&(Xd(l,c),_a(l))}function zX(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),NR(l,g)}function FX(l,c){var g=0;switch(l.tag){case 13:var m=l.stateNode,x=l.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),NR(l,g)}function LX(l,c){return Gt(l,c)}var vm=null,Jc=null,bS=!1,bm=!1,xS=!1,Jl=0;function _a(l){l!==Jc&&l.next===null&&(Jc===null?vm=Jc=l:Jc=Jc.next=l),bm=!0,bS||(bS=!0,BX())}function kh(l,c){if(!xS&&bm){xS=!0;do for(var g=!1,m=vm;m!==null;){if(l!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var $=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-Ii(42|l)+1)-1,E&=x&~($&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,UR(m,E))}else E=et,E=A0(m,m===Ct?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Yd(m,E)||(g=!0,UR(m,E));m=m.next}while(g);xS=!1}}function UX(){zR()}function zR(){bm=bS=!1;var l=0;Jl!==0&&(XX()&&(l=Jl),Jl=0);for(var c=Jt(),g=null,m=vm;m!==null;){var x=m.next,E=FR(m,c);E===0?(m.next=null,g===null?vm=x:g.next=x,x===null&&(Jc=g)):(g=m,(l!==0||(E&3)!==0)&&(bm=!0)),m=x}kh(l)}function FR(l,c){for(var g=l.suspendedLanes,m=l.pingedLanes,x=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var $=31-Ii(E),D=1<<$,U=x[$];U===-1?((D&g)===0||(D&m)!==0)&&(x[$]=cY(D,c)):U<=c&&(l.expiredLanes|=D),E&=~D}if(c=Ct,g=et,g=A0(l,l===c?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,g===0||l===c&&(gt===2||gt===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&it(m),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Yd(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(m!==null&&it(m),zx(g)){case 2:case 8:g=Mk;break;case 32:g=E0;break;case 268435456:g=$k;break;default:g=E0}return m=LR.bind(null,l),g=Gt(g,m),l.callbackPriority=c,l.callbackNode=g,c}return m!==null&&m!==null&&it(m),l.callbackPriority=2,l.callbackNode=null,2}function LR(l,c){if(kn!==0&&kn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(ym()&&l.callbackNode!==g)return null;var m=et;return m=A0(l,l===Ct?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(bR(l,m,c),FR(l,Jt()),l.callbackNode!=null&&l.callbackNode===g?LR.bind(null,l):null)}function UR(l,c){if(ym())return null;bR(l,c,!0)}function BX(){WX(function(){(ht&6)!==0?Gt(Ck,UX):zR()})}function SS(){return Jl===0&&(Jl=Tk()),Jl}function BR(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:k0(""+l)}function jR(l,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,l.id&&g.setAttribute("form",l.id),c.parentNode.insertBefore(g,c),l=new FormData(l),g.parentNode.removeChild(g),l}function jX(l,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var E=BR((x[Ei]||null).action),$=m.submitter;$&&(c=(c=$[Ei]||null)?BR(c.formAction):$.getAttribute("formAction"),c!==null&&(E=c,$=null));var D=new N0("action","action",null,m,x);l.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Jl!==0){var U=$?jR(x,$):new FormData(x);P2(g,{pending:!0,data:U,method:x.method,action:E},null,U)}}else typeof E=="function"&&(D.preventDefault(),U=$?jR(x,$):new FormData(x),P2(g,{pending:!0,data:U,method:x.method,action:E},E,U))},currentTarget:x}]})}}for(var ES=0;ES<s2.length;ES++){var _S=s2[ES],PX=_S.toLowerCase(),IX=_S[0].toUpperCase()+_S.slice(1);jr(PX,"on"+IX)}jr(bD,"onAnimationEnd"),jr(xD,"onAnimationIteration"),jr(SD,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(aX,"onTransitionRun"),jr(sX,"onTransitionStart"),jr(oX,"onTransitionCancel"),jr(ED,"onTransitionEnd"),_c("onMouseEnter",["mouseout","mouseover"]),_c("onMouseLeave",["mouseout","mouseover"]),_c("onPointerEnter",["pointerout","pointerover"]),_c("onPointerLeave",["pointerout","pointerover"]),Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dh));function PR(l,c){c=(c&4)!==0;for(var g=0;g<l.length;g++){var m=l[g],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var $=m.length-1;0<=$;$--){var D=m[$],U=D.instance,V=D.currentTarget;if(D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=V;try{E(x)}catch(ie){sm(ie)}x.currentTarget=null,E=U}else for($=0;$<m.length;$++){if(D=m[$],U=D.instance,V=D.currentTarget,D=D.listener,U!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=V;try{E(x)}catch(ie){sm(ie)}x.currentTarget=null,E=U}}}}function Qe(l,c){var g=c[Fx];g===void 0&&(g=c[Fx]=new Set);var m=l+"__bubble";g.has(m)||(IR(c,l,2,!1),g.add(m))}function wS(l,c,g){var m=0;c&&(m|=4),IR(g,l,m,c)}var xm="_reactListening"+Math.random().toString(36).slice(2);function AS(l){if(!l[xm]){l[xm]=!0,zk.forEach(function(g){g!=="selectionchange"&&(qX.has(g)||wS(g,!1,l),wS(g,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[xm]||(c[xm]=!0,wS("selectionchange",!1,c))}}function IR(l,c,g,m){switch(dN(c)){case 2:var x=mV;break;case 8:x=yV;break;default:x=BS}g=x.bind(null,c,g,l),x=void 0,!Xx||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?l.addEventListener(c,g,{capture:!0,passive:x}):l.addEventListener(c,g,!0):x!==void 0?l.addEventListener(c,g,{passive:x}):l.addEventListener(c,g,!1)}function CS(l,c,g,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var D=m.stateNode.containerInfo;if(D===x)break;if($===4)for($=m.return;$!==null;){var U=$.tag;if((U===3||U===4)&&$.stateNode.containerInfo===x)return;$=$.return}for(;D!==null;){if($=xc(D),$===null)return;if(U=$.tag,U===5||U===6||U===26||U===27){m=E=$;continue e}D=D.parentNode}}m=m.return}Wk(function(){var V=E,ie=Gx(g),oe=[];e:{var Q=_D.get(l);if(Q!==void 0){var Z=N0,Fe=l;switch(l){case"keypress":if(O0(g)===0)break e;case"keydown":case"keyup":Z=LY;break;case"focusin":Fe="focus",Z=Zx;break;case"focusout":Fe="blur",Z=Zx;break;case"beforeblur":case"afterblur":Z=Zx;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Kk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=AY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=jY;break;case bD:case xD:case SD:Z=$Y;break;case ED:Z=IY;break;case"scroll":case"scrollend":Z=_Y;break;case"wheel":Z=HY;break;case"copy":case"cut":case"paste":Z=kY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=eD;break;case"toggle":case"beforetoggle":Z=YY}var Ne=(c&4)!==0,xt=!Ne&&(l==="scroll"||l==="scrollend"),q=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var I=V,Y;I!==null;){var ae=I;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=Qd(I,q),ae!=null&&Ne.push(Oh(I,ae,Y))),xt)break;I=I.return}0<Ne.length&&(Q=new Z(Q,Fe,null,g,ie),oe.push({event:Q,listeners:Ne}))}}if((c&7)===0){e:{if(Q=l==="mouseover"||l==="pointerover",Z=l==="mouseout"||l==="pointerout",Q&&g!==Hx&&(Fe=g.relatedTarget||g.fromElement)&&(xc(Fe)||Fe[bc]))break e;if((Z||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Fe=g.relatedTarget||g.toElement,Z=V,Fe=Fe?xc(Fe):null,Fe!==null&&(xt=a(Fe),Ne=Fe.tag,Fe!==xt||Ne!==5&&Ne!==27&&Ne!==6)&&(Fe=null)):(Z=null,Fe=V),Z!==Fe)){if(Ne=Kk,ae="onMouseLeave",q="onMouseEnter",I="mouse",(l==="pointerout"||l==="pointerover")&&(Ne=eD,ae="onPointerLeave",q="onPointerEnter",I="pointer"),xt=Z==null?Q:Wd(Z),Y=Fe==null?Q:Wd(Fe),Q=new Ne(ae,I+"leave",Z,g,ie),Q.target=xt,Q.relatedTarget=Y,ae=null,xc(ie)===V&&(Ne=new Ne(q,I+"enter",Fe,g,ie),Ne.target=Y,Ne.relatedTarget=xt,ae=Ne),xt=ae,Z&&Fe)t:{for(Ne=Z,q=Fe,I=0,Y=Ne;Y;Y=ef(Y))I++;for(Y=0,ae=q;ae;ae=ef(ae))Y++;for(;0<I-Y;)Ne=ef(Ne),I--;for(;0<Y-I;)q=ef(q),Y--;for(;I--;){if(Ne===q||q!==null&&Ne===q.alternate)break t;Ne=ef(Ne),q=ef(q)}Ne=null}else Ne=null;Z!==null&&qR(oe,Q,Z,Ne,!1),Fe!==null&&xt!==null&&qR(oe,xt,Fe,Ne,!0)}}e:{if(Q=V?Wd(V):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var we=lD;else if(sD(Q))if(uD)we=nX;else{we=eX;var Ye=JY}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?V&&qx(V.elementType)&&(we=lD):we=tX;if(we&&(we=we(l,V))){oD(oe,we,g,ie);break e}Ye&&Ye(l,Q,V),l==="focusout"&&V&&Q.type==="number"&&V.memoizedProps.value!=null&&Ix(Q,"number",Q.value)}switch(Ye=V?Wd(V):window,l){case"focusin":(sD(Ye)||Ye.contentEditable==="true")&&(kc=Ye,i2=V,rh=null);break;case"focusout":rh=i2=kc=null;break;case"mousedown":r2=!0;break;case"contextmenu":case"mouseup":case"dragend":r2=!1,yD(oe,g,ie);break;case"selectionchange":if(rX)break;case"keydown":case"keyup":yD(oe,g,ie)}var $e;if(Jx)e:{switch(l){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Tc?rD(l,g)&&(ze="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(ze="onCompositionStart");ze&&(tD&&g.locale!=="ko"&&(Tc||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Tc&&($e=Qk()):(ho=ie,Vx="value"in ho?ho.value:ho.textContent,Tc=!0)),Ye=Sm(V,ze),0<Ye.length&&(ze=new Jk(ze,l,null,g,ie),oe.push({event:ze,listeners:Ye}),$e?ze.data=$e:($e=aD(g),$e!==null&&(ze.data=$e)))),($e=VY?WY(l,g):QY(l,g))&&(ze=Sm(V,"onBeforeInput"),0<ze.length&&(Ye=new Jk("onBeforeInput","beforeinput",null,g,ie),oe.push({event:Ye,listeners:ze}),Ye.data=$e)),jX(oe,l,V,g,ie)}PR(oe,c)})}function Oh(l,c,g){return{instance:l,listener:c,currentTarget:g}}function Sm(l,c){for(var g=c+"Capture",m=[];l!==null;){var x=l,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Qd(l,g),x!=null&&m.unshift(Oh(l,x,E)),x=Qd(l,c),x!=null&&m.push(Oh(l,x,E))),l.tag===3)return m;l=l.return}return[]}function ef(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function qR(l,c,g,m,x){for(var E=c._reactName,$=[];g!==null&&g!==m;){var D=g,U=D.alternate,V=D.stateNode;if(D=D.tag,U!==null&&U===m)break;D!==5&&D!==26&&D!==27||V===null||(U=V,x?(V=Qd(g,E),V!=null&&$.unshift(Oh(g,V,U))):x||(V=Qd(g,E),V!=null&&$.push(Oh(g,V,U)))),g=g.return}$.length!==0&&l.push({event:c,listeners:$})}var HX=/\r\n?/g,GX=/\u0000|\uFFFD/g;function HR(l){return(typeof l=="string"?l:""+l).replace(HX,`
`).replace(GX,"")}function GR(l,c){return c=HR(c),HR(l)===c}function Em(){}function bt(l,c,g,m,x,E){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Cc(l,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Cc(l,""+m);break;case"className":M0(l,"class",m);break;case"tabIndex":M0(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":M0(l,g,m);break;case"style":Xk(l,m,E);break;case"data":if(c!=="object"){M0(l,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){l.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(c!=="input"&&bt(l,c,"name",x.name,x,null),bt(l,c,"formEncType",x.formEncType,x,null),bt(l,c,"formMethod",x.formMethod,x,null),bt(l,c,"formTarget",x.formTarget,x,null)):(bt(l,c,"encType",x.encType,x,null),bt(l,c,"method",x.method,x,null),bt(l,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"onClick":m!=null&&(l.onclick=Em);break;case"onScroll":m!=null&&Qe("scroll",l);break;case"onScrollEnd":m!=null&&Qe("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}g=k0(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""+m):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":m===!0?l.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,m):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(g,m):l.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(g):l.setAttribute(g,m);break;case"popover":Qe("beforetoggle",l),Qe("toggle",l),C0(l,"popover",m);break;case"xlinkActuate":cs(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":cs(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":cs(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":cs(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":cs(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":cs(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":cs(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":cs(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":cs(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":C0(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=SY.get(g)||g,C0(l,g,m))}}function MS(l,c,g,m,x,E){switch(g){case"style":Xk(l,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"children":typeof m=="string"?Cc(l,m):(typeof m=="number"||typeof m=="bigint")&&Cc(l,""+m);break;case"onScroll":m!=null&&Qe("scroll",l);break;case"onScrollEnd":m!=null&&Qe("scrollend",l);break;case"onClick":m!=null&&(l.onclick=Em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fk.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),E=l[Ei]||null,E=E!=null?E[g]:null,typeof E=="function"&&l.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(c,m,x);break e}g in l?l[g]=m:m===!0?l.setAttribute(g,""):C0(l,g,m)}}}function Dn(l,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",l),Qe("load",l);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var $=g[E];if($!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(l,c,E,$,g,null)}}x&&bt(l,c,"srcSet",g.srcSet,g,null),m&&bt(l,c,"src",g.src,g,null);return;case"input":Qe("invalid",l);var D=E=$=x=null,U=null,V=null;for(m in g)if(g.hasOwnProperty(m)){var ie=g[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":$=ie;break;case"checked":U=ie;break;case"defaultChecked":V=ie;break;case"value":E=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,c));break;default:bt(l,c,m,ie,g,null)}}qk(l,E,D,U,V,$,x,!1),$0(l);return;case"select":Qe("invalid",l),m=$=E=null;for(x in g)if(g.hasOwnProperty(x)&&(D=g[x],D!=null))switch(x){case"value":E=D;break;case"defaultValue":$=D;break;case"multiple":m=D;default:bt(l,c,x,D,g,null)}c=E,g=$,l.multiple=!!m,c!=null?Ac(l,!!m,c,!1):g!=null&&Ac(l,!!m,g,!0);return;case"textarea":Qe("invalid",l),E=x=m=null;for($ in g)if(g.hasOwnProperty($)&&(D=g[$],D!=null))switch($){case"value":m=D;break;case"defaultValue":x=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:bt(l,c,$,D,g,null)}Gk(l,m,x,E),$0(l);return;case"option":for(U in g)if(g.hasOwnProperty(U)&&(m=g[U],m!=null))switch(U){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:bt(l,c,U,m,g,null)}return;case"dialog":Qe("beforetoggle",l),Qe("toggle",l),Qe("cancel",l),Qe("close",l);break;case"iframe":case"object":Qe("load",l);break;case"video":case"audio":for(m=0;m<Dh.length;m++)Qe(Dh[m],l);break;case"image":Qe("error",l),Qe("load",l);break;case"details":Qe("toggle",l);break;case"embed":case"source":case"link":Qe("error",l),Qe("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in g)if(g.hasOwnProperty(V)&&(m=g[V],m!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(l,c,V,m,g,null)}return;default:if(qx(c)){for(ie in g)g.hasOwnProperty(ie)&&(m=g[ie],m!==void 0&&MS(l,c,ie,m,g,void 0));return}}for(D in g)g.hasOwnProperty(D)&&(m=g[D],m!=null&&bt(l,c,D,m,g,null))}function YX(l,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,$=null,D=null,U=null,V=null,ie=null;for(Z in g){var oe=g[Z];if(g.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":U=oe;default:m.hasOwnProperty(Z)||bt(l,c,Z,null,m,oe)}}for(var Q in m){var Z=m[Q];if(oe=g[Q],m.hasOwnProperty(Q)&&(Z!=null||oe!=null))switch(Q){case"type":E=Z;break;case"name":x=Z;break;case"checked":V=Z;break;case"defaultChecked":ie=Z;break;case"value":$=Z;break;case"defaultValue":D=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,c));break;default:Z!==oe&&bt(l,c,Q,Z,m,oe)}}Px(l,$,D,U,V,ie,E,x);return;case"select":Z=$=D=Q=null;for(E in g)if(U=g[E],g.hasOwnProperty(E)&&U!=null)switch(E){case"value":break;case"multiple":Z=U;default:m.hasOwnProperty(E)||bt(l,c,E,null,m,U)}for(x in m)if(E=m[x],U=g[x],m.hasOwnProperty(x)&&(E!=null||U!=null))switch(x){case"value":Q=E;break;case"defaultValue":D=E;break;case"multiple":$=E;default:E!==U&&bt(l,c,x,E,m,U)}c=D,g=$,m=Z,Q!=null?Ac(l,!!g,Q,!1):!!m!=!!g&&(c!=null?Ac(l,!!g,c,!0):Ac(l,!!g,g?[]:"",!1));return;case"textarea":Z=Q=null;for(D in g)if(x=g[D],g.hasOwnProperty(D)&&x!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:bt(l,c,D,null,m,x)}for($ in m)if(x=m[$],E=g[$],m.hasOwnProperty($)&&(x!=null||E!=null))switch($){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&bt(l,c,$,x,m,E)}Hk(l,Q,Z);return;case"option":for(var Fe in g)if(Q=g[Fe],g.hasOwnProperty(Fe)&&Q!=null&&!m.hasOwnProperty(Fe))switch(Fe){case"selected":l.selected=!1;break;default:bt(l,c,Fe,null,m,Q)}for(U in m)if(Q=m[U],Z=g[U],m.hasOwnProperty(U)&&Q!==Z&&(Q!=null||Z!=null))switch(U){case"selected":l.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:bt(l,c,U,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in g)Q=g[Ne],g.hasOwnProperty(Ne)&&Q!=null&&!m.hasOwnProperty(Ne)&&bt(l,c,Ne,null,m,Q);for(V in m)if(Q=m[V],Z=g[V],m.hasOwnProperty(V)&&Q!==Z&&(Q!=null||Z!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:bt(l,c,V,Q,m,Z)}return;default:if(qx(c)){for(var xt in g)Q=g[xt],g.hasOwnProperty(xt)&&Q!==void 0&&!m.hasOwnProperty(xt)&&MS(l,c,xt,void 0,m,Q);for(ie in m)Q=m[ie],Z=g[ie],!m.hasOwnProperty(ie)||Q===Z||Q===void 0&&Z===void 0||MS(l,c,ie,Q,m,Z);return}}for(var q in g)Q=g[q],g.hasOwnProperty(q)&&Q!=null&&!m.hasOwnProperty(q)&&bt(l,c,q,null,m,Q);for(oe in m)Q=m[oe],Z=g[oe],!m.hasOwnProperty(oe)||Q===Z||Q==null&&Z==null||bt(l,c,oe,Q,m,Z)}var $S=null,TS=null;function _m(l){return l.nodeType===9?l:l.ownerDocument}function YR(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XR(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function kS(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var DS=null;function XX(){var l=window.event;return l&&l.type==="popstate"?l===DS?!1:(DS=l,!0):(DS=null,!1)}var VR=typeof setTimeout=="function"?setTimeout:void 0,VX=typeof clearTimeout=="function"?clearTimeout:void 0,WR=typeof Promise=="function"?Promise:void 0,WX=typeof queueMicrotask=="function"?queueMicrotask:typeof WR<"u"?function(l){return WR.resolve(null).then(l).catch(QX)}:VR;function QX(l){setTimeout(function(){throw l})}function To(l){return l==="head"}function QR(l,c){var g=c,m=0,x=0;do{var E=g.nextSibling;if(l.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var $=l.ownerDocument;if(g&1&&Rh($.documentElement),g&2&&Rh($.body),g&4)for(g=$.head,Rh(g),$=g.firstChild;$;){var D=$.nextSibling,U=$.nodeName;$[Vd]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&$.rel.toLowerCase()==="stylesheet"||g.removeChild($),$=D}}if(x===0){l.removeChild(E),Ph(c);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);Ph(c)}function OS(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":OS(g),Lx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function ZX(l,c,g,m){for(;l.nodeType===1;){var x=g;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Vd])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=Ir(l.nextSibling),l===null)break}return null}function KX(l,c,g){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Ir(l.nextSibling),l===null))return null;return l}function RS(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function JX(l,c){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Ir(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var NS=null;function ZR(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return l;c--}else g==="/$"&&c++}l=l.previousSibling}return null}function KR(l,c,g){switch(c=_m(g),l){case"html":if(l=c.documentElement,!l)throw Error(i(452));return l;case"head":if(l=c.head,!l)throw Error(i(453));return l;case"body":if(l=c.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Rh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);Lx(l)}var br=new Map,JR=new Set;function wm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ws=P.d;P.d={f:eV,r:tV,D:nV,C:iV,L:rV,m:aV,X:oV,S:sV,M:lV};function eV(){var l=ws.f(),c=pm();return l||c}function tV(l){var c=Sc(l);c!==null&&c.tag===5&&c.type==="form"?bO(c):ws.r(l)}var tf=typeof document>"u"?null:document;function eN(l,c,g){var m=tf;if(m&&typeof c=="string"&&c){var x=dr(c);x='link[rel="'+l+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),JR.has(x)||(JR.add(x),l={rel:l,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),Dn(c,"link",l),pn(c),m.head.appendChild(c)))}}function nV(l){ws.D(l),eN("dns-prefetch",l,null)}function iV(l,c){ws.C(l,c),eN("preconnect",l,c)}function rV(l,c,g){ws.L(l,c,g);var m=tf;if(m&&l&&c){var x='link[rel="preload"][as="'+dr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+dr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+dr(g.imageSizes)+'"]')):x+='[href="'+dr(l)+'"]';var E=x;switch(c){case"style":E=nf(l);break;case"script":E=rf(l)}br.has(E)||(l=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:l,as:c},g),br.set(E,l),m.querySelector(x)!==null||c==="style"&&m.querySelector(Nh(E))||c==="script"&&m.querySelector(zh(E))||(c=m.createElement("link"),Dn(c,"link",l),pn(c),m.head.appendChild(c)))}}function aV(l,c){ws.m(l,c);var g=tf;if(g&&l){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+dr(m)+'"][href="'+dr(l)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=rf(l)}if(!br.has(E)&&(l=d({rel:"modulepreload",href:l},c),br.set(E,l),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(zh(E)))return}m=g.createElement("link"),Dn(m,"link",l),pn(m),g.head.appendChild(m)}}}function sV(l,c,g){ws.S(l,c,g);var m=tf;if(m&&l){var x=Ec(m).hoistableStyles,E=nf(l);c=c||"default";var $=x.get(E);if(!$){var D={loading:0,preload:null};if($=m.querySelector(Nh(E)))D.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":c},g),(g=br.get(E))&&zS(l,g);var U=$=m.createElement("link");pn(U),Dn(U,"link",l),U._p=new Promise(function(V,ie){U.onload=V,U.onerror=ie}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Am($,c,m)}$={type:"stylesheet",instance:$,count:1,state:D},x.set(E,$)}}}function oV(l,c){ws.X(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(l=d({src:l,async:!0},c),(c=br.get(x))&&FS(l,c),E=g.createElement("script"),pn(E),Dn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function lV(l,c){ws.M(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(l=d({src:l,async:!0,type:"module"},c),(c=br.get(x))&&FS(l,c),E=g.createElement("script"),pn(E),Dn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function tN(l,c,g,m){var x=(x=Ce.current)?wm(x):null;if(!x)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=nf(g.href),g=Ec(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=nf(g.href);var E=Ec(x).hoistableStyles,$=E.get(l);if($||(x=x.ownerDocument||x,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,$),(E=x.querySelector(Nh(l)))&&!E._p&&($.instance=E,$.state.loading=5),br.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},br.set(l,g),E||uV(x,l,g,$.state))),c&&m===null)throw Error(i(528,""));return $}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=rf(g),g=Ec(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function nf(l){return'href="'+dr(l)+'"'}function Nh(l){return'link[rel="stylesheet"]['+l+"]"}function nN(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function uV(l,c,g,m){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=l.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Dn(c,"link",g),pn(c),l.head.appendChild(c))}function rf(l){return'[src="'+dr(l)+'"]'}function zh(l){return"script[async]"+l}function iN(l,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=l.querySelector('style[data-href~="'+dr(g.href)+'"]');if(m)return c.instance=m,pn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),pn(m),Dn(m,"style",x),Am(m,g.precedence,l),c.instance=m;case"stylesheet":x=nf(g.href);var E=l.querySelector(Nh(x));if(E)return c.state.loading|=4,c.instance=E,pn(E),E;m=nN(g),(x=br.get(x))&&zS(m,x),E=(l.ownerDocument||l).createElement("link"),pn(E);var $=E;return $._p=new Promise(function(D,U){$.onload=D,$.onerror=U}),Dn(E,"link",m),c.state.loading|=4,Am(E,g.precedence,l),c.instance=E;case"script":return E=rf(g.src),(x=l.querySelector(zh(E)))?(c.instance=x,pn(x),x):(m=g,(x=br.get(E))&&(m=d({},g),FS(m,x)),l=l.ownerDocument||l,x=l.createElement("script"),pn(x),Dn(x,"link",m),l.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Am(m,g.precedence,l));return c.instance}function Am(l,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,$=0;$<m.length;$++){var D=m[$];if(D.dataset.precedence===c)E=D;else if(E!==x)break}E?E.parentNode.insertBefore(l,E.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(l,c.firstChild))}function zS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function FS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var Cm=null;function rN(l,c,g){if(Cm===null){var m=new Map,x=Cm=new Map;x.set(g,m)}else x=Cm,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(l))return m;for(m.set(l,null),g=g.getElementsByTagName(l),x=0;x<g.length;x++){var E=g[x];if(!(E[Vd]||E[Pn]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var $=E.getAttribute(c)||"";$=l+$;var D=m.get($);D?D.push(E):m.set($,[E])}}return m}function aN(l,c,g){l=l.ownerDocument||l,l.head.insertBefore(g,c==="title"?l.querySelector("head > title"):null)}function cV(l,c,g){if(g===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function sN(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Fh=null;function fV(){}function dV(l,c,g){if(Fh===null)throw Error(i(475));var m=Fh;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=nf(g.href),E=l.querySelector(Nh(x));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=Mm.bind(m),l.then(m,m)),c.state.loading|=4,c.instance=E,pn(E);return}E=l.ownerDocument||l,g=nN(g),(x=br.get(x))&&zS(g,x),E=E.createElement("link"),pn(E);var $=E;$._p=new Promise(function(D,U){$.onload=D,$.onerror=U}),Dn(E,"link",g),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Mm.bind(m),l.addEventListener("load",c),l.addEventListener("error",c))}}function hV(){if(Fh===null)throw Error(i(475));var l=Fh;return l.stylesheets&&l.count===0&&LS(l,l.stylesheets),0<l.count?function(c){var g=setTimeout(function(){if(l.stylesheets&&LS(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Mm(){if(this.count--,this.count===0){if(this.stylesheets)LS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var $m=null;function LS(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,$m=new Map,c.forEach(gV,l),$m=null,Mm.call(l))}function gV(l,c){if(!(c.state.loading&4)){var g=$m.get(l);if(g)var m=g.get(null);else{g=new Map,$m.set(l,g);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var $=x[E];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(g.set($.dataset.precedence,$),m=$)}m&&g.set(null,m)}x=c.instance,$=x.getAttribute("data-precedence"),E=g.get($)||m,E===m&&g.set(null,x),g.set($,x),this.count++,m=Mm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),c.state.loading|=4}}var Lh={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function pV(l,c,g,m,x,E,$,D){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rx(0),this.hiddenUpdates=Rx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function oN(l,c,g,m,x,E,$,D,U,V,ie,oe){return l=new pV(l,c,g,$,D,U,V,oe),c=1,E===!0&&(c|=24),E=Hi(3,null,null,c),l.current=E,E.stateNode=l,c=v2(),c.refCount++,l.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:c},E2(E),l}function lN(l){return l?(l=Nc,l):Nc}function uN(l,c,g,m,x,E){x=lN(x),m.context===null?m.context=x:m.pendingContext=x,m=mo(c),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=yo(l,m,c),g!==null&&(Wi(g,l,c),hh(g,l,c))}function cN(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function US(l,c){cN(l,c),(l=l.alternate)&&cN(l,c)}function fN(l){if(l.tag===13){var c=Rc(l,67108864);c!==null&&Wi(c,l,67108864),US(l,67108864)}}var Tm=!0;function mV(l,c,g,m){var x=R.T;R.T=null;var E=P.p;try{P.p=2,BS(l,c,g,m)}finally{P.p=E,R.T=x}}function yV(l,c,g,m){var x=R.T;R.T=null;var E=P.p;try{P.p=8,BS(l,c,g,m)}finally{P.p=E,R.T=x}}function BS(l,c,g,m){if(Tm){var x=jS(m);if(x===null)CS(l,c,m,km,g),hN(l,m);else if(bV(x,l,c,g,m))m.stopPropagation();else if(hN(l,m),c&4&&-1<vV.indexOf(l)){for(;x!==null;){var E=Sc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var $=Fl(E.pendingLanes);if($!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;$;){var U=1<<31-Ii($);D.entanglements[1]|=U,$&=~U}_a(E),(ht&6)===0&&(hm=Jt()+500,kh(0))}}break;case 13:D=Rc(E,2),D!==null&&Wi(D,E,2),pm(),US(E,2)}if(E=jS(m),E===null&&CS(l,c,m,km,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else CS(l,c,m,null,g)}}function jS(l){return l=Gx(l),PS(l)}var km=null;function PS(l){if(km=null,l=xc(l),l!==null){var c=a(l);if(c===null)l=null;else{var g=c.tag;if(g===13){if(l=s(c),l!==null)return l;l=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return km=l,null}function dN(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S0()){case Ck:return 2;case Mk:return 8;case E0:case rY:return 32;case $k:return 268435456;default:return 32}default:return 32}}var IS=!1,ko=null,Do=null,Oo=null,Uh=new Map,Bh=new Map,Ro=[],vV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hN(l,c){switch(l){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Uh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(c.pointerId)}}function jh(l,c,g,m,x,E){return l===null||l.nativeEvent!==E?(l={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=Sc(c),c!==null&&fN(c)),l):(l.eventSystemFlags|=m,c=l.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),l)}function bV(l,c,g,m,x){switch(c){case"focusin":return ko=jh(ko,l,c,g,m,x),!0;case"dragenter":return Do=jh(Do,l,c,g,m,x),!0;case"mouseover":return Oo=jh(Oo,l,c,g,m,x),!0;case"pointerover":var E=x.pointerId;return Uh.set(E,jh(Uh.get(E)||null,l,c,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Bh.set(E,jh(Bh.get(E)||null,l,c,g,m,x)),!0}return!1}function gN(l){var c=xc(l.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){l.blockedOn=c,dY(l.priority,function(){if(g.tag===13){var m=Vi();m=Nx(m);var x=Rc(g,m);x!==null&&Wi(x,g,m),US(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Dm(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var g=jS(l.nativeEvent);if(g===null){g=l.nativeEvent;var m=new g.constructor(g.type,g);Hx=m,g.target.dispatchEvent(m),Hx=null}else return c=Sc(g),c!==null&&fN(c),l.blockedOn=g,!1;c.shift()}return!0}function pN(l,c,g){Dm(l)&&g.delete(c)}function xV(){IS=!1,ko!==null&&Dm(ko)&&(ko=null),Do!==null&&Dm(Do)&&(Do=null),Oo!==null&&Dm(Oo)&&(Oo=null),Uh.forEach(pN),Bh.forEach(pN)}function Om(l,c){l.blockedOn===c&&(l.blockedOn=null,IS||(IS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xV)))}var Rm=null;function mN(l){Rm!==l&&(Rm=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rm===l&&(Rm=null);for(var c=0;c<l.length;c+=3){var g=l[c],m=l[c+1],x=l[c+2];if(typeof m!="function"){if(PS(m||g)===null)continue;break}var E=Sc(g);E!==null&&(l.splice(c,3),c-=3,P2(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function Ph(l){function c(U){return Om(U,l)}ko!==null&&Om(ko,l),Do!==null&&Om(Do,l),Oo!==null&&Om(Oo,l),Uh.forEach(c),Bh.forEach(c);for(var g=0;g<Ro.length;g++){var m=Ro[g];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Ro.length&&(g=Ro[0],g.blockedOn===null);)gN(g),g.blockedOn===null&&Ro.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],$=x[Ei]||null;if(typeof E=="function")$||mN(g);else if($){var D=null;if(E&&E.hasAttribute("formAction")){if(x=E,$=E[Ei]||null)D=$.formAction;else if(PS(x)!==null)continue}else D=$.action;typeof D=="function"?g[m+1]=D:(g.splice(m,3),m-=3),mN(g)}}}function qS(l){this._internalRoot=l}Nm.prototype.render=qS.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=Vi();uN(g,m,l,c,null,null)},Nm.prototype.unmount=qS.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;uN(l.current,2,null,l,null,null),pm(),c[bc]=null}};function Nm(l){this._internalRoot=l}Nm.prototype.unstable_scheduleHydration=function(l){if(l){var c=Rk();l={blockedOn:null,target:l,priority:c};for(var g=0;g<Ro.length&&c!==0&&c<Ro[g].priority;g++);Ro.splice(g,0,l),g===0&&gN(l)}};var yN=t.version;if(yN!=="19.1.0")throw Error(i(527,yN,"19.1.0"));P.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=u(c),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var SV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{Gd=zm.inject(SV),Pi=zm}catch{}}return qh.createRoot=function(l,c){if(!r(l))throw Error(i(299));var g=!1,m="",x=RO,E=NO,$=zO,D=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(D=c.unstable_transitionCallbacks)),c=oN(l,1,!1,null,null,g,m,x,E,$,D,null),l[bc]=c.current,AS(l),new qS(c)},qh.hydrateRoot=function(l,c,g){if(!r(l))throw Error(i(299));var m=!1,x="",E=RO,$=NO,D=zO,U=null,V=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(D=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(U=g.unstable_transitionCallbacks),g.formState!==void 0&&(V=g.formState)),c=oN(l,1,!0,c,g??null,m,x,E,$,D,U,V),c.context=lN(null),g=c.current,m=Vi(),m=Nx(m),x=mo(m),x.callback=null,yo(g,x,m),g=m,c.current.lanes=g,Xd(c,g),_a(c),l[bc]=c.current,AS(l),new Nm(c)},qh.version="19.1.0",qh}var MN;function OV(){if(MN)return YS.exports;MN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),YS.exports=DV(),YS.exports}var RV=OV();const c8={id:"s1",firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"},NV=[{id:"c2",firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01"},{id:"c3",firstName:"Jon",lastName:"Smoth",postcode:"SW1A 0AB",DoB:"1990-01-02"},{id:"c4",firstName:"Jonathan",lastName:"Smyth",postcode:"SW1A 0AA",DoB:"1990-01-01"},{id:"c5",firstName:"David",lastName:"Jones",postcode:"AB11 9CD",DoB:"1989-11-09"}];function zV({sourceRecord:e}){return le.jsxs("div",{className:"panel source-record-panel",children:[le.jsx("h2",{children:"Source Record"}),le.jsxs("table",{children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:"ID"}),le.jsx("th",{children:"First Name"}),le.jsx("th",{children:"Last Name"}),le.jsx("th",{children:"Postcode"}),le.jsx("th",{children:"DoB"})]})}),le.jsx("tbody",{children:le.jsxs("tr",{children:[le.jsx("td",{children:e.id}),le.jsx("td",{children:e.firstName}),le.jsx("td",{children:e.lastName}),le.jsx("td",{children:e.postcode}),le.jsx("td",{children:e.DoB})]})})]})]})}var QS={exports:{}},$N;function FV(){return $N||($N=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,r=0;t.Diff=function(a,s){return[a,s]},t.prototype.diff_main=function(a,s,o,u){typeof u>"u"&&(this.Diff_Timeout<=0?u=Number.MAX_VALUE:u=new Date().getTime()+this.Diff_Timeout*1e3);var f=u;if(a==null||s==null)throw new Error("Null input. (diff_main)");if(a==s)return a?[new t.Diff(r,a)]:[];typeof o>"u"&&(o=!0);var d=o,h=this.diff_commonPrefix(a,s),p=a.substring(0,h);a=a.substring(h),s=s.substring(h),h=this.diff_commonSuffix(a,s);var y=a.substring(a.length-h);a=a.substring(0,a.length-h),s=s.substring(0,s.length-h);var v=this.diff_compute_(a,s,d,f);return p&&v.unshift(new t.Diff(r,p)),y&&v.push(new t.Diff(r,y)),this.diff_cleanupMerge(v),v},t.prototype.diff_compute_=function(a,s,o,u){var f;if(!a)return[new t.Diff(i,s)];if(!s)return[new t.Diff(n,a)];var d=a.length>s.length?a:s,h=a.length>s.length?s:a,p=d.indexOf(h);if(p!=-1)return f=[new t.Diff(i,d.substring(0,p)),new t.Diff(r,h),new t.Diff(i,d.substring(p+h.length))],a.length>s.length&&(f[0][0]=f[2][0]=n),f;if(h.length==1)return[new t.Diff(n,a),new t.Diff(i,s)];var y=this.diff_halfMatch_(a,s);if(y){var v=y[0],b=y[1],S=y[2],_=y[3],w=y[4],A=this.diff_main(v,S,o,u),C=this.diff_main(b,_,o,u);return A.concat([new t.Diff(r,w)],C)}return o&&a.length>100&&s.length>100?this.diff_lineMode_(a,s,u):this.diff_bisect_(a,s,u)},t.prototype.diff_lineMode_=function(a,s,o){var u=this.diff_linesToChars_(a,s);a=u.chars1,s=u.chars2;var f=u.lineArray,d=this.diff_main(a,s,!1,o);this.diff_charsToLines_(d,f),this.diff_cleanupSemantic(d),d.push(new t.Diff(r,""));for(var h=0,p=0,y=0,v="",b="";h<d.length;){switch(d[h][0]){case i:y++,b+=d[h][1];break;case n:p++,v+=d[h][1];break;case r:if(p>=1&&y>=1){d.splice(h-p-y,p+y),h=h-p-y;for(var S=this.diff_main(v,b,!1,o),_=S.length-1;_>=0;_--)d.splice(h,0,S[_]);h=h+S.length}y=0,p=0,v="",b="";break}h++}return d.pop(),d},t.prototype.diff_bisect_=function(a,s,o){for(var u=a.length,f=s.length,d=Math.ceil((u+f)/2),h=d,p=2*d,y=new Array(p),v=new Array(p),b=0;b<p;b++)y[b]=-1,v[b]=-1;y[h+1]=0,v[h+1]=0;for(var S=u-f,_=S%2!=0,w=0,A=0,C=0,M=0,k=0;k<d&&!(new Date().getTime()>o);k++){for(var T=-k+w;T<=k-A;T+=2){var O=h+T,N;T==-k||T!=k&&y[O-1]<y[O+1]?N=y[O+1]:N=y[O-1]+1;for(var B=N-T;N<u&&B<f&&a.charAt(N)==s.charAt(B);)N++,B++;if(y[O]=N,N>u)A+=2;else if(B>f)w+=2;else if(_){var L=h+S-T;if(L>=0&&L<p&&v[L]!=-1){var G=u-v[L];if(N>=G)return this.diff_bisectSplit_(a,s,N,B,o)}}}for(var H=-k+C;H<=k-M;H+=2){var L=h+H,G;H==-k||H!=k&&v[L-1]<v[L+1]?G=v[L+1]:G=v[L-1]+1;for(var j=G-H;G<u&&j<f&&a.charAt(u-G-1)==s.charAt(f-j-1);)G++,j++;if(v[L]=G,G>u)M+=2;else if(j>f)C+=2;else if(!_){var O=h+S-H;if(O>=0&&O<p&&y[O]!=-1){var N=y[O],B=h+N-O;if(G=u-G,N>=G)return this.diff_bisectSplit_(a,s,N,B,o)}}}}return[new t.Diff(n,a),new t.Diff(i,s)]},t.prototype.diff_bisectSplit_=function(a,s,o,u,f){var d=a.substring(0,o),h=s.substring(0,u),p=a.substring(o),y=s.substring(u),v=this.diff_main(d,h,!1,f),b=this.diff_main(p,y,!1,f);return v.concat(b)},t.prototype.diff_linesToChars_=function(a,s){var o=[],u={};o[0]="";function f(y){for(var v="",b=0,S=-1,_=o.length;S<y.length-1;){S=y.indexOf(`
`,b),S==-1&&(S=y.length-1);var w=y.substring(b,S+1);(u.hasOwnProperty?u.hasOwnProperty(w):u[w]!==void 0)?v+=String.fromCharCode(u[w]):(_==d&&(w=y.substring(b),S=y.length),v+=String.fromCharCode(_),u[w]=_,o[_++]=w),b=S+1}return v}var d=4e4,h=f(a);d=65535;var p=f(s);return{chars1:h,chars2:p,lineArray:o}},t.prototype.diff_charsToLines_=function(a,s){for(var o=0;o<a.length;o++){for(var u=a[o][1],f=[],d=0;d<u.length;d++)f[d]=s[u.charCodeAt(d)];a[o][1]=f.join("")}},t.prototype.diff_commonPrefix=function(a,s){if(!a||!s||a.charAt(0)!=s.charAt(0))return 0;for(var o=0,u=Math.min(a.length,s.length),f=u,d=0;o<f;)a.substring(d,f)==s.substring(d,f)?(o=f,d=o):u=f,f=Math.floor((u-o)/2+o);return f},t.prototype.diff_commonSuffix=function(a,s){if(!a||!s||a.charAt(a.length-1)!=s.charAt(s.length-1))return 0;for(var o=0,u=Math.min(a.length,s.length),f=u,d=0;o<f;)a.substring(a.length-f,a.length-d)==s.substring(s.length-f,s.length-d)?(o=f,d=o):u=f,f=Math.floor((u-o)/2+o);return f},t.prototype.diff_commonOverlap_=function(a,s){var o=a.length,u=s.length;if(o==0||u==0)return 0;o>u?a=a.substring(o-u):o<u&&(s=s.substring(0,o));var f=Math.min(o,u);if(a==s)return f;for(var d=0,h=1;;){var p=a.substring(f-h),y=s.indexOf(p);if(y==-1)return d;h+=y,(y==0||a.substring(f-h)==s.substring(0,h))&&(d=h,h++)}},t.prototype.diff_halfMatch_=function(a,s){if(this.Diff_Timeout<=0)return null;var o=a.length>s.length?a:s,u=a.length>s.length?s:a;if(o.length<4||u.length*2<o.length)return null;var f=this;function d(A,C,M){for(var k=A.substring(M,M+Math.floor(A.length/4)),T=-1,O="",N,B,L,G;(T=C.indexOf(k,T+1))!=-1;){var H=f.diff_commonPrefix(A.substring(M),C.substring(T)),j=f.diff_commonSuffix(A.substring(0,M),C.substring(0,T));O.length<j+H&&(O=C.substring(T-j,T)+C.substring(T,T+H),N=A.substring(0,M-j),B=A.substring(M+H),L=C.substring(0,T-j),G=C.substring(T+H))}return O.length*2>=A.length?[N,B,L,G,O]:null}var h=d(o,u,Math.ceil(o.length/4)),p=d(o,u,Math.ceil(o.length/2)),y;if(!h&&!p)return null;p?h?y=h[4].length>p[4].length?h:p:y=p:y=h;var v,b,S,_;a.length>s.length?(v=y[0],b=y[1],S=y[2],_=y[3]):(S=y[0],_=y[1],v=y[2],b=y[3]);var w=y[4];return[v,b,S,_,w]},t.prototype.diff_cleanupSemantic=function(a){for(var s=!1,o=[],u=0,f=null,d=0,h=0,p=0,y=0,v=0;d<a.length;)a[d][0]==r?(o[u++]=d,h=y,p=v,y=0,v=0,f=a[d][1]):(a[d][0]==i?y+=a[d][1].length:v+=a[d][1].length,f&&f.length<=Math.max(h,p)&&f.length<=Math.max(y,v)&&(a.splice(o[u-1],0,new t.Diff(n,f)),a[o[u-1]+1][0]=i,u--,u--,d=u>0?o[u-1]:-1,h=0,p=0,y=0,v=0,f=null,s=!0)),d++;for(s&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),d=1;d<a.length;){if(a[d-1][0]==n&&a[d][0]==i){var b=a[d-1][1],S=a[d][1],_=this.diff_commonOverlap_(b,S),w=this.diff_commonOverlap_(S,b);_>=w?(_>=b.length/2||_>=S.length/2)&&(a.splice(d,0,new t.Diff(r,S.substring(0,_))),a[d-1][1]=b.substring(0,b.length-_),a[d+1][1]=S.substring(_),d++):(w>=b.length/2||w>=S.length/2)&&(a.splice(d,0,new t.Diff(r,b.substring(0,w))),a[d-1][0]=i,a[d-1][1]=S.substring(0,S.length-w),a[d+1][0]=n,a[d+1][1]=b.substring(w),d++),d++}d++}},t.prototype.diff_cleanupSemanticLossless=function(a){function s(w,A){if(!w||!A)return 6;var C=w.charAt(w.length-1),M=A.charAt(0),k=C.match(t.nonAlphaNumericRegex_),T=M.match(t.nonAlphaNumericRegex_),O=k&&C.match(t.whitespaceRegex_),N=T&&M.match(t.whitespaceRegex_),B=O&&C.match(t.linebreakRegex_),L=N&&M.match(t.linebreakRegex_),G=B&&w.match(t.blanklineEndRegex_),H=L&&A.match(t.blanklineStartRegex_);return G||H?5:B||L?4:k&&!O&&N?3:O||N?2:k||T?1:0}for(var o=1;o<a.length-1;){if(a[o-1][0]==r&&a[o+1][0]==r){var u=a[o-1][1],f=a[o][1],d=a[o+1][1],h=this.diff_commonSuffix(u,f);if(h){var p=f.substring(f.length-h);u=u.substring(0,u.length-h),f=p+f.substring(0,f.length-h),d=p+d}for(var y=u,v=f,b=d,S=s(u,f)+s(f,d);f.charAt(0)===d.charAt(0);){u+=f.charAt(0),f=f.substring(1)+d.charAt(0),d=d.substring(1);var _=s(u,f)+s(f,d);_>=S&&(S=_,y=u,v=f,b=d)}a[o-1][1]!=y&&(y?a[o-1][1]=y:(a.splice(o-1,1),o--),a[o][1]=v,b?a[o+1][1]=b:(a.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(a){for(var s=!1,o=[],u=0,f=null,d=0,h=!1,p=!1,y=!1,v=!1;d<a.length;)a[d][0]==r?(a[d][1].length<this.Diff_EditCost&&(y||v)?(o[u++]=d,h=y,p=v,f=a[d][1]):(u=0,f=null),y=v=!1):(a[d][0]==n?v=!0:y=!0,f&&(h&&p&&y&&v||f.length<this.Diff_EditCost/2&&h+p+y+v==3)&&(a.splice(o[u-1],0,new t.Diff(n,f)),a[o[u-1]+1][0]=i,u--,f=null,h&&p?(y=v=!0,u=0):(u--,d=u>0?o[u-1]:-1,y=v=!1),s=!0)),d++;s&&this.diff_cleanupMerge(a)},t.prototype.diff_cleanupMerge=function(a){a.push(new t.Diff(r,""));for(var s=0,o=0,u=0,f="",d="",h;s<a.length;)switch(a[s][0]){case i:u++,d+=a[s][1],s++;break;case n:o++,f+=a[s][1],s++;break;case r:o+u>1?(o!==0&&u!==0&&(h=this.diff_commonPrefix(d,f),h!==0&&(s-o-u>0&&a[s-o-u-1][0]==r?a[s-o-u-1][1]+=d.substring(0,h):(a.splice(0,0,new t.Diff(r,d.substring(0,h))),s++),d=d.substring(h),f=f.substring(h)),h=this.diff_commonSuffix(d,f),h!==0&&(a[s][1]=d.substring(d.length-h)+a[s][1],d=d.substring(0,d.length-h),f=f.substring(0,f.length-h))),s-=o+u,a.splice(s,o+u),f.length&&(a.splice(s,0,new t.Diff(n,f)),s++),d.length&&(a.splice(s,0,new t.Diff(i,d)),s++),s++):s!==0&&a[s-1][0]==r?(a[s-1][1]+=a[s][1],a.splice(s,1)):s++,u=0,o=0,f="",d="";break}a[a.length-1][1]===""&&a.pop();var p=!1;for(s=1;s<a.length-1;)a[s-1][0]==r&&a[s+1][0]==r&&(a[s][1].substring(a[s][1].length-a[s-1][1].length)==a[s-1][1]?(a[s][1]=a[s-1][1]+a[s][1].substring(0,a[s][1].length-a[s-1][1].length),a[s+1][1]=a[s-1][1]+a[s+1][1],a.splice(s-1,1),p=!0):a[s][1].substring(0,a[s+1][1].length)==a[s+1][1]&&(a[s-1][1]+=a[s+1][1],a[s][1]=a[s][1].substring(a[s+1][1].length)+a[s+1][1],a.splice(s+1,1),p=!0)),s++;p&&this.diff_cleanupMerge(a)},t.prototype.diff_xIndex=function(a,s){var o=0,u=0,f=0,d=0,h;for(h=0;h<a.length&&(a[h][0]!==i&&(o+=a[h][1].length),a[h][0]!==n&&(u+=a[h][1].length),!(o>s));h++)f=o,d=u;return a.length!=h&&a[h][0]===n?d:d+(s-f)},t.prototype.diff_prettyHtml=function(a){for(var s=[],o=/&/g,u=/</g,f=/>/g,d=/\n/g,h=0;h<a.length;h++){var p=a[h][0],y=a[h][1],v=y.replace(o,"&amp;").replace(u,"&lt;").replace(f,"&gt;").replace(d,"&para;<br>");switch(p){case i:s[h]='<ins style="background:#e6ffe6;">'+v+"</ins>";break;case n:s[h]='<del style="background:#ffe6e6;">'+v+"</del>";break;case r:s[h]="<span>"+v+"</span>";break}}return s.join("")},t.prototype.diff_text1=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==i&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_text2=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==n&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_levenshtein=function(a){for(var s=0,o=0,u=0,f=0;f<a.length;f++){var d=a[f][0],h=a[f][1];switch(d){case i:o+=h.length;break;case n:u+=h.length;break;case r:s+=Math.max(o,u),o=0,u=0;break}}return s+=Math.max(o,u),s},t.prototype.diff_toDelta=function(a){for(var s=[],o=0;o<a.length;o++)switch(a[o][0]){case i:s[o]="+"+encodeURI(a[o][1]);break;case n:s[o]="-"+a[o][1].length;break;case r:s[o]="="+a[o][1].length;break}return s.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(a,s){for(var o=[],u=0,f=0,d=s.split(/\t/g),h=0;h<d.length;h++){var p=d[h].substring(1);switch(d[h].charAt(0)){case"+":try{o[u++]=new t.Diff(i,decodeURI(p))}catch{throw new Error("Illegal escape in diff_fromDelta: "+p)}break;case"-":case"=":var y=parseInt(p,10);if(isNaN(y)||y<0)throw new Error("Invalid number in diff_fromDelta: "+p);var v=a.substring(f,f+=y);d[h].charAt(0)=="="?o[u++]=new t.Diff(r,v):o[u++]=new t.Diff(n,v);break;default:if(d[h])throw new Error("Invalid diff operation in diff_fromDelta: "+d[h])}}if(f!=a.length)throw new Error("Delta length ("+f+") does not equal source text length ("+a.length+").");return o},t.prototype.match_main=function(a,s,o){if(a==null||s==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,a.length)),a==s?0:a.length?a.substring(o,o+s.length)==s?o:this.match_bitap_(a,s,o):-1},t.prototype.match_bitap_=function(a,s,o){if(s.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var u=this.match_alphabet_(s),f=this;function d(N,B){var L=N/s.length,G=Math.abs(o-B);return f.Match_Distance?L+G/f.Match_Distance:G?1:L}var h=this.Match_Threshold,p=a.indexOf(s,o);p!=-1&&(h=Math.min(d(0,p),h),p=a.lastIndexOf(s,o+s.length),p!=-1&&(h=Math.min(d(0,p),h)));var y=1<<s.length-1;p=-1;for(var v,b,S=s.length+a.length,_,w=0;w<s.length;w++){for(v=0,b=S;v<b;)d(w,o+b)<=h?v=b:S=b,b=Math.floor((S-v)/2+v);S=b;var A=Math.max(1,o-b+1),C=Math.min(o+b,a.length)+s.length,M=Array(C+2);M[C+1]=(1<<w)-1;for(var k=C;k>=A;k--){var T=u[a.charAt(k-1)];if(w===0?M[k]=(M[k+1]<<1|1)&T:M[k]=(M[k+1]<<1|1)&T|((_[k+1]|_[k])<<1|1)|_[k+1],M[k]&y){var O=d(w,k-1);if(O<=h)if(h=O,p=k-1,p>o)A=Math.max(1,2*o-p);else break}}if(d(w+1,o)>h)break;_=M}return p},t.prototype.match_alphabet_=function(a){for(var s={},o=0;o<a.length;o++)s[a.charAt(o)]=0;for(var o=0;o<a.length;o++)s[a.charAt(o)]|=1<<a.length-o-1;return s},t.prototype.patch_addContext_=function(a,s){if(s.length!=0){if(a.start2===null)throw Error("patch not initialized");for(var o=s.substring(a.start2,a.start2+a.length1),u=0;s.indexOf(o)!=s.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)u+=this.Patch_Margin,o=s.substring(a.start2-u,a.start2+a.length1+u);u+=this.Patch_Margin;var f=s.substring(a.start2-u,a.start2);f&&a.diffs.unshift(new t.Diff(r,f));var d=s.substring(a.start2+a.length1,a.start2+a.length1+u);d&&a.diffs.push(new t.Diff(r,d)),a.start1-=f.length,a.start2-=f.length,a.length1+=f.length+d.length,a.length2+=f.length+d.length}},t.prototype.patch_make=function(a,s,o){var u,f;if(typeof a=="string"&&typeof s=="string"&&typeof o>"u")u=a,f=this.diff_main(u,s,!0),f.length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(a&&typeof a=="object"&&typeof s>"u"&&typeof o>"u")f=a,u=this.diff_text1(f);else if(typeof a=="string"&&s&&typeof s=="object"&&typeof o>"u")u=a,f=s;else if(typeof a=="string"&&typeof s=="string"&&o&&typeof o=="object")u=a,f=o;else throw new Error("Unknown call format to patch_make.");if(f.length===0)return[];for(var d=[],h=new t.patch_obj,p=0,y=0,v=0,b=u,S=u,_=0;_<f.length;_++){var w=f[_][0],A=f[_][1];switch(!p&&w!==r&&(h.start1=y,h.start2=v),w){case i:h.diffs[p++]=f[_],h.length2+=A.length,S=S.substring(0,v)+A+S.substring(v);break;case n:h.length1+=A.length,h.diffs[p++]=f[_],S=S.substring(0,v)+S.substring(v+A.length);break;case r:A.length<=2*this.Patch_Margin&&p&&f.length!=_+1?(h.diffs[p++]=f[_],h.length1+=A.length,h.length2+=A.length):A.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(h,b),d.push(h),h=new t.patch_obj,p=0,b=S,y=v);break}w!==i&&(y+=A.length),w!==n&&(v+=A.length)}return p&&(this.patch_addContext_(h,b),d.push(h)),d},t.prototype.patch_deepCopy=function(a){for(var s=[],o=0;o<a.length;o++){var u=a[o],f=new t.patch_obj;f.diffs=[];for(var d=0;d<u.diffs.length;d++)f.diffs[d]=new t.Diff(u.diffs[d][0],u.diffs[d][1]);f.start1=u.start1,f.start2=u.start2,f.length1=u.length1,f.length2=u.length2,s[o]=f}return s},t.prototype.patch_apply=function(a,s){if(a.length==0)return[s,[]];a=this.patch_deepCopy(a);var o=this.patch_addPadding(a);s=o+s+o,this.patch_splitMax(a);for(var u=0,f=[],d=0;d<a.length;d++){var h=a[d].start2+u,p=this.diff_text1(a[d].diffs),y,v=-1;if(p.length>this.Match_MaxBits?(y=this.match_main(s,p.substring(0,this.Match_MaxBits),h),y!=-1&&(v=this.match_main(s,p.substring(p.length-this.Match_MaxBits),h+p.length-this.Match_MaxBits),(v==-1||y>=v)&&(y=-1))):y=this.match_main(s,p,h),y==-1)f[d]=!1,u-=a[d].length2-a[d].length1;else{f[d]=!0,u=y-h;var b;if(v==-1?b=s.substring(y,y+p.length):b=s.substring(y,v+this.Match_MaxBits),p==b)s=s.substring(0,y)+this.diff_text2(a[d].diffs)+s.substring(y+p.length);else{var S=this.diff_main(p,b,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(S)/p.length>this.Patch_DeleteThreshold)f[d]=!1;else{this.diff_cleanupSemanticLossless(S);for(var _=0,w,A=0;A<a[d].diffs.length;A++){var C=a[d].diffs[A];C[0]!==r&&(w=this.diff_xIndex(S,_)),C[0]===i?s=s.substring(0,y+w)+C[1]+s.substring(y+w):C[0]===n&&(s=s.substring(0,y+w)+s.substring(y+this.diff_xIndex(S,_+C[1].length))),C[0]!==n&&(_+=C[1].length)}}}}}return s=s.substring(o.length,s.length-o.length),[s,f]},t.prototype.patch_addPadding=function(a){for(var s=this.Patch_Margin,o="",u=1;u<=s;u++)o+=String.fromCharCode(u);for(var u=0;u<a.length;u++)a[u].start1+=s,a[u].start2+=s;var f=a[0],d=f.diffs;if(d.length==0||d[0][0]!=r)d.unshift(new t.Diff(r,o)),f.start1-=s,f.start2-=s,f.length1+=s,f.length2+=s;else if(s>d[0][1].length){var h=s-d[0][1].length;d[0][1]=o.substring(d[0][1].length)+d[0][1],f.start1-=h,f.start2-=h,f.length1+=h,f.length2+=h}if(f=a[a.length-1],d=f.diffs,d.length==0||d[d.length-1][0]!=r)d.push(new t.Diff(r,o)),f.length1+=s,f.length2+=s;else if(s>d[d.length-1][1].length){var h=s-d[d.length-1][1].length;d[d.length-1][1]+=o.substring(0,h),f.length1+=h,f.length2+=h}return o},t.prototype.patch_splitMax=function(a){for(var s=this.Match_MaxBits,o=0;o<a.length;o++)if(!(a[o].length1<=s)){var u=a[o];a.splice(o--,1);for(var f=u.start1,d=u.start2,h="";u.diffs.length!==0;){var p=new t.patch_obj,y=!0;for(p.start1=f-h.length,p.start2=d-h.length,h!==""&&(p.length1=p.length2=h.length,p.diffs.push(new t.Diff(r,h)));u.diffs.length!==0&&p.length1<s-this.Patch_Margin;){var v=u.diffs[0][0],b=u.diffs[0][1];v===i?(p.length2+=b.length,d+=b.length,p.diffs.push(u.diffs.shift()),y=!1):v===n&&p.diffs.length==1&&p.diffs[0][0]==r&&b.length>2*s?(p.length1+=b.length,f+=b.length,y=!1,p.diffs.push(new t.Diff(v,b)),u.diffs.shift()):(b=b.substring(0,s-p.length1-this.Patch_Margin),p.length1+=b.length,f+=b.length,v===r?(p.length2+=b.length,d+=b.length):y=!1,p.diffs.push(new t.Diff(v,b)),b==u.diffs[0][1]?u.diffs.shift():u.diffs[0][1]=u.diffs[0][1].substring(b.length))}h=this.diff_text2(p.diffs),h=h.substring(h.length-this.Patch_Margin);var S=this.diff_text1(u.diffs).substring(0,this.Patch_Margin);S!==""&&(p.length1+=S.length,p.length2+=S.length,p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=S:p.diffs.push(new t.Diff(r,S))),y||a.splice(++o,0,p)}}},t.prototype.patch_toText=function(a){for(var s=[],o=0;o<a.length;o++)s[o]=a[o];return s.join("")},t.prototype.patch_fromText=function(a){var s=[];if(!a)return s;for(var o=a.split(`
`),u=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;u<o.length;){var d=o[u].match(f);if(!d)throw new Error("Invalid patch string: "+o[u]);var h=new t.patch_obj;for(s.push(h),h.start1=parseInt(d[1],10),d[2]===""?(h.start1--,h.length1=1):d[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(d[2],10)),h.start2=parseInt(d[3],10),d[4]===""?(h.start2--,h.length2=1):d[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(d[4],10)),u++;u<o.length;){var p=o[u].charAt(0);try{var y=decodeURI(o[u].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+y)}if(p=="-")h.diffs.push(new t.Diff(n,y));else if(p=="+")h.diffs.push(new t.Diff(i,y));else if(p==" ")h.diffs.push(new t.Diff(r,y));else{if(p=="@")break;if(p!=="")throw new Error('Invalid patch mode "'+p+'" in: '+y)}u++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var a,s;this.length1===0?a=this.start1+",0":this.length1==1?a=this.start1+1:a=this.start1+1+","+this.length1,this.length2===0?s=this.start2+",0":this.length2==1?s=this.start2+1:s=this.start2+1+","+this.length2;for(var o=["@@ -"+a+" +"+s+` @@
`],u,f=0;f<this.diffs.length;f++){switch(this.diffs[f][0]){case i:u="+";break;case n:u="-";break;case r:u=" ";break}o[f+1]=u+encodeURI(this.diffs[f][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r}(QS)),QS.exports}var LV=FV();const f8=_V(LV);function d8(e,t){const n=new f8,i=["firstName","lastName","postcode","DoB"];let r=0;return i.forEach(a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",u=n.diff_main(s,o);r+=u.filter(f=>f[0]!==0).length}),30-r}function UV({candidates:e,selectedMatchIds:t,onToggleMatch:n,onSetComparison:i,comparisonCandidateId:r}){const a=e.map(s=>({...s,score:d8(c8,s)})).sort((s,o)=>o.score-s.score);return le.jsxs("div",{className:"panel candidate-list-panel",children:[le.jsx("h2",{children:"Candidate Records"}),le.jsxs("table",{children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:"Match"}),le.jsx("th",{children:"ID"}),le.jsx("th",{children:"First Name"}),le.jsx("th",{children:"Last Name"}),le.jsx("th",{children:"Postcode"}),le.jsx("th",{children:"DoB"}),le.jsx("th",{children:"Score"}),le.jsx("th",{children:"Compare"})]})}),le.jsx("tbody",{children:a.map(s=>le.jsxs("tr",{className:r===s.id?"selected":"",children:[le.jsx("td",{children:le.jsx("input",{type:"checkbox",checked:t.has(s.id),onChange:()=>n(s.id)})}),le.jsx("td",{children:s.id}),le.jsx("td",{children:s.firstName}),le.jsx("td",{children:s.lastName}),le.jsx("td",{children:s.postcode}),le.jsx("td",{children:s.doB}),le.jsx("td",{children:s.score}),le.jsx("td",{children:le.jsx("button",{onClick:()=>i(s),children:"Compare"})})]},s.id))})]})]})}function BV({sourceRecord:e,comparisonCandidate:t}){if(!t)return le.jsxs("div",{className:"panel comparison-panel",children:[le.jsx("h2",{children:"Comparison"}),le.jsx("p",{children:"Select a candidate to compare."})]});const n=new f8,i=a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",u=n.diff_main(s,o);return n.diff_cleanupSemantic(u),n.diff_prettyHtml(u)},r=Object.keys(e);return le.jsx("div",{className:"panel comparison-panel",children:le.jsxs("div",{className:"comparison-content",children:[le.jsx("h2",{children:"Detailed Comparison"}),le.jsxs("table",{children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:"Slot"}),r.map(a=>le.jsx("th",{children:a},a))]})}),le.jsxs("tbody",{children:[le.jsxs("tr",{children:[le.jsx("td",{children:"Source"}),r.map(a=>le.jsx("td",{children:e[a]},a))]}),le.jsxs("tr",{children:[le.jsx("td",{children:"Candidate"}),r.map(a=>le.jsx("td",{children:t[a]},a))]}),le.jsxs("tr",{children:[le.jsx("td",{children:"Diff"}),le.jsx("td",{})," ",r.filter(a=>a!=="id").map(a=>le.jsx("td",{dangerouslySetInnerHTML:{__html:i(a)}},a))]})]})]})]})})}function jV({sourceRecord:e,candidates:t,selectedMatchIds:n,matchGroupId:i}){return le.jsxs("div",{className:"panel debug-output-panel",children:[le.jsx("h2",{children:"Debug Output"}),le.jsxs("table",{children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:"ID"}),le.jsx("th",{children:"First Name"}),le.jsx("th",{children:"Last Name"}),le.jsx("th",{children:"Manual Override UUID"})]})}),le.jsxs("tbody",{children:[le.jsxs("tr",{children:[le.jsx("td",{children:e.id}),le.jsx("td",{children:e.firstName}),le.jsx("td",{children:e.lastName}),le.jsx("td",{children:i||"N/A"})]},e.id),t.map(r=>le.jsxs("tr",{children:[le.jsx("td",{children:r.id}),le.jsx("td",{children:r.firstName}),le.jsx("td",{children:r.lastName}),le.jsx("td",{children:n.has(r.id)?i:"N/A"})]},r.id))]})]})]})}const PV=/("(?:[^\\"]|\\.)*")|[:,]/g;function ZS(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return function a(s,o,u){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-o.length-u;if(f.length<=d){const h=f.replace(PV,(p,y)=>y||`${p} `);if(h.length<=d)return h}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const h=o+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:S}=s;for(;y<S;y++)p.push(a(s[y],h,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(s),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,C=a(s[w],h,A.length+(y===_-1?0:1));C!==void 0&&p.push(A+C)}}if(p.length>0)return[v,n+p.join(`,
${h}`),b].join(`
${o}`)}return f}(e,"",0)}function Bi(e,t,n){return e.fields=t||[],e.fname=n,e}function qt(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function h8(e){return e.length===1?IV(e[0]):qV(e)}const IV=e=>function(t){return t[e]},qV=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function te(e){throw Error(e)}function Za(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,u;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(u=e[o],u==="\\")a+=e.substring(s,o++),s=o;else if(u===i)f(),i=null,r=-1;else{if(i)continue;s===r&&u==='"'||s===r&&u==="'"?(s=o+1,i=u):u==="."&&!r?o>s?f():s=o+1:u==="["?(o>s&&f(),r=s=o+1):u==="]"&&(r||te("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function kr(e,t,n){const i=Za(e);return e=i.length===1?i[0]:e,Bi((n&&n.get||h8)(i),[e],t||e)}const Tp=kr("id"),ni=Bi(e=>e,[],"identity"),Ho=Bi(()=>0,[],"zero"),vd=Bi(()=>1,[],"one"),Dr=Bi(()=>!0,[],"true"),Fo=Bi(()=>!1,[],"false");function HV(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const g8=0,iC=1,rC=2,p8=3,m8=4;function aC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HV,i=e||g8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=iC&&n(t||"error","ERROR",arguments),this},warn(){return i>=rC&&n(t||"warn","WARN",arguments),this},info(){return i>=p8&&n(t||"log","INFO",arguments),this},debug(){return i>=m8&&n(t||"log","DEBUG",arguments),this}}}var re=Array.isArray;function be(e){return e===Object(e)}const TN=e=>e!=="__proto__";function bd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=GV(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;xd(i,a,r[a],s)}return i},{})}function xd(e,t,n,i){if(!TN(t))return;let r,a;if(be(n)&&!re(n)){a=be(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?xd(a,r,n[r]):TN(r)&&(a[r]=n[r])}else e[t]=n}function GV(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Je(e){return e[e.length-1]}function Qn(e){return e==null||e===""?null:+e}const y8=e=>t=>e*Math.exp(t),v8=e=>t=>Math.log(e*t),b8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),x8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,V1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Mv(e,t,n,i){const r=n(e[0]),a=n(Je(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function S8(e,t){return Mv(e,t,Qn,ni)}function E8(e,t){var n=Math.sign(e[0]);return Mv(e,t,v8(n),y8(n))}function _8(e,t,n){return Mv(e,t,V1(n),V1(1/n))}function w8(e,t,n){return Mv(e,t,b8(n),x8(n))}function $v(e,t,n,i,r){const a=i(e[0]),s=i(Je(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function sC(e,t,n){return $v(e,t,n,Qn,ni)}function oC(e,t,n){const i=Math.sign(e[0]);return $v(e,t,n,v8(i),y8(i))}function W1(e,t,n,i){return $v(e,t,n,V1(i),V1(1/i))}function lC(e,t,n,i){return $v(e,t,n,b8(i),x8(i))}function A8(e){return 1+~~(new Date(e).getMonth()/3)}function C8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Se(e){return e!=null?re(e)?e:[e]:[]}function M8(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Ie(e){return typeof e=="function"}const YV="descending";function uC(e,t,n){n=n||{},t=Se(t)||[];const i=[],r=[],a={},s=n.comparator||XV;return Se(e).forEach((o,u)=>{o!=null&&(i.push(t[u]===YV?-1:1),r.push(o=Ie(o)?o:kr(o,null,n)),(Kn(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Bi(s(r,i),Object.keys(a))}const Sd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),XV=(e,t)=>e.length===1?VV(e[0],t[0]):WV(e,t,e.length),VV=(e,t)=>function(n,i){return Sd(e(n),e(i))*t},WV=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Sd(a(i),a(r));return s*t[o]});function ii(e){return Ie(e)?e:()=>e}function cC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Pe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ia(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function $8(e,t){const n=e.length;let i=-1,r,a,s,o,u;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}return[o,u]}function _e(e,t){return Object.hasOwn(e,t)}const Fm={};function Ed(e){let t={},n;function i(a){return _e(t,a)&&t[a]!==Fm}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===Fm&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Fm),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const u=t[o];u!==Fm&&(!n||!n(u))&&(a[o]=u,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function T8(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],u=Je(e),f;u<o&&(f=o,o=u,u=f),f=Math.abs(t-o);const d=Math.abs(u-t);return f<d&&f<=s?i:d<=s?r:a}function pe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Pe(i,n)}function xf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Sl(e){return typeof e=="boolean"}function el(e){return Object.prototype.toString.call(e)==="[object Date]"}function k8(e){return e&&Ie(e[Symbol.iterator])}function st(e){return typeof e=="number"}function fC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ve(e){return typeof e=="string"}function dC(e,t,n){e&&(e=t?Se(e).map(o=>o.replace(/\\(.)/g,"$1")):Se(e));const i=e&&e.length,r=n&&n.get||h8,a=o=>r(t?[o]:Za(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(u){return""+o(u)}}else{const o=e.map(a);s=function(u){let f=""+o[0](u),d=0;for(;++d<i;)f+="|"+o[d](u);return f}}return Bi(s,e,"key")}function D8(e,t){const n=e[0],i=Je(e),r=+t;return r?r===1?i:n+r*(i-n):n}const QV=1e4;function O8(e){e=+e||QV;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>_e(t,s)||_e(n,s),get:s=>_e(t,s)?t[s]:_e(n,s)?a(s,n[s]):void 0,set:(s,o)=>_e(t,s)?t[s]=o:a(s,o)}}function R8(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,u=0,f=0;for(;o<r&&u<a;++f)s[f]=e(t[o],n[u])>0?n[u++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;u<a;++u,++f)s[f]=n[u];return s}function pg(e,t){let n="";for(;--t>=0;)n+=e;return n}function N8(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?pg(r,s)+a:i==="center"?pg(r,~~(s/2))+a+pg(r,Math.ceil(s/2)):a+pg(r,s)}function kp(e){return e&&Je(e)-e[0]||0}function ge(e){return re(e)?"["+e.map(ge)+"]":be(e)||ve(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function hC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const ZV=e=>st(e)||el(e)?e:Date.parse(e);function gC(e,t){return t=t||ZV,e==null||e===""?null:t(e)}function pC(e){return e==null||e===""?null:e+""}function ra(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function z8(e,t,n,i){const r=i??"…",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Bo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var kN={},KS={},JS=34,Hh=10,eE=13;function F8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function KV(e,t){var n=F8(e);return function(i,r){return t(n(i),r,e)}}function DN(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Mi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function JV(e){return e<0?"-"+Mi(-e,6):e>9999?"+"+Mi(e,6):Mi(e,4)}function eW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":JV(e.getUTCFullYear())+"-"+Mi(e.getUTCMonth()+1,2)+"-"+Mi(e.getUTCDate(),2)+(r?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"."+Mi(r,3)+"Z":i?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"Z":n||t?"T"+Mi(t,2)+":"+Mi(n,2)+"Z":"")}function tW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,_){if(y)return y(S,_-1);v=S,y=p?KV(S,p):F8(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,_,w=v<=0,A=!1;h.charCodeAt(v-1)===Hh&&--v,h.charCodeAt(v-1)===eE&&--v;function C(){if(w)return KS;if(A)return A=!1,kN;var k,T=b,O;if(h.charCodeAt(T)===JS){for(;b++<v&&h.charCodeAt(b)!==JS||h.charCodeAt(++b)===JS;);return(k=b)>=v?w=!0:(O=h.charCodeAt(b++))===Hh?A=!0:O===eE&&(A=!0,h.charCodeAt(b)===Hh&&++b),h.slice(T+1,k-1).replace(/""/g,'"')}for(;b<v;){if((O=h.charCodeAt(k=b++))===Hh)A=!0;else if(O===eE)A=!0,h.charCodeAt(b)===Hh&&++b;else if(O!==n)continue;return h.slice(T,k)}return w=!0,h.slice(T,v)}for(;(_=C())!==KS;){for(var M=[];_!==kN&&_!==KS;)M.push(_),_=C();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=DN(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=DN(h)),a(h,p).join(`
`)}function u(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?eW(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:u,formatRow:f,formatValue:d}}function nW(e){return e}function iW(e){if(e==null)return nW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,u){u||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function rW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function aW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ON(e,n)})}:ON(e,t)}function ON(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=L8(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function L8(e,t){var n=iW(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&rW(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function u(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=u(d.arcs);break;case"MultiPolygon":p=d.arcs.map(u);break;default:return null}return{type:h,coordinates:p}}return f(t)}function sW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function u(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return u(r,i),u(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function oW(e){return L8(e,lW.apply(this,arguments))}function lW(e,t,n){var i,r,a;if(arguments.length>1)i=uW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:sW(e,i)}}function uW(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function u(h){h.forEach(o)}function f(h){h.forEach(u)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":u(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function Ps(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _d(e){let t,n,i;e.length!==2?(t=Ps,n=(o,u)=>Ps(e(o),u),i=(o,u)=>e(o)-u):(t=e===Ps||e===cW?e:fW,n=e,i=e);function r(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<0?f=h+1:d=h}while(f<d)}return f}function a(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,u,f=0,d=o.length){const h=r(o,u,f,d-1);return h>f&&i(o[h-1],u)>-i(o[h],u)?h-1:h}return{left:r,center:s,right:a}}function fW(){return 0}function U8(e){return e===null?NaN:+e}function*dW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const B8=_d(Ps),sl=B8.right,hW=B8.left;_d(U8).center;function gW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function pW(e,t){const n=gW(e,t);return n&&Math.sqrt(n)}class pi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class RN extends Map{constructor(t,n=I8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(P_(this,t))}has(t){return super.has(P_(this,t))}set(t,n){return super.set(j8(this,t),n)}delete(t){return super.delete(P8(this,t))}}class Q1 extends Set{constructor(t,n=I8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(P_(this,t))}add(t){return super.add(j8(this,t))}delete(t){return super.delete(P8(this,t))}}function P_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function j8({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function P8({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function I8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mW(e,t){return Array.from(t,n=>e[n])}function yW(e=Ps){if(e===Ps)return q8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function q8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vW=Math.sqrt(50),bW=Math.sqrt(10),xW=Math.sqrt(2);function Z1(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=vW?10:a>=bW?5:a>=xW?2:1;let o,u,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),u=Math.round(t*f),o/f<e&&++o,u/f>t&&--u,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),u=Math.round(t/f),o*f<e&&++o,u*f>t&&--u),u<o&&.5<=n&&n<2?Z1(e,t,n*2):[o,u,f]}function I_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Z1(t,e,n):Z1(e,t,n);if(!(a>=r))return[];const o=a-r+1,u=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)u[f]=(a-f)/-s;else for(let f=0;f<o;++f)u[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)u[f]=(r+f)/-s;else for(let f=0;f<o;++f)u[f]=(r+f)*s;return u}function q_(e,t,n){return t=+t,e=+e,n=+n,Z1(e,t,n)[2]}function ol(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?q_(t,e,n):q_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function _u(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function H_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function H8(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?q8:yW(r);i>n;){if(i-n>600){const u=i-n+1,f=t-n+1,d=Math.log(u),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(u-h)/u)*(f-u/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/u+p)),v=Math.min(i,Math.floor(t+(u-f)*h/u+p));H8(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Gh(e,n,t),r(e[i],a)>0&&Gh(e,n,i);s<o;){for(Gh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Gh(e,n,o):(++o,Gh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Gh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function G_(e,t,n){if(e=Float64Array.from(dW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return H_(e);if(t>=1)return _u(e);var i,r=(i-1)*t,a=Math.floor(r),s=_u(H8(e,a).subarray(0,a+1)),o=H_(e.subarray(a+1));return s+(o-s)*(r-a)}}function G8(e,t,n=U8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function SW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function Y8(e,t){return G_(e,.5,t)}function*EW(e){for(const t of e)yield*t}function X8(e){return Array.from(EW(e))}function er(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function V8(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function _W(e,...t){e=new Q1(e),t=t.map(wW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function wW(e){return e instanceof Q1?e:new Q1(e)}function AW(...e){const t=new Q1;for(const n of e)for(const i of n)t.add(i);return t}function CW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function K1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Lf(e){return e=K1(Math.abs(e)),e?e[1]:NaN}function MW(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],u=0;r>0&&o>0&&(u+o+1>i&&(o=Math.max(1,i-u)),a.push(n.substring(r-=o,r+o)),!((u+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function $W(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ru(e){if(!(t=TW.exec(e)))throw new Error("invalid format: "+e);var t;return new mC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ru.prototype=mC.prototype;function mC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var W8;function DW(e,t){var n=K1(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(W8=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+K1(e,Math.max(0,t+a-1))[0]}function NN(e,t){var n=K1(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const zN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:CW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>NN(e*100,t),r:NN,s:DW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function FN(e){return e}var LN=Array.prototype.map,UN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Q8(e){var t=e.grouping===void 0||e.thousands===void 0?FN:MW(LN.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?FN:$W(LN.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Ru(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,_=h.width,w=h.comma,A=h.precision,C=h.trim,M=h.type;M==="n"?(w=!0,M="g"):zN[M]||(A===void 0&&(A=12),C=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?s:"",O=zN[M],N=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(L){var G=k,H=T,j,F,R;if(M==="c")H=O(L)+H,L="";else{L=+L;var P=L<0||1/L<0;if(L=isNaN(L)?u:O(Math.abs(L),A),C&&(L=kW(L)),P&&+L==0&&v!=="+"&&(P=!1),G=(P?v==="("?v:o:v==="-"||v==="("?"":v)+G,H=(M==="s"?UN[8+W8/3]:"")+H+(P&&v==="("?")":""),N){for(j=-1,F=L.length;++j<F;)if(R=L.charCodeAt(j),48>R||R>57){H=(R===46?r+L.slice(j+1):L.slice(j))+H,L=L.slice(0,j);break}}}w&&!S&&(L=t(L,1/0));var X=G.length+L.length+H.length,K=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(L=t(K+L,K.length?_-H.length:1/0),K=""),y){case"<":L=G+L+H+K;break;case"=":L=G+K+L+H;break;case"^":L=K.slice(0,X=K.length>>1)+G+L+H+K.slice(X);break;default:L=K+G+L+H;break}return a(L)}return B.toString=function(){return h+""},B}function d(h,p){var y=f((h=Ru(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Lf(p)/3)))*3,b=Math.pow(10,-v),S=UN[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var Lm,Tv,yC;OW({thousands:",",grouping:[3],currency:["$",""]});function OW(e){return Lm=Q8(e),Tv=Lm.format,yC=Lm.formatPrefix,Lm}function Z8(e){return Math.max(0,-Lf(Math.abs(e)))}function K8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lf(t)/3)))*3-Lf(Math.abs(e)))}function J8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lf(t)-Lf(e))+1}const tE=new Date,nE=new Date;function dn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const u=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return u;let f;do u.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return u},r.filter=a=>dn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(tE.setTime(+a),nE.setTime(+s),e(tE),e(nE),Math.floor(n(tE,nE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Uf=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uf);Uf.range;const zs=1e3,wr=zs*60,Fs=wr*60,Ws=Fs*24,vC=Ws*7,BN=Ws*30,iE=Ws*365,Ls=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCSeconds());Ls.range;const kv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getMinutes());kv.range;const Dv=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCMinutes());Dv.range;const Ov=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs-e.getMinutes()*wr)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getHours());Ov.range;const Rv=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getUTCHours());Rv.range;const Is=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wr)/Ws,e=>e.getDate()-1);Is.range;const tl=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>e.getUTCDate()-1);tl.range;const e9=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>Math.floor(e/Ws));e9.range;function tc(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wr)/vC)}const wd=tc(0),J1=tc(1),RW=tc(2),NW=tc(3),Bf=tc(4),zW=tc(5),FW=tc(6);wd.range;J1.range;RW.range;NW.range;Bf.range;zW.range;FW.range;function nc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/vC)}const Ad=nc(0),ey=nc(1),LW=nc(2),UW=nc(3),jf=nc(4),BW=nc(5),jW=nc(6);Ad.range;ey.range;LW.range;UW.range;jf.range;BW.range;jW.range;const Kg=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Kg.range;const Jg=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jg.range;const qa=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qa.range;const Ha=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ha.range;function t9(e,t,n,i,r,a){const s=[[Ls,1,zs],[Ls,5,5*zs],[Ls,15,15*zs],[Ls,30,30*zs],[a,1,wr],[a,5,5*wr],[a,15,15*wr],[a,30,30*wr],[r,1,Fs],[r,3,3*Fs],[r,6,6*Fs],[r,12,12*Fs],[i,1,Ws],[i,2,2*Ws],[n,1,vC],[t,1,BN],[t,3,3*BN],[e,1,iE]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:u(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function u(f,d,h){const p=Math.abs(d-f)/h,y=_d(([,,S])=>S).right(s,p);if(y===s.length)return e.every(ol(f/iE,d/iE,h));if(y===0)return Uf.every(Math.max(ol(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,u]}const[PW,IW]=t9(Ha,Jg,Ad,e9,Rv,Dv),[qW,HW]=t9(qa,Kg,wd,Is,Ov,kv),Un="year",Ri="quarter",Jn="month",un="week",Ni="date",Wn="day",Ga="dayofyear",or="hours",lr="minutes",Or="seconds",aa="milliseconds",bC=[Un,Ri,Jn,un,Ni,Wn,Ga,or,lr,Or,aa],rE=bC.reduce((e,t,n)=>(e[t]=1+n,e),{});function xC(e){const t=Se(e).slice(),n={};return t.length||te("Missing time unit."),t.forEach(r=>{_e(rE,r)?n[r]=1:te(`Invalid time unit: ${r}.`)}),(n[un]||n[Wn]?1:0)+(n[Ri]||n[Jn]||n[Ni]?1:0)+(n[Ga]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((r,a)=>rE[r]-rE[a]),t}const GW={[Un]:"%Y ",[Ri]:"Q%q ",[Jn]:"%b ",[Ni]:"%d ",[un]:"W%U ",[Wn]:"%a ",[Ga]:"%j ",[or]:"%H:00",[lr]:"00:%M",[Or]:":%S",[aa]:".%L",[`${Un}-${Jn}`]:"%Y-%m ",[`${Un}-${Jn}-${Ni}`]:"%Y-%m-%d ",[`${or}-${lr}`]:"%H:%M"};function n9(e,t){const n=Pe({},GW,t),i=xC(e),r=i.length;let a="",s=0,o,u;for(s=0;s<r;)for(o=i.length;o>s;--o)if(u=i.slice(s,o).join("-"),n[u]!=null){a+=n[u],s=o;break}return a.trim()}const gu=new Date;function SC(e){return gu.setFullYear(e),gu.setMonth(0),gu.setDate(1),gu.setHours(0,0,0,0),gu}function i9(e){return a9(new Date(e))}function r9(e){return Y_(new Date(e))}function a9(e){return Is.count(SC(e.getFullYear())-1,e)}function Y_(e){return wd.count(SC(e.getFullYear())-1,e)}function X_(e){return SC(e).getDay()}function YW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function s9(e){return l9(new Date(e))}function o9(e){return V_(new Date(e))}function l9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tl.count(t-1,e)}function V_(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ad.count(t-1,e)}function W_(e){return gu.setTime(Date.UTC(e,0,1)),gu.getUTCDay()}function XW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function u9(e,t,n,i,r){const a=t||1,s=Je(e),o=(_,w,A)=>(A=A||_,VW(n[A],i[A],_===s&&a,w)),u=new Date,f=ra(e),d=f[Un]?o(Un):ii(2012),h=f[Jn]?o(Jn):f[Ri]?o(Ri):Ho,p=f[un]&&f[Wn]?o(Wn,1,un+Wn):f[un]?o(un,1):f[Wn]?o(Wn,1):f[Ni]?o(Ni,1):f[Ga]?o(Ga,1):vd,y=f[or]?o(or):Ho,v=f[lr]?o(lr):Ho,b=f[Or]?o(Or):Ho,S=f[aa]?o(aa):Ho;return function(_){u.setTime(+_);const w=d(u);return r(w,h(u),p(u,w),y(u),v(u),b(u),S(u))}}function VW(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Pf(e,t,n){return t+e*7-(n+6)%7}const WW={[Un]:e=>e.getFullYear(),[Ri]:e=>Math.floor(e.getMonth()/3),[Jn]:e=>e.getMonth(),[Ni]:e=>e.getDate(),[or]:e=>e.getHours(),[lr]:e=>e.getMinutes(),[Or]:e=>e.getSeconds(),[aa]:e=>e.getMilliseconds(),[Ga]:e=>a9(e),[un]:e=>Y_(e),[un+Wn]:(e,t)=>Pf(Y_(e),e.getDay(),X_(t)),[Wn]:(e,t)=>Pf(1,e.getDay(),X_(t))},QW={[Ri]:e=>3*e,[un]:(e,t)=>Pf(e,0,X_(t))};function c9(e,t){return u9(e,t||1,WW,QW,YW)}const ZW={[Un]:e=>e.getUTCFullYear(),[Ri]:e=>Math.floor(e.getUTCMonth()/3),[Jn]:e=>e.getUTCMonth(),[Ni]:e=>e.getUTCDate(),[or]:e=>e.getUTCHours(),[lr]:e=>e.getUTCMinutes(),[Or]:e=>e.getUTCSeconds(),[aa]:e=>e.getUTCMilliseconds(),[Ga]:e=>l9(e),[un]:e=>V_(e),[Wn]:(e,t)=>Pf(1,e.getUTCDay(),W_(t)),[un+Wn]:(e,t)=>Pf(V_(e),e.getUTCDay(),W_(t))},KW={[Ri]:e=>3*e,[un]:(e,t)=>Pf(e,0,W_(t))};function f9(e,t){return u9(e,t||1,ZW,KW,XW)}const JW={[Un]:qa,[Ri]:Kg.every(3),[Jn]:Kg,[un]:wd,[Ni]:Is,[Wn]:Is,[Ga]:Is,[or]:Ov,[lr]:kv,[Or]:Ls,[aa]:Uf},eQ={[Un]:Ha,[Ri]:Jg.every(3),[Jn]:Jg,[un]:Ad,[Ni]:tl,[Wn]:tl,[Ga]:tl,[or]:Rv,[lr]:Dv,[Or]:Ls,[aa]:Uf};function Cd(e){return JW[e]}function Md(e){return eQ[e]}function d9(e,t,n){return e?e.offset(t,n):void 0}function h9(e,t,n){return d9(Cd(e),t,n)}function g9(e,t,n){return d9(Md(e),t,n)}function p9(e,t,n,i){return e?e.range(t,n,i):void 0}function m9(e,t,n,i){return p9(Cd(e),t,n,i)}function y9(e,t,n,i){return p9(Md(e),t,n,i)}const mg=1e3,yg=mg*60,vg=yg*60,Nv=vg*24,tQ=Nv*7,jN=Nv*30,Q_=Nv*365,v9=[Un,Jn,Ni,or,lr,Or,aa],bg=v9.slice(0,-1),xg=bg.slice(0,-1),Sg=xg.slice(0,-1),nQ=Sg.slice(0,-1),iQ=[Un,un],PN=[Un,Jn],b9=[Un],Yh=[[bg,1,mg],[bg,5,5*mg],[bg,15,15*mg],[bg,30,30*mg],[xg,1,yg],[xg,5,5*yg],[xg,15,15*yg],[xg,30,30*yg],[Sg,1,vg],[Sg,3,3*vg],[Sg,6,6*vg],[Sg,12,12*vg],[nQ,1,Nv],[iQ,1,tQ],[PN,1,jN],[PN,3,3*jN],[b9,1,Q_]];function x9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(kp(t))/n;let r=_d(o=>o[2]).right(Yh,i),a,s;return r===Yh.length?(a=b9,s=ol(t[0]/Q_,t[1]/Q_,n)):r?(r=Yh[i/Yh[r-1][2]<Yh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=v9,s=Math.max(ol(t[0],t[1],n),1)),{units:a,step:s}}function aE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function S9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,u=e.shortMonths,f=Vh(r),d=Wh(r),h=Vh(a),p=Wh(a),y=Vh(s),v=Wh(s),b=Vh(o),S=Wh(o),_=Vh(u),w=Wh(u),A={a:P,A:X,b:K,B:z,c:null,d:XN,e:XN,f:CQ,g:FQ,G:UQ,H:_Q,I:wQ,j:AQ,L:E9,m:MQ,M:$Q,p:W,q:ne,Q:QN,s:ZN,S:TQ,u:kQ,U:DQ,V:OQ,w:RQ,W:NQ,x:null,X:null,y:zQ,Y:LQ,Z:BQ,"%":WN},C={a:se,A:ye,b:Ee,B:Ce,c:null,d:VN,e:VN,f:qQ,g:JQ,G:tZ,H:jQ,I:PQ,j:IQ,L:w9,m:HQ,M:GQ,p:Ht,q:nt,Q:QN,s:ZN,S:YQ,u:XQ,U:VQ,V:WQ,w:QQ,W:ZQ,x:null,X:null,y:KQ,Y:eZ,Z:nZ,"%":WN},M={a:B,A:L,b:G,B:H,c:j,d:GN,e:GN,f:bQ,g:HN,G:qN,H:YN,I:YN,j:pQ,L:vQ,m:gQ,M:mQ,p:N,q:hQ,Q:SQ,s:EQ,S:yQ,u:lQ,U:uQ,V:cQ,w:oQ,W:fQ,x:F,X:R,y:HN,Y:qN,Z:dQ,"%":xQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),C.x=k(n,C),C.X=k(i,C),C.c=k(t,C);function k(xe,Ue){return function(je){var fe=[],Gt=-1,it=0,Kt=xe.length,gn,Jt,S0;for(je instanceof Date||(je=new Date(+je));++Gt<Kt;)xe.charCodeAt(Gt)===37&&(fe.push(xe.slice(it,Gt)),(Jt=IN[gn=xe.charAt(++Gt)])!=null?gn=xe.charAt(++Gt):Jt=gn==="e"?" ":"0",(S0=Ue[gn])&&(gn=S0(je,Jt)),fe.push(gn),it=Gt+1);return fe.push(xe.slice(it,Gt)),fe.join("")}}function T(xe,Ue){return function(je){var fe=Xh(1900,void 0,1),Gt=O(fe,xe,je+="",0),it,Kt;if(Gt!=je.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Ue&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(it=sE(Xh(fe.y,0,1)),Kt=it.getUTCDay(),it=Kt>4||Kt===0?ey.ceil(it):ey(it),it=tl.offset(it,(fe.V-1)*7),fe.y=it.getUTCFullYear(),fe.m=it.getUTCMonth(),fe.d=it.getUTCDate()+(fe.w+6)%7):(it=aE(Xh(fe.y,0,1)),Kt=it.getDay(),it=Kt>4||Kt===0?J1.ceil(it):J1(it),it=Is.offset(it,(fe.V-1)*7),fe.y=it.getFullYear(),fe.m=it.getMonth(),fe.d=it.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Kt="Z"in fe?sE(Xh(fe.y,0,1)).getUTCDay():aE(Xh(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Kt+5)%7:fe.w+fe.U*7-(Kt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,sE(fe)):aE(fe)}}function O(xe,Ue,je,fe){for(var Gt=0,it=Ue.length,Kt=je.length,gn,Jt;Gt<it;){if(fe>=Kt)return-1;if(gn=Ue.charCodeAt(Gt++),gn===37){if(gn=Ue.charAt(Gt++),Jt=M[gn in IN?Ue.charAt(Gt++):gn],!Jt||(fe=Jt(xe,je,fe))<0)return-1}else if(gn!=je.charCodeAt(fe++))return-1}return fe}function N(xe,Ue,je){var fe=f.exec(Ue.slice(je));return fe?(xe.p=d.get(fe[0].toLowerCase()),je+fe[0].length):-1}function B(xe,Ue,je){var fe=y.exec(Ue.slice(je));return fe?(xe.w=v.get(fe[0].toLowerCase()),je+fe[0].length):-1}function L(xe,Ue,je){var fe=h.exec(Ue.slice(je));return fe?(xe.w=p.get(fe[0].toLowerCase()),je+fe[0].length):-1}function G(xe,Ue,je){var fe=_.exec(Ue.slice(je));return fe?(xe.m=w.get(fe[0].toLowerCase()),je+fe[0].length):-1}function H(xe,Ue,je){var fe=b.exec(Ue.slice(je));return fe?(xe.m=S.get(fe[0].toLowerCase()),je+fe[0].length):-1}function j(xe,Ue,je){return O(xe,t,Ue,je)}function F(xe,Ue,je){return O(xe,n,Ue,je)}function R(xe,Ue,je){return O(xe,i,Ue,je)}function P(xe){return s[xe.getDay()]}function X(xe){return a[xe.getDay()]}function K(xe){return u[xe.getMonth()]}function z(xe){return o[xe.getMonth()]}function W(xe){return r[+(xe.getHours()>=12)]}function ne(xe){return 1+~~(xe.getMonth()/3)}function se(xe){return s[xe.getUTCDay()]}function ye(xe){return a[xe.getUTCDay()]}function Ee(xe){return u[xe.getUTCMonth()]}function Ce(xe){return o[xe.getUTCMonth()]}function Ht(xe){return r[+(xe.getUTCHours()>=12)]}function nt(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ue=k(xe+="",A);return Ue.toString=function(){return xe},Ue},parse:function(xe){var Ue=T(xe+="",!1);return Ue.toString=function(){return xe},Ue},utcFormat:function(xe){var Ue=k(xe+="",C);return Ue.toString=function(){return xe},Ue},utcParse:function(xe){var Ue=T(xe+="",!0);return Ue.toString=function(){return xe},Ue}}}var IN={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,rQ=/^%/,aQ=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function sQ(e){return e.replace(aQ,"\\$&")}function Vh(e){return new RegExp("^(?:"+e.map(sQ).join("|")+")","i")}function Wh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function oQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function lQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function uQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function cQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function fQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function qN(e,t,n){var i=Mn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function HN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function dQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function hQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function gQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function GN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function pQ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function YN(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function mQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function yQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function vQ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function bQ(e,t,n){var i=Mn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function xQ(e,t,n){var i=rQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function SQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function EQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function XN(e,t){return ot(e.getDate(),t,2)}function _Q(e,t){return ot(e.getHours(),t,2)}function wQ(e,t){return ot(e.getHours()%12||12,t,2)}function AQ(e,t){return ot(1+Is.count(qa(e),e),t,3)}function E9(e,t){return ot(e.getMilliseconds(),t,3)}function CQ(e,t){return E9(e,t)+"000"}function MQ(e,t){return ot(e.getMonth()+1,t,2)}function $Q(e,t){return ot(e.getMinutes(),t,2)}function TQ(e,t){return ot(e.getSeconds(),t,2)}function kQ(e){var t=e.getDay();return t===0?7:t}function DQ(e,t){return ot(wd.count(qa(e)-1,e),t,2)}function _9(e){var t=e.getDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function OQ(e,t){return e=_9(e),ot(Bf.count(qa(e),e)+(qa(e).getDay()===4),t,2)}function RQ(e){return e.getDay()}function NQ(e,t){return ot(J1.count(qa(e)-1,e),t,2)}function zQ(e,t){return ot(e.getFullYear()%100,t,2)}function FQ(e,t){return e=_9(e),ot(e.getFullYear()%100,t,2)}function LQ(e,t){return ot(e.getFullYear()%1e4,t,4)}function UQ(e,t){var n=e.getDay();return e=n>=4||n===0?Bf(e):Bf.ceil(e),ot(e.getFullYear()%1e4,t,4)}function BQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function VN(e,t){return ot(e.getUTCDate(),t,2)}function jQ(e,t){return ot(e.getUTCHours(),t,2)}function PQ(e,t){return ot(e.getUTCHours()%12||12,t,2)}function IQ(e,t){return ot(1+tl.count(Ha(e),e),t,3)}function w9(e,t){return ot(e.getUTCMilliseconds(),t,3)}function qQ(e,t){return w9(e,t)+"000"}function HQ(e,t){return ot(e.getUTCMonth()+1,t,2)}function GQ(e,t){return ot(e.getUTCMinutes(),t,2)}function YQ(e,t){return ot(e.getUTCSeconds(),t,2)}function XQ(e){var t=e.getUTCDay();return t===0?7:t}function VQ(e,t){return ot(Ad.count(Ha(e)-1,e),t,2)}function A9(e){var t=e.getUTCDay();return t>=4||t===0?jf(e):jf.ceil(e)}function WQ(e,t){return e=A9(e),ot(jf.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function QQ(e){return e.getUTCDay()}function ZQ(e,t){return ot(ey.count(Ha(e)-1,e),t,2)}function KQ(e,t){return ot(e.getUTCFullYear()%100,t,2)}function JQ(e,t){return e=A9(e),ot(e.getUTCFullYear()%100,t,2)}function eZ(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function tZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?jf(e):jf.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function nZ(){return"+0000"}function WN(){return"%"}function QN(e){return+e}function ZN(e){return Math.floor(+e/1e3)}var af,EC,C9,_C,M9;iZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iZ(e){return af=S9(e),EC=af.format,C9=af.parse,_C=af.utcFormat,M9=af.utcParse,af}function Eg(e){const t={};return n=>t[n]||(t[n]=e(n))}function rZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=aZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function aZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function $9(e){const t=Eg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Ru(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return rZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Ru(s??",f");const o=ol(i,r,a),u=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=K8(o,u))||(s.precision=f),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(f=J8(o,u))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=Z8(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let Z_;T9();function T9(){return Z_=$9({format:Tv,formatPrefix:yC})}function k9(e){return $9(Q8(e))}function ty(e){return arguments.length?Z_=k9(e):Z_}function KN(e,t,n){n=n||{},be(n)||te(`Invalid time multi-format specifier: ${n}`);const i=t(Or),r=t(lr),a=t(or),s=t(Ni),o=t(un),u=t(Jn),f=t(Ri),d=t(Un),h=e(n[aa]||".%L"),p=e(n[Or]||":%S"),y=e(n[lr]||"%I:%M"),v=e(n[or]||"%I %p"),b=e(n[Ni]||n[Wn]||"%a %d"),S=e(n[un]||"%b %d"),_=e(n[Jn]||"%B"),w=e(n[Ri]||"%B"),A=e(n[Un]||"%Y");return C=>(i(C)<C?h:r(C)<C?p:a(C)<C?y:s(C)<C?v:u(C)<C?o(C)<C?b:S:d(C)<C?f(C)<C?_:w:A)(C)}function D9(e){const t=Eg(e.format),n=Eg(e.utcFormat);return{timeFormat:i=>ve(i)?t(i):KN(t,Cd,i),utcFormat:i=>ve(i)?n(i):KN(n,Md,i),timeParse:Eg(e.parse),utcParse:Eg(e.utcParse)}}let K_;O9();function O9(){return K_=D9({format:EC,parse:C9,utcFormat:_C,utcParse:M9})}function R9(e){return D9(S9(e))}function ep(e){return arguments.length?K_=R9(e):K_}const J_=(e,t)=>Pe({},e,t);function N9(e,t){const n=e?k9(e):ty(),i=t?R9(t):ep();return J_(n,i)}function wC(e,t){const n=arguments.length;return n&&n!==2&&te("defaultLocale expects either zero or two arguments."),n?J_(ty(e),ep(t)):J_(ty(),ep())}function sZ(){return T9(),O9(),wC()}const oZ=/^(data:|([A-Za-z]+:)?\/\/)/,lZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,uZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,JN="file://";function cZ(e,t){return n=>({options:n||{},sanitize:dZ,load:fZ,fileAccess:!1,file:hZ(),http:pZ(e)})}async function fZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function dZ(e,t){t=Pe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=lZ.test(e.replace(uZ,""));(e==null||typeof e!="string"||!o)&&te("Sanitize failure, invalid URI: "+ge(e));const u=oZ.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(JN))||t.mode==="file"||t.mode!=="http"&&!u&&n,r?e=e.slice(JN.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function hZ(e){return gZ}async function gZ(){te("No file system access.")}function pZ(e){return e?async function(t,n){const i=Pe({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?Ie(a[r])?a[r]():a.text():te(a.status+""+a.statusText)}:mZ}async function mZ(){te("No HTTP fetch method available.")}const yZ=e=>e!=null&&e===e,vZ=e=>e==="true"||e==="false"||e===!0||e===!1,bZ=e=>!Number.isNaN(Date.parse(e)),z9=e=>!Number.isNaN(+e)&&!(e instanceof Date),xZ=e=>z9(e)&&Number.isInteger(+e),ew={boolean:hC,integer:Qn,number:Qn,date:gC,string:pC,unknown:ni},Um=[vZ,xZ,z9,bZ],SZ=["boolean","integer","number","date"];function F9(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Um.length,r=Um.map((a,s)=>s+1);for(let a=0,s=0,o,u;a<n;++a)for(u=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&yZ(u)&&!Um[o](u)&&(r[o]=0,++s,s===Um.length))return"string";return SZ[r.reduce((a,s)=>a===0?s:a,0)-1]}function L9(e,t){return t.reduce((n,i)=>(n[i]=F9(e,i),n),{})}function e5(e){const t=function(n,i){const r={delimiter:e};return AC(n,i?Pe(i,r):r)};return t.responseType="text",t}function AC(e,t){return t.header&&(e=t.header.map(ge).join(t.delimiter)+`
`+e),tW(t.delimiter).parse(e+"")}AC.responseType="text";function EZ(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function CC(e,t){const n=t&&t.property?kr(t.property):ni;return be(e)&&!EZ(e)?_Z(n(e),t):n(JSON.parse(e))}CC.responseType="json";function _Z(e,t){return!re(e)&&k8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const wZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function U9(e,t){let n,i,r,a;return e=CC(e,t),t&&t.feature?(n=aW,r=t.feature):t&&t.mesh?(n=oW,r=t.mesh,a=wZ[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):te("Invalid TopoJSON object: "+r),i&&i.features||[i]}U9.responseType="json";const E1={dsv:AC,csv:e5(","),tsv:e5("	"),json:CC,topojson:U9};function MC(e,t){return arguments.length>1?(E1[e]=t,this):_e(E1,e)?E1[e]:null}function B9(e){const t=MC(e);return t&&t.responseType||"text"}function j9(e,t,n,i){t=t||{};const r=MC(t.type||"json");return r||te("Unknown data format type: "+t.type),e=r(e,t),t.parse&&AZ(e,t.parse,n,i),_e(e,"columns")&&delete e.columns,e}function AZ(e,t,n,i){if(!e.length)return;const r=ep();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,u,f,d,h;t==="auto"&&(t=L9(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!ew[v])throw Error("Illegal format pattern: "+y+":"+v);return ew[v]});for(u=0,d=e.length,h=a.length;u<d;++u)for(s=e[u],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const zv=cZ(typeof fetch<"u"&&fetch);function Fv(e){const t=e||ni,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function _1(e,t){try{await t(e)}catch(n){e.error(n)}}const P9=Symbol("vega_id");let CZ=1;function Lv(e){return!!(e&&ke(e))}function ke(e){return e[P9]}function I9(e,t){return e[P9]=t,e}function ct(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:I9(t,CZ++)}function $C(e){return Uv(e,ct({}))}function Uv(e,t){for(const n in e)t[n]=e[n];return t}function q9(e,t){return I9(t,ke(e))}function ic(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function H9(e){return e&&e.constructor===rc}function rc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:rc,insert(o){const u=Se(o),f=u.length;for(let d=0;d<f;++d)e.push(u[d]);return this},remove(o){const u=Ie(o)?i:t,f=Se(o),d=f.length;for(let h=0;h<d;++h)u.push(f[h]);return this},modify(o,u,f){const d={field:u,value:ii(f)};return Ie(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,u){return Ie(o)?r.push({filter:o,field:u}):n.push({tuple:o,field:u}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,u){const f={},d={};let h,p,y,v,b,S;for(h=0,p=u.length;h<p;++h)f[ke(u[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[ke(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],u.forEach(w=>{v(w)&&(f[ke(w)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=ke(b),f[S]?f[S]=1:o.add.push(ct(e[h]));for(h=0,p=u.length;h<p;++h)b=u[h],f[ke(b)]<0&&o.rem.push(b);function _(w,A,C){C?w[A]=C(w):o.encode=A,s||(d[ke(w)]=w)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=f[ke(b)],S>0&&(_(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,u.forEach(w=>{v(w)&&f[ke(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?u.filter(w=>f[ke(w)]>0):u.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const w1="_:mod:_";function Bv(){Object.defineProperty(this,w1,{writable:!0,value:{}})}Bv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[w1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=re(n)?1+n.length:-1),r},modified(e,t){const n=this[w1];if(arguments.length){if(re(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[w1]={},this}};let MZ=0;const $Z="pulse",TZ=new Bv,kZ=1,DZ=2;function wt(e,t,n,i){this.id=++MZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function t5(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}wt.prototype={targets(){return this._targets||(this._targets=Fv(Tp))},set(e){return this.value!==e?(this.value=e,1):0},skip:t5(kZ),modified:t5(DZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Bv,r=this._argops=this._argops||[],a=[];let s,o,u,f;const d=(h,p,y)=>{y instanceof wt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===$Z)Se(o).forEach(h=>{h instanceof wt?h!==this&&(h.targets().add(this),a.push(h)):te("Pulse parameters must be operator instances.")}),this.source=o;else if(re(o))for(i.set(s,-1,Array(u=o.length)),f=0;f<u;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||TZ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function OZ(e,t,n,i){let r=1,a;return e instanceof wt?a=e:e&&e.prototype instanceof wt?a=new e:Ie(e)?a=new wt(null,e):(r=0,a=new wt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function RZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let NZ=0;function jv(e,t,n){this.id=++NZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Lo(e,t,n){return new jv(e,t,n)}jv.prototype={_filter:Dr,_apply:ni,targets(){return this._targets||(this._targets=Fv(Tp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Lo(e);return this.targets().add(t),t},apply(e){const t=Lo(null,e);return this.targets().add(t),t},merge(){const e=Lo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Lo();return this.targets().add(Lo(null,null,cC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Lo(null,null,()=>n=!0)),t.targets().add(Lo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Dr,this._targets=null}};function zZ(e,t,n,i){const r=this,a=Lo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Se(e);const u=o.length;for(let f=0;f<u;++f)o[f].addEventListener(t,s);return a}function FZ(e,t){const n=this.locale();return j9(e,t,n.timeParse,n.utcParse)}function LZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function UZ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:B9(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function BZ(e,t,n){const i=this,r=i._pending||jZ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Dr).insert(a.data||[])),r.done(),a}function jZ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const PZ={skip:!0};function IZ(e,t,n,i,r){return(e instanceof wt?HZ:qZ)(this,e,t,n,i,r),this}function qZ(e,t,n,i,r,a){const s=Pe({},a,PZ);let o,u;Ie(n)||(n=ii(n)),i===void 0?o=f=>e.touch(n(f)):Ie(i)?(u=new wt(null,i,r,!1),o=f=>{u.evaluate(f);const d=n(f),h=u.value;H9(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function HZ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new wt(null,GZ(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function GZ(e,t){return t=Ie(t)?t:ii(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function YZ(e){e.rank=++this._rank}function XZ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&te("Cycle detected in dataflow graph.")}const ny={},$a=1,jo=2,Ts=4,VZ=$a|jo,n5=$a|Ts,sf=$a|jo|Ts,i5=8,Qh=16,r5=32,a5=64;function nl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function oE(e,t){const n=[];return Bo(e,t,i=>n.push(i)),n}function s5(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function Bm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}nl.prototype={StopPropagation:ny,ADD:$a,REM:jo,MOD:Ts,ADD_REM:VZ,ADD_MOD:n5,ALL:sf,REFLOW:i5,SOURCE:Qh,NO_SOURCE:r5,NO_FIELDS:a5,fork(e){return new nl(this.dataflow).init(this,e)},clone(){const e=this.fork(sf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(sf|Qh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new nl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&a5)&&(n.fields=e.fields),t&$a?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&jo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ts?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&r5?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||sf;return t&$a&&this.add.length||t&jo&&this.rem.length||t&Ts&&this.mod.length},reflow(e){if(e)return this.fork(sf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ts,s5(this,$a))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return re(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?re(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&$a&&(n.addF=Bm(n.addF,t)),e&jo&&(n.remF=Bm(n.remF,t)),e&Ts&&(n.modF=Bm(n.modF,t)),e&Qh&&(n.srcF=Bm(n.srcF,t)),n},materialize(e){e=e||sf;const t=this;return e&$a&&t.addF&&(t.add=oE(t.add,t.addF),t.addF=null),e&jo&&t.remF&&(t.rem=oE(t.rem,t.remF),t.remF=null),e&Ts&&t.modF&&(t.mod=oE(t.mod,t.modF),t.modF=null),e&Qh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Qh)return Bo(n.source,n.srcF,i),n;e&$a&&Bo(n.add,n.addF,i),e&jo&&Bo(n.rem,n.remF,i),e&Ts&&Bo(n.mod,n.modF,i);const r=n.source;if(e&i5&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Bo(r,s5(n,n5),i):Bo(r,n.srcF,i))}return n}};function TC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const u in s.fields)o[u]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}pe(TC,nl,{fork(e){const t=new nl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?re(e)?e.some(i=>n[i]):n[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function WZ(e,t,n){const i=this,r=[];if(i._pulse)return G9(i);if(i._pending&&await i._pending,t&&await _1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new nl(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Fv(Tp);let s=0,o,u,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}u=o.run(i._getPulse(o,e)),u.then?u=await u:u.async&&(r.push(u.async),u=ny),u!==ny&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await _1(i,d[h].callback)}return n&&await _1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function QZ(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function ZZ(e,t,n){return this._pulse?G9(this):(this.evaluate(e,t,n),this)}function KZ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function G9(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function JZ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function eK(e,t){const n=e.source,i=this._clock;return n&&re(n)?new TC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||tK(this._pulse,n&&n.pulse)}function tK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ny&&(e.source=t.source),e)}const kC={skip:!1,force:!1};function nK(e,t){const n=t||kC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function iK(e,t,n){const i=n||kC;return(e.set(t)||i.force)&&this.touch(e,i),this}function rK(e,t,n){this.touch(e,n||kC);const i=new nl(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function aK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Y9(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,sK(t,0,e)):i=n,i}}}function Y9(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function sK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,Y9(e,i,t,n)}function Mf(){this.logger(aC()),this.logLevel(iC),this._clock=0,this._rank=0,this._locale=wC();try{this._loader=zv()}catch{}this._touched=Fv(Tp),this._input={},this._pulse=null,this._heap=aK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Zh(e){return function(){return this._log[e].apply(this,arguments)}}Mf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Zh("error"),warn:Zh("warn"),info:Zh("info"),debug:Zh("debug"),logLevel:Zh("level"),cleanThreshold:1e4,add:OZ,connect:RZ,rank:YZ,rerank:XZ,pulse:rK,touch:nK,update:iK,changeset:rc,ingest:LZ,parse:FZ,preload:BZ,request:UZ,events:zZ,on:IZ,evaluate:WZ,run:ZZ,runAsync:QZ,runAfter:KZ,_enqueue:JZ,_getPulse:eK};function J(e,t){wt.call(this,e,null,t)}pe(J,wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const If={};function X9(e){const t=V9(e);return t&&t.Definition||null}function V9(e){return e=e&&e.toLowerCase(),_e(If,e)?If[e]:null}function*W9(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function DC(e,t,n){const i=Float64Array.from(W9(e,n));return i.sort(Ps),t.map(r=>G8(i,r))}function OC(e,t){return DC(e,[.25,.5,.75],t)}function RC(e,t){const n=e.length,i=pW(e,t),r=OC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function Q9(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,u,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(u=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-u));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Rr=Math.random;function oK(e){Rr=e}function Z9(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(W9(e,i)),a=r.length,s=t;let o,u,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,u=0;u<a;++u)o+=r[~~(Rr()*a)];d[f]=o/a}return d.sort(Ps),[G_(d,n/2),G_(d,1-n/2)]}function K9(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,u=i(e[0]),f=u,d=u+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(u+f)/2;s<o;++s)a[s]=f;d=h+t,u=h}f=h}for(f=(u+f)/2;s<o;++s)a[s]=f;return n?lK(a,t+t/4):a}function lK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function uK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function cK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Rr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const J9=Math.sqrt(2*Math.PI),fK=Math.SQRT2;let Kh=NaN;function Pv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(Kh===Kh)n=Kh,Kh=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,Kh=i*a}return e+n*t}function NC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*J9)}function Iv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function qv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*fK*dK(2*e-1)}function dK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function zC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Pv(n,i),pdf:a=>NC(a,n,i),cdf:a=>Iv(a,n,i),icdf:a=>qv(a,n,i)};return r.mean(e).stdev(t)}function FC(e,t){const n=zC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=RC(e)),r):t},sample(){return e[~~(Rr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function LC(e,t){return e=e||0,t=t??1,Math.exp(e+Pv()*t)}function UC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*J9*e)}function BC(e,t,n){return Iv(Math.log(e),t,n)}function jC(e,t,n){return Math.exp(qv(e,t,n))}function e7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>LC(n,i),pdf:a=>UC(a,n,i),cdf:a=>BC(a,n,i),icdf:a=>jC(a,n,i)};return r.mean(e).stdev(t)}function t7(e,t){let n=0,i;function r(s){const o=[];let u=0,f;for(f=0;f<n;++f)u+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=u;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Rr();let o=e[n-1],u=i[0],f=0;for(;f<n-1;u+=i[++f])if(s<u){o=e[f];break}return o.sample()},pdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].pdf(s);return o},cdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function PC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rr()}function IC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function qC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function HC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function n7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>PC(n,i),pdf:a=>IC(a,n,i),cdf:a=>qC(a,n,i),icdf:a=>HC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function GC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Dp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Hv(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,u=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,u+=(d-u)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=u,s[o]-=f;return[a,s,u,f]}function Op(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function $d(e,t,n,i,r){let a=0,s=0;return Op(e,t,n,(o,u)=>{const f=u-r(o),d=u-i;a+=f*f,s+=d*d}),1-a/s}function YC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Op(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Dp(i,r,a,s),f=d=>u[0]+u[1]*d;return{coef:u,predict:f,rSquared:$d(e,t,n,r,f)}}function i7(e,t,n){let i=0,r=0,a=0,s=0,o=0;Op(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Dp(i,r,a,s),f=d=>u[0]+u[1]*Math.log(d);return{coef:u,predict:f,rSquared:$d(e,t,n,r,f)}}function r7(e,t,n){const[i,r,a,s]=Hv(e,t,n);let o=0,u=0,f=0,d=0,h=0,p,y,v;Op(e,t,n,(w,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,u+=(v-u)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,S]=Dp(u/s,o/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:$d(e,t,n,s,_)}}function a7(e,t,n){let i=0,r=0,a=0,s=0,o=0,u=0;Op(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++u,i+=(y-i)/u,r+=(v-r)/u,a+=(y*v-a)/u,s+=(y*y-s)/u,o+=(p-o)/u});const f=Dp(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:$d(e,t,n,o,d)}}function XC(e,t,n){const[i,r,a,s]=Hv(e,t,n),o=i.length;let u=0,f=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,u+=(S-u)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const _=d-u*u,w=u*_-f*f,A=(p*u-h*f)/w,C=(h*_-p*f)/w,M=-A*u,k=T=>(T=T-a,A*T*T+C*T+M+s);return{coef:[M-C*a+A*a*a+s,C-2*A*a,A],predict:k,rSquared:$d(e,t,n,s,k)}}function s7(e,t,n,i){if(i===0)return GC(e,t,n);if(i===1)return YC(e,t,n);if(i===2)return XC(e,t,n);const[r,a,s,o]=Hv(e,t,n),u=r.length,f=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=gK(d),w=A=>{A-=s;let C=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<h;++p)C+=_[p]*Math.pow(A,p);return C};return{coef:hK(h,_,-s,o),predict:w,rSquared:$d(e,t,n,o,w)}}function hK(e,t,n,i){const r=Array(e);let a,s,o,u;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,r[a]+=o,s=1;s<=a;++s)u*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*u;return r[0]+=i,r}function gK(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const o5=2,l5=1e-12;function o7(e,t,n,i){const[r,a,s,o]=Hv(e,t,n,!0),u=r.length,f=Math.max(2,~~(i*u)),d=new Float64Array(u),h=new Float64Array(u),p=new Float64Array(u).fill(1);for(let y=-1;++y<=o5;){const v=[0,f-1];for(let S=0;S<u;++S){const _=r[S],w=v[0],A=v[1],C=_-r[w]>r[A]-_?w:A;let M=0,k=0,T=0,O=0,N=0;const B=1/Math.abs(r[C]-_||1);for(let H=w;H<=A;++H){const j=r[H],F=a[H],R=pK(Math.abs(_-j)*B)*p[H],P=j*R;M+=R,k+=P,T+=F*R,O+=F*P,N+=j*P}const[L,G]=Dp(k/M,T/M,O/M,N/M);d[S]=L+G*_,h[S]=Math.abs(a[S]-d[S]),mK(r,S+1,v)}if(y===o5)break;const b=Y8(h);if(Math.abs(b)<l5)break;for(let S=0,_,w;S<u;++S)_=h[S]/(6*b),p[S]=_>=1?l5:(w=1-_*_)*w}return yK(r,d,s,o)}function pK(e){return(e=1-e*e*e)*e*e}function mK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function yK(e,t,n,i){const r=e.length,a=[];let s=0,o=0,u=[],f;for(;s<r;++s)f=e[s]+n,u[0]===f?u[1]+=(t[s]-u[1])/++o:(o=0,u[1]+=i,u=[f,t[s]],a.push(u));return u[1]+=i,a}const vK=.5*Math.PI/180;function Gv(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,u=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=bK(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=u&&xK(h,b,p,y,v)>vK?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function bK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function xK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function SK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function tw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:SK(e)}function l7(e,t,n){return n||e+(t?"_"+t:"")}const lE=()=>{},EK={init:lE,add:lE,rem:lE,idx:0},tp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Rp=Object.keys(tp).filter(e=>e!=="__count__");function _K(e,t){return(n,i)=>Pe({name:e,aggregate_param:i,out:n||e},EK,t)}[...Rp,"__count__"].forEach(e=>{tp[e]=_K(e,tp[e])});function u7(e,t,n){return tp[e](n,t)}function c7(e,t){return e.idx-t.idx}function wK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=tp[r]())})};return e.forEach(n),Object.values(t).sort(c7)}function AK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function CK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function MK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function $K(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function f7(e,t){const n=t||ni,i=wK(e),r=e.slice().sort(c7);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=AK,a.prototype.add=CK,a.prototype.rem=MK,a.prototype.set=$K,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function VC(e){this._key=e?kr(e):ke,this.reset()}const jn=VC.prototype;jn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};jn.add=function(e){this._add.push(e)};jn.rem=function(e){this._rem.push(e)};jn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,u,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,u=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[u++]=f;return this._rem=[],this._add=a};jn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",_e(n,a)||(n[a]=1,++r);return r};jn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=$8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};jn.argmin=function(e){return this.extent(e)[0]||{}};jn.argmax=function(e){return this.extent(e)[1]||{}};jn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};jn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};jn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=OC(this.values(),e),this._get=e),this._q};jn.q1=function(e){return this.quartile(e)[0]};jn.q2=function(e){return this.quartile(e)[1]};jn.q3=function(e){return this.quartile(e)[2]};jn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Z9(this.values(),1e3,.05,e),this._get=e),this._ci};jn.ci0=function(e){return this.ci(e)[0]};jn.ci1=function(e){return this.ci(e)[1]};function ll(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ll.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};pe(ll,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let u,f,d,h;for(u in o)for(d=o[u].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,u,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;u[d]=h[p],f<r?s(y,u,f):t[y]||e.cell(y,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=Se(Kn(w)),C=A.length;let M=0,k;for(;M<C;++M)i[k=A[M]]||(i[k]=1,t.push(k))}this._dims=Se(e.groupby),this._dnames=this._dims.map(w=>{const A=qt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:tw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],u=e.as||[],f=a.length,d={};let h,p,y,v,b,S,_;for(f!==s.length&&te("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(h=a[_],p=s[_],y=o[_]||null,h==null&&p!=="count"&&te("Null aggregate field specified."),b=qt(h),S=l7(p,b,u[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(u7(p,y,S))}return this._measures=this._measures.map(w=>f7(w,w.field)),Object.create(null)},cellkey:tw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new VC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?q9(t.tuple,a):ct(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let u,f,d,h;if(i)for(f in i)u=i[f],(!r||u.num)&&s.push(u.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)u=n[d],(u.num===0&&r?s:o).push(this.celltuple(u)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const TK=1e-14;function WC(e){J.call(this,null,e)}WC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};pe(WC,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],u=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[u]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Q9(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const u=function(f){let d=Qn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(TK+(d-r)/i))};return u.start=r,u.stop=n.stop,u.step=i,this.value=Bi(u,Kn(t),e.name||"bin_"+qt(t))}});function d7(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:u=>a.push(u),remove:u=>s[i(u)]=++o,size:()=>r.length,data:(u,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&u&&r.sort(u),a.length&&(r=u?R8(u,r,a.sort(u)):r.concat(a),a=[]),r)}}function QC(e){J.call(this,[],e)}QC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};pe(QC,J,{transform(e,t){const n=t.fork(t.ALL),i=d7(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(ic(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function h7(e){wt.call(this,null,kK,e)}pe(h7,wt);function kK(e){return this.value&&!e.modified()?this.value:uC(e.fields,e.orders)}function ZC(e){J.call(this,null,e)}ZC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function DK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}pe(ZC,J,{transform(e,t){const n=h=>p=>{for(var y=DK(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,u=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,u,f;for(o in n)u=i[o],f=n[o]||0,!u&&f?(i[o]=u=ct({}),u[r]=o,u[a]=f,s.add.push(u)):f===0?(u&&s.rem.push(u),n[o]=null,i[o]=null):u[a]!==f&&(u[a]=f,s.mod.push(u));return s.modifies(t)}});function KC(e){J.call(this,null,e)}KC.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};pe(KC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=OK(o,r,a,e.filter||Dr)):n.mod=o,n.source=this.value,n.modifies(i)}});function OK(e,t,n,i){for(var r=[],a={},s=e.length,o=0,u,f;o<s;++o)for(a[t]=f=e[o],u=0;u<s;++u)a[n]=e[u],i(a)&&(r.push(ct(a)),a={},a[t]=f);return r}const u5={kde:FC,mixture:t7,normal:zC,lognormal:e7,uniform:n7},RK="distributions",c5="function",NK="field";function g7(e,t){const n=e[c5];_e(u5,n)||te("Unknown distribution function: "+n);const i=u5[n]();for(const r in e)r===NK?i.data((e.from||t()).map(e[r])):r===RK?i[r](e[r].map(a=>g7(a,t))):typeof i[r]===c5&&i[r](e[r]);return i}function JC(e){J.call(this,null,e)}const p7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],zK={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:p7},{name:"weights",type:"number",array:!0}]};JC.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:p7.concat(zK)},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(JC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=g7(e.distribution,FK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&te("Invalid density method: "+s),!e.extent&&!i.data&&te("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],u=e.extent||Ia(i.data()),f=Gv(s,u,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],ct(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function FK(e){return()=>e.materialize(e.SOURCE).source}function m7(e,t){return e?e.map((n,i)=>t[i]||qt(n)):null}function eM(e,t,n){const i=[],r=h=>h(u);let a,s,o,u,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)u=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(u));return i}const y7="bin";function tM(e){J.call(this,null,e)}tM.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:y7}]};const LK=(e,t)=>kp(Ia(e,t))/30;pe(tM,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=eM(t.source,e.groupby,ni),r=e.smooth||!1,a=e.field,s=e.step||LK(n,a),o=ic((v,b)=>a(v)-a(b)),u=e.as||y7,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of K9(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][u]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(u)}});function v7(e){wt.call(this,null,UK,e),this.modified(!0)}pe(v7,wt);function UK(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Bi(n=>t(n,e),Kn(t),qt(t))}function nM(e){J.call(this,[void 0,void 0],e)}nM.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};pe(nM,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const u=Qn(i(o));u!=null&&(u<a&&(a=u),u>s&&(s=u))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=qt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function iM(e,t){wt.call(this,e),this.parent=t,this.count=0}pe(iM,wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Yv(e){J.call(this,{},e),this._keys=Ed();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}pe(Yv,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=_e(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new iM(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const f=ke(u),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(u))}),t.visit(t.ADD,u=>{const f=i(u);a.set(ke(u),f),o(f).add(u)}),s||t.modified(i.fields)?t.visit(t.MOD,u=>{const f=ke(u),d=a.get(f),h=i(u);d===h?o(h).mod(u):(a.set(f,h),o(d).rem(u),o(h).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{o(a.get(ke(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const f=ke(u),d=a.get(f),h=i(u);d!==h&&(a.set(f,h),o(d).rem(u),o(h).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function b7(e){wt.call(this,null,BK,e)}pe(b7,wt);function BK(e){return this.value&&!e.modified()?this.value:re(e.name)?Se(e.name).map(t=>kr(t)):kr(e.name,e.as)}function rM(e){J.call(this,Ed(),e)}rM.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};pe(rM,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,u=e.expr;let f=!0;t.visit(t.REM,h=>{const p=ke(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{u(h,e)?a.push(h):i.set(ke(h),1)});function d(h){const p=ke(h),y=u(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function aM(e){J.call(this,[],e)}aM.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};pe(aM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=m7(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const u=i.map(v=>v(o)),f=u.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=$C(o),h=0;h<s;++h)p[r[h]]=(y=u[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function sM(e){J.call(this,[],e)}sM.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};pe(sM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(qt),a=e.as||["key","value"],s=a[0],o=a[1],u=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<u;++d)h=$C(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function oM(e){J.call(this,null,e)}oM.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};pe(oM,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function x7(e){J.call(this,[],e)}pe(x7,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,u;if(a>0){for(s=[];--a>=0;)s.push(u=ct(i(e))),r.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const jm={value:"value",median:Y8,mean:SW,min:H_,max:_u},jK=[];function lM(e){J.call(this,[],e)}lM.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function PK(e){var t=e.method||jm.value,n;if(jm[t]==null)te("Unrecognized imputation method: "+t);else return t===jm.value?(n=e.value!==void 0?e.value:0,()=>n):jm[t]}function IK(e){const t=e.field;return n=>n?t(n):NaN}pe(lM,J,{transform(e,t){var n=t.fork(t.ALL),i=PK(e),r=IK(e),a=qt(e.field),s=qt(e.key),o=(e.groupby||[]).map(qt),u=qK(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=u.domain.length,p,y,v,b,S,_,w,A,C,M;for(S=0,A=u.length;S<A;++S)for(p=u[S],v=p.values,y=NaN,w=0;w<h;++w)if(p[w]==null){for(b=u.domain[w],M={_impute:!0},_=0,C=v.length;_<C;++_)M[o[_]]=v[_];M[s]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ct(M))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function qK(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],o={},u={},f,d,h,p,y,v,b,S;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):jK)+"",(h=u[d])||(h=u[d]=[],a.push(h),h.values=f),h[y-1]=S;return a.domain=s,a}function uM(e){ll.call(this,e)}uM.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};pe(uM,ll,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Pe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function cM(e){J.call(this,null,e)}cM.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(cM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=eM(i,e.groupby,e.field),a=(e.groupby||[]).map(qt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=Ia(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=FC(y,s)[o],b=e.counts?y.length:1,S=d||Ia(y);Gv(v,S,h,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[u[0]]=_[0],w[u[1]]=_[1]*b,f.push(ct(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function S7(e){wt.call(this,null,HK,e)}pe(S7,wt);function HK(e){return this.value&&!e.modified()?this.value:dC(e.fields,e.flat)}function E7(e){J.call(this,[],e),this._pending=null}pe(E7,J,{transform(e,t){const n=t.dataflow;return this._pending?uE(this,t,this._pending):GK(e)?t.StopPropagation:e.values?uE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Se(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>uE(this,t,Se(i.data)))}});function GK(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function uE(e,t,n){n.forEach(ct);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function fM(e){J.call(this,{},e)}fM.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};pe(fM,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let u=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&te('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&te('The "as" parameter has too few output field names.'),d=d||r.map(qt),h=function(v){for(var b=0,S=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||te("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),u|=y?t.MOD:0),t.visit(u,h),f.modifies(d)}});function _7(e){wt.call(this,null,YK,e)}pe(_7,wt);function YK(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function w7(e){wt.call(this,null,XK,e)}pe(w7,wt);function XK(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function A7(e){J.call(this,null,e)}pe(A7,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dM(e){ll.call(this,e)}dM.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};pe(dM,ll,{_transform:ll.prototype.transform,transform(e,t){return this._transform(VK(e,t),t)}});function VK(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Kn(n).concat(Kn(i)),s=QK(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>WK(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function WK(e,t,n,i){return Bi(r=>t(r)===e?n(r):NaN,i,e+"")}function QK(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Sd),t?r.slice(0,t):r}function C7(e){Yv.call(this,e)}pe(C7,Yv,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(Kn(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(ct(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function hM(e){J.call(this,null,e)}hM.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};pe(hM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=m7(e.fields,e.as||[]),a=i?(o,u)=>ZK(o,u,i,r):Uv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const u=ke(o);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,o=>{const u=a(o,ct({}));s[ke(o)]=u,n.add.push(u)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[ke(o)]))}),n}});function ZK(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function M7(e){J.call(this,null,e)}pe(M7,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function gM(e){J.call(this,null,e)}gM.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const KK=1e-14;pe(gM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=eM(r,e.groupby,e.field),s=(e.groupby||[]).map(qt),o=[],u=e.step||.01,f=e.probs||er(u/2,1-KK,u),d=f.length;return a.forEach(h=>{const p=DC(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(ct(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function $7(e){J.call(this,null,e)}pe($7,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=$C(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function pM(e){J.call(this,[],e),this.count=0}pM.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};pe(pM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[ke(h)]=1,d),{});let s=this.value,o=this.count,u=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Rr()),p<s.length&&p>=u&&(h=s[p],a[ke(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=ke(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(u=o=s.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),u=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[ke(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||u<0)&&(n.add=s.filter(d=>!a[ke(d)])),this.count=o,this.value=n.source=s,n}});function mM(e){J.call(this,null,e)}mM.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};pe(mM,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=er(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ct(a)}),n.add=t.add.concat(this.value),n}});function T7(e){J.call(this,null,e),this.modified(!0)}pe(T7,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function yM(e){J.call(this,null,e)}const k7=["unit0","unit1"];yM.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:bC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:k7}]};pe(yM,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Md:Cd)(a.unit).offset,o=e.as||k7,u=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[u]=null,i&&(v[f]=null)):(v[u]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<h&&(h=S),_>p&&(p=_))}),a.start=h,a.stop=p,t.modifies(i?o:u)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:x9({extent:e.extent||Ia(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=xC(i),s=this.value||{},o=(n?f9:c9)(a,r);return o.unit=Je(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function D7(e){J.call(this,Ed(),e)}pe(D7,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function O7(e){J.call(this,null,e)}pe(O7,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ic(e.sort)):t.source).map(e.field))}});function JK(e,t,n,i){const r=np[e](t,n);return{init:r.init||Ho,update:function(a,s){s[i]=r.next(a)}}}const np={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=np.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");const n=np.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=eJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function eJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const tJ=Object.keys(np);function R7(e){const t=Se(e.ops),n=Se(e.fields),i=Se(e.params),r=Se(e.aggregate_params),a=Se(e.as),s=this.outputs=[],o=this.windows=[],u={},f={},d=[],h=[];let p=!0;function y(v){Se(Kn(v)).forEach(b=>u[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=qt(S),C=l7(v,A,a[b]);if(y(S),s.push(C),_e(np,v))o.push(JK(v,S,_,C));else{if(S==null&&v!=="count"&&te("Null aggregate field specified."),v==="count"){d.push(C);return}p=!1;let M=f[A];M||(M=f[A]=[],M.field=S,h.push(M)),M.push(u7(v,w,C))}}),(d.length||h.length)&&(this.cell=nJ(h,d,p)),this.inputs=Object.keys(u)}const N7=R7.prototype;N7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};N7.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function nJ(e,t,n){e=e.map(u=>f7(u,u.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new VC;return i.add=function(u){if(i.num+=1,!n){o&&o.add(u);for(let f=0;f<r;++f)a[f].add(a[f].get(u),u)}},i.rem=function(u){if(i.num-=1,!n){o&&o.rem(u);for(let f=0;f<r;++f)a[f].rem(a[f].get(u),u)}},i.set=function(u){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)u[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(u)},i.init=function(){i.num=0,o&&o.reset();for(let u=0;u<r;++u)a[u].init()},i}function vM(e){J.call(this,{},e),this._mlen=0,this._mods=[]}vM.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tJ.concat(Rp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};pe(vM,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=ic(e.sort),r=tw(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new R7(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,u=this._mlen;o<u;++o)iJ(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=d7(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function iJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),u=o.length,f=a?_d(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||ii(-1)};t.init();for(let h=0;h<u;++h)rJ(d,s,h,u),a&&aJ(d,f),t.update(d,o[h])}function rJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function aJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const sJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ll,bin:WC,collect:QC,compare:h7,countpattern:ZC,cross:KC,density:JC,dotbin:tM,expression:v7,extent:nM,facet:Yv,field:b7,filter:rM,flatten:aM,fold:sM,formula:oM,generate:x7,impute:lM,joinaggregate:uM,kde:cM,key:S7,load:E7,lookup:fM,multiextent:_7,multivalues:w7,params:A7,pivot:dM,prefacet:C7,project:hM,proxy:M7,quantile:gM,relay:$7,sample:pM,sequence:mM,sieve:T7,subflow:iM,timeunit:yM,tupleindex:D7,values:O7,window:vM},Symbol.toStringTag,{value:"Module"}));function ft(e){return function(){return e}}const f5=Math.abs,Hn=Math.atan2,eu=Math.cos,oJ=Math.max,cE=Math.min,wa=Math.sin,bu=Math.sqrt,Yn=1e-12,qf=Math.PI,iy=qf/2,z7=2*qf;function lJ(e){return e>1?0:e<-1?qf:Math.acos(e)}function d5(e){return e>=1?iy:e<=-1?-iy:Math.asin(e)}const nw=Math.PI,iw=2*nw,fu=1e-6,uJ=iw-fu;function F7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return F7;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let bM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?F7:cJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,u=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>fu)if(!(Math.abs(h*u-f*d)>fu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=u*u+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((nw-Math.acos((b+p-S)/(2*_*w)))/2),C=A/w,M=A/_;Math.abs(C-1)>fu&&this._append`L${t+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+M*u},${this._y1=n+M*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),u=i*Math.sin(r),f=t+o,d=n+u,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>fu||Math.abs(this._y1-d)>fu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%iw+iw),p>uJ?this._append`A${i},${i},0,1,${h},${t-o},${n-u}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>fu&&this._append`A${i},${i},0,${+(p>=nw)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Xv(){return new bM}Xv.prototype=bM.prototype;function Vv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new bM(t)}function fJ(e){return e.innerRadius}function dJ(e){return e.outerRadius}function hJ(e){return e.startAngle}function gJ(e){return e.endAngle}function pJ(e){return e&&e.padAngle}function mJ(e,t,n,i,r,a,s,o){var u=n-e,f=i-t,d=s-r,h=o-a,p=h*u-d*f;if(!(p*p<Yn))return p=(d*(t-a)-h*(e-r))/p,[e+p*u,t+p*f]}function Pm(e,t,n,i,r,a,s){var o=e-n,u=t-i,f=(s?a:-a)/bu(o*o+u*u),d=f*u,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,C=w*w+A*A,M=r-a,k=p*b-v*y,T=(A<0?-1:1)*bu(oJ(0,M*M*C-k*k)),O=(k*A-w*T)/C,N=(-k*w-A*T)/C,B=(k*A+w*T)/C,L=(-k*w+A*T)/C,G=O-S,H=N-_,j=B-S,F=L-_;return G*G+H*H>j*j+F*F&&(O=B,N=L),{cx:O,cy:N,x01:-d,y01:-h,x11:O*(r/M-1),y11:N*(r/M-1)}}function yJ(){var e=fJ,t=dJ,n=ft(0),i=null,r=hJ,a=gJ,s=pJ,o=null,u=Vv(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-iy,b=a.apply(this,arguments)-iy,S=f5(b-v),_=b>v;if(o||(o=d=u()),y<p&&(h=y,y=p,p=h),!(y>Yn))o.moveTo(0,0);else if(S>z7-Yn)o.moveTo(y*eu(v),y*wa(v)),o.arc(0,0,y,v,b,!_),p>Yn&&(o.moveTo(p*eu(b),p*wa(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,C=v,M=b,k=S,T=S,O=s.apply(this,arguments)/2,N=O>Yn&&(i?+i.apply(this,arguments):bu(p*p+y*y)),B=cE(f5(y-p)/2,+n.apply(this,arguments)),L=B,G=B,H,j;if(N>Yn){var F=d5(N/p*wa(O)),R=d5(N/y*wa(O));(k-=F*2)>Yn?(F*=_?1:-1,C+=F,M-=F):(k=0,C=M=(v+b)/2),(T-=R*2)>Yn?(R*=_?1:-1,w+=R,A-=R):(T=0,w=A=(v+b)/2)}var P=y*eu(w),X=y*wa(w),K=p*eu(M),z=p*wa(M);if(B>Yn){var W=y*eu(A),ne=y*wa(A),se=p*eu(C),ye=p*wa(C),Ee;if(S<qf)if(Ee=mJ(P,X,se,ye,W,ne,K,z)){var Ce=P-Ee[0],Ht=X-Ee[1],nt=W-Ee[0],xe=ne-Ee[1],Ue=1/wa(lJ((Ce*nt+Ht*xe)/(bu(Ce*Ce+Ht*Ht)*bu(nt*nt+xe*xe)))/2),je=bu(Ee[0]*Ee[0]+Ee[1]*Ee[1]);L=cE(B,(p-je)/(Ue-1)),G=cE(B,(y-je)/(Ue+1))}else L=G=0}T>Yn?G>Yn?(H=Pm(se,ye,P,X,y,G,_),j=Pm(W,ne,K,z,y,G,_),o.moveTo(H.cx+H.x01,H.cy+H.y01),G<B?o.arc(H.cx,H.cy,G,Hn(H.y01,H.x01),Hn(j.y01,j.x01),!_):(o.arc(H.cx,H.cy,G,Hn(H.y01,H.x01),Hn(H.y11,H.x11),!_),o.arc(0,0,y,Hn(H.cy+H.y11,H.cx+H.x11),Hn(j.cy+j.y11,j.cx+j.x11),!_),o.arc(j.cx,j.cy,G,Hn(j.y11,j.x11),Hn(j.y01,j.x01),!_))):(o.moveTo(P,X),o.arc(0,0,y,w,A,!_)):o.moveTo(P,X),!(p>Yn)||!(k>Yn)?o.lineTo(K,z):L>Yn?(H=Pm(K,z,W,ne,p,-L,_),j=Pm(P,X,se,ye,p,-L,_),o.lineTo(H.cx+H.x01,H.cy+H.y01),L<B?o.arc(H.cx,H.cy,L,Hn(H.y01,H.x01),Hn(j.y01,j.x01),!_):(o.arc(H.cx,H.cy,L,Hn(H.y01,H.x01),Hn(H.y11,H.x11),!_),o.arc(0,0,p,Hn(H.cy+H.y11,H.cx+H.x11),Hn(j.cy+j.y11,j.cx+j.x11),_),o.arc(j.cx,j.cy,L,Hn(j.y11,j.x11),Hn(j.y01,j.x01),!_))):o.arc(0,0,p,M,C,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-qf/2;return[eu(h)*d,wa(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ft(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ft(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ft(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ft(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ft(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ft(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ft(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function L7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function U7(e){this._context=e}U7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xM(e){return new U7(e)}function B7(e){return e[0]}function j7(e){return e[1]}function P7(e,t){var n=ft(!0),i=null,r=xM,a=null,s=Vv(o);e=typeof e=="function"?e:e===void 0?B7:ft(e),t=typeof t=="function"?t:t===void 0?j7:ft(t);function o(u){var f,d=(u=L7(u)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=u[f],f,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,u),+t(h,f,u));if(y)return a=null,y+""||null}return o.x=function(u){return arguments.length?(e=typeof u=="function"?u:ft(+u),o):e},o.y=function(u){return arguments.length?(t=typeof u=="function"?u:ft(+u),o):t},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ft(!!u),o):n},o.curve=function(u){return arguments.length?(r=u,i!=null&&(a=r(i)),o):r},o.context=function(u){return arguments.length?(u==null?i=a=null:a=r(i=u),o):i},o}function I7(e,t,n){var i=null,r=ft(!0),a=null,s=xM,o=null,u=Vv(f);e=typeof e=="function"?e:e===void 0?B7:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?j7:ft(+n);function f(h){var p,y,v,b=(h=L7(h)).length,S,_=!1,w,A=new Array(b),C=new Array(b);for(a==null&&(o=s(w=u())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],C[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(S,p,h),C[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):C[p]))}if(w)return o=null,w+""||null}function d(){return P7().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ft(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ft(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ft(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const vJ={draw(e,t){const n=bu(t/qf);e.moveTo(n,0),e.arc(0,0,n,0,z7)}};function bJ(e,t){let n=null,i=Vv(r);e=typeof e=="function"?e:ft(e||vJ),t=typeof t=="function"?t:ft(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ft(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ft(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function ul(){}function ry(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Wv(e){this._context=e}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ry(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xJ(e){return new Wv(e)}function q7(e){this._context=e}q7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SJ(e){return new q7(e)}function H7(e){this._context=e}H7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ry(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EJ(e){return new H7(e)}function G7(e,t){this._basis=new Wv(e),this._beta=t}G7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,u;++o<=n;)u=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+u*a),this._beta*t[o]+(1-this._beta)*(r+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const _J=function e(t){function n(i){return t===1?new Wv(i):new G7(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function ay(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function SM(e,t){this._context=e,this._k=(1-t)/6}SM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ay(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wJ=function e(t){function n(i){return new SM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function EM(e,t){this._context=e,this._k=(1-t)/6}EM.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const AJ=function e(t){function n(i){return new EM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function _M(e,t){this._context=e,this._k=(1-t)/6}_M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ay(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CJ=function e(t){function n(i){return new _M(i,t)}return n.tension=function(i){return e(+i)},n}(0);function wM(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Yn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Yn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function Y7(e,t){this._context=e,this._alpha=t}Y7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:wM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MJ=function e(t){function n(i){return t?new Y7(i,t):new SM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function X7(e,t){this._context=e,this._alpha=t}X7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:wM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $J=function e(t){function n(i){return t?new X7(i,t):new EM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function V7(e,t){this._context=e,this._alpha=t}V7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const TJ=function e(t){function n(i){return t?new V7(i,t):new _M(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function W7(e){this._context=e}W7.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function kJ(e){return new W7(e)}function h5(e){return e<0?-1:1}function g5(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(h5(a)+h5(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function p5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function sy(e){this._context=e}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fE(this,this._t0,p5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fE(this,p5(this,n=g5(this,e,t)),n);break;default:fE(this,this._t0,n=g5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Q7(e){this._context=new Z7(e)}(Q7.prototype=Object.create(sy.prototype)).point=function(e,t){sy.prototype.point.call(this,t,e)};function Z7(e){this._context=e}Z7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function DJ(e){return new sy(e)}function OJ(e){return new Q7(e)}function K7(e){this._context=e}K7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=m5(e),r=m5(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function m5(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function RJ(e){return new K7(e)}function Qv(e,t){this._context=e,this._t=t}Qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function NJ(e){return new Qv(e,.5)}function zJ(e){return new Qv(e,0)}function FJ(e){return new Qv(e,1)}function il(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const LJ=()=>typeof Image<"u"?Image:null;function Ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function El(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rw=Symbol("implicit");function AM(){var e=new RN,t=[],n=[],i=rw;function r(a){let s=e.get(a);if(s===void 0){if(i!==rw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new RN;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return AM(t,n).unknown(i)},Ka.apply(r,arguments),r}function Td(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Np(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _l(){}var Nu=.7,Hf=1/Nu,$f="\\s*([+-]?\\d+)\\s*",ip="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UJ=/^#([0-9a-f]{3,8})$/,BJ=new RegExp(`^rgb\\(${$f},${$f},${$f}\\)$`),jJ=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),PJ=new RegExp(`^rgba\\(${$f},${$f},${$f},${ip}\\)$`),IJ=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${ip}\\)$`),qJ=new RegExp(`^hsl\\(${ip},${Fa},${Fa}\\)$`),HJ=new RegExp(`^hsla\\(${ip},${Fa},${Fa},${ip}\\)$`),y5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Td(_l,rp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:v5,formatHex:v5,formatHex8:GJ,formatHsl:YJ,formatRgb:b5,toString:b5});function v5(){return this.rgb().formatHex()}function GJ(){return this.rgb().formatHex8()}function YJ(){return J7(this).formatHsl()}function b5(){return this.rgb().formatRgb()}function rp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?x5(t):n===3?new xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Im(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Im(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BJ.exec(e))?new xn(t[1],t[2],t[3],1):(t=jJ.exec(e))?new xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=PJ.exec(e))?Im(t[1],t[2],t[3],t[4]):(t=IJ.exec(e))?Im(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qJ.exec(e))?_5(t[1],t[2]/100,t[3]/100,1):(t=HJ.exec(e))?_5(t[1],t[2]/100,t[3]/100,t[4]):y5.hasOwnProperty(e)?x5(y5[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function x5(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function Im(e,t,n,i){return i<=0&&(e=t=n=NaN),new xn(e,t,n,i)}function CM(e){return e instanceof _l||(e=rp(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function cl(e,t,n,i){return arguments.length===1?CM(e):new xn(e,t,n,i??1)}function xn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Td(xn,cl,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xn(wu(this.r),wu(this.g),wu(this.b),oy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S5,formatHex:S5,formatHex8:XJ,formatRgb:E5,toString:E5}));function S5(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}`}function XJ(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}${xu((isNaN(this.opacity)?1:this.opacity)*255)}`}function E5(){const e=oy(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function oy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function _5(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qr(e,t,n,i)}function J7(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);if(e instanceof _l||(e=rp(e)),!e)return new Qr;if(e instanceof Qr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,u=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=u<.5?a+r:2-a-r,s*=60):o=u>0&&u<1?0:s,new Qr(s,o,u,e.opacity)}function ly(e,t,n,i){return arguments.length===1?J7(e):new Qr(e,t,n,i??1)}function Qr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Qr,ly,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new xn(dE(e>=240?e-240:e+120,r,i),dE(e,r,i),dE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Qr(w5(this.h),qm(this.s),qm(this.l),oy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oy(this.opacity);return`${e===1?"hsl(":"hsla("}${w5(this.h)}, ${qm(this.s)*100}%, ${qm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function w5(e){return e=(e||0)%360,e<0?e+360:e}function qm(e){return Math.max(0,Math.min(1,e||0))}function dE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const eL=Math.PI/180,tL=180/Math.PI,uy=18,nL=.96422,iL=1,rL=.82521,aL=4/29,Tf=6/29,sL=3*Tf*Tf,VJ=Tf*Tf*Tf;function oL(e){if(e instanceof La)return new La(e.l,e.a,e.b,e.opacity);if(e instanceof Us)return lL(e);e instanceof xn||(e=CM(e));var t=mE(e.r),n=mE(e.g),i=mE(e.b),r=hE((.2225045*t+.7168786*n+.0606169*i)/iL),a,s;return t===n&&n===i?a=s=r:(a=hE((.4360747*t+.3850649*n+.1430804*i)/nL),s=hE((.0139322*t+.0971045*n+.7141733*i)/rL)),new La(116*r-16,500*(a-r),200*(r-s),e.opacity)}function cy(e,t,n,i){return arguments.length===1?oL(e):new La(e,t,n,i??1)}function La(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Td(La,cy,Np(_l,{brighter(e){return new La(this.l+uy*(e??1),this.a,this.b,this.opacity)},darker(e){return new La(this.l-uy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=nL*gE(t),e=iL*gE(e),n=rL*gE(n),new xn(pE(3.1338561*t-1.6168667*e-.4906146*n),pE(-.9787684*t+1.9161415*e+.033454*n),pE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function hE(e){return e>VJ?Math.pow(e,1/3):e/sL+aL}function gE(e){return e>Tf?e*e*e:sL*(e-aL)}function pE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function WJ(e){if(e instanceof Us)return new Us(e.h,e.c,e.l,e.opacity);if(e instanceof La||(e=oL(e)),e.a===0&&e.b===0)return new Us(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*tL;return new Us(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function fy(e,t,n,i){return arguments.length===1?WJ(e):new Us(e,t,n,i??1)}function Us(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function lL(e){if(isNaN(e.h))return new La(e.l,0,0,e.opacity);var t=e.h*eL;return new La(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Td(Us,fy,Np(_l,{brighter(e){return new Us(this.h,this.c,this.l+uy*(e??1),this.opacity)},darker(e){return new Us(this.h,this.c,this.l-uy*(e??1),this.opacity)},rgb(){return lL(this).rgb()}}));var uL=-.14861,MM=1.78277,$M=-.29227,Zv=-.90649,ap=1.97294,A5=ap*Zv,C5=ap*MM,M5=MM*$M-Zv*uL;function QJ(e){if(e instanceof Au)return new Au(e.h,e.s,e.l,e.opacity);e instanceof xn||(e=CM(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(M5*i+A5*t-C5*n)/(M5+A5-C5),a=i-r,s=(ap*(n-r)-$M*a)/Zv,o=Math.sqrt(s*s+a*a)/(ap*r*(1-r)),u=o?Math.atan2(s,a)*tL-120:NaN;return new Au(u<0?u+360:u,o,r,e.opacity)}function aw(e,t,n,i){return arguments.length===1?QJ(e):new Au(e,t,n,i??1)}function Au(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Au,aw,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Au(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nu:Math.pow(Nu,e),new Au(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*eL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new xn(255*(t+n*(uL*i+MM*r)),255*(t+n*($M*i+Zv*r)),255*(t+n*(ap*i)),this.opacity)}}));function cL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function fL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return cL((n-i/t)*t,s,r,a,o)}}function dL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return cL((n-i/t)*t,r,a,s,o)}}const Kv=e=>()=>e;function hL(e,t){return function(n){return e+n*t}}function ZJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Jv(e,t){var n=t-e;return n?hL(e,n>180||n<-180?n-360*Math.round(n/360):n):Kv(isNaN(e)?t:e)}function KJ(e){return(e=+e)==1?Sn:function(t,n){return n-t?ZJ(t,n,e):Kv(isNaN(t)?n:t)}}function Sn(e,t){var n=t-e;return n?hL(e,n):Kv(isNaN(e)?t:e)}const sw=function e(t){var n=KJ(t);function i(r,a){var s=n((r=cl(r)).r,(a=cl(a)).r),o=n(r.g,a.g),u=n(r.b,a.b),f=Sn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=u(d),r.opacity=f(d),r+""}}return i.gamma=e,i}(1);function gL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=cl(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=a(u),o+""}}}var JJ=gL(fL),eee=gL(dL);function TM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function pL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tee(e,t){return(pL(t)?TM:mL)(e,t)}function mL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=wl(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function yL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=wl(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var ow=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yE=new RegExp(ow.source,"g");function nee(e){return function(){return e}}function iee(e){return function(t){return e(t)+""}}function bL(e,t){var n=ow.lastIndex=yE.lastIndex=0,i,r,a,s=-1,o=[],u=[];for(e=e+"",t=t+"";(i=ow.exec(e))&&(r=yE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:Vr(i,r)})),n=yE.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?iee(u[0].x):nee(t):(t=u.length,function(f){for(var d=0,h;d<t;++d)o[(h=u[d]).i]=h.x(f);return o.join("")})}function wl(e,t){var n=typeof t,i;return t==null||n==="boolean"?Kv(t):(n==="number"?Vr:n==="string"?(i=rp(t))?(t=i,sw):bL:t instanceof rp?sw:t instanceof Date?yL:pL(t)?TM:Array.isArray(t)?mL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vL:Vr)(e,t)}function ree(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function aee(e,t){var n=Jv(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function zp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var $5=180/Math.PI,lw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xL(e,t,n,i,r,a){var s,o,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*$5,skewX:Math.atan(u)*$5,scaleX:s,scaleY:o}}var Hm;function see(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lw:xL(t.a,t.b,t.c,t.d,t.e,t.f)}function oee(e){return e==null||(Hm||(Hm=document.createElementNS("http://www.w3.org/2000/svg","g")),Hm.setAttribute("transform",e),!(e=Hm.transform.baseVal.consolidate()))?lw:(e=e.matrix,xL(e.a,e.b,e.c,e.d,e.e,e.f))}function SL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Vr(f,h)},{i:b-2,x:Vr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Vr(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Vr(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function u(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Vr(f,h)},{i:b-2,x:Vr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),u(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var lee=SL(see,"px, ","px)","deg)"),uee=SL(oee,", ",")",")"),cee=1e-12;function T5(e){return((e=Math.exp(e))+1/e)/2}function fee(e){return((e=Math.exp(e))-1/e)/2}function dee(e){return((e=Math.exp(2*e))-1)/(e+1)}const hee=function e(t,n,i){function r(a,s){var o=a[0],u=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-u,b=y*y+v*v,S,_;if(b<cee)_=Math.log(p/f)/t,S=function(T){return[o+T*y,u+T*v,f*Math.exp(t*T*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),C=(p*p-f*f-i*b)/(2*p*n*w),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(C*C+1)-C);_=(k-M)/t,S=function(T){var O=T*_,N=T5(M),B=f/(n*w)*(N*dee(t*O+M)-fee(M));return[o+B*y,u+B*v,f*N/T5(t*O+M)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,u=o*o;return e(s,o,u)},r}(Math.SQRT2,2,4);function EL(e){return function(t,n){var i=e((t=ly(t)).h,(n=ly(n)).h),r=Sn(t.s,n.s),a=Sn(t.l,n.l),s=Sn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const gee=EL(Jv);var pee=EL(Sn);function mee(e,t){var n=Sn((e=cy(e)).l,(t=cy(t)).l),i=Sn(e.a,t.a),r=Sn(e.b,t.b),a=Sn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function _L(e){return function(t,n){var i=e((t=fy(t)).h,(n=fy(n)).h),r=Sn(t.c,n.c),a=Sn(t.l,n.l),s=Sn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const yee=_L(Jv);var vee=_L(Sn);function wL(e){return function t(n){n=+n;function i(r,a){var s=e((r=aw(r)).h,(a=aw(a)).h),o=Sn(r.s,a.s),u=Sn(r.l,a.l),f=Sn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=u(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i}(1)}const bee=wL(Jv);var xee=wL(Sn);function kM(e,t){t===void 0&&(t=e,e=wl);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function See(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Eee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:wl,interpolateArray:tee,interpolateBasis:fL,interpolateBasisClosed:dL,interpolateCubehelix:bee,interpolateCubehelixLong:xee,interpolateDate:yL,interpolateDiscrete:ree,interpolateHcl:yee,interpolateHclLong:vee,interpolateHsl:gee,interpolateHslLong:pee,interpolateHue:aee,interpolateLab:mee,interpolateNumber:Vr,interpolateNumberArray:TM,interpolateObject:vL,interpolateRgb:sw,interpolateRgbBasis:JJ,interpolateRgbBasisClosed:eee,interpolateRound:zp,interpolateString:bL,interpolateTransformCss:lee,interpolateTransformSvg:uee,interpolateZoom:hee,piecewise:kM,quantize:See},Symbol.toStringTag,{value:"Module"}));function _ee(e){return function(){return e}}function uw(e){return+e}var k5=[0,1];function Di(e){return e}function cw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_ee(isNaN(t)?NaN:.5)}function wee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Aee(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=cw(r,i),a=n(s,a)):(i=cw(i,r),a=n(a,s)),function(o){return a(i(o))}}function Cee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=cw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var u=sl(e,o,1,i)-1;return a[u](r[u](o))}}function Fp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function eb(){var e=k5,t=k5,n=wl,i,r,a,s=Di,o,u,f;function d(){var p=Math.min(e.length,t.length);return s!==Di&&(s=wee(e[0],e[p-1])),o=p>2?Cee:Aee,u=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(u||(u=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),Vr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,uw),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=zp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Di,d()):s!==Di},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function AL(){return eb()(Di,Di)}function CL(e,t,n,i){var r=ol(e,t,n),a;switch(i=Ru(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=K8(r,s))&&(i.precision=a),yC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=J8(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Z8(r))&&(i.precision=a-(i.type==="%")*2);break}}return Tv(i)}function ac(e){var t=e.domain;return e.ticks=function(n){var i=t();return I_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return CL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],u,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=q_(s,o,n),f===u)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;u=f}return e},e}function ML(){var e=AL();return e.copy=function(){return Fp(e,ML())},Ka.apply(e,arguments),ac(e)}function $L(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,uw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return $L(e).unknown(t)},e=arguments.length?Array.from(e,uw):[0,1],ac(n)}function TL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function D5(e){return Math.log(e)}function O5(e){return Math.exp(e)}function Mee(e){return-Math.log(-e)}function $ee(e){return-Math.exp(-e)}function Tee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kee(e){return e===10?Tee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Dee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function R5(e){return(t,n)=>-e(-t,n)}function DM(e){const t=e(D5,O5),n=t.domain;let i=10,r,a;function s(){return r=Dee(i),a=kee(i),n()[0]<0?(r=R5(r),a=R5(a),e(Mee,$ee)):e(D5,O5),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const u=n();let f=u[0],d=u[u.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=o==null?10:+o;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=I_(f,d,S))}else _=I_(p,y,Math.min(y-p,S)).map(a);return h?_.reverse():_},t.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=Ru(u)).precision==null&&(u.trim=!0),u=Tv(u)),o===1/0)return u;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?u(d):""}},t.nice=()=>n(TL(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function kL(){const e=DM(eb()).domain([1,10]);return e.copy=()=>Fp(e,kL()).base(e.base()),Ka.apply(e,arguments),e}function N5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function z5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OM(e){var t=1,n=e(N5(t),z5(t));return n.constant=function(i){return arguments.length?e(N5(t=+i),z5(t)):t},ac(n)}function DL(){var e=OM(eb());return e.copy=function(){return Fp(e,DL()).constant(e.constant())},Ka.apply(e,arguments)}function F5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Oee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ree(e){return e<0?-e*e:e*e}function RM(e){var t=e(Di,Di),n=1;function i(){return n===1?e(Di,Di):n===.5?e(Oee,Ree):e(F5(n),F5(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},ac(t)}function NM(){var e=RM(eb());return e.copy=function(){return Fp(e,NM()).exponent(e.exponent())},Ka.apply(e,arguments),e}function Nee(){return NM.apply(null,arguments).exponent(.5)}function OL(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=G8(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[sl(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ps),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return OL().domain(e).range(t).unknown(i)},Ka.apply(a,arguments)}function RL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(u){return u!=null&&u<=u?r[sl(i,u,0,n)]:a}function o(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,o()):[e,t]},s.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,o()):r.slice()},s.invertExtent=function(u){var f=r.indexOf(u);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(u){return arguments.length&&(a=u),s},s.thresholds=function(){return i.slice()},s.copy=function(){return RL().domain([e,t]).range(r).unknown(a)},Ka.apply(ac(s),arguments)}function NL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[sl(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return NL().domain(e).range(t).unknown(n)},Ka.apply(r,arguments)}function zee(e){return new Date(e)}function Fee(e){return e instanceof Date?+e:+new Date(+e)}function zM(e,t,n,i,r,a,s,o,u,f){var d=AL(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),C=f("%Y");function M(k){return(u(k)<k?y:o(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:C)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Fee)):p().map(zee)},d.ticks=function(k){var T=p();return e(T[0],T[T.length-1],k??10)},d.tickFormat=function(k,T){return T==null?M:f(T)},d.nice=function(k){var T=p();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?p(TL(T,k)):d},d.copy=function(){return Fp(d,zM(e,t,n,i,r,a,s,o,u,f))},d}function Lee(){return Ka.apply(zM(qW,HW,qa,Kg,wd,Is,Ov,kv,Ls,EC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uee(){return Ka.apply(zM(PW,IW,Ha,Jg,Ad,tl,Rv,Dv,Ls,_C).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tb(){var e=0,t=1,n,i,r,a,s=Di,o=!1,u;function f(h){return h==null||isNaN(h=+h)?u:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(wl),f.rangeRound=d(zp),f.unknown=function(h){return arguments.length?(u=h,f):u},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Al(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FM(){var e=ac(tb()(Di));return e.copy=function(){return Al(e,FM())},El.apply(e,arguments)}function zL(){var e=DM(tb()).domain([1,10]);return e.copy=function(){return Al(e,zL()).base(e.base())},El.apply(e,arguments)}function FL(){var e=OM(tb());return e.copy=function(){return Al(e,FL()).constant(e.constant())},El.apply(e,arguments)}function LM(){var e=RM(tb());return e.copy=function(){return Al(e,LM()).exponent(e.exponent())},El.apply(e,arguments)}function Bee(){return LM.apply(null,arguments).exponent(.5)}function nb(){var e=0,t=.5,n=1,i=1,r,a,s,o,u,f=Di,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:u),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=kM(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(wl),y.rangeRound=v(zp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function LL(){var e=ac(nb()(Di));return e.copy=function(){return Al(e,LL())},El.apply(e,arguments)}function UL(){var e=DM(nb()).domain([.1,1,10]);return e.copy=function(){return Al(e,UL()).base(e.base())},El.apply(e,arguments)}function BL(){var e=OM(nb());return e.copy=function(){return Al(e,BL()).constant(e.constant())},El.apply(e,arguments)}function UM(){var e=RM(nb());return e.copy=function(){return Al(e,UM()).exponent(e.exponent())},El.apply(e,arguments)}function jee(){return UM.apply(null,arguments).exponent(.5)}function Ja(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Pee=Ja("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Iee=Ja("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),qee=Ja("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Hee=Ja("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Gee=Ja("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Yee=Ja("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Xee=Ja("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Vee=Ja("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Wee=Ja("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Qee=Ja("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function BM(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Zee="identity",Gf="linear",Qs="log",Lp="pow",Up="sqrt",ib="symlog",zu="time",Fu="utc",Ua="sequential",kd="diverging",Yf="quantile",rb="quantize",ab="threshold",jM="ordinal",fw="point",jL="band",PM="bin-ordinal",hn="continuous",Bp="discrete",jp="discretizing",Lr="interpolating",IM="temporal";function Kee(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Jee(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,u,f;for(r<i&&(o=i,i=r,r=o),u=0,f=n.length;u<f;++u)n[u]>=i&&n[u]<=r&&(a<0&&(a=u),s=u);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function qM(){const e=AM().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,u=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=BM(h,o,u);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=er(h).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),o=u,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,sl(y,b)-1),w=b===S?_:sl(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return qM().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(u).align(f)},d()}function PL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return PL(t())},e}function ete(){return PL(qM().paddingInner(1))}var tte=Array.prototype.map;function nte(e){return tte.call(e,Qn)}const ite=Array.prototype.slice;function IL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(sl(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=nte(i),n):e.slice()},n.range=function(i){return arguments.length?(t=ite.call(i),n):t.slice()},n.tickFormat=function(i,r){return CL(e[0],Je(e),i??10,r)},n.copy=function(){return IL().domain(n.domain()).range(n.range())},n}const dy=new Map,qL=Symbol("vega_scale");function HL(e){return e[qL]=!0,e}function L5(e){return e&&e[qL]===!0}function rte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Kee(a):a.invertExtent?Jee(a):void 0),a.type=e,HL(a)};return i.metadata=ra(Se(n)),i}function lt(e,t,n){return arguments.length>1?(dy.set(e,rte(e,t,n)),this):GL(e)?dy.get(e):void 0}lt(Zee,$L);lt(Gf,ML,hn);lt(Qs,kL,[hn,Qs]);lt(Lp,NM,hn);lt(Up,Nee,hn);lt(ib,DL,hn);lt(zu,Lee,[hn,IM]);lt(Fu,Uee,[hn,IM]);lt(Ua,FM,[hn,Lr]);lt(`${Ua}-${Gf}`,FM,[hn,Lr]);lt(`${Ua}-${Qs}`,zL,[hn,Lr,Qs]);lt(`${Ua}-${Lp}`,LM,[hn,Lr]);lt(`${Ua}-${Up}`,Bee,[hn,Lr]);lt(`${Ua}-${ib}`,FL,[hn,Lr]);lt(`${kd}-${Gf}`,LL,[hn,Lr]);lt(`${kd}-${Qs}`,UL,[hn,Lr,Qs]);lt(`${kd}-${Lp}`,UM,[hn,Lr]);lt(`${kd}-${Up}`,jee,[hn,Lr]);lt(`${kd}-${ib}`,BL,[hn,Lr]);lt(Yf,OL,[jp,Yf]);lt(rb,RL,jp);lt(ab,NL,jp);lt(PM,IL,[Bp,jp]);lt(jM,AM,Bp);lt(jL,qM,Bp);lt(fw,ete,Bp);function GL(e){return dy.has(e)}function sc(e,t){const n=dy.get(e);return n&&n.metadata[t]}function HM(e){return sc(e,hn)}function Xf(e){return sc(e,Bp)}function dw(e){return sc(e,jp)}function YL(e){return sc(e,Qs)}function ate(e){return sc(e,IM)}function XL(e){return sc(e,Lr)}function VL(e){return sc(e,Yf)}const ste=["clamp","base","constant","exponent"];function WL(e,t){const n=t[0],i=Je(t)-n;return function(r){return e(n+r*i)}}function sb(e,t,n){return kM(GM(t||"rgb",n),e)}function QL(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function ZL(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ii(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=lt(a)().domain([t,n]).range([0,1]),ste.forEach(o=>e[o]?s[o](e[o]()):0),s)}function GM(e,t){const n=Eee[ote(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function ote(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const lte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ute={accent:Iee,category10:Pee,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:qee,observable10:Hee,paired:Gee,pastel1:Yee,pastel2:Xee,set1:Vee,set2:Wee,set3:Qee,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function KL(e){if(re(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function JL(e,t){for(const n in e)YM(n,t(e[n]))}const U5={};JL(ute,KL);JL(lte,e=>sb(KL(e)));function YM(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(U5[e]=t,this):U5[e]}const A1="symbol",cte="discrete",fte="gradient",dte=e=>re(e)?e.map(t=>String(t)):String(e),hte=(e,t)=>e[1]-t[1],gte=(e,t)=>t[1]-e[1];function XM(e,t,n){let i;return st(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(kp(e.domain())/n||1)+1))),be(t)&&(i=t.step,t=t.interval),ve(t)&&(t=e.type===zu?Cd(t):e.type==Fu?Md(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function eU(e,t,n){let i=e.range(),r=i[0],a=Je(i),s=hte;if(r>a&&(i=a,a=r,r=i,s=gte),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Je(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,f)=>!(f%2));t.length<3&&(t=o)}return t}function VM(e,t){return e.bins?eU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function tU(e,t,n,i,r,a){const s=t.type;let o=dte;if(s===zu||r===zu)o=e.timeFormat(i);else if(s===Fu||r===Fu)o=e.utcFormat(i);else if(YL(s)){const u=e.formatFloat(i);if(a||t.bins)o=u;else{const f=nU(t,n,!1);o=d=>f(d)?u(d):""}}else if(t.tickFormat){const u=t.domain();o=e.formatSpan(u[0],u[u.length-1],n,i)}else i&&(o=e.format(i));return o}function nU(e,t,n){const i=VM(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=u=>{let f=u/Math.pow(r,Math.round(Math.log(u)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const hw={[Yf]:"quantiles",[rb]:"thresholds",[ab]:"domain"},iU={[Yf]:"quantiles",[rb]:"domain"};function rU(e,t){return e.bins?yte(e.bins):e.type===Qs?nU(e,t,!0):hw[e.type]?mte(e[hw[e.type]]()):VM(e,t)}function pte(e,t,n){const i=t[iU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function mte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function yte(e){const t=e.slice(0,-1);return t.max=Je(e),t}const vte=e=>hw[e.type]||e.bins;function aU(e,t,n,i,r,a,s){const o=iU[t.type]&&a!==zu&&a!==Fu?pte(e,t,r):tU(e,t,n,r,a,s);return i===A1&&vte(t)?bte(o):i===cte?xte(o):Ste(o)}const bte=e=>(t,n,i)=>{const r=B5(i[n+1],B5(i.max,1/0)),a=j5(t,e),s=j5(r,e);return a&&s?a+" – "+s:s?"< "+s:"≥ "+a},B5=(e,t)=>e??t,xte=e=>(t,n)=>n?e(t):null,Ste=e=>t=>e(t),j5=(e,t)=>Number.isFinite(e)?t(e):null;function Ete(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Je(t),a=r-i;if(e.type===ab){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function _te(e,t,n,i){const r=i||t.type;return ve(n)&&ate(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===zu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Fu?e.utcFormat("%A, %d %B %Y, %X UTC"):aU(e,t,5,null,n,i,!0)}function sU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=_te(e,t,n.format,n.formatType);if(dw(t.type)){const a=rU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Xf(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Je(a))}`}}let oU=0;function wte(){oU=0}const hy="p_";function WM(e){return e&&e.gradient}function lU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?hy:"";return r||(r=e.id="gradient_"+oU++,i==="radial"?(e.x1=Aa(e.x1,.5),e.y1=Aa(e.y1,.5),e.r1=Aa(e.r1,0),e.x2=Aa(e.x2,.5),e.y2=Aa(e.y2,.5),e.r2=Aa(e.r2,.5),a=hy):(e.x1=Aa(e.x1,0),e.y1=Aa(e.y1,0),e.x2=Aa(e.x2,1),e.y2=Aa(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Aa(e,t){return e??t}function uU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const P5={basis:{curve:xJ},"basis-closed":{curve:SJ},"basis-open":{curve:EJ},bundle:{curve:_J,tension:"beta",value:.85},cardinal:{curve:wJ,tension:"tension",value:0},"cardinal-open":{curve:CJ,tension:"tension",value:0},"cardinal-closed":{curve:AJ,tension:"tension",value:0},"catmull-rom":{curve:MJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$J,tension:"alpha",value:.5},"catmull-rom-open":{curve:TJ,tension:"alpha",value:.5},linear:{curve:xM},"linear-closed":{curve:kJ},monotone:{horizontal:OJ,vertical:DJ},natural:{curve:RJ},step:{curve:NJ},"step-after":{curve:FJ},"step-before":{curve:zJ}};function QM(e,t,n){var i=_e(P5,e)&&P5[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Ate={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Cte=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Mte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,$te=/^((\s+,?\s*)|(,\s*))/,Tte=/^[01]/;function Vf(e){const t=[];return(e.match(Cte)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=Ate[a],o=kte(a,s,i.slice(1).trim()),u=o.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),u!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<u;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function kte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Tte:Mte,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const u=n.slice(r).match($te);u!==null&&(r+=u[0].length)}return i}const fl=Math.PI/180,Dte=1e-14,pu=Math.PI/2,Da=Math.PI*2,of=Math.sqrt(3)/2;var vE={},bE={},cU=[].join;function Ote(e,t,n,i,r,a,s,o,u){const f=cU.call(arguments);if(vE[f])return vE[f];const d=s*fl,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(u-t)*.5,v=p*(u-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=h/n,w=-h/i,A=p/i,C=S*o+_*u,M=w*o+A*u,k=S*e+_*t,T=w*e+A*t;let N=1/((k-C)*(k-C)+(T-M)*(T-M))-.25;N<0&&(N=0);let B=Math.sqrt(N);a==r&&(B=-B);const L=.5*(C+k)-B*(T-M),G=.5*(M+T)+B*(k-C),H=Math.atan2(M-G,C-L);let F=Math.atan2(T-G,k-L)-H;F<0&&a===1?F+=Da:F>0&&a===0&&(F-=Da);const R=Math.ceil(Math.abs(F/(pu+.001))),P=[];for(let X=0;X<R;++X){const K=H+X*F/R,z=H+(X+1)*F/R;P[X]=[L,G,K,z,n,i,h,p]}return vE[f]=P}function Rte(e){const t=cU.call(e);if(bE[t])return bE[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],f=e[7];const d=f*s,h=-u*o,p=u*s,y=f*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),C=8/3*A*A/Math.sin(w),M=n+v-C*b,k=i+b+C*v,T=n+S,O=i+_,N=T+C*_,B=O-C*S;return bE[t]=[d*M+h*k,p*M+y*k,d*N+h*B,p*N+y*B,d*T+h*O,p*T+y*O]}const xr=["l",0,0,0,0,0,0,0];function Nte(e,t,n){const i=xr[0]=e[0];if(i==="a"||i==="A")xr[1]=t*e[1],xr[2]=n*e[2],xr[3]=e[3],xr[4]=e[4],xr[5]=e[5],xr[6]=t*e[6],xr[7]=n*e[7];else if(i==="h"||i==="H")xr[1]=t*e[1];else if(i==="v"||i==="V")xr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)xr[r]=(r%2==1?t:n)*e[r];return xr}function sp(e,t,n,i,r,a){var s,o=null,u=0,f=0,d=0,h=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=Nte(s,r,a)),s[0]){case"l":u+=s[1],f+=s[2],e.lineTo(u+n,f+i);break;case"L":u=s[1],f=s[2],e.lineTo(u+n,f+i);break;case"h":u+=s[1],e.lineTo(u+n,f+i);break;case"H":u=s[1],e.lineTo(u+n,f+i);break;case"v":f+=s[1],e.lineTo(u+n,f+i);break;case"V":f=s[1],e.lineTo(u+n,f+i);break;case"m":u+=s[1],f+=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"M":u=s[1],f=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"c":p=u+s[5],y=f+s[6],d=u+s[3],h=f+s[4],e.bezierCurveTo(u+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),u=p,f=y;break;case"C":u=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,u+n,f+i);break;case"s":p=u+s[3],y=f+s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,u+s[1]+n,f+s[2]+i,p+n,y+i),d=u+s[1],h=f+s[2],u=p,f=y;break;case"S":p=s[3],y=s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"q":p=u+s[3],y=f+s[4],d=u+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"t":p=u+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=u,h=f):o[0]==="t"?(d=2*u-v,h=2*f-b):o[0]==="q"&&(d=2*u-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y,d=u+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*u-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"a":I5(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+f+i]),u+=s[6],f+=s[7];break;case"A":I5(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),u=s[6],f=s[7];break;case"z":case"Z":u=S,f=_,e.closePath();break}o=s}}function I5(e,t,n,i){const r=Ote(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Rte(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const q5=.5773502691896257,H5={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Da)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*q5,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*q5;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function fU(e){return _e(H5,e)?H5[e]:zte(e)}var xE={};function zte(e){if(!_e(xE,e)){const t=Vf(e);xE[e]={draw:function(n,i){sp(n,t,0,0,Math.sqrt(i)/2)}}}return xE[e]}const zo=.448084975506;function Fte(e){return e.x}function Lte(e){return e.y}function Ute(e){return e.width}function Bte(e){return e.height}function As(e){return typeof e=="function"?e:()=>+e}function Gm(e,t,n){return Math.max(t,Math.min(e,n))}function dU(){var e=Fte,t=Lte,n=Ute,i=Bte,r=As(0),a=r,s=r,o=r,u=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Gm(+r.call(this,d),0,w),C=Gm(+a.call(this,d),0,w),M=Gm(+s.call(this,d),0,w),k=Gm(+o.call(this,d),0,w);if(u||(u=y=Xv()),A<=0&&C<=0&&M<=0&&k<=0)u.rect(v,b,S,_);else{var T=v+S,O=b+_;u.moveTo(v+A,b),u.lineTo(T-C,b),u.bezierCurveTo(T-zo*C,b,T,b+zo*C,T,b+C),u.lineTo(T,O-k),u.bezierCurveTo(T,O-zo*k,T-zo*k,O,T-k,O),u.lineTo(v+M,O),u.bezierCurveTo(v+zo*M,O,v,O-zo*M,v,O-M),u.lineTo(v,b+A),u.bezierCurveTo(v,b+zo*A,v+zo*A,b,v+A,b),u.closePath()}if(y)return u=null,y+""||null}return f.x=function(d){return arguments.length?(e=As(d),f):e},f.y=function(d){return arguments.length?(t=As(d),f):t},f.width=function(d){return arguments.length?(n=As(d),f):n},f.height=function(d){return arguments.length?(i=As(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=As(d),a=h!=null?As(h):r,o=p!=null?As(p):r,s=y!=null?As(y):a,f):r},f.context=function(d){return arguments.length?(u=d??null,f):u},f}function hU(){var e,t,n,i,r=null,a,s,o,u;function f(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*u,A=(S/=_)*u,C=Math.atan2(S,b);r.moveTo(s-w,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,C-Math.PI,C),r.lineTo(s+w,o+A),r.arc(s,o,u,C,C+Math.PI)}else r.arc(h,p,v,0,Da);r.closePath()}else a=1;s=h,o=p,u=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=Xv()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function Pp(e,t){return e??t}const Ip=e=>e.x||0,qp=e=>e.y||0,jte=e=>e.width||0,Pte=e=>e.height||0,Ite=e=>(e.x||0)+(e.width||0),qte=e=>(e.y||0)+(e.height||0),Hte=e=>e.startAngle||0,Gte=e=>e.endAngle||0,Yte=e=>e.padAngle||0,Xte=e=>e.innerRadius||0,Vte=e=>e.outerRadius||0,Wte=e=>e.cornerRadius||0,Qte=e=>Pp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Zte=e=>Pp(e.cornerRadiusTopRight,e.cornerRadius)||0,Kte=e=>Pp(e.cornerRadiusBottomRight,e.cornerRadius)||0,Jte=e=>Pp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,ene=e=>Pp(e.size,64),tne=e=>e.size||1,ob=e=>e.defined!==!1,nne=e=>fU(e.shape||"circle"),ine=yJ().startAngle(Hte).endAngle(Gte).padAngle(Yte).innerRadius(Xte).outerRadius(Vte).cornerRadius(Wte),rne=I7().x(Ip).y1(qp).y0(qte).defined(ob),ane=I7().y(qp).x1(Ip).x0(Ite).defined(ob),sne=P7().x(Ip).y(qp).defined(ob),one=dU().x(Ip).y(qp).width(jte).height(Pte).cornerRadius(Qte,Zte,Kte,Jte),lne=bJ().type(nne).size(ene),une=hU().x(Ip).y(qp).defined(ob).size(tne);function ZM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function cne(e,t){return ine.context(e)(t)}function fne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?ane:rne).curve(QM(i,n.orient,n.tension)).context(e)(t)}function dne(e,t){const n=t[0],i=n.interpolate||"linear";return sne.curve(QM(i,n.orient,n.tension)).context(e)(t)}function Dd(e,t,n,i){return one.context(e)(t,n,i)}function hne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function gne(e,t){return lne.context(e)(t)}function pne(e,t){return une.context(e)(t)}var gU=1;function mne(){gU=1}function KM(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+gU++),s=r.clipping[a]||(r.clipping[a]={id:a});return Ie(i)?s.path=i(null):ZM(n)?s.path=Dd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function rn(e){this.clear(),e&&this.union(e)}rn.prototype={clone(){return new rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),u=Math.sin(e),f=t-t*o+n*u,d=n-t*u-n*o;return[o*i-u*r+f,u*i+o*r+d,o*i-u*s+f,u*i+o*s+d,o*a-u*r+f,u*a+o*r+d,o*a-u*s+f,u*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lb(e){this.mark=e,this.bounds=this.bounds||new rn}function ub(e){lb.call(this,e),this.items=this.items||[]}pe(ub,lb);class pU{constructor(t){this._pending=0,this._loader=t||zv()}pending(){return this._pending}sanitizeURL(t){const n=this;return G5(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Jh(n),i)).catch(()=>(Jh(n),null))}loadImage(t){const n=this,i=LJ();return G5(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=_e(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Jh(n),s.onerror=()=>Jh(n),s.src=a,s}).catch(r=>(Jh(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function G5(e){e._pending+=1}function Jh(e){e._pending-=1}function to(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?yne(t,i):0))}return e}function yne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const vne=Da-1e-8;let cb,C1,M1,Su,gw,$1,pw,mw;const Go=(e,t)=>cb.add(e,t),T1=(e,t)=>Go(C1=e,M1=t),Y5=e=>Go(e,cb.y1),X5=e=>Go(cb.x1,e),mu=(e,t)=>gw*e+pw*t,yu=(e,t)=>$1*e+mw*t,SE=(e,t)=>Go(mu(e,t),yu(e,t)),EE=(e,t)=>T1(mu(e,t),yu(e,t));function Hp(e,t){return cb=e,t?(Su=t*fl,gw=mw=Math.cos(Su),$1=Math.sin(Su),pw=-$1):(gw=mw=1,Su=$1=pw=0),bne}const bne={beginPath(){},closePath(){},moveTo:EE,lineTo:EE,rect(e,t,n,i){Su?(SE(e+n,t),SE(e+n,t+i),SE(e,t+i),EE(e,t)):(Go(e+n,t+i),T1(e,t))},quadraticCurveTo(e,t,n,i){const r=mu(e,t),a=yu(e,t),s=mu(n,i),o=yu(n,i);V5(C1,r,s,Y5),V5(M1,a,o,X5),T1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=mu(e,t),o=yu(e,t),u=mu(n,i),f=yu(n,i),d=mu(r,a),h=yu(r,a);W5(C1,s,u,d,Y5),W5(M1,o,f,h,X5),T1(d,h)},arc(e,t,n,i,r,a){if(i+=Su,r+=Su,C1=n*Math.cos(r)+e,M1=n*Math.sin(r)+t,Math.abs(r-i)>vne)Go(e-n,t-n),Go(e+n,t+n);else{const s=f=>Go(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,u;if(s(i),s(r),r!==i)if(i=i%Da,i<0&&(i+=Da),r=r%Da,r<0&&(r+=Da),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Da,o=i-i%pu,u=0;u<4&&o>r;++u,o-=pu)s(o);else for(o=i-i%pu+pu,u=0;u<4&&o<r;++u,o=o+pu)s(o)}}};function V5(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function W5(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let u=0,f=0,d;Math.abs(a)>Dte?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),u=(-s+d)/a,f=(-s-d)/a)):u=.5*o/s,0<u&&u<1&&r(Q5(u,e,t,n,i)),0<f&&f<1&&r(Q5(f,e,t,n,i))}function Q5(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var rl=(rl=il(1,1))?rl.getContext("2d"):null;const yw=new rn;function JM(e){return function(t,n){if(!rl)return!0;e(rl,t),yw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=yw;for(let o=r;o<=s;++o)for(let u=i;u<=a;++u)if(rl.isPointInPath(u,o))return!0;return!1}}function e$(e,t){return t.contains(e.x||0,e.y||0)}function mU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(yw.set(n,i,n+r,i+a))}function yU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Sf(t,n,i,r,a)}function Sf(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:u}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=u-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Wf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Hr(e,t){return e??t}function Z5(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function xne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Hr(t.x1,.5)*i,n.y1+Hr(t.y1,.5)*r,Math.max(i,r)*Hr(t.r1,0),n.x1+Hr(t.x2,.5)*i,n.y1+Hr(t.y2,.5)*r,Math.max(i,r)*Hr(t.r2,.5));else{const s=Hr(t.x1,0),o=Hr(t.y1,0),u=Hr(t.x2,1),f=Hr(t.y2,0);if(s===u||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+u*i,n.y1+f*r);else{const d=il(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=Z5(h.createLinearGradient(s,o,u,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return Z5(a,t.stops)}function vU(e,t,n){return WM(n)?xne(e,n,t.bounds):n}function gy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=vU(e,t,t.fill),!0):!1}var Sne=[];function Qf(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=vU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Sne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Ene(e,t){return e.zindex-t.zindex||e.index-t.index}function t$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Ene)}function sa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=t$(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function py(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=t$(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function n$(e){return function(t,n,i){sa(n,r=>{(!i||i.intersects(r.bounds))&&bU(e,t,r,r)})}}function _ne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&bU(e,t,n.items[0],n.items)}}function bU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Wf(t,n),n.fill&&gy(t,n,r)&&t.fill(),n.stroke&&Qf(t,n,r)&&t.stroke()))}function fb(e){return e=e||Dr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,py(n,o=>{const u=o.bounds;if(!(u&&!u.contains(a,s)||!u)&&e(t,o,i,r,a,s))return o})}}function Gp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,u=s.stroke&&n.isPointInStroke,f,d;return u&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||u&&n.isPointInStroke(r,a)}}function i$(e){return fb(Gp(e))}function Cu(e,t){return"translate("+e+","+t+")"}function r$(e){return"rotate("+e+")"}function wne(e,t){return"scale("+e+","+t+")"}function xU(e){return Cu(e.x||0,e.y||0)}function Ane(e){return Cu(e.x||0,e.y||0)+(e.angle?" "+r$(e.angle):"")}function Cne(e){return Cu(e.x||0,e.y||0)+(e.angle?" "+r$(e.angle):"")+(e.scaleX||e.scaleY?" "+wne(e.scaleX||1,e.scaleY||1):"")}function a$(e,t,n){function i(s,o){s("transform",Ane(o)),s("d",t(null,o))}function r(s,o){return t(Hp(s,o.angle),o),to(s,o).translate(o.x||0,o.y||0)}function a(s,o){var u=o.x||0,f=o.y||0,d=o.angle||0;s.translate(u,f),d&&s.rotate(d*=fl),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-u,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:n$(a),pick:i$(a),isect:n||JM(a)}}var Mne=a$("arc",cne);function $ne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function Tne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function kne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function s$(e,t,n){function i(u,f){var d=f.mark.items;d.length&&u("d",t(null,d))}function r(u,f){var d=f.items;return d.length===0?u:(t(Hp(u),d),to(u,d[0]))}function a(u,f){u.beginPath(),t(u,f)}const s=Gp(a);function o(u,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=u.pixelRatio,h*=u.pixelRatio,s(u,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:_ne(a),pick:o,isect:e$,tip:n}}var Dne=s$("area",fne,$ne);function One(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):SU(e,t.group)}function SU(e,t){e.beginPath(),ZM(t)?Dd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function EU(e){const t=Hr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Rne(e,t){e("transform",xU(t))}function _U(e,t){const n=EU(t);e("d",Dd(null,t,n,n))}function Nne(e,t){e("class","background"),e("aria-hidden",!0),_U(e,t)}function zne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?_U(e,t):e("d","")}function Fne(e,t,n){const i=t.clip?KM(n,t,t):null;e("clip-path",i)}function Lne(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),to(e,t),e.translate(t.x||0,t.y||0)}function op(e,t,n,i){const r=EU(t);e.beginPath(),Dd(e,t,(n||0)+r,(i||0)+r)}const Une=Gp(op),Bne=Gp(op,!1),jne=Gp(op,!0);function Pne(e,t,n,i){sa(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(op(e,r,a,s),Wf(e,r),r.fill&&gy(e,r,u)&&e.fill(),r.stroke&&!o&&Qf(e,r,u)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&SU(e,r),n&&n.translate(-a,-s),sa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&u&&(op(e,r,a,s),Wf(e,r),Qf(e,r,u)&&e.stroke())})}function Ine(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return py(t,u=>{let f,d,h;const p=u.bounds;if(p&&!p.contains(r,a))return;d=u.x||0,h=u.y||0;const y=d+(u.width||0),v=h+(u.height||0),b=u.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&ZM(u)&&!jne(e,u,s,o))return e.restore(),null;const S=u.strokeForeground,_=t.interactive!==!1;return _&&S&&u.stroke&&Bne(e,u,s,o)?(e.restore(),u):(f=py(u,w=>qne(w,d,h)?this.pick(w,n,i,d,h):null),!f&&_&&(u.fill||!S&&u.stroke)&&Une(e,u,s,o)&&(f=u),e.restore(),f||null)})}function qne(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Hne={type:"group",tag:"g",nested:!1,attr:Rne,bound:Lne,draw:Pne,pick:Ine,isect:mU,content:Fne,background:Nne,foreground:zne},lp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function o$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function l$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function u$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function db(e,t){return e==="center"?t/2:e==="right"?t:0}function hb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Gne(e,t,n){const i=o$(t,n),r=l$(t,i),a=u$(t,i),s=(t.x||0)-db(t.align,r),o=(t.y||0)-hb(t.baseline,a),u=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",u,lp["xmlns:xlink"],"xlink:href"),e("transform",Cu(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Yne(e,t){const n=t.image,i=l$(t,n),r=u$(t,n),a=(t.x||0)-db(t.align,i),s=(t.y||0)-hb(t.baseline,r);return e.set(a,s,a+i,s+r)}function Xne(e,t,n){sa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=o$(i,this);let a=l$(i,r),s=u$(i,r);if(a===0||s===0)return;let o=(i.x||0)-db(i.align,a),u=(i.y||0)-hb(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,u+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Wf(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,u,a,s))})}var Vne={type:"image",tag:"image",nested:!1,attr:Gne,bound:Yne,draw:Xne,pick:fb(),isect:Dr,get:o$,xOffset:db,yOffset:hb},Wne=s$("line",dne,Tne);function Qne(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Cne(t)),e("d",t.path)}function k1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*fl,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Vf(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),sp(e,u,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):sp(e,u,i,r,a,s)}function Zne(e,t){return k1(Hp(e,t.angle),t)?e.set(0,0,0,0):to(e,t,!0)}var Kne={type:"path",tag:"path",nested:!1,attr:Qne,bound:Zne,draw:n$(k1),pick:i$(k1),isect:JM(k1)};function Jne(e,t){e("d",Dd(null,t))}function eie(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function K5(e,t){e.beginPath(),Dd(e,t)}var tie={type:"rect",tag:"path",nested:!1,attr:Jne,bound:eie,draw:n$(K5),pick:i$(K5),isect:mU};function nie(e,t){e("transform",xU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function iie(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function wU(e,t,n){var i,r,a,s;return t.stroke&&Qf(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function rie(e,t,n){sa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&wU(e,i,r)&&(Wf(e,i),e.stroke())}})}function aie(e,t,n,i){return e.isPointInStroke?wU(e,t,1)&&e.isPointInStroke(n,i):!1}var sie={type:"rule",tag:"line",nested:!1,attr:nie,bound:iie,draw:rie,pick:fb(aie),isect:yU},oie=a$("shape",hne),lie=a$("symbol",gne,e$);const J5=O8();var ir={height:es,measureWidth:c$,estimateWidth:my,width:my,canvas:AU};AU(!0);function AU(e){ir.width=e&&rl?c$:my}function my(e,t){return CU(hl(e,t),es(e))}function CU(e,t){return~~(.8*e.length*t)}function c$(e,t){return es(e)<=0||!(t=hl(e,t))?0:MU(t,gb(e))}function MU(e,t){const n=`(${t}) ${e}`;let i=J5.get(n);return i===void 0&&(rl.font=t,i=rl.measureText(e).width,J5.set(n,i)),i}function es(e){return e.fontSize!=null?+e.fontSize||0:11}function dl(e){return e.lineHeight!=null?e.lineHeight:es(e)+2}function uie(e){return re(e)?e.length>1?e:e[0]:e}function Yp(e){return uie(e.lineBreak&&e.text&&!re(e.text)?e.text.split(e.lineBreak):e.text)}function f$(e){const t=Yp(e);return(re(t)?t.length-1:0)*dl(e)}function hl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?fie(e,n):n}function cie(e){if(ir.width===c$){const t=gb(e);return n=>MU(n,t)}else if(ir.width===my){const t=es(e);return n=>CU(n,t)}else return t=>ir.width(e,t)}function fie(e,t){var n=+e.limit,i=cie(e);if(i(t)<n)return t;var r=e.ellipsis||"…",a=e.dir==="rtl",s=0,o=t.length,u;if(n-=i(r),a){for(;s<o;)u=s+o>>>1,i(t.slice(u))>n?s=u+1:o=u;return r+t.slice(s)}else{for(;s<o;)u=1+(s+o>>>1),i(t.slice(0,u))<n?s=u:o=u-1;return t.slice(0,s)+r}}function Xp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function gb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+es(e)+"px "+Xp(e,t)}function d$(e){var t=e.baseline,n=es(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*dl(e):t==="line-bottom"?.29*n-.5*dl(e):0)}const die={left:"start",center:"middle",right:"end"},Ug=new rn;function pb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-pu,t+=i*Math.cos(r),n+=i*Math.sin(r)),Ug.x1=t,Ug.y1=n,Ug}function hie(e,t){var n=t.dx||0,i=(t.dy||0)+d$(t),r=pb(t),a=r.x1,s=r.y1,o=t.angle||0,u;e("text-anchor",die[t.align]||"start"),o?(u=Cu(a,s)+" "+r$(o),(n||i)&&(u+=" "+Cu(n,i))):u=Cu(a+n,s+i),e("transform",u)}function h$(e,t,n){var i=ir.height(t),r=t.align,a=pb(t),s=a.x1,o=a.y1,u=t.dx||0,f=(t.dy||0)+d$(t)-Math.round(.8*i),d=Yp(t),h;if(re(d)?(i+=dl(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,ir.width(t,y)),0)):h=ir.width(t,d),r==="center"?u-=h/2:r==="right"&&(u-=h),e.set(u+=s,f+=o,u+h,f+i),t.angle&&!n)e.rotate(t.angle*fl,s,o);else if(n===2)return e.rotatedPoints(t.angle*fl,s,o);return e}function gie(e,t,n){sa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,u,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=gb(i),e.textAlign=i.align||"left",a=pb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*fl),s=o=0),s+=i.dx||0,o+=(i.dy||0)+d$(i),d=Yp(i),Wf(e,i),re(d))for(f=dl(i),u=0;u<d.length;++u)h=hl(i,d[u]),i.fill&&gy(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=hl(i,d),i.fill&&gy(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function pie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=pb(t),o=s.x1,u=s.y1,f=h$(Ug,t,1),d=-t.angle*fl,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*u),v=p*r+h*a+(u-p*o-h*u);return f.contains(y,v)}function mie(e,t){const n=h$(Ug,e,2);return Sf(t,n[0],n[1],n[2],n[3])||Sf(t,n[0],n[1],n[4],n[5])||Sf(t,n[4],n[5],n[6],n[7])||Sf(t,n[2],n[3],n[6],n[7])}var yie={type:"text",tag:"text",nested:!1,attr:hie,bound:h$,draw:gie,pick:fb(pie),isect:mie},vie=s$("trail",pne,kne),ur={arc:Mne,area:Dne,group:Hne,image:Vne,line:Wne,path:Kne,rect:tie,rule:sie,shape:oie,symbol:lie,text:yie,trail:vie};function vw(e,t,n){var i=ur[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new rn),e,n)}var e6={mark:null};function $U(e,t,n){var i=ur[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,u,f,d;if(i.nested)return s?f=a[0]:(e6.mark=e,f=e6),d=vw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new rn,s)for(o=0,u=a.length;o<u;++o)t.union(vw(a[o],r,n));return e.bounds=t}const bie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function TU(e,t){return JSON.stringify(e,bie,t)}function kU(e){const t=typeof e=="string"?JSON.parse(e):e;return DU(t)}function DU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&DU(n[r]);return t&&$U(e),e}class OU{constructor(t){arguments.length?this.root=kU(t):(this.root=t6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ub(this.root)])}toJSON(t){return TU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=t6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function t6(e,t){const n={bounds:new rn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Yo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function g$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function ln(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Yo(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Er(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function RU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function mb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function xie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=ur[r.marktype]).tip){for(s=mb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let p$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||zv(),this._tooltip=n||Sie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Yo(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=xie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let u=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,f+=t.y||0;return{x:u,y:f,width:s,height:o,left:u,top:f,right:u+s,bottom:f+o}}};function Sie(e,t,n,i){e.element().setAttribute("title",i||"")}class Vp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new pU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Eie="keydown",_ie="keypress",wie="keyup",NU="dragenter",D1="dragleave",zU="dragover",bw="pointerdown",Aie="pointerup",yy="pointermove",O1="pointerout",FU="pointerover",xw="mousedown",Cie="mouseup",LU="mousemove",vy="mouseout",UU="mouseover",by="click",Mie="dblclick",$ie="wheel",BU="mousewheel",xy="touchstart",Sy="touchmove",Ey="touchend",Tie=[Eie,_ie,wie,NU,D1,zU,bw,Aie,yy,O1,FU,xw,Cie,LU,vy,UU,by,Mie,$ie,BU,xy,Sy,Ey],Sw=yy,Bg=vy,Ew=by;class Wp extends p${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Tie,this.pointermove=i6([yy,LU],[FU,UU],[O1,vy]),this.dragover=i6([zU],[NU],[D1]),this.pointerout=r6([O1,vy]),this.dragleave=r6([D1])}initialize(t,n,i){return this._canvas=t&&g$(t,"canvas"),[by,xw,bw,yy,O1,D1].forEach(r=>n6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(BU,t)}pointerdown(t){this._down=this._active,this.fire(bw,t)}mousedown(t){this._down=this._active,this.fire(xw,t)}click(t){this._down===this._active&&(this.fire(by,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(xy,t,!0)}touchmove(t){this.fire(Sy,t,!0)}touchend(t){this.fire(Ey,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Ew&&r&&r.href?this.handleHref(n,r,r.href):(t===Sw||t===Bg)&&this.handleTooltip(n,r,t!==Bg),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(n6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=mb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return ur[t.marktype].pick.call(this,s,t,n,i,r,a)}}const kie=e=>e===xy||e===Sy||e===Ey?[xy,Sy,Ey]:[e];function n6(e,t){kie(t).forEach(n=>Die(e,n))}function Die(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function _g(e,t,n){t.forEach(i=>e.fire(i,n))}function i6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?_g(this,e,i):((!r||!r.exit)&&_g(this,n,i),this._active=a,_g(this,t,i),_g(this,e,i))}}function r6(e){return function(t){_g(this,e,t),this._active=null}}function Oie(){return typeof window<"u"&&window.devicePixelRatio||1}function Rie(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),u=s?Oie():r;e.width=t*u,e.height=n*u;for(const f in a)o[f]=a[f];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*i[0],u*i[1]),e}class _y extends Vp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new rn,this._tempb=new rn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:il(1,1,this._options.type),t&&this._canvas&&(Er(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Rie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||te("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,u=Nie(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,u.expand(1)):zie(i,u.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=ur[n.marktype];n.clip&&One(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const Nie=(e,t,n)=>new rn().set(0,0,t,n).translate(-e[0],-e[1]);function zie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class jU extends p${constructor(t,n){super(t,n);const i=this;i._hrefHandler=_E(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=_E(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Bg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Ew,this._hrefHandler),r.removeEventListener(Sw,this._tooltipHandler),r.removeEventListener(Bg,this._tooltipHandler)),this._svg=r=t&&g$(t,"svg"),r&&(r.addEventListener(Ew,this._hrefHandler),r.addEventListener(Sw,this._tooltipHandler),r.addEventListener(Bg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:_E(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const _E=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},PU="aria-hidden",m$="aria-label",y$="role",v$="aria-roledescription",IU="graphics-object",b$="graphics-symbol",qU=(e,t,n)=>({[y$]:e,[v$]:t,[m$]:n||void 0}),Fie=ra(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),a6={axis:{desc:"axis",caption:Bie},legend:{desc:"legend",caption:jie},"title-text":{desc:"title",caption:e=>`Title text '${o6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${o6(e)}'`}},s6={ariaRole:y$,ariaRoleDescription:v$,description:m$};function HU(e,t){const n=t.aria===!1;if(e(PU,n||void 0),n||t.description==null)for(const i in s6)e(s6[i],void 0);else{const i=t.mark.marktype;e(m$,t.description),e(y$,t.ariaRole||(i==="group"?IU:b$)),e(v$,t.ariaRoleDescription||`${i} mark`)}}function GU(e){return e.aria===!1?{[PU]:!0}:Fie[e.role]?null:a6[e.role]?Uie(e,a6[e.role]):Lie(e)}function Lie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return qU(n?IU:b$,`${t} mark container`,e.description)}function Uie(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return qU(t.role||b$,t.desc,n.description||i(n))}catch{return null}}function o6(e){return Se(e.text).join(" ")}function Bie(e){const t=e.datum,n=e.orient,i=t.title?YU(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Xf(o)?"discrete":o} scale with ${sU(s,a,e)}`}function jie(e){const t=e.datum,n=t.title?YU(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,u=s.dataflow.locale();return Iie(i)+(n?` titled '${n}'`:"")+` for ${Pie(a)} with ${sU(u,o,e)}`}function YU(e){try{return Se(Je(e.items).items[0].text).join(" ")}catch{return null}}function Pie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Je(e)}function Iie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const XU=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),qie=e=>XU(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function x$(){let e="",t="",n="";const i=[],r=()=>t=n="",a=u=>{t&&(e+=`${t}>${n}`,r()),i.push(u)},s=(u,f)=>(f!=null&&(t+=` ${u}="${qie(f)}"`),o),o={open(u){a(u),t="<"+u;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const u=i.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,r(),o},attr:s,text:u=>(n+=XU(u),o),toString:()=>e};return o}const VU=e=>WU(x$(),e)+"";function WU(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):WU(e,i)}return e.close()}const wy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Ay={blend:"mix-blend-mode"},QU={fill:"none","stroke-miterlimit":10},eg=0,l6="http://www.w3.org/2000/xmlns/",on=lp.xmlns;class S$ extends Vp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=ln(t,0,"svg",on),this._svg.setAttributeNS(l6,"xmlns",on),this._svg.setAttributeNS(l6,"xmlns:xlink",lp["xmlns:xlink"]),this._svg.setAttribute("version",lp.version),this._svg.setAttribute("class","marks"),Er(t,1),this._root=ln(this._svg,eg,"g",on),Xo(this._root,QU),Er(this._svg,eg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Xo(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=ln(t,eg,"rect",on),Xo(i,{width:this._width,height:this._height,fill:n}));const r=VU(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Er(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,u,f;for(o=0,u=t.length;o<u;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=ur[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,u6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,u6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=ur[s],u=n.interactive===!1?"none":null,f=o.tag==="g",d=c6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Er(d,0),n._svg;d.setAttribute("class",RU(n));const h=GU(n);for(const b in h)oi(d,b,h[b]);f||oi(d,"pointer-events",u),oi(d,"clip-path",n.clip?KM(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=c6(b,d,p,o.tag,a);S&&(this._update(o,_,b),f&&Yie(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):sa(n,v),Er(d,y),d}_update(t,n,i){Bs=n,Vn=n.__values__,HU(jg,i),t.attr(jg,i,this);const r=Vie[t.type];r&&r.call(this,t,n,i),Bs&&this.style(Bs,i)}style(t,n){if(n!=null){for(const i in wy){let r=i==="font"?Xp(n):n[i];if(r===Vn[i])continue;const a=wy[i];r==null?t.removeAttribute(a):(WM(r)&&(r=lU(r,this._defs.gradient,ZU())),t.setAttribute(a,r+"")),Vn[i]=r}for(const i in Ay)R1(t,Ay[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=ln(t,eg+1,"defs",on)),r=Hie(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=ln(t,eg+1,"defs",on)),r=Gie(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Er(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function u6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Hie(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=ln(e,n++,"pattern",on);Xo(s,{id:hy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=ln(s,0,"rect",on),Xo(s,{width:1,height:1,fill:`url(${ZU()}#${t.id})`}),e=ln(e,n++,"radialGradient",on),Xo(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ln(e,n++,"linearGradient",on),Xo(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=ln(e,i,"stop",on),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Er(e,i),n}function Gie(e,t,n){let i;return e=ln(e,n,"clipPath",on),e.setAttribute("id",t.id),t.path?(i=ln(e,0,"path",on),i.setAttribute("d",t.path)):(i=ln(e,0,"rect",on),Xo(i,{x:0,y:0,width:t.width,height:t.height})),Er(e,1),n+1}function Yie(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;sa(n,s=>{r=e.mark(t,s,r,i),++a}),Er(t,1+a)}function c6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Yo(s,i,on),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Yo(s,"path",on);a.appendChild(o),o.__data__=e;const u=Yo(s,"g",on);a.appendChild(u),u.__data__=e;const f=Yo(s,"path",on);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||Xie(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Xie(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bs=null,Vn=null;const Vie={group(e,t,n){const i=Bs=t.childNodes[2];Vn=i.__values__,e.foreground(jg,n,this),Vn=t.__values__,Bs=t.childNodes[1],e.content(jg,n,this);const r=Bs=t.childNodes[0];e.background(jg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Vn.events&&(oi(i,"pointer-events",a),oi(r,"pointer-events",a),Vn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;oi(i,"display",null),this.style(r,n),oi(r,"stroke",null),s&&(n.fill=null),Vn=i.__values__,this.style(i,n),s&&(n.fill=s),Bs=null}else oi(i,"display","none")},image(e,t,n){n.smooth===!1?(R1(t,"image-rendering","optimizeSpeed"),R1(t,"image-rendering","pixelated")):R1(t,"image-rendering",null)},text(e,t,n){const i=Yp(n);let r,a,s,o;re(i)?(a=i.map(u=>hl(n,u)),r=a.join(`
`),r!==Vn.text&&(Er(t,0),s=t.ownerDocument,o=dl(n),a.forEach((u,f)=>{const d=Yo(s,"tspan",on);d.__data__=n,d.textContent=u,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Vn.text=r)):(a=hl(n,i),a!==Vn.text&&(t.textContent=a,Vn.text=a)),oi(t,"font-family",Xp(n)),oi(t,"font-size",es(n)+"px"),oi(t,"font-style",n.fontStyle),oi(t,"font-variant",n.fontVariant),oi(t,"font-weight",n.fontWeight)}};function jg(e,t,n){t!==Vn[e]&&(n?Wie(Bs,e,t,n):oi(Bs,e,t),Vn[e]=t)}function R1(e,t,n){n!==Vn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vn[t]=n)}function Xo(e,t){for(const n in t)oi(e,n,t[n])}function oi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Wie(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function ZU(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KU extends Vp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=x$();n.open("svg",Pe({},lp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",QU,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=ur[n.marktype],r=i.tag,a=[HU,i.attr];t.open("g",{class:RU(n),"clip-path":n.clip?KM(this,n,n.group):null},GU(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const u=this.href(o);if(u&&t.open("a",u),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=Yp(o);if(re(f)){const d={x:0,dy:dl(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text(hl(o,f[h])).close()}else t.text(hl(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),sa(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),u&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):sa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,u,f,d)=>{a[d||o]=u};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Qie(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:hy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<o.length;++u)t.open("stop",{offset:o[u].offset,"stop-color":o[u].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Qie(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Xp(t),e["font-size"]=es(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in wy){let o=t[s];const u=wy[s];o==="transparent"&&(u==="fill"||u==="stroke")||o!=null&&(WM(o)&&(o=lU(o,r.gradient,"")),e[u]=o)}for(const s in Ay){const o=t[s];o!=null&&(a=a||[],a.push(`${Ay[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Yr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Zie(e){Yr.svgMarkTypes=e.svgMarkTypes??["text"],Yr.svgOnTop=e.svgOnTop??!0,Yr.debug=e.debug??!1}class _w extends Vp{constructor(t){super(t),this._svgRenderer=new S$(t),this._canvasRenderer=new _y(t)}initialize(t,n,i,r,a){this._root_el=ln(t,0,"div");const s=ln(this._root_el,0,"div"),o=ln(this._root_el,1,"div");return this._root_el.style.position="relative",Yr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Yr.svgOnTop?o:s,this._canvasEl=Yr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Yr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Yr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Yr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Yr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class JU extends Wp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=ln(ln(t,0,"div"),Yr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const eB="canvas",tB="hybrid",nB="png",iB="svg",rB="none",Vo={Canvas:eB,PNG:nB,SVG:iB,Hybrid:tB,None:rB},Lu={};Lu[eB]=Lu[nB]={renderer:_y,headless:_y,handler:Wp};Lu[iB]={renderer:S$,headless:KU,handler:jU};Lu[tB]={renderer:_w,headless:_w,handler:JU};Lu[rB]={};function yb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Lu[e]=t,this):Lu[e]}function aB(e,t,n){const i=[],r=new rn().union(t),a=e.marktype;return a?sB(e,r,n,i):a==="group"?oB(e,r,n,i):te("Intersect scene must be mark node or group item.")}function sB(e,t,n,i){if(Kie(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)oB(r[o],t,n,i);else for(const u=ur[a].isect;o<s;++o){const f=r[o];lB(f,t,u)&&i.push(f)}}return i}function Kie(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function oB(e,t,n,i){n&&n(e.mark)&&lB(e,t,ur.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let u=0;u<a;++u)sB(r[u],t,n,i);t.translate(s,o)}return i}function lB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const wE=new rn;function uB(e){const t=e.clip;if(Ie(t))t(Hp(wE.clear()));else if(t)wE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(wE)}const Jie=1e-9;function E$(e,t,n){return e===t?!0:n==="path"?cB(e,t):e instanceof Date&&t instanceof Date?+e==+t:st(e)&&st(t)?Math.abs(e-t)<=Jie:!e||!t||!be(e)&&!be(t)?e==t:ere(e,t)}function cB(e,t){return E$(Vf(e),Vf(t))}function ere(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!E$(e[r],t[r],r))return!1;return typeof e==typeof t}function tre(){mne(),wte()}const Zf="top",Zr="left",Kr="right",gl="bottom",nre="top-left",ire="top-right",rre="bottom-left",are="bottom-right",_$="start",ww="middle",li="end",sre="x",ore="y",vb="group",w$="axis",A$="title",lre="frame",ure="scope",C$="legend",fB="row-header",dB="row-footer",hB="row-title",gB="column-header",pB="column-footer",mB="column-title",cre="padding",fre="symbol",yB="fit",vB="fit-x",bB="fit-y",dre="pad",M$="none",Ym="all",Aw="each",$$="flush",Wo="column",Qo="row";function xB(e){J.call(this,null,e)}pe(xB,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=ur[r],s=a.bound;let o=i.bounds,u;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=Xm(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===vb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(Xm(f,s))),i.role){case w$:case C$:case A$:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(Xm(f,s))}),t.visit(t.MOD,f=>{u=u||o.alignsWith(f.bounds),n.dirty(f),o.union(Xm(f,s))}),u&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return uB(i),t.modifies("bounds")}});function Xm(e,t,n){return t(e.bounds.clear(),e,n)}const f6=":vega_identifier:";function T$(e){J.call(this,0,e)}T$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};pe(T$,J,{transform(e,t){const n=hre(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function hre(e){return e._signals[f6]||(e._signals[f6]=e.add(0))}function SB(e){J.call(this,null,e)}pe(SB,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,gre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===vb?ub:lb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function gre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function EB(e){J.call(this,null,e)}const d6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!_B(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},_B=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),h6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(_B(r,a=e[n].bounds,t))return!0},pre=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},mre=(e,t,n)=>{var i=e.range(),r=new rn;return t===Zf||t===gl?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},g6=e=>(e.forEach(t=>t.opacity=1),e),p6=(e,t)=>e.reflow(t.modified()).modifies("opacity");pe(EB,J,{transform(e,t){const n=d6[e.method]||d6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(g6(r),t=p6(t,e)),t;if(r=r.filter(pre),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=g6(r),t=p6(t,e),a.length>=3&&h6(a,i)){do a=n(a,i);while(a.length>=3&&h6(a,i));a.length<3&&!Je(r).opacity&&(a.length>1&&(Je(a).opacity=0),Je(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=mre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(u=>{s(u)||(u.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(u=>{u.opacity&&o.union(u.bounds)}),t}});function wB(e){J.call(this,null,e)}pe(wB,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Xn=new rn;function Ef(e,t,n){return e[t]===n?0:(e[t]=n,1)}function yre(e){var t=e.items[0].orient;return t===Zr||t===Kr}function vre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function bre(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,u=vre(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[u[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&f$(v),w=0,A=0,C,M;switch(Xn.clear().union(S),S.clear(),(C=u[0])>-1&&S.union(r.items[C].bounds),(C=u[1])>-1&&S.union(r.items[C].bounds),o){case Zf:w=h||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(f,0),v&&Vm(e,v,M,b,_,0,-1,S);break;case Zr:w=-d,A=h||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,f),v&&Vm(e,v,M,b,_,1,-1,S);break;case Kr:w=n+d,A=h||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,f),v&&Vm(e,v,M,b,_,1,1,S);break;case gl:w=h||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,M),v&&Vm(e,v,M,b,0,0,1,S);break;default:w=r.x,A=r.y}return to(S.translate(w,A),r),Ef(r,"x",w+s)|Ef(r,"y",A+s)&&(r.bounds=Xn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function Vm(e,t,n,i,r,a,s,o){const u=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(u.translate(-d,-h)),e.dirty(t)}o.union(u)}const m6=(e,t)=>Math.floor(Math.min(e,t)),y6=(e,t)=>Math.ceil(Math.max(e,t));function xre(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===vb)switch(r.role){case w$:case C$:case A$:break;case fB:s.rowheaders.push(...a);break;case dB:s.rowfooters.push(...a);break;case gB:s.colheaders.push(...a);break;case pB:s.colfooters.push(...a);break;case hB:s.rowtitle=a[0];break;case mB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function Sre(e){return new rn().set(0,0,e.width||0,e.height||0)}function Ere(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Dt(e,t,n){const i=be(e)?e[t]:e;return i??(n!==void 0?n:0)}function v6(e){return e<0?Math.ceil(-e):0}function AB(e,t,n){var i=!n.nodirty,r=n.bounds===$$?Sre:Ere,a=Xn.set(0,0,0,0),s=Dt(n.align,Wo),o=Dt(n.align,Qo),u=Dt(n.padding,Wo),f=Dt(n.padding,Qo),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(h),w=0,A=Array(p),C=Array(p),M=Array(p),k,T,O,N,B,L,G,H,j,F,R;for(T=0;T<d;++T)v[T]=0;for(T=0;T<h;++T)_[T]=0;for(T=0;T<p;++T)L=t[T],B=M[T]=r(L),L.x=L.x||0,A[T]=0,L.y=L.y||0,C[T]=0,O=T%d,N=~~(T/d),b=Math.max(b,G=Math.ceil(B.x2)),w=Math.max(w,H=Math.ceil(B.y2)),v[O]=Math.max(v[O],G),_[N]=Math.max(_[N],H),y[T]=u+v6(B.x1),S[T]=f+v6(B.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(s===Aw)for(O=1;O<d;++O){for(R=0,T=O;T<p;T+=d)R<y[T]&&(R=y[T]);for(T=O;T<p;T+=d)y[T]=R+v[O-1]}else if(s===Ym){for(R=0,T=0;T<p;++T)T%d&&R<y[T]&&(R=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=R+b)}else for(s=!1,O=1;O<d;++O)for(T=O;T<p;T+=d)y[T]+=v[O-1];if(o===Aw)for(N=1;N<h;++N){for(R=0,T=N*d,k=T+d;T<k;++T)R<S[T]&&(R=S[T]);for(T=N*d;T<k;++T)S[T]=R+_[N-1]}else if(o===Ym){for(R=0,T=d;T<p;++T)R<S[T]&&(R=S[T]);for(T=d;T<p;++T)S[T]=R+w}else for(o=!1,N=1;N<h;++N)for(T=N*d,k=T+d;T<k;++T)S[T]+=_[N-1];for(j=0,T=0;T<p;++T)j=y[T]+(T%d?j:0),A[T]+=j-t[T].x;for(O=0;O<d;++O)for(F=0,T=O;T<p;T+=d)F+=S[T],C[T]+=F-t[T].y;if(s&&Dt(n.center,Wo)&&h>1)for(T=0;T<p;++T)B=s===Ym?b:v[T%d],j=B-M[T].x2-t[T].x-A[T],j>0&&(A[T]+=j/2);if(o&&Dt(n.center,Qo)&&d!==1)for(T=0;T<p;++T)B=o===Ym?w:_[~~(T/d)],F=B-M[T].y2-t[T].y-C[T],F>0&&(C[T]+=F/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],C[T]));switch(j=Dt(n.anchor,sre),F=Dt(n.anchor,ore),Dt(n.anchor,Wo)){case li:j-=a.width();break;case ww:j-=a.width()/2}switch(Dt(n.anchor,Qo)){case li:F-=a.height();break;case ww:F-=a.height()/2}for(j=Math.round(j),F=Math.round(F),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)L=t[T],L.x+=A[T]+=j,L.y+=C[T]+=F,a.union(L.mark.bounds.union(L.bounds.translate(A[T],C[T]))),i&&e.dirty(L);return a}function _re(e,t,n){var i=xre(t),r=i.marks,a=n.bounds===$$?wre:Are,s=n.offset,o=n.columns||r.length,u=o<=0?1:Math.ceil(r.length/o),f=u*o,d,h,p,y,v,b,S;const _=AB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Dt(n.headerBand,Qo,null),d=Wm(e,i.rowheaders,r,o,u,-Dt(s,"rowHeader"),m6,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Dt(n.headerBand,Wo,null),h=Wm(e,i.colheaders,r,o,o,-Dt(s,"columnHeader"),m6,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Dt(n.footerBand,Qo,null),p=Wm(e,i.rowfooters,r,o,u,Dt(s,"rowFooter"),y6,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Dt(n.footerBand,Wo,null),y=Wm(e,i.colfooters,r,o,o,Dt(s,"columnFooter"),y6,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=Dt(n.titleAnchor,Qo),S=Dt(s,"rowTitle"),S=v===li?p+S:d-S,b=Dt(n.titleBand,Qo,.5),b6(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Dt(n.titleAnchor,Wo),S=Dt(s,"columnTitle"),S=v===li?y+S:h-S,b=Dt(n.titleBand,Wo,.5),b6(e,i.coltitle,S,1,_,b))}function wre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Are(e,t){return e.bounds[t]}function Wm(e,t,n,i,r,a,s,o,u,f,d,h,p,y){var v=n.length,b=0,S=0,_,w,A,C,M,k,T,O,N;if(!v)return b;for(_=d;_<v;_+=h)n[_]&&(b=s(b,u(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,C=t.length;w<C;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,C=t.length;w<C;++w,_+=h){for(k=t[w],M=k.mark.bounds,A=_;A>=0&&(T=n[A])==null;A-=p);o?(O=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),N=b):(O=b,N=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(k.bounds.translate(O-(k.x||0),N-(k.y||0))),k.x=O,k.y=N,e.dirty(k),S=s(S,M[f])}return S}function b6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function Cre(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Mre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function $re(e,t,n,i,r,a,s){const o=Cre(n,t),u=Mre(e,o("offset",0)),f=o("anchor",_$),d=f===li?1:f===ww?.5:0,h={align:Aw,bounds:o("bounds",$$),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Zr:h.anchor={x:Math.floor(i.x1)-u,column:li,y:d*(s||i.height()+2*i.y1),row:f};break;case Kr:h.anchor={x:Math.ceil(i.x2)+u,y:d*(s||i.height()+2*i.y1),row:f};break;case Zf:h.anchor={y:Math.floor(r.y1)-u,row:li,x:d*(a||r.width()+2*r.x1),column:f};break;case gl:h.anchor={y:Math.ceil(r.y2)+u,x:d*(a||r.width()+2*r.x1),column:f};break;case nre:h.anchor={x:u,y:u};break;case ire:h.anchor={x:a-u,y:u,column:li};break;case rre:h.anchor={x:u,y:s-u,row:li};break;case are:h.anchor={x:a-u,y:s-u,column:li,row:li};break}return h}function Tre(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,u,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Dre(e,n,n.items[0].items[0]),a=kre(n,a),u=2*n.padding,f=2*n.padding,a.empty()||(u=Math.ceil(a.width()+u),f=Math.ceil(a.height()+f)),i.type===fre&&Ore(n.items[0].items[0].items[0].items),r!==M$&&(n.x=s=0,n.y=o=0),n.width=u,n.height=f,to(a.set(s,o,s+u,o+f),n),n.mark.bounds.clear().union(a),n}function kre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Dre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&tg(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,u=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case Zr:r+=Math.ceil(s.bounds.width())+u;break;case Kr:case gl:break;default:a+=s.bounds.height()+u}switch((r||a)&&tg(e,n,r,a),s.orient){case Zr:d+=lf(t,n,s,o,1,1);break;case Kr:f+=lf(t,n,s,li,0,0)+u,d+=lf(t,n,s,o,1,1);break;case gl:f+=lf(t,n,s,o,0,0),d+=lf(t,n,s,li,-1,0,1)+u;break;default:f+=lf(t,n,s,o,0,0)}(f||d)&&tg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(tg(e,n,-f,0),tg(e,s,-f,0))}}function lf(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",u=n.datum.vgrad,f=o&&(a||!u)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=u&&a?d:0,p=u&&a?0:d,y=r<=0?0:f$(n);return Math.round(i===_$?h:i===li?p-y:.5*(d-y))}function tg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Ore(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Rre(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,u=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Zr||o===Kr?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==vb?o===Zr?(v=r.y2,y=r.y1):o===Kr?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Zr&&(v=i,y=0),A=u===_$?v:u===li?y:(v+y)/2,p&&p.text){switch(o){case Zf:case gl:w=h.bounds.height()+d;break;case Zr:_=h.bounds.width()+d;break;case Kr:_=-h.bounds.width()-d;break}Xn.clear().union(p.bounds),Xn.translate(_-(p.x||0),w-(p.y||0)),Ef(p,"x",_)|Ef(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Xn),p.mark.bounds.clear().union(Xn),e.dirty(p)),Xn.clear().union(p.bounds)}else Xn.clear();switch(Xn.union(h.bounds),o){case Zf:b=A,S=r.y1-Xn.height()-f;break;case Zr:b=r.x1-Xn.width()-f,S=A;break;case Kr:b=r.x2+Xn.width()+f,S=A;break;case gl:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return Ef(a,"x",b)|Ef(a,"y",S)&&(Xn.translate(b,S),e.dirty(a),a.bounds.clear().union(Xn),t.bounds.clear().union(Xn),e.dirty(a)),a.bounds}function CB(e){J.call(this,null,e)}pe(CB,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&_re(n,i,e.layout),zre(n,i,e)}),Nre(e.mark.group)?t.reflow():t}});function Nre(e){return e&&e.mark.role!=="legend-entry"}function zre(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new rn().set(0,0,r,a),o=s.clone(),u=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case w$:y=yre(h)?o:u,y.union(bre(e,h,r,a));break;case A$:d=h;break;case C$:f.push(Tre(e,h));break;case lre:case ure:case fB:case dB:case hB:case gB:case pB:case mB:o.union(h.bounds),u.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||Kr,p!==M$&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];AB(e,w,$re(w,_,n.legends,o,u,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===yB||n.autosize.type===vB||n.autosize.type===bB))switch(_.orient){case Zr:case Kr:s.add(w.x1,0).add(w.x2,0);break;case Zf:case gl:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(u),d&&s.union(Rre(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Fre(e,t,s,n)}function Fre(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,u=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-u)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===cre){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===M$?(f=0,h=0,u=s,d=o):a===yB?(u=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===vB?(u=Math.max(0,s-f-p),o=d+h+y):a===bB?(s=u+f+p,d=Math.max(0,o-h-y)):a===dre&&(s=u+f+p,o=d+h+y),e._resizeView(s,o,u,d,[f,h],r.resize)}const Lre=Object.freeze(Object.defineProperty({__proto__:null,bound:xB,identifier:T$,mark:SB,overlap:EB,render:wB,viewlayout:CB},Symbol.toStringTag,{value:"Module"}));function MB(e){J.call(this,null,e)}pe(MB,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=XM(a,s,e.minstep),u=e.format||tU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?eU(a,e.values,o):VM(a,o);return r&&(i.rem=r),r=f.map((d,h)=>ct({index:h/(f.length-1||1),value:d,label:u(d)})),e.extra&&r.length&&r.push(ct({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function $B(e){J.call(this,null,e)}function Ure(){return ct({})}function Bre(e){const t=Ed().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}pe($B,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Ure,a=e.key||ke,s=this.value;return re(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&te("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Bre(a)),t.visit(t.ADD,o=>{const u=a(o);let f=s.get(u);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(u,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const u=a(o),f=s.get(u);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const u=a(o),f=s.get(u);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function TB(e){J.call(this,null,e)}pe(TB,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(re(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||Fo,u=r.enter||Fo,f=r.exit||Fo,d=(a&&!s?r[a]:o)||Fo;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{u(h,e),o(h,e)}),n.modifies(u.output),n.modifies(o.output),d!==Fo&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Fo&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==Fo){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=u(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function kB(e){J.call(this,[],e)}pe(kB,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||A1,s=e.scale,o=+e.limit,u=XM(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===A1,d=e.format||aU(n,s,u,a,e.formatSpecifier,e.formatType,f),h=e.values||rU(s,u),p,y,v,b,S;return r&&(i.rem=r),a===A1?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,Ie(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ii(b=v||8),r=r.map((_,w)=>ct({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=h[r.length],r.push(ct({index:r.length,label:`…${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===fte?(p=s.domain(),y=ZL(s,p[0],Je(p)),h.length<3&&!e.values&&p[0]!==Je(p)&&(h=[p[0],Je(p)]),r=h.map((_,w)=>ct({index:w,label:d(_,w,h),value:_,perc:y(_)}))):(v=h.length-1,y=Ete(s),r=h.map((_,w)=>ct({index:w,label:d(_,w,h),value:_,perc:w?y(_):0,perc2:w===v?1:y(h[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const jre=e=>e.source.x,Pre=e=>e.source.y,Ire=e=>e.target.x,qre=e=>e.target.y;function k$(e){J.call(this,{},e)}k$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};pe(k$,J,{transform(e,t){var n=e.sourceX||jre,i=e.sourceY||Pre,r=e.targetX||Ire,a=e.targetY||qre,s=e.as||"path",o=e.orient||"vertical",u=e.shape||"line",f=x6.get(u+"-"+o)||x6.get(u);return f||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const DB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Hre=(e,t,n,i)=>DB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),OB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Gre=(e,t,n,i)=>OB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),RB=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Yre=(e,t,n,i)=>RB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Xre=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Vre=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Wre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Qre=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Zre=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},Kre=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=(t+i)/2;return"M"+t*r+","+t*a+"C"+u*r+","+u*a+" "+u*s+","+u*o+" "+i*s+","+i*o},x6=Ed({line:DB,"line-radial":Hre,arc:OB,"arc-radial":Gre,curve:RB,"curve-radial":Yre,"orthogonal-horizontal":Xre,"orthogonal-vertical":Vre,"orthogonal-radial":Wre,"diagonal-horizontal":Qre,"diagonal-vertical":Zre,"diagonal-radial":Kre});function D$(e){J.call(this,null,e)}D$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};pe(D$,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||vd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,f=u.map(a),d=f.length,h=s,p=(o-s)/V8(f),y=er(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=u[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Jre=5;function eae(e){const t=e.type;return!e.bins&&(t===Gf||t===Lp||t===Up)}function NB(e){return HM(e)&&e!==Ua}const tae=ra(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function zB(e){J.call(this,null,e),this.modified(!0)}pe(zB,J,{transform(e,t){var n=t.dataflow,i=this.value,r=nae(e);(!i||r!==i.type)&&(this.value=i=lt(r)());for(r in e)if(!tae[r]){if(r==="padding"&&NB(i.type))continue;Ie(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return lae(i,e,oae(i,e,rae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nae(e){var t=e.type,n="",i;return t===Ua?Ua+"-"+Gf:(iae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ua+"-":i===3?kd+"-":""),(n+t||Gf).toLowerCase())}function iae(e){const t=e.type;return HM(t)&&t!==zu&&t!==Fu&&(e.scheme||e.range&&e.range.length&&e.range.every(ve))}function rae(e,t,n){const i=aae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&eae(e),o,u;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const f=u>r[o]?o+1:u<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",u),r.splice(f,0,u)}return NB(a)&&t.padding&&r[0]!==Je(r)&&(r=sae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(FB(a,r,n)),a===jM&&e.unknown(t.domainImplicit?rw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&XM(e,t.nice)||null),r.length}function aae(e,t,n){return t?(e.domain(FB(e.type,t,n)),t.length):-1}function sae(e,t,n,i,r,a){var s=Math.abs(Je(n)-n[0]),o=s/(s-2*i),u=e===Qs?oC(t,null,o):e===Up?W1(t,null,o,.5):e===Lp?W1(t,null,o,r||1):e===ib?lC(t,null,o,a||1):sC(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function FB(e,t,n){if(YL(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ge(t))}return t}function oae(e,t,n){let i=t.bins;if(i&&!re(i)){const r=e.domain(),a=r[0],s=Je(r),o=i.step;let u=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||te("Scale bins parameter missing step property."),u<a&&(u=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=er(u,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===PM&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function lae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=uae(i,t,n);else if(t.scheme&&(a=cae(i,t,n),Ie(a))){if(e.interpolator)return e.interpolator(a);te(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&XL(i))return e.interpolator(sb(Cw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(GM(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(r):Ie(e.rangeRound)&&e.interpolate(r?zp:wl),a&&e.range(Cw(a,t.reverse))}function uae(e,t,n){e!==jL&&e!==fw&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===fw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*BM(n,r,i)]}function cae(e,t,n){var i=t.schemeExtent,r,a;return re(t.scheme)?a=sb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=YM(r),a||te(`Unrecognized scheme name: ${t.scheme}`)),n=e===ab?n+1:e===PM?n-1:e===Yf||e===rb?+t.schemeCount||Jre:n,XL(e)?S6(a,i,t.reverse):Ie(a)?QL(S6(a,i),n):e===jM?a:a.slice(0,n)}function S6(e,t,n){return Ie(e)&&(t||n)?WL(e,Cw(t||[0,1],n)):e}function Cw(e,t){return t?e.slice().reverse():e}function LB(e){J.call(this,null,e)}pe(LB,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ic(e.sort)),this.modified(n),t}});const E6="zero",UB="center",BB="normalize",jB=["y0","y1"];function O$(e){J.call(this,null,e)}O$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:E6,values:[E6,UB,BB]},{name:"as",type:"string",array:!0,length:2,default:jB}]};pe(O$,J,{transform(e,t){var n=e.as||jB,i=n[0],r=n[1],a=ic(e.sort),s=e.field||vd,o=e.offset===UB?fae:e.offset===BB?dae:hae,u,f,d,h;for(u=gae(t.source,e.groupby,a,s),f=0,d=u.length,h=u.max;f<d;++f)o(u[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function fae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,u;o<s;++o)u=e[o],u[i]=a,u[r]=a+=Math.abs(n(u))}function dae(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,u=0,f=0,d;u<o;++u)d=e[u],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function hae(e,t,n,i,r){for(var a=0,s=0,o=e.length,u=0,f,d;u<o;++u)d=e[u],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function gae(e,t,n,i){var r=[],a=b=>b(d),s,o,u,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,u=e.length;o<u;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,u=p.length;o<u;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const pae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:MB,datajoin:$B,encode:TB,legendentries:kB,linkpath:k$,pie:D$,scale:zB,sortitems:LB,stack:O$},Symbol.toStringTag,{value:"Module"}));var Oe=1e-6,Cy=1e-12,Xe=Math.PI,It=Xe/2,My=Xe/4,yi=Xe*2,Vt=180/Xe,Ge=Xe/180,Ke=Math.abs,Od=Math.atan,Nr=Math.atan2,Re=Math.cos,Qm=Math.ceil,PB=Math.exp,Mw=Math.hypot,$y=Math.log,AE=Math.pow,De=Math.sin,Ar=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,R$=Math.tan;function IB(e){return e>1?0:e<-1?Xe:Math.acos(e)}function zi(e){return e>1?It:e<-1?-It:Math.asin(e)}function Fn(){}function Ty(e,t){e&&w6.hasOwnProperty(e.type)&&w6[e.type](e,t)}var _6={Feature:function(e,t){Ty(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ty(n[i].geometry,t)}},w6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){$w(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)$w(n[i],t,0)},Polygon:function(e,t){A6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)A6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ty(n[i],t)}};function $w(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function A6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)$w(e[n],t,1);t.polygonEnd()}function Rs(e,t){e&&_6.hasOwnProperty(e.type)?_6[e.type](e,t):Ty(e,t)}var ky=new pi,Dy=new pi,qB,HB,Tw,kw,Dw,Ya={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){ky=new pi,Ya.lineStart=mae,Ya.lineEnd=yae},polygonEnd:function(){var e=+ky;Dy.add(e<0?yi+e:e),this.lineStart=this.lineEnd=this.point=Fn},sphere:function(){Dy.add(yi)}};function mae(){Ya.point=vae}function yae(){GB(qB,HB)}function vae(e,t){Ya.point=GB,qB=e,HB=t,e*=Ge,t*=Ge,Tw=e,kw=Re(t=t/2+My),Dw=De(t)}function GB(e,t){e*=Ge,t*=Ge,t=t/2+My;var n=e-Tw,i=n>=0?1:-1,r=i*n,a=Re(t),s=De(t),o=Dw*s,u=kw*a+o*Re(r),f=o*i*De(r);ky.add(Nr(f,u)),Tw=e,kw=a,Dw=s}function bae(e){return Dy=new pi,Rs(e,Ya),Dy*2}function Oy(e){return[Nr(e[1],e[0]),zi(e[2])]}function Uu(e){var t=e[0],n=e[1],i=Re(n);return[i*Re(t),i*De(t),De(n)]}function Zm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function CE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Km(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ry(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var zt,Ti,jt,Ki,du,YB,XB,kf,Pg,Po,Zs,ks={point:Ow,lineStart:C6,lineEnd:M6,polygonStart:function(){ks.point=WB,ks.lineStart=xae,ks.lineEnd=Sae,Pg=new pi,Ya.polygonStart()},polygonEnd:function(){Ya.polygonEnd(),ks.point=Ow,ks.lineStart=C6,ks.lineEnd=M6,ky<0?(zt=-(jt=180),Ti=-(Ki=90)):Pg>Oe?Ki=90:Pg<-Oe&&(Ti=-90),Zs[0]=zt,Zs[1]=jt},sphere:function(){zt=-(jt=180),Ti=-(Ki=90)}};function Ow(e,t){Po.push(Zs=[zt=e,jt=e]),t<Ti&&(Ti=t),t>Ki&&(Ki=t)}function VB(e,t){var n=Uu([e*Ge,t*Ge]);if(kf){var i=Kf(kf,n),r=[i[1],-i[0],0],a=Kf(r,i);Ry(a),a=Oy(a);var s=e-du,o=s>0?1:-1,u=a[0]*Vt*o,f,d=Ke(s)>180;d^(o*du<u&&u<o*e)?(f=a[1]*Vt,f>Ki&&(Ki=f)):(u=(u+360)%360-180,d^(o*du<u&&u<o*e)?(f=-a[1]*Vt,f<Ti&&(Ti=f)):(t<Ti&&(Ti=t),t>Ki&&(Ki=t))),d?e<du?Zi(zt,e)>Zi(zt,jt)&&(jt=e):Zi(e,jt)>Zi(zt,jt)&&(zt=e):jt>=zt?(e<zt&&(zt=e),e>jt&&(jt=e)):e>du?Zi(zt,e)>Zi(zt,jt)&&(jt=e):Zi(e,jt)>Zi(zt,jt)&&(zt=e)}else Po.push(Zs=[zt=e,jt=e]);t<Ti&&(Ti=t),t>Ki&&(Ki=t),kf=n,du=e}function C6(){ks.point=VB}function M6(){Zs[0]=zt,Zs[1]=jt,ks.point=Ow,kf=null}function WB(e,t){if(kf){var n=e-du;Pg.add(Ke(n)>180?n+(n>0?360:-360):n)}else YB=e,XB=t;Ya.point(e,t),VB(e,t)}function xae(){Ya.lineStart()}function Sae(){WB(YB,XB),Ya.lineEnd(),Ke(Pg)>Oe&&(zt=-(jt=180)),Zs[0]=zt,Zs[1]=jt,kf=null}function Zi(e,t){return(t-=e)<0?t+360:t}function Eae(e,t){return e[0]-t[0]}function $6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function _ae(e){var t,n,i,r,a,s,o;if(Ki=jt=-(zt=Ti=1/0),Po=[],Rs(e,ks),n=Po.length){for(Po.sort(Eae),t=1,i=Po[0],a=[i];t<n;++t)r=Po[t],$6(i,r[0])||$6(i,r[1])?(Zi(i[0],r[1])>Zi(i[0],i[1])&&(i[1]=r[1]),Zi(r[0],i[1])>Zi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Zi(i[1],r[0]))>s&&(s=o,zt=r[0],jt=i[1])}return Po=Zs=null,zt===1/0||Ti===1/0?[[NaN,NaN],[NaN,NaN]]:[[zt,Ti],[jt,Ki]]}var wg,Ny,zy,Fy,Ly,Uy,By,jy,Rw,Nw,zw,QB,ZB,ui,ci,fi,Jr={sphere:Fn,point:N$,lineStart:T6,lineEnd:k6,polygonStart:function(){Jr.lineStart=Cae,Jr.lineEnd=Mae},polygonEnd:function(){Jr.lineStart=T6,Jr.lineEnd=k6}};function N$(e,t){e*=Ge,t*=Ge;var n=Re(t);Qp(n*Re(e),n*De(e),De(t))}function Qp(e,t,n){++wg,zy+=(e-zy)/wg,Fy+=(t-Fy)/wg,Ly+=(n-Ly)/wg}function T6(){Jr.point=wae}function wae(e,t){e*=Ge,t*=Ge;var n=Re(t);ui=n*Re(e),ci=n*De(e),fi=De(t),Jr.point=Aae,Qp(ui,ci,fi)}function Aae(e,t){e*=Ge,t*=Ge;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=Nr(vi((s=ci*a-fi*r)*s+(s=fi*i-ui*a)*s+(s=ui*r-ci*i)*s),ui*i+ci*r+fi*a);Ny+=s,Uy+=s*(ui+(ui=i)),By+=s*(ci+(ci=r)),jy+=s*(fi+(fi=a)),Qp(ui,ci,fi)}function k6(){Jr.point=N$}function Cae(){Jr.point=$ae}function Mae(){KB(QB,ZB),Jr.point=N$}function $ae(e,t){QB=e,ZB=t,e*=Ge,t*=Ge,Jr.point=KB;var n=Re(t);ui=n*Re(e),ci=n*De(e),fi=De(t),Qp(ui,ci,fi)}function KB(e,t){e*=Ge,t*=Ge;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=ci*a-fi*r,o=fi*i-ui*a,u=ui*r-ci*i,f=Mw(s,o,u),d=zi(f),h=f&&-d/f;Rw.add(h*s),Nw.add(h*o),zw.add(h*u),Ny+=d,Uy+=d*(ui+(ui=i)),By+=d*(ci+(ci=r)),jy+=d*(fi+(fi=a)),Qp(ui,ci,fi)}function Tae(e){wg=Ny=zy=Fy=Ly=Uy=By=jy=0,Rw=new pi,Nw=new pi,zw=new pi,Rs(e,Jr);var t=+Rw,n=+Nw,i=+zw,r=Mw(t,n,i);return r<Cy&&(t=Uy,n=By,i=jy,Ny<Oe&&(t=zy,n=Fy,i=Ly),r=Mw(t,n,i),r<Cy)?[NaN,NaN]:[Nr(n,t)*Vt,zi(i/r)*Vt]}function Fw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Lw(e,t){return Ke(e)>Xe&&(e-=Math.round(e/yi)*yi),[e,t]}Lw.invert=Lw;function JB(e,t,n){return(e%=yi)?t||n?Fw(O6(e),R6(t,n)):O6(e):t||n?R6(t,n):Lw}function D6(e){return function(t,n){return t+=e,Ke(t)>Xe&&(t-=Math.round(t/yi)*yi),[t,n]}}function O6(e){var t=D6(e);return t.invert=D6(-e),t}function R6(e,t){var n=Re(e),i=De(e),r=Re(t),a=De(t);function s(o,u){var f=Re(u),d=Re(o)*f,h=De(o)*f,p=De(u),y=p*n+d*i;return[Nr(h*r-y*a,d*n-p*i),zi(y*r+h*a)]}return s.invert=function(o,u){var f=Re(u),d=Re(o)*f,h=De(o)*f,p=De(u),y=p*r-h*a;return[Nr(h*r+p*a,d*n+y*i),zi(y*n-d*i)]},s}function kae(e){e=JB(e[0]*Ge,e[1]*Ge,e.length>2?e[2]*Ge:0);function t(n){return n=e(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n}return t.invert=function(n){return n=e.invert(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n},t}function Dae(e,t,n,i,r,a){if(n){var s=Re(t),o=De(t),u=i*n;r==null?(r=t+i*yi,a=t-u/2):(r=N6(s,r),a=N6(s,a),(i>0?r<a:r>a)&&(r+=i*yi));for(var f,d=r;i>0?d>a:d<a;d-=u)f=Oy([s,-o*Re(d),-o*De(d)]),e.point(f[0],f[1])}}function N6(e,t){t=Uu(t),t[0]-=e,Ry(t);var n=IB(-t[1]);return((-t[2]<0?-n:n)+yi-Oe)%yi}function ej(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Fn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function N1(e,t){return Ke(e[0]-t[0])<Oe&&Ke(e[1]-t[1])<Oe}function Jm(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function tj(e,t,n,i,r){var a=[],s=[],o,u;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(N1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}_[0]+=2*Oe}a.push(w=new Jm(S,v,null,!0)),s.push(w.o=new Jm(S,null,w,!1)),a.push(w=new Jm(_,v,null,!1)),s.push(w.o=new Jm(_,null,w,!0))}}),!!a.length){for(s.sort(t),z6(a),z6(s),o=0,u=s.length;o<u;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,u=d.length;o<u;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function z6(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function ME(e){return Ke(e[0])<=Xe?e[0]:Ar(e[0])*((Ke(e[0])+Xe)%yi-Xe)}function Oae(e,t){var n=ME(t),i=t[1],r=De(i),a=[De(n),-Re(n),0],s=0,o=0,u=new pi;r===1?i=It+Oe:r===-1&&(i=-It-Oe);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=ME(y),b=y[1]/2+My,S=De(b),_=Re(b),w=0;w<p;++w,v=C,S=k,_=T,y=A){var A=h[w],C=ME(A),M=A[1]/2+My,k=De(M),T=Re(M),O=C-v,N=O>=0?1:-1,B=N*O,L=B>Xe,G=S*k;if(u.add(Nr(G*N*De(B),_*T+G*Re(B))),s+=L?O+N*yi:O,L^v>=n^C>=n){var H=Kf(Uu(y),Uu(A));Ry(H);var j=Kf(a,H);Ry(j);var F=(L^O>=0?-1:1)*zi(j[2]);(i>F||i===F&&(H[0]||H[1]))&&(o+=L^O>=0?1:-1)}}return(s<-Oe||s<Oe&&u<-Cy)^o&1}function nj(e,t,n,i){return function(r){var a=t(r),s=ej(),o=t(s),u=!1,f,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=X8(d);var C=Oae(f,i);d.length?(u||(r.polygonStart(),u=!0),tj(d,Nae,C,n,r)):C&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(C,M){e(C,M)&&r.point(C,M)}function v(C,M){a.point(C,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _(C,M){h.push([C,M]),o.point(C,M)}function w(){o.lineStart(),h=[]}function A(){_(h[0][0],h[0][1]),o.lineEnd();var C=o.clean(),M=s.result(),k,T=M.length,O,N,B;if(h.pop(),f.push(h),h=null,!!T){if(C&1){if(N=M[0],(O=N.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),k=0;k<O;++k)r.point((B=N[k])[0],B[1]);r.lineEnd()}return}T>1&&C&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(Rae))}}return p}}function Rae(e){return e.length>1}function Nae(e,t){return((e=e.x)[0]<0?e[1]-It-Oe:It-e[1])-((t=t.x)[0]<0?t[1]-It-Oe:It-t[1])}const F6=nj(function(){return!0},zae,Lae,[-Xe,-It]);function zae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Xe:-Xe,u=Ke(a-t);Ke(u-Xe)<Oe?(e.point(t,n=(n+s)/2>0?It:-It),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&u>=Xe&&(Ke(t-i)<Oe&&(t-=i*Oe),Ke(a-o)<Oe&&(a-=o*Oe),n=Fae(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Fae(e,t,n,i){var r,a,s=De(e-n);return Ke(s)>Oe?Od((De(t)*(a=Re(i))*De(n)-De(i)*(r=Re(t))*De(e))/(r*a*s)):(t+i)/2}function Lae(e,t,n,i){var r;if(e==null)r=n*It,i.point(-Xe,r),i.point(0,r),i.point(Xe,r),i.point(Xe,0),i.point(Xe,-r),i.point(0,-r),i.point(-Xe,-r),i.point(-Xe,0),i.point(-Xe,r);else if(Ke(e[0]-t[0])>Oe){var a=e[0]<t[0]?Xe:-Xe;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Uae(e){var t=Re(e),n=2*Ge,i=t>0,r=Ke(t)>Oe;function a(d,h,p,y){Dae(y,e,n,p,d,h)}function s(d,h){return Re(d)*Re(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,C=s(S,_),M=i?C?0:f(S,_):C?f(S+(S<0?Xe:-Xe),_):0;if(!h&&(v=y=C)&&d.lineStart(),C!==y&&(A=u(h,w),(!A||N1(h,A)||N1(w,A))&&(w[2]=1)),C!==y)b=0,C?(d.lineStart(),A=u(w,h),d.point(A[0],A[1])):(A=u(h,w),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^C){var k;!(M&p)&&(k=u(w,h,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}C&&(!h||!N1(h,w))&&d.point(w[0],w[1]),h=w,y=C,p=M},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function u(d,h,p){var y=Uu(d),v=Uu(h),b=[1,0,0],S=Kf(y,v),_=Zm(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var C=t*_/A,M=-t*w/A,k=Kf(b,S),T=Km(b,C),O=Km(S,M);CE(T,O);var N=k,B=Zm(T,N),L=Zm(N,N),G=B*B-L*(Zm(T,T)-1);if(!(G<0)){var H=vi(G),j=Km(N,(-B-H)/L);if(CE(j,T),j=Oy(j),!p)return j;var F=d[0],R=h[0],P=d[1],X=h[1],K;R<F&&(K=F,F=R,R=K);var z=R-F,W=Ke(z-Xe)<Oe,ne=W||z<Oe;if(!W&&X<P&&(K=P,P=X,X=K),ne?W?P+X>0^j[1]<(Ke(j[0]-F)<Oe?P:X):P<=j[1]&&j[1]<=X:z>Xe^(F<=j[0]&&j[0]<=R)){var se=Km(N,(-B+H)/L);return CE(se,T),[j,Oy(se)]}}}function f(d,h){var p=i?e:Xe-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return nj(s,o,a,i?[0,-e]:[-Xe,e-Xe])}function Bae(e,t,n,i,r,a){var s=e[0],o=e[1],u=t[0],f=t[1],d=0,h=1,p=u-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var Ag=1e9,e1=-Ag;function ij(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||u(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return Ke(f[0]-e)<Oe?d>0?0:3:Ke(f[0]-n)<Oe?d>0?2:1:Ke(f[1]-t)<Oe?d>0?1:0:d>0?3:2}function o(f,d){return u(f.x,d.x)}function u(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=ej(),p,y,v,b,S,_,w,A,C,M,k,T={point:O,lineStart:G,lineEnd:H,polygonStart:B,polygonEnd:L};function O(F,R){r(F,R)&&d.point(F,R)}function N(){for(var F=0,R=0,P=y.length;R<P;++R)for(var X=y[R],K=1,z=X.length,W=X[0],ne,se,ye=W[0],Ee=W[1];K<z;++K)ne=ye,se=Ee,W=X[K],ye=W[0],Ee=W[1],se<=i?Ee>i&&(ye-ne)*(i-se)>(Ee-se)*(e-ne)&&++F:Ee<=i&&(ye-ne)*(i-se)<(Ee-se)*(e-ne)&&--F;return F}function B(){d=h,p=[],y=[],k=!0}function L(){var F=N(),R=k&&F,P=(p=X8(p)).length;(R||P)&&(f.polygonStart(),R&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),P&&tj(p,o,F,a,f),f.polygonEnd()),d=f,p=y=v=null}function G(){T.point=j,y&&y.push(v=[]),M=!0,C=!1,w=A=NaN}function H(){p&&(j(b,S),_&&C&&h.rejoin(),p.push(h.result())),T.point=O,C&&d.lineEnd()}function j(F,R){var P=r(F,R);if(y&&v.push([F,R]),M)b=F,S=R,_=P,M=!1,P&&(d.lineStart(),d.point(F,R));else if(P&&C)d.point(F,R);else{var X=[w=Math.max(e1,Math.min(Ag,w)),A=Math.max(e1,Math.min(Ag,A))],K=[F=Math.max(e1,Math.min(Ag,F)),R=Math.max(e1,Math.min(Ag,R))];Bae(X,K,e,t,n,i)?(C||(d.lineStart(),d.point(X[0],X[1])),d.point(K[0],K[1]),P||d.lineEnd(),k=!1):P&&(d.lineStart(),d.point(F,R),k=!1)}w=F,A=R,C=P}return T}}function L6(e,t,n){var i=er(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function U6(e,t,n){var i=er(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function jae(){var e,t,n,i,r,a,s,o,u=10,f=u,d=90,h=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return er(Qm(i/d)*d,n,d).map(v).concat(er(Qm(o/h)*h,s,h).map(b)).concat(er(Qm(t/u)*u,e,u).filter(function(A){return Ke(A%d)>Oe}).map(p)).concat(er(Qm(a/f)*f,r,f).filter(function(A){return Ke(A%h)>Oe}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(S)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],_):[d,h]},_.stepMinor=function(A){return arguments.length?(u=+A[0],f=+A[1],_):[u,f]},_.precision=function(A){return arguments.length?(S=+A,p=L6(a,r,90),y=U6(t,e,S),v=L6(o,s,90),b=U6(i,n,S),_):S},_.extentMajor([[-180,-90+Oe],[180,90-Oe]]).extentMinor([[-180,-80-Oe],[180,80+Oe]])}const up=e=>e;var $E=new pi,Uw=new pi,rj,aj,Bw,jw,Ns={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Ns.lineStart=Pae,Ns.lineEnd=qae},polygonEnd:function(){Ns.lineStart=Ns.lineEnd=Ns.point=Fn,$E.add(Ke(Uw)),Uw=new pi},result:function(){var e=$E/2;return $E=new pi,e}};function Pae(){Ns.point=Iae}function Iae(e,t){Ns.point=sj,rj=Bw=e,aj=jw=t}function sj(e,t){Uw.add(jw*e-Bw*t),Bw=e,jw=t}function qae(){sj(rj,aj)}var Jf=1/0,Py=Jf,cp=-Jf,Iy=cp,qy={point:Hae,lineStart:Fn,lineEnd:Fn,polygonStart:Fn,polygonEnd:Fn,result:function(){var e=[[Jf,Py],[cp,Iy]];return cp=Iy=-(Py=Jf=1/0),e}};function Hae(e,t){e<Jf&&(Jf=e),e>cp&&(cp=e),t<Py&&(Py=t),t>Iy&&(Iy=t)}var Pw=0,Iw=0,Cg=0,Hy=0,Gy=0,_f=0,qw=0,Hw=0,Mg=0,oj,lj,Oa,Ra,_r={point:Bu,lineStart:B6,lineEnd:j6,polygonStart:function(){_r.lineStart=Xae,_r.lineEnd=Vae},polygonEnd:function(){_r.point=Bu,_r.lineStart=B6,_r.lineEnd=j6},result:function(){var e=Mg?[qw/Mg,Hw/Mg]:_f?[Hy/_f,Gy/_f]:Cg?[Pw/Cg,Iw/Cg]:[NaN,NaN];return Pw=Iw=Cg=Hy=Gy=_f=qw=Hw=Mg=0,e}};function Bu(e,t){Pw+=e,Iw+=t,++Cg}function B6(){_r.point=Gae}function Gae(e,t){_r.point=Yae,Bu(Oa=e,Ra=t)}function Yae(e,t){var n=e-Oa,i=t-Ra,r=vi(n*n+i*i);Hy+=r*(Oa+e)/2,Gy+=r*(Ra+t)/2,_f+=r,Bu(Oa=e,Ra=t)}function j6(){_r.point=Bu}function Xae(){_r.point=Wae}function Vae(){uj(oj,lj)}function Wae(e,t){_r.point=uj,Bu(oj=Oa=e,lj=Ra=t)}function uj(e,t){var n=e-Oa,i=t-Ra,r=vi(n*n+i*i);Hy+=r*(Oa+e)/2,Gy+=r*(Ra+t)/2,_f+=r,r=Ra*e-Oa*t,qw+=r*(Oa+e),Hw+=r*(Ra+t),Mg+=r*3,Bu(Oa=e,Ra=t)}function cj(e){this._context=e}cj.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yi);break}}},result:Fn};var Gw=new pi,TE,fj,dj,$g,Tg,fp={point:Fn,lineStart:function(){fp.point=Qae},lineEnd:function(){TE&&hj(fj,dj),fp.point=Fn},polygonStart:function(){TE=!0},polygonEnd:function(){TE=null},result:function(){var e=+Gw;return Gw=new pi,e}};function Qae(e,t){fp.point=hj,fj=$g=e,dj=Tg=t}function hj(e,t){$g-=e,Tg-=t,Gw.add(vi($g*$g+Tg*Tg)),$g=e,Tg=t}let P6,Yy,I6,q6;class H6{constructor(t){this._append=t==null?gj:Zae(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==I6||this._append!==Yy){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,I6=i,Yy=this._append,q6=this._,this._=r}this._+=q6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function gj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Zae(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return gj;if(t!==P6){const n=10**t;P6=t,Yy=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Yy}function pj(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Rs(o,r(a))),a.result()}return s.area=function(o){return Rs(o,r(Ns)),Ns.result()},s.measure=function(o){return Rs(o,r(fp)),fp.result()},s.bounds=function(o){return Rs(o,r(qy)),qy.result()},s.centroid=function(o){return Rs(o,r(_r)),_r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,up):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new H6(n)):new cj(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const u=Math.floor(o);if(!(u>=0))throw new RangeError(`invalid digits: ${o}`);n=u}return t===null&&(a=new H6(n)),s},s.projection(e).digits(n).context(t)}function bb(e){return function(t){var n=new Yw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Yw(){}Yw.prototype={constructor:Yw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function z$(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Rs(n,e.stream(qy)),t(qy.result()),i!=null&&e.clipExtent(i),e}function xb(e,t,n){return z$(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,u])},n)}function F$(e,t,n){return xb(e,[[0,0],t],n)}function L$(e,t,n){return z$(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function U$(e,t,n){return z$(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var G6=16,Kae=Re(30*Ge);function Y6(e,t){return+t?ese(e,t):Jae(e)}function Jae(e){return bb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ese(e,t){function n(i,r,a,s,o,u,f,d,h,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var C=s+p,M=o+y,k=u+v,T=vi(C*C+M*M+k*k),O=zi(k/=T),N=Ke(Ke(k)-1)<Oe||Ke(a-h)<Oe?(a+h)/2:Nr(M,C),B=e(N,O),L=B[0],G=B[1],H=L-i,j=G-r,F=w*H-_*j;(F*F/A>t||Ke((_*H+w*j)/A-.5)>.3||s*p+o*y+u*v<Kae)&&(n(i,r,a,s,o,u,L,G,N,C/=T,M/=T,k,b,S),S.point(L,G),n(L,G,N,C,M,k,f,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,u,f,d,h,p,y,v,b,S={point:_,lineStart:w,lineEnd:C,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(O,N){O=e(O,N),i.point(O[0],O[1])}function w(){h=NaN,S.point=A,i.lineStart()}function A(O,N){var B=Uu([O,N]),L=e(O,N);n(h,p,d,y,v,b,h=L[0],p=L[1],d=O,y=B[0],v=B[1],b=B[2],G6,i),i.point(h,p)}function C(){S.point=_,i.lineEnd()}function M(){w(),S.point=k,S.lineEnd=T}function k(O,N){A(r=O,N),a=h,s=p,o=y,u=v,f=b,S.point=A}function T(){n(h,p,d,y,v,b,a,s,r,o,u,f,G6,i),S.lineEnd=C,C()}return S}}var tse=bb({point:function(e,t){this.stream.point(e*Ge,t*Ge)}});function nse(e){return bb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function ise(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function X6(e,t,n,i,r,a){if(!a)return ise(e,t,n,i,r);var s=Re(a),o=De(a),u=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[u*b-f*S+t,n-f*b-u*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ts(e){return mj(function(){return e})()}function mj(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,u=0,f=0,d,h=0,p=1,y=1,v=null,b=F6,S=null,_,w,A,C=up,M=.5,k,T,O,N,B;function L(F){return O(F[0]*Ge,F[1]*Ge)}function G(F){return F=O.invert(F[0],F[1]),F&&[F[0]*Vt,F[1]*Vt]}L.stream=function(F){return N&&B===F?N:N=tse(nse(d)(b(k(C(B=F)))))},L.preclip=function(F){return arguments.length?(b=F,v=void 0,j()):b},L.postclip=function(F){return arguments.length?(C=F,S=_=w=A=null,j()):C},L.clipAngle=function(F){return arguments.length?(b=+F?Uae(v=F*Ge):(v=null,F6),j()):v*Vt},L.clipExtent=function(F){return arguments.length?(C=F==null?(S=_=w=A=null,up):ij(S=+F[0][0],_=+F[0][1],w=+F[1][0],A=+F[1][1]),j()):S==null?null:[[S,_],[w,A]]},L.scale=function(F){return arguments.length?(n=+F,H()):n},L.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],H()):[i,r]},L.center=function(F){return arguments.length?(a=F[0]%360*Ge,s=F[1]%360*Ge,H()):[a*Vt,s*Vt]},L.rotate=function(F){return arguments.length?(o=F[0]%360*Ge,u=F[1]%360*Ge,f=F.length>2?F[2]%360*Ge:0,H()):[o*Vt,u*Vt,f*Vt]},L.angle=function(F){return arguments.length?(h=F%360*Ge,H()):h*Vt},L.reflectX=function(F){return arguments.length?(p=F?-1:1,H()):p<0},L.reflectY=function(F){return arguments.length?(y=F?-1:1,H()):y<0},L.precision=function(F){return arguments.length?(k=Y6(T,M=F*F),j()):vi(M)},L.fitExtent=function(F,R){return xb(L,F,R)},L.fitSize=function(F,R){return F$(L,F,R)},L.fitWidth=function(F,R){return L$(L,F,R)},L.fitHeight=function(F,R){return U$(L,F,R)};function H(){var F=X6(n,0,0,p,y,h).apply(null,t(a,s)),R=X6(n,i-F[0],r-F[1],p,y,h);return d=JB(o,u,f),T=Fw(t,R),O=Fw(d,T),k=Y6(T,M),j()}function j(){return N=B=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&G,H()}}function B$(e){var t=0,n=Xe/3,i=mj(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ge,n=a[1]*Ge):[t*Vt,n*Vt]},r}function rse(e){var t=Re(e);function n(i,r){return[i*t,De(r)/t]}return n.invert=function(i,r){return[i/t,zi(r*t)]},n}function ase(e,t){var n=De(e),i=(n+De(t))/2;if(Ke(i)<Oe)return rse(e);var r=1+n*(2*i-n),a=vi(r)/i;function s(o,u){var f=vi(r-2*i*De(u))/i;return[f*De(o*=i),a-f*Re(o)]}return s.invert=function(o,u){var f=a-u,d=Nr(o,Ke(f))*Ar(f);return f*i<0&&(d-=Xe*Ar(o)*Ar(f)),[d/i,zi((r-(o*o+f*f)*i*i)/(2*i))]},s}function Xy(){return B$(ase).scale(155.424).center([0,33.6442])}function yj(){return Xy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function sse(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ose(){var e,t,n=yj(),i,r=Xy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Xy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,u,f={point:function(p,y){u=[p,y]}};function d(p){var y=p[0],v=p[1];return u=null,i.point(y,v),u||(a.point(y,v),u)||(o.point(y,v),u)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=sse([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Oe,b+.12*y+Oe],[v-.214*y-Oe,b+.234*y-Oe]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Oe,b+.166*y+Oe],[v-.115*y-Oe,b+.234*y-Oe]]).stream(f),h()},d.fitExtent=function(p,y){return xb(d,p,y)},d.fitSize=function(p,y){return F$(d,p,y)},d.fitWidth=function(p,y){return L$(d,p,y)},d.fitHeight=function(p,y){return U$(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function vj(e){return function(t,n){var i=Re(t),r=Re(n),a=e(i*r);return a===1/0?[2,0]:[a*r*De(t),a*De(n)]}}function Zp(e){return function(t,n){var i=vi(t*t+n*n),r=e(i),a=De(r),s=Re(r);return[Nr(t*a,i*s),zi(i&&n*a/i)]}}var bj=vj(function(e){return vi(2/(1+e))});bj.invert=Zp(function(e){return 2*zi(e/2)});function lse(){return ts(bj).scale(124.75).clipAngle(180-.001)}var xj=vj(function(e){return(e=IB(e))&&e/De(e)});xj.invert=Zp(function(e){return e});function use(){return ts(xj).scale(79.4188).clipAngle(180-.001)}function Sb(e,t){return[e,$y(R$((It+t)/2))]}Sb.invert=function(e,t){return[e,2*Od(PB(t))-It]};function cse(){return Sj(Sb).scale(961/yi)}function Sj(e){var t=ts(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,u,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=u=f=null:(s=+h[0][0],o=+h[0][1],u=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[u,f]]};function d(){var h=Xe*i(),p=t(kae(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Sb?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,u),f]]:[[s,Math.max(p[1]-h,o)],[u,Math.min(p[1]+h,f)]])}return d()}function t1(e){return R$((It+e)/2)}function fse(e,t){var n=Re(e),i=e===t?De(e):$y(n/Re(t))/$y(t1(t)/t1(e)),r=n*AE(t1(e),i)/i;if(!i)return Sb;function a(s,o){r>0?o<-It+Oe&&(o=-It+Oe):o>It-Oe&&(o=It-Oe);var u=r/AE(t1(o),i);return[u*De(i*s),r-u*Re(i*s)]}return a.invert=function(s,o){var u=r-o,f=Ar(i)*vi(s*s+u*u),d=Nr(s,Ke(u))*Ar(u);return u*i<0&&(d-=Xe*Ar(s)*Ar(u)),[d/i,2*Od(AE(r/f,1/i))-It]},a}function dse(){return B$(fse).scale(109.5).parallels([30,30])}function Vy(e,t){return[e,t]}Vy.invert=Vy;function hse(){return ts(Vy).scale(152.63)}function gse(e,t){var n=Re(e),i=e===t?De(e):(n-Re(t))/(t-e),r=n/i+e;if(Ke(i)<Oe)return Vy;function a(s,o){var u=r-o,f=i*s;return[u*De(f),r-u*Re(f)]}return a.invert=function(s,o){var u=r-o,f=Nr(s,Ke(u))*Ar(u);return u*i<0&&(f-=Xe*Ar(s)*Ar(u)),[f/i,r-Ar(i)*vi(s*s+u*u)]},a}function pse(){return B$(gse).scale(131.154).center([0,13.9389])}var Ig=1.340264,qg=-.081106,Hg=893e-6,Gg=.003796,Wy=vi(3)/2,mse=12;function Ej(e,t){var n=zi(Wy*De(t)),i=n*n,r=i*i*i;return[e*Re(n)/(Wy*(Ig+3*qg*i+r*(7*Hg+9*Gg*i))),n*(Ig+qg*i+r*(Hg+Gg*i))]}Ej.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,u;a<mse&&(o=n*(Ig+qg*i+r*(Hg+Gg*i))-t,u=Ig+3*qg*i+r*(7*Hg+9*Gg*i),n-=s=o/u,i=n*n,r=i*i*i,!(Ke(s)<Cy));++a);return[Wy*e*(Ig+3*qg*i+r*(7*Hg+9*Gg*i))/Re(n),zi(De(n)/Wy)]};function yse(){return ts(Ej).scale(177.158)}function _j(e,t){var n=Re(t),i=Re(e)*n;return[n*De(e)/i,De(t)/i]}_j.invert=Zp(Od);function vse(){return ts(_j).scale(144.049).clipAngle(60)}function bse(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,u=null,f,d,h,p=1,y=1,v=bb({point:function(C,M){var k=A([C,M]);this.stream.point(k[0],k[1])}}),b=up,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A(C){var M=C[0]*p,k=C[1]*y;if(a){var T=k*s-M*o;M=M*s+k*o,k=T}return[M+t,k+n]}return A.invert=function(C){var M=C[0]-t,k=C[1]-n;if(a){var T=k*s+M*o;M=M*s-k*o,k=T}return[M/p,k/y]},A.stream=function(C){return S&&_===C?S:S=v(b(_=C))},A.postclip=function(C){return arguments.length?(b=C,u=f=d=h=null,w()):b},A.clipExtent=function(C){return arguments.length?(b=C==null?(u=f=d=h=null,up):ij(u=+C[0][0],f=+C[0][1],d=+C[1][0],h=+C[1][1]),w()):u==null?null:[[u,f],[d,h]]},A.scale=function(C){return arguments.length?(e=+C,w()):e},A.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],w()):[t,n]},A.angle=function(C){return arguments.length?(a=C%360*Ge,o=De(a),s=Re(a),w()):a*Vt},A.reflectX=function(C){return arguments.length?(i=C?-1:1,w()):i<0},A.reflectY=function(C){return arguments.length?(r=C?-1:1,w()):r<0},A.fitExtent=function(C,M){return xb(A,C,M)},A.fitSize=function(C,M){return F$(A,C,M)},A.fitWidth=function(C,M){return L$(A,C,M)},A.fitHeight=function(C,M){return U$(A,C,M)},A}function wj(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}wj.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Ke(r)>Oe&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function xse(){return ts(wj).scale(175.295)}function Aj(e,t){return[Re(t)*De(e),De(t)]}Aj.invert=Zp(zi);function Sse(){return ts(Aj).scale(249.5).clipAngle(90+Oe)}function Cj(e,t){var n=Re(t),i=1+Re(e)*n;return[n*De(e)/i,De(t)/i]}Cj.invert=Zp(function(e){return 2*Od(e)});function Ese(){return ts(Cj).scale(250).clipAngle(142)}function Mj(e,t){return[$y(R$((It+t)/2)),-e]}Mj.invert=function(e,t){return[-t,2*Od(PB(e))-It]};function _se(){var e=Sj(Mj),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var wse=Math.abs,Xw=Math.cos,Qy=Math.sin,Ase=1e-6,$j=Math.PI,Vw=$j/2,V6=Cse(2);function W6(e){return e>1?Vw:e<-1?-Vw:Math.asin(e)}function Cse(e){return e>0?Math.sqrt(e):0}function Mse(e,t){var n=e*Qy(t),i=30,r;do t-=r=(t+Qy(t)-n)/(1+Xw(t));while(wse(r)>Ase&&--i>0);return t/2}function $se(e,t,n){function i(r,a){return[e*r*Xw(a=Mse(n,a)),t*Qy(a)]}return i.invert=function(r,a){return a=W6(a/t),[r/(e*Xw(a)),W6((2*a+Qy(2*a))/n)]},i}var Tse=$se(V6/Vw,V6,$j);function kse(){return ts(Tse).scale(169.529)}const Dse=pj(),Ww=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Ose(e,t){return function n(){const i=t();return i.type=e,i.path=pj().projection(i),i.copy=i.copy||function(){const r=n();return Ww.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},HL(i)}}function j$(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Zy[e]=Ose(e,t),this):Zy[e]||null}function Tj(e){return e&&e.path||Dse}const Zy={albers:yj,albersusa:ose,azimuthalequalarea:lse,azimuthalequidistant:use,conicconformal:dse,conicequalarea:Xy,conicequidistant:pse,equalEarth:yse,equirectangular:hse,gnomonic:vse,identity:bse,mercator:cse,mollweide:kse,naturalEarth1:xse,orthographic:Sse,stereographic:Ese,transversemercator:_se};for(const e in Zy)j$(e,Zy[e]);function Rse(){}const Cs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function kj(){var e=1,t=1,n=o;function i(u,f){return f.map(d=>r(u,d))}function r(u,f){var d=[],h=[];return a(u,f,p=>{n(p,u,f),Nse(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(zse((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(u,f,d){var h=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=u[0]>=f,Cs[S<<1].forEach(A);++y<e-1;)b=S,S=u[y+1]>=f,Cs[b|S<<1].forEach(A);for(Cs[S<<0].forEach(A);++v<t-1;){for(y=-1,S=u[v*e+e]>=f,_=u[v*e]>=f,Cs[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=u[v*e+e+y+1]>=f,w=_,_=u[v*e+y+1]>=f,Cs[b|S<<1|_<<2|w<<3].forEach(A);Cs[S|_<<3].forEach(A)}for(y=-1,_=u[v*e]>=f,Cs[_<<2].forEach(A);++y<e-1;)w=_,_=u[v*e+y+1]>=f,Cs[_<<2|w<<3].forEach(A);Cs[_<<3].forEach(A);function A(C){var M=[C[0][0]+y,C[0][1]+v],k=[C[1][0]+y,C[1][1]+v],T=s(M),O=s(k),N,B;(N=p[T])?(B=h[O])?(delete p[N.end],delete h[B.start],N===B?(N.ring.push(k),d(N.ring)):h[N.start]=p[B.end]={start:N.start,end:B.end,ring:N.ring.concat(B.ring)}):(delete p[N.end],N.ring.push(k),p[N.end=O]=N):(N=h[O])?(B=p[T])?(delete h[N.start],delete p[B.end],N===B?(N.ring.push(k),d(N.ring)):h[B.start]=p[N.end]={start:B.start,end:N.end,ring:B.ring.concat(N.ring)}):(delete h[N.start],N.ring.unshift(M),h[N.start=T]=N):h[T]=p[O]={start:T,end:O,ring:[M,k]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function o(u,f,d){u.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],h[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],h[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(u){if(!arguments.length)return[e,t];var f=Math.floor(u[0]),d=Math.floor(u[1]);return f>=0&&d>=0||te("invalid size"),e=f,t=d,i},i.smooth=function(u){return arguments.length?(n=u?o:Rse,i):n===o},i}function Nse(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function zse(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Fse(e,t[n]))return r;return 0}function Fse(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var u=e[a],f=u[0],d=u[1],h=e[o],p=h[0],y=h[1];if(Lse(u,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Lse(e,t,n){var i;return Use(e,t,n)&&Bse(e[i=+(e[0]===t[0])],n[i],t[i])}function Use(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Bse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Dj(e,t,n){return function(i){var r=Ia(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,u=t?ol(a,s,e):o/(e+1);return er(a+u,s,u)}}function P$(e){J.call(this,null,e)}P$.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};pe(P$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ni,a=kj().smooth(e.smooth!==!1),s=e.thresholds||jse(i,r,e),o=e.as===null?null:e.as||"contour",u=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,re(s)?s:s(d.values));Pse(h,d,f,e),h.forEach(p=>{u.push(Uv(f,ct(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function jse(e,t,n){const i=Dj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>_u(t(r).values)))}function Pse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Ie(r)&&(r=r(n,i)),Ie(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(st(r)?r:r[0])||1,o=(st(r)?r:r[1])||1,u=a&&a[0]||0,f=a&&a[1]||0;e.forEach(Oj(t,s,o,u,f))}function Oj(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function u(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(u),h}}function Q6(e,t,n){const i=e>=0?e:RC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function kE(e){return Ie(e)?e:ii(+e)}function Rj(){var e=u=>u[0],t=u=>u[1],n=vd,i=[-1,-1],r=960,a=500,s=2;function o(u,f){const d=Q6(i[0],u,e)>>s,h=Q6(i[1],u,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;u.forEach(C=>{const M=p+(+e(C)>>s),k=y+(+t(C)>>s);M>=0&&M<v&&k>=0&&k<b&&(S[M+k*v]+=+n(C))}),d>0&&h>0?(uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h)):d>0?(uf(v,b,S,_,d),uf(v,b,_,S,d),uf(v,b,S,_,d),w=_):h>0&&(cf(v,b,S,_,h),cf(v,b,_,S,h),cf(v,b,S,_,h),w=_);const A=f?Math.pow(2,-2*s):1/V8(w);for(let C=0,M=v*b;C<M;++C)w[C]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(u){return arguments.length?(e=kE(u),o):e},o.y=function(u){return arguments.length?(t=kE(u),o):t},o.weight=function(u){return arguments.length?(n=kE(u),o):n},o.size=function(u){if(!arguments.length)return[r,a];var f=+u[0],d=+u[1];return f>=0&&d>=0||te("invalid size"),r=f,a=d,o},o.cellSize=function(u){return arguments.length?((u=+u)>=1||te("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),o):1<<s},o.bandwidth=function(u){return arguments.length?(u=Se(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&te("invalid bandwidth"),i=u,o):i},o}function uf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,u=0;o<e+r;++o)o<e&&(u+=n[o+s*e]),o>=r&&(o>=a&&(u-=n[o-a+s*e]),i[o-r+s*e]=u/Math.min(o+1,e-1+a-o,a))}function cf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,u=0;o<t+r;++o)o<t&&(u+=n[s+o*e]),o>=r&&(o>=a&&(u-=n[s+(o-a)*e]),i[s+(o-r)*e]=u/Math.min(o+1,t-1+a-o,a))}function I$(e){J.call(this,null,e)}I$.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Ise=["x","y","weight","size","cellSize","bandwidth"];function Nj(e,t){return Ise.forEach(n=>t[n]!=null?e[n](t[n]):0),e}pe(I$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=qse(i,e.groupby),a=(e.groupby||[]).map(qt),s=Nj(Rj(),e),o=e.as||"grid",u=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return u=r.map(d=>ct(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function qse(e,t){var n=[],i=d=>d(o),r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function q$(e){J.call(this,null,e)}q$.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};pe(q$,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=kj().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Dj(e.count||10,e.nice,!!r),s=e.size,o,u;return r||(r=t.materialize(t.SOURCE).source,o=Nj(Rj(),e)(r,!0),u=Oj(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=re(a)?a:a(r),r=i.size(s)(r,a),u&&r.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ct),n}});const Qw="Feature",H$="FeatureCollection",Hse="MultiPoint";function G$(e){J.call(this,null,e)}G$.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};pe(G$,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&ni,u=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Kn(o))||a&&t.modified(Kn(a))||s&&t.modified(Kn(s)),(!this.value||f)&&(u=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(u,d=>n.push(o(d))),a&&s&&(t.visit(u,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:Qw,geometry:{type:Hse,coordinates:i}})),this.value={type:H$,features:n}}});function Y$(e){J.call(this,null,e)}Y$.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};pe(Y$,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ni,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Tj(e.projection),n.materialize().reflow()):s=r===ni||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=Gse(i,e.pointRadius);return n.visit(s,u=>u[a]=i(r(u))),i.pointRadius(o),n.modifies(a)}});function Gse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function X$(e){J.call(this,null,e)}X$.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};pe(X$,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],u;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(u=t.modified(i.fields)||t.modified(r.fields),t.visit(u?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function V$(e){J.call(this,null,e)}V$.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};pe(V$,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Yse(Tj(e.projection),e.field||kr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function Yse(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function W$(e){J.call(this,[],e),this.generator=jae()}W$.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};pe(W$,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Ie(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(q9(n[0],r)):t.add.push(ct(r)),n[0]=r,t}});function Q$(e){J.call(this,null,e)}Q$.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};pe(Q$,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ni,a=Vse(e.opacity,e),s=Xse(e.color,e),o=e.as||"image",u={$x:0,$y:0,$value:0,$max:i?_u(n.map(f=>_u(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=Pe({},f,u);i||(h.$max=_u(d.values||[])),f[o]=Wse(d,h,s.dep?s:ii(s(h)),a.dep?a:ii(a(h)))}),t.reflow(!0).modifies(o)}});function Xse(e,t){let n;return Ie(e)?(n=i=>cl(e(i,t)),n.dep=zj(e)):n=ii(cl(e||"#888")),n}function Vse(e,t){let n;return Ie(e)?(n=i=>e(i,t),n.dep=zj(e)):e?n=ii(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function zj(e){if(!Ie(e))return!1;const t=ra(Kn(e));return t.$x||t.$y||t.$value||t.$max}function Wse(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,u=e.x2||r,f=e.y2||a,d=e.values,h=d?S=>d[S]:Ho,p=il(u-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,u-s,f-o),b=v.data;for(let S=o,_=0;S<f;++S){t.$y=S-o;for(let w=s,A=S*r;w<u;++w,_+=4){t.$x=w-s,t.$value=h(w+A);const C=n(t);b[_+0]=C.r,b[_+1]=C.g,b[_+2]=C.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function Fj(e){J.call(this,null,e),this.modified(!0)}pe(Fj,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Zse(e.type),Ww.forEach(i=>{e[i]!=null&&Z6(n,i,e[i])})):Ww.forEach(i=>{e.modified(i)&&Z6(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Qse(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Qse(e,t){const n=Kse(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Zse(e){const t=j$((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function Z6(e,t,n){Ie(e[t])&&e[t](n)}function Kse(e){return e=Se(e),e.length===1?e[0]:{type:H$,features:e.reduce((t,n)=>t.concat(Jse(n)),[])}}function Jse(e){return e.type===H$?e.features:Se(e).filter(t=>t!=null).map(t=>t.type===Qw?t:{type:Qw,geometry:t})}const eoe=Object.freeze(Object.defineProperty({__proto__:null,contour:q$,geojson:G$,geopath:Y$,geopoint:X$,geoshape:V$,graticule:W$,heatmap:Q$,isocontour:P$,kde2d:I$,projection:Fj},Symbol.toStringTag,{value:"Module"}));function toe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,u=0,f=0;for(a=0;a<s;++a)o=n[a],u+=o.x,f+=o.y;for(u=(u/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=u,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function noe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Lj(this.cover(t,n),t,n,e)}function Lj(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,u=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=h));return r[w]=a,r[_]=s,e}function ioe(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),u=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<u&&(u=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(u>d||f>h)return this;for(this.cover(u,f).cover(d,h),n=0;n<i;++n)Lj(this,s[n],o[n],e[n]);return this}function roe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,u,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,u=new Array(4),u[f]=o,o=u,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function aoe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function soe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function di(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function ooe(e,t,n){var i,r=this._x0,a=this._y0,s,o,u,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new di(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(u=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+u)/2,_=(o+f)/2;p.push(new di(y[3],S,_,u,f),new di(y[2],s,_,S,f),new di(y[1],S,o,u,_),new di(y[0],s,o,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),C=w*w+A*A;if(C<n){var M=Math.sqrt(n=C);r=e-M,a=t-M,d=e+M,h=t+M,i=y.data}}return i}function loe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,u=this._x1,f=this._y1,d,h,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+u)/2))?s=p:u=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function uoe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function coe(){return this._root}function foe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function doe(e){var t=[],n,i=this._root,r,a,s,o,u;for(i&&t.push(new di(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,u=n.y1)&&i.length){var f=(a+o)/2,d=(s+u)/2;(r=i[3])&&t.push(new di(r,f,d,o,u)),(r=i[2])&&t.push(new di(r,a,d,f,u)),(r=i[1])&&t.push(new di(r,f,s,o,d)),(r=i[0])&&t.push(new di(r,a,s,f,d))}return this}function hoe(e){var t=[],n=[],i;for(this._root&&t.push(new di(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,u=i.x1,f=i.y1,d=(s+u)/2,h=(o+f)/2;(a=r[0])&&t.push(new di(a,s,o,d,h)),(a=r[1])&&t.push(new di(a,d,o,u,h)),(a=r[2])&&t.push(new di(a,s,h,d,f)),(a=r[3])&&t.push(new di(a,d,h,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function goe(e){return e[0]}function poe(e){return arguments.length?(this._x=e,this):this._x}function moe(e){return e[1]}function yoe(e){return arguments.length?(this._y=e,this):this._y}function Z$(e,t,n){var i=new K$(t??goe,n??moe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function K$(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function K6(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xi=Z$.prototype=K$.prototype;xi.copy=function(){var e=new K$(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=K6(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=K6(i));return e};xi.add=noe;xi.addAll=ioe;xi.cover=roe;xi.data=aoe;xi.extent=soe;xi.find=ooe;xi.remove=loe;xi.removeAll=uoe;xi.root=coe;xi.size=foe;xi.visit=doe;xi.visitAfter=hoe;xi.x=poe;xi.y=yoe;function hi(e){return function(){return e}}function Zo(e){return(e()-.5)*1e-6}function voe(e){return e.x+e.vx}function boe(e){return e.y+e.vy}function xoe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=hi(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,S,_=0;_<a;++_)for(h=Z$(t,voe,boe).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(w);function w(A,C,M,k,T){var O=A.data,N=A.r,B=b+N;if(O){if(O.index>p.index){var L=y-O.x-O.vx,G=v-O.y-O.vy,H=L*L+G*G;H<B*B&&(L===0&&(L=Zo(i),H+=L*L),G===0&&(G=Zo(i),H+=G*G),H=(B-(H=Math.sqrt(H)))/H*r,p.vx+=(L*=H)*(B=(N*=N)/(S+N)),p.vy+=(G*=H)*B,O.vx-=L*(B=1-B),O.vy-=G*B)}return}return C>y+B||k<y-B||M>v+B||T<v-B}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function u(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,u()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:hi(+f),u(),s):e},s}function Soe(e){return e.index}function J6(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Eoe(e){var t=Soe,n=h,i,r=hi(30),a,s,o,u,f,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,C,M,k,T,O,N,B;A<w;++A)C=e[A],M=C.source,k=C.target,T=k.x+k.vx-M.x-M.vx||Zo(f),O=k.y+k.vy-M.y-M.vy||Zo(f),N=Math.sqrt(T*T+O*O),N=(N-a[A])/N*S*i[A],T*=N,O*=N,k.vx-=T*(B=u[A]),k.vy-=O*B,M.vx+=T*(B=1-B),M.vy+=O*B}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map((M,k)=>[t(M,k,s),M])),C;for(S=0,o=new Array(_);S<w;++S)C=e[S],C.index=S,typeof C.source!="object"&&(C.source=J6(A,C.source)),typeof C.target!="object"&&(C.target=J6(A,C.target)),o[C.source.index]=(o[C.source.index]||0)+1,o[C.target.index]=(o[C.target.index]||0)+1;for(S=0,u=new Array(w);S<w;++S)C=e[S],u[S]=o[C.source.index]/(o[C.source.index]+o[C.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:hi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:hi(+S),b(),p):r},p}var _oe={value:()=>{}};function Uj(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new z1(n)}function z1(e){this._=e}function woe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}z1.prototype=Uj.prototype={constructor:z1,on:function(e,t){var n=this._,i=woe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Aoe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=e4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=e4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new z1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Aoe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function e4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=_oe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ed=0,kg=0,ng=0,Bj=1e3,Ky,Dg,Jy=0,ju=0,Eb=0,dp=typeof performance=="object"&&performance.now?performance:Date,jj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function J$(){return ju||(jj(Coe),ju=dp.now()+Eb)}function Coe(){ju=0}function ev(){this._call=this._time=this._next=null}ev.prototype=Pj.prototype={constructor:ev,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?J$():+n)+(t==null?0:+t),!this._next&&Dg!==this&&(Dg?Dg._next=this:Ky=this,Dg=this),this._call=e,this._time=n,Zw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zw())}};function Pj(e,t,n){var i=new ev;return i.restart(e,t,n),i}function Moe(){J$(),++ed;for(var e=Ky,t;e;)(t=ju-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ed}function t4(){ju=(Jy=dp.now())+Eb,ed=kg=0;try{Moe()}finally{ed=0,Toe(),ju=0}}function $oe(){var e=dp.now(),t=e-Jy;t>Bj&&(Eb-=t,Jy=e)}function Toe(){for(var e,t=Ky,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ky=n);Dg=e,Zw(i)}function Zw(e){if(!ed){kg&&(kg=clearTimeout(kg));var t=e-ju;t>24?(e<1/0&&(kg=setTimeout(t4,e-dp.now()-Eb)),ng&&(ng=clearInterval(ng))):(ng||(Jy=dp.now(),ng=setInterval($oe,Bj)),ed=1,jj(t4))}}function koe(e,t,n){var i=new ev,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?J$():+o,i._restart(function u(f){f+=r,i._restart(u,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const Doe=1664525,Ooe=1013904223,n4=4294967296;function Roe(){let e=1;return()=>(e=(Doe*e+Ooe)%n4)/n4}function Noe(e){return e.x}function zoe(e){return e.y}var Foe=10,Loe=Math.PI*(3-Math.sqrt(5));function Uoe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,u=Pj(h),f=Uj("tick","end"),d=Roe();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(u.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function(C){C(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Foe*Math.sqrt(.5+b),A=b*Loe;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return u.restart(h),t},stop:function(){return u.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,_){var w=0,A=e.length,C,M,k,T,O;for(_==null?_=1/0:_*=_,w=0;w<A;++w)T=e[w],C=b-T.x,M=S-T.y,k=C*C+M*M,k<_&&(O=T,_=k);return O},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function Boe(){var e,t,n,i,r=hi(-30),a,s=1,o=1/0,u=.81;function f(y){var v,b=e.length,S=Z$(e,Noe,zoe).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,_=0,w,A,C;if(y.length){for(w=A=C=0;C<4;++C)(b=y[C])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,C=_*_+w*w;if(A*A/u<C)return C<o&&(_===0&&(_=Zo(n),C+=_*_),w===0&&(w=Zo(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)),t.vx+=_*y.value*i/C,t.vy+=w*y.value*i/C),!0;if(y.length||C>=o)return;(y.data!==t||y.next)&&(_===0&&(_=Zo(n),C+=_*_),w===0&&(w=Zo(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)));do y.data!==t&&(A=a[y.data.index]*i/C,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:hi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(u=y*y,f):Math.sqrt(u)},f}function joe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vx+=(r[u]-d.x)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}function Poe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vy+=(r[u]-d.y)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}const i4={center:toe,collide:xoe,nbody:Boe,link:Eoe,x:joe,y:Poe},Og="forces",Kw=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ioe=["static","iterations"],Ij=["x","y","vx","vy"];function e3(e){J.call(this,null,e)}e3.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Ij}]};pe(e3,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Kw),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&qj(n,e,0,t)):(this.value=n=Hoe(t.source,e),n.on("tick",qoe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Ioe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,u=0,f=o.length,d;u<f;++u)if(d=o[u],!(d.name!==Og||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Ij)}});function qoe(e,t){return()=>e.touch(t).run()}function Hoe(e,t){const n=Uoe(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),qj(n,t,!0).on("end",()=>a=!0)}function qj(e,t,n,i){var r=Se(t.forces),a,s,o,u;for(a=0,s=Kw.length;a<s;++a)o=Kw[a],o!==Og&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)u=Og+a,o=n||t.modified(Og,a)?Yoe(r[a]):i&&Goe(r[a],i)?e.force(u):null,o&&e.force(u,o);for(s=e.numForces||0;a<s;++a)e.force(Og+a,null);return e.numForces=r.length,e}function Goe(e,t){var n,i;for(n in e)if(Ie(i=e[n])&&t.modified(Kn(i)))return 1;return 0}function Yoe(e){var t,n;_e(i4,e.force)||te("Unrecognized force: "+e.force),t=i4[e.force]();for(n in e)Ie(t[n])&&Xoe(t[n],e[n],e);return t}function Xoe(e,t,n){e(Ie(t)?i=>t(i,n):t)}const Voe=Object.freeze(Object.defineProperty({__proto__:null,force:e3},Symbol.toStringTag,{value:"Module"}));function Woe(e,t){return e.parent===t.parent?1:2}function Qoe(e){return e.reduce(Zoe,0)/e.length}function Zoe(e,t){return e+t.x}function Koe(e){return 1+e.reduce(Joe,0)}function Joe(e,t){return Math.max(e,t.y)}function ele(e){for(var t;t=e.children;)e=t[0];return e}function tle(e){for(var t;t=e.children;)e=t[t.length-1];return e}function nle(){var e=Woe,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Qoe(y),p.y=Koe(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var u=ele(a),f=tle(a),d=u.x-e(u,f)/2,h=f.x+e(f,u)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function ile(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function rle(){return this.eachAfter(ile)}function ale(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function sle(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function ole(e,t){for(var n=this,i=[n],r=[],a,s,o,u=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function lle(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function ule(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function cle(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fle(e){for(var t=this,n=dle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function dle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function hle(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function gle(){return Array.from(this)}function ple(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function mle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*yle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function t3(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=xle)):t===void 0&&(t=ble);for(var n=new td(e),i,r=[n],a,s,o,u;i=r.pop();)if((s=t(i.data))&&(u=(s=Array.from(s)).length))for(i.children=s,o=u-1;o>=0;--o)r.push(a=s[o]=new td(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(Hj)}function vle(){return t3(this).eachBefore(Sle)}function ble(e){return e.children}function xle(e){return Array.isArray(e)?e[1]:null}function Sle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Hj(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function td(e){this.data=e,this.depth=this.height=0,this.parent=null}td.prototype=t3.prototype={constructor:td,count:rle,each:ale,eachAfter:ole,eachBefore:sle,find:lle,sum:ule,sort:cle,path:fle,ancestors:hle,descendants:gle,leaves:ple,links:mle,copy:vle,[Symbol.iterator]:yle};function F1(e){return e==null?null:Gj(e)}function Gj(e){if(typeof e!="function")throw new Error;return e}function vu(){return 0}function yf(e){return function(){return e}}const Ele=1664525,_le=1013904223,r4=4294967296;function wle(){let e=1;return()=>(e=(Ele*e+_le)%r4)/r4}function Ale(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cle(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Mle(e,t){for(var n=0,i=(e=Cle(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&Yj(s,a)?++n:(s=Tle(r=$le(r,a)),n=0);return s}function $le(e,t){var n,i;if(DE(t,e))return[t];for(n=0;n<e.length;++n)if(n1(t,e[n])&&DE(Rg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(n1(Rg(e[n],e[i]),t)&&n1(Rg(e[n],t),e[i])&&n1(Rg(e[i],t),e[n])&&DE(Xj(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function n1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function Yj(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function DE(e,t){for(var n=0;n<t.length;++n)if(!Yj(e,t[n]))return!1;return!0}function Tle(e){switch(e.length){case 1:return kle(e[0]);case 2:return Rg(e[0],e[1]);case 3:return Xj(e[0],e[1],e[2])}}function kle(e){return{x:e.x,y:e.y,r:e.r}}function Rg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,u=a-n,f=s-i,d=o-r,h=Math.sqrt(u*u+f*f);return{x:(n+a+u/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function Xj(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,u=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,S=u-a,_=h-a,w=i*i+r*r-a*a,A=w-s*s-o*o+u*u,C=w-f*f-d*d+h*h,M=y*v-p*b,k=(v*C-b*A)/(M*2)-i,T=(b*S-v*_)/M,O=(y*A-p*C)/(M*2)-r,N=(p*_-y*S)/M,B=T*T+N*N-1,L=2*(a+k*T+O*N),G=k*k+O*O-a*a,H=-(Math.abs(B)>1e-6?(L+Math.sqrt(L*L-4*B*G))/(2*B):G/L);return{x:i+k+T*H,y:r+O+N*H,r:H}}function a4(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,u,f=i*i+s*s;f?(a=t.r+n.r,a*=a,u=e.r+n.r,u*=u,a>u?(r=(f+u-a)/(2*f),o=Math.sqrt(Math.max(0,u/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-u)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function s4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function o4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function i1(e){this._=e,this.next=null,this.previous=null}function Dle(e,t){if(!(a=(e=Ale(e)).length))return 0;var n,i,r,a,s,o,u,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;a4(i,n,r=e[2]),n=new i1(n),i=new i1(i),r=new i1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(u=3;u<a;++u){a4(n._,i._,r=e[u]),r=new i1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(s4(f._,r._)){i=f,n.next=i,i.previous=n,--u;continue e}h+=f._.r,f=f.next}else{if(s4(d._,r._)){n=d,n.next=i,i.previous=n,--u;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=o4(n);(r=r.next)!==i;)(o=o4(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Mle(n,t),u=0;u<a;++u)n=e[u],n.x-=r.x,n.y-=r.y;return r.r}function Ole(e){return Math.sqrt(e.value)}function Rle(){var e=null,t=1,n=1,i=vu;function r(a){const s=wle();return a.x=t/2,a.y=n/2,e?a.eachBefore(l4(e)).eachAfter(OE(i,.5,s)).eachBefore(u4(1)):a.eachBefore(l4(Ole)).eachAfter(OE(vu,1,s)).eachAfter(OE(i,a.r/Math.min(t,n),s)).eachBefore(u4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=F1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:yf(+a),r):i},r}function l4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function OE(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,u;if(o)for(a=0;a<s;++a)r[a].r+=o;if(u=Dle(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=u+o}}}function u4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Vj(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Kp(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(i-t)/e.value;++o<u;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function Nle(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(Vj),s}function a(s,o){return function(u){u.children&&Kp(u,u.x0,s*(u.depth+1)/o,u.x1,s*(u.depth+2)/o);var f=u.x0,d=u.y0,h=u.x1-n,p=u.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),u.x0=f,u.y0=d,u.x1=h,u.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var zle={depth:-1},c4={},RE={};function Fle(e){return e.id}function Lle(e){return e.parentId}function f4(){var e=Fle,t=Lle,n;function i(r){var a=Array.from(r),s=e,o=t,u,f,d,h,p,y,v,b,S=new Map;if(n!=null){const _=a.map((C,M)=>Ule(n(C,M,r))),w=_.map(d4),A=new Set(_).add("");for(const C of w)A.has(C)||(A.add(C),_.push(C),w.push(d4(C)),a.push(RE));s=(C,M)=>_[M],o=(C,M)=>w[M]}for(d=0,u=a.length;d<u;++d)f=a[d],y=a[d]=new td(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?c4:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<u;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===c4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===RE&&h.children.length===1;)h=h.children[0],--u;for(let _=a.length-1;_>=0&&(y=a[_],y.data===RE);--_)y.data=null}if(h.parent=zle,h.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(Hj),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=F1(r),i):e},i.parentId=function(r){return arguments.length?(t=F1(r),i):t},i.path=function(r){return arguments.length?(n=F1(r),i):n},i}function Ule(e){e=`${e}`;let t=e.length;return Jw(e,t-1)&&!Jw(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function d4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Jw(e,t););return e.slice(0,t)}function Jw(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Ble(e,t){return e.parent===t.parent?1:2}function NE(e){var t=e.children;return t?t[0]:e.t}function zE(e){var t=e.children;return t?t[t.length-1]:e.t}function jle(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Ple(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Ile(e,t,n){return e.a.parent===t.parent?e.a:n}function L1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}L1.prototype=Object.create(td.prototype);function qle(e){for(var t=new L1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new L1(a[s],s)),r.parent=n;return(t.parent=new L1(null,0)).children=[t],t}function Hle(){var e=Ble,t=1,n=1,i=null;function r(f){var d=qle(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(u);else{var h=f,p=f,y=f;f.eachBefore(function(w){w.x<h.x&&(h=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){Ple(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,C;v=zE(v),p=NE(p),v&&p;)b=NE(b),y=zE(y),y.a=f,C=v.z+w-p.z-S+e(v._,p._),C>0&&(jle(Ile(v,f,h),f,C),S+=C,_+=C),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!zE(y)&&(y.t=v,y.m+=w-_),p&&!NE(b)&&(b.t=p,b.m+=S-A,h=f)}return h}function u(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function _b(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(r-n)/e.value;++o<u;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var Wj=(1+Math.sqrt(5))/2;function Qj(e,t,n,i,r,a){for(var s=[],o=t.children,u,f,d=0,h=0,p=o.length,y,v,b=t.value,S,_,w,A,C,M,k;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(_=w=S,M=Math.max(v/y,y/v)/(b*e),k=S*S*M,C=Math.max(w/k,k/_);h<p;++h){if(S+=f=o[h].value,f<_&&(_=f),f>w&&(w=f),k=S*S*M,A=Math.max(w/k,k/_),A>C){S-=f;break}C=A}s.push(u={value:S,dice:y<v,children:o.slice(d,h)}),u.dice?Kp(u,n,i,r,b?i+=v*S/b:a):_b(u,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const Zj=function e(t){function n(i,r,a,s,o){Qj(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Wj);function Gle(){var e=Zj,t=!1,n=1,i=1,r=[0],a=vu,s=vu,o=vu,u=vu,f=vu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(Vj),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=o(p)-y,_-=u(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=Gj(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:yf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:yf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:yf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:yf(+p),d):u},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:yf(+p),d):f},d}function Yle(e,t,n,i,r){var a=e.children,s,o=a.length,u,f=new Array(o+1);for(f[0]=u=s=0;s<o;++s)f[s+1]=u+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,_){if(h>=p-1){var w=a[h];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[h],C=y/2+A,M=h+1,k=p-1;M<k;){var T=M+k>>>1;f[T]<C?M=T+1:k=T}C-f[M-1]<f[M]-C&&h+1<M&&--M;var O=f[M]-A,N=y-O;if(S-v>_-b){var B=y?(v*N+S*O)/y:S;d(h,M,O,v,b,B,_),d(M,p,N,B,b,S,_)}else{var L=y?(b*N+_*O)/y:_;d(h,M,O,v,b,S,L),d(M,p,N,v,L,S,_)}}}function Xle(e,t,n,i,r){(e.depth&1?_b:Kp)(e,t,n,i,r)}const Vle=function e(t){function n(i,r,a,s,o){if((u=i._squarify)&&u.ratio===t)for(var u,f,d,h,p=-1,y,v=u.length,b=i.value;++p<v;){for(f=u[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?Kp(f,r,a,s,b?a+=(o-a)*f.value/b:o):_b(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=u=Qj(t,i,r,a,s,o),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Wj);function eA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function n3(e){J.call(this,null,e)}n3.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Wle=e=>e.values;pe(n3,J,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Lv(s.data)&&r.rem.push(s.data)}),this.value=a=t3({values:Se(e.keys).reduce((s,o)=>(s.key(o),s),Qle()).entries(r.source)},Wle),n&&a.each(s=>{s.children&&(s=ct(s.data),r.add.push(s),r.source.push(s))}),eA(a,ke,ke)),r.source.root=a,r}});function Qle(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],u={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=u[h])?y.push(p):u[h]=[p];for(h in u)f[h]=n(u[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function no(e){J.call(this,null,e)}const Zle=(e,t)=>e.parent===t.parent?1:2;pe(no,J,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(ic(e.sort,s=>s.data)),Kle(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Zle:vd);try{this.value=n(r)}catch(s){te(s)}return r.each(s=>Jle(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function Kle(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Jle(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const tA=["x","y","r","depth","children"];function i3(e){no.call(this,e)}i3.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tA.length,default:tA}]};pe(i3,no,{layout:Rle,params:["radius","size","padding"],fields:tA});const nA=["x0","y0","x1","y1","depth","children"];function r3(e){no.call(this,e)}r3.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nA.length,default:nA}]};pe(r3,no,{layout:Nle,params:["size","round","padding"],fields:nA});function a3(e){J.call(this,null,e)}a3.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};pe(a3,J,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?eA(f4().id(e.key).parentId(e.parentKey)(r.source),e.key,Dr):eA(f4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const h4={tidy:Hle,cluster:nle},iA=["x","y","depth","children"];function s3(e){no.call(this,e)}s3.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:iA.length,default:iA}]};pe(s3,no,{layout(e){const t=e||"tidy";if(_e(h4,t))return h4[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:iA});function o3(e){J.call(this,[],e)}o3.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};pe(o3,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),i.each(s=>{const o=s.data,u=s.parent&&s.parent.data;u&&a[ke(o)]&&a[ke(u)]&&r.add.push(ct({source:u,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&r.mod.push(s)})),r}});const g4={binary:Yle,dice:Kp,slice:_b,slicedice:Xle,squarify:Zj,resquarify:Vle},rA=["x0","y0","x1","y1","depth","children"];function l3(e){no.call(this,e)}l3.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rA.length,default:rA}]};pe(l3,no,{layout(){const e=Gle();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(g4,t)?e.tile(g4[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:rA});const eue=Object.freeze(Object.defineProperty({__proto__:null,nest:n3,pack:i3,partition:r3,stratify:a3,tree:s3,treelinks:o3,treemap:l3},Symbol.toStringTag,{value:"Module"})),FE=4278190080;function tue(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function nue(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,u=il(a,s).getContext("2d"),f=il(a,s).getContext("2d"),d=o&&il(a,s).getContext("2d");n.forEach(O=>U1(u,O,!1)),U1(f,t,!1),o&&U1(d,t,!0);const h=LE(u,a,s),p=LE(f,a,s),y=o&&LE(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,_,w,A,C,M,k,T;for(_=0;_<s;++_)for(S=0;S<a;++S)C=_*a+S,M=h[C]&FE,T=p[C]&FE,k=o&&y[C]&FE,(M||k||T)&&(w=e(S),A=e(_),!r&&(M||T)&&v.set(w,A),o&&(M||k)&&b.set(w,A));return[v,b]}function LE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function U1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>U1(e,a.items,n))}):ur[i].draw(e,{items:n?t.map(iue):t})}function iue(e){const t=Uv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ms=5,ai=31,hp=32,Io=new Uint32Array(hp+1),Wr=new Uint32Array(hp+1);Wr[0]=0;Io[0]=~Wr[0];for(let e=1;e<=hp;++e)Wr[e]=Wr[e-1]<<1|1,Io[e]=~Wr[e];function rue(e,t){const n=new Uint32Array(~~((e*t+hp)/hp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Ms]&1<<(o&ai)},set:(a,s)=>{const o=s*e+a;i(o>>>Ms,1<<(o&ai))},clear:(a,s)=>{const o=s*e+a;r(o>>>Ms,~(1<<(o&ai)))},getRange:(a,s,o,u)=>{let f=u,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>Ms,y=h>>>Ms,p===y){if(n[p]&Io[d&ai]&Wr[(h&ai)+1])return!0}else{if(n[p]&Io[d&ai]||n[y]&Wr[(h&ai)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ms,p=d>>>Ms,h===p)i(h,Io[f&ai]&Wr[(d&ai)+1]);else for(i(h,Io[f&ai]),i(p,Wr[(d&ai)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ms,p=d>>>Ms,h===p)r(h,Wr[f&ai]|Io[(d&ai)+1]);else for(r(h,Wr[f&ai]),r(p,Io[(d&ai)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,u)=>a<0||s<0||u>=t||o>=e}}function aue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>rue(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function sue(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,u=o.length,f=s.datum.fontSize,d=ir.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,_,w;for(let A=0;A<u;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=h&&(h=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function tv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Ko(e,t,n,i,r,a,s,o){const u=r*a/(i*2),f=e(t-u),d=e(t+u),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function oue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function u(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let S=h,_=a,w;if(!tv(v,b,p,y,r,a)&&!Ko(e,v,b,y,p,S,s,o)&&!Ko(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,Ko(e,v,b,y,p,w,s,o)?_=w:S=w;if(S>h)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,C,M,k,T,O,N,B,L,G,H,j,F,R,P,X;for(let K=0;K<h;++K){for(w=d[K].x,C=d[K].y,A=d[K].x2===void 0?w:d[K].x2,M=d[K].y2===void 0?C:d[K].y2,w>A&&(X=w,w=A,A=X),C>M&&(X=C,C=M,M=X),B=e(w),G=e(A),L=~~((B+G)/2),H=e(C),F=e(M),j=~~((H+F)/2),O=L;O>=B;--O)for(N=j;N>=H;--N)P=u(O,N,v,y,p),P&&([f.x,f.y,v,b]=P);for(O=L;O<=G;++O)for(N=j;N<=F;++N)P=u(O,N,v,y,p),P&&([f.x,f.y,v,b]=P);!b&&!n&&(R=Math.abs(A-w+M-C),k=(w+A)/2,T=(C+M)/2,R>=_&&!tv(k,T,y,p,r,a)&&!Ko(e,k,T,p,y,p,s,null)&&(_=R,f.x=k,f.y=T,S=!0))}return b||S?(k=y/2,T=p/2,s.setRange(e(f.x-k),e(f.y-T),e(f.x+k),e(f.y+T)),f.align="center",f.baseline="middle",!0):!1}}const lue=[-1,-1,1,1],uue=[-1,1,-1,1];function cue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,C,M,k,T,O,N,B,L,G,H,j;for(let F=0;F<h;++F){for(A=d[F].x,M=d[F].y,C=d[F].x2===void 0?A:d[F].x2,k=d[F].y2===void 0?M:d[F].y2,v.push([e((A+C)/2),e((M+k)/2)]);v.length;)if([N,B]=v.pop(),!(s.get(N,B)||o.get(N,B)||u.get(N,B))){u.set(N,B);for(let R=0;R<4;++R)T=N+lue[R],O=B+uue[R],u.outOfBounds(T,O,T,O)||v.push([T,O]);if(T=e.invert(N),O=e.invert(B),L=b,G=a,!tv(T,O,y,p,r,a)&&!Ko(e,T,O,p,y,L,s,o)&&!Ko(e,T,O,p,y,p,s,null)){for(;G-L>=1;)H=(L+G)/2,Ko(e,T,O,p,y,H,s,o)?G=H:L=H;L>b&&(f.x=T,f.y=O,b=L,S=!0)}}!S&&!n&&(j=Math.abs(C-A+k-M),T=(A+C)/2,O=(M+k)/2,j>=w&&!tv(T,O,y,p,r,a)&&!Ko(e,T,O,p,y,p,s,null)&&(w=j,f.x=T,f.y=O,_=!0))}return S||_?(T=y/2,O=p/2,s.setRange(e(f.x-T),e(f.y-O),e(f.x+T),e(f.y+O)),f.align="center",f.baseline="middle",!0):!1}}const fue=["right","center","left"],due=["bottom","middle","top"];function hue(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,C,M,k,T,O,N,B,L;for(let G=0;G<u;++G){if(y=(n[G]&3)-1,v=(n[G]>>>2&3)-1,b=y===0&&v===0||i[G]<0,S=y&&v?Math.SQRT1_2:1,_=i[G]<0?-1:1,w=d[1+y]+i[G]*y*S,T=d[4+v]+_*h*v/2+i[G]*v*S,C=T-h/2,M=T+h/2,O=e(w),B=e(C),L=e(M),!p)if(p4(O,O,B,L,s,o,w,w,C,M,d,b))p=ir.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,O=e(w),N=e(A),p4(O,N,B,L,s,o,w,A,C,M,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?M:C:T,f.align=fue[y*_+1],f.baseline=due[v*_+1],s.setRange(O,B,N,L),!0}return!1}}function p4(e,t,n,i,r,a,s,o,u,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const UE=0,BE=4,jE=8,PE=0,IE=1,qE=2,gue={"top-left":UE+PE,top:UE+IE,"top-right":UE+qE,left:BE+PE,middle:BE+IE,right:BE+qE,"bottom-left":jE+PE,bottom:jE+IE,"bottom-right":jE+qE},pue={naive:sue,"reduced-search":oue,floodfill:cue};function mue(e,t,n,i,r,a,s,o,u,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=yue(i,h),y=vue(r,h),v=bue(e[0].datum),b=v==="group"&&e[0].datum.items[u].marktype,S=b==="area",_=xue(v,b,o,u),w=f===null||f===1/0,A=S&&d==="naive";let C=-1,M=-1;const k=e.map(B=>{const L=w?ir.width(B,B.text):void 0;return C=Math.max(C,L),M=Math.max(M,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:L}});f=f===null||f===1/0?Math.max(C,M)+Math.max(...i):f;const T=aue(t[0],t[1],f);let O;if(!A){n&&k.sort((G,H)=>n(G.datum,H.datum));let B=!1;for(let G=0;G<y.length&&!B;++G)B=y[G]===5||p[G]<0;const L=(v&&s||S)&&e.map(G=>G.datum);O=a.length||L?nue(T,L||[],a,B,S):tue(T,s&&k)}const N=S?pue[d](T,O,s,u):hue(T,O,y,p);return k.forEach(B=>B.opacity=+N(B)),k}function yue(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function vue(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=gue[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function bue(e){return e&&e.mark&&e.mark.marktype}function xue(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const aA=["x","y","opacity","align","baseline"],Kj=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function u3(e){J.call(this,null,e)}u3.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Kj},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:aA.length,default:aA}]};pe(u3,J,{transform(e,t){function n(a){const s=e[a];return Ie(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");const r=e.as||aA;return mue(t.materialize(t.SOURCE).source||[],e.size,e.sort,Se(e.offset==null?1:e.offset),Se(e.anchor||Kj),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Sue=Object.freeze(Object.defineProperty({__proto__:null,label:u3},Symbol.toStringTag,{value:"Module"}));function Jj(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function c3(e){J.call(this,null,e)}c3.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};pe(c3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Jj(i,e.groupby),a=(e.groupby||[]).map(qt),s=a.length,o=e.as||[qt(e.x),qt(e.y)],u=[];r.forEach(f=>{o7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],u.push(ct(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const sA={constant:GC,linear:YC,log:i7,exp:r7,pow:a7,quad:XC,poly:s7},Eue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function f3(e){J.call(this,null,e)}f3.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};pe(f3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Jj(i,e.groupby),a=(e.groupby||[]).map(qt),s=e.method||"linear",o=e.order==null?3:e.order,u=Eue(s,o),f=e.as||[qt(e.x),qt(e.y)],d=sA[s],h=[];let p=e.extent;_e(sA,s)||te("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(ct({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Ia(y,e.x),_=w=>{const A={};for(let C=0;C<a.length;++C)A[a[C]]=y.dims[C];A[f[0]]=w[0],A[f[1]]=w[1],h.push(ct(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):Gv(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const _ue=Object.freeze(Object.defineProperty({__proto__:null,loess:c3,regression:f3},Symbol.toStringTag,{value:"Module"})),qs=11102230246251565e-32,Gn=134217729,wue=(3+8*qs)*qs;function HE(e,t,n,i,r){let a,s,o,u,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h]):(s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function Aue(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Jp(e){return new Float64Array(e)}const Cue=(3+16*qs)*qs,Mue=(2+12*qs)*qs,$ue=(9+64*qs)*qs*qs,ff=Jp(4),m4=Jp(8),y4=Jp(12),v4=Jp(16),si=Jp(4);function Tue(e,t,n,i,r,a,s){let o,u,f,d,h,p,y,v,b,S,_,w,A,C,M,k,T,O;const N=e-r,B=n-r,L=t-a,G=i-a;C=N*G,p=Gn*N,y=p-(p-N),v=N-y,p=Gn*G,b=p-(p-G),S=G-b,M=v*S-(C-y*b-v*b-y*S),k=L*B,p=Gn*L,y=p-(p-L),v=L-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,ff[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,ff[1]=A-(_+h)+(h-k),O=w+_,h=O-w,ff[2]=w-(O-h)+(_-h),ff[3]=O;let H=Aue(4,ff),j=Mue*s;if(H>=j||-H>=j||(h=e-N,o=e-(N+h)+(h-r),h=n-B,f=n-(B+h)+(h-r),h=t-L,u=t-(L+h)+(h-a),h=i-G,d=i-(G+h)+(h-a),o===0&&u===0&&f===0&&d===0)||(j=$ue*s+wue*Math.abs(H),H+=N*d+G*o-(L*f+B*u),H>=j||-H>=j))return H;C=o*G,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*G,b=p-(p-G),S=G-b,M=v*S-(C-y*b-v*b-y*S),k=u*B,p=Gn*u,y=p-(p-u),v=u-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const F=HE(4,ff,4,si,m4);C=N*d,p=Gn*N,y=p-(p-N),v=N-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-(C-y*b-v*b-y*S),k=L*f,p=Gn*L,y=p-(p-L),v=L-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const R=HE(F,m4,4,si,y4);C=o*d,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-(C-y*b-v*b-y*S),k=u*f,p=Gn*u,y=p-(p-u),v=u-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,h=M-_,si[0]=M-(_+h)+(h-T),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,si[1]=A-(_+h)+(h-k),O=w+_,h=O-w,si[2]=w-(O-h)+(_-h),si[3]=O;const P=HE(R,y4,4,si,v4);return v4[P-1]}function r1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),u=s-o,f=Math.abs(s+o);return Math.abs(u)>=Cue*f?u:-Tue(e,t,n,i,r,a,f)}const b4=Math.pow(2,-52),a1=new Uint32Array(512);class nv{static from(t,n=Nue,i=zue){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new nv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,u=1/0,f=-1/0,d=-1/0;for(let N=0;N<s;N++){const B=t[2*N],L=t[2*N+1];B<o&&(o=B),L<u&&(u=L),B>f&&(f=B),L>d&&(d=L),this._ids[N]=N}const h=(o+f)/2,p=(u+d)/2;let y,v,b;for(let N=0,B=1/0;N<s;N++){const L=GE(h,p,t[2*N],t[2*N+1]);L<B&&(y=N,B=L)}const S=t[2*y],_=t[2*y+1];for(let N=0,B=1/0;N<s;N++){if(N===y)continue;const L=GE(S,_,t[2*N],t[2*N+1]);L<B&&L>0&&(v=N,B=L)}let w=t[2*v],A=t[2*v+1],C=1/0;for(let N=0;N<s;N++){if(N===y||N===v)continue;const B=Oue(S,_,w,A,t[2*N],t[2*N+1]);B<C&&(b=N,C=B)}let M=t[2*b],k=t[2*b+1];if(C===1/0){for(let L=0;L<s;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];wf(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let B=0;for(let L=0,G=-1/0;L<s;L++){const H=this._ids[L],j=this._dists[H];j>G&&(N[B++]=H,G=j)}this.hull=N.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(r1(S,_,w,A,M,k)<0){const N=v,B=w,L=A;v=b,w=M,A=k,b=N,M=B,k=L}const T=Rue(S,_,w,A,M,k);this._cx=T.x,this._cy=T.y;for(let N=0;N<s;N++)this._dists[N]=GE(t[2*N],t[2*N+1],T.x,T.y);wf(this._ids,this._dists,0,s-1),this._hullStart=y;let O=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(M,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let N=0,B,L;N<this._ids.length;N++){const G=this._ids[N],H=t[2*G],j=t[2*G+1];if(N>0&&Math.abs(H-B)<=b4&&Math.abs(j-L)<=b4||(B=H,L=j,G===y||G===v||G===b))continue;let F=0;for(let z=0,W=this._hashKey(H,j);z<this._hashSize&&(F=a[(W+z)%this._hashSize],!(F!==-1&&F!==i[F]));z++);F=n[F];let R=F,P;for(;P=i[R],r1(H,j,t[2*R],t[2*R+1],t[2*P],t[2*P+1])>=0;)if(R=P,R===F){R=-1;break}if(R===-1)continue;let X=this._addTriangle(R,G,i[R],-1,-1,r[R]);r[G]=this._legalize(X+2),r[R]=X,O++;let K=i[R];for(;P=i[K],r1(H,j,t[2*K],t[2*K+1],t[2*P],t[2*P+1])<0;)X=this._addTriangle(K,G,P,r[G],-1,r[K]),r[G]=this._legalize(X+2),i[K]=K,O--,K=P;if(R===F)for(;P=n[R],r1(H,j,t[2*P],t[2*P+1],t[2*R],t[2*R+1])<0;)X=this._addTriangle(P,G,R,-1,r[R],r[P]),this._legalize(X+2),r[P]=X,i[R]=R,O--,R=P;this._hullStart=n[G]=R,i[R]=n[K]=G,i[G]=K,a[this._hashKey(H,j)]=G,a[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(O);for(let N=0,B=this._hullStart;N<O;N++)this.hull[N]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(kue(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],u=t-t%3;if(s=u+(t+2)%3,o===-1){if(a===0)break;t=a1[--a];continue}const f=o-o%3,d=u+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(Due(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[h];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,h);const w=f+(o+1)%3;a<a1.length&&(a1[a++]=w)}else{if(a===0)break;t=a1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function kue(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function GE(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Due(e,t,n,i,r,a,s,o){const u=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=u*u+f*f,b=d*d+h*h,S=p*p+y*y;return u*(h*S-b*y)-f*(d*S-b*p)+v*(d*y-h*p)<0}function Oue(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=(f*d-o*h)*p,v=(s*h-u*d)*p;return y*y+v*v}function Rue(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=e+(f*d-o*h)*p,v=t+(s*h-u*d)*p;return{x:y,y:v}}function wf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;ig(e,r,a),t[e[n]]>t[e[i]]&&ig(e,n,i),t[e[a]]>t[e[i]]&&ig(e,a,i),t[e[n]]>t[e[a]]&&ig(e,n,a);const o=e[a],u=t[o];for(;;){do a++;while(t[e[a]]<u);do s--;while(t[e[s]]>u);if(s<a)break;ig(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(wf(e,t,a,i),wf(e,t,n,s-1)):(wf(e,t,n,s-1),wf(e,t,a,i))}}function ig(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Nue(e){return e[0]}function zue(e){return e[1]}const x4=1e-6;class Eu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>x4||Math.abs(this._y1-a)>x4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class oA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Fue=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const C=i[b]*2,M=i[b+1]*2,k=i[b+2]*2,T=t[C],O=t[C+1],N=t[M],B=t[M+1],L=t[k],G=t[k+1],H=N-T,j=B-O,F=L-T,R=G-O,P=(H*R-j*F)*2;if(Math.abs(P)<1e-9){if(a===void 0){a=s=0;for(const K of n)a+=t[K*2],s+=t[K*2+1];a/=n.length,s/=n.length}const X=1e9*Math.sign((a-T)*R-(s-O)*F);w=(T+L)/2-X*R,A=(O+G)/2+X*F}else{const X=1/P,K=H*H+j*j,z=F*F+R*R;w=T+(R*K-j*z)*X,A=O+(H*z-F*K)*X}o[S]=w,o[S+1]=A}let u=n[n.length-1],f,d=u*4,h,p=t[2*u],y,v=t[2*u+1];r.fill(0);for(let b=0;b<n.length;++b)u=n[b],f=d,h=p,y=v,d=u*4,p=t[2*u],v=t[2*u+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Eu:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let u,f=a[a.length-1];for(let d=0;d<a.length;++d){u=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=u*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Eu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Eu:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new oA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),u=this._regioncode(i,r);o===0&&u===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,u))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,u=r.length;o<u;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+u-2)%u]&&n[(a+3)%s]===r[(o+u-1)%u]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let u=s;do{const f=Math.floor(u/3);if(o.push(n[f*2],n[f*2+1]),u=u%3===2?u-2:u+1,a[u]!==t)break;u=r[u]}while(u!==s&&u!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],u=n[i-1],f,d=this._regioncode(o,u),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=u,o=n[y],u=n[y+1],f=d,d=this._regioncode(o,u),f===0&&d===0)h=p,p=0,r?r.push(o,u):r=[o,u];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,o,u,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(o,u,a,s,d,f))===null)continue;[_,w,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(_,w),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let u,f,d=a||s;d&8?(u=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(u=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),u=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),u=this.xmin),a?(t=u,n=f,a=this._regioncode(t,n)):(i=u,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),u;if((u=this._project(o[0],o[1],i,r))&&o.unshift(u[0],u[1]),(u=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(u[0],u[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,u;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(u=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(u=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,u=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,u=n+(a=s)*r)}return[o,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Lue=2*Math.PI,df=Math.pow;function Uue(e){return e[0]}function Bue(e){return e[1]}function jue(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Pue(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class d3{static from(t,n=Uue,i=Bue,r){return new d3("length"in t?Iue(t,n,i,r):Float64Array.from(que(t,n,i,r)))}constructor(t){this._delaunator=new nv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&jue(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const u=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*u],n[2*u+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Pue(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new nv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let u=0,f=i.length;u<f;++u){const d=a[u%3===2?u-2:u+1];(i[u]===-1||s[d]===-1)&&(s[d]=u)}for(let u=0,f=r.length;u<f;++u)o[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Fue(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const u=n[t];if(u===-1)return;let f=u,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==u)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:u,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=df(n-f[t*2],2)+df(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=u[y];const b=df(n-f[v*2],2)+df(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,u[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&df(n-f[y*2],2)+df(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Eu:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const u=r[s];if(u<s)continue;const f=a[s]*2,d=a[u]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Eu:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],u=r[a+1];t.moveTo(o+n,u),t.arc(o,u,n,0,Lue)}return i&&i.value()}renderHull(t){const n=t==null?t=new Eu:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const u=2*i[o];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new oA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Eu:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,u=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new oA;return this.renderTriangle(t,n),n.value()}}function Iue(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*que(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function h3(e){J.call(this,null,e)}h3.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Hue=[-1e5,-1e5,1e5,1e5];pe(h3,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Hue;const a=this.value=d3.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const u=a.cellPolygon(s);i[s][n]=u&&!Yue(u)?Gue(u):null}return t.reflow(e.modified()).modifies(n)}});function Gue(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Yue(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Xue=Object.freeze(Object.defineProperty({__proto__:null,voronoi:h3},Symbol.toStringTag,{value:"Module"}));var YE=Math.PI/180,Ng=64,B1=2048;function Vue(){var e=[256,256],t,n,i,r,a,s,o,u=eP,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(il()),b=ece((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],C=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:o(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,T)=>T.size-k.size);++w<_;){var M=C[w];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,Wue(v,M,C,w),M.hasText&&y(b,M,S)&&(A.push(M),S?Zue(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ng<<5)/b,v.height=B1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),C=u(e),M=d()<.5?1:-1,k=-M,T,O,N;(T=C(k+=M))&&(O=~~T[0],N=~~T[1],!(Math.min(Math.abs(O),Math.abs(N))>=A));)if(b.x=_+O,b.y=w+N,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!Que(b,v,e[0]))&&(!S||Kue(b,S))){for(var B=b.sprite,L=b.width>>5,G=e[0]>>5,H=b.x-(L<<4),j=H&127,F=32-j,R=b.y1-b.y0,P=(b.y+b.y0)*G+(H>>5),X,K=0;K<R;K++){X=0;for(var z=0;z<=L;z++)v[P+z]|=X<<F|(z<L?(X=B[K*L+z])>>>j:0);P+=G}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=tu(v),h):n},h.fontStyle=function(v){return arguments.length?(r=tu(v),h):r},h.fontWeight=function(v){return arguments.length?(a=tu(v),h):a},h.rotate=function(v){return arguments.length?(s=tu(v),h):s},h.text=function(v){return arguments.length?(t=tu(v),h):t},h.spiral=function(v){return arguments.length?(u=tce[v]||v,h):u},h.fontSize=function(v){return arguments.length?(i=tu(v),h):i},h.padding=function(v){return arguments.length?(o=tu(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function Wue(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ng<<5)/a,B1/a);var s=0,o=0,u=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*YE),S=Math.cos(t.rotate*YE),_=d*S,w=d*b,A=p*S,C=p*b;d=Math.max(Math.abs(_+C),Math.abs(_-C))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>u&&(u=p),s+d>=Ng<<5&&(s=0,o+=u,u=0),o+p>=B1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*YE),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var M=r.getImageData(0,0,(Ng<<5)/a,B1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)k[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var T=0,O=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=h*v+(y>>5),B=M[(o+v)*(Ng<<5)+(s+y)<<2]?1<<31-y%32:0;k[N]|=B,T|=B}T?O=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+O,t.sprite=k.slice(0,(t.y1-t.y0)*h)}}}function Que(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,u=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<u;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function Zue(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Kue(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function eP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Jue(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function ece(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tu(e){return typeof e=="function"?e:function(){return e}}var tce={archimedean:eP,rectangular:Jue};const tP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],nce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function g3(e){J.call(this,Vue(),e)}g3.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:tP}]};pe(g3,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Ie(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||nce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||tP;let o=e.fontSize||14,u;if(Ie(o)?u=e.fontSizeRange:o=ii(o),u){const v=o,b=lt("sqrt")().domain(Ia(r,v)).range(u);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Rr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const ice=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:g3},Symbol.toStringTag,{value:"Module"})),rce=e=>new Uint8Array(e),ace=e=>new Uint16Array(e),Yg=e=>new Uint32Array(e);function sce(){let e=8,t=[],n=Yg(0),i=s1(0,e),r=s1(0,e);return{data:()=>t,seen:()=>n=oce(n,t.length),add(a){for(let s=0,o=t.length,u=a.length,f;s<u;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,u=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)u[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],u[p]=d,d._index=p++),i[h]=0;return t=u,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=s1(a,e,i),r=s1(a,e))}}}function oce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function s1(e,t,n){const i=(t<257?rce:t<65537?ace:Yg)(e);return n&&i.set(n),i}function S4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),u=r.index,f=o[0],d=o[1],h=u.length;let p;for(p=0;p<f;++p)a[u[p]]|=i;for(p=d;p<h;++p)a[u[p]]|=i;return s}}}function E4(){let e=Yg(0),t=[],n=0;function i(o,u,f){if(!u.length)return[];const d=n,h=u.length,p=Yg(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(u[S]),p[S]=S;if(y=lce(y,p),d)v=t,b=e,t=Array(d+h),e=Yg(d+h),uce(f,v,b,d,y,p,h,t,e);else{if(f>0)for(S=0;S<h;++S)p[S]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,u){const f=n;let d,h,p;for(h=0;!u[e[h]]&&h<f;++h);for(p=h;h<f;++h)u[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let u=0,f=n;u<f;++u)e[u]=o[e[u]]}function s(o,u){let f;return u?f=u.length:(u=t,f=n),[hW(u,o[0],0,f),sl(u,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function lce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),mW(e,t)}function uce(e,t,n,i,r,a,s,o,u){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],u[h]=n[f++]):(o[h]=r[d],u[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],u[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],u[h]=a[d]+e}function p3(e){J.call(this,sce(),e),this._indices=null,this._dims=null}p3.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};pe(p3,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,u,f;for(;o<s;++o)u=n[o].fname,f=r[u]||(r[u]=E4()),a.push(S4(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,u=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,C,M,k,T;if(f.set(u),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(C={},w=t.mod,M=0,k=w.length;M<k;++M)C[w[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!s[M]||e.modified("fields",M)||t.modified(T.fields))&&(_=T.fname,(b=v[_])||(a[_]=S=E4(),v[_]=b=S.insert(T,t.source,0)),s[M]=S4(S,M,r[M]).onAdd(b,u));for(M=0,k=o.data().length;M<k;++M)A[M]||(f[M]!==u[M]?h.push(M):C[M]&&u[M]!==d&&p.push(M));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,u={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<h;++y)v=o[y].fname,b=u[v]||(u[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,u,f;for(o=0,u=s.length;o<u;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),u={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,u[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,u);return this.reindex(t,p,u),u},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,u,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(u=f,++o);if(o===1)o=i[u].one,this.incrementOne(i[u],r[u],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),u=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(h<y)for(S=h,_=Math.min(y,p);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(h>y)for(S=y,_=Math.min(h,v);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(h,v),_=p;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function m3(e){J.call(this,null,e)}m3.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};pe(m3,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),u=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^u[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^u[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const cce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:p3,resolvefilter:m3},Symbol.toStringTag,{value:"Module"})),fce="RawCode",Pu="Literal",dce="Property",hce="Identifier",gce="ArrayExpression",pce="BinaryExpression",nP="CallExpression",mce="ConditionalExpression",yce="LogicalExpression",vce="MemberExpression",bce="ObjectExpression",xce="UnaryExpression";function fa(e){this.type=e}fa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Sce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Sce(e){switch(e.type){case gce:return e.elements;case pce:case yce:return[e.left,e.right];case nP:return[e.callee].concat(e.arguments);case mce:return[e.test,e.consequent,e.alternate];case vce:return[e.object,e.property];case bce:return e.properties;case dce:return[e.key,e.value];case xce:return[e.argument];case hce:case Pu:case fce:default:return[]}}var ns,Ae,ee,ei,mt,wb=1,e0=2,Iu=3,Cl=4,Ab=5,oc=6,$i=7,t0=8,Ece=9;ns={};ns[wb]="Boolean";ns[e0]="<end>";ns[Iu]="Identifier";ns[Cl]="Keyword";ns[Ab]="Null";ns[oc]="Numeric";ns[$i]="Punctuator";ns[t0]="String";ns[Ece]="RegularExpression";var _ce="ArrayExpression",wce="BinaryExpression",Ace="CallExpression",Cce="ConditionalExpression",iP="Identifier",Mce="Literal",$ce="LogicalExpression",Tce="MemberExpression",kce="ObjectExpression",Dce="Property",Oce="UnaryExpression",En="Unexpected token %0",Rce="Unexpected number",Nce="Unexpected string",zce="Unexpected identifier",Fce="Unexpected reserved word",Lce="Unexpected end of input",lA="Invalid regular expression",XE="Invalid regular expression: missing /",rP="Octal literals are not allowed in strict mode.",Uce="Duplicate data property in object literal not allowed in strict mode",Ln="ILLEGAL",gp="Disabled.",Bce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),jce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Cb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ds(e){return e>=48&&e<=57}function y3(e){return"0123456789abcdefABCDEF".includes(e)}function Xg(e){return"01234567".includes(e)}function Pce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function pp(e){return e===10||e===13||e===8232||e===8233}function n0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Bce.test(String.fromCharCode(e))}function iv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&jce.test(String.fromCharCode(e))}const Ice={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function aP(){for(;ee<ei;){const e=Ae.charCodeAt(ee);if(Pce(e)||pp(e))++ee;else break}}function uA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<ei&&y3(Ae[ee])?(i=Ae[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):at({},En,Ln);return String.fromCharCode(r)}function qce(){var e,t,n,i;for(e=Ae[ee],t=0,e==="}"&&at({},En,Ln);ee<ei&&(e=Ae[ee++],!!y3(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&at({},En,Ln),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function sP(){var e,t;for(e=Ae.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(Ae.charCodeAt(ee)!==117&&at({},En,Ln),++ee,e=uA("u"),(!e||e==="\\"||!n0(e.charCodeAt(0)))&&at({},En,Ln),t=e);ee<ei&&(e=Ae.charCodeAt(ee),!!iv(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ae.charCodeAt(ee)!==117&&at({},En,Ln),++ee,e=uA("u"),(!e||e==="\\"||!iv(e.charCodeAt(0)))&&at({},En,Ln),t+=e);return t}function Hce(){var e,t;for(e=ee++;ee<ei;){if(t=Ae.charCodeAt(ee),t===92)return ee=e,sP();if(iv(t))++ee;else break}return Ae.slice(e,ee)}function Gce(){var e,t,n;return e=ee,t=Ae.charCodeAt(ee)===92?sP():Hce(),t.length===1?n=Iu:Ice.hasOwnProperty(t)?n=Cl:t==="null"?n=Ab:t==="true"||t==="false"?n=wb:n=Iu,{type:n,value:t,start:e,end:ee}}function VE(){var e=ee,t=Ae.charCodeAt(ee),n,i=Ae[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:$i,value:String.fromCharCode(t),start:e,end:ee};default:if(n=Ae.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:$i,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,Ae.charCodeAt(ee)===61&&++ee,{type:$i,value:Ae.slice(e,ee),start:e,end:ee}}}if(s=Ae.substr(ee,4),s===">>>=")return ee+=4,{type:$i,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:$i,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:$i,value:r,start:e,end:ee};if(r==="//"&&at({},En,Ln),"<>=!+-*%&|^/".includes(i))return++ee,{type:$i,value:i,start:e,end:ee};at({},En,Ln)}function Yce(e){let t="";for(;ee<ei&&y3(Ae[ee]);)t+=Ae[ee++];return t.length===0&&at({},En,Ln),n0(Ae.charCodeAt(ee))&&at({},En,Ln),{type:oc,value:parseInt("0x"+t,16),start:e,end:ee}}function Xce(e){let t="0"+Ae[ee++];for(;ee<ei&&Xg(Ae[ee]);)t+=Ae[ee++];return(n0(Ae.charCodeAt(ee))||Ds(Ae.charCodeAt(ee)))&&at({},En,Ln),{type:oc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function _4(){var e,t,n;if(n=Ae[ee],Cb(Ds(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=Ae[ee++],n=Ae[ee],e==="0"){if(n==="x"||n==="X")return++ee,Yce(t);if(Xg(n))return Xce(t);n&&Ds(n.charCodeAt(0))&&at({},En,Ln)}for(;Ds(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="."){for(e+=Ae[ee++];Ds(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="e"||n==="E")if(e+=Ae[ee++],n=Ae[ee],(n==="+"||n==="-")&&(e+=Ae[ee++]),Ds(Ae.charCodeAt(ee)))for(;Ds(Ae.charCodeAt(ee));)e+=Ae[ee++];else at({},En,Ln);return n0(Ae.charCodeAt(ee))&&at({},En,Ln),{type:oc,value:parseFloat(e),start:t,end:ee}}function Vce(){var e="",t,n,i,r,a=!1;for(t=Ae[ee],Cb(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<ei;)if(i=Ae[ee++],i===t){t="";break}else if(i==="\\")if(i=Ae[ee++],!i||!pp(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ee]==="{"?(++ee,e+=qce()):e+=uA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Xg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<ei&&Xg(Ae[ee])&&(a=!0,r=r*8+"01234567".indexOf(Ae[ee++]),"0123".includes(i)&&ee<ei&&Xg(Ae[ee])&&(r=r*8+"01234567".indexOf(Ae[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ae[ee]===`
`&&++ee;else{if(pp(i.charCodeAt(0)))break;e+=i}return t!==""&&at({},En,Ln),{type:t0,value:e,octal:a,start:n,end:ee}}function Wce(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";at({},lA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{at({},lA)}try{return new RegExp(e,t)}catch{return null}}function Qce(){var e,t,n,i,r;for(e=Ae[ee],Cb(e==="/","Regular expression literal must start with a slash"),t=Ae[ee++],n=!1,i=!1;ee<ei;)if(e=Ae[ee++],t+=e,e==="\\")e=Ae[ee++],pp(e.charCodeAt(0))&&at({},XE),t+=e;else if(pp(e.charCodeAt(0)))at({},XE);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||at({},XE),r=t.substr(1,t.length-2),{value:r,literal:t}}function Zce(){var e,t,n;for(t="",n="";ee<ei&&(e=Ae[ee],!!iv(e.charCodeAt(0)));)++ee,e==="\\"&&ee<ei?at({},En,Ln):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&at({},lA,n),{value:n,literal:t}}function Kce(){var e,t,n,i;return mt=null,aP(),e=ee,t=Qce(),n=Zce(),i=Wce(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function Jce(e){return e.type===Iu||e.type===Cl||e.type===wb||e.type===Ab}function oP(){if(aP(),ee>=ei)return{type:e0,start:ee,end:ee};const e=Ae.charCodeAt(ee);return n0(e)?Gce():e===40||e===41||e===59?VE():e===39||e===34?Vce():e===46?Ds(Ae.charCodeAt(ee+1))?_4():VE():Ds(e)?_4():VE()}function ki(){const e=mt;return ee=e.end,mt=oP(),ee=e.end,e}function lP(){const e=ee;mt=oP(),ee=e}function efe(e){const t=new fa(_ce);return t.elements=e,t}function w4(e,t,n){const i=new fa(e==="||"||e==="&&"?$ce:wce);return i.operator=e,i.left=t,i.right=n,i}function tfe(e,t){const n=new fa(Ace);return n.callee=e,n.arguments=t,n}function nfe(e,t,n){const i=new fa(Cce);return i.test=e,i.consequent=t,i.alternate=n,i}function v3(e){const t=new fa(iP);return t.name=e,t}function zg(e){const t=new fa(Mce);return t.value=e.value,t.raw=Ae.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function A4(e,t,n){const i=new fa(Tce);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function ife(e){const t=new fa(kce);return t.properties=e,t}function C4(e,t,n){const i=new fa(Dce);return i.key=t,i.value=n,i.kind=e,i}function rfe(e,t){const n=new fa(Oce);return n.operator=e,n.argument=t,n.prefix=!0,n}function at(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Cb(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function Mb(e){e.type===e0&&at(e,Lce),e.type===oc&&at(e,Rce),e.type===t0&&at(e,Nce),e.type===Iu&&at(e,zce),e.type===Cl&&at(e,Fce),at(e,En,e.value)}function ti(e){const t=ki();(t.type!==$i||t.value!==e)&&Mb(t)}function $t(e){return mt.type===$i&&mt.value===e}function WE(e){return mt.type===Cl&&mt.value===e}function afe(){const e=[];for(ee=mt.start,ti("[");!$t("]");)$t(",")?(ki(),e.push(null)):(e.push(qu()),$t("]")||ti(","));return ki(),efe(e)}function M4(){ee=mt.start;const e=ki();return e.type===t0||e.type===oc?(e.octal&&at(e,rP),zg(e)):v3(e.value)}function sfe(){var e,t,n,i;if(ee=mt.start,e=mt,e.type===Iu)return n=M4(),ti(":"),i=qu(),C4("init",n,i);if(e.type===e0||e.type===$i)Mb(e);else return t=M4(),ti(":"),i=qu(),C4("init",t,i)}function ofe(){var e=[],t,n,i,r={},a=String;for(ee=mt.start,ti("{");!$t("}");)t=sfe(),t.key.type===iP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?at({},Uce):r[i]=!0,e.push(t),$t("}")||ti(",");return ti("}"),ife(e)}function lfe(){ti("(");const e=b3();return ti(")"),e}const ufe={if:1};function cfe(){var e,t,n;if($t("("))return lfe();if($t("["))return afe();if($t("{"))return ofe();if(e=mt.type,ee=mt.start,e===Iu||ufe[mt.value])n=v3(ki().value);else if(e===t0||e===oc)mt.octal&&at(mt,rP),n=zg(ki());else{if(e===Cl)throw new Error(gp);e===wb?(t=ki(),t.value=t.value==="true",n=zg(t)):e===Ab?(t=ki(),t.value=null,n=zg(t)):$t("/")||$t("/=")?(n=zg(Kce()),lP()):Mb(ki())}return n}function ffe(){const e=[];if(ti("("),!$t(")"))for(;ee<ei&&(e.push(qu()),!$t(")"));)ti(",");return ti(")"),e}function dfe(){ee=mt.start;const e=ki();return Jce(e)||Mb(e),v3(e.value)}function hfe(){return ti("."),dfe()}function gfe(){ti("[");const e=b3();return ti("]"),e}function pfe(){var e,t,n;for(e=cfe();;)if($t("."))n=hfe(),e=A4(".",e,n);else if($t("("))t=ffe(),e=tfe(e,t);else if($t("["))n=gfe(),e=A4("[",e,n);else break;return e}function $4(){const e=pfe();if(mt.type===$i&&($t("++")||$t("--")))throw new Error(gp);return e}function j1(){var e,t;if(mt.type!==$i&&mt.type!==Cl)t=$4();else{if($t("++")||$t("--"))throw new Error(gp);if($t("+")||$t("-")||$t("~")||$t("!"))e=ki(),t=j1(),t=rfe(e.value,t);else{if(WE("delete")||WE("void")||WE("typeof"))throw new Error(gp);t=$4()}}return t}function T4(e){let t=0;if(e.type!==$i&&e.type!==Cl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function mfe(){var e,t,n,i,r,a,s,o,u,f;if(e=mt,u=j1(),i=mt,r=T4(i),r===0)return u;for(i.prec=r,ki(),t=[e,mt],s=j1(),a=[u,i,s];(r=T4(mt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,u=a.pop(),t.pop(),n=w4(o,u,s),a.push(n);i=ki(),i.prec=r,a.push(i),t.push(mt),n=j1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=w4(a[f-1].value,a[f-2],n),f-=2;return n}function qu(){var e,t,n;return e=mfe(),$t("?")&&(ki(),t=qu(),ti(":"),n=qu(),e=nfe(e,t,n)),e}function b3(){const e=qu();if($t(","))throw new Error(gp);return e}function x3(e){Ae=e,ee=0,ei=Ae.length,mt=null,lP();const t=b3();if(mt.type!==e0)throw new Error("Unexpect token after expression.");return t}var uP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function cP(e){function t(s,o,u,f){let d=e(o[0]);return u&&(d=u+"("+d+")",u.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,u){return f=>t(s,f,o,u)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&te("Missing arguments to clamp function."),s.length>3&&te("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&te("Missing arguments to if function."),s.length>3&&te("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function yfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function fP(e){e=e||{};const t=e.allowed?ra(e.allowed):{},n=e.forbidden?ra(e.forbidden):{},i=e.constants||uP,r=(e.functions||cP)(h),a=e.globalvar,s=e.fieldvar,o=Ie(a)?a:v=>`${a}["${v}"]`;let u={},f={},d=0;function h(v){if(ve(v))return v;const b=p[v.type];return b==null&&te("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:_e(n,b)?te("Illegal identifier: "+b):_e(i,b)?i[b]:_e(t,b)?b:(u[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const _=h(v.property);return S===s&&(f[yfe(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&te("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=_e(r,b)&&r[b];return _||te("Unrecognized function: "+b),Ie(_)?_(S):_+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(u),fields:Object.keys(f)};return u={},f={},b}return y.functions=r,y.constants=i,y}const k4=Symbol("vega_selection_getter");function dP(e){return(!e.getter||!e.getter[k4])&&(e.getter=kr(e.field),e.getter[k4]=!0),e.getter}const S3="intersect",D4="union",vfe="vlMulti",bfe="vlPoint",O4="or",xfe="and",ka="_vgsid_",mp=kr(ka),Sfe="E",Efe="R",_fe="R-E",wfe="R-LE",Afe="R-RE",Cfe="E-LT",Mfe="E-LTE",$fe="E-GT",Tfe="E-GTE",kfe="E-VALID",Dfe="E-ONE",rv="index:unit";function R4(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=dP(o)(e),el(s)&&(s=Qn(s)),el(i[a])&&(i[a]=Qn(i[a])),re(i[a])&&el(i[a][0])&&(i[a]=i[a].map(Qn)),o.type===Sfe){if(re(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Efe){if(!xf(s,i[a]))return!1}else if(o.type===Afe){if(!xf(s,i[a],!0,!1))return!1}else if(o.type===_fe){if(!xf(s,i[a],!1,!1))return!1}else if(o.type===wfe){if(!xf(s,i[a],!1,!0))return!1}else if(o.type===Cfe){if(s>=i[a])return!1}else if(o.type===Mfe){if(s>i[a])return!1}else if(o.type===$fe){if(s<=i[a])return!1}else if(o.type===Tfe){if(s<i[a])return!1}else if(o.type===kfe){if(s===null||isNaN(s))return!1}else if(o.type===Dfe&&i[a].indexOf(s)===-1)return!1;return!0}function Ofe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[rv]&&i[rv].value:void 0,s=n===S3,o=r.length,u=0,f,d,h,p,y;u<o;++u)if(f=r[u],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=R4(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=R4(t,f),s^y)return y;return o&&s}const hP=_d(mp),Rfe=hP.left,Nfe=hP.right;function zfe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[rv]&&i[rv].value:void 0,s=n===S3,o=mp(t),u=Rfe(r,o);if(u===r.length||mp(r[u])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(Nfe(r,o)-u<a.size)return!1}return!0}function Ffe(e,t){return e.map(n=>Pe(t.fields?{values:t.fields.map(i=>dP(i)(n.datum))}:{[ka]:mp(n.datum)},t))}function Lfe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},u={},f,d,h,p,y,v,b,S,_,w,A=a.length,C=0,M,k;C<A;++C)if(f=a[C],p=f.unit,d=f.fields,h=f.values,d&&h){for(M=0,k=d.length;M<k;++M)y=d[M],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),u[y.field]=_=y.type.charAt(0),w=QE[`${_}_union`],b[p]=w(S,Se(h[M]));n&&(S=o[p]||(o[p]=[]),S.push(Se(h).reduce((T,O,N)=>(T[d[N].field]=O,T),{})))}else y=ka,v=mp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[ka]:v}));if(t=t||D4,s[ka]?s[ka]=QE[`${ka}_${t}`](...Object.values(s[ka])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(O=>s[T][O]).reduce((O,N)=>O===void 0?N:QE[`${u[T]}_${t}`](O,N))}),a=Object.keys(o),n&&a.length){const T=i?bfe:vfe;s[T]=t===D4?{[O4]:a.reduce((O,N)=>(O.push(...o[N]),O),[])}:{[xfe]:a.map(O=>({[O4]:o[O]}))}}return s}var QE={[`${ka}_union`]:AW,[`${ka}_intersect`]:_W,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Ufe=":",Bfe="@";function E3(e,t,n,i){t[0].type!==Pu&&te("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Je(t).value,s="unit",o=Bfe+s,u=Ufe+r;a===S3&&!_e(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),_e(i,u)||(i[u]=n.getData(r).tuplesRef())}function gP(e){const t=this.context.data[e];return t?t.values.value:[]}function jfe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Pfe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Dr).insert(t)),1}function Ife(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const i0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},qfe=i0("format"),pP=i0("timeFormat"),Hfe=i0("utcFormat"),Gfe=i0("timeParse"),Yfe=i0("utcParse"),o1=new Date(2e3,0,1);function $b(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(o1.setYear(2e3),o1.setMonth(e),o1.setDate(t),pP.call(this,o1,n))}function Xfe(e){return $b.call(this,e,1,"%B")}function Vfe(e){return $b.call(this,e,1,"%b")}function Wfe(e){return $b.call(this,0,2+e,"%A")}function Qfe(e){return $b.call(this,0,2+e,"%a")}const Zfe=":",Kfe="@",cA="%",mP="$";function _3(e,t,n,i){t[0].type!==Pu&&te("First argument to data functions must be a string literal.");const r=t[0].value,a=Zfe+r;if(!_e(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Jfe(e,t,n,i){t[0].type!==Pu&&te("First argument to indata must be a string literal."),t[1].type!==Pu&&te("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=Kfe+a;_e(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function mi(e,t,n,i){if(t[0].type===Pu)N4(n,i,t[0].value);else for(e in n.scales)N4(n,i,e)}function N4(e,t,n){const i=cA+n;if(!_e(t,i))try{t[i]=e.scaleRef(n)}catch{}}function is(e,t){if(ve(e)){const n=t.scales[e];return n&&L5(n.value)?n.value:void 0}else if(Ie(e))return L5(e)?e:void 0}function ede(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=mi,n._range=mi,n._scale=mi;const i=r=>"_["+(r.type===Pu?ge(cA+r.value):ge(cA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function w3(e,t){return function(n,i,r){if(n){const a=is(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const tde=w3("area",bae),nde=w3("bounds",_ae),ide=w3("centroid",Tae);function rde(e,t){const n=is(e,(t||this).context);return n&&n.scale()}function ade(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function A3(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function sde(){return A3(this.context.dataflow,"warn",arguments)}function ode(){return A3(this.context.dataflow,"info",arguments)}function lde(){return A3(this.context.dataflow,"debug",arguments)}function ZE(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fA(e){const t=cl(e),n=ZE(t.r),i=ZE(t.g),r=ZE(t.b);return .2126*n+.7152*i+.0722*r}function ude(e,t){const n=fA(e),i=fA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function cde(){const e=[].slice.call(arguments);return e.unshift({}),Pe(...e)}function yP(e,t){return e===t||e!==e&&t!==t?!0:re(e)?re(t)&&e.length===t.length?fde(e,t):!1:be(e)&&be(t)?vP(e,t):!1}function fde(e,t){for(let n=0,i=e.length;n<i;++n)if(!yP(e[n],t[n]))return!1;return!0}function vP(e,t){for(const n in e)if(!yP(e[n],t[n]))return!1;return!0}function z4(e){return t=>vP(e,t)}function dde(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],u=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(u.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(u,d).run()},!0,1)),n&&(h=n===!0?Dr:re(n)||Lv(n)?n:z4(n),d.remove(h)),t&&d.insert(t),i&&(h=z4(i),u.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function hde(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function gde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const F4={};function pde(e,t){const n=F4[t]||(F4[t]=kr(t));return re(e)?e.map(n):n(e)}function Tb(e){return re(e)||ArrayBuffer.isView(e)?e:null}function C3(e){return Tb(e)||(ve(e)?e:null)}function mde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Tb(e).join(...n)}function yde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return C3(e).indexOf(...n)}function vde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return C3(e).lastIndexOf(...n)}function bde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return C3(e).slice(...n)}function xde(e,t,n){return Ie(n)&&te("Function argument passed to replace."),!ve(t)&&!fC(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Sde(e){return Tb(e).slice().reverse()}function Ede(e){return Tb(e).slice().sort(Sd)}function _de(e,t,n){return BM(e||0,t||0,n||0)}function wde(e,t){const n=is(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Ade(e,t){const n=is(e,(t||this).context);return n?n.copy():void 0}function Cde(e,t){const n=is(e,(t||this).context);return n?n.domain():[]}function Mde(e,t,n){const i=is(e,(n||this).context);return i?re(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function $de(e,t){const n=is(e,(t||this).context);return n&&n.range?n.range():[]}function Tde(e,t,n){const i=is(e,(n||this).context);return i?i(t):void 0}function kde(e,t,n,i,r){e=is(e,(r||this).context);const a=uU(t,n);let s=e.domain(),o=s[0],u=Je(s),f=ni;return u-o?f=ZL(e,o,u):e=(e.interpolator?lt("sequential")().interpolator(e.interpolator()):lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,u=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),u!==Je(s)&&s.push(u)),s.forEach(d=>a.stop(f(d),e(d))),a}function Dde(e,t,n){const i=is(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Ode(e){let t=null;return function(n){return n?sp(n,t=t||Vf(e)):e}}const bP=e=>e.data;function xP(e,t){const n=gP.call(t,e);return n.root&&n.root.lookup||{}}function Rde(e,t,n){const i=xP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(bP):void 0}function Nde(e,t){const n=xP(e,this)[t];return n?n.ancestors().map(bP):void 0}const SP=()=>typeof window<"u"&&window||null;function zde(){const e=SP();return e?e.screen:{}}function Fde(){const e=SP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Lde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function EP(e,t,n){if(!e)return[];const[i,r]=e,a=new rn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return aB(s,a,Ude(t))}function Ude(e){let t=null;if(e){const n=Se(e.marktype),i=Se(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Bde(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Se(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function jde(e){return Se(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Pde(e,t,n){const{x:i,y:r,mark:a}=n,s=new rn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,f]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),EP([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(u=>Ide(u.x,u.y,t))}function Ide(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[u,f]=n[r];f>t!=o>t&&e<(s-u)*(t-f)/(o-f)+u&&i++}return i&1}const yp={random(){return Rr()},cumulativeNormal:Iv,cumulativeLogNormal:BC,cumulativeUniform:qC,densityNormal:NC,densityLogNormal:UC,densityUniform:IC,quantileNormal:qv,quantileLogNormal:jC,quantileUniform:HC,sampleNormal:Pv,sampleLogNormal:LC,sampleUniform:PC,isArray:re,isBoolean:Sl,isDate:el,isDefined(e){return e!==void 0},isNumber:st,isObject:be,isRegExp:fC,isString:ve,isTuple:Lv,isValid(e){return e!=null&&e===e},toBoolean:hC,toDate(e){return gC(e)},toNumber:Qn,toString:pC,indexof:yde,join:mde,lastindexof:vde,replace:xde,reverse:Sde,sort:Ede,slice:bde,flush:T8,lerp:D8,merge:cde,pad:N8,peek:Je,pluck:pde,span:kp,inrange:xf,truncate:z8,rgb:cl,lab:cy,hcl:fy,hsl:ly,luminance:fA,contrast:ude,sequence:er,format:qfe,utcFormat:Hfe,utcParse:Yfe,utcOffset:g9,utcSequence:y9,timeFormat:pP,timeParse:Gfe,timeOffset:h9,timeSequence:m9,timeUnitSpecifier:n9,monthFormat:Xfe,monthAbbrevFormat:Vfe,dayFormat:Wfe,dayAbbrevFormat:Qfe,quarter:A8,utcquarter:C8,week:r9,utcweek:o9,dayofyear:i9,utcdayofyear:s9,warn:sde,info:ode,debug:lde,extent(e){return Ia(e)},inScope:ade,intersect:EP,clampRange:M8,pinchDistance:hde,pinchAngle:gde,screen:zde,containerSize:Lde,windowSize:Fde,bandspace:_de,setdata:Pfe,pathShape:Ode,panLinear:S8,panLog:E8,panPow:_8,panSymlog:w8,zoomLinear:sC,zoomLog:oC,zoomPow:W1,zoomSymlog:lC,encode:Ife,modify:dde,lassoAppend:Bde,lassoPath:jde,intersectLasso:Pde},qde=["view","item","group","xy","x","y"],Hde="event.vega.",_P="this.",M3={},wP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(mP+e)}]`,functions:Gde,constants:uP,visitors:M3},dA=fP(wP);function Gde(e){const t=cP(e);qde.forEach(n=>t[n]=Hde+n);for(const n in yp)t[n]=_P+n;return Pe(t,ede(e,yp,M3)),t}function Zt(e,t,n){return arguments.length===1?yp[e]:(yp[e]=t,n&&(M3[e]=n),dA&&(dA.functions[e]=_P+e),this)}Zt("bandwidth",wde,mi);Zt("copy",Ade,mi);Zt("domain",Cde,mi);Zt("range",$de,mi);Zt("invert",Mde,mi);Zt("scale",Tde,mi);Zt("gradient",kde,mi);Zt("geoArea",tde,mi);Zt("geoBounds",nde,mi);Zt("geoCentroid",ide,mi);Zt("geoShape",Dde,mi);Zt("geoScale",rde,mi);Zt("indata",jfe,Jfe);Zt("data",gP,_3);Zt("treePath",Rde,_3);Zt("treeAncestors",Nde,_3);Zt("vlSelectionTest",Ofe,E3);Zt("vlSelectionIdTest",zfe,E3);Zt("vlSelectionResolve",Lfe,E3);Zt("vlSelectionTuples",Ffe);function Xa(e,t){const n={};let i;try{e=ve(e)?e:ge(e)+"",i=x3(e)}catch{te("Expression parse error: "+e)}i.visit(a=>{if(a.type!==nP)return;const s=a.callee.name,o=wP.visitors[s];o&&o(s,a.arguments,t,n)});const r=dA(i);return r.globals.forEach(a=>{const s=mP+a;!_e(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Pe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function Yde(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Xde=ra(["rule"]),L4=ra(["group","image","rect"]);function Vde(e,t){let n="";return Xde[t]||(e.x2&&(e.x?(L4[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(L4[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function $3(e){return(e+"").toLowerCase()}function Wde(e){return $3(e)==="operator"}function Qde(e){return $3(e)==="collect"}function rg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Zde(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Kde={operator:(e,t)=>rg(e,["_"],t.code),parameter:(e,t)=>rg(e,["datum","_"],t.code),event:(e,t)=>rg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return rg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ge(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Vde(i,n),r+="return m;",rg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ge).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let u,f;return a.path?(u=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,u=`this.f${s}(a)`,f=`this.f${s}(b)`),Zde(u,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Jde(e){const t=this;Wde(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ehe(e){const t=this;if(e.params){const n=t.get(e.id);n||te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function the(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=re(r)?r.map(a=>U4(a,n,t)):U4(r,n,t)}return t}function U4(e,t,n){if(!e||!be(e))return e;for(let i=0,r=B4.length,a;i<r;++i)if(a=B4[i],_e(e,a.key))return a.parse(e,t,n);return e}var B4=[{key:"$ref",parse:nhe},{key:"$key",parse:rhe},{key:"$expr",parse:ihe},{key:"$field",parse:ahe},{key:"$encode",parse:ohe},{key:"$compare",parse:she},{key:"$context",parse:lhe},{key:"$subflow",parse:uhe},{key:"$tupleid",parse:che}];function nhe(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function ihe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Bi(t.parameterExpression(e.$expr),e.$fields))}function rhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=dC(e.$key,e.$flat,t.expr.codegen))}function ahe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=kr(e.$field,e.$name,t.expr.codegen))}function she(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Se(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=uC(i,e.$order,t.expr.codegen))}function ohe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Bi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function lhe(e,t){return t}function uhe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(a),o.detachSubflow=()=>t.detach(s),o}}function che(){return ke}function fhe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function dhe(e){var t=this,n=be(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||te("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const hhe={skip:!0};function ghe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function phe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],hhe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Dr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function AP(e,t,n,i){return new CP(e,t,n,i)}function CP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Kde,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function j4(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}CP.prototype=j4.prototype={fork(){const e=new j4(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Qde(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[$3(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Yde,parseOperator:Jde,parseOperatorParameters:ehe,parseParameters:the,parseStream:fhe,parseUpdate:dhe,getState:ghe,setState:phe};function mhe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),MP(t,e.description()))}function MP(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function yhe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const KE="default";function vhe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:KE,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?ve(r)?r:r.user:KE,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return ve(i)||(r=i.item,i=i.user),hA(e,i&&i!==KE?i:r||i),r},{cursor:t})}function hA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function av(e,t){var n=e._runtime.data;return _e(n,t)||te("Unrecognized data set: "+t),n[t]}function bhe(e,t){return arguments.length<2?av(this,e).values.value:kb.call(this,e,rc().remove(Dr).insert(t))}function kb(e,t){H9(t)||te("Second argument to changes must be a changeset.");const n=av(this,e);return n.modified=!0,this.pulse(n.input,t)}function xhe(e,t){return kb.call(this,e,rc().insert(t))}function She(e,t){return kb.call(this,e,rc().remove(t))}function $P(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function TP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Db(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ehe(e){var t=Db(e),n=$P(e),i=TP(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function _he(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=Db(e),s=t.changedTouches?t.changedTouches[0]:t,a=mb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=whe(e,n,a),t}function whe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){o=u;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;ve(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:ii(e),item:ii(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const P4="view",Ahe="timer",Che="window",Mhe={trap:!1};function $he(e){const t=Pe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{re(i[a])&&(i[a]=ra(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function kP(e,t,n,i){e._eventListeners.push({type:n,sources:Se(t),handler:i})}function The(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function l1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||be(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function khe(e,t,n){var i=this,r=new jv(n),a=function(f,d){i.runAsync(null,()=>{e===P4&&The(i,t)&&f.preventDefault(),r.receive(_he(i,f,d))})},s;if(e===Ahe)l1(i,"timer",t)&&i.timer(a,t);else if(e===P4)l1(i,"view",t)&&i.addEventListener(t,a,Mhe);else if(e===Che?l1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&l1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,u=s.length;o<u;++o)s[o].addEventListener(t,a);kP(i,s,t,a)}return r}function I4(e){return e.item}function q4(e){return e.item.mark.source}function H4(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Dhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",I4),q4,H4(e)),this.on(this.events("view","pointerout",I4),q4,H4(t)),this}function Ohe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,u;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)u=n[r].type,o=n[r].handler,this._handler.off(u,o);return this}function rr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Rhe="vega-bind",Nhe="vega-bind-name",zhe="vega-bind-radio";function Fhe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=cC(i.debounce,r.update))),(i.input==null&&i.element?Lhe:Bhe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Lhe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),kP(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Uhe(r))}}function Uhe(e){return typeof Event<"u"?new Event(e):{type:e}}function Bhe(e,t,n,i){const r=i.signal(n.signal),a=rr("div",{class:Rhe}),s=n.input==="radio"?a:a.appendChild(rr("label"));s.appendChild(rr("span",{class:Nhe},n.name||n.signal)),t.appendChild(a);let o=jhe;switch(n.input){case"checkbox":o=Phe;break;case"select":o=Ihe;break;case"radio":o=qhe;break;case"range":o=Hhe;break}o(e,s,n,r)}function jhe(e,t,n,i){const r=rr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Phe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=rr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Ihe(e,t,n,i){const r=rr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const u={value:s};sv(s,i)&&(u.selected=!0),r.appendChild(rr("option",u,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,u=n.options.length;o<u;++o)if(sv(n.options[o],s)){r.selectedIndex=o;return}}}function qhe(e,t,n,i){const r=rr("span",{class:zhe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const u={type:"radio",name:n.signal,value:s};sv(s,i)&&(u.checked=!0);const f=rr("input",u);f.addEventListener("change",()=>e.update(s));const d=rr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,u=o.length;for(let f=0;f<u;++f)sv(o[f].value,s)&&(o[f].checked=!0)}}function Hhe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||ol(a,r,100),o=rr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const u=rr("span",{},+i);t.appendChild(o),t.appendChild(u);const f=()=>{u.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,u.textContent=d}}function sv(e,t){return e===t||e+""==t+""}function DP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,$P(e),TP(e),Db(e),r,a).background(e.background())}function T3(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Ghe(e,t,n,i){const r=new i(e.loader(),T3(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Db(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Yhe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=yb(i);e=n._el=e?JE(n,e,!0):null,mhe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Wp,o=e?a.renderer:a.headless;return n._renderer=o?DP(n,n._renderer,e,o):null,n._handler=Ghe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=JE(n,t,!0):e.appendChild(rr("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&r!=="container"&&(u.element=JE(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Fhe(n,u.element||t,u)})),n}function JE(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ag=e=>+e||0,Xhe=e=>({top:e,bottom:e,left:e,right:e});function G4(e){return be(e)?{top:ag(e.top),bottom:ag(e.bottom),left:ag(e.left),right:ag(e.right)}:Xhe(ag(e))}async function k3(e,t,n,i){const r=yb(t),a=r&&r.headless;return a||te("Unrecognized renderer type: "+t),await e.runAsync(),DP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Vhe(e,t){e!==Vo.Canvas&&e!==Vo.SVG&&e!==Vo.PNG&&te("Unrecognized image type: "+e);const n=await k3(this,e,t);return e===Vo.SVG?Whe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Whe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Qhe(e,t){return(await k3(this,Vo.Canvas,e,t)).canvas()}async function Zhe(e){return(await k3(this,Vo.SVG,e)).svg()}function Khe(e,t,n){return AP(e,If,yp,n).parse(t)}function Jhe(e){var t=this._runtime.scales;return _e(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var OP="width",RP="height",D3="padding",Y4={skip:!0};function NP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===D3?i.left+i.right:0)}function zP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===D3?i.top+i.bottom:0)}function ege(e){var t=e._signals,n=t[OP],i=t[RP],r=t[D3];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=NP(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=zP(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function tge(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(OP,n,Y4),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(RP,i,Y4),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(u=>u.resize())},!1,1)}function nge(e){return this._runtime.getState(e||{data:ige,signals:rge,recurse:!0})}function ige(e,t){return t.modified&&re(t.input.value)&&!e.startsWith("_:vega:_")}function rge(e,t){return!(e==="parent"||t instanceof If.proxy)}function age(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function sge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(koe(n,t))}function oge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",lge(i))}function lge(e){return e==null?"":re(e)?FP(e):be(e)&&!el(e)?uge(e):e+""}function uge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(re(n)?FP(n):LP(n))}).join(`
`)}function FP(e){return"["+e.map(LP).join(", ")+"]"}function LP(e){return re(e)?"[…]":be(e)&&!el(e)?"{…}":e}function cge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function UP(e,t){const n=this;if(t=t||{},Mf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Pe({},e.locale,t.locale);n.locale(N9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vo.Canvas,n._scenegraph=new OU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||oge,n._redraw=!0,n._handler=new Wp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=$he(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Khe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Pe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=NP(n,n._width),n._viewHeight=zP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,ege(n),yhe(n),vhe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function u1(e,t){return _e(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+ge(t))}function BP(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function X4(e,t,n,i){let r=BP(n,i);return r||(r=T3(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function V4(e,t,n){const i=BP(t,n);return i&&t._targets.remove(i),e}pe(UP,Mf,{async evaluate(e,t,n){if(await Mf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ehe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&_1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&MP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=u1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",G4(e)):G4(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(yb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Mf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(u1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:tge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=T3(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return X4(this,e,u1(this,e),t)},removeSignalListener(e,t){return V4(this,u1(this,e),t)},addDataListener(e,t){return X4(this,e,av(this,e).values,t)},removeDataListener(e,t){return V4(this,av(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=hA(this,null);this._globalCursor=!!e,t&&hA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:sge,events:khe,finalize:Ohe,hover:Dhe,data:bhe,change:kb,insert:xhe,remove:She,scale:Jhe,initialize:Yhe,toImageURL:Vhe,toCanvas:Qhe,toSVG:Zhe,getState:nge,setState:age,_watchPixelRatio:cge});const fge="view",ov="[",lv="]",jP="{",PP="}",dge=":",IP=",",hge="@",gge=">",pge=/[[\]{}]/,mge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let qP,HP;function Ml(e,t,n){return qP=t||fge,HP=n||mge,GP(e.trim()).map(gA)}function yge(e){return HP[e]}function Vg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function GP(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Vg(e,r,IP,ov+jP,lv+PP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function gA(e){return e[0]==="["?vge(e):bge(e)}function vge(e){const t=e.length;let n=1,i;if(n=Vg(e,n,lv,ov,lv),n===t)throw"Empty between selector: "+e;if(i=GP(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==gge)throw"Expected '>' after between selector: "+e;i=i.map(gA);const r=gA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function bge(e){const t={source:qP},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,u,f;if(e[s-1]===PP){if(o=e.lastIndexOf(jP),o>=0){try{i=xge(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===hge&&(r=++o),u=Vg(e,o,dge),u<s&&(n.push(e.substring(a,u).trim()),a=o=++u),o=Vg(e,o,ov),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Vg(e,o,lv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==ov)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||pge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):yge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function xge(e){const t=e.split(IP);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Sge(e){return be(e)?e:{type:e||"pad"}}const sg=e=>+e||0,Ege=e=>({top:e,bottom:e,left:e,right:e});function _ge(e){return be(e)?e.signal?e:{top:sg(e.top),bottom:sg(e.bottom),left:sg(e.left),right:sg(e.right)}:Ege(sg(e))}const _n=e=>be(e)&&!re(e)?Pe({},e):{value:e};function W4(e,t,n,i){return n!=null?(be(n)&&!re(n)||re(n)&&n.length&&be(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Bn(e,t,n){for(const i in t)W4(e,i,t[i]);for(const i in n)W4(e,i,n[i],"update")}function Rd(e,t,n){for(const i in t)n&&_e(n,i)||(e[i]=Pe(e[i]||{},t[i]));return e}function vf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const O3="mark",R3="frame",N3="scope",wge="axis",Age="axis-domain",Cge="axis-grid",Mge="axis-label",$ge="axis-tick",Tge="axis-title",kge="legend",Dge="legend-band",Oge="legend-entry",Rge="legend-gradient",YP="legend-label",Nge="legend-symbol",zge="legend-title",Fge="title",Lge="title-text",Uge="title-subtitle";function Bge(e,t,n,i,r){const a={},s={};let o,u,f,d;u="lineBreak",t==="text"&&r[u]!=null&&!vf(u,e)&&e_(a,u,r[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===R3?r.group:n===O3?Pe({},r.mark,r[t]):null;for(u in d)f=vf(u,e)||(u==="fill"||u==="stroke")&&(vf("fill",e)||vf("stroke",e)),f||e_(a,u,d[u]);Se(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)vf(y,e)||e_(a,y,p[y])}),e=Pe({},e);for(u in a)d=a[u],d.signal?(o=o||{})[u]=d:s[u]=d;return e.enter=Pe(s,e.enter),o&&(e.update=Pe(o,e.update)),e}function e_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const XP=e=>ve(e)?ge(e):e.signal?`(${e.signal})`:VP(e);function Ob(e){if(e.gradient!=null)return Pge(e);let t=e.signal?`(${e.signal})`:e.color?jge(e.color):e.field!=null?VP(e.field):e.value!==void 0?ge(e.value):void 0;return e.scale!=null&&(t=Ige(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${P1(e.exponent)})`),e.mult!=null&&(t+=`*${P1(e.mult)}`),e.offset!=null&&(t+=`+${P1(e.offset)}`),e.round&&(t=`round(${t})`),t}const c1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Ob).join(",")})+'')`;function jge(e){return e.c?c1("hcl",e.h,e.c,e.l):e.h||e.s?c1("hsl",e.h,e.s,e.l):e.l||e.a?c1("lab",e.l,e.a,e.b):e.r||e.g||e.b?c1("rgb",e.r,e.g,e.b):null}function Pge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ge(n));for(;t.length&&Je(t)==null;)t.pop();return t.unshift(XP(e.gradient)),`gradient(${t.join(",")})`}function P1(e){return be(e)?"("+Ob(e)+")":e}function VP(e){return WP(be(e)?e:{datum:e})}function WP(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+ge(e));return e.signal||(i=ve(i)?Za(i).map(ge).join("]["):WP(i)),t+"["+i+"]"}function Ige(e,t){const n=XP(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+P1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function qge(e){let t="";return e.forEach(n=>{const i=Ob(n);t+=n.test?`(${n.test})?${i}:`:i}),Je(t)===":"&&(t+="null"),t}function QP(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=Bge(e,t,n,i,r.config);for(const o in e)s[o]=Hge(e[o],t,a,r);return a}function Hge(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=Yge(Gge(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Gge(e){return re(e)?qge(e):Ob(e)}function Yge(e,t,n,i){const r=Xa(e,t);return r.$fields.forEach(a=>i[a]=1),Pe(n,r.$params),r.$expr}const Xge="outer",Vge=["value","update","init","react","bind"];function Q4(e,t){te(e+' for "outer" push: '+ge(t))}function ZP(e,t){const n=e.name;if(e.push===Xge)t.signals[n]||Q4("No prior signal definition",n),Vge.forEach(i=>{e[i]!==void 0&&Q4("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function pA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Rb(e,t,n,i){return new pA(e,t,n,i)}function uv(e,t){return Rb("operator",e,t)}function Te(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function vp(e,t){return t?{$field:e,$name:t}:{$field:e}}const mA=vp("key");function Z4(e,t){return{$compare:e,$order:t}}function Wge(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Qge="ascending",Zge="descending";function Kge(e){return be(e)?(e.order===Zge?"-":"+")+Nb(e.op,e.field):""}function Nb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const z3="scope",yA="view";function fn(e){return e&&e.signal}function Jge(e){return e&&e.expr}function I1(e){if(fn(e))return!0;if(be(e)){for(const t in e)if(I1(e[t]))return!0}return!1}function Xr(e,t){return e??t}function Mu(e){return e&&e.signal||e}const K4="timer";function bp(e,t){return(e.merge?tpe:e.stream?npe:e.type?ipe:te("Invalid stream specification: "+ge(e)))(e,t)}function epe(e){return e===z3?yA:e||yA}function tpe(e,t){const n=e.merge.map(r=>bp(r,t)),i=F3({merge:n},e,t);return t.addStream(i).id}function npe(e,t){const n=bp(e.stream,t),i=F3({stream:n},e,t);return t.addStream(i).id}function ipe(e,t){let n;e.type===K4?(n=t.event(K4,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(epe(e.source),e.type);const i=F3({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function F3(e,t,n){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+ge(t)),e.between=[bp(i[0],n),bp(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(rpe(t.marktype,t.markname,t.markrole)),t.source===z3&&i.push("inScope(event.item)"),i.length&&(e.filter=Xa("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function rpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const ape={code:"_.$value",ast:{type:"Identifier",value:"value"}};function spe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||te("Signal update missing events specification."),ve(a)&&(a=Ml(a,t.isSubscope()?z3:yA)),a=Se(a).filter(u=>u.signal||u.scale?(o.push(u),0):1),o.length>1&&(o=[lpe(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&te("Signal encode and update are mutually exclusive."),s="encode(item(),"+ge(i)+")"),r.update=ve(s)?Xa(s,t):s.expr!=null?Xa(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:ape,$params:{$value:t.signalRef(s.signal)}}:te("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(u=>t.addUpdate(Pe(ope(u,t),r)))}function ope(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):bp(e,t)}}function lpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function upe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Xa(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>spe(r,t,n.id))}const Et=e=>(t,n,i)=>Rb(e,n,t||void 0,i),KP=Et("aggregate"),cpe=Et("axisticks"),JP=Et("bound"),da=Et("collect"),J4=Et("compare"),fpe=Et("datajoin"),eI=Et("encode"),dpe=Et("expression"),hpe=Et("facet"),gpe=Et("field"),ppe=Et("key"),mpe=Et("legendentries"),ype=Et("load"),vpe=Et("mark"),bpe=Et("multiextent"),xpe=Et("multivalues"),Spe=Et("overlap"),Epe=Et("params"),tI=Et("prefacet"),_pe=Et("projection"),wpe=Et("proxy"),Ape=Et("relay"),nI=Et("render"),Cpe=Et("scale"),lc=Et("sieve"),Mpe=Et("sortitems"),iI=Et("viewlayout"),$pe=Et("values");let Tpe=0;const rI={min:"min",max:"max",count:"sum"};function kpe(e,t){const n=e.type||"linear";GL(n)||te("Unrecognized scale type: "+ge(n)),t.addScale(e.name,{type:n,domain:void 0})}function Dpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=aI(e.domain,e,t),e.range!=null&&(n.range=oI(e,t,n)),e.interpolate!=null&&Ppe(e.interpolate,n),e.nice!=null&&(n.nice=jpe(e.nice,t)),e.bins!=null&&(n.bins=Bpe(e.bins,t));for(i in e)_e(n,i)||i==="name"||(n[i]=Cr(e[i],t))}function Cr(e,t){return be(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+ge(e)):e}function q1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cr(n,t))}function zb(e){te("Can not find data set: "+ge(e))}function aI(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(re(e)?Ope:e.fields?Npe:Rpe)(e,t,n)}function Ope(e,t,n){return e.map(i=>Cr(i,n))}function Rpe(e,t,n){const i=n.getData(e.data);return i||zb(e.data),Xf(t.type)?i.valuesRef(n,e.field,sI(e.sort,!1)):VL(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Npe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=ve(s)?{data:i,field:s}:re(s)||s.signal?zpe(s,n):s,a.push(s),a),[]);return(Xf(t.type)?Fpe:VL(t.type)?Lpe:Upe)(e,n,r)}function zpe(e,t){const n="_:vega:_"+Tpe++,i=da({});if(re(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ge(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,lc({})]),{data:n,field:"data"}}function Fpe(e,t,n){const i=sI(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||zb(f.data),d.countsRef(t,f.field,i)}),o={groupby:mA,pulse:s};i&&(r=i.op||"count",a=i.field?Nb(r,i.field):"count",o.ops=[rI[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(KP(o));const u=t.add(da({pulse:Te(r)}));return a=t.add($pe({field:mA,sort:t.sortRef(i),pulse:Te(u)})),Te(a)}function sI(e,t){return e&&(!e.field&&!e.op?be(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!rI[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function Lpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||zb(r.data),a.domainRef(t,r.field)});return Te(t.add(xpe({values:i})))}function Upe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||zb(r.data),a.extentRef(t,r.field)});return Te(t.add(bpe({extents:i})))}function Bpe(e,t){return e.signal||re(e)?q1(e,t):t.objectProperty(e)}function jpe(e,t){return e.signal?t.signalRef(e.signal):be(e)?{interval:Cr(e.interval),step:Cr(e.step)}:Cr(e)}function Ppe(e,t){t.interpolate=Cr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cr(e.gamma))}function oI(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(ve(r)){if(i&&_e(i,r))return e=Pe({},e,{range:i[r]}),oI(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Xf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+ge(r))}else if(r.scheme){n.scheme=re(r.scheme)?q1(r.scheme,t):Cr(r.scheme,t),r.extent&&(n.schemeExtent=q1(r.extent,t)),r.count&&(n.schemeCount=Cr(r.count,t));return}else if(r.step){n.rangeStep=Cr(r.step,t);return}else{if(Xf(e.type)&&!re(r))return aI(r,e,t);re(r)||te("Unsupported range type: "+ge(r))}return r.map(a=>(re(a)?q1:Cr)(a,t))}function Ipe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=vA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=vA(n[r],r,t));t.addProjection(e.name,i)}function vA(e,t,n){return re(e)?e.map(i=>vA(i,t,n)):be(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+ge(e)):e}const ha="top",Nd="left",zd="right",pl="bottom",lI="center",qpe="vertical",Hpe="start",Gpe="middle",Ype="end",bA="index",L3="label",Xpe="offset",nd="perc",Vpe="perc2",$r="value",r0="guide-label",U3="guide-title",Wpe="group-title",Qpe="group-subtitle",ez="symbol",H1="gradient",xA="discrete",SA="size",Zpe="shape",Kpe="fill",Jpe="stroke",e0e="strokeWidth",t0e="strokeDash",n0e="opacity",B3=[SA,Zpe,Kpe,Jpe,e0e,t0e,n0e],a0={name:1,style:1,interactive:1},tt={value:0},Tr={value:1},Fb="group",uI="rect",j3="rule",i0e="symbol",uc="text";function xp(e){return e.type=Fb,e.interactive=e.interactive||!1,e}function ji(e,t){const n=(i,r)=>Xr(e[i],Xr(t[i],r));return n.isVertical=i=>qpe===Xr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xr(e.columns,Xr(t.columns,+n.isVertical(!0))),n}function cI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function r0e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Lb(e,t,n){return`item.anchor === '${Hpe}' ? ${e} : item.anchor === '${Ype}' ? ${t} : ${n}`}const P3=Lb(ge(Nd),ge(zd),ge(lI));function a0e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},be(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function fI(e,t){return t?e?be(e)?Object.assign({},e,{offset:fI(e.offset,t)}):{value:e,offset:t}:t:e}function cr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Rd(e.encode,t,a0)):e.interactive=!1,e}function s0e(e,t,n,i){const r=ji(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let u,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:u={opacity:tt,x:tt,y:tt,width:_n(h),height:_n(p)},update:Pe({},u,{opacity:Tr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:tt}};return Bn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),cr({type:uI,role:Rge,encode:y},i)}function o0e(e,t,n,i,r){const a=ji(e,n),s=a.isVertical(),o=a.gradientThickness(),u=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:tt,fill:{scale:t,field:$r}};v[f]={signal:y+"datum."+nd,mult:u},v[d]=tt,v[h]={signal:y+"datum."+Vpe,mult:u},v[p]=_n(o);const b={enter:v,update:Pe({},v,{opacity:Tr}),exit:{opacity:tt}};return Bn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),cr({type:uI,role:Dge,key:$r,from:r,encode:b},i)}const l0e=`datum.${nd}<=0?"${Nd}":datum.${nd}>=1?"${zd}":"${lI}"`,u0e=`datum.${nd}<=0?"${pl}":datum.${nd}>=1?"${ha}":"${Gpe}"`;function tz(e,t,n,i){const r=ji(e,t),a=r.isVertical(),s=_n(r.gradientThickness()),o=r.gradientLength();let u=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:tt},update:d={opacity:Tr,text:{field:L3}},exit:{opacity:tt}};return Bn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Xr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:u0e},h="y",p="x",y="1-"):(f.align=d.align={signal:l0e},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+nd,mult:o},f[p]=d[p]=s,s.offset=Xr(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:r("labelSeparation"),method:u,order:"datum."+bA}:void 0,cr({type:uc,role:YP,style:r0,key:$r,from:i,encode:v,overlap:u},n)}function c0e(e,t,n,i,r){const a=ji(e,t),s=n.entries,o=!!(s&&s.interactive),u=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${Xpe} : datum.${SA}`,y=f?_n(f):{field:SA},v=`datum.${bA}`,b=`max(1, ${r})`;let S,_,w,A,C;y.mult=.5,S={enter:_={opacity:tt,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Tr,x:_.x,y:_.y},exit:{opacity:tt}};let M=null,k=null;e.fill||(M=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),Bn(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),B3.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:$r})});const T=cr({type:i0e,role:Nge,key:$r,from:h,clip:f?!0:void 0,encode:S},n.symbols),O=_n(d);O.offset=a("labelOffset"),S={enter:_={opacity:tt,x:{signal:p,offset:O},y},update:w={opacity:Tr,text:{field:L3},x:_.x,y:_.y},exit:{opacity:tt}},Bn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=cr({type:uc,role:YP,style:r0,key:$r,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:tt,height:f?_n(f):tt,opacity:tt},exit:{opacity:tt},update:w={opacity:Tr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,C={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,C={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:bA}},xp({role:N3,from:i,encode:Rd(S,s,a0),marks:[T,N],name:u,interactive:o,sort:C})}function f0e(e,t){const n=ji(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const I3='item.orient === "left"',q3='item.orient === "right"',Ub=`(${I3} || ${q3})`,d0e=`datum.vgrad && ${Ub}`,h0e=Lb('"top"','"bottom"','"middle"'),g0e=Lb('"right"','"left"','"center"'),p0e=`datum.vgrad && ${q3} ? (${g0e}) : (${Ub} && !(datum.vgrad && ${I3})) ? "left" : ${P3}`,m0e=`item._anchor || (${Ub} ? "middle" : "start")`,y0e=`${d0e} ? (${I3} ? -90 : 90) : 0`,v0e=`${Ub} ? (datum.vgrad ? (${q3} ? "bottom" : "top") : ${h0e}) : "top"`;function b0e(e,t,n,i){const r=ji(e,t),a={enter:{opacity:tt},update:{opacity:Tr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tt}};return Bn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:m0e},angle:{signal:y0e},align:{signal:p0e},baseline:{signal:v0e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),cr({type:uc,role:zge,style:U3,from:i,encode:a},n)}function x0e(e,t){let n;return be(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+nz(e.path)+")":e.sphere&&(n="geoShape("+nz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function nz(e){return be(e)&&e.signal?e.signal:ge(e)}function dI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Fb?N3:t||O3}function S0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||dI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function E0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function H3(e,t){const n=X9(e.type);n||te("Unrecognized transform type: "+ge(e.type));const i=Rb(n.type.toLowerCase(),null,hI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function hI(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=_0e(s,t,n)}return i}function _0e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return w0e(e,t,n);if(r===void 0){e.required&&te("Missing required "+ge(t.type)+" parameter: "+ge(e.name));return}else{if(i==="param")return A0e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!fn(r)?r.map(a=>iz(e,a,n)):iz(e,r,n)}function iz(e,t,n){const i=e.type;if(fn(t))return az(i)?te("Expression references can not be signals."):t_(i)?n.fieldRef(t):sz(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||t_(i);return r&&C0e(t)?n.exprRef(t.expr,t.as):r&&M0e(t)?vp(t.field,t.as):az(i)?Xa(t,n):$0e(i)?Te(n.getData(t).values):t_(i)?vp(t):sz(i)?n.compareRef(t):t}}function w0e(e,t,n){return ve(t.from)||te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function A0e(e,t,n){const i=t[e.name];return e.array?(re(i)||te("Expected an array of sub-parameters. Instead: "+ge(i)),i.map(r=>rz(e,r,n))):rz(e,i,n)}function rz(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||te("Unsupported parameter: "+ge(t));const a=Pe(hI(r,t,n),r.key);return Te(n.add(Epe(a)))}const C0e=e=>e&&e.expr,M0e=e=>e&&e.field,$0e=e=>e==="data",az=e=>e==="expr",t_=e=>e==="field",sz=e=>e==="compare";function T0e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?s=o=G1(i,n):(e.data?o=Te(n.getData(e.data).aggregate):(a=H3(Pe({type:"aggregate",groupby:Se(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=G1(i,n),s=o=Te(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Te(n.add(da(null,[{}]))),s||(s=G1(e,n)),{key:r,pulse:s,parent:o}}function G1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Te(t.getData(e.data).output)}function Hu(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Hu.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Te(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new Hu(e,a,r,i,s)};function gI(e){return ve(e)?e:null}function oz(e,t,n){const i=Nb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function og(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),u=Kge(a);let f=gI(r),d,h;if(f!=null&&(e=t.scope,f=f+(u?"|"+u:""),d=o[f]),!d){const p=a?{field:mA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Te(t.output)};u&&(p.sort=e.sortRef(a)),h=e.add(Rb(i,void 0,p)),s&&(t.index[r]=h),d=Te(h),f!=null&&(o[f]=d)}return d}Hu.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=gI(t);let s,o,u;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&oz(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Te(i.output)},n&&n.field&&oz(e,u,n),o=e.add(KP(u)),s=e.add(da({pulse:Te(o)})),s={agg:o,ref:Te(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Te(this.values)},extentRef(e,t){return og(e,this,"extent","extent",t,!1)},domainRef(e,t){return og(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return og(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return og(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return og(e,this,"indata","tupleindex",t,!0,!0)}};function k0e(e,t,n){const i=e.from.facet,r=i.name,a=G1(i,t);let s;i.name||te("Facet must have a name: "+ge(i)),i.data||te("Facet must reference a data set: "+ge(i)),i.field?s=t.add(tI({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(hpe({key:t.keyRef(i.groupby),group:Te(t.proxy(n.parent)),pulse:a})):te("Facet must specify groupby or field: "+ge(i));const o=t.fork(),u=o.add(da()),f=o.add(lc({pulse:Te(u)}));o.addData(r,new Hu(o,u,u,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function D0e(e,t,n){const i=t.add(tI({pulse:n.pulse})),r=t.fork();r.add(lc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function pI(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,u=t.add(uv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=Xa(f,t);u.update=d.$expr,u.params=d.$params}function Bb(e,t){const n=dI(e),i=e.type===Fb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===N3||n===R3,o,u,f,d,h,p,y;const v=n===O3||s||r,b=T0e(e.from,i,t);u=t.add(fpe({key:b.key||(e.key?vp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Te(u);u=f=t.add(da({pulse:S})),u=t.add(vpe({markdef:S0e(e),interactive:E0e(e.interactive,t),clip:x0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Te(u)}));const _=Te(u);u=d=t.add(eI(QP(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const T=H3(k,t),O=T.metadata;(O.generates||O.changes)&&te("Mark transforms should not generate new data."),O.nomod||(d.params.mod=!0),T.params.pulse=Te(u),t.add(u=T)}),e.sort&&(u=t.add(Mpe({sort:t.compareRef(e.sort),pulse:Te(u)})));const w=Te(u);(r||s)&&(s=t.add(iI({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Te(s));const A=t.add(JP({mark:_,pulse:p||w}));y=Te(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,S),r?k0e(e,t,b):v?D0e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=O0e(a,y,t));const C=t.add(nI({pulse:y})),M=t.add(lc({pulse:Te(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Hu(t,f,C,M)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&te("Marks only support modify triggers."),pI(k,t,h)}))}function O0e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:fn(a)?n.signalRef(a.signal):a,method:fn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=fn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Te(n.add(Spe(s)))}function R0e(e,t){const n=t.config.legend,i=e.encode||{},r=ji(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,u=a.style,f={};let d=0,h,p,y;B3.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||te("Missing valid scale for legend.");const v=N0e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Te(t.add(da(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Te(t.add(mpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===H1?(y=[s0e(e,d,n,i.gradient),tz(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Mu(r.gradientLength())})/100))`)):v===xA?y=[o0e(e,d,n,i.gradient,w),tz(e,n,i.labels,w)]:(h=f0e(e,n),y=[c0e(e,n,i,w,Mu(h.columns))],p.size=L0e(e,t,y[0].marks)),y=[xp({role:Oge,from:S,encode:_,marks:y,layout:h,interactive:o})],b.title&&y.push(b0e(e,n,i.title,S)),Bb(xp({role:kge,from:S,encode:Rd(F0e(r,e,n),a,a0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:u}),t)}function N0e(e,t){let n=e.type||ez;return!e.type&&z0e(e)===1&&(e.fill||e.stroke)&&(n=HM(t)?H1:dw(t)?xA:ez),n!==H1?n:dw(t)?xA:H1}function z0e(e){return B3.reduce((t,n)=>t+(e[n]?1:0),0)}function F0e(e,t,n){const i={enter:{},update:{}};return Bn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function L0e(e,t,n){const i=Mu(lz("size",e,n)),r=Mu(lz("strokeWidth",e,n)),a=Mu(U0e(n[1].encode,t,r0));return Xa(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function lz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:cI(e,n[0].encode)}function U0e(e,t,n){return cI("fontSize",e)||r0e("fontSize",t,n)}const B0e=`item.orient==="${Nd}"?-90:item.orient==="${zd}"?90:0`;function j0e(e,t){e=ve(e)?{text:e}:e;const n=ji(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,u=[],f={},d=Te(t.add(da(null,[f])));return u.push(q0e(e,n,P0e(e),d)),e.subtitle&&u.push(H0e(e,n,i.subtitle,d)),Bb(xp({role:Fge,from:d,encode:I0e(n,r),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function P0e(e){const t=e.encode;return t&&t.title||Pe({name:e.name,interactive:e.interactive,style:e.style},t)}function I0e(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:P3},angle:{signal:B0e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Rd(n,t,a0)}function q0e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:Lge,style:Wpe,from:i,encode:s},n)}function H0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:Uge,style:Qpe,from:i,encode:s},n)}function G0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(H3(i,t))}),e.on&&e.on.forEach(i=>{pI(i,t,e.name)}),t.addDataPipeline(e.name,Y0e(e,t,n))}function Y0e(e,t,n){const i=[];let r=null,a=!1,s=!1,o,u,f,d,h;for(e.values?fn(e.values)||I1(e.format)?(i.push(uz(t,e)),i.push(r=nu())):i.push(r=nu({$ingest:e.values,$format:e.format})):e.url?I1(e.url)||I1(e.format)?(i.push(uz(t,e)),i.push(r=nu())):i.push(r=nu({$request:e.url,$format:e.format})):e.source&&(r=o=Se(e.source).map(p=>Te(t.getData(p).output)),i.push(null)),u=0,f=n.length;u<f;++u)d=n[u],h=d.metadata,!r&&!h.source&&i.push(r=nu()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=Ape({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,nu())),r||i.push(nu()),i.push(lc({})),i}function nu(e){const t=da({},e);return t.metadata={source:!0},t}function uz(e,t){return ype({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const mI=e=>e===pl||e===ha,jb=(e,t,n)=>fn(e)?Q0e(e.signal,t,n):e===Nd||e===ha?t:n,wn=(e,t,n)=>fn(e)?V0e(e.signal,t,n):mI(e)?t:n,na=(e,t,n)=>fn(e)?W0e(e.signal,t,n):mI(e)?n:t,yI=(e,t,n)=>fn(e)?Z0e(e.signal,t,n):e===ha?{value:t}:{value:n},X0e=(e,t,n)=>fn(e)?K0e(e.signal,t,n):e===zd?{value:t}:{value:n},V0e=(e,t,n)=>vI(`${e} === '${ha}' || ${e} === '${pl}'`,t,n),W0e=(e,t,n)=>vI(`${e} !== '${ha}' && ${e} !== '${pl}'`,t,n),Q0e=(e,t,n)=>G3(`${e} === '${Nd}' || ${e} === '${ha}'`,t,n),Z0e=(e,t,n)=>G3(`${e} === '${ha}'`,t,n),K0e=(e,t,n)=>G3(`${e} === '${zd}'`,t,n),vI=(e,t,n)=>(t=t!=null?_n(t):t,n=n!=null?_n(n):n,cz(t)&&cz(n)?(t=t?t.signal||ge(t.value):null,n=n?n.signal||ge(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pe({test:e},t)].concat(n||[])),cz=e=>e==null||Object.keys(e).length===1,G3=(e,t,n)=>({signal:`${e} ? (${Af(t)}) : (${Af(n)})`}),J0e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Nd}' ? (${Af(i)}) : `:"")+(n!=null?`${e} === '${pl}' ? (${Af(n)}) : `:"")+(r!=null?`${e} === '${zd}' ? (${Af(r)}) : `:"")+(t!=null?`${e} === '${ha}' ? (${Af(t)}) : `:"")+"(null)"}),Af=e=>fn(e)?e.signal:e==null?null:ge(e),eme=(e,t)=>t===0?0:fn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Df=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hf(e,t,n,i){let r;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[U3][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[r0][r]}return null}function fz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function tme(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,u,f;if(fn(s)){const h=fz([n.axisX,n.axisY]),p=fz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=wn(s,hf(f,n.axisX,r,i),hf(f,n.axisY,r,i));u={};for(f of p)u[f]=J0e(s.signal,hf(f,n.axisTop,r,i),hf(f,n.axisBottom,r,i),hf(f,n.axisLeft,r,i),hf(f,n.axisRight,r,i))}else o=s===ha||s===pl?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||u||a?Pe({},r,o,u,a):r}function nme(e,t,n,i){const r=ji(e,t),a=e.orient;let s,o;const u={enter:s={opacity:tt},update:o={opacity:Tr},exit:{opacity:tt}};Bn(u,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=dz(e,0),d=dz(e,1);return s.x=o.x=wn(a,f,tt),s.x2=o.x2=wn(a,d),s.y=o.y=na(a,f,tt),s.y2=o.y2=na(a,d),cr({type:j3,role:Age,from:i,encode:u},n)}function dz(e,t){return{scale:e.scale,range:t}}function ime(e,t,n,i,r){const a=ji(e,t),s=e.orient,o=e.gridScale,u=jb(s,1,-1),f=rme(e.offset,u);let d,h,p;const y={enter:d={opacity:tt},update:p={opacity:Tr},exit:h={opacity:tt}};Bn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:$r,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=wn(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:u,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:u,offset:f}:Pe(b,{mult:u,offset:f});return d.x=p.x=wn(s,v,S),d.y=p.y=na(s,v,S),d.x2=p.x2=na(s,_),d.y2=p.y2=wn(s,_),h.x=wn(s,v),h.y=na(s,v),cr({type:j3,role:Cge,key:$r,from:i,encode:y},n)}function rme(e,t){if(t!==1)if(!be(e))e=fn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pe({},e);for(;n.mult!=null;)if(be(n.mult))n=n.mult=Pe({},n.mult);else return n.mult=fn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function ame(e,t,n,i,r,a){const s=ji(e,t),o=e.orient,u=jb(o,-1,1);let f,d,h;const p={enter:f={opacity:tt},update:h={opacity:Tr},exit:d={opacity:tt}};Bn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=_n(r);y.mult=u;const v={scale:e.scale,field:$r,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=wn(o,tt,v),h.y2=f.y2=wn(o,y),d.x=wn(o,v),h.x=f.x=na(o,tt,v),h.x2=f.x2=na(o,y),d.y=na(o,v),cr({type:j3,role:$ge,key:$r,from:i,encode:p},n)}function n_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function sme(e,t,n,i,r,a){const s=ji(e,t),o=e.orient,u=e.scale,f=jb(o,-1,1),d=Mu(s("labelFlush")),h=Mu(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=_n(r);S.mult=f,S.offset=_n(s("labelPadding")||0),S.offset.mult=f;const _={scale:u,field:$r,band:.5,offset:fI(a.offset,s("labelOffset"))},w=wn(o,v?n_(u,d,'"left"','"right"','"center"'):{value:"center"},X0e(o,"left","right")),A=wn(o,yI(o,"bottom","top"),v?n_(u,d,'"top"','"bottom"','"middle"'):{value:"middle"}),C=n_(u,d,`-(${h})`,h,0);v=v&&h;const M={opacity:tt,x:wn(o,_,S),y:na(o,_,S)},k={enter:M,update:b={opacity:Tr,text:{field:L3},x:M.x,y:M.y,align:w,baseline:A},exit:{opacity:tt,x:M.x,y:M.y}};Bn(k,{dx:!p&&v?wn(o,C):null,dy:!y&&v?na(o,C):null}),Bn(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const T=s("labelBound");let O=s("labelOverlap");return O=O||T?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:T?{scale:u,orient:o,tolerance:T}:null}:void 0,b.align!==w&&(b.align=Df(b.align,w)),b.baseline!==A&&(b.baseline=Df(b.baseline,A)),cr({type:uc,role:Mge,style:r0,key:$r,from:i,encode:k,overlap:O},n)}function ome(e,t,n,i){const r=ji(e,t),a=e.orient,s=jb(a,-1,1);let o,u;const f={enter:o={opacity:tt,anchor:_n(r("titleAnchor",null)),align:{signal:P3}},update:u=Pe({},o,{opacity:Tr,text:_n(e.title)}),exit:{opacity:tt}},d={signal:`lerp(range("${e.scale}"), ${Lb(0,1,.5)})`};return u.x=wn(a,d),u.y=na(a,d),o.angle=wn(a,tt,eme(s,90)),o.baseline=wn(a,yI(a,pl,ha),{value:pl}),u.angle=o.angle,u.baseline=o.baseline,Bn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),lme(r,a,f,n),f.update.align=Df(f.update.align,o.align),f.update.angle=Df(f.update.angle,o.angle),f.update.baseline=Df(f.update.baseline,o.baseline),cr({type:uc,role:Tge,style:U3,from:i,encode:f},n)}function lme(e,t,n,i){const r=(o,u)=>o!=null?(n.update[u]=Df(_n(o),n.update[u]),!1):!vf(u,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?_n(s):wn(t,_n(s),_n(a))}function ume(e,t){const n=tme(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,u=ji(e,n),f=a0e(u),d={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},h=Te(t.add(da({},[d]))),p=Te(t.add(cpe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(ime(e,n,i.grid,p,f)),d.ticks&&(v=u("tickSize"),y.push(ame(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(sme(e,n,i.labels,p,v,f))),d.domain&&y.push(nme(e,n,i.domain,h)),d.title&&y.push(ome(e,n,i.title,h)),Bb(xp({role:wge,from:h,encode:Rd(cme(u,e),r,a0),marks:y,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:a,interactive:s,style:o}),t)}function cme(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),offset:e("offset")||0,position:Xr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function bI(e,t,n){const i=Se(e.signals),r=Se(e.scales);return n||i.forEach(a=>ZP(a,t)),Se(e.projections).forEach(a=>Ipe(a,t)),r.forEach(a=>kpe(a,t)),Se(e.data).forEach(a=>G0e(a,t)),r.forEach(a=>Dpe(a,t)),(n||i).forEach(a=>upe(a,t)),Se(e.axes).forEach(a=>ume(a,t)),Se(e.marks).forEach(a=>Bb(a,t)),Se(e.legends).forEach(a=>R0e(a,t)),e.title&&j0e(e.title,t),t.parseLambdas(),t}const fme=e=>Rd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function dme(e,t){const n=t.config,i=Te(t.root=t.add(uv())),r=hme(e,n);r.forEach(f=>ZP(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(da()),s=t.add(eI(QP(fme(e.encode),Fb,R3,e.style,t,{pulse:Te(a)}))),o=t.add(iI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Te(s)}));t.operators.pop(),t.pushState(Te(s),Te(o),null),bI(e,t,r),t.operators.push(o);let u=t.add(JP({mark:i,pulse:Te(o)}));return u=t.add(nI({pulse:Te(u)})),u=t.add(lc({pulse:Te(u)})),t.addData("root",new Hu(t,a,a,u)),t}function lg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function hme(e,t){const n=s=>Xr(e[s],t[s]),i=[lg("background",n("background")),lg("autosize",Sge(n("autosize"))),lg("padding",_ge(n("padding"))),lg("width",n("width")||0),lg("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return Se(e.signals).forEach(s=>{_e(r,s.name)?s=Pe(r[s.name],s):i.push(s),a[s.name]=s}),Se(t.signals).forEach(s=>{!_e(a,s.name)&&!_e(r,s.name)&&i.push(s)}),i}function xI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function hz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}xI.prototype=hz.prototype={parse(e){return bI(e,this)},fork(){return new hz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof pA?Te(e):e;return this.add(wpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Te(this.add(lc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Te(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Je(this._parent)},encode(){return Je(this._encode)},lookup(){return Je(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ve(e))return vp(e,t);e.signal||te("Unsupported field reference: "+ge(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Te(this.add(gpe(r)))}return i},compareRef(e){let t=!1;const n=a=>fn(a)?(t=!0,this.signalRef(a.signal)):Jge(a)?(t=!0,this.exprRef(a.expr)):a,i=Se(e.field).map(n),r=Se(e.order).map(n);return t?Te(this.add(J4({fields:i,orders:r}))):Z4(i,r)},keyRef(e,t){let n=!1;const i=a=>fn(a)?(n=!0,Te(r[a.signal])):a,r=this.signals;return e=Se(e).map(i),n?Te(this.add(ppe({fields:e,flat:t}))):Wge(e,t)},sortRef(e){if(!e)return e;const t=Nb(e.op,e.field),n=e.order||Qge;return n.signal?Te(this.add(J4({fields:t,orders:this.signalRef(n.signal)}))):Z4(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+ge(e));const n=t instanceof pA?t:this.add(uv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?Te(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(uv(null))),Te(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Xa(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!be(e)?e:this.signalRef(e.signal||Y3(e))},exprRef(e,t){const n={expr:Xa(e,this)};return t&&(n.expr.$name=t),Te(this.add(dpe(n)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+ge(e)),this.bindings.push(Pe({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&te("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Cpe(t))},addProjection(e,t){this.addScaleProj(e,_pe(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return Te(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+ge(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+ge(e)),this.addData(e,Hu.fromEntries(this,t))}};function Y3(e){return(re(e)?gme:pme)(e)}function gme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(be(r)?r.signal||Y3(r):ge(r))}return n+"]"}function pme(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ge(i)+":"+(be(r)?r.signal||Y3(r):ge(r));return t+"}"}function mme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function yme(e,t,n){return be(e)||te("Input Vega specification must be an object."),t=bd(mme(),t,e.config),dme(e,new xI(t,n)).toRuntime()}var vme="6.1.2";Pe(If,sJ,Lre,pae,eoe,Voe,Sue,eue,_ue,Xue,ice,cce);const bme=vme,xme=Object.freeze(Object.defineProperty({__proto__:null,Bounds:rn,CanvasHandler:Wp,CanvasRenderer:_y,DATE:Ni,DAY:Wn,DAYOFYEAR:Ga,Dataflow:Mf,Debug:m8,Error:iC,EventStream:jv,Gradient:uU,GroupItem:ub,HOURS:or,Handler:p$,HybridHandler:JU,HybridRenderer:_w,Info:p8,Item:lb,MILLISECONDS:aa,MINUTES:lr,MONTH:Jn,Marks:ur,MultiPulse:TC,None:g8,Operator:wt,Parameters:Bv,Pulse:nl,QUARTER:Ri,RenderType:Vo,Renderer:Vp,ResourceLoader:pU,SECONDS:Or,SVGHandler:jU,SVGRenderer:S$,SVGStringRenderer:KU,Scenegraph:OU,TIME_UNITS:bC,Transform:J,View:UP,WEEK:un,Warn:rC,YEAR:Un,accessor:Bi,accessorFields:Kn,accessorName:qt,array:Se,ascending:Sd,bandwidthNRD:RC,bin:Q9,bootstrapCI:Z9,boundClip:uB,boundContext:Hp,boundItem:vw,boundMark:$U,boundStroke:to,changeset:rc,clampRange:M8,codegenExpression:fP,compare:uC,constant:ii,cumulativeLogNormal:BC,cumulativeNormal:Iv,cumulativeUniform:qC,dayofyear:i9,debounce:cC,defaultLocale:wC,definition:X9,densityLogNormal:UC,densityNormal:NC,densityUniform:IC,domChild:ln,domClear:Er,domCreate:Yo,domFind:g$,dotbin:K9,error:te,expressionFunction:Zt,extend:Pe,extent:Ia,extentIndex:$8,falsy:Fo,fastmap:Ed,field:kr,flush:T8,font:gb,fontFamily:Xp,fontSize:es,format:E1,formatLocale:ty,formats:MC,hasOwnProperty:_e,id:Tp,identity:ni,inferType:F9,inferTypes:L9,ingest:ct,inherits:pe,inrange:xf,interpolate:GM,interpolateColors:sb,interpolateRange:WL,intersect:aB,intersectBoxLine:Sf,intersectPath:JM,intersectPoint:e$,intersectRule:yU,isArray:re,isBoolean:Sl,isDate:el,isFunction:Ie,isIterable:k8,isNumber:st,isObject:be,isRegExp:fC,isString:ve,isTuple:Lv,key:dC,lerp:D8,lineHeight:dl,loader:zv,locale:N9,logger:aC,lruCache:O8,markup:x$,merge:R8,mergeConfig:bd,multiLineOffset:f$,one:vd,pad:N8,panLinear:S8,panLog:E8,panPow:_8,panSymlog:w8,parse:yme,parseExpression:x3,parseSelector:Ml,path:Xv,pathCurves:QM,pathEqual:cB,pathParse:Vf,pathRectangle:dU,pathRender:sp,pathSymbols:fU,pathTrail:hU,peek:Je,point:mb,projection:j$,quantileLogNormal:jC,quantileNormal:qv,quantileUniform:HC,quantiles:DC,quantizeInterpolator:QL,quarter:A8,quartiles:OC,get random(){return Rr},randomInteger:cK,randomKDE:FC,randomLCG:uK,randomLogNormal:e7,randomMixture:t7,randomNormal:zC,randomUniform:n7,read:j9,regressionConstant:GC,regressionExp:r7,regressionLinear:YC,regressionLoess:o7,regressionLog:i7,regressionPoly:s7,regressionPow:a7,regressionQuad:XC,renderModule:yb,repeat:pg,resetDefaultLocale:sZ,resetSVGDefIds:tre,responseType:B9,runtimeContext:AP,sampleCurve:Gv,sampleLogNormal:LC,sampleNormal:Pv,sampleUniform:PC,scale:lt,sceneEqual:E$,sceneFromJSON:kU,scenePickVisit:py,sceneToJSON:TU,sceneVisit:sa,sceneZOrder:t$,scheme:YM,serializeXML:VU,setHybridRendererOptions:Zie,setRandom:oK,span:kp,splitAccessPath:Za,stringValue:ge,textMetrics:ir,timeBin:x9,timeFloor:c9,timeFormatLocale:ep,timeInterval:Cd,timeOffset:h9,timeSequence:m9,timeUnitSpecifier:n9,timeUnits:xC,toBoolean:hC,toDate:gC,toNumber:Qn,toSet:ra,toString:pC,transform:V9,transforms:If,truncate:z8,truthy:Dr,tupleid:ke,typeParsers:ew,utcFloor:f9,utcInterval:Md,utcOffset:g9,utcSequence:y9,utcdayofyear:s9,utcquarter:C8,utcweek:o9,version:bme,visitArray:Bo,week:r9,writeConfig:xd,zero:Ho,zoomLinear:sC,zoomLog:oC,zoomPow:W1,zoomSymlog:lC},Symbol.toStringTag,{value:"Module"}));function Sme(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Eme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},_me={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},wme={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Ame=Array.prototype.slice,iu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Ame.call(t,1))},Cme=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return ve(e)?new Date(e):new Date(e,t,n,i,r,a,s)};var Mme={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Cme,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return iu("join",arguments)},indexof:function(){return iu("indexOf",arguments)},lastindexof:function(){return iu("lastIndexOf",arguments)},slice:function(){return iu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Sd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return iu("substring",arguments,String)},split:function(){return iu("split",arguments,String)},replace:function(){return iu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const $me=["view","item","group","xy","x","y"],EA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&EA.add(setImmediate);const Tme={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Eme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),EA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Mme[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>_me[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>wme[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,EA.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function ug(e,t,n,i,r,a){const s=o=>Tme[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,$me.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var kme={operator(e,t){const n=t.ast,i=e.functions;return r=>ug(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>ug(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>ug(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return ug(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const u=s.datum;let f=0,d;for(const h in i)d=ug(i[h].ast,r,o,u,void 0,s),s[h]!==d&&(s[h]=d,f=1);return n!=="rule"&&Sme(s,i,a),f}}},Dme="6.2.0",Ome={version:Dme};function X3(e){return ce(e,"or")}function V3(e){return ce(e,"and")}function W3(e){return ce(e,"not")}function Y1(e,t){if(W3(e))Y1(e.not,t);else if(V3(e))for(const n of e.and)Y1(n,t);else if(X3(e))for(const n of e.or)Y1(n,t);else t(e)}function Of(e,t){return W3(e)?{not:Of(e.not,t)}:V3(e)?{and:e.and.map(n=>Of(n,t))}:X3(e)?{or:e.or.map(n=>Of(n,t))}:t(e)}const Le=structuredClone;function SI(e){throw new Error(e)}function id(e,t){const n={};for(const i of t)_e(e,i)&&(n[i]=e[i]);return n}function ar(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>dt(e)).join(",")})`};function Ze(e){if(st(e))return e;const t=ve(e)?e:dt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function _A(e){return e===!1||e===null}function Ve(e,t){return e.includes(t)}function rd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function Q3(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function EI(e,...t){for(const n of t)Rme(e,n??{});return e}function Rme(e,t){for(const n of ue(t))xd(e,n,t[n],!0)}function Na(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Nme(e,t){const n=ue(e),i=ue(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function _I(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Z3(e,t){for(const n of e)if(t.has(n))return!0;return!1}function wA(e){const t=new Set;for(const n of e){const r=Za(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function K3(e,t){return e===void 0||t===void 0?!0:Z3(wA(e),wA(t))}function At(e){return ue(e).length===0}const ue=Object.keys,nn=Object.values,ml=Object.entries;function Sp(e){return e===!0||e===!1}function Ot(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Wg(e,t){return W3(e)?`!(${Wg(e.not,t)})`:V3(e)?`(${e.and.map(n=>Wg(n,t)).join(") && (")})`:X3(e)?`(${e.or.map(n=>Wg(n,t)).join(") || (")})`:t(e)}function cv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&cv(e[n],t)&&delete e[n],At(e)}function s0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function J3(e,t="datum"){const n=Za(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ge).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function wI(e,t="datum"){return`${t}[${ge(Za(e).join("."))}]`}function pt(e){return`datum['${e.replaceAll("'","\\'")}']`}function zme(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zr(e){return`${Za(e).map(zme).join("\\.")}`}function Gu(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Fd(e){return`${Za(e).join(".")}`}function ad(e){return e?Za(e).length:0}function Wt(...e){return e.find(t=>t!==void 0)}let AI=42;function CI(e){const t=++AI;return e?String(e)+t:t}function Fme(){AI=42}function MI(e){return $I(e)?e:`__${e}`}function $I(e){return e.startsWith("__")}function Ep(e){if(e!==void 0)return(e%360+360)%360}function Pb(e){return st(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const gz=Object.getPrototypeOf(structuredClone({}));function tr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!tr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!tr(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==gz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==gz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!tr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function dt(e){const t=[];return function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const u=o[r],f=n(i[u]);f&&(a&&(a+=","),a+=`${JSON.stringify(u)}:${f}`)}return t.splice(s,1),`{${a}}`}(e)}function ce(e,t){return be(e)&&_e(e,t)&&e[t]!==void 0}const Hs="row",Gs="column",Ib="facet",Rt="x",$n="y",ga="x2",rs="y2",$l="xOffset",Ld="yOffset",pa="radius",io="radius2",Ur="theta",ro="theta2",ma="latitude",ya="longitude",va="latitude2",Fr="longitude2",Tl="time",Fi="color",as="fill",ss="stroke",Li="shape",ao="size",cc="angle",so="opacity",kl="fillOpacity",Dl="strokeOpacity",Ol="strokeWidth",Rl="strokeDash",o0="text",sd="order",l0="detail",qb="key",Yu="tooltip",Hb="href",Gb="url",Yb="description",Lme={x:1,y:1,x2:1,y2:1},TI={theta:1,theta2:1,radius:1,radius2:1};function kI(e){return _e(TI,e)}const eT={longitude:1,longitude2:1,latitude:1,latitude2:1};function DI(e){switch(e){case ma:return"y";case va:return"y2";case ya:return"x";case Fr:return"x2"}}function OI(e){return _e(eT,e)}const Ume=ue(eT),tT={...Lme,...TI,...eT,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Rf(e){return e===Fi||e===as||e===ss}const RI={row:1,column:1,facet:1},Mr=ue(RI),nT={...tT,...RI},Bme=ue(nT),{order:uAe,detail:cAe,tooltip:fAe,...jme}=nT,{row:dAe,column:hAe,facet:gAe,...Pme}=jme;function Ime(e){return _e(Pme,e)}function NI(e){return _e(nT,e)}const qme=[ga,rs,va,Fr,ro,io];function zI(e){return fc(e)!==e}function fc(e){switch(e){case ga:return Rt;case rs:return $n;case va:return ma;case Fr:return ya;case ro:return Ur;case io:return pa}return e}function yl(e){if(kI(e))switch(e){case Ur:return"startAngle";case ro:return"endAngle";case pa:return"outerRadius";case io:return"innerRadius"}return e}function os(e){switch(e){case Rt:return ga;case $n:return rs;case ma:return va;case ya:return Fr;case Ur:return ro;case pa:return io}}function Ui(e){switch(e){case Rt:case ga:return"width";case $n:case rs:return"height"}}function FI(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset";case ga:return"x2Offset";case rs:return"y2Offset";case Ur:return"thetaOffset";case pa:return"radiusOffset";case ro:return"theta2Offset";case io:return"radius2Offset"}}function iT(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset"}}function Hme(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Gme=ue(tT),{x:pAe,y:mAe,x2:yAe,y2:vAe,xOffset:bAe,yOffset:xAe,latitude:SAe,longitude:EAe,latitude2:_Ae,longitude2:wAe,theta:AAe,theta2:CAe,radius:MAe,radius2:$Ae,...rT}=tT,Yme=ue(rT),aT={x:1,y:1},oo=ue(aT);function Qt(e){return _e(aT,e)}const sT={theta:1,radius:1},Xme=ue(sT);function Xb(e){return e==="width"?Rt:$n}const LI={xOffset:1,yOffset:1};function u0(e){return _e(LI,e)}const Vme={time:1};function i_(e){return e in Vme}const{text:TAe,tooltip:kAe,href:DAe,url:OAe,description:RAe,detail:NAe,key:zAe,order:FAe,...UI}=rT,Wme=ue(UI);function Qme(e){return _e(rT,e)}function Zme(e){switch(e){case Fi:case as:case ss:case ao:case Li:case so:case Ol:case Rl:return!0;case kl:case Dl:case cc:case Tl:return!1}}const BI={...aT,...sT,...LI,...UI},oT=ue(BI);function ls(e){return _e(BI,e)}function Kme(e,t){return e1e(e)[t]}const jI={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:LAe,...Jme}=jI;function e1e(e){switch(e){case Fi:case as:case ss:case Yb:case l0:case qb:case Yu:case Hb:case sd:case so:case kl:case Dl:case Ol:case Ib:case Hs:case Gs:return jI;case Rt:case $n:case $l:case Ld:case ma:case ya:case Tl:return Jme;case ga:case rs:case va:case Fr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ao:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Rl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Li:return{point:"always",geoshape:"always"};case o0:return{text:"always"};case cc:return{point:"always",square:"always",text:"always"};case Gb:return{image:"always"};case Ur:return{text:"always",arc:"always"};case pa:return{text:"always",arc:"always"};case ro:case io:return{arc:"always"}}}function r_(e){switch(e){case Rt:case $n:case Ur:case pa:case $l:case Ld:case ao:case cc:case Ol:case so:case kl:case Dl:case Tl:case ga:case rs:case ro:case io:return;case Ib:case Hs:case Gs:case Li:case Rl:case o0:case Yu:case Hb:case Gb:case Yb:return"discrete";case Fi:case as:case ss:return"flexible";case ma:case ya:case va:case Fr:case l0:case qb:case sd:return}}const t1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},n1e={count:1,min:1,max:1};function Ks(e){return ce(e,"argmin")}function Nl(e){return ce(e,"argmax")}function lT(e){return ve(e)&&_e(t1e,e)}const i1e=new Set(["count","valid","missing","distinct"]);function Vb(e){return ve(e)&&i1e.has(e)}function r1e(e){return ve(e)&&Ve(["min","max"],e)}const a1e=new Set(["count","sum","distinct","valid","missing"]),s1e=new Set(["mean","average","median","q1","q3","min","max"]);function PI(e){return Sl(e)&&(e=sx(e,void 0)),`bin${ue(e).map(t=>Wb(e[t])?Ot(`_${t}_${ml(e[t])}`):Ot(`_${t}_${e[t]}`)).join("")}`}function Mt(e){return e===!0||dc(e)&&!e.binned}function On(e){return e==="binned"||dc(e)&&e.binned===!0}function dc(e){return be(e)}function Wb(e){return ce(e,"param")}function pz(e){switch(e){case Hs:case Gs:case ao:case Fi:case as:case ss:case Ol:case so:case kl:case Dl:case Li:return 6;case Rl:return 4;default:return 10}}function c0(e){return ce(e,"expr")}function Rn(e,{level:t}={level:0}){const n=ue(e||{}),i={};for(const r of n)i[r]=t===0?Ji(e[r]):Rn(e[r],{level:t-1});return i}function II(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:u,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...u?{subtitleColor:u}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function qo(e){return ve(e)||re(e)&&ve(e[0])}function Me(e){return ce(e,"signal")}function hc(e){return ce(e,"step")}function o1e(e){return re(e)?!1:ce(e,"fields")&&!ce(e,"data")}function l1e(e){return re(e)?!1:ce(e,"fields")&&ce(e,"data")}function js(e){return re(e)?!1:ce(e,"field")&&ce(e,"data")}const u1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},c1e=ue(u1e),f1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},AA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],d1e=" – ";function qI(e){const t=re(e.condition)?e.condition.map(mz):mz(e.condition);return{...Ji(e),condition:t}}function Ji(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mz(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Me(e)?e:e!==void 0?{value:e}:void 0}function h1e(e){return Me(e)?e.signal:ge(e)}function yz(e){return Me(e)?e.signal:ge(e.value)}function ea(e){return Me(e)?e.signal:e==null?null:ge(e)}function g1e(e,t,n){for(const i of n){const r=Va(i,t.markDef,t.config);r!==void 0&&(e[i]=Tt(r))}return e}function HI(e){return[].concat(e.type,e.style??[])}function St(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ce(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Va(e,t,n,i)}function Va(e,t,n,{vgChannel:i}={}){const r=CA(e,t,n.style);return Wt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function CA(e,t,n){return GI(e,HI(t),n)}function GI(e,t,n){t=Se(t);let i;for(const r of t){const a=n[r];ce(a,e)&&(i=a[e])}return i}function YI(e,t){return Se(e).reduce((n,i)=>(n.field.push(me(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function XI(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(tr(r,i))return;n.push(i)}),n}function VI(e,t){return tr(e,t)||!t?e:e?[...Se(e),...Se(t)].join(", "):t}function WI(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((qo(n)||Me(n))&&(qo(i)||Me(i)))return{explicit:e.explicit,value:VI(n,i)};if(qo(n)||Me(n))return{explicit:e.explicit,value:n};if(qo(i)||Me(i))return{explicit:e.explicit,value:i};if(!qo(n)&&!Me(n)&&!qo(i)&&!Me(i))return{explicit:e.explicit,value:XI(n,i)};throw new Error("It should never reach here")}function uT(e){return`Invalid specification ${dt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const p1e='Autosize "fit" only works for single views and layered views.';function vz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function bz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function xz(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ui(e)}.`:'Dropping "fit" because spec has discrete size.'}function cT(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Sz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function m1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function y1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function QI(e){return`Selection not supported for ${e} yet.`}function v1e(e){return`Cannot find a selection named "${e}".`}const b1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",x1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",S1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function E1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function _1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const w1e="The same selection must be used to override scale domains in a layered view.",A1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function C1e(e){return`Unknown repeated value "${e}".`}function Ez(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const M1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",fT="Animation involving facet, layer, or concat is currently unsupported.";function $1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(e)}.`}function T1e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ge(t)} encoding found for selection ${ge(n.param)}. Using "field": ${ge(i)}.`}const k1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function D1e(e){return`Unrecognized parse "${e}".`}function _z(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const O1e="Attempt to add the same child twice.";function R1e(e){return`Ignoring an invalid transform: ${dt(e)}.`}const N1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function wz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function z1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${dt(t)} is overridden by a child projection ${dt(n)}.`}const F1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function L1e(e){return`${e}Offset dropped because ${e} is continuous`}function U1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${dt(n)}}.`}function ZI(e){return`Invalid field type "${e}".`}function B1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function j1e(e){return`Invalid aggregation operator "${e}".`}function KI(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function P1e(e){return`Position range does not support relative band size for ${e}.`}function MA(e,t){return`Dropping ${dt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const I1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Qb(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function q1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function H1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function G1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Y1e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function a_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function X1e(e){return`The ${e} for range marks cannot be an expression`}function V1e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function W1e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Q1e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Z1e(e){return`Cannot use the relative band size with ${e} scale.`}function K1e(e){return`Using unaggregated domain with raw field has no effect (${dt(e)}).`}function J1e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function eye(e){return`Unaggregated domain is currently unsupported for log scale (${dt(e)}).`}function tye(e){return`Cannot apply size to non-oriented mark "${e}".`}function nye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function iye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function JI(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function eq(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function rye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using ${dt(n)}.`}function aye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using the union of the two domains.`}function sye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function oye(e){return`Dropping sort property ${dt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Az="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",lye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",uye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",cye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function fye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function dye(e){return`Stack is applied to a non-linear scale (${e}).`}function hye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function fv(e,t){return`Invalid ${e}: ${dt(t)}.`}function gye(e){return`Dropping day from datetime ${dt(e)} as day cannot be combined with other units.`}function pye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function mye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function yye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Cz(e){return`1D error band does not support ${e}.`}function tq(e){return`Channel ${e} is required for "binned" bin.`}function vye(e){return`Channel ${e} should not be used with "binned" bin.`}function bye(e){return`Domain for ${e} is required for threshold scale.`}const nq=aC(rC);let Xu=nq;function xye(e){return Xu=e,Xu}function Sye(){return Xu=nq,Xu}function dT(...e){Xu.error(...e)}function de(...e){Xu.warn(...e)}function Eye(...e){Xu.debug(...e)}function gc(e){if(e&&be(e)){for(const t of gT)if(ce(e,t))return!0}return!1}const iq=["january","february","march","april","may","june","july","august","september","october","november","december"],_ye=iq.map(e=>e.substr(0,3)),rq=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],wye=rq.map(e=>e.substr(0,3));function Aye(e){if(Pb(e)&&(e=+e),st(e))return e>4&&de(fv("quarter",e)),e-1;throw new Error(fv("quarter",e))}function Cye(e){if(Pb(e)&&(e=+e),st(e))return e-1;{const t=e.toLowerCase(),n=iq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=_ye.indexOf(i);if(r!==-1)return r;throw new Error(fv("month",e))}}function Mye(e){if(Pb(e)&&(e=+e),st(e))return e%7;{const t=e.toLowerCase(),n=rq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=wye.indexOf(i);if(r!==-1)return r;throw new Error(fv("day",e))}}function hT(e,t){const n=[];if(t&&e.day!==void 0&&ue(e).length>1&&(de(gye(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Cye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Aye(e.quarter):e.quarter;n.push(st(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Mye(e.day):e.day;n.push(st(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Vu(e){const n=hT(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $ye(e){const n=hT(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Tye(e){const t=hT(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const aq={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},gT=ue(aq);function kye(e){return _e(aq,e)}function pc(e){return be(e)?e.binned:sq(e)}function sq(e){return e?.startsWith("binned")}function pT(e){return e.startsWith("utc")}function Dye(e){return e.substring(3)}const Oye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Zb(e){return gT.filter(t=>lq(e,t))}function oq(e){const t=Zb(e);return t[t.length-1]}function lq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Rye(e,t,{end:n}={end:!1}){const i=J3(t),r=pT(e)?"utc":"";function a(u){return u==="quarter"?`(${r}quarter(${i})-1)`:`${r}${u}(${i})`}let s;const o={};for(const u of gT)lq(e,u)&&(o[u]=a(u),s=u);return n&&(o[s]+="+1"),$ye(o)}function uq(e){if(!e)return;const t=Zb(e);return`timeUnitSpecifier(${dt(t)}, ${dt(Oye)})`}function Nye(e,t,n){if(!e)return;const i=uq(e);return`${n||pT(e)?"utc":"time"}Format(${t}, ${i})`}function An(e){if(!e)return;let t;return ve(e)?sq(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:be(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),pT(t.unit)&&(t.utc=!0,t.unit=Dye(t.unit)),t}function zye(e){const{utc:t,...n}=An(e);return n.unit?(t?"utc":"")+ue(n).map(i=>Ot(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${ue(n).map(i=>Ot(`_${i}_${n[i]}`)).join("")}`}function cq(e,t=n=>n){const n=An(e),i=oq(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=fq(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Vu(o))} - ${t(Vu(r))}`}}const Fye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Lye(e){return _e(Fye,e)}function fq(e,t=1){if(Lye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Uye(e){return ce(e,"param")}function mT(e){return!!e?.field&&e.equal!==void 0}function yT(e){return!!e?.field&&e.lt!==void 0}function vT(e){return!!e?.field&&e.lte!==void 0}function bT(e){return!!e?.field&&e.gt!==void 0}function xT(e){return!!e?.field&&e.gte!==void 0}function ST(e){if(e?.field){if(re(e.range)&&e.range.length===2)return!0;if(Me(e.range))return!0}return!1}function ET(e){return!!e?.field&&(re(e.oneOf)||re(e.in))}function Bye(e){return!!e?.field&&e.valid!==void 0}function dq(e){return ET(e)||mT(e)||ST(e)||yT(e)||bT(e)||vT(e)||xT(e)}function Ca(e,t){return ox(e,{timeUnit:t,wrapTime:!0})}function jye(e,t){return e.map(n=>Ca(n,t))}function hq(e,t=!0){const{field:n}=e,i=An(e.timeUnit),{unit:r,binned:a}=i||{},s=me(e,{expr:"datum"}),o=r?`time(${a?s:Rye(r,n)})`:s;if(mT(e))return`${o}===${Ca(e.equal,r)}`;if(yT(e)){const u=e.lt;return`${o}<${Ca(u,r)}`}else if(bT(e)){const u=e.gt;return`${o}>${Ca(u,r)}`}else if(vT(e)){const u=e.lte;return`${o}<=${Ca(u,r)}`}else if(xT(e)){const u=e.gte;return`${o}>=${Ca(u,r)}`}else{if(ET(e))return`indexof([${jye(e.oneOf,r).join(",")}], ${o}) !== -1`;if(Bye(e))return Kb(o,e.valid);if(ST(e)){const{range:u}=Rn(e),f=Me(u)?{signal:`${u.signal}[0]`}:u[0],d=Me(u)?{signal:`${u.signal}[1]`}:u[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${Ca(f,r)}, ${Ca(d,r)}])`;const h=[];return f!==null&&h.push(`${o} >= ${Ca(f,r)}`),d!==null&&h.push(`${o} <= ${Ca(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${dt(e)}`)}function Kb(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Pye(e){return dq(e)&&e.timeUnit?{...e,timeUnit:An(e.timeUnit)}:e}const f0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Iye(e){return e==="quantitative"||e==="temporal"}function gq(e){return e==="ordinal"||e==="nominal"}const Wu=f0.quantitative,_T=f0.ordinal,od=f0.temporal,wT=f0.nominal,Ud=f0.geojson;function qye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Wu:return"quantitative";case"t":case od:return"temporal";case"o":case _T:return"ordinal";case"n":case wT:return"nominal";case Ud:return"geojson"}}const Nn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},$A={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Hye(e,t){const n=$A[e],i=$A[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Gye={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Mz(e){return Gye[e]}const pq=new Set(["linear","log","pow","sqrt","symlog"]),mq=new Set([...pq,"time","utc"]);function yq(e){return pq.has(e)}const vq=new Set(["quantile","quantize","threshold"]),Yye=new Set([...mq,...vq,"sequential","identity"]),Xye=new Set(["ordinal","bin-ordinal","point","band"]);function Cn(e){return Xye.has(e)}function oa(e){return Yye.has(e)}function za(e){return mq.has(e)}function ld(e){return vq.has(e)}const Vye={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Wye(e){return!ve(e)&&ce(e,"name")}function bq(e){return ce(e,"param")}function Qye(e){return ce(e,"unionWith")}function Zye(e){return be(e)&&"field"in e}const Kye={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:UAe,domain:BAe,range:jAe,rangeMax:PAe,rangeMin:IAe,scheme:qAe,...Jye}=Kye,eve=ue(Jye);function TA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return za(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return za(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return za(e);case"nice":return za(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return oa(e)&&!Ve(["log","time","utc","threshold","quantile"],e)}}function xq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Rf(e)?void 0:Q1e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function tve(e,t){return Ve([_T,wT],t)?e===void 0||Cn(e):t===od?Ve([Nn.TIME,Nn.UTC,void 0],e):t===Wu?yq(e)||ld(e)||e===void 0:!0}function nve(e,t,n=!1){if(!ls(e))return!1;switch(e){case Rt:case $n:case $l:case Ld:case Ur:case pa:return za(t)||t==="band"?!0:t==="point"?!n:!1;case Tl:return Ve(["linear","band"],t);case ao:case Ol:case so:case kl:case Dl:case cc:return za(t)||ld(t)||Ve(["band","point","ordinal"],t);case Fi:case as:case ss:return t!=="band";case Rl:case Li:return t==="ordinal"||ld(t)}}function ive(e){return be(e)&&"value"in e}const Si={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Sq=Si.arc,Jb=Si.area,ex=Si.bar,rve=Si.image,tx=Si.line,nx=Si.point,ave=Si.rect,dv=Si.rule,Eq=Si.text,AT=Si.tick,sve=Si.trail,CT=Si.circle,MT=Si.square,_q=Si.geoshape;function zl(e){return["line","area","trail"].includes(e)}function _p(e){return["rect","bar","image","arc","tick"].includes(e)}const ove=new Set(ue(Si));function Wa(e){return ce(e,"type")}const lve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],uve=["fill","fillOpacity"],cve=[...lve,...uve],fve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},$z=ue(fve),s_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],dve={area:["line","point"],bar:s_,rect:s_,line:["point"],tick:["bandSize","thickness",...s_]},hve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},gve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},wq=ue(gve);function Qu(e){return ce(e,"band")}const pve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mve=5,$T={binSpacing:0,continuousBandSize:mve,minBandSize:.25,timeUnitBandPosition:.5},yve={...$T,binSpacing:1},vve={...$T,thickness:1};function bve(e){return Wa(e)?e.type:e}function Aq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function TT({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!oa(i)||r)return"always-valid";const a=Aq(St("invalid",e,t),{isPath:zl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function xve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Cq({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function Mq({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=ua(t),u=Vb(o?.aggregate),f=TT({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:u});if(o&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:Kb(me(o,{expr:"datum"}),!1),...Sve(d,n,i)}}}function Sve(e,t,n){if(ive(e)){const{value:i}=e;return Me(i)?{signal:i.signal}:{value:i}}return Cq({scale:t,scaleName:n,mode:"zeroOrMin"})}function kT(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=fc(t),u=DT(e),f=Mq({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,u]:u}function Eve(e){const{datum:t}=e;return gc(t)?Vu(t):`${dt(t)}`}function $u(e,t,n,i){const r={};if(t&&(r.scale=t),us(e)){const{datum:a}=e;gc(a)?r.signal=Vu(a):Me(a)?r.signal=a.signal:c0(a)?r.signal=a.expr:r.value=a}else r.field=me(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function hv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!Me(s)&&0<s&&s<1?"datum":void 0,u=me(t,{expr:o,suffix:r}),f=n!==void 0?me(n,{expr:o}):me(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?u:f;d.field=h}else{const h=Me(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${f}`:`${1-s} * ${u} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function _ve({scaleName:e,fieldDef:t}){const n=me(t,{expr:"datum"}),i=me(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function DT({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f,bandPosition:d}){if(t){if(Be(t)){const h=s?.get("type");if(bi(t)){d??=vl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Mt(p)||d&&y&&v===od)return o?.impute?$u(t,a,{binSuffix:"mid"},{offset:u}):d&&!Cn(h)?hv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:u}):$u(t,a,m0(t,e)?{binSuffix:"range"}:{},{offset:u});if(On(p)){if(he(n))return hv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:u});de(tq(e===Rt?ga:rs))}}return $u(t,a,Cn(h)?{binSuffix:"range"}:{},{offset:u,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(la(t)){const h=t.value,p=u?{offset:u}:{};return{...Qg(e,h),...p}}}return Ie(f)&&(f=f()),f&&{...f,...u?{offset:u}:{}}}function Qg(e,t){return Ve(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ve(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function Zu(e){return e&&e!=="number"&&e!=="time"}function $q(e,t,n){return`${e}(${t}${n?`, ${dt(n)}`:""})`}function OT({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Zu(n))return ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=Tq(e,i,r),o=ud(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ta({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ta({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&he(e)&&e.timeUnit===void 0)return ta({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function u(f){return he(f)?An(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(fd(e)){const{unit:f,utc:d}=u(e),h=Ave({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||mc(e)&&e.scale?.type===Nn.UTC});return h?{signal:h}:void 0}if(t=kA({type:o,specifiedFormat:t,config:a,normalizeStack:r}),he(e)&&Mt(e.bin)){const f=me(e,{expr:i,binSuffix:"end"});return{signal:d0(s,f,t,n,a)}}else return t||ud(e)==="quantitative"?{signal:`${Oq(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Tq(e,t,n){return he(e)?n?`${me(e,{expr:t,suffix:"end"})}-${me(e,{expr:t,suffix:"start"})}`:me(e,{expr:t}):Eve(e)}function ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=Tq(e,i,r),s!=="datum.value"&&he(e)&&Mt(e.bin)){const o=me(e,{expr:i,binSuffix:"end"});return{signal:d0(s,o,t,n,a)}}return{signal:$q(n,s,t)}}function kq(e,t,n,i,r,a){if(!(ve(i)&&Zu(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&ud(e)==="quantitative"&&(r.normalizedNumberFormatType&&cd(e)&&e.stack==="normalize"||r.numberFormatType))){if(cd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return kA({type:"quantitative",config:r,normalizeStack:!0});if(fd(e)){const s=he(e)?An(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:wve({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return kA({type:t,specifiedFormat:n,config:r})}}function Dq(e,t,n){if(e&&(Me(e)||e==="number"||e==="time"))return e;if(fd(t)&&n!=="time"&&n!=="utc")return he(t)&&An(t?.timeUnit)?.utc?"utc":"time"}function kA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(ve(t))return t;if(e===Wu)return i?n.normalizedNumberFormat:n.numberFormat}function wve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:uq(t)}:i?void 0:n.timeFormat)}function Oq(e,t){return`format(${e}, "${t||""}")`}function Tz(e,t,n,i){return Zu(n)?$q(n,e,t):Oq(e,(ve(t)?t:void 0)??i.numberFormat)}function d0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return d0(e,t,r.numberFormat,r.numberFormatType,r);const a=Tz(e,n,i,r),s=Tz(t,n,i,r);return`${Kb(e,!1)} ? "null" : ${a} + "${d1e}" + ${s}`}function Ave({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${dt(n)})`:(n=ve(n)?n:r,`${a?"utc":"time"}Format(${e}, ${dt(n)})`):Nye(t,e,a)}const ix="min",Cve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kz(e){return _e(Cve,e)}function Mve(e){return ce(e,"encoding")}function Ys(e){return e&&(e.op==="count"||ce(e,"field"))}function Rq(e){return e&&re(e)}function h0(e){return ce(e,"row")||ce(e,"column")}function RT(e){return ce(e,"header")}function rx(e){return ce(e,"facet")}function $ve(e){return ce(e,"param")}function Tve(e){return!ve(e)&&ce(e,"repeat")}function Dz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function NT(e){return ce(e,"sort")}function vl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Be(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Va("timeUnitBandPosition",n,i);if(Mt(a))return .5}}function Nq({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=Ui(e),u=St(s?"size":o,i,r,{vgChannel:o});if(u!==void 0)return u;if(he(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Va("timeUnitBandSize",i,r)};if(Mt(d)&&!Cn(a))return{band:1}}if(_p(i.type))return a?Cn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function zq(e,t,n,i){return Mt(e.bin)||e.timeUnit&&bi(e)&&e.type==="temporal"?vl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function Fq(e){return ce(e,"sort")&&!ce(e,"field")}function g0(e){return ce(e,"condition")}function ax(e){const t=e?.condition;return!!t&&!re(t)&&he(t)}function p0(e){const t=e?.condition;return!!t&&!re(t)&&Be(t)}function kve(e){const t=e?.condition;return!!t&&(re(t)||la(t))}function he(e){return ce(e,"field")||e?.aggregate==="count"}function ud(e){return e?.type}function us(e){return ce(e,"datum")}function Jo(e){return bi(e)&&!pv(e)||gv(e)}function Oz(e){return bi(e)&&e.type==="quantitative"&&!e.bin||gv(e)}function gv(e){return us(e)&&st(e.datum)}function Be(e){return he(e)||us(e)}function bi(e){return e&&(ce(e,"field")||e.aggregate==="count")&&ce(e,"type")}function la(e){return ce(e,"value")}function mc(e){return ce(e,"scale")||ce(e,"sort")}function cd(e){return ce(e,"axis")||ce(e,"stack")||ce(e,"impute")}function Lq(e){return ce(e,"legend")}function Uq(e){return ce(e,"format")||ce(e,"formatType")}function Dve(e){return ar(e,["legend","axis","header","scale"])}function Ove(e){return ce(e,"op")}function me(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Nve(e))n=MI("count");else{let s;if(!t.nofn)if(Ove(e))s=e.op;else{const{bin:o,aggregate:u,timeUnit:f}=e;Mt(o)?(s=PI(o),r=(t.binSuffix??"")+(t.suffix??"")):u?Nl(u)?(a=`["${n}"]`,n=`argmax_${u.argmax}`):Ks(u)?(a=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):f&&!pc(f)&&(s=zye(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Fd(n):t.expr?wI(n,t.expr)+a:zr(n)+a}function pv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(ZI(e.type))}function Rve(e){return mc(e)&&ld(e.scale?.type)}function Nve(e){return e.aggregate==="count"}function zve(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Mt(i))return`${n} (binned)`;if(r&&!pc(r)){const s=An(r)?.unit;if(s)return`${n} (${Zb(s).join("-")})`}else if(a)return Nl(a)?`${n} for max ${a.argmax}`:Ks(a)?`${n} for min ${a.argmin}`:`${s0(a)} of ${n}`;return n}function Fve(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Nl(t))return`${r} for argmax(${t.argmax})`;if(Ks(t))return`${r} for argmin(${t.argmin})`;const a=i&&!pc(i)?An(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Mt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const Bq=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Fve(e);default:return zve(e,t)}};let jq=Bq;function Pq(e){jq=e}function Lve(){Pq(Bq)}function Nf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=zT(e)?.title;if(!he(e))return r??e.title;const a=e,s=i?FT(a,t):void 0;return n?Wt(r,a.title,s):r??a.title??s}function zT(e){if(cd(e)&&e.axis)return e.axis;if(Lq(e)&&e.legend)return e.legend;if(RT(e)&&e.header)return e.header}function FT(e,t){return jq(e,t)}function mv(e){if(Uq(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=zT(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Uve(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(NT(e)&&re(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Nl(n)&&!Ks(n))return"quantitative";if(mc(e)&&e.scale?.type)switch($A[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ua(e){if(he(e))return e;if(ax(e))return e.condition}function cn(e){if(Be(e))return e;if(p0(e))return e.condition}function Iq(e,t,n,i={}){if(ve(e)||st(e)||Sl(e)){const r=ve(e)?"string":st(e)?"number":"boolean";return de(U1e(t,r,e)),{value:e}}return Be(e)?yv(e,t,n,i):p0(e)?{...e,condition:yv(e.condition,t,n,i)}:e}function yv(e,t,n,i){if(Uq(e)){const{format:r,formatType:a,...s}=e;if(Zu(a)&&!n.customFormatTypes)return de(wz(t)),yv(s,t,n,i)}else{const r=cd(e)?"axis":Lq(e)?"legend":RT(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Zu(s)&&!n.customFormatTypes)return de(wz(t)),yv({...e,[r]:o},t,n,i)}}return he(e)?LT(e,t,i):Bve(e)}function Bve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=st(n)?"quantitative":ve(n)?"nominal":gc(n)?"temporal":void 0,{...e,type:t}}function LT(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!lT(i)&&!Nl(i)&&!Ks(i)&&(de(j1e(i)),delete o.aggregate),r&&(o.timeUnit=An(r)),s&&(o.field=`${s}`),Mt(a)&&(o.bin=sx(a,t)),On(a)&&!Qt(t)&&de(vye(t)),bi(o)){const{type:u}=o,f=qye(u);u!==f&&(o.type=f),u!=="quantitative"&&Vb(i)&&(de(B1e(u,i)),o.type="quantitative")}else if(!zI(t)){const u=Uve(o,t);o.type=u}if(bi(o)){const{compatible:u,warning:f}=jve(o,t)||{};u===!1&&de(f)}if(NT(o)&&ve(o.sort)){const{sort:u}=o;if(kz(u))return{...o,sort:{encoding:u}};const f=u.substring(1);if(u.charAt(0)==="-"&&kz(f))return{...o,sort:{encoding:f,order:"descending"}}}if(RT(o)){const{header:u}=o;if(u){const{orient:f,...d}=u;if(f)return{...o,header:{...d,labelOrient:u.labelOrient||f,titleOrient:u.titleOrient||f}}}}return o}function sx(e,t){return Sl(e)?{maxbins:pz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:pz(t)}:e}const gf={compatible:!0};function jve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Hs:case Gs:case Ib:return pv(e)?gf:{compatible:!1,warning:H1e(t)};case Rt:case $n:case $l:case Ld:case Fi:case as:case ss:case o0:case l0:case qb:case Yu:case Hb:case Gb:case cc:case Ur:case pa:case Yb:return gf;case ya:case Fr:case ma:case va:return n!==Wu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:gf;case so:case kl:case Dl:case Ol:case ao:case ro:case io:case ga:case rs:case Tl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:gf;case Li:case Rl:return!pv(e)&&!Rve(e)?{compatible:!1,warning:G1e(t)}:gf;case sd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:gf}}function fd(e){const{formatType:t}=mv(e);return t==="time"||!t&&Pve(e)}function Pve(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function ox(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&An(t)?.unit;let s=a||n==="temporal",o;return c0(e)?o=e.expr:Me(e)?o=e.signal:gc(e)?(s=!0,o=Vu(e)):(ve(e)||st(e))&&s&&(o=`datetime(${dt(e)})`,kye(a)&&(st(e)&&e<1e4||ve(e)&&isNaN(Date.parse(e)))&&(o=Vu({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:dt(e)}function qq(e,t){const{type:n}=e;return t.map(i=>{const r=he(e)&&!pc(e.timeUnit)?e.timeUnit:void 0,a=ox(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function m0(e,t){return Mt(e.bin)?ls(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Rz={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function y0(e){return e?.condition}const Hq=["domain","grid","labels","ticks","title"],Ive={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Gq={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},qve={...Gq,style:1,labelExpr:1,encoding:1};function Nz(e){return _e(qve,e)}const Hve={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Yq=ue(Hve);function lo(e){return ce(e,"mark")}class lx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return lo(t)?bve(t.mark)===this.name:!1}}function Tu(e,t){const n=e?.[t];return n?re(n)?rd(n,i=>!!i.field):he(n)||ax(n):!1}function Xq(e,t){const n=e?.[t];return n?re(n)?rd(n,i=>!!i.field):he(n)||us(n)||p0(n):!1}function Vq(e,t){if(Qt(t)){const n=e[t];if((he(n)||us(n))&&(gq(n.type)||he(n)&&n.timeUnit)){const i=iT(t);return Xq(e,i)}}return!1}function Wq(e){return rd(Bme,t=>{if(Tu(e,t)){const n=e[t];if(re(n))return rd(n,i=>!!i.aggregate);{const i=ua(n);return i&&!!i.aggregate}}return!1})}function Qq(e,t){const n=[],i=[],r=[],a=[],s={};return UT(e,(o,u)=>{if(he(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=zT(o)?.title;let S=me(o,{forAs:!0});const _={...b?[]:{title:Nf(o,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Nl(d)?(w="argmax",S=me({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):Ks(d)?(w="argmin",S=me({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),bi(o)&&Mt(h)){if(i.push({bin:h,field:f,as:S}),n.push(me(o,{binSuffix:"end"})),m0(o,u)&&n.push(me(o,{binSuffix:"range"})),Qt(u)){const w={field:`${S}_end`};s[`${u}2`]=w}_.bin="binned",zI(u)||(_.type=Wu)}else if(p&&!pc(p)){r.push({timeUnit:p,field:f,as:S});const w=bi(o)&&o.type!==od&&"time";w&&(u===o0||u===Yu?_.formatType=w:Qme(u)?_.legend={formatType:w,..._.legend}:Qt(u)&&(_.axis={formatType:w,..._.axis}))}s[u]=_}else n.push(f),s[u]=e[u]}else s[u]=e[u]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Gve(e,t,n){const i=Kme(t,n);if(i){if(i==="binned"){const r=e[t===ga?Rt:$n];return!!(he(r)&&he(e[t])&&On(r.bin))}}else return!1;return!0}function Yve(e,t,n,i){const r={};for(const a of ue(e))NI(a)||de(q1e(a));for(let a of Gme){if(!e[a])continue;const s=e[a];if(u0(a)){const o=Hme(a),u=r[o];if(he(u)&&Iye(u.type)&&he(s)&&!u.timeUnit){de(L1e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(de(F1e),a=Ur),!Gve(e,a,t)){de(Qb(a,t));continue}if(a===ao&&t==="line"&&ua(e[a])?.aggregate){de(I1e);continue}if(a===Fi&&(n?"fill"in e:"stroke"in e)){de(KI("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===l0||a===sd&&!re(s)&&!la(s)||a===Yu&&re(s)){if(s){if(a===sd){const o=e[a];if(Fq(o)){r[a]=o;continue}}r[a]=Se(s).reduce((o,u)=>(he(u)?o.push(LT(u,a)):de(MA(u,a)),o),[])}}else{if(a===Yu&&s===null)r[a]=null;else if(!he(s)&&!us(s)&&!la(s)&&!g0(s)&&!Me(s)){de(MA(s,a));continue}r[a]=Iq(s,a,i)}}return r}function ux(e,t){const n={};for(const i of ue(e)){const r=Iq(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Xve(e){const t=[];for(const n of ue(e))if(Tu(e,n)){const i=e[n],r=Se(i);for(const a of r)he(a)?t.push(a):ax(a)&&t.push(a.condition)}return t}function UT(e,t,n){if(e)for(const i of ue(e)){const r=e[i];if(re(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Vve(e,t,n,i){return e?ue(e).reduce((r,a)=>{const s=e[a];return re(s)?s.reduce((o,u)=>t.call(i,o,u,a),r):t.call(i,r,s,a)},n):n}function Zq(e,t){return ue(t).reduce((n,i)=>{switch(i){case Rt:case $n:case Hb:case Yb:case Gb:case ga:case rs:case $l:case Ld:case Ur:case ro:case pa:case io:case Tl:case ma:case ya:case va:case Fr:case o0:case Li:case cc:case Yu:return n;case sd:if(e==="line"||e==="trail")return n;case l0:case qb:{const r=t[i];if(re(r)||he(r))for(const a of Se(r))a.aggregate||n.push(me(a,{}));return n}case ao:if(e==="trail")return n;case Fi:case as:case ss:case so:case kl:case Dl:case Rl:case Ol:{const r=ua(t[i]);return r&&!r.aggregate&&n.push(me(r,{})),n}}},[])}function Wve(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(re(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return re(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function DA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const u=i?` of ${BT(t)}`:"";return{field:s+t.field,type:t.type,title:Me(o)?{signal:`${o}"${escape(u)}"`}:o+u}}),a=Xve(n).map(Dve);return{tooltip:[...r,...Na(a,Ze)]}}function BT(e){const{title:t,field:n}=e;return Wt(t,n)}function jT(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:u,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=BT(n);return Kq(e,o,r,{mark:u,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...ve(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function Kq(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...Wa(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...Sl(e[t])?{}:e[t]}}]:[]}function Jq(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],u=i[`${r}Error2`];return{continuousAxisChannelDef:f1(a,n),continuousAxisChannelDef2:f1(s,n),continuousAxisChannelDefError:f1(o,n),continuousAxisChannelDefError2:f1(u,n),continuousAxis:r}}function f1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(yye(n,t)),i}else return e}function eH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Wa(n)&&n.orient)return n.orient;if(Jo(r)){if(Jo(a)){const s=he(r)&&r.aggregate,o=he(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return fd(a)&&!fd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Jo(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const vv="boxplot",Qve=["box","median","outliers","rule","ticks"],Zve=new lx(vv,nH);function tH(e){return st(e)?"tukey":e}function nH(e,{config:t}){e={...e,encoding:ux(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=Wa(n)?n:{type:n};r&&de(QI("boxplot"));const u=o.extent??t.boxplot.extent,f=St("size",o,t),d=o.invalid,h=tH(u),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:M,customTooltipWithoutAggregatedField:k}=Kve(e,u,t),T=Fd(b.field),{color:O,size:N,...B}=A,L=Jt=>jT(o,S,b,Jt,t.boxplot),G=L(B),H=L(A),j=(be(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=L({...B,...N?{size:N}:{},color:{condition:{test:`${pt(`lower_box_${b.field}`)} >= ${pt(`upper_box_${b.field}`)}`,...O||{value:j}}}}),R=DA([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),P={type:"tick",color:"black",opacity:1,orient:C,invalid:d,aria:!1},X=h==="min-max"?R:DA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),K=[...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:X})],z=[...h!=="tukey"?K:[],...H({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...F({partName:"median",mark:{type:"tick",invalid:d,...be(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:z};const W=pt(`lower_box_${b.field}`),ne=pt(`upper_box_${b.field}`),se=`(${ne} - ${W})`,ye=`${W} - ${u} * ${se}`,Ee=`${ne} + ${u} * ${se}`,Ce=pt(b.field),Ht={joinaggregate:iH(b.field),groupby:_},nt={transform:[{filter:`(${ye} <= ${Ce}) && (${Ce} <= ${Ee})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},...w],groupby:_}],layer:K},{tooltip:xe,...Ue}=B,{scale:je,axis:fe}=b,Gt=BT(b),it=Kq(o,"outliers",t.boxplot,{transform:[{filter:`(${Ce} < ${ye}) || (${Ce} > ${Ee})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...Gt!==void 0?{title:Gt}:{},...je!==void 0?{scale:je}:{},...fe!==void 0?{axis:fe}:{}},...Ue,...O?{color:O}:{},...k?{tooltip:k}:{}}})[0];let Kt;const gn=[...p,...y,Ht];return it?Kt={transform:gn,layer:[it,nt]}:(Kt=nt,Kt.transform.unshift(...gn)),{...s,layer:[Kt,{transform:v,layer:z}]}}function iH(e){const t=Fd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Kve(e,t,n){const i=eH(e,vv),{continuousAxisChannelDef:r,continuousAxis:a}=Jq(e,i,vv),s=r.field,o=Fd(s),u=tH(t),f=[...iH(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+o}],d=u==="min-max"||u==="tukey"?[]:[{calculate:`${pt(`upper_box_${o}`)} - ${pt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${pt(`upper_box_${o}`)} + ${pt(`iqr_${o}`)} * ${t}, ${pt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${pt(`lower_box_${o}`)} - ${pt(`iqr_${o}`)} * ${t}, ${pt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Wve(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=Qq(v,n),C=i==="vertical"?"horizontal":"vertical",M=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:M,customTooltipWithoutAggregatedField:y}}const PT="errorbar",Jve=["ticks","rule"],ebe=new lx(PT,rH);function rH(e,{config:t}){e={...e,encoding:ux(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:u,tooltipEncoding:f}=aH(e,PT,t);delete a.size;const d=jT(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...u,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function tbe(e,t){const{encoding:n}=e;if(nbe(n))return{orient:eH(e,t),inputType:"raw"};const i=ibe(n),r=rbe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,u=n.y2;if(Be(o)&&Be(u))throw new Error(`${t} cannot have both x2 and y2`);if(Be(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Be(u)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,u=n.xError2,f=n.yError,d=n.yError2;if(Be(u)&&!Be(o))throw new Error(`${t} cannot have xError2 without xError`);if(Be(d)&&!Be(f))throw new Error(`${t} cannot have yError2 without yError`);if(Be(o)&&Be(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Be(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Be(f)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function nbe(e){return(Be(e.x)||Be(e.y))&&!Be(e.x2)&&!Be(e.y2)&&!Be(e.xError)&&!Be(e.xError2)&&!Be(e.yError)&&!Be(e.yError2)}function ibe(e){return Be(e.x2)||Be(e.y2)}function rbe(e){return Be(e.xError)||Be(e.xError2)||Be(e.yError)||Be(e.yError2)}function aH(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,u=Wa(i)?i:{type:i};a&&de(QI(t));const{orient:f,inputType:d}=tbe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=Jq(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=abe(u,h,p,y,v,d,t,n),{[b]:C,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:T,...O}=r,{bins:N,timeUnits:B,aggregate:L,groupby:G,encoding:H}=Qq(O,n),j=[...L,...S],F=d!=="raw"?[]:G,R=DA(w,h,H,A);return{transform:[...o.transform??[],...N,...B,...j.length===0?[]:[{aggregate:j,groupby:F}],..._],groupby:F,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:H,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:o,tooltipEncoding:R}}function abe(e,t,n,i,r,a,s,o){let u=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&de(mye(y,v,s)),v==="stderr"||v==="stdev")u=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${pt(`center_${d}`)} + ${pt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${pt(`center_${d}`)} - ${pt(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:s0(y)},{fieldPrefix:"upper_",titlePrefix:zz(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:zz(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),u=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:Nf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nf({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(pye(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:pt(n.field),as:`upper_${d}`},{calculate:pt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${pt(d)} + ${pt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${pt(d)} + ${pt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${pt(d)} - ${pt(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Gu(Gu(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:u,tooltipSummary:h,tooltipTitleWithFieldName:p}}function zz(e,t,n){return`${s0(e)} ${n} ${t}`}const IT="errorband",sbe=["band","borders"],obe=new lx(IT,sH);function sH(e,{config:t}){e={...e,encoding:ux(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:u}=aH(e,IT,t),f=s,d=jT(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?de(Cz("interpolate")):f.tension&&de(Cz("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:u})]}}const oH={};function qT(e,t,n){const i=new lx(e,t);oH[e]={normalizer:i,parts:n}}function lbe(){return ue(oH)}qT(vv,nH,Qve);qT(PT,rH,Jve);qT(IT,sH,sbe);const ube=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],lH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},uH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},cbe=ue(lH),fbe=ue(uH),dbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},cH=ue(dbe),fH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],hbe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},gbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ca="_vgsid_",pbe={point:{on:"click",fields:[ca],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function HT(e){return e==="legend"||!!e?.legend}function o_(e){return HT(e)&&be(e)}function GT(e){return!!e?.select}function dH(e){const t=[];for(const n of e||[]){if(GT(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function mbe(e){return cx(e)||XT(e)||YT(e)}function YT(e){return ce(e,"concat")}function cx(e){return ce(e,"vconcat")}function XT(e){return ce(e,"hconcat")}function hH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Qa(e){return ce(e,"step")}function Fz(e){return ce(e,"view")||ce(e,"width")||ce(e,"height")}const Lz=20,ybe={align:1,bounds:1,center:1,columns:1,spacing:1},vbe=ue(ybe);function bbe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(rx(e)&&!h0(e.facet)||YT(e))&&(r.columns=s),cx(e)&&(r.columns=1);for(const o of vbe)if(e[o]!==void 0)if(o==="spacing"){const u=e[o];r[o]=st(u)?u:{row:u.row??a,column:u.column??a}}else r[o]=e[o];return r}function OA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function RA(e,t){const n=bv(e,t);return Qa(n)?n.step:gH}function bv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Wt(n,{step:e.step})}const gH=20,xbe={continuousWidth:300,continuousHeight:300,step:gH},Sbe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:xbe,mark:hve,arc:{},area:{},bar:yve,circle:{},geoshape:{},image:{},line:{},point:{},rect:$T,rule:{color:"black"},square:{},text:{color:"black"},tick:vve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Vye,projection:{},legend:hbe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:pbe,style:{},title:{},facet:{spacing:Lz},concat:{spacing:Lz},normalizedNumberFormat:".0%"},$s=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Uz={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Bz={blue:$s[0],orange:$s[1],red:$s[2],teal:$s[3],green:$s[4],yellow:$s[5],purple:$s[6],pink:$s[7],brown:$s[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Ebe(e={}){return{signals:[{name:"color",value:be(e)?{...Bz,...e}:Bz}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function _be(e){return{signals:[{name:"fontSize",value:be(e)?{...Uz,...e}:Uz}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function wbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function pH(e){const t=ue(e||{}),n={};for(const i of t){const r=e[i];n[i]=y0(r)?qI(r):Ji(r)}return n}function Abe(e){const t=ue(e),n={};for(const i of t)n[i]=pH(e[i]);return n}const Cbe=[...wq,...Yq,...cH,"background","padding","legend","lineBreak","scale","style","title","view"];function mH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=bd({},Le(Sbe),n?wbe(n):{},t?Ebe(t):{},i?_be(i):{},a||{});r&&xd(s,"selection",r,!0);const o=ar(s,Cbe);for(const u of["background","lineBreak","padding"])s[u]&&(o[u]=Ji(s[u]));for(const u of wq)s[u]&&(o[u]=Rn(s[u]));for(const u of Yq)s[u]&&(o[u]=pH(s[u]));for(const u of cH)s[u]&&(o[u]=Rn(s[u]));if(s.legend&&(o.legend=Rn(s.legend)),s.scale){const{invalid:u,...f}=s.scale,d=Rn(u,{level:1});o.scale={...Rn(f),...ue(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=Abe(s.style)),s.title&&(o.title=Rn(s.title)),s.view&&(o.view=Rn(s.view)),o}const Mbe=new Set(["view",...ove]),$be=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Tbe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...dve};function kbe(e){e=Le(e);for(const t of $be)delete e[t];if(e.axis)for(const t in e.axis)y0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of ube)delete e.legend[t];if(e.mark){for(const t of $z)delete e.mark[t];e.mark.tooltip&&be(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(dH(e.params)),delete e.params);for(const t of Mbe){for(const i of $z)delete e[t][i];const n=Tbe[t];if(n)for(const i of n)delete e[t][i];Obe(e,t)}for(const t of lbe())delete e[t];Dbe(e);for(const t in e)be(e[t])&&At(e[t])&&delete e[t];return At(e)?void 0:e}function Dbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=II(e.title);At(t)||(e.style["group-title"]={...e.style["group-title"],...t}),At(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),At(i)?delete e.title:e.title=i}function Obe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};At(a)||(e.style[n??t]=a),delete e[t]}function fx(e){return ce(e,"layer")}function Rbe(e){return ce(e,"repeat")}function Nbe(e){return!re(e.repeat)&&ce(e.repeat,"layer")}class VT{map(t,n){return rx(t)?this.mapFacet(t,n):Rbe(t)?this.mapRepeat(t,n):XT(t)?this.mapHConcat(t,n):cx(t)?this.mapVConcat(t,n):YT(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(fx(t))return this.mapLayer(t,n);if(lo(t))return this.mapUnit(t,n);throw new Error(uT(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const zbe={zero:1,center:1,normalize:1};function Fbe(e){return _e(zbe,e)}const Lbe=new Set([Sq,ex,Jb,dv,nx,CT,MT,tx,Eq,AT]),Ube=new Set([ex,Jb,Sq]);function pf(e){return he(e)&&ud(e)==="quantitative"&&!e.bin}function jz(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(he(s)&&he(o))if(pf(s)&&pf(o)){if(s.stack)return t;if(o.stack)return r;const u=he(s)&&!!s.aggregate,f=he(o)&&!!o.aggregate;if(u!==f)return u?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(pf(s))return t;if(pf(o))return r}else{if(pf(s))return a&&n==="vertical"?void 0:t;if(pf(o))return a&&n==="horizontal"?void 0:r}}function Bbe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function yH(e,t){const n=Wa(e)?e:{type:e},i=n.type;if(!Lbe.has(i))return null;const r=jz(t,"x",n)||jz(t,"theta",n);if(!r)return null;const a=t[r],s=he(a)?me(a,{}):void 0,o=Bbe(r),u=[],f=new Set;if(t[o]){const b=t[o],S=he(b)?me(b,{}):void 0;S&&S!==s&&(u.push(o),f.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=he(h)?me(h,{}):void 0;p&&p!==s&&(u.push(d),f.add(p));const y=Yme.reduce((b,S)=>{if(S!=="tooltip"&&Tu(t,S)){const _=t[S];for(const w of Se(_)){const A=ua(w);if(A.aggregate)continue;const C=me(A,{});(!C||!f.has(C))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?Sl(a.stack)?v=a.stack?"zero":null:v=a.stack:Ube.has(i)&&(v="zero"),!v||!Fbe(v)||Wq(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Nn.LINEAR&&a?.stack&&de(dye(a.scale.type)),Be(t[os(r)])?(a.stack!==void 0&&de(fye(r)),null):(he(a)&&a.aggregate&&!a1e.has(a.aggregate)&&de(hye(a.aggregate)),{groupbyChannels:u,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:zl(i),stackBy:y,offset:v}))}function vH(e,t,n){const i=Rn(e),r=St("orient",i,n);if(i.orient=qbe(i.type,t,r),r!==void 0&&r!==i.orient&&de(W1e(i.orient,r)),i.type==="bar"&&i.orient){const u=St("cornerRadiusEnd",i,n);if(u!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:pve[i.orient];for(const d of f)i[d]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=St("opacity",i,n),s=St("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Pbe(i.type,t)),St("cursor",i,n)===void 0&&(i.cursor=jbe(i,t,n)),i}function jbe(e,t,n){return t.href||e.href||St("href",e,n)?"pointer":e.cursor}function Pbe(e,t){if(Ve([nx,AT,CT,MT],e)&&!Wq(t))return .7}function Ibe(e,t,{graticule:n}){if(n)return!1;const i=Va("filled",e,t),r=e.type;return Wt(i,r!==nx&&r!==tx&&r!==dv)}function qbe(e,t,n){switch(e){case nx:case CT:case MT:case Eq:case ave:case rve:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case ex:if(he(i)&&(On(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(On(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(he(i)&&i.type===Wu&&!Mt(i.bin)||gv(i))&&he(r)&&On(r.bin)?"horizontal":"vertical";if(!s)return(he(r)&&r.type===Wu&&!Mt(r.bin)||gv(r))&&he(i)&&On(i.bin)?"vertical":"horizontal"}case dv:if(a&&!(he(i)&&On(i.bin))&&s&&!(he(r)&&On(r.bin)))return;case Jb:if(s)return he(r)&&On(r.bin)?"horizontal":"vertical";if(a)return he(i)&&On(i.bin)?"vertical":"horizontal";if(e===dv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case tx:case AT:{const o=Oz(i),u=Oz(r);if(n)return n;if(o&&!u)return e!=="tick"?"horizontal":"vertical";if(!o&&u)return e!=="tick"?"vertical":"horizontal";if(o&&u)return"vertical";{const f=bi(i)&&i.type===od,d=bi(r)&&r.type===od;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function Hbe(e){const{point:t,line:n,...i}=e;return ue(i).length>1?i:i.type}function Gbe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ar(e[t],["point","line"])});return e}function l_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?be(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?be(t.point)?t.point:{}:void 0}function Pz(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Ybe{name="path-overlay";hasMatchingType(t,n){if(lo(t)){const{mark:i,encoding:r}=t,a=Wa(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!l_(a,n[a.type],r);case"area":return!!l_(a,n[a.type],r)||!!Pz(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:u,encoding:f,...d}=t,h=ux(f,r),p=Wa(o)?o:{type:o},y=l_(p,r[p.type],h),v=p.type==="area"&&Pz(p,r[p.type]),b=[{name:u,...a?{params:a}:{},mark:Hbe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ar(h,["shape"])}],S=yH(vH(p,h,r),h);let _=h;if(S){const{fieldChannel:w,offset:A}=S;_={...h,[w]:{...h[w],...A?{stack:A}:{}}}}return _=ar(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...id(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:Gbe(r)})}}function Xbe(e,t){return t?h0(e)?xH(e,t):bH(e,t):e}function u_(e,t){return t?xH(e,t):e}function NA(e,t,n){const i=t[e];if(Tve(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};de(C1e(i.repeat));return}return t}function bH(e,t){if(e=NA("field",e,t),e!==void 0){if(e===null)return null;if(NT(e)&&Ys(e.sort)){const n=NA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Iz(e,t){if(he(e))return bH(e,t);{const n=NA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function qz(e,t){if(Be(e)){const n=Iz(e,t);if(n)return n;if(g0(e))return{condition:e.condition}}else{if(p0(e)){const n=Iz(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function xH(e,t){const n={};for(const i in e)if(ce(e,i)){const r=e[i];if(re(r))n[i]=r.map(a=>qz(a,t)).filter(a=>a);else{const a=qz(r,t);a!==void 0&&(n[i]=a)}}return n}class Vbe{name="RuleForRangedLine";hasMatchingType(t){if(lo(t)){const{encoding:n,mark:i}=t;if(i==="line"||Wa(i)&&i.type==="line")for(const r of qme){const a=fc(r),s=n[a];if(n[r]&&(he(s)&&!On(s.bin)||us(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return de(V1e(!!r.x2,!!r.y2)),i({...t,mark:be(a)?{...a,type:"rule"}:"rule"},n)}}class Wbe extends VT{nonFacetUnitNormalizers=[Zve,ebe,obe,new Ybe,new Vbe];map(t,n){if(lo(t)){const i=Tu(t.encoding,Hs),r=Tu(t.encoding,Gs),a=Tu(t.encoding,Ib);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=u_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,o);return s}mapRepeat(t,n){return Nbe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:u}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:u},spec:r}},n):{...a,layer:u.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Ot(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!re(i)&&t.columns&&(t=ar(t,["columns"]),de(Ez("repeat")));const o=[],{repeater:u={},repeaterPrefix:f=""}=n,d=!re(i)&&i.row||[u?u.row:null],h=!re(i)&&i.column||[u?u.column:null],p=re(i)&&i||[u?u.repeat:null];for(const v of p)for(const b of d)for(const S of h){const _={repeat:v,row:b,column:S,layer:u.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${re(i)?`${Ot(v)}`:(i.row?`row_${Ot(b)}`:"")+(i.column?`column_${Ot(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,o.push(ar(A,["data"]))}const y=re(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return h0(i)&&t.columns&&(t=ar(t,["columns"]),de(Ez("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,u=Gz({parentProjection:s,projection:r}),f=Hz({parentEncoding:a,encoding:u_(i,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:u,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=u_(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...u?{width:u}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&de(Y1e([...i?[Hs]:[],...r?[Gs]:[]]));const s={},o={};for(const u of[Hs,Gs]){const f=t[u];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[u]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??={},o[b][u]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:u,columns:f,...d}=a;return{facetMapping:Xbe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,u={...r,parentEncoding:Hz({parentEncoding:n,encoding:a,layer:!0}),parentProjection:Gz({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[u.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},u)}}function Hz({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ue(e),...ue(t)]);for(const a of r){const s=t[a],o=e[a];if(Be(s)){const u={...o,...s};i[a]=u}else p0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||la(o)||Me(o)||Be(o)||re(o))&&(i[a]=o)}}else i=t;return!i||At(i)?void 0:i}function Gz(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(z1e({parentProjection:t,projection:n})),n??t}function WT(e){return ce(e,"filter")}function Qbe(e){return ce(e,"stop")}function SH(e){return ce(e,"lookup")}function Zbe(e){return ce(e,"data")}function Kbe(e){return ce(e,"param")}function Jbe(e){return ce(e,"pivot")}function exe(e){return ce(e,"density")}function txe(e){return ce(e,"quantile")}function nxe(e){return ce(e,"regression")}function ixe(e){return ce(e,"loess")}function rxe(e){return ce(e,"sample")}function axe(e){return ce(e,"window")}function sxe(e){return ce(e,"joinaggregate")}function oxe(e){return ce(e,"flatten")}function lxe(e){return ce(e,"calculate")}function EH(e){return ce(e,"bin")}function uxe(e){return ce(e,"impute")}function cxe(e){return ce(e,"timeUnit")}function fxe(e){return ce(e,"aggregate")}function dxe(e){return ce(e,"stack")}function hxe(e){return ce(e,"fold")}function gxe(e){return ce(e,"extent")&&!ce(e,"density")&&!ce(e,"regression")}function pxe(e){return e.map(t=>WT(t)?{filter:Of(t.filter,Pye)}:t)}class mxe extends VT{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=Yz(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Yz(t,n),t.encoding){const i={};for(const[r,a]of ml(t.encoding))i[r]=_H(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:ml(i).map(([a,s])=>{const{init:o,bind:u,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of nn(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:u}})}:t}}function Yz(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(WT(a))return{filter:zA(a,t)};if(EH(a)&&dc(a.bin))return{...a,bin:wH(a.bin)};if(SH(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function _H(e,t){const n=Le(e);if(he(n)&&dc(n.bin)&&(n.bin=wH(n.bin)),mc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(g0(n))if(re(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:zA(i,t)}});else{const{selection:i,param:r,test:a,...s}=_H(n.condition,t);n.condition=r?n.condition:{...s,test:zA(n.condition,t)}}return n}function wH(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function zA(e,t){const n=i=>Of(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Of(e.test||e.filter,i=>i.selection?n(i.selection):i)}class FA extends VT{map(t,n){const i=n.selections??[];if(t.params&&!lo(t)){const r=[];for(const a of t.params)GT(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(ve(o)&&(o===t.name||r.includes(o))||re(o)&&o.map(u=>r.indexOf(u)).every((u,f,d)=>u!==-1&&(f===0||u>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=FA.prototype[e];FA.prototype[e]=function(n,i){return t.call(this,n,yxe(n,i))}}function yxe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function AH(e,t){t===void 0&&(t=mH(e.config));const n=Sxe(e,t),{width:i,height:r}=e,a=Exe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const vxe=new Wbe,bxe=new mxe,xxe=new FA;function Sxe(e,t={}){const n={config:t};return xxe.map(vxe.map(bxe.map(e,n),n),n)}function Xz(e){return ve(e)?{type:e}:e??{}}function Exe(e,t,n){let{width:i,height:r}=t;const a=lo(e)||fx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(de(vz("width")),i=void 0),r=="container"&&(de(vz("height")),r=void 0));const o={type:"pad",...s,...n?Xz(n.autosize):{},...Xz(e.autosize)};if(o.type==="fit"&&!a&&(de(p1e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&de(bz("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&de(bz("height")),!tr(o,{type:"pad"}))return o}function _xe(e){return["fit","fit-x","fit-y"].includes(e)}function wxe(e){return e?`fit-${Xb(e)}`:"fit"}const Axe=["background","padding"];function Vz(e,t){const n={};for(const i of Axe)e&&e[i]!==void 0&&(n[i]=Ji(e[i]));return t&&(n.params=e.params),n}class uo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new uo(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Wt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ue(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ta(e){return{explicit:!0,value:e}}function Qi(e){return{explicit:!1,value:e}}function CH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:dx(t,n,i,r)}}function dx(e,t,n,i){return e.explicit&&t.explicit&&de(rye(n,i,e.value,t.value)),e}function bl(e,t,n,i,r=dx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:tr(e.value,t.value)?e:r(e,t,n,i)}class Cxe extends uo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dd(e){return ce(e,"url")}function wp(e){return ce(e,"values")}function MH(e){return ce(e,"name")&&!dd(e)&&!wp(e)&&!al(e)}function al(e){return e&&($H(e)||TH(e)||QT(e))}function $H(e){return ce(e,"sequence")}function TH(e){return ce(e,"sphere")}function QT(e){return ce(e,"graticule")}var Lt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Lt||(Lt={}));function kH({invalid:e,isPath:t}){switch(Aq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Mxe(e){const{marks:t,scales:n}=kH(e);return t===n?Lt.Main:n==="include-invalid-values"?Lt.PreFilterInvalid:Lt.PostFilterInvalid}class yt{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){de(O1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Oi extends yt{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${CI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function c_(e){return e.as!==void 0}function Wz(e){return`${e}_end`}class Ba extends yt{timeUnits;clone(){return new Ba(null,Le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:u}=a;if(u){let f;if(pc(u)){if(Ft(n)){const{mark:d,markDef:h,config:p}=n,y=vl({fieldDef:a,markDef:h,config:p});(_p(d)||y)&&(f={timeUnit:An(u),field:o})}}else f={as:me(a,{forAs:!0}),field:o,timeUnit:u};if(Ft(n)){const{mark:d,markDef:h,config:p}=n,y=vl({fieldDef:a,markDef:h,config:p});_p(d)&&Qt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[Ze(f)]=f)}return r},{});return At(i)?null:new Ba(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=An(i),s={...r,timeUnit:a};return new Ba(t,{[Ze(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of ml(this.timeUnits)){const a=c_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(nn(this.timeUnits).map(t=>c_(t)?t.as:Wz(t.field)))}dependentFields(){return new Set(nn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ze(this.timeUnits)}`}assemble(){const t=[];for(const n of nn(this.timeUnits)){const{rectBandPosition:i}=n,r=An(n.timeUnit);if(c_(n)){const{field:a,as:s}=n,{unit:o,utc:u,...f}=r,d=[s,`${s}_end`];t.push({field:zr(a),type:"timeunit",...o?{units:Zb(o)}:{},...u?{timezone:"utc"}:{},...f,as:d}),t.push(...Qz(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=DH({timeUnit:r,field:s}),u=Wz(s);t.push({type:"formula",expr:o,as:u}),t.push(...Qz([s,u],i,r))}}return t}}const hx="offsetted_rect_start",gx="offsetted_rect_end";function DH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=oq(i),{part:s,step:o}=fq(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${pt(t)}, ${n?-o:o})`}function Qz([e,t],n,i){if(n!==void 0&&n!==.5){const r=pt(e),a=pt(t);return[{type:"formula",expr:Zz([DH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${hx}`},{type:"formula",expr:Zz([r,a],n+.5),as:`${e}_${gx}`}]}return[]}function Zz([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const v0="_tuple_fields";class $xe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Txe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new $xe,a={},s={},o=new Set,u=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Ot(`${i}_${S}`);for(let w=1;o.has(_);w++)_=Ot(`${i}_${S}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?Se(n.value):null;let{fields:p,encodings:y}=be(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(be(v))for(const b of ue(v))Ime(b)?(y||(y=[])).push(b):f==="interval"?(de(A1e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){de(m1e(v,b.aggregate));continue}else if(!S){de(Sz(v));continue}if(b.timeUnit&&!pc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[Ze(_)]=_}if(!a[S]){const _=f==="interval"&&ls(v)&&oa(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...u(w,"data"),...u(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ca,OI(v)?(w.geoChannel=v,w.channel=DI(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else de(Sz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...u(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ca}h&&(t.init=h.map(v=>r.items.map(b=>be(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),At(s)||(r.timeUnit=new Ba(null,s))},signals:(e,t,n)=>{const i=t.name+v0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(zH)})}},OH="_curr",X1="anim_value",bf="anim_clock",LA="eased_anim_clock",RH="min_extent",NH="max_range_extent",f_="last_tick_at",d_="is_playing",kxe=1/60*1e3,Dxe=(e,t)=>[{name:LA,update:bf},{name:`${e}_domain`,init:`domain('${t}')`},{name:RH,init:`extent(${e}_domain)[0]`},{name:NH,init:`extent(range('${t}'))[1]`},{name:X1,update:`invert('${t}', ${LA})`}],Oxe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(ja(t)&&(n=n.concat([{name:bf,init:"0",on:[{events:{type:"timer",throttle:kxe},update:`${d_} ? (${bf} + (now() - ${f_}) > ${NH} ? 0 : ${bf} + (now() - ${f_})) : ${bf}`}]},{name:f_,init:"now()",on:[{events:[{signal:bf},{signal:d_}],update:"now()"}]},{name:d_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+v0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=nn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+zf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${ku(e)}, `;if(t.project.hasSelectionId)f+=`${ca}: ${s}[${ge(ca)}]`;else if(ja(t))f+=`fields: ${r}, values: [${X1} ? ${X1} : ${RH}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${ge(e.vgField(h.channel,{}))}], ${s}[${ge(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${ge(h.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(ja(t))return n.concat(Dxe(t.name,e.scaleName(Tl)),[{name:i+eo,on:[{events:[{signal:LA},{signal:X1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+eo,on:d?[{events:d,update:`${u} ? {${f}} : null`,force:!0}]:[]}])}}};function zH(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=zr(r.field),r}function Ku(e,t=!0,n=ni){if(re(e)){const i=e.map(r=>Ku(r,t,n));return t?`[${i.join(", ")}]`:i}else if(gc(e))return n(t?Vu(e):Tye(e));return t?n(dt(e)):e}function Rxe(e,t){for(const n of nn(e.component.selection??{})){const i=n.name;let r=`${i}${eo}, ${n.resolve==="global"?"true":`{unit: ${ku(e)}}`}`;for(const a of mx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+s2e,on:[{events:{signal:n.name+eo},update:`modify(${ge(n.name+Ju)}, ${r})`}]})}return ZT(t)}function Nxe(e,t){if(e.component.selection&&ue(e.component.selection).length){const n=ge(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ml("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return ZT(t)}function zxe(e,t){let n=!1;for(const i of nn(e.component.selection??{})){const r=i.name,a=ge(r+Ju);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${KH}(${a}, ${ge(o)}${u}`})}n=!0;for(const o of mx)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),ZT(t)}function Fxe(e,t){const n=[],i=[],r=ku(e,{escape:!1});for(const a of nn(e.component.selection??{})){const s={name:a.name+Ju};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ca}}]),a.init){const u=a.project.items.map(zH);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ca]:Ku(f,!1)[0]})):a.init.map(f=>({unit:r,fields:u,values:Ku(f,!1)}))}if([...n,...t].filter(u=>u.name===a.name+Ju).length||n.push(s),ja(a)&&t.length){const u=e.lookupDataSource(e.getDataName(Lt.Main)),f=t.find(h=>h.name===u),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+OH,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function FH(e,t){for(const n of nn(e.component.selection??{}))for(const i of mx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function Lxe(e,t){for(const n of e.children)Ft(n)&&(t=FH(n,t));return t}function Uxe(e,t,n,i){const r=iG(e,t.param,t);return{signal:oa(n.get("type"))&&re(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function ZT(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Xs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ls(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&de(x1e),!a||!oa(s)){de(b1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||BA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(KH))r.update=`{${i.map(s=>`${ge(zr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${ge(zr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!BA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function UA(e,t){return`domain(${ge(e.scaleName(t))})`}function BA(e){return e.parent&&qd(e.parent)&&(!e.parent.parent||BA(e.parent.parent))}const zf="_brush",LH="_scale_trigger",cg="geo_interval_init_tick",UH="_init",Bxe="_center",jxe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...be(n.select)?n.select:{}};i.fields=[ca],i.encodings||(i.encodings=n.value?ue(n.value):[ya,ma]),n.select={type:"interval",...i}}if(t.translate&&!Xs.defined(t)){const i=`!event.item || event.item.mark.name !== ${ge(t.name+zf)}`;for(const r of t.events){if(!r.between){de(`${r} is not an ordered event stream for interval selections.`);continue}const a=Se(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+eo,a=nn(t.project.hasChannel).filter(o=>o.channel===Rt||o.channel===$n),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,u)=>o.concat(Pxe(e,t,u,s?.[u.index])),[])),e.hasProjection){const o=ge(e.projectionName()),u=e.projectionName()+Bxe,{x:f,y:d}=t.project.hasChannel,h=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${u}[0]`,v=d?s?.[d.index]:`${u}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+UH,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===u)||n.unshift({name:u,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${ge(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${ku(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,C=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:cg}]:[]],update:A}]})}else{if(!Xs.defined(t)){const f=i+LH,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=ge(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=oa(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),u=`unit: ${ku(e)}, fields: ${i+v0}, values`;return n.concat({name:r,...s?{init:`{${u}: ${Ku(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${u}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ft(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===cg).length||n.unshift({name:cg,value:null,on:[{events:"timer{1}",update:`${cg} === null ? {} : ${cg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,u=`data(${ge(t.name+Ju)})`;if(Xs.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of ue(f))f[S]=[{test:`${u}.length && ${u}[0].unit === ${ku(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=ue(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+zf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+zf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function Pxe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=ge(r?e.scaleName(a):e.projectionName()),u=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===Rt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=Xs.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Ku(i,!0,u)}:{value:[]};return h.push({events:{signal:t.name+LH},update:oa(b)?`[${u(`${p}[0]`)}, ${u(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Ku(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===Rt?0:1,y=t.name+UH,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Bd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=g0(t)&&t.condition;let s=[];a&&(s=Se(a).map(f=>{const d=r(f);if($ve(f)){const{param:h,empty:p}=f;return{test:nG(e,{param:h,empty:p}),...d}}else return{test:Ev(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function KT(e,t="text"){const n=e.encoding[t];return Bd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>px(i,e.config),invalidValueRef:void 0})}function px(e,t,n="datum"){if(e){if(la(e))return Tt(e.value);if(Be(e)){const{format:i,formatType:r}=mv(e);return OT({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function BH(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(re(s))return{tooltip:Kz({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Bd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=px(f,r,o);if(d)return d;if(f===null)return;let h=St("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),ve(h))return{value:h};if(be(h))return Me(h)?h:h.content==="encoding"?Kz(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function jH(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function u(d,h){const p=fc(h),y=bi(d)?d:{...d,type:e[p].type},v=y.title||FT(y,r),b=Se(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Qt(h)){const _=h==="x"?"x2":"y2",w=ua(e[_]);if(On(y.bin)&&w){const A=me(y,{expr:s}),C=me(w,{expr:s}),{format:M,formatType:k}=mv(y);S=d0(A,C,M,k,r),a.add(_)}}if((Qt(h)||h===Ur||h===pa)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:_,formatType:w}=mv(y);S=OT({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=px(y,r,s).signal,o.push({channel:h,key:b,value:S})}UT(e,(d,h)=>{he(d)?u(d,h):ax(d)&&u(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function Kz(e,t,n,{reactiveGeom:i}={}){const r=jH(e,t,n,{reactiveGeom:i}),a=ml(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Ixe(e){const{markDef:t,config:n}=e,i=St("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...qxe(e),...Hxe(e)}}function qxe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=St("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:_e(f1e,t)?{}:{ariaRoleDescription:{value:t}}}function Hxe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Bd({model:e,channelDef:a,vgChannel:"description",mainRefFn:u=>px(u,e.config),invalidValueRef:void 0});const s=St("description",n,i);if(s!=null)return{description:Tt(s)};if(i.aria===!1)return{};const o=jH(t,r,i);if(!At(o))return{description:{signal:ml(o).map(([u,f],d)=>`"${d>0?"; ":""}${u}: " + (${f})`).join(" + ")}}}function zn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:u}=n;const f=r[e];o===void 0&&(u??=St(e,i,a,{vgChannel:s,ignoreVgConfig:!g0(f)}),u!==void 0&&(o=Tt(u)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=Mq({...d,scaleChannel:e,channelDef:f});return Bd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>DT({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function PH(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??St("filled",n,r),o=Ve(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=St(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=St(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...u?{fill:Tt(u)}:{},...f?{stroke:Tt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&de(KI("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...zn("color",e,{vgChannel:d,defaultValue:s?u:f}),...zn("fill",e,{defaultValue:i.fill?u:void 0}),...zn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function Gxe(e){const{encoding:t,mark:n}=e,i=t.order;return!zl(n)&&la(i)?Bd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Tt(r.value),invalidValueRef:void 0}):{}}function hd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:DT({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Tt(s),bandPosition:r})};const u=t[a];return u?{offsetType:"visual",offset:u}:{}}function gi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,u=r[e],f=r[os(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=hd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=JT({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!u&&Qt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:Yxe({channel:e,channelDef:u,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function Yxe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Be(n)&&r&&t===r.fieldChannel){if(he(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return hv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return $u(n,i,{suffix:"end"},{offset:a})}return kT(e)}function JT({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=fc(n),u=yl(n),f=St(n,a,s,{vgChannel:u});if(f!==void 0)return Qg(n,f);switch(t){case"zeroOrMin":return Jz({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return Jz({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Ui(n)],mult:.5}}}}function Jz({mainChannel:e,config:t,...n}){const i=Cq(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Xxe={left:"x",center:"xc",right:"x2"},Vxe={top:"y",middle:"yc",bottom:"y2"};function IH(e,t,n,i="middle"){if(e==="radius"||e==="theta")return yl(e);const r=e==="x"?"align":"baseline",a=St(r,t,n);let s;return Me(a)?(de(X1e(r)),s=void 0):s=a,e==="x"?Xxe[s||(i==="top"?"left":"center")]:Vxe[s||i]}function xv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?qH(e,t,{defaultPos:n,defaultPos2:i}):gi(e,t,{defaultPos:n})}function qH(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=os(e),o=Ui(e),u=Wxe(t,i,s),f=u[o]?IH(e,r,a):yl(e);return{...gi(e,t,{defaultPos:n,vgChannel:f}),...u}}function Wxe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,u=fc(n),f=Ui(n),d=yl(n),h=i[u],p=e.scaleName(u),y=e.getScaleComponent(u),{offset:v}=n in i||n in a?hd({channel:n,markDef:a,encoding:i,model:e}):hd({channel:u,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Ui(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=Qxe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:d1(n,a)||d1(n,{[n]:CA(n,a,o.style),[f]:CA(f,a,o.style)})||d1(n,o[r])||d1(n,o.mark)||{[d]:JT({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function Qxe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f}){return Be(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?$u(t,a,{suffix:"start"},{offset:u}):kT({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:u,defaultRef:f})}function d1(e,t){const n=Ui(e),i=yl(e);if(t[i]!==void 0)return{[i]:Qg(e,t[i])};if(t[e]!==void 0)return{[i]:Qg(e,t[e])};if(t[n]){const r=t[n];if(Qu(r))de(P1e(n));else return{[n]:Qg(e,r)}}}function Js(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=os(t),o=Ui(t),u=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??St("size",r,n,{vgChannel:o}),v=FI(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(u)&&(Mt(u.bin)||On(u.bin)||u.timeUnit&&!f)&&!(y&&!Qu(y))&&!i[v]&&!Cn(h)?Jxe({fieldDef:u,fieldDef2:f,channel:t,model:e}):(Be(u)&&Cn(h)||b)&&!f?Kxe(u,t,e):qH(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Zxe(e,t,n,i,r,a,s){if(Qu(r))if(n){const u=n.get("type");if(u==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Va("minBandSize",{type:s},i);return{signal:d?`max(${ea(d)}, ${f})`:f}}else r.band!==1&&(de(Z1e(u)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Me(r))return r;if(r)return{value:r}}if(n){const u=n.get("range");if(hc(u)&&st(u.step))return{value:u.step-2}}if(!a){const{bandPaddingInner:u,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Wt(u,s==="tick"?h:s==="bar"?f:d);if(Me(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(st(p))return{signal:`${1-p} * ${e}`}}return{value:RA(i.view,e)-2}}function Kxe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,u=n.scaleName(t),f=n.getScaleComponent(t),d=Ui(t),h=os(t),p=FI(t),y=n.scaleName(p),v=n.getScaleComponent(iT(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=zn("size",n,{vgChannel:d,defaultRef:Tt(i.size)}):de(tye(i.type)));const _=!!S,w=Nq({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:Zxe(d,y||u,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&Qu(w)&&!_?"top":"middle",C=IH(t,i,a,A),M=C==="xc"||C==="yc",{offset:k,offsetType:T}=hd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),O=kT({channel:t,channelDef:e,markDef:i,config:a,scaleName:u,scale:f,stack:s,offset:k,defaultRef:JT({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:f}),bandPosition:M?T==="encoding"?0:.5:Me(w)?{signal:`(1-${w})/2`}:Qu(w)?(1-w.band)/2:0});if(d)return{[C]:O,...S};{const N=yl(h),B=S[d],L=k?{...B,offset:k}:B;return{[C]:O,[N]:re(O)?[O[0],{...O[1],offset:L}]:{...O,offset:L}}}}function eF(e,t,n,i,r,a,s){if(kI(e))return 0;const o=e==="x"||e==="y2",u=o?-t/2:t/2;if(Me(n)||Me(r)||Me(i)||a){const f=ea(n),d=ea(r),h=ea(i),p=ea(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${u})`:u,b=h?`${h} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-u:+r+u)}function Jxe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),u=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=Nq({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Qt(n)?St("binSpacing",a,r)??0:0,b=os(n),S=yl(n),_=yl(b),w=Va("minBandSize",a,r),{offset:A}=hd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:C}=hd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),M=_ve({fieldDef:e,scaleName:u}),k=eF(n,v,d,y,A,w,M),T=eF(b,v,d,y,C??A,w,M),O=Me(h)?{signal:`(1-${h.signal})/2`}:Qu(h)?(1-h.band)/2:.5,N=vl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Mt(e.bin)||e.timeUnit){const B=e.timeUnit&&N!==.5;return{[_]:tF({fieldDef:e,scaleName:u,bandPosition:O,offset:T,useRectOffsetField:B}),[S]:tF({fieldDef:e,scaleName:u,bandPosition:Me(O)?{signal:`1-${O.signal}`}:1-O,offset:k,useRectOffsetField:B})}}else if(On(e.bin)){const B=$u(e,u,{},{offset:T});if(he(t))return{[_]:B,[S]:$u(t,u,{},{offset:k})};if(dc(e.bin)&&e.bin.step)return{[_]:B,[S]:{signal:`scale("${u}", ${me(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}de(tq(b))}function tF({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return hv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:hx,endSuffix:gx}:{}})}const e2e=new Set(["aria","width","height"]);function Br(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?PH(e):{};return{...t2e(e.markDef,t),...nF("fill",n),...nF("stroke",i),...zn("opacity",e),...zn("fillOpacity",e),...zn("strokeOpacity",e),...zn("strokeWidth",e),...zn("strokeDash",e),...Gxe(e),...BH(e),...KT(e,"href"),...Ixe(e)}}function nF(e,t){return t?{[e]:t}:{}}function t2e(e,t){return c1e.reduce((n,i)=>(!e2e.has(i)&&ce(e,i)&&t[i]!=="ignore"&&(n[i]=Tt(e[i])),n),{})}function ek(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!ls(a)||!(s=e.getScaleType(a)))return;const o=Vb(r.aggregate),u=TT({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(xve(u)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>Kb(a,!0)).join(" && ")}}}function iF(e,t){if(t!==void 0)return{[e]:Tt(t)}}const h_="voronoi",HH={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(h_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(zl(a))return de(y1e(a)),n;const s={name:e.getName(h_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...BH(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,u=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(h_)&&(u=!0)}),u||n.splice(o+1,0,s),n}},GH={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!HT(e.bind),parse:(e,t,n)=>JH(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=HH.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((u,f)=>{const d=Ot(`${i}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Ku(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ge(u.field)}] : null`}]:[],bind:a[u.field]??a[u.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+eo),s=i+v0,o=r.items.map(f=>Ot(`${i}_${f.field}`)),u=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${u} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Sv="_toggle",YH={defined:e=>e.type==="point"&&!ja(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Sv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+eo,i=t.name+Sv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ku(e)}}, `}${i} ? ${n} : null`}},n2e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!ja(e),parse:(e,t)=>{t.clear&&(t.clear=ve(t.clear)?Ml(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(GH.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Ot(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+eo);i(r,"null"),YH.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Sv),i(r,"false"))}return n}},XH={defined:e=>{const t=e.resolve==="global"&&e.bind&&HT(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ca;return t&&!n&&de(S1e),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=ve(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},JH(t,i),be(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Se(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=o_(t.bind)?t.bind.legend:"click",a=ve(r)?Ml(r,"view"):Se(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=o_(t.bind)&&t.bind.legend,a=s=>o=>{const u=Le(o);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Ot(s.field)}_legend`,u=`${i}_${o}`;if(n.filter(d=>d.name===u).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+eo),s=i+v0,o=r.items.filter(p=>p.hasLegend).map(p=>Ot(`${i}_${Ot(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Sv),h=o_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function i2e(e,t,n){const i=e.fieldDef(t)?.field;for(const r of nn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&XH.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const VH="_translate_anchor",WH="_translate_delta",r2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+VH,{x:s,y:o}=t.project.hasChannel;let u=Ml(t.translate,"scope");return r||(u=u.map(f=>(f.between[0].markname=i+zf,f))),n.push({name:a,value:{},on:[{events:u.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?UA(e,Rt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?UA(e,$n):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+WH,value:{},on:[{events:u,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&rF(e,t,s,"width",n),o!==void 0&&rF(e,t,o,"height",n),n}};function rF(e,t,n,i,r){const a=t.name,s=a+VH,o=a+WH,u=n.channel,f=Xs.defined(t),d=r.find(M=>M.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(u),y=p?.get("type"),v=p?.get("reverse"),b=f?u===Rt?v?"":"-":v?"-":"":"",S=`${s}.extent_${u}`,_=`${b}${o}.${u} / ${f?`${h}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:o},update:f?C:`clampRange(${C}, 0, ${h})`})}const QH="_zoom_anchor",ZH="_zoom_delta",a2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+ZH,{x:s,y:o}=t.project.hasChannel,u=ge(e.scaleName(Rt)),f=ge(e.scaleName($n));let d=Ml(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+zf,h))),n.push({name:i+QH,on:[{events:d,update:r?`{${[u?`x: invert(${u}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&aF(e,t,s,"width",n),o!==void 0&&aF(e,t,o,"height",n),n}};function aF(e,t,n,i,r){const a=t.name,s=n.channel,o=Xs.defined(t),u=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?UA(e,s):u.name,y=a+ZH,v=`${a}${QH}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;u.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const Ju="_store",eo="_tuple",s2e="_modify",KH="vlSelectionResolve",mx=[Oxe,jxe,Txe,YH,GH,Xs,XH,n2e,r2e,a2e,HH];function o2e(e){let t=e.parent;for(;t&&!sr(t);)t=t.parent;return t}function ku(e,{escape:t}={escape:!0}){let n=t?ge(e.name):e.name;const i=o2e(e);if(i){const{facet:r}=i;for(const a of Mr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ge(i.vgField(a))}])`)}return n}function tk(e){return nn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function JH(e,t){(ve(t.select)||!t.select.on)&&delete e.events,(ve(t.select)||!t.select.clear)&&delete e.clear,(ve(t.select)||!t.select.toggle)&&delete e.toggle}function ja(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function jA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...jA(e.object)),t.push(...jA(e.property))),t)}function eG(e){return e.object.type==="MemberExpression"?eG(e.object):e.object.name==="datum"}function tG(e){const t=x3(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&eG(i)&&n.add(jA(i).slice(1).join("."))}),n}class jd extends yt{model;filter;expr;_dependentFields;clone(){return new jd(null,this.model,Le(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Ev(this.model,this.filter,this),this._dependentFields=tG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function l2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Ot(a.name),o=a.select,u=ve(o)?o:o.type,f=be(o)?Le(o):{type:u},d=i[u];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const h=n[s]={...f,name:s,type:u,init:a.value,bind:a.bind,events:ve(f.on)?Ml(f.on,"scope"):Se(Le(f.on))};if(ja(h)&&(r++,r>1)){delete n[s];continue}const p=Le(a);for(const y of mx)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&de(M1e),n}function nG(e,t,n,i="datum"){const r=ve(t)?t:t.param,a=Ot(r),s=ge(a+Ju);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const u=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${ge(o.resolve)})`,d=`${u}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function iG(e,t,n){const i=Ot(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&de($1e(a));else if(r&&!a){const o=s.project.items.filter(u=>u.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,de(T1e(o,r,n,a))):a=o[0].field}return`${s.name}[${ge(zr(a))}]`}function u2e(e,t){for(const[n,i]of ml(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Oi(new jd(t,e,{param:n}),r,Lt.Lookup,e.component.data.outputNodeRefCounts)}}function Ev(e,t,n){return Wg(t,i=>ve(i)?i:Uye(i)?nG(e,i,n):hq(i))}function c2e(e,t){if(e)return re(e)&&!qo(e)?e.map(n=>FT(n,t)).join(", "):e}function g_(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Fg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:u,zindex:f,...d}=e.combine();if(!r){for(const h in d){const p=h,y=Ive[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(y0(v)){const{condition:b,...S}=v,_=Se(b),w=Rz[p];if(w){const{vgProp:A,part:C}=w,M=[..._.map(k=>{const{test:T,...O}=k;return{test:Ev(null,T),...O}}),S];g_(d,C,A,M),delete d[p]}else if(w===null){const A={signal:_.map(C=>{const{test:M,...k}=C;return`${Ev(null,M)} ? ${yz(k)} : `}).join("")+yz(S)};d[p]=A}}else if(Me(v)){const b=Rz[p];if(b){const{vgProp:S,part:_}=b;g_(d,_,S,v),delete d[p]}}Ve(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},At(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Wt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&Me(d.encode.labels.update.text)&&(p=Gu(o,"datum.label",d.encode.labels.update.text.signal)),g_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of Hq)e.hasAxisPart(p)||delete d.encode[p];At(d.encode)&&delete d.encode}const h=c2e(u,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Wt(f,0)}}}}function rG(e){const{axes:t}=e.component,n=[];for(const i of oo)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function f2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Fg(r,"grid",t)),...i.map(r=>Fg(r,"grid",t)),...n.map(r=>Fg(r,"main",t)),...i.map(r=>Fg(r,"main",t))].filter(r=>r)}function sF(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ue(s),...ue(o)]),f={};for(const d of u.values())f[d]={signal:`${i.signal} === "${a}" ? ${ea(s[d])} : ${ea(o[d])}`};return f}return t[r]})])}function d2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:yq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Me(n)?"axisOrient":`axis${s0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],u=["axis",s,a];return{vlOnlyAxisConfig:sF(o,i,e,n),vgAxisConfig:sF(u,i,e,n),axisConfigStyle:h2e([...u,...o],i)}}function h2e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Se(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function PA(e,t,n,i={}){const r=GI(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const oF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??g2e(n,e),gridScale:({model:e,channel:t})=>p2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||sG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||aG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??y2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??v2e(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??x2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??S2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=oG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return XI(r?[Dz(r)]:[],he(s)?[Dz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>E2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??_2e(n,t)};function g2e(e,t){return!Cn(e)&&he(t)&&!Mt(t?.bin)&&!On(t?.bin)}function p2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function m2e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Me(a)?a:Ep(a);{const{configValue:s}=PA("labelAngle",i,t?.style,r);return s!==void 0?Ep(s):n===Rt&&Ve([wT,_T],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function IA(e){return`(((${e.signal} % 360) + 360) % 360)`}function aG(e,t,n,i){if(e!==void 0)if(n==="x"){if(Me(e)){const r=IA(e),a=Me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Me(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Me(e)){const r=IA(e),a=Me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Me(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function sG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Me(e)){const s=IA(e),o=Me(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Me(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function y2e(e,t){if(t==="x"&&Ve(["quantitative","temporal"],e))return!0}function v2e(e,t,n,i){if(n&&!be(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function b2e(e){return e==="x"?"bottom":"left"}function x2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Cn(t)&&t!=="log"){if(he(e)){if(Mt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ve(["month","hours","day","quarter"],An(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function S2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const i=cq(n);if(i)return{signal:i}}}}function oG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return VI(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function E2e(e,t){const n=e.values;if(re(n))return qq(t,n);if(Me(n))return n}function _2e(e,t){return e==="rect"&&pv(t)?1:0}class gd extends yt{transform;_dependentFields;clone(){return new gd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=tG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(mc(i)&&Rq(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,u=o.map((f,d)=>`${hq({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new gd(t,{calculate:u,as:pd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ze(this.transform)}`}}function pd(e,t,n){return me(e,{prefix:t,suffix:"sort_index",...n})}function yx(e,t){return Ve(["top","bottom"],t)?"column":Ve(["left","right"],t)||e==="row"?"row":"column"}function md(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Wt((t||{})[e],r[e],n.header[e])}function vx(e,t,n,i){const r={};for(const a of e){const s=md(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const nk=["row","column"],ik=["header","footer"];function w2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=vx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),u=yx(t,o),f=Ep(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...uG(f,u),...lG(u,f,a),...cG(i,r,t,cbe,lH)}}}function lG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=sG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function uG(e,t){const n=aG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function A2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of ik)if(n[r])for(const a of n[r]){const s=M2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function C2e(e,t){const{sort:n}=e;return Ys(n)?{field:me(n,{expr:"datum"}),order:n.order??"ascending"}:re(n)?{field:pd(e,t,{expr:"datum"}),order:"ascending"}:{field:me(e,{expr:"datum"}),order:n??"ascending"}}function qA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:u}=vx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=OT({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=yx(t,o);return{text:{signal:u?Gu(Gu(u,"datum.label",f),"datum.value",me(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...uG(a,d),...lG(d,a,s),...cG(n,e,t,fbe,uH)}}function M2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=vx(["labelOrient"],s.header,o,t);(t==="row"&&!Ve(["top","bottom"],h)||t==="column"&&!Ve(["left","right"],h))&&(a=qA(s,t,o))}const u=sr(e)&&!h0(e.facet),f=r.axes,d=f?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:C2e(s,t)}:{},...d&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const $2e={column:{start:0,end:1},row:{start:1,end:0}};function T2e(e,t){return $2e[t][e]}function k2e(e,t){const n={};for(const i of Mr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=vx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=yx(i,s),u=T2e(a,o);u!==void 0&&(n[o]=u)}}return At(n)?void 0:n}function cG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=md(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function rk(e){return[...h1(e,"width"),...h1(e,"height"),...h1(e,"childWidth"),...h1(e,"childHeight")]}function h1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(Cn(s)&&hc(o)){const u=e.scaleName(n);return sr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[lF(u,o)]:[lF(u,o),{name:r,update:fG(u,a,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=OA(e.config.view,a?"width":"height"),u=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:r,value:i}]}function lF(e,t){const n=`${e}_step`;return Me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function fG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Wt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ea(s)}, ${ea(a)}) * ${e}_step`}function dG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function hG(e,t){return ue(e).reduce((n,i)=>({...n,...Bd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Tt(r.value),invalidValueRef:void 0})}),{})}function gG(e,t){if(sr(t))return e==="theta"?"independent":"shared";if(qd(t))return"shared";if(fk(t))return Qt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ak(e,t){const n=e.scale[t],i=Qt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&de(sye(t)),"independent"):e[i][t]||"shared"}const D2e={...gbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},pG=ue(D2e);class O2e extends uo{}const uF={symbols:R2e,gradient:N2e,labels:z2e,entries:F2e};function R2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:u,mark:f}=n,d=s.filled&&f!=="trail";let h={...g1e({},n,cve),...PH(n,{filled:d})};const p=r.get("symbolOpacity")??u.legend.symbolOpacity,y=r.get("symbolFillColor")??u.legend.symbolFillColor,v=r.get("symbolStrokeColor")??u.legend.symbolStrokeColor,b=p===void 0?mG(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Fi)delete h.fill;else if(ce(h.fill,"field"))y?delete h.fill:(h.fill=Tt(u.legend.symbolBaseFillColor??"black"),h.fillOpacity=Tt(b??1));else if(re(h.fill)){const S=HA(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=Tt(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Fi)delete h.stroke;else if(ce(h.stroke,"field")||v)delete h.stroke;else if(re(h.stroke)){const S=Wt(HA(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==so){const S=he(t)&&vG(n,r,t);S?h.opacity=[{test:S,...Tt(b??1)},Tt(u.legend.unselectedOpacity)]:b&&(h.opacity=Tt(b))}return h={...h,...e},At(h)?void 0:h}function N2e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?mG(s.opacity)||a.opacity:void 0;return f&&(o.opacity=Tt(f)),o={...o,...e},At(o)?void 0:o}function z2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=he(t)?vG(n,r,t):void 0,u=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;Zu(d)?h=ta({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=ta({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&he(t)&&t.timeUnit===void 0&&(h=ta({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...u?{opacity:u}:{},...h?{text:h}:{},...e};return At(p)?void 0:p}function F2e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function mG(e){return yG(e,(t,n)=>Math.max(t,n.value))}function HA(e){return yG(e,(t,n)=>Wt(t,n.value))}function yG(e,t){if(kve(e))return Se(e.condition).reduce(t,e.value);if(la(e))return e.value}function vG(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ge(n.field);return i.map(a=>`(!length(data(${ge(Ot(a)+Ju)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const cF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return kq(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Dq(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??q2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??H2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??U2e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Rf(n)&&za(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>L2e(t,e)};function L2e(e,t){const n=e.values;if(re(n))return qq(t,n);if(Me(n))return n}function U2e(e,t,n,i){if(t!=="shape"){const r=HA(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function B2e(e){const{legend:t}=e;return Wt(t.type,j2e(e))}function j2e({channel:e,timeUnit:t,scaleType:n}){if(Rf(e)){if(Ve(["quarter","month","day"],t))return"symbol";if(za(n))return"gradient"}return"symbol"}function P2e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??I2e(n,t)}function I2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function q2e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:u}=e;if(za(r))return n==="horizontal"?i==="top"||i==="bottom"?fF(t,"width",s,a):s:fF(t,"height",u,o)}function fF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function H2e(e){if(Ve(["quantile","threshold","log","symlog"],e))return"greedy"}function bG(e){const t=Ft(e)?G2e(e):W2e(e);return e.component.legends=t,t}function G2e(e){const{encoding:t}=e,n={};for(const i of[Fi,...fH]){const r=cn(t[i]);!r||!e.getScaleComponent(i)||i===Li&&he(r)&&r.type===Ud||(n[i]=V2e(e,i))}return n}function Y2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function X2e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function V2e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new O2e({},Y2e(e,t));i2e(e,t,o);const u=n!==void 0?!n:s.disable;if(o.set("disable",u,n!==void 0),u)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=cn(r[t]),h=he(d)?An(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=B2e({legend:n,channel:t,timeUnit:h,scaleType:f}),v=P2e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const C of pG){if(y==="gradient"&&C.startsWith("symbol")||y==="symbol"&&C.startsWith("gradient"))continue;const M=C in cF?cF[C](b):n[C];if(M!==void 0){const k=X2e(M,C,n,e.fieldDef(t));(k||a.legend[C]===void 0)&&o.set(C,M,k)}}const S=n?.encoding??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const C of["labels","legend","title","symbols","gradient","entries"]){const M=hG(S[C]??{},e),k=C in uF?uF[C](M,A):M;k!==void 0&&!At(k)&&(w[C]={..._?.length&&he(d)?{name:`${Ot(d.field)}_legend_${C}`}:{},..._?.length?{interactive:!!_}:{},update:k})}return At(w)||o.set("encode",w,!!n?.encoding),o}function W2e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){bG(i);for(const r of ue(i.component.legends))n.legend[r]=ak(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=xG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ue(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function xG(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of pG){const s=bl(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,u)=>{switch(a){case"symbolType":return Q2e(o,u);case"title":return WI(o,u);case"type":return r=!0,Qi("symbol")}return dx(o,u,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&cv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&cv(e.explicit,["encode","gradient"])),e}function Q2e(e,t){return t.value==="circle"?t:e}function Z2e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function SG(e){const t=e.component.legends,n={};for(const r of ue(t)){const a=e.getScaleComponent(r),s=dt(a.get("domains"));if(n[s])for(const o of n[s])xG(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return nn(n).flat().map(r=>K2e(r,e.config)).filter(r=>r!==void 0)}function K2e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of fH)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Me(a.encode.labels.update.text)&&(s=Gu(i,"datum.label",a.encode.labels.update.text.signal)),Z2e(a,"labels","text",{signal:s})}return a}}function J2e(e){return qd(e)||fk(e)?eSe(e):EG(e)}function eSe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),EG(e))}function EG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const u=Me(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ve(s,u)||s.push(u),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const tSe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class _G extends uo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function wG(e){e.component.projection=Ft(e)?nSe(e):aSe(e)}function nSe(e){if(e.hasProjection){const t=Rn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?iSe(e):void 0,a=new _G(e.projectionName(!0),{...Rn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function iSe(e){const t=[],{encoding:n}=e;for(const i of[[ya,ma],[Fr,va]])(cn(n[i[0]])||cn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Li)&&e.typedFieldDef(Li).type===Ud&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Lt.Main)),t}function rSe(e,t){const n=Q3(tSe,r=>!!(!_e(e.explicit,r)&&!_e(t.explicit,r)||_e(e.explicit,r)&&_e(t.explicit,r)&&tr(e.get(r),t.get(r))));if(tr(e.size,t.size)){if(n)return e;if(tr(e.explicit,{}))return t;if(tr(t.explicit,{}))return e}return null}function aSe(e){if(e.children.length===0)return;let t;for(const i of e.children)wG(i);const n=Q3(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=rSe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new _G(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function sSe(e,t,n,i){if(m0(t,n)){const r=Ft(e)?e.axis(n)??e.legend(n)??{}:{},a=me(t,{expr:"datum"}),s=me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:me(t,{binSuffix:"range",forAs:!0}),formula:d0(a,s,r.format,r.formatType,i)}}return{}}function AG(e,t){return`${PI(e)}_${t}`}function oSe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function sk(e,t,n){const i=sx(n,void 0)??{},r=AG(i,t);return e.getName(`${r}_bins`)}function lSe(e){return"as"in e}function dF(e,t,n){let i,r;lSe(e)?i=ve(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[me(e,{forAs:!0}),me(e,{binSuffix:"end",forAs:!0})];const a={...sx(t,void 0)},s=AG(a,e.field),{signal:o,extentSignal:u}=oSe(n,s);if(Wb(a.extent)){const d=a.extent;r=iG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...u?{extentSignal:u}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Pa extends yt{bins;clone(){return new Pa(null,Le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(bi(a)&&Mt(a.bin)){const{key:o,binComponent:u}=dF(a,a.bin,n);r[o]={...u,...r[o],...sSe(n,a,s,n.config)}}return r},{});return At(i)?null:new Pa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=dF(n,n.bin,i);return new Pa(t,{[r]:a})}merge(t,n){for(const i of ue(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Na([...this.bins[i].as,...t.bins[i].as],Ze)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(nn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(nn(this.bins).map(t=>t.field))}hash(){return`Bin ${Ze(this.bins)}`}assemble(){return nn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:zr(t.field),as:i,signal:t.signal,...Wb(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:zr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const u of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:me({field:i[f]},{expr:"datum"}),as:u[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function uSe(e,t,n,i){const r=Ft(i)?i.encoding[os(t)]:void 0;if(bi(n)&&Ft(i)&&zq(n,r,i.markDef,i.config)){e.add(me(n,{})),e.add(me(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,u=vl({fieldDef:n,markDef:s,config:o});_p(a)&&u!==.5&&Qt(t)&&(e.add(me(n,{suffix:hx})),e.add(me(n,{suffix:gx}))),n.bin&&m0(n,t)&&e.add(me(n,{binSuffix:"range"}))}else if(OI(t)){const a=DI(t);e.add(i.getName(a))}else e.add(me(n));return mc(n)&&Zye(n.scale?.range)&&e.add(n.scale.range.field),e}function cSe(e,t){for(const n of ue(t)){const i=t[n];for(const r of ue(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ia extends yt{dimensions;measures;clone(){return new ia(null,new Set(this.dimensions),Le(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:u,field:f}=s;if(u)if(u==="count")r["*"]??={},r["*"].count=new Set([me(s,{forAs:!0})]);else{if(Ks(u)||Nl(u)){const d=Ks(u)?"argmin":"argmax",h=u[d];r[h]??={},r[h][d]=new Set([me({op:d,field:h},{forAs:!0})])}else r[f]??={},r[f][u]=new Set([me(s,{forAs:!0})]);ls(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??={},r[f].min=new Set([me({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([me({field:f,aggregate:"max"},{forAs:!0})]))}else uSe(a,o,s,n)}),a.size+ue(r).length===0)?null:new ia(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:u}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([u||me(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(u||me(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+ue(r).length===0?null:new ia(t,i,r)}merge(t){return _I(this.dimensions,t.dimensions)?(cSe(this.measures,t.measures),!0):(Eye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ue(this.measures)])}producedFields(){const t=new Set;for(const n of ue(this.measures))for(const i of ue(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ze({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of ue(this.measures))for(const s of ue(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:zr(a));return{type:"aggregate",groupby:[...this.dimensions].map(zr),ops:t,fields:n,as:i}}}class Pd extends yt{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Mr){const s=n.facet[a];if(s){const{bin:o,sort:u}=s;this[a]={name:n.getName(`${a}_domain`),fields:[me(s),...Mt(o)?[me(s,{binSuffix:"end"})]:[]],...Ys(u)?{sortField:u}:re(u)?{sortIndexField:pd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Mr)this[n]&&(t+=` ${n.charAt(0)}:${Ze(this[n])}`);return t}get fields(){const t=[];for(const n of Mr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Mr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of oo){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Cn(r)&&hc(a)){const s=bx(this.childModel,n),o=ck(s);o?t[n]=o:de(cT(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:u,sortIndexField:f}=this[t];if(u){const{op:d=ix,field:h}=u;a.push(h),s.push(d),o.push(me(u,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const u of nk){for(const f of ik){const d=i[u]?.[f]??[];for(const h of d)if(h.axes?.length>0){a[u]=!0;break}}if(a[u]){const f=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),u=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:u}]})}for(const o of[Gs,Hs])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function hF(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function fSe(e,t){const n=J3(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=hF(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=hF(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return de(D1e(t)),null}function dSe(e){const t={};return Y1(e.filter,n=>{if(dq(n)){let i=null;mT(n)?i=Ji(n.equal):vT(n)?i=Ji(n.lte):yT(n)?i=Ji(n.lt):bT(n)?i=Ji(n.gt):xT(n)?i=Ji(n.gte):ST(n)?i=n.range[0]:ET(n)&&(i=(n.oneOf??n.in)[0]),i&&(gc(i)?t[n.field]="date":st(i)?t[n.field]="number":ve(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function hSe(e){const t={};function n(i){fd(i)?t[i.field]="date":i.type==="quantitative"&&r1e(i.aggregate)?t[i.field]="number":ad(i.field)>1?i.field in t||(t[i.field]="flatten"):mc(i)&&Ys(i.sort)&&ad(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Ft(e)||sr(e))&&e.forEachFieldDef((i,r)=>{if(bi(i))n(i);else{const a=fc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Ft(e)){const{mark:i,markDef:r,encoding:a}=e;if(zl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];he(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function gSe(e){const t={};if(Ft(e)&&e.component.selection)for(const n of ue(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&ad(r.field)>1&&(t[r.field]="flatten")}return t}class Zn extends yt{_parse;clone(){return new Zn(null,Le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ze(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!al(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of ue(i)){const u=r.getWithExplicit(o);u.value!==void 0&&(u.explicit||u.value===i[o]||u.value==="derived"||i[o]==="flatten"?delete i[o]:de(_z(o,i[o],u.value)))}for(const o of ue(n)){const u=r.get(o);u!==void 0&&(u===n[o]?delete n[o]:de(_z(o,n[o],u)))}const a=new uo(n,i);r.copyAll(a);const s={};for(const o of ue(a.combine())){const u=a.get(o);u!==null&&(s[o]=u)}return ue(s).length===0||r.parseNothing?null:new Zn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ue(this._parse)){const i=this._parse[n];ad(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(ue(this._parse))}dependentFields(){return new Set(ue(this._parse))}assembleTransforms(t=!1){return ue(this._parse).filter(n=>t?ad(n)>1:!0).map(n=>{const i=fSe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Fd(n)}:null}).filter(n=>n!==null)}}class xl extends yt{clone(){return new xl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ca])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ca}}}class b0 extends yt{params;clone(){return new b0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ze(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class x0 extends yt{params;clone(){return new x0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ze(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ec extends yt{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(al(t)||(n=t.format?{...ar(t.format,["parse"])}:{}),wp(t))this._data={values:t.values};else if(dd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ve(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else TH(t)?this._data={values:[{type:"Sphere"}]}:(MH(t)||al(t))&&(this._data={});this._generator=al(t),t.name&&(this._name=t.name),n&&!At(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function ok(e){return e instanceof ec||e instanceof b0||e instanceof x0}class lk{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class yc extends lk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class uk extends lk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class pSe extends uk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ue(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class mSe extends uk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&tk(t)}run(t){t instanceof xl&&(this.requiresSelectionId&&(ok(t.parent)||t.parent instanceof ia||t.parent instanceof Zn)||(this.setModified(),t.remove()))}}class ySe extends lk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ba&&(i=t.producedFields(),Z3(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class vSe extends uk{constructor(){super()}run(t){t instanceof Oi&&!t.isRequired()&&(this.setModified(),t.remove())}}class bSe extends yc{run(t){if(!ok(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Zn)if(t instanceof Zn)this.setModified(),t.merge(n);else{if(K3(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class xSe extends yc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Zn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const u of ue(o))u in r?r[u]!==o[u]&&a.add(u):r[u]=o[u]}for(const s of a)delete r[s];if(!At(r)){this.setModified();const s=new Zn(t,r);for(const o of n){if(o instanceof Zn)for(const u of ue(r))delete o.parse[u];t.removeChild(o),o.parent=s,o instanceof Zn&&ue(o.parse).length===0&&o.remove()}}}}}class SSe extends yc{run(t){t instanceof Oi||t.numChildren()>0||t instanceof Pd||t instanceof ec||(this.setModified(),t.remove())}}class ESe extends yc{run(t){const n=t.children.filter(r=>r instanceof Ba),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class _Se extends yc{run(t){const n=t.children.filter(r=>r instanceof ia),i={};for(const r of n){const a=Ze(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of ue(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class wSe extends yc{model;constructor(t){super(),this.model=t}run(t){const n=!(ok(t)||t instanceof jd||t instanceof Zn||t instanceof xl),i=[],r=[];for(const a of t.children)a instanceof Pa&&(n&&!K3(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Pa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class ASe extends yc{run(t){const n=[...t.children];if(!rd(n,s=>s instanceof Oi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Oi){let o=s;for(;o.numChildren()===1;){const[u]=o.children;if(u instanceof Oi)o=u;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class vc extends yt{transform;clone(){return new vc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`JoinAggregateTransform ${Ze(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class yd extends yt{filter;clone(){return new yd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const u=n.reduceFieldDef((f,d,h)=>{const p=ls(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=TT({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:Vb(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return ue(u).length?new yd(t,u):null}dependentFields(){return new Set(ue(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ze(this.filter)}`}assemble(){const t=ue(this.filter).reduce((n,i)=>{const r=this.filter[i],a=me(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${GA(a)}))`):r.type==="quantitative"&&n.push(GA(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function GA(e){return`isValid(${e}) && isFinite(+${e})`}function CSe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=me(i);return r&&t.push(r),t},[])}function MSe(e){return re(e)&&e.every(t=>ve(t))&&e.length>1}class Vs extends yt{_stack;clone(){return new Vs(null,Le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],u=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),u.push(Wt(h.order,"ascending"));const f={field:o,order:u};let d;return MSe(a)?d=a:ve(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Vs(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:u}=i,f=a.map(y=>{const v=r[y];return ua(v)}).filter(y=>!!y),d=CSe(n),h=n.encoding.order;let p;if(re(h)||he(h))p=YI(h);else{const y=Fq(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new Vs(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ze(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[me(r,{binSuffix:"mid"})]:[me(r,{}),me(r,{binSuffix:"end"})]:[me(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:u,as:f}=this._stack;if(u)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=me(d,{expr:"datum"}),v=me(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${GA(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:me(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:me(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class Id extends yt{transform;clone(){return new Id(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??me(t)}hash(){return`WindowTransform ${Ze(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>lT(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],u=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),u.push(h.order??"ascending");const f={field:o,order:u},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function $Se(e){function t(n){if(!(n instanceof Pd)){const i=n.clone();if(i instanceof Oi){const r=XA+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ia||i instanceof Vs||i instanceof Id||i instanceof vc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function YA(e){if(e instanceof Pd)if(e.numChildren()===1&&!(e.children[0]instanceof Oi)){const t=e.children[0];(t instanceof ia||t instanceof Vs||t instanceof Id||t instanceof vc)&&t.addDimensions(e.fields),t.swapWithParent(),YA(e)}else{const t=e.model.component.data.main;CG(t);const n=$Se(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(YA)}function CG(e){if(e instanceof Oi&&e.type===Lt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Pd||(t.swapWithParent(),CG(e))}}const XA="scale_",g1=5;function VA(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!VA(t.children))return!1}return!0}function qr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function gF(e,t,n){let i=e.sources,r=!1;return r=qr(new vSe,i)||r,r=qr(new mSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=qr(new SSe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=qr(new bSe,i)||r,r=qr(new wSe(t),i)||r,r=qr(new ySe,i)||r,r=qr(new xSe,i)||r,r=qr(new _Se,i)||r,r=qr(new ESe,i)||r,r=qr(new pSe,i)||r,r=qr(new ASe,i)||r),e.sources=i,r}function TSe(e,t){VA(e.sources);let n=0,i=0;for(let r=0;r<g1&&gF(e,t,!0);r++)n++;e.sources.map(YA);for(let r=0;r<g1&&gF(e,t,!1);r++)i++;VA(e.sources),Math.max(n,i)===g1&&de(`Maximum optimization runs(${g1}) reached.`)}class bn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new bn(()=>t(n))}}function MG(e){Ft(e)?kSe(e):DSe(e)}function kSe(e){const t=e.component.scales;for(const n of ue(t)){const i=RSe(e,n);if(t[n].setWithExplicit("domains",i),zSe(e,n),e.component.data.isFaceted){let a=e;for(;!sr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)js(o)&&(o.data=XA+o.data.replace(XA,""))}}}function DSe(e){for(const n of e.children)MG(n);const t=e.component.scales;for(const n of ue(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=bl(i,s.getWithExplicit("domains"),"domains","scale",WA);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&de(w1e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function OSe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=pF(t,n);if(!r){de(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=pF(t,n);if(r)return"unaggregated"}return e}function RSe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=OSe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&cn(i.x2)?cn(i.x)?bl(Uo(n,r,e,"x"),Uo(n,r,e,"x2"),"domain","scale",WA):Uo(n,r,e,"x2"):t==="y"&&cn(i.y2)?cn(i.y)?bl(Uo(n,r,e,"y"),Uo(n,r,e,"y2"),"domain","scale",WA):Uo(n,r,e,"y2"):Uo(n,r,e,t)}function NSe(e,t,n){return e.map(i=>({signal:`{data: ${ox(i,{timeUnit:n,type:t})}}`}))}function p_(e,t,n){const i=An(n)?.unit;return t==="temporal"||i?NSe(e,t,i):[e]}function Uo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:u}=n,f=cn(r[i]),{type:d}=f,h=f.timeUnit,p=Mxe({invalid:Va("invalid",a,o),isPath:zl(s)});if(Qye(t)){const b=Uo(e,void 0,n,i),S=p_(t.unionWith,d,h);return Ta([...S,...b.value])}else{if(Me(t))return Ta([t]);if(t&&t!=="unaggregated"&&!bq(t))return Ta(p_(t,d,h))}if(u&&i===u.fieldChannel){if(u.offset==="normalize")return Qi([[0,1]]);const b=n.requestDataName(p);return Qi([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ls(i)&&he(f)?FSe(n,i,e):void 0;if(us(f)){const b=p_([f.datum],d,h);return Qi(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Qi([{data:n.requestDataName(p),field:me({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:me({field:b,aggregate:"max"})}])}else if(Mt(v.bin)){if(Cn(e))return Qi(e==="bin-ordinal"?[]:[{data:Sp(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i,m0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!be(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Mt(b)){const S=sk(n,v.field,b);return Qi([new bn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return Qi([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ve(["time","utc"],e)){const b=r[os(i)];if(zq(v,b,a,o)){const S=n.requestDataName(p),_=vl({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=_p(s)&&_!==.5&&Qt(i);return Qi([{data:S,field:n.vgField(i,w?{suffix:hx}:{})},{data:S,field:n.vgField(i,{suffix:w?gx:"end"})}])}}return Qi(y?[{data:Sp(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function m_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":ix),...i?{field:zr(i)}:{},...r?{order:r}:{}}}function zSe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=bq(i)?i:void 0,s=dc(r)&&Wb(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function FSe(e,t,n){if(!Cn(n))return;const i=e.fieldDef(t),r=i.sort;if(Rq(r))return{op:"min",field:pd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Ys(r)){const o=a&&!s.has(r.field);return m_(r,o)}else if(Mve(r)){const{encoding:o,order:u}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(Ks(d)||Nl(d))return m_({field:me(f),order:u},p);if(lT(d)||!d)return m_({op:d,field:h,order:u},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ve(["ascending",void 0],r))return!0}}function pF(e,t){const{aggregate:n,type:i}=e;return n?ve(n)&&!s1e.has(n)?{valid:!1,reason:J1e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:eye(e)}:{valid:!0}:{valid:!1,reason:K1e(e)}}function WA(e,t,n,i){return e.explicit&&t.explicit&&de(aye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function LSe(e){const t=Na(e.map(s=>{if(js(s)){const{sort:o,...u}=s;return u}return s}),Ze),n=Na(e.map(s=>{if(js(s)){const o=s.sort;return o!==void 0&&!Sp(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ze);if(t.length===0)return;if(t.length===1){const s=e[0];if(js(s)&&n.length>0){let o=n[0];if(n.length>1){de(Az);const u=n.filter(f=>be(f)&&"op"in f&&f.op!=="min");n.every(f=>be(f)&&"op"in f)&&u.length===1?o=u[0]:o=!0}else if(be(o)&&"field"in o){const u=o.field;s.field===u&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Na(n.map(s=>Sp(s)||!("op"in s)||ve(s.op)&&_e(n1e,s.op)?s:(de(oye(s)),!0)),Ze);let r;i.length===1?r=i[0]:i.length>1&&(de(Az),r=!0);const a=Na(e.map(s=>js(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function ck(e){if(js(e)&&ve(e.field))return e.field;if(o1e(e)){let t;for(const n of e.fields)if(js(n)&&ve(n.field)){if(!t)t=n.field;else if(t!==n.field)return de(lye),t}return de(uye),t}else if(l1e(e)){de(cye);const t=e.fields[0];return ve(t)?t:void 0}}function bx(e,t){const i=e.component.scales[t].get("domains").map(r=>(js(r)&&(r.data=e.lookupDataSource(r.data)),r));return LSe(i)}function $G(e){return qd(e)||fk(e)?e.children.reduce((t,n)=>t.concat($G(n)),mF(e)):mF(e)}function mF(e){return ue(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:u,range:f,reverse:d,...h}=r,p=USe(r.range,a,n,e),y=bx(e,n),v=o?Uxe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function USe(e,t,n,i){if(Qt(n)){if(hc(e))return{step:{signal:`${t}_step`}}}else if(be(e)&&js(e))return{...e,data:i.lookupDataSource(e.data)};return e}class TG extends uo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ve([Nn.LOG,Nn.TIME,Nn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ve([Nn.LINEAR,Nn.SQRT,Nn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(re(o)){const u=o[0],f=o[o.length-1];if(st(u)&&st(f))if(u<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const BSe=["range","scheme"];function jSe(e){const t=e.component.scales;for(const n of oT){const i=t[n];if(!i)continue;const r=PSe(n,e);i.setWithExplicit("range",r)}}function yF(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Ui(t),s=e.getName(a);if(be(i)&&i.binned&&i.step!==void 0)return new bn(()=>{const o=e.scaleName(t),u=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${u})`});if(Mt(i)){const o=sk(e,r,i);return new bn(()=>{const u=e.getSignalName(o),f=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function PSe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of BSe)if(n[h]!==void 0){const p=TA(a,h),y=xq(e,h);if(!p)de(JI(a,h,e));else if(y)de(y);else switch(h){case"range":{const v=n.range;if(re(v)){if(Qt(e))return Ta(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return bn.fromName(_,S)}return b}))}else if(be(v))return Ta({data:t.requestDataName(Lt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ta(v)}case"scheme":return Ta(ISe(n[h]))}}const s=e===Rt||e==="xOffset"?"width":"height",o=i[s];if(Qa(o)){if(Qt(e))if(Cn(a)){const h=DG(o,t,e);if(h)return Ta({step:h})}else de(eq(s));else if(u0(e)){const h=e===$l?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=OG(o,a);if(v)return Ta(v)}}}const{rangeMin:u,rangeMax:f}=n,d=qSe(e,t);return(u!==void 0||f!==void 0)&&TA(a,"rangeMin")&&re(d)&&d.length===2?Ta([u??d[0],f??d[1]]):Qi(d)}function ISe(e){return Wye(e)?{scheme:e.name,...ar(e,["name"])}:{scheme:e}}function kG(e,t,n,{center:i}={}){const r=Ui(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===$n&&oa(n)?i?[bn.fromName(o=>`${s(o)}/2`,a),bn.fromName(o=>`-${s(o)}/2`,a)]:[bn.fromName(s,a),0]:i?[bn.fromName(o=>`-${s(o)}/2`,a),bn.fromName(o=>`${s(o)}/2`,a)]:[0,bn.fromName(s,a)]}function qSe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=cn(a[e]),u=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Rt:case $n:{if(Ve(["point","band"],u)){const h=RG(e,n,i.view);if(Qa(h))return{step:DG(h,t,e)}}return kG(e,t,u)}case $l:case Ld:return HSe(e,t,u);case ao:{const h=XSe(r,i),p=VSe(r,n,t,i);return ld(u)?YSe(h,p,GSe(u,i,f,e)):[h,p]}case Ur:return[0,Math.PI*2];case cc:return[0,360];case pa:return[0,new bn(()=>{const h=t.getSignalName(sr(t.parent)?"child_width":"width"),p=t.getSignalName(sr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Tl:return{step:1e3/i.scale.framesPerSecond};case Ol:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Rl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Li:return"symbol";case Fi:case as:case ss:return u==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case so:case kl:case Dl:return[i.scale.minOpacity,i.scale.maxOpacity]}}function DG(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=iT(n),s=i[a];if(hH({step:e,offsetIsDiscrete:Be(s)&&gq(s.type)})==="offset"&&Xq(i,a)){const u=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(u.get("type")==="band"){const p=u.get("paddingInner")??u.get("padding")??0,y=u.get("paddingOuter")??u.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${h1e(h)})`}}else return e.step}function OG(e,t){if(hH({step:e,offsetIsDiscrete:Cn(t)})==="offset")return{step:e.step}}function HSe(e,t,n){const i=e===$l?"x":"y",r=t.getScaleComponent(i);if(!r)return kG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:u}=t;if(a==="band"){const f=RG(i,t.size,t.config.view);if(Qa(f)){const d=OG(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(he(f)&&f.timeUnit){const d=cq(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=vl({fieldDef:f,markDef:o,config:u})-.5,y=p!==0?` + ${p}`:"";if(h){const v=Me(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=Me(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return SI(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function RG(e,t,n){const i=e===Rt?"width":"height",r=t[i];return r||bv(n,i)}function GSe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&re(n)?n.length+1:(de(bye(i)),3)}}function YSe(e,t,n){const i=()=>{const r=ea(t),a=ea(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Me(t)?new bn(i):{signal:i()}}function XSe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Qb("size",e))}const vF=.95;function VSe(e,t,n,i){const r={x:yF(n,"x"),y:yF(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=bF(t,r,i.view);return st(a)?a-1:new bn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=bF(t,r,i.view);return st(a)?Math.pow(vF*a,2):new bn(()=>`pow(${vF} * ${a.signal}, 2)`)}}throw new Error(Qb("size",e))}function bF(e,t,n){const i=Qa(e.width)?e.width.step:RA(n,"width"),r=Qa(e.height)?e.height.step:RA(n,"height");return t.x||t.y?new bn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function NG(e,t){Ft(e)?WSe(e,t):FG(e,t)}function WSe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of ue(n)){const u=s[o],f=n[o],d=e.getScaleComponent(o),h=cn(r[o]),p=u[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=TA(y,t),_=xq(o,t);if(p!==void 0&&(S?_&&de(_):de(JI(y,t,o))),S&&_===void 0)if(p!==void 0){const w=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":gc(u[t])||A==="temporal"||w?f.set(t,{signal:ox(u[t],{type:A,timeUnit:w})},!0):f.set(t,u[t],!0);break;default:f.copyKeyFromObject(t,u)}}else{const w=ce(xF,t)?xF[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:a,config:i,hasNestedOffsetScale:Vq(r,o),hasSecondaryRangeChannel:!!r[os(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const xF={bins:({model:e,fieldOrDatumDef:t})=>he(t)?QSe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>ZSe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>KSe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>JSe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>eEe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>tEe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return nEe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>iEe(e,t,n,i,r,a.scale,s)};function zG(e){Ft(e)?jSe(e):FG(e,"range")}function FG(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?zG(i):NG(i,t);for(const i of ue(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=bl(r,o,t,"scale",CH((u,f)=>{switch(t){case"range":return u.step&&f.step?u.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function QSe(e,t){const n=t.bin;if(Mt(n)){const i=sk(e,t.field,n);return new bn(()=>e.getSignalName(i))}else if(On(n)&&dc(n)&&n.step!==void 0)return{step:n.step}}function ZSe(e,t){if(Ve([Fi,as,ss],e)&&t!=="nominal")return"hcl"}function KSe(e,t,n,i,r,a){if(!(ua(a)?.bin||re(n)||r!=null||i!=null||Ve([Nn.TIME,Nn.UTC],e)))return Qt(t)?!0:void 0}function JSe(e,t,n,i,r,a){if(Qt(e)){if(za(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Nn.POINT)return n.pointPadding}}function eEe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:u,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Wt(s,n==="bar"?o:n==="tick"?f:u)}else if(u0(t)&&i===Nn.BAND)return r.offsetBandPaddingInner}}function tEe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Nn.BAND)return Wt(s,Me(i)?{signal:`${i.signal}/2`}:i/2)}else if(u0(t)){if(n===Nn.POINT)return .5;if(n===Nn.BAND)return r.offsetBandPaddingOuter}}}function nEe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return oa(e)&&t==="descending"?Me(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(oa(e)&&t==="descending")return!0}function iEe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&oa(r)){if(re(n)){const u=n[0],f=n[n.length-1];if(st(u)&&u<=0&&st(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ld(r))return!0;if(!(he(t)&&t.bin)&&Ve([...oo,...Xme],e)){const{orient:u,type:f}=i;return Ve(["bar","area","line","trail"],f)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ve(["bar","area"],f)&&!s?!0:a?.zero}return!1}function rEe(e,t,n,i,r=!1){const a=aEe(t,n,i,r),{type:s}=e;return ls(t)?s!==void 0?nve(t,s)?he(n)&&!tve(s,n.type)?(de(iye(s,a)),a):s:(de(nye(t,s,a)),a):a:null}function aEe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(Rf(e)||r_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&de(a_(e,"ordinal")),"ordinal";if(i_(e))return"band";if(Qt(e)||u0(e)){if(Ve(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in sT)return"band";const r=n[Ui(e)];return Qu(r)||cd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Rf(e)?"time":r_(e)==="discrete"?(de(a_(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&An(t.timeUnit).utc?"utc":i_(e)?"band":"time";case"quantitative":return Rf(e)?he(t)&&Mt(t.bin)?"bin-ordinal":"linear":r_(e)==="discrete"?(de(a_(e,"quantitative")),"ordinal"):i_(e)?"band":"linear";case"geojson":return}throw new Error(ZI(t.type))}function sEe(e,{ignoreRange:t}={}){LG(e),MG(e);for(const n of eve)NG(e,n);t||zG(e)}function LG(e){Ft(e)?e.component.scales=oEe(e):e.component.scales=uEe(e)}function oEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of oT){const s=cn(t[a]);if(s&&n===_q&&a===Li&&s.type===Ud)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const u=Vq(t,a),f=rEe(o,a,s,i,u);r[a]=new TG(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const lEe=CH((e,t)=>Mz(e)-Mz(t));function uEe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){LG(r);for(const a of ue(r.component.scales))if(i.scale[a]??=gG(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?Hye(s.value,o.value)?n[a]=bl(s,o,"type","scale",lEe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of ue(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new TG(a,s);for(const o of e.children){const u=o.component.scales[r];u&&(o.renameScale(u.get("name"),a),u.merged=!0)}}return t}class y_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ft(e){return e?.type==="unit"}function sr(e){return e?.type==="facet"}function fk(e){return e?.type==="concat"}function qd(e){return e?.type==="layer"}class dk{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Rn(o),this.name=t.name??r,this.title=qo(t.title)?{text:t.title}:t.title?Rn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new y_,this.projectionNameMap=i?i.projectionNameMap:new y_,this.signalNameMap=i?i.signalNameMap:new y_,this.data=t.data,this.description=t.description,this.transforms=pxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:bbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:rx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new uo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){sEe(this)}parseProjection(){wG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){bG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of ue(i)){const s=i[a];s!==void 0&&(r[a]=Tt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:At(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=k2e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Mr)t[i].title&&n.push(w2e(this,i));for(const i of nk)n=n.concat(A2e(this,i));return n}assembleAxes(){return f2e(this.component.axes,this.config)}assembleLegends(){return SG(this)}assembleProjections(){return J2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...II(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ve(["unit","layer"],this.type)?Ve(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",At(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||sr(this.parent)?$G(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ot((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Lt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(sr(this.parent)){const n=dG(t),i=Xb(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Cn(a)&&hc(s)){const o=r.get("name"),u=bx(this,i),f=ck(u);if(f){const d=me({aggregate:"distinct",field:f},{expr:"datum"});return{signal:fG(o,r,d)}}else return de(cT(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(NI(t)&&ls(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(v1e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class UG extends dk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return me(i,n)}reduceFieldDef(t,n){return Vve(this.getMapping(),(i,r,a)=>{const s=ua(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){UT(this.getMapping(),(i,r)=>{const a=ua(i);a&&t(a,r)},n)}}class xx extends yt{transform;clone(){return new xx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ze(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Sx extends yt{transform;clone(){return new Sx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ze(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Ex extends yt{transform;clone(){return new Ex(this.parent,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ze(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class _x extends yt{transform;clone(){return new _x(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ze(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ff extends yt{fields;geojson;signal;clone(){return new Ff(null,Le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[ya,ma],[Fr,va]]){const a=r.map(s=>{const o=cn(n.encoding[s]);return he(o)?o.field:us(o)?{expr:`${o.datum}`}:la(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Ff(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Li)){const r=n.typedFieldDef(Li);r.type===Ud&&(t=new Ff(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(ve);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ze(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Ap extends yt{projection;fields;as;clone(){return new Ap(null,this.projection,Le(this.fields),Le(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[ya,ma],[Fr,va]]){const r=i.map(s=>{const o=cn(n.encoding[s]);return he(o)?o.field:us(o)?{expr:`${o.datum}`}:la(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Fr?"2":"";(r[0]||r[1])&&(t=new Ap(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ve))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ze(this.fields)} ${Ze(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Du extends yt{transform;clone(){return new Du(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Du(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(he(r)&&he(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:u,value:f,frame:d,keyvals:h}=s.impute,p=Zq(n.mark,i);return new Du(t,{impute:s.field,key:o.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Ze(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...i?{keyvals:Qbe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,f,d]}else return[u]}}class wx extends yt{transform;clone(){return new wx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ze(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Cp extends yt{transform;secondary;clone(){return new Cp(null,Le(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(Zbe(s)){let u=PG(s.data,a);u||(u=new ec(s.data),a.push(u));const f=n.getName(`lookup_${r}`);o=new Oi(u,f,Lt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(Kbe(s)){const u=s.param;i={as:u,...i};let f;try{f=n.getSelectionComponent(Ot(u),u)}catch{throw new Error(E1e(u))}if(o=f.materialized,!o)throw new Error(_1e(u))}return new Cp(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Se(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ze({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Se(this.transform.as)}:{}};else{let n=this.transform.as;ve(n)||(de(N1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Ax extends yt{transform;clone(){return new Ax(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ze(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Cx extends yt{transform;clone(){return new Cx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ze(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Mx extends yt{transform;clone(){return new Mx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ze(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class $x extends yt{transform;clone(){return new $x(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ze(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function BG(e){let t=0;function n(i,r){if(i instanceof ec&&!i.isGenerator&&!dd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Zn&&(i.parent instanceof ec&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Pd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof b0||i instanceof x0||i instanceof yd||i instanceof jd||i instanceof gd||i instanceof Ap||i instanceof ia||i instanceof Cp||i instanceof Id||i instanceof vc||i instanceof _x||i instanceof Ex||i instanceof xx||i instanceof wx||i instanceof Ax||i instanceof Cx||i instanceof xl||i instanceof $x||i instanceof Mx||i instanceof Sx)&&r.transform.push(i.assemble()),(i instanceof Pa||i instanceof Ba||i instanceof Du||i instanceof Vs||i instanceof Ff)&&r.transform.push(...i.assemble()),i instanceof Oi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Oi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Oi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function cEe(e){const t=[],n=BG(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function fEe(e,t){const n=[],i=BG(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function dEe(e){return e==="top"||e==="left"||Me(e)?"header":"footer"}function hEe(e){for(const t of Mr)gEe(e,t);SF(e,"x"),SF(e,"y")}function gEe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=md("title",null,i,t);let u=Nf(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(u=re(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=md("labelOrient",s.header,i,t),d=s.header!==null?Wt(s.header?.labels,i.header.labels,!0):!1,h=Ve(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[jG(e,t,d)]}}}function jG(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function SF(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=ak(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const u=dEe(o.get("orient"));s[u]??=[jG(e,a,!1)];const f=Fg(o,"main",e.config,{header:!0});f&&s[u][0].axes.push(f),o.mainExtracted=!0}}}}function pEe(e){hk(e),_v(e,"width"),_v(e,"height")}function mEe(e){hk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";_v(e,t),_v(e,n)}function hk(e){for(const t of e.children)t.parseLayoutSize()}function _v(e,t){const n=dG(t),i=Xb(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const u=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??gG(i,e);if(f==="independent"&&u.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==u.value){s=void 0;break}s=bl(s,u,n,"")}else s=u}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function yEe(e){const{size:t,component:n}=e;for(const i of oo){const r=Ui(i);if(t[r]){const a=t[r];n.layoutSize.set(r,Qa(a)?"step":a,!0)}else{const a=vEe(e,r);n.layoutSize.set(r,a,!1)}}}function vEe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Cn(a)){const o=bv(i.view,t);return hc(s)||Qa(o)?"step":o}else return OA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return OA(i.view,t);{const a=bv(i.view,t);return Qa(a)?a.step:a}}}function QA(e,t,n){return me(t,{suffix:`by_${me(e)}`,...n})}class Zg extends UG{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=vk(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!h0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ue(t),i={};for(const r of n){if(![Hs,Gs].includes(r)){de(Qb(r,"facet"));break}const a=t[r];if(a.field===void 0){de(MA(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=LT(t,n);return i.header?i.header=Rn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ce(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Tx(this),this.child.parseData()}parseLayoutSize(){hk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,nn(this.component.selection).some(t=>ja(t))&&dT(fT)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),hEe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Mr)for(const i of ik){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=md("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const u=yx(n,o);t.titleAnchor??={},t.titleAnchor[u]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[u]??={},t[u][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Zg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Zg?{...this.channelHasField("column")?{encode:{update:{columns:{field:me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Zg){if(this.child.channelHasField("column")){const r=me(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of oo){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(Cn(s)&&hc(o)){const u=bx(this.child,r),f=ck(u);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):de(cT(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),u=[];for(const d of Mr){const h=this.facet[d];if(h){u.push(me(h));const{bin:p,sort:y}=h;if(Mt(p)&&u.push(me(h,{binSuffix:"end"})),Ys(y)){const{field:v,op:b=ix}=y,S=QA(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(re(y)){const v=pd(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:u,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ys(i.sort)?[QA(i,i.sort,{expr:"datum"})]:re(i.sort)?[pd(i,t,{expr:"datum"})]:[me(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Ys(r)?r.order:!re(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return qA(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of nk)if(t[r]){const a=md("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return qA(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=cEe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Mr.map(u=>this.facetSortFields(u)).flat(),order:Mr.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Nxe(this,[]))}]}getMapping(){return this.facet}}function bEe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Ys(a.sort)){const{field:s,op:o=ix}=a.sort;e=r=new vc(e,{joinaggregate:[{op:o,field:s,as:QA(a,a.sort,{forAs:!0})}],groupby:[me(a)]})}return r}return null}function PG(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(wp(e)&&wp(i)){if(tr(e.values,i.values))return n}else if(dd(e)&&dd(i)){if(e.url===i.url)return n}else if(MH(e)&&e.name===n.dataName)return n}}return null}function xEe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new ec({values:[]});return t.push(i),i}const n=PG(e.data,t);if(n)return al(e.data)||(n.data.format=EI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new ec(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function SEe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(lxe(r))s=e=new gd(e,r),a="derived";else if(WT(r)){const o=dSe(r);s=e=Zn.makeWithAncestors(e,{},o,n)??e,e=new jd(e,t,r.filter)}else if(EH(r))s=e=Pa.makeFromTransform(e,r,t),a="number";else if(cxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Zn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ba.makeFromTransform(e,r);else if(fxe(r))s=e=ia.makeFromTransform(e,r),a="number",tk(t)&&(e=new xl(e));else if(SH(r))s=e=Cp.make(e,t,r,i++),a="derived";else if(axe(r))s=e=new Id(e,r),a="number";else if(sxe(r))s=e=new vc(e,r),a="number";else if(dxe(r))s=e=Vs.makeFromTransform(e,r),a="derived";else if(hxe(r))s=e=new _x(e,r),a="derived";else if(gxe(r))s=e=new Sx(e,r),a="derived";else if(oxe(r))s=e=new Ex(e,r),a="derived";else if(Jbe(r))s=e=new Mx(e,r),a="derived";else if(rxe(r))e=new $x(e,r);else if(uxe(r))s=e=Du.makeFromTransform(e,r),a="derived";else if(exe(r))s=e=new xx(e,r),a="derived";else if(txe(r))s=e=new Ax(e,r),a="derived";else if(nxe(r))s=e=new Cx(e,r),a="derived";else if(ixe(r))s=e=new wx(e,r),a="derived";else{de(R1e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Tx(e){let t=xEe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(al(r)||dd(r)||wp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Cxe;al(r)?($H(r)?t=new x0(t,r.sequence):QT(r)&&(t=new b0(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Zn.makeExplicit(t,e,s)??t,t=new xl(t);const o=e.parent&&qd(e.parent);(Ft(e)||sr(e))&&o&&(t=Pa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=SEe(t,e,s));const u=gSe(e),f=hSe(e);t=Zn.makeWithAncestors(t,{},{...u,...f},s)??t,Ft(e)&&(t=Ff.parseAll(t,e),t=Ap.parseAll(t,e)),(Ft(e)||sr(e))&&(o||(t=Pa.makeFromEncoding(t,e)??t),t=Ba.makeFromEncoding(t,e)??t,t=gd.parseAllForSortIndex(t,e));const d=t=p1(Lt.Raw,e,t);if(Ft(e)){const S=ia.makeFromEncoding(t,e);S&&(t=S,tk(e)&&(t=new xl(t))),t=Du.makeFromEncoding(t,e)??t,t=Vs.makeFromEncoding(t,e)??t}let h,p;if(Ft(e)){const{markDef:S,mark:_,config:w}=e,A=St("invalid",S,w),{marks:C,scales:M}=p=kH({invalid:A,isPath:zl(_)});C!==M&&M==="include-invalid-values"&&(h=t=p1(Lt.PreFilterInvalid,e,t)),C==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t)}const y=t=p1(Lt.Main,e,t);let v;if(Ft(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t,v=t=p1(Lt.PostFilterInvalid,e,t))}Ft(e)&&u2e(e,y);let b=null;if(sr(e)){const S=e.getName("facet");t=bEe(t,e.facet)??t,b=new Pd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function p1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Oi(n,a,e,r);return i[a]=s,s}class EEe extends dk{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&de(k1e),this.children=this.getChildren(t).map((a,s)=>vk(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Tx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>ja(t))&&dT(fT)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return cx(t)?t.vconcat:XT(t)?t.hconcat:t.concat}parseLayoutSize(){mEe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=rk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function _Ee(e){return e===!1||e===null}const wEe={disable:1,gridScale:1,scale:1,...Gq,labelExpr:1,encode:1},IG=ue(wEe);class gk extends uo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new gk(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!_Ee(this.get(t))}hasOrientSignalRef(){return Me(this.explicit.orient)}}function AEe(e,t,n){const{encoding:i,config:r}=e,a=cn(i[t])??cn(i[os(t)]),s=e.axis(t)||{},{format:o,formatType:u}=s;if(Zu(u))return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:u,config:r}),...n};if(o===void 0&&u===void 0&&r.customFormatTypes){if(ud(a)==="quantitative"){if(cd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(ud(a)==="temporal"&&r.timeFormatType&&he(a)&&!a.timeUnit)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function CEe(e){return oo.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[REe(n,e)]),t),{})}const MEe={bottom:"top",top:"bottom",left:"right",right:"left"};function $Ee(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of ue(r.component.axes))n.axis[a]=ak(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=TEe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of oo){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:u}=s.getWithExplicit("orient");if(!Me(o)){if(i[o]>0&&!u){const f=MEe[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function TEe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=kEe(r,a)}}}else return t.map(n=>n.clone());return e}function kEe(e,t){for(const n of IG){const i=bl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return WI(r,a);case"gridScale":return{explicit:r.explicit,value:Wt(r.value,a.value)}}return dx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function DEe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Me(n.labelAngle)?n.labelAngle:Ep(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===oG(i,r))return!0}return e===n[t]}const OEe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function REe(e,t){let n=t.axis(e);const i=new gk,r=cn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||b2e(e),u=t.getScaleComponent(e).get("type"),f=d2e(e,u,o,t.config),d=n!==void 0?!n:PA("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=m2e(r,n,e,s.style,f),p=Dq(n.formatType,r,u),y=kq(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:u,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const _ of IG){const w=_ in oF?oF[_](v):Nz(_)?n[_]:void 0,A=w!==void 0,C=DEe(w,_,n,t,e);if(A&&C)i.set(_,w,C);else{const{configValue:M=void 0,configFrom:k=void 0}=Nz(_)&&_!=="values"?PA(_,s.style,n.style,f):{},T=M!==void 0;A&&!T?i.set(_,w,C):(k!=="vgAxisConfig"||OEe.has(_)&&T||y0(M)||Me(M))&&i.set(_,M,!1)}}const b=n.encoding??{},S=Hq.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=hG(b[w]??{},t),C=w==="labels"?AEe(t,e,A):A;return C!==void 0&&!At(C)&&(_[w]={update:C}),_},{});return At(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function NEe({encoding:e,size:t}){for(const n of oo){const i=Ui(n);Qa(t[i])&&Jo(e[n])&&(delete t[i],de(eq(i)))}return t}const zEe={vgMark:"arc",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Js(e,"radius"),...Js(e,"theta")})},FEe={vgMark:"area",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...xv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...xv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...ek(e)})},LEe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},UEe={vgMark:"shape",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===Ud?{field:me(n,{expr:"datum"})}:{}}]}},BEe={vgMark:"image",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y"),...KT(e,"url")})},jEe={vgMark:"line",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e,{vgChannel:"strokeWidth"}),...ek(e)})},PEe={vgMark:"trail",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...ek(e)})};function pk(e,t){const{config:n}=e;return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...zn("angle",e),...IEe(e,n,t)}}function IEe(e,t,n){return n?{shape:{value:n}}:zn("shape",e)}const qEe={vgMark:"symbol",encodeEntry:e=>pk(e)},HEe={vgMark:"symbol",encodeEntry:e=>pk(e,"circle")},GEe={vgMark:"symbol",encodeEntry:e=>pk(e,"square")},YEe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},XEe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...xv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...xv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...zn("size",e,{vgChannel:"strokeWidth"})}}},VEe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Br(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...KT(e),...zn("size",e,{vgChannel:"fontSize"}),...zn("angle",e),...iF("align",WEe(e.markDef,n,t)),...iF("baseline",QEe(e.markDef,n,t)),...gi("radius",e,{defaultPos:null}),...gi("theta",e,{defaultPos:null})}}};function WEe(e,t,n){if(St("align",e,n)===void 0)return"center"}function QEe(e,t,n){if(St("baseline",e,n)===void 0)return"middle"}const ZEe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,r),...gi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Tt(St("thickness",n,t))}}},m1={arc:zEe,area:FEe,bar:LEe,circle:HEe,geoshape:UEe,image:BEe,line:jEe,point:qEe,rect:YEe,rule:XEe,square:GEe,text:VEe,tick:ZEe,trail:PEe};function KEe(e){if(Ve([tx,Jb,sve],e.mark)){const t=Zq(e.mark,e.encoding);if(t.length>0)return JEe(e,t)}else if(e.mark===ex){const t=AA.some(n=>St(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return e_e(e)}return mk(e)}const EF="faceted_path_";function JEe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:EF+e.requestDataName(Lt.Main),data:e.requestDataName(Lt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:mk(e,{fromPrefix:EF})}]}const _F="stack_group_";function e_e(e){const[t]=mk(e,{fromPrefix:_F}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...id(t.encode.update,["y","yc","y2","height",...AA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ar(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ar(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of AA){const d=Va(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Tt(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),h=me(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(me(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const h=Va(d,e.markDef,e.config);return h!==void 0?{...f,[d]:Tt(h)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Lt.Main),name:_F+e.requestDataName(Lt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function t_e(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!re(s)&&la(s)&&_A(s.value)||!s&&_A(St("order",r,a)))){if((re(s)||he(s))&&!n)return YI(s,{expr:"datum"});if(zl(i)){const o=r.orient==="horizontal"?"y":"x",u=t[o];if(he(u))return{field:o}}}}function mk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Wt(i.clip,n_e(e),i_e(e)),o=HI(i),u=r.key,f=t_e(e),d=r_e(e),h=St("aria",i,a),p=m1[n].postEncodingTransform?m1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:m1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...u?{key:u.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Lt.Main)},encode:{update:m1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function n_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function i_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function r_e(e){if(!e.component.selection)return null;const t=ue(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=ue(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class qG extends UG{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,Fz(t)?t.view:void 0);const s=Wa(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=Ibe(s,a,{graticule:t.data&&QT(t.data)}));const u=this.encoding=Yve(t.encoding||{},o,s.filled,a);this.markDef=vH(s,u,a),this.size=NEe({encoding:u,size:Fz(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=yH(this.markDef,u),this.specifiedScales=this.initScales(o,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>GT(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===_q,i=t&&Ume.some(r=>Be(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return oT.reduce((i,r)=>{const a=cn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Rn(t);return re(n)&&(r.domain=n.map(Ji)),re(i)&&(r.range=i.map(Ji)),r}initAxes(t){return oo.reduce((n,i)=>{const r=t[i];if(Be(r)||i===Rt&&Be(t.x2)||i===$n&&Be(t.y2)){const a=Be(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=ue(t),i={};for(const r of n){const a=t[r];i[r]=y0(a)?qI(a):Ji(a)}return i}initLegends(t){return Wme.reduce((n,i)=>{const r=cn(t[i]);if(r&&Zme(i)){const a=r.legend;n[i]=a&&Rn(a)}return n},{})}parseData(){this.component.data=Tx(this)}parseLayoutSize(){yEe(this)}parseSelections(){this.component.selection=l2e(this,this.selection)}parseMarkGroup(){this.component.mark=KEe(this)}parseAxesAndHeaders(){this.component.axes=CEe(this)}assembleSelectionTopLevelSignals(t){return zxe(this,t)}assembleSignals(){return[...rG(this),...Rxe(this,[])]}assembleSelectionData(t){return Fxe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return rk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+OH)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!qd(this.parent))&&(t=FH(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Tu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ua(n)}typedFieldDef(t){const n=this.fieldDef(t);return bi(n)?n:null}}class yk extends dk{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,u)=>{if(fx(o))return new yk(o,this,this.getName(`layer_${u}`),s,a);if(lo(o))return new qG(o,this,this.getName(`layer_${u}`),s,a);throw new Error(uT(o))})}parseData(){this.component.data=Tx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){pEe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>ja(t))&&dT(fT)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){$Ee(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),rG(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),rk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Se(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Lxe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),SG(this))}}function vk(e,t,n,i,r){if(rx(e))return new Zg(e,t,n,r);if(fx(e))return new yk(e,t,n,i,r);if(lo(e))return new qG(e,t,n,i,r);if(mbe(e))return new EEe(e,t,n,r);throw new Error(uT(e))}function a_e(e,t={}){t.logger&&xye(t.logger),t.fieldTitle&&Pq(t.fieldTitle);try{const n=mH(bd(t.config,e.config)),i=AH(e,n),r=vk(i,null,"",void 0,n);return r.parse(),TSe(r.component.data,r),{spec:o_e(r,s_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Sye(),t.fieldTitle&&Lve()}}function s_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):ve(t)&&(t={type:t}),r&&a&&_xe(t.type)){if(r==="step"&&a==="step")de(xz()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";de(xz(Xb(s)));const o=s==="width"?"height":"width";t.type=wxe(o)}}return{...ue(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Vz(n,!1),...Vz(e,!0)}}function o_e(e,t,n={},i){const r=e.config?kbe(e.config):void 0,a=fEe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),u=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...u?{title:u}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...dH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const l_e=Ome.version,u_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ad,accessPathWithDatum:J3,accessWithDatumToUnescapedPath:pt,compile:a_e,contains:Ve,deepEqual:tr,deleteNestedProperty:cv,duplicate:Le,entries:ml,every:Q3,fieldIntersection:K3,flatAccessWithDatum:wI,getFirstDefined:Wt,hasIntersection:Z3,hasProperty:ce,hash:Ze,internalField:MI,isBoolean:Sp,isEmpty:At,isEqual:Nme,isInternalField:$I,isNullOrFalse:_A,isNumeric:Pb,keys:ue,logicalExpr:Wg,mergeDeep:EI,never:SI,normalize:AH,normalizeAngle:Ep,omit:ar,pick:id,prefixGenerator:wA,removePathFromField:Fd,replaceAll:Gu,replacePathInField:zr,resetIdCounter:Fme,setEqual:_I,some:rd,stringify:dt,titleCase:s0,unique:Na,uniqueId:CI,vals:nn,varName:Ot,version:l_e},Symbol.toStringTag,{value:"Module"}));function HG(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var c_e="3.0.0",f_e={version:c_e};const mf="#fff",wF="#888",d_e={background:"#333",view:{stroke:wF},title:{color:mf,subtitleColor:mf},style:{"guide-label":{fill:mf},"guide-title":{fill:mf}},axis:{domainColor:mf,gridColor:wF,tickColor:mf}},ru="#4572a7",h_e={background:"#fff",arc:{fill:ru},area:{fill:ru},line:{stroke:ru,strokeWidth:2},path:{stroke:ru},rect:{fill:ru},shape:{stroke:ru},symbol:{fill:ru,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},au="#30a2da",v_="#cbcbcb",g_e="#999",p_e="#333",AF="#f0f0f0",CF="#333",m_e={arc:{fill:au},area:{fill:au},axis:{domainColor:v_,grid:!0,gridColor:v_,gridWidth:1,labelColor:g_e,labelFontSize:10,titleColor:p_e,tickColor:v_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:AF,group:{fill:AF},legend:{labelColor:CF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:CF,titleFontSize:14,titlePadding:10},line:{stroke:au,strokeWidth:2},path:{stroke:au,strokeWidth:.5},rect:{fill:au},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:au},bar:{binSpacing:2,fill:au,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},su="#000",y_e={group:{fill:"#e5e5e5"},arc:{fill:su},area:{fill:su},line:{stroke:su},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{fill:su,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},v_e=22,b_e="normal",MF="Benton Gothic, sans-serif",$F=11.5,x_e="normal",ou="#82c6df",b_="Benton Gothic Bold, sans-serif",TF="normal",kF=13,fg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},S_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:b_,fontSize:v_e,fontWeight:b_e},arc:{fill:ou},area:{fill:ou},line:{stroke:ou,strokeWidth:2},path:{stroke:ou},rect:{fill:ou},shape:{stroke:ou},symbol:{fill:ou,size:30},axis:{labelFont:MF,labelFontSize:$F,labelFontWeight:x_e,titleFont:b_,titleFontSize:kF,titleFontWeight:TF},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:MF,labelFontSize:$F,symbolType:"square",titleFont:b_,titleFontSize:kF,titleFontWeight:TF},range:{category:fg["category-6"],diverging:fg["fireandice-6"],heatmap:fg["fire-7"],ordinal:fg["fire-7"],ramp:fg["fire-7"]}},lu="#ab5787",y1="#979797",E_e={background:"#f9f9f9",arc:{fill:lu},area:{fill:lu},line:{stroke:lu},path:{stroke:lu},rect:{fill:lu},shape:{stroke:lu},symbol:{fill:lu,size:30},axis:{domainColor:y1,domainWidth:.5,gridWidth:.2,labelColor:y1,tickColor:y1,tickWidth:.2,titleColor:y1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},uu="#3e5c69",__e={background:"#fff",arc:{fill:uu},area:{fill:uu},line:{stroke:uu},path:{stroke:uu},rect:{fill:uu},shape:{stroke:uu},symbol:{fill:uu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Sr="#1696d2",DF="#000000",w_e="#FFFFFF",v1="Lato",x_="Lato",A_e="Lato",C_e="#DEDDDD",M_e=18,dg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},$_e={background:w_e,title:{anchor:"start",fontSize:M_e,font:v1},axisX:{domain:!0,domainColor:DF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:x_,labelAngle:0,tickColor:DF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:v1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:C_e,gridWidth:1,labelFontSize:12,labelFont:x_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:v1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:x_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:v1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:dg["six-groups-cat-1"],diverging:dg["diverging-colors"],heatmap:dg["diverging-colors"],ordinal:dg["six-groups-seq"],ramp:dg["shades-blue"]},area:{fill:Sr},rect:{fill:Sr},line:{color:Sr,stroke:Sr,strokeWidth:5},trail:{color:Sr,stroke:Sr,strokeWidth:0,size:1},path:{stroke:Sr,strokeWidth:.5},point:{filled:!0},text:{font:A_e,color:Sr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Sr,stroke:null}},arc:{fill:Sr},shape:{stroke:Sr},symbol:{fill:Sr,size:30}},cu="#3366CC",OF="#ccc",b1="Arial, sans-serif",T_e={arc:{fill:cu},area:{fill:cu},path:{stroke:cu},rect:{fill:cu},shape:{stroke:cu},symbol:{stroke:cu},circle:{fill:cu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:b1,fontSize:12},"guide-title":{font:b1,fontSize:12},"group-title":{font:b1,fontSize:12}},title:{font:b1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:OF,tickColor:OF,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},bk=e=>e*(1/3+1),RF=bk(9),NF=bk(10),zF=bk(12),hg="Segoe UI",FF="wf_standard-font, helvetica, arial, sans-serif",LF="#252423",gg="#605E5C",UF="transparent",k_e="#C8C6C4",Gr="#118DFF",D_e="#12239E",O_e="#E66C37",R_e="#6B007B",N_e="#E044A7",z_e="#744EC2",F_e="#D9B300",L_e="#D64550",GG=Gr,YG="#DEEFFF",BF=[YG,GG],U_e=[YG,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",GG],B_e={view:{stroke:UF},background:UF,font:hg,header:{titleFont:FF,titleFontSize:zF,titleColor:LF,labelFont:hg,labelFontSize:NF,labelColor:gg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:gg,labelFontSize:RF,titleFont:FF,titleColor:LF,titleFontSize:zF,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:k_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Gr},line:{stroke:Gr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:hg,fontSize:RF,fill:gg},arc:{fill:Gr},area:{fill:Gr,line:!0,opacity:.6},path:{stroke:Gr},rect:{fill:Gr},point:{fill:Gr,filled:!0,size:75},shape:{stroke:Gr},symbol:{fill:Gr,strokeWidth:1.5,size:50},legend:{titleFont:hg,titleFontWeight:"bold",titleColor:gg,labelFont:hg,labelFontSize:NF,labelColor:gg,symbolType:"circle",symbolSize:75},range:{category:[Gr,D_e,O_e,R_e,N_e,z_e,F_e,L_e],diverging:BF,heatmap:BF,ordinal:U_e}},S_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',j_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',E_=400,x1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},P_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],I_e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function kx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=x1.gridBg[e],r=x1.textPrimary[e],a=x1.textSecondary[e],s=n==="dark"?P_e:I_e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:S_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:j_e,labelFontWeight:E_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:x1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:S_,fill:a,fontWeight:E_},"guide-title":{font:S_,fill:a,fontWeight:E_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const q_e=kx({theme:"white",background:"#ffffff"}),H_e=kx({theme:"g10",background:"#f4f4f4"}),G_e=kx({theme:"g90",background:"#262626"}),Y_e=kx({theme:"g100",background:"#161616"}),X_e=f_e.version,V_e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:H_e,carbong100:Y_e,carbong90:G_e,carbonwhite:q_e,dark:d_e,excel:h_e,fivethirtyeight:m_e,ggplot2:y_e,googlecharts:T_e,latimes:S_e,powerbi:B_e,quartz:E_e,urbaninstitute:$_e,version:X_e,vox:__e},Symbol.toStringTag,{value:"Module"}));function W_e(e,t,n,i){if(re(e))return`[${e.map(r=>t(ve(r)?r:jF(r,n))).join(", ")}]`;if(be(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const u=Object.keys(o);if(u.length>0){r+="<table>";for(const f of u){let d=o[f];d!==void 0&&(be(d)&&(d=jF(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Q_e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function jF(e,t){return JSON.stringify(e,Q_e(t))}var Z_e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const XG="vg-tooltip-element",K_e={offsetX:10,offsetY:10,id:XG,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:J_e,maxDepth:2,formatTooltip:W_e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function J_e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ewe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Z_e.toString().replaceAll(XG,e)}function VG(e,t,{offsetX:n,offsetY:i}){const r=WG({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(QG(r[s],t))return r[s];return r["top-left"]}function twe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:o}=r,u=e._el.getBoundingClientRect(),f=e._origin,d=nwe(u,f,n),h=WG(d,i,s,o),p=Array.isArray(a)?a:[a];for(const y of p)if(QG(h[y],i)&&!iwe(t,h[y],i))return h[y];return VG(t,i,r)}function nwe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const o=i.x2-i.x1,u=i.y2-i.y1;return{x1:r,x2:r+o,y1:a,y2:a+u}}function WG(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,o=r-t.width/2,u=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,h=e.y2+i;return{top:{x:o,y:f},bottom:{x:o,y:h},left:{x:s,y:d},right:{x:u,y:d},"top-left":{x:s,y:f},"top-right":{x:u,y:f},"bottom-left":{x:s,y:h},"bottom-right":{x:u,y:h}}}function QG(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function iwe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class rwe{call;options;el;constructor(t){this.options={...K_e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=ewe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?twe(t,n,i,this.el.getBoundingClientRect(),this.options):VG(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var __={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var awe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),swe=Object.prototype.hasOwnProperty;function ZA(e,t){return swe.call(e,t)}function KA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)ZA(e,r)&&i.push(r);return i}function nr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function JA(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function hu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function ZG(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function eC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(eC(e[t]))return!0}else if(typeof e=="object"){for(var i=KA(e),r=i.length,a=0;a<r;a++)if(eC(e[i[a]]))return!0}}return!1}function PF(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var KG=function(e){awe(t,e);function t(n,i,r,a,s){var o=this.constructor,u=e.call(this,PF(n,{name:i,index:r,operation:a,tree:s}))||this;return u.name=i,u.index=r,u.operation=a,u.tree=s,Object.setPrototypeOf(u,o.prototype),u.message=PF(n,{name:i,index:r,operation:a,tree:s}),u}return t}(Error),Pt=KG,owe=nr,Cf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=wv(n,this.path);i&&(i=nr(i));var r=Ou(n,{op:"remove",path:this.from}).removed;return Ou(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=wv(n,this.from);return Ou(n,{op:"add",path:this.path,value:nr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Mp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},lwe={add:function(e,t,n){return JA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Cf.move,copy:Cf.copy,test:Cf.test,_get:Cf._get};function wv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ou(e,n),n.value}function Ou(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Av(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=wv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Mp(e,t.value),s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=nr(e));var o=t.path||"",u=o.split("/"),f=e,d=1,h=u.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Av;;){if(y=u[d],y&&y.indexOf("~")!=-1&&(y=ZG(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&u[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=u.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!JA(y))throw new Pt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);JA(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new Pt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=lwe[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=Cf[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new Pt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Dx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=nr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Ou(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function uwe(e,t,n){var i=Ou(e,t);if(i.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Av(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Cf[e.op]){if(typeof e.path!="string")throw new Pt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&eC(e.value))throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Pt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Pt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=JG([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function JG(e,t,n){try{if(!Array.isArray(e))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Dx(nr(t),nr(e),n||!0);else{n=n||Av;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Pt)return r;throw r}}function Mp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Mp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Mp(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var cwe=Object.freeze({__proto__:null,JsonPatchError:Pt,_areEquals:Mp,applyOperation:Ou,applyPatch:Dx,applyReducer:uwe,deepClone:owe,getValueByPointer:wv,validate:JG,validator:Av});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var xk=new WeakMap,fwe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),dwe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hwe(e){return xk.get(e)}function gwe(e,t){return e.observers.get(t)}function pwe(e,t){e.observers.delete(t.callback)}function mwe(e,t){t.unobserve()}function ywe(e,t){var n=[],i,r=hwe(e);if(!r)r=new fwe(e),xk.set(e,r);else{var a=gwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=nr(e),t){i.callback=t,i.next=null;var s=function(){tC(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){tC(i),clearTimeout(i.next),pwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new dwe(t,i)),i}function tC(e,t){t===void 0&&(t=!1);var n=xk.get(e.object);Sk(n.value,e.object,e.patches,"",t),e.patches.length&&Dx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Sk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=KA(t),s=KA(e),o=!1,u=s.length-1;u>=0;u--){var f=s[u],d=e[f];if(ZA(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?Sk(d,h,n,i+"/"+hu(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+hu(f),value:nr(d)}),n.push({op:"replace",path:i+"/"+hu(f),value:nr(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+hu(f),value:nr(d)}),n.push({op:"remove",path:i+"/"+hu(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var u=0;u<a.length;u++){var f=a[u];!ZA(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+hu(f),value:nr(t[f])})}}}function vwe(e,t,n){n===void 0&&(n=!1);var i=[];return Sk(e,t,i,"",n),i}var bwe=Object.freeze({__proto__:null,compare:vwe,generate:tC,observe:ywe,unobserve:mwe});Object.assign({},cwe,bwe,{JsonPatchError:KG,deepClone:nr,escapePathComponent:hu,unescapePathComponent:ZG});function xwe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w_,IF;function Swe(){if(IF)return w_;IF=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return w_=e,w_}var A_,qF;function Ek(){if(qF)return A_;qF=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return A_=i=>i?typeof i!="object"?e:i:t,A_}var S1={exports:{}},C_,HF;function _k(){if(HF)return C_;HF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return C_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C_}var M_,GF;function Ox(){return GF||(GF=1,M_=typeof process=="object"&&__&&__.NODE_DEBUG&&/\bsemver\b/i.test(__.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),M_}var YF;function wk(){return YF||(YF=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=_k(),a=Ox();t=e.exports={};const s=t.re=[],o=t.safeRe=[],u=t.src=[],f=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),C=h++;a(S,C,_),d[S]=C,u[C]=_,f[C]=A,s[C]=new RegExp(_,w?"g":void 0),o[C]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),b("FULL",`^${u[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),b("LOOSE",`^${u[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),b("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?(?:${u[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",u[d.COERCE],!0),b("COERCERTLFULL",u[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(S1,S1.exports)),S1.exports}var $_,XF;function Ewe(){if(XF)return $_;XF=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return $_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},$_}var T_,VF;function Ak(){if(VF)return T_;VF=1;const e=Ox(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=_k(),{safeRe:i,safeSrc:r,t:a}=wk(),s=Ek(),{compareIdentifiers:o}=Ewe();class u{constructor(d,h){if(h=s(h),d instanceof u){if(d.loose===!!h.loose&&d.includePrerelease===!!h.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",d,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const p=d.trim().match(h.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const v=+y;if(v>=0&&v<n)return v}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(e("SemVer.compare",this.version,this.options,d),!(d instanceof u)){if(typeof d=="string"&&d===this.version)return 0;d=new u(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof u||(d=new u(d,this.options)),o(this.major,d.major)||o(this.minor,d.minor)||o(this.patch,d.patch)}comparePre(d){if(d instanceof u||(d=new u(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let h=0;do{const p=this.prerelease[h],y=d.prerelease[h];if(e("prerelease compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++h)}compareBuild(d){d instanceof u||(d=new u(d,this.options));let h=0;do{const p=this.build[h],y=d.build[h];if(e("build compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++h)}inc(d,h,p){if(d.startsWith("pre")){if(!h&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const y=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),v=`-${h}`.match(y);if(!v||v[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,p),this.inc("pre",h,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,p),this.inc("pre",h,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(h===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(h){let v=[h,y];p===!1&&(v=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return T_=u,T_}var k_,WF;function Hd(){if(WF)return k_;WF=1;const e=Ak();return k_=(n,i,r)=>new e(n,r).compare(new e(i,r)),k_}var D_,QF;function _we(){if(QF)return D_;QF=1;const e=Hd();return D_=(n,i,r)=>e(n,i,r)===0,D_}var O_,ZF;function wwe(){if(ZF)return O_;ZF=1;const e=Hd();return O_=(n,i,r)=>e(n,i,r)!==0,O_}var R_,KF;function Awe(){if(KF)return R_;KF=1;const e=Hd();return R_=(n,i,r)=>e(n,i,r)>0,R_}var N_,JF;function Cwe(){if(JF)return N_;JF=1;const e=Hd();return N_=(n,i,r)=>e(n,i,r)>=0,N_}var z_,e8;function Mwe(){if(e8)return z_;e8=1;const e=Hd();return z_=(n,i,r)=>e(n,i,r)<0,z_}var F_,t8;function $we(){if(t8)return F_;t8=1;const e=Hd();return F_=(n,i,r)=>e(n,i,r)<=0,F_}var L_,n8;function Twe(){if(n8)return L_;n8=1;const e=_we(),t=wwe(),n=Awe(),i=Cwe(),r=Mwe(),a=$we();return L_=(o,u,f,d)=>{switch(u){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${u}`)}},L_}var U_,i8;function kwe(){if(i8)return U_;i8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new u(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}U_=t;const n=Ek(),{safeRe:i,t:r}=wk(),a=Twe(),s=Ox(),o=Ak(),u=eY();return U_}var B_,r8;function eY(){if(r8)return B_;r8=1;const e=/\s+/g;class t{constructor(F,R){if(R=r(R),F instanceof t)return F.loose===!!R.loose&&F.includePrerelease===!!R.includePrerelease?F:new t(F.raw,R);if(F instanceof a)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const R=this.set[F];for(let P=0;P<R.length;P++)P>0&&(this.formatted+=" "),this.formatted+=R[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const P=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+F,X=i.get(P);if(X)return X;const K=this.options.loose,z=K?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];F=F.replace(z,G(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(u[f.COMPARATORTRIM],d),s("comparator trim",F),F=F.replace(u[f.TILDETRIM],h),s("tilde trim",F),F=F.replace(u[f.CARETTRIM],p),s("caret trim",F);let W=F.split(" ").map(Ee=>w(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>L(Ee,this.options));K&&(W=W.filter(Ee=>(s("loose invalid filter",Ee,this.options),!!Ee.match(u[f.COMPARATORLOOSE])))),s("range list",W);const ne=new Map,se=W.map(Ee=>new a(Ee,this.options));for(const Ee of se){if(b(Ee))return[Ee];ne.set(Ee.value,Ee)}ne.size>1&&ne.has("")&&ne.delete("");const ye=[...ne.values()];return i.set(P,ye),ye}intersects(F,R){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(P=>_(P,R)&&F.set.some(X=>_(X,R)&&P.every(K=>X.every(z=>K.intersects(z,R)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(H(this.set[R],F,this.options))return!0;return!1}}B_=t;const n=Swe(),i=new n,r=Ek(),a=kwe(),s=Ox(),o=Ak(),{safeRe:u,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=wk(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=_k(),b=j=>j.value==="<0.0.0-0",S=j=>j.value==="",_=(j,F)=>{let R=!0;const P=j.slice();let X=P.pop();for(;R&&P.length;)R=P.every(K=>X.intersects(K,F)),X=P.pop();return R},w=(j,F)=>(s("comp",j,F),j=k(j,F),s("caret",j),j=C(j,F),s("tildes",j),j=O(j,F),s("xrange",j),j=B(j,F),s("stars",j),j),A=j=>!j||j.toLowerCase()==="x"||j==="*",C=(j,F)=>j.trim().split(/\s+/).map(R=>M(R,F)).join(" "),M=(j,F)=>{const R=F.loose?u[f.TILDELOOSE]:u[f.TILDE];return j.replace(R,(P,X,K,z,W)=>{s("tilde",j,P,X,K,z,W);let ne;return A(X)?ne="":A(K)?ne=`>=${X}.0.0 <${+X+1}.0.0-0`:A(z)?ne=`>=${X}.${K}.0 <${X}.${+K+1}.0-0`:W?(s("replaceTilde pr",W),ne=`>=${X}.${K}.${z}-${W} <${X}.${+K+1}.0-0`):ne=`>=${X}.${K}.${z} <${X}.${+K+1}.0-0`,s("tilde return",ne),ne})},k=(j,F)=>j.trim().split(/\s+/).map(R=>T(R,F)).join(" "),T=(j,F)=>{s("caret",j,F);const R=F.loose?u[f.CARETLOOSE]:u[f.CARET],P=F.includePrerelease?"-0":"";return j.replace(R,(X,K,z,W,ne)=>{s("caret",j,X,K,z,W,ne);let se;return A(K)?se="":A(z)?se=`>=${K}.0.0${P} <${+K+1}.0.0-0`:A(W)?K==="0"?se=`>=${K}.${z}.0${P} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.0${P} <${+K+1}.0.0-0`:ne?(s("replaceCaret pr",ne),K==="0"?z==="0"?se=`>=${K}.${z}.${W}-${ne} <${K}.${z}.${+W+1}-0`:se=`>=${K}.${z}.${W}-${ne} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.${W}-${ne} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?z==="0"?se=`>=${K}.${z}.${W}${P} <${K}.${z}.${+W+1}-0`:se=`>=${K}.${z}.${W}${P} <${K}.${+z+1}.0-0`:se=`>=${K}.${z}.${W} <${+K+1}.0.0-0`),s("caret return",se),se})},O=(j,F)=>(s("replaceXRanges",j,F),j.split(/\s+/).map(R=>N(R,F)).join(" ")),N=(j,F)=>{j=j.trim();const R=F.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return j.replace(R,(P,X,K,z,W,ne)=>{s("xRange",j,P,X,K,z,W,ne);const se=A(K),ye=se||A(z),Ee=ye||A(W),Ce=Ee;return X==="="&&Ce&&(X=""),ne=F.includePrerelease?"-0":"",se?X===">"||X==="<"?P="<0.0.0-0":P="*":X&&Ce?(ye&&(z=0),W=0,X===">"?(X=">=",ye?(K=+K+1,z=0,W=0):(z=+z+1,W=0)):X==="<="&&(X="<",ye?K=+K+1:z=+z+1),X==="<"&&(ne="-0"),P=`${X+K}.${z}.${W}${ne}`):ye?P=`>=${K}.0.0${ne} <${+K+1}.0.0-0`:Ee&&(P=`>=${K}.${z}.0${ne} <${K}.${+z+1}.0-0`),s("xRange return",P),P})},B=(j,F)=>(s("replaceStars",j,F),j.trim().replace(u[f.STAR],"")),L=(j,F)=>(s("replaceGTE0",j,F),j.trim().replace(u[F.includePrerelease?f.GTE0PRE:f.GTE0],"")),G=j=>(F,R,P,X,K,z,W,ne,se,ye,Ee,Ce)=>(A(P)?R="":A(X)?R=`>=${P}.0.0${j?"-0":""}`:A(K)?R=`>=${P}.${X}.0${j?"-0":""}`:z?R=`>=${R}`:R=`>=${R}${j?"-0":""}`,A(se)?ne="":A(ye)?ne=`<${+se+1}.0.0-0`:A(Ee)?ne=`<${se}.${+ye+1}.0-0`:Ce?ne=`<=${se}.${ye}.${Ee}-${Ce}`:j?ne=`<${se}.${ye}.${+Ee+1}-0`:ne=`<=${ne}`,`${R} ${ne}`.trim()),H=(j,F,R)=>{for(let P=0;P<j.length;P++)if(!j[P].test(F))return!1;if(F.prerelease.length&&!R.includePrerelease){for(let P=0;P<j.length;P++)if(s(j[P].semver),j[P].semver!==a.ANY&&j[P].semver.prerelease.length>0){const X=j[P].semver;if(X.major===F.major&&X.minor===F.minor&&X.patch===F.patch)return!0}return!1}return!0};return B_}var j_,a8;function Dwe(){if(a8)return j_;a8=1;const e=eY();return j_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},j_}var Owe=Dwe(),tY=xwe(Owe);function Rwe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function u(){s<=0||(i.postMessage(n,a),setTimeout(u,r),s-=1)}setTimeout(u,r)}var Nwe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function nY(e,...t){for(const n of t)zwe(e,n);return e}function zwe(e,t){for(const n of Object.keys(t))xd(e,n,t[n],!0)}const Ma=xme;let $p=u_e;const s8=typeof window<"u"?window:void 0;$p===void 0&&s8?.vl?.compile&&($p=s8.vl);const Fwe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Lwe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Lg={vega:"Vega","vega-lite":"Vega-Lite"},Cv={vega:Ma.version,"vega-lite":$p?$p.version:"not available"},Uwe={vega:e=>e,"vega-lite":(e,t)=>$p.compile(e,{config:t}).spec},Bwe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,jwe="chart-wrapper";function Pwe(e){return typeof e=="function"}function o8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Lg[i]} JSON Source`}function Iwe(e,t){if(e.$schema){const n=HG(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Lg[n.library]}, but mode argument sets ${Lg[t]??t}.`);const i=n.library;return tY(Cv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Lg[i]} ${n.version}, but the current version of ${Lg[i]} is v${Cv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function iY(e){return!!(e&&"load"in e)}function l8(e){return iY(e)?e:Ma.loader(e)}function qwe(e){const t=e.usermeta?.embedOptions??{};return ve(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Hwe(e,t,n={}){let i,r;ve(t)?(r=l8(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=qwe(i),s=a.loader;(!r||s)&&(r=l8(n.loader??s));const o=await u8(a,r),u=await u8(n,r),f={...nY(u,o),config:bd(u.config??{},o.config??{})};return await Ywe(e,i,f,r)}async function u8(e,t){const n=ve(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ve(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function Gwe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ywe(e,t,n={},i){const r=n.theme?bd(V_e[n.theme],n.config??{}):n.config,a=Sl(n.actions)?n.actions:nY({},Fwe,n.actions??{}),s={...Lwe,...n.i18n},o=n.renderer??"svg",u=n.logLevel??Ma.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:k,rootContainer:T}=Gwe(d);if(!k.getElementById(M)){const O=document.createElement("style");O.id=M,O.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Nwe.toString():n.defaultStyle,T.appendChild(O)}}const h=Iwe(t,n.mode);let p=Uwe[h](t,r);if(h==="vega-lite"&&p.$schema){const M=HG(p.$schema);tY(Cv.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Cv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(jwe),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):Dx(p,v,!0,!1).newDocument),n.formatLocale&&Ma.formatLocale(n.formatLocale),n.timeFormatLocale&&Ma.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const k=n.expressionFunctions[M];"fn"in k?Ma.expressionFunction(M,k.fn,k.visitor):k instanceof Function&&Ma.expressionFunction(M,k)}const{ast:b}=n,S=Ma.parse(p,h==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Ma.View)(S,{loader:i,logLevel:u,renderer:o,...b?{expr:Ma.expressionInterpreter??n.expr??kme}:{}});if(_.addSignalListener("autosize",(M,k)=>{const{type:T}=k;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:k}=n,T=M&&!iY(M)?M?.baseURL:void 0,O=Pwe(k)?k:new rwe({baseURL:T,...k===!0?{}:k}).call;_.tooltip(O)}let{hover:w}=n;if(w===void 0&&(w=h==="vega"),w){const{hoverSet:M,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(M,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const O=document.createElement("summary");O.innerHTML=Bwe,T.append(O),A=N=>{T.contains(N.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const O=s[`${T.toUpperCase()}_ACTION`],N=document.createElement("a"),B=be(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;N.text=O,N.href="#",N.target="_blank",N.download=`${f}.${T}`,N.addEventListener("mousedown",async function(L){L.preventDefault();const G=await _.toImageURL(T,B);this.href=G}),k.append(N)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(O){o8(ZS(t),n.sourceHeader??"",n.sourceFooter??"",h),O.preventDefault()}),k.append(T)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(O){o8(ZS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),O.preventDefault()}),k.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",O=document.createElement("a");O.text=s.EDITOR_ACTION,O.href="#",O.addEventListener("click",function(N){Rwe(window,T,{config:r,mode:v?"vega":h,renderer:o,spec:ZS(v?p:t)}),N.preventDefault()}),k.append(O)}}function C(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:C,embedOptions:n}}const Xwe="https://vega.github.io/schema/vega/v6.json",Vwe="A node-link diagram with force-directed layout, depicting character co-occurrence in the novel Les Misérables.",Wwe=700,Qwe=500,Zwe=0,Kwe="none",Jwe=[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{name:"nodeRadius",value:22},{name:"nodeCharge",value:-30},{name:"linkDistance",value:100},{name:"static",value:!1},{name:"scoreThreshold",value:0,bind:{input:"range",min:0,max:30,step:1,name:"Score Threshold:"}},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"symbol:pointerout[!event.buttons], window:pointerup",update:"false"},{events:"symbol:pointerover",update:"fix || true"},{events:"[symbol:pointerdown, window:pointerup] > window:pointermove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"symbol:pointerover",update:"fix === true ? item() : node"}]},{name:"restart",value:0,on:[{events:{signal:"fix"},update:"restart + 1"},{events:{signal:"scoreThreshold"},update:"restart + 1"}]},{name:"clickedLink",value:null,on:[{events:"path:click",update:"item()"}]}],eAe=[],tAe=[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"category10"}},{name:"linkColor",type:"linear",domain:[0,10,24,30],range:["red","red","green","green"]}],nAe=[{name:"nodes",type:"symbol",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{signal:"datum.group === 0 ? '#808080' : scale('color', datum.group)"},stroke:{value:"white"}},update:{size:{signal:"2 * nodeRadius * nodeRadius"},cursor:{value:"pointer"},tooltip:{signal:"datum"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},static:{signal:"static"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide",radius:{signal:"nodeRadius"}},{force:"nbody",strength:{signal:"nodeCharge"}},{force:"link",links:"link-data",distance:{signal:"linkDistance"}}]}]},{type:"path",from:{data:"link-data"},interactive:!0,encode:{enter:{stroke:{value:"#ccc"},strokeWidth:{value:3}},update:{stroke:{scale:"linkColor",field:"value"},tooltip:{signal:"datum"}},hover:{stroke:{value:"darkgreen"}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]},{type:"text",from:{data:"nodes"},zindex:2,encode:{enter:{align:{value:"center"},baseline:{value:"middle"},fontSize:{value:12},fontWeight:{value:"bold"},fill:{value:"white"},text:{field:"datum.id"},x:{field:"x"},y:{field:"y"}},update:{x:{field:"x"},y:{field:"y"}}}}],iAe={$schema:Xwe,description:Vwe,width:Wwe,height:Qwe,padding:Zwe,autosize:Kwe,signals:Jwe,data:eAe,scales:tAe,marks:nAe};function rAe({sourceRecord:e,candidates:t,selectedMatchIds:n,onEdgeClick:i}){const r=Os.useRef(null),a=Os.useRef(null);return Os.useEffect(()=>{if(!e||!t||!r.current)return;const s=[e,...t],o=s.map(h=>({...h,group:h.id===e.id||n.has(h.id)?1:0})),u=[];for(let h=0;h<s.length;h++)for(let p=h+1;p<s.length;p++){const y=d8(s[h],s[p]);u.push({source:h,target:p,value:y})}const f=u.filter(h=>h.source===0),d={...iAe,data:[{name:"node-data",values:o},{name:"links-raw",values:f},{name:"link-data",source:"links-raw",transform:[{type:"filter",expr:"datum.value >= scoreThreshold"}]}]};return Hwe(r.current,d,{actions:!0}).then(h=>{a.current=h.view,i&&a.current.addSignalListener("clickedLink",(p,y)=>{i(y)}),document.querySelectorAll(".vg-tooltip").forEach(p=>p.parentNode.removeChild(p))}).catch(console.error),()=>{if(a.current&&i)try{a.current.removeSignalListener("clickedLink",i)}catch{}}},[e,t,n,i]),le.jsxs("div",{className:"panel cluster-viewer-panel",children:[le.jsx("h2",{children:"Cluster Relationship Viewer"}),le.jsx("div",{ref:r})]})}function aAe(){const[e]=Os.useState(c8),[t]=Os.useState(NV),[n,i]=Os.useState(new Set),[r,a]=Os.useState(null),[s,o]=Os.useState(null),u=()=>Math.random().toString(36).substring(2,8),f=p=>{const y=new Set(n);y.has(p)?y.delete(p):y.add(p),y.size>0&&!s&&o(u()),y.size===0&&o(null),i(y)},d=p=>{r&&r.id===p.id?a(null):a(p)},h=p=>{if(p&&p.datum){const{source:y,target:v}=p.datum,b=t.find(S=>S.id===v.id||S.id===y.id);b&&b.id!==e.id&&a(b)}};return le.jsxs("div",{className:"app-container",children:[le.jsxs("div",{className:"panel",children:[le.jsx("h2",{children:"README"}),le.jsx("p",{children:"This is a protype app for how a user may manually find a match."}),le.jsx("p",{children:"It could be used e.g. if a user knows a prison record must have a delius record, but the automated matcher has not found it"}),le.jsx("p",{children:"I've assumed that the source record has already been somehow selected by the user"})]}),le.jsx(zV,{sourceRecord:e}),le.jsx(UV,{candidates:t,selectedMatchIds:n,onToggleMatch:f,onSetComparison:d,comparisonCandidateId:r?.id}),le.jsxs("div",{className:"comments-panel panel",children:[le.jsx("h2",{children:"Comments"}),le.jsx("textarea",{placeholder:"Enter reason for decision...",rows:"5",style:{width:"100%",padding:"10px",boxSizing:"border-box"}})]}),le.jsx(BV,{sourceRecord:e,comparisonCandidate:r}),le.jsx(jV,{sourceRecord:e,candidates:t,selectedMatchIds:n,matchGroupId:s}),le.jsx(rAe,{sourceRecord:e,candidates:t,selectedMatchIds:n,onEdgeClick:h}),le.jsx("button",{className:"done-button",onClick:()=>console.log("Final Selection:",{matchGroupId:s,matchedIds:Array.from(n)}),children:"Done"})]})}RV.createRoot(document.getElementById("root")).render(le.jsx(Os.StrictMode,{children:le.jsx(aAe,{})}));</script>
    <style rel="stylesheet" crossorigin>:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}body{font-family:sans-serif;margin:0}.app-container{padding:20px;display:flex;flex-direction:column;gap:20px}.app-container{display:flex;flex-direction:column;gap:20px;height:100vh}.panel{border:1px solid #ccc;padding:15px;border-radius:5px;width:100%;box-sizing:border-box}.done-button{padding:10px 20px;font-size:16px;cursor:pointer}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}tr.selected{background-color:#e6f7ff}.debug-output-panel{border:1px solid #e0e0e0;padding:1rem;color:#888;background-color:#f8f8f8}.debug-output-panel table,.debug-output-panel th,.debug-output-panel td{border:1px solid #e0e0e0}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
