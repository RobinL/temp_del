<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function JC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jw={exports:{}},Vg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D6;function TZ(){if(D6)return Vg;D6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Vg.Fragment=t,Vg.jsx=n,Vg.jsxs=n,Vg}var k6;function DZ(){return k6||(k6=1,jw.exports=TZ()),jw.exports}var K=DZ(),Pw={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O6;function kZ(){if(O6)return Le;O6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=h&&F[h]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function S(F,V,ae){this.props=F,this.context=V,this.refs=b,this.updater=ae||y}S.prototype.isReactComponent={},S.prototype.setState=function(F,V){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,V,"setState")},S.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function w(){}w.prototype=S.prototype;function _(F,V,ae){this.props=F,this.context=V,this.refs=b,this.updater=ae||y}var A=_.prototype=new w;A.constructor=_,v(A,S.prototype),A.isPureReactComponent=!0;var $=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function T(F,V,ae,se,de,be){return ae=be.ref,{$$typeof:e,type:F,key:V,ref:ae!==void 0?ae:null,props:be}}function O(F,V){return T(F.type,V,void 0,void 0,void 0,F.props)}function R(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function L(F){var V={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ae){return V[ae]})}var z=/\/+/g;function H(F,V){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):V.toString(36)}function U(){}function P(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(U,U):(F.status="pending",F.then(function(V){F.status==="pending"&&(F.status="fulfilled",F.value=V)},function(V){F.status==="pending"&&(F.status="rejected",F.reason=V)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function B(F,V,ae,se,de){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var Se=!1;if(F===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(F.$$typeof){case e:case t:Se=!0;break;case d:return Se=F._init,B(Se(F._payload),V,ae,se,de)}}if(Se)return de=de(F),Se=se===""?"."+H(F,0):se,$(de)?(ae="",Se!=null&&(ae=Se.replace(z,"$&/")+"/"),B(de,V,ae,"",function(ge){return ge})):de!=null&&(R(de)&&(de=O(de,ae+(de.key==null||F&&F.key===de.key?"":(""+de.key).replace(z,"$&/")+"/")+Se)),V.push(de)),1;Se=0;var It=se===""?".":se+":";if($(F))for(var Qe=0;Qe<F.length;Qe++)se=F[Qe],be=It+H(se,Qe),Se+=B(se,V,ae,be,de);else if(Qe=p(F),typeof Qe=="function")for(F=Qe.call(F),Qe=0;!(se=F.next()).done;)se=se.value,be=It+H(se,Qe++),Se+=B(se,V,ae,be,de);else if(be==="object"){if(typeof F.then=="function")return B(P(F),V,ae,se,de);throw V=String(F),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Se}function N(F,V,ae){if(F==null)return F;var se=[],de=0;return B(F,se,"","",function(be){return V.call(ae,be,de++)}),se}function q(F){if(F._status===-1){var V=F._result;V=V(),V.then(function(ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=ae)},function(ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=ae)}),F._status===-1&&(F._status=0,F._result=V)}if(F._status===1)return F._result.default;throw F._result}var Y=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function ee(){}return Le.Children={map:N,forEach:function(F,V,ae){N(F,function(){V.apply(this,arguments)},ae)},count:function(F){var V=0;return N(F,function(){V++}),V},toArray:function(F){return N(F,function(V){return V})||[]},only:function(F){if(!R(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Le.Component=S,Le.Fragment=n,Le.Profiler=r,Le.PureComponent=_,Le.StrictMode=i,Le.Suspense=l,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return C.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cloneElement=function(F,V,ae){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var se=v({},F.props),de=F.key,be=void 0;if(V!=null)for(Se in V.ref!==void 0&&(be=void 0),V.key!==void 0&&(de=""+V.key),V)!D.call(V,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&V.ref===void 0||(se[Se]=V[Se]);var Se=arguments.length-2;if(Se===1)se.children=ae;else if(1<Se){for(var It=Array(Se),Qe=0;Qe<Se;Qe++)It[Qe]=arguments[Qe+2];se.children=It}return T(F.type,de,void 0,void 0,be,se)},Le.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Le.createElement=function(F,V,ae){var se,de={},be=null;if(V!=null)for(se in V.key!==void 0&&(be=""+V.key),V)D.call(V,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(de[se]=V[se]);var Se=arguments.length-2;if(Se===1)de.children=ae;else if(1<Se){for(var It=Array(Se),Qe=0;Qe<Se;Qe++)It[Qe]=arguments[Qe+2];de.children=It}if(F&&F.defaultProps)for(se in Se=F.defaultProps,Se)de[se]===void 0&&(de[se]=Se[se]);return T(F,be,void 0,void 0,null,de)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:o,render:F}},Le.isValidElement=R,Le.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:q}},Le.memo=function(F,V){return{$$typeof:c,type:F,compare:V===void 0?null:V}},Le.startTransition=function(F){var V=C.T,ae={};C.T=ae;try{var se=F(),de=C.S;de!==null&&de(ae,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ee,Y)}catch(be){Y(be)}finally{C.T=V}},Le.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Le.use=function(F){return C.H.use(F)},Le.useActionState=function(F,V,ae){return C.H.useActionState(F,V,ae)},Le.useCallback=function(F,V){return C.H.useCallback(F,V)},Le.useContext=function(F){return C.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,V){return C.H.useDeferredValue(F,V)},Le.useEffect=function(F,V,ae){var se=C.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(F,V)},Le.useId=function(){return C.H.useId()},Le.useImperativeHandle=function(F,V,ae){return C.H.useImperativeHandle(F,V,ae)},Le.useInsertionEffect=function(F,V){return C.H.useInsertionEffect(F,V)},Le.useLayoutEffect=function(F,V){return C.H.useLayoutEffect(F,V)},Le.useMemo=function(F,V){return C.H.useMemo(F,V)},Le.useOptimistic=function(F,V){return C.H.useOptimistic(F,V)},Le.useReducer=function(F,V,ae){return C.H.useReducer(F,V,ae)},Le.useRef=function(F){return C.H.useRef(F)},Le.useState=function(F){return C.H.useState(F)},Le.useSyncExternalStore=function(F,V,ae){return C.H.useSyncExternalStore(F,V,ae)},Le.useTransition=function(){return C.H.useTransition()},Le.version="19.1.0",Le}var N6;function eM(){return N6||(N6=1,Pw.exports=kZ()),Pw.exports}var Zn=eM();const OZ=JC(Zn);var Iw={exports:{}},Wg={},qw={exports:{}},Hw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R6;function NZ(){return R6||(R6=1,function(e){function t(N,q){var Y=N.length;N.push(q);e:for(;0<Y;){var ee=Y-1>>>1,F=N[ee];if(0<r(F,q))N[ee]=q,N[Y]=F,Y=ee;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var q=N[0],Y=N.pop();if(Y!==q){N[0]=Y;e:for(var ee=0,F=N.length,V=F>>>1;ee<V;){var ae=2*(ee+1)-1,se=N[ae],de=ae+1,be=N[de];if(0>r(se,Y))de<F&&0>r(be,se)?(N[ee]=be,N[de]=Y,ee=de):(N[ee]=se,N[ae]=Y,ee=ae);else if(de<F&&0>r(be,Y))N[ee]=be,N[de]=Y,ee=de;else break e}}return q}function r(N,q){var Y=N.sortIndex-q.sortIndex;return Y!==0?Y:N.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(N){for(var q=n(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=N)i(c),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(c)}}function C(N){if(b=!1,$(N),!v)if(n(l)!==null)v=!0,D||(D=!0,H());else{var q=n(c);q!==null&&B(C,q.startTime-N)}}var D=!1,T=-1,O=5,R=-1;function L(){return S?!0:!(e.unstable_now()-R<O)}function z(){if(S=!1,D){var N=e.unstable_now();R=N;var q=!0;try{e:{v=!1,b&&(b=!1,_(T),T=-1),y=!0;var Y=p;try{t:{for($(N),h=n(l);h!==null&&!(h.expirationTime>N&&L());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,p=h.priorityLevel;var F=ee(h.expirationTime<=N);if(N=e.unstable_now(),typeof F=="function"){h.callback=F,$(N),q=!0;break t}h===n(l)&&i(l),$(N)}else i(l);h=n(l)}if(h!==null)q=!0;else{var V=n(c);V!==null&&B(C,V.startTime-N),q=!1}}break e}finally{h=null,p=Y,y=!1}q=void 0}}finally{q?H():D=!1}}}var H;if(typeof A=="function")H=function(){A(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=z,H=function(){P.postMessage(null)}}else H=function(){w(z,0)};function B(N,q){T=w(function(){N(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Y=p;p=q;try{return N()}finally{p=Y}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(N,q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=p;p=N;try{return q()}finally{p=Y}},e.unstable_scheduleCallback=function(N,q,Y){var ee=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ee+Y:ee):Y=ee,N){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Y+F,N={id:d++,callback:q,priorityLevel:N,startTime:Y,expirationTime:F,sortIndex:-1},Y>ee?(N.sortIndex=Y,t(c,N),n(l)===null&&N===n(c)&&(b?(_(T),T=-1):b=!0,B(C,Y-ee))):(N.sortIndex=F,t(l,N),v||y||(v=!0,D||(D=!0,H()))),N},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(N){var q=p;return function(){var Y=p;p=q;try{return N.apply(this,arguments)}finally{p=Y}}}}(Hw)),Hw}var z6;function RZ(){return z6||(z6=1,qw.exports=NZ()),qw.exports}var Gw={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F6;function zZ(){if(F6)return Yn;F6=1;var e=eM();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return a(l,c,null,d)},Yn.flushSync=function(l){var c=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=c,i.p=d,i.d.f()}},Yn.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(l,c))},Yn.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Yn.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?i.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Yn.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(l)},Yn.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);i.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Yn.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);i.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(l)},Yn.requestFormReset=function(l){i.d.r(l)},Yn.unstable_batchedUpdates=function(l,c){return l(c)},Yn.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},Yn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Yn.version="19.1.0",Yn}var L6;function FZ(){if(L6)return Gw.exports;L6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gw.exports=zZ(),Gw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U6;function LZ(){if(U6)return Wg;U6=1;var e=RZ(),t=eM(),n=FZ();function i(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,g=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(g=f.return),u=f.return;while(u)}return f.tag===3?g:null}function s(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(i(188));return f!==u?null:u}for(var g=u,m=f;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),u;if(E===m)return o(x),f;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var M=!1,k=x.child;k;){if(k===g){M=!0,g=x,m=E;break}if(k===m){M=!0,m=x,g=E;break}k=k.sibling}if(!M){for(k=E.child;k;){if(k===g){M=!0,g=E,m=x;break}if(k===m){M=!0,m=E,g=x;break}k=k.sibling}if(!M)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function H(u){return u===null||typeof u!="object"?null:(u=z&&u[z]||u["@@iterator"],typeof u=="function"?u:null)}var U=Symbol.for("react.client.reference");function P(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===U?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList";case R:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case A:return(u.displayName||"Context")+".Provider";case _:return(u._context.displayName||"Context")+".Consumer";case $:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return f=u.displayName||null,f!==null?f:P(u.type)||"Memo";case O:f=u._payload,u=u._init;try{return P(u(f))}catch{}}return null}var B=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ee=[],F=-1;function V(u){return{current:u}}function ae(u){0>F||(u.current=ee[F],ee[F]=null,F--)}function se(u,f){F++,ee[F]=u.current,u.current=f}var de=V(null),be=V(null),Se=V(null),It=V(null);function Qe(u,f){switch(se(Se,f),se(be,u),se(de,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?r6(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=r6(f),u=a6(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ae(de),se(de,u)}function ge(){ae(de),ae(be),ae(Se)}function ke(u){u.memoizedState!==null&&se(It,u);var f=de.current,g=a6(f,u.type);f!==g&&(se(be,u),se(de,g))}function ze(u){be.current===u&&(ae(de),ae(be)),It.current===u&&(ae(It),qg._currentValue=Y)}var le=Object.prototype.hasOwnProperty,qt=e.unstable_scheduleCallback,Ze=e.unstable_cancelCallback,Zt=e.unstable_shouldYield,gn=e.unstable_requestPaint,Kt=e.unstable_now,Im=e.unstable_getCurrentPriorityLevel,UO=e.unstable_ImmediatePriority,BO=e.unstable_UserBlockingPriority,qm=e.unstable_NormalPriority,cW=e.unstable_LowPriority,jO=e.unstable_IdlePriority,fW=e.log,dW=e.unstable_setDisableYieldValue,Zh=null,qi=null;function Do(u){if(typeof fW=="function"&&dW(u),qi&&typeof qi.setStrictMode=="function")try{qi.setStrictMode(Zh,u)}catch{}}var Hi=Math.clz32?Math.clz32:pW,hW=Math.log,gW=Math.LN2;function pW(u){return u>>>=0,u===0?32:31-(hW(u)/gW|0)|0}var Hm=256,Gm=4194304;function rl(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Ym(u,f,g){var m=u.pendingLanes;if(m===0)return 0;var x=0,E=u.suspendedLanes,M=u.pingedLanes;u=u.warmLanes;var k=m&134217727;return k!==0?(m=k&~E,m!==0?x=rl(m):(M&=k,M!==0?x=rl(M):g||(g=k&~u,g!==0&&(x=rl(g))))):(k=m&~E,k!==0?x=rl(k):M!==0?x=rl(M):g||(g=m&~u,g!==0&&(x=rl(g)))),x===0?0:f!==0&&f!==x&&(f&E)===0&&(E=x&-x,g=f&-f,E>=g||E===32&&(g&4194048)!==0)?f:x}function Kh(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function mW(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PO(){var u=Hm;return Hm<<=1,(Hm&4194048)===0&&(Hm=256),u}function IO(){var u=Gm;return Gm<<=1,(Gm&62914560)===0&&(Gm=4194304),u}function TS(u){for(var f=[],g=0;31>g;g++)f.push(u);return f}function Jh(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function yW(u,f,g,m,x,E){var M=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var k=u.entanglements,j=u.expirationTimes,W=u.hiddenUpdates;for(g=M&~g;0<g;){var ne=31-Hi(g),re=1<<ne;k[ne]=0,j[ne]=-1;var Q=W[ne];if(Q!==null)for(W[ne]=null,ne=0;ne<Q.length;ne++){var Z=Q[ne];Z!==null&&(Z.lane&=-536870913)}g&=~re}m!==0&&qO(u,m,0),E!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=E&~(M&~f))}function qO(u,f,g){u.pendingLanes|=f,u.suspendedLanes&=~f;var m=31-Hi(f);u.entangledLanes|=f,u.entanglements[m]=u.entanglements[m]|1073741824|g&4194090}function HO(u,f){var g=u.entangledLanes|=f;for(u=u.entanglements;g;){var m=31-Hi(g),x=1<<m;x&f|u[m]&f&&(u[m]|=f),g&=~x}}function DS(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function kS(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function GO(){var u=q.p;return u!==0?u:(u=window.event,u===void 0?32:_6(u.type))}function vW(u,f){var g=q.p;try{return q.p=u,f()}finally{q.p=g}}var ko=Math.random().toString(36).slice(2),Hn="__reactFiber$"+ko,_i="__reactProps$"+ko,Jc="__reactContainer$"+ko,OS="__reactEvents$"+ko,bW="__reactListeners$"+ko,xW="__reactHandles$"+ko,YO="__reactResources$"+ko,eg="__reactMarker$"+ko;function NS(u){delete u[Hn],delete u[_i],delete u[OS],delete u[bW],delete u[xW]}function ef(u){var f=u[Hn];if(f)return f;for(var g=u.parentNode;g;){if(f=g[Jc]||g[Hn]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(u=l6(u);u!==null;){if(g=u[Hn])return g;u=l6(u)}return f}u=g,g=u.parentNode}return null}function tf(u){if(u=u[Hn]||u[Jc]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function tg(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(i(33))}function nf(u){var f=u[YO];return f||(f=u[YO]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function pn(u){u[eg]=!0}var XO=new Set,VO={};function al(u,f){rf(u,f),rf(u+"Capture",f)}function rf(u,f){for(VO[u]=f,u=0;u<f.length;u++)XO.add(f[u])}var SW=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),WO={},QO={};function EW(u){return le.call(QO,u)?!0:le.call(WO,u)?!1:SW.test(u)?QO[u]=!0:(WO[u]=!0,!1)}function Xm(u,f,g){if(EW(f))if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var m=f.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+g)}}function Vm(u,f,g){if(g===null)u.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+g)}}function bs(u,f,g,m){if(m===null)u.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(f,g,""+m)}}var RS,ZO;function af(u){if(RS===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);RS=f&&f[1]||"",ZO=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+RS+u+ZO}var zS=!1;function FS(u,f){if(!u||zS)return"";zS=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(f){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Q=Z}Reflect.construct(u,[],re)}else{try{re.call()}catch(Z){Q=Z}u.call(re.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(re=u())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),M=E[0],k=E[1];if(M&&k){var j=M.split(`
`),W=k.split(`
`);for(x=m=0;m<j.length&&!j[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===j.length||x===W.length)for(m=j.length-1,x=W.length-1;1<=m&&0<=x&&j[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(j[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||j[m]!==W[x]){var ne=`
`+j[m].replace(" at new "," at ");return u.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",u.displayName)),ne}while(1<=m&&0<=x);break}}}finally{zS=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?af(g):""}function wW(u){switch(u.tag){case 26:case 27:case 5:return af(u.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 15:return FS(u.type,!1);case 11:return FS(u.type.render,!1);case 1:return FS(u.type,!0);case 31:return af("Activity");default:return""}}function KO(u){try{var f="";do f+=wW(u),u=u.return;while(u);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function gr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function JO(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function _W(u){var f=JO(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),m=""+u[f];if(!u.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return x.call(this)},set:function(M){m=""+M,E.call(this,M)}}),Object.defineProperty(u,f,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Wm(u){u._valueTracker||(u._valueTracker=_W(u))}function eN(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var g=f.getValue(),m="";return u&&(m=JO(u)?u.checked?"true":"false":u.value),u=m,u!==g?(f.setValue(u),!0):!1}function Qm(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var AW=/[\n"\\]/g;function pr(u){return u.replace(AW,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function LS(u,f,g,m,x,E,M,k){u.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?u.type=M:u.removeAttribute("type"),f!=null?M==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+gr(f)):u.value!==""+gr(f)&&(u.value=""+gr(f)):M!=="submit"&&M!=="reset"||u.removeAttribute("value"),f!=null?US(u,M,gr(f)):g!=null?US(u,M,gr(g)):m!=null&&u.removeAttribute("value"),x==null&&E!=null&&(u.defaultChecked=!!E),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?u.name=""+gr(k):u.removeAttribute("name")}function tN(u,f,g,m,x,E,M,k){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),f!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||f!=null))return;g=g!=null?""+gr(g):"",f=f!=null?""+gr(f):g,k||f===u.value||(u.value=f),u.defaultValue=f}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=k?u.checked:!!m,u.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(u.name=M)}function US(u,f,g){f==="number"&&Qm(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function sf(u,f,g,m){if(u=u.options,f){f={};for(var x=0;x<g.length;x++)f["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=f.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&m&&(u[g].defaultSelected=!0)}else{for(g=""+gr(g),f=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}f!==null||u[x].disabled||(f=u[x])}f!==null&&(f.selected=!0)}}function nN(u,f,g){if(f!=null&&(f=""+gr(f),f!==u.value&&(u.value=f),g==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=g!=null?""+gr(g):""}function iN(u,f,g,m){if(f==null){if(m!=null){if(g!=null)throw Error(i(92));if(B(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),f=g}g=gr(f),u.defaultValue=g,m=u.textContent,m===g&&m!==""&&m!==null&&(u.value=m)}function of(u,f){if(f){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=f;return}}u.textContent=f}var $W=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rN(u,f,g){var m=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":m?u.setProperty(f,g):typeof g!="number"||g===0||$W.has(f)?f==="float"?u.cssFloat=g:u[f]=(""+g).trim():u[f]=g+"px"}function aN(u,f,g){if(f!=null&&typeof f!="object")throw Error(i(62));if(u=u.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||f!=null&&f.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in f)m=f[x],f.hasOwnProperty(x)&&g[x]!==m&&rN(u,x,m)}else for(var E in f)f.hasOwnProperty(E)&&rN(u,E,f[E])}function BS(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CW=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MW=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zm(u){return MW.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var jS=null;function PS(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var uf=null,lf=null;function sN(u){var f=tf(u);if(f&&(u=f.stateNode)){var g=u[_i]||null;e:switch(u=f.stateNode,f.type){case"input":if(LS(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+pr(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var m=g[f];if(m!==u&&m.form===u.form){var x=m[_i]||null;if(!x)throw Error(i(90));LS(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(f=0;f<g.length;f++)m=g[f],m.form===u.form&&eN(m)}break e;case"textarea":nN(u,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&sf(u,!!g.multiple,f,!1)}}}var IS=!1;function oN(u,f,g){if(IS)return u(f,g);IS=!0;try{var m=u(f);return m}finally{if(IS=!1,(uf!==null||lf!==null)&&(F1(),uf&&(f=uf,u=lf,lf=uf=null,sN(f),u)))for(f=0;f<u.length;f++)sN(u[f])}}function ng(u,f){var g=u.stateNode;if(g===null)return null;var m=g[_i]||null;if(m===null)return null;g=m[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,f,typeof g));return g}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qS=!1;if(xs)try{var ig={};Object.defineProperty(ig,"passive",{get:function(){qS=!0}}),window.addEventListener("test",ig,ig),window.removeEventListener("test",ig,ig)}catch{qS=!1}var Oo=null,HS=null,Km=null;function uN(){if(Km)return Km;var u,f=HS,g=f.length,m,x="value"in Oo?Oo.value:Oo.textContent,E=x.length;for(u=0;u<g&&f[u]===x[u];u++);var M=g-u;for(m=1;m<=M&&f[g-m]===x[E-m];m++);return Km=x.slice(u,1<m?1-m:void 0)}function Jm(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function e1(){return!0}function lN(){return!1}function Ai(u){function f(g,m,x,E,M){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var k in u)u.hasOwnProperty(k)&&(g=u[k],this[k]=g?g(E):E[k]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?e1:lN,this.isPropagationStopped=lN,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=e1)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=e1)},persist:function(){},isPersistent:e1}),f}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t1=Ai(sl),rg=d({},sl,{view:0,detail:0}),TW=Ai(rg),GS,YS,ag,n1=d({},rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VS,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ag&&(ag&&u.type==="mousemove"?(GS=u.screenX-ag.screenX,YS=u.screenY-ag.screenY):YS=GS=0,ag=u),GS)},movementY:function(u){return"movementY"in u?u.movementY:YS}}),cN=Ai(n1),DW=d({},n1,{dataTransfer:0}),kW=Ai(DW),OW=d({},rg,{relatedTarget:0}),XS=Ai(OW),NW=d({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),RW=Ai(NW),zW=d({},sl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),FW=Ai(zW),LW=d({},sl,{data:0}),fN=Ai(LW),UW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PW(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=jW[u])?!!f[u]:!1}function VS(){return PW}var IW=d({},rg,{key:function(u){if(u.key){var f=UW[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Jm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?BW[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VS,charCode:function(u){return u.type==="keypress"?Jm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Jm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),qW=Ai(IW),HW=d({},n1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dN=Ai(HW),GW=d({},rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VS}),YW=Ai(GW),XW=d({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),VW=Ai(XW),WW=d({},n1,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),QW=Ai(WW),ZW=d({},sl,{newState:0,oldState:0}),KW=Ai(ZW),JW=[9,13,27,32],WS=xs&&"CompositionEvent"in window,sg=null;xs&&"documentMode"in document&&(sg=document.documentMode);var eQ=xs&&"TextEvent"in window&&!sg,hN=xs&&(!WS||sg&&8<sg&&11>=sg),gN=" ",pN=!1;function mN(u,f){switch(u){case"keyup":return JW.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yN(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var cf=!1;function tQ(u,f){switch(u){case"compositionend":return yN(f);case"keypress":return f.which!==32?null:(pN=!0,gN);case"textInput":return u=f.data,u===gN&&pN?null:u;default:return null}}function nQ(u,f){if(cf)return u==="compositionend"||!WS&&mN(u,f)?(u=uN(),Km=HS=Oo=null,cf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return hN&&f.locale!=="ko"?null:f.data;default:return null}}var iQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vN(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!iQ[u.type]:f==="textarea"}function bN(u,f,g,m){uf?lf?lf.push(m):lf=[m]:uf=m,f=I1(f,"onChange"),0<f.length&&(g=new t1("onChange","change",null,g,m),u.push({event:g,listeners:f}))}var og=null,ug=null;function rQ(u){J5(u,0)}function i1(u){var f=tg(u);if(eN(f))return u}function xN(u,f){if(u==="change")return f}var SN=!1;if(xs){var QS;if(xs){var ZS="oninput"in document;if(!ZS){var EN=document.createElement("div");EN.setAttribute("oninput","return;"),ZS=typeof EN.oninput=="function"}QS=ZS}else QS=!1;SN=QS&&(!document.documentMode||9<document.documentMode)}function wN(){og&&(og.detachEvent("onpropertychange",_N),ug=og=null)}function _N(u){if(u.propertyName==="value"&&i1(ug)){var f=[];bN(f,ug,u,PS(u)),oN(rQ,f)}}function aQ(u,f,g){u==="focusin"?(wN(),og=f,ug=g,og.attachEvent("onpropertychange",_N)):u==="focusout"&&wN()}function sQ(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return i1(ug)}function oQ(u,f){if(u==="click")return i1(f)}function uQ(u,f){if(u==="input"||u==="change")return i1(f)}function lQ(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Gi=typeof Object.is=="function"?Object.is:lQ;function lg(u,f){if(Gi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var g=Object.keys(u),m=Object.keys(f);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!le.call(f,x)||!Gi(u[x],f[x]))return!1}return!0}function AN(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function $N(u,f){var g=AN(u);u=0;for(var m;g;){if(g.nodeType===3){if(m=u+g.textContent.length,u<=f&&m>=f)return{node:g,offset:f-u};u=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=AN(g)}}function CN(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?CN(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function MN(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Qm(u.document);f instanceof u.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)u=f.contentWindow;else break;f=Qm(u.document)}return f}function KS(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var cQ=xs&&"documentMode"in document&&11>=document.documentMode,ff=null,JS=null,cg=null,eE=!1;function TN(u,f,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;eE||ff==null||ff!==Qm(m)||(m=ff,"selectionStart"in m&&KS(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),cg&&lg(cg,m)||(cg=m,m=I1(JS,"onSelect"),0<m.length&&(f=new t1("onSelect","select",null,f,g),u.push({event:f,listeners:m}),f.target=ff)))}function ol(u,f){var g={};return g[u.toLowerCase()]=f.toLowerCase(),g["Webkit"+u]="webkit"+f,g["Moz"+u]="moz"+f,g}var df={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionrun:ol("Transition","TransitionRun"),transitionstart:ol("Transition","TransitionStart"),transitioncancel:ol("Transition","TransitionCancel"),transitionend:ol("Transition","TransitionEnd")},tE={},DN={};xs&&(DN=document.createElement("div").style,"AnimationEvent"in window||(delete df.animationend.animation,delete df.animationiteration.animation,delete df.animationstart.animation),"TransitionEvent"in window||delete df.transitionend.transition);function ul(u){if(tE[u])return tE[u];if(!df[u])return u;var f=df[u],g;for(g in f)if(f.hasOwnProperty(g)&&g in DN)return tE[u]=f[g];return u}var kN=ul("animationend"),ON=ul("animationiteration"),NN=ul("animationstart"),fQ=ul("transitionrun"),dQ=ul("transitionstart"),hQ=ul("transitioncancel"),RN=ul("transitionend"),zN=new Map,nE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nE.push("scrollEnd");function Pr(u,f){zN.set(u,f),al(f,[u])}var FN=new WeakMap;function mr(u,f){if(typeof u=="object"&&u!==null){var g=FN.get(u);return g!==void 0?g:(f={value:u,source:f,stack:KO(f)},FN.set(u,f),f)}return{value:u,source:f,stack:KO(f)}}var yr=[],hf=0,iE=0;function r1(){for(var u=hf,f=iE=hf=0;f<u;){var g=yr[f];yr[f++]=null;var m=yr[f];yr[f++]=null;var x=yr[f];yr[f++]=null;var E=yr[f];if(yr[f++]=null,m!==null&&x!==null){var M=m.pending;M===null?x.next=x:(x.next=M.next,M.next=x),m.pending=x}E!==0&&LN(g,x,E)}}function a1(u,f,g,m){yr[hf++]=u,yr[hf++]=f,yr[hf++]=g,yr[hf++]=m,iE|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function rE(u,f,g,m){return a1(u,f,g,m),s1(u)}function gf(u,f){return a1(u,null,null,f),s1(u)}function LN(u,f,g){u.lanes|=g;var m=u.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=u.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(x=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,x&&f!==null&&(x=31-Hi(g),u=E.hiddenUpdates,m=u[x],m===null?u[x]=[f]:m.push(f),f.lane=g|536870912),E):null}function s1(u){if(50<zg)throw zg=0,cw=null,Error(i(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var pf={};function gQ(u,f,g,m){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(u,f,g,m){return new gQ(u,f,g,m)}function aE(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ss(u,f){var g=u.alternate;return g===null?(g=Yi(u.tag,f,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=f,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,f=u.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function UN(u,f){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,f=g.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function o1(u,f,g,m,x,E){var M=0;if(m=u,typeof u=="function")aE(u)&&(M=1);else if(typeof u=="string")M=mZ(u,g,de.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case R:return u=Yi(31,g,f,x),u.elementType=R,u.lanes=E,u;case v:return ll(g.children,x,E,f);case b:M=8,x|=24;break;case S:return u=Yi(12,g,f,x|2),u.elementType=S,u.lanes=E,u;case C:return u=Yi(13,g,f,x),u.elementType=C,u.lanes=E,u;case D:return u=Yi(19,g,f,x),u.elementType=D,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case A:M=10;break e;case _:M=9;break e;case $:M=11;break e;case T:M=14;break e;case O:M=16,m=null;break e}M=29,g=Error(i(130,u===null?"null":typeof u,"")),m=null}return f=Yi(M,g,f,x),f.elementType=u,f.type=m,f.lanes=E,f}function ll(u,f,g,m){return u=Yi(7,u,m,f),u.lanes=g,u}function sE(u,f,g){return u=Yi(6,u,null,f),u.lanes=g,u}function oE(u,f,g){return f=Yi(4,u.children!==null?u.children:[],u.key,f),f.lanes=g,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var mf=[],yf=0,u1=null,l1=0,vr=[],br=0,cl=null,Es=1,ws="";function fl(u,f){mf[yf++]=l1,mf[yf++]=u1,u1=u,l1=f}function BN(u,f,g){vr[br++]=Es,vr[br++]=ws,vr[br++]=cl,cl=u;var m=Es;u=ws;var x=32-Hi(m)-1;m&=~(1<<x),g+=1;var E=32-Hi(f)+x;if(30<E){var M=x-x%5;E=(m&(1<<M)-1).toString(32),m>>=M,x-=M,Es=1<<32-Hi(f)+x|g<<x|m,ws=E+u}else Es=1<<E|g<<x|m,ws=u}function uE(u){u.return!==null&&(fl(u,1),BN(u,1,0))}function lE(u){for(;u===u1;)u1=mf[--yf],mf[yf]=null,l1=mf[--yf],mf[yf]=null;for(;u===cl;)cl=vr[--br],vr[br]=null,ws=vr[--br],vr[br]=null,Es=vr[--br],vr[br]=null}var ai=null,Ft=null,at=!1,dl=null,wa=!1,cE=Error(i(519));function hl(u){var f=Error(i(418,""));throw hg(mr(f,u)),cE}function jN(u){var f=u.stateNode,g=u.type,m=u.memoizedProps;switch(f[Hn]=u,f[_i]=m,g){case"dialog":Ge("cancel",f),Ge("close",f);break;case"iframe":case"object":case"embed":Ge("load",f);break;case"video":case"audio":for(g=0;g<Lg.length;g++)Ge(Lg[g],f);break;case"source":Ge("error",f);break;case"img":case"image":case"link":Ge("error",f),Ge("load",f);break;case"details":Ge("toggle",f);break;case"input":Ge("invalid",f),tN(f,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Wm(f);break;case"select":Ge("invalid",f);break;case"textarea":Ge("invalid",f),iN(f,m.value,m.defaultValue,m.children),Wm(f)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||m.suppressHydrationWarning===!0||i6(f.textContent,g)?(m.popover!=null&&(Ge("beforetoggle",f),Ge("toggle",f)),m.onScroll!=null&&Ge("scroll",f),m.onScrollEnd!=null&&Ge("scrollend",f),m.onClick!=null&&(f.onclick=q1),f=!0):f=!1,f||hl(u)}function PN(u){for(ai=u.return;ai;)switch(ai.tag){case 5:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:ai=ai.return}}function fg(u){if(u!==ai)return!1;if(!at)return PN(u),at=!0,!1;var f=u.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||$w(u.type,u.memoizedProps)),g=!g),g&&Ft&&hl(u),PN(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(f===0){Ft=qr(u.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;u=u.nextSibling}Ft=null}}else f===27?(f=Ft,Vo(u.type)?(u=Dw,Dw=null,Ft=u):Ft=f):Ft=ai?qr(u.stateNode.nextSibling):null;return!0}function dg(){Ft=ai=null,at=!1}function IN(){var u=dl;return u!==null&&(Mi===null?Mi=u:Mi.push.apply(Mi,u),dl=null),u}function hg(u){dl===null?dl=[u]:dl.push(u)}var fE=V(null),gl=null,_s=null;function No(u,f,g){se(fE,f._currentValue),f._currentValue=g}function As(u){u._currentValue=fE.current,ae(fE)}function dE(u,f,g){for(;u!==null;){var m=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,m!==null&&(m.childLanes|=f)):m!==null&&(m.childLanes&f)!==f&&(m.childLanes|=f),u===g)break;u=u.return}}function hE(u,f,g,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var E=x.dependencies;if(E!==null){var M=x.child;E=E.firstContext;e:for(;E!==null;){var k=E;E=x;for(var j=0;j<f.length;j++)if(k.context===f[j]){E.lanes|=g,k=E.alternate,k!==null&&(k.lanes|=g),dE(E.return,g,u),m||(M=null);break e}E=k.next}}else if(x.tag===18){if(M=x.return,M===null)throw Error(i(341));M.lanes|=g,E=M.alternate,E!==null&&(E.lanes|=g),dE(M,g,u),M=null}else M=x.child;if(M!==null)M.return=x;else for(M=x;M!==null;){if(M===u){M=null;break}if(x=M.sibling,x!==null){x.return=M.return,M=x;break}M=M.return}x=M}}function gg(u,f,g,m){u=null;for(var x=f,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var M=x.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var k=x.type;Gi(x.pendingProps.value,M.value)||(u!==null?u.push(k):u=[k])}}else if(x===It.current){if(M=x.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(qg):u=[qg])}x=x.return}u!==null&&hE(f,u,g,m),f.flags|=262144}function c1(u){for(u=u.firstContext;u!==null;){if(!Gi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function pl(u){gl=u,_s=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Gn(u){return qN(gl,u)}function f1(u,f){return gl===null&&pl(u),qN(u,f)}function qN(u,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},_s===null){if(u===null)throw Error(i(308));_s=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else _s=_s.next=f;return g}var pQ=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(g,m){u.push(m)}};this.abort=function(){f.aborted=!0,u.forEach(function(g){return g()})}},mQ=e.unstable_scheduleCallback,yQ=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gE(){return{controller:new pQ,data:new Map,refCount:0}}function pg(u){u.refCount--,u.refCount===0&&mQ(yQ,function(){u.controller.abort()})}var mg=null,pE=0,vf=0,bf=null;function vQ(u,f){if(mg===null){var g=mg=[];pE=0,vf=yw(),bf={status:"pending",value:void 0,then:function(m){g.push(m)}}}return pE++,f.then(HN,HN),f}function HN(){if(--pE===0&&mg!==null){bf!==null&&(bf.status="fulfilled");var u=mg;mg=null,vf=0,bf=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function bQ(u,f){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return u.then(function(){m.status="fulfilled",m.value=f;for(var x=0;x<g.length;x++)(0,g[x])(f)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var GN=N.S;N.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&vQ(u,f),GN!==null&&GN(u,f)};var ml=V(null);function mE(){var u=ml.current;return u!==null?u:Et.pooledCache}function d1(u,f){f===null?se(ml,ml.current):se(ml,f.pool)}function YN(){var u=mE();return u===null?null:{parent:an._currentValue,pool:u}}var yg=Error(i(460)),XN=Error(i(474)),h1=Error(i(542)),yE={then:function(){}};function VN(u){return u=u.status,u==="fulfilled"||u==="rejected"}function g1(){}function WN(u,f,g){switch(g=u[g],g===void 0?u.push(f):g!==f&&(f.then(g1,g1),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ZN(u),u;default:if(typeof f.status=="string")f.then(g1,g1);else{if(u=Et,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=f,u.status="pending",u.then(function(m){if(f.status==="pending"){var x=f;x.status="fulfilled",x.value=m}},function(m){if(f.status==="pending"){var x=f;x.status="rejected",x.reason=m}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ZN(u),u}throw vg=f,yg}}var vg=null;function QN(){if(vg===null)throw Error(i(459));var u=vg;return vg=null,u}function ZN(u){if(u===yg||u===h1)throw Error(i(483))}var Ro=!1;function vE(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bE(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function zo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Fo(u,f,g){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(lt&2)!==0){var x=m.pending;return x===null?f.next=f:(f.next=x.next,x.next=f),m.pending=f,f=s1(u),LN(u,null,g),f}return a1(u,m,f,g),s1(u)}function bg(u,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var m=f.lanes;m&=u.pendingLanes,g|=m,f.lanes=g,HO(u,g)}}function xE(u,f){var g=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var M={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=M:E=E.next=M,g=g.next}while(g!==null);E===null?x=E=f:E=E.next=f}else x=E=f;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=f}var SE=!1;function xg(){if(SE){var u=bf;if(u!==null)throw u}}function Sg(u,f,g,m){SE=!1;var x=u.updateQueue;Ro=!1;var E=x.firstBaseUpdate,M=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var j=k,W=j.next;j.next=null,M===null?E=W:M.next=W,M=j;var ne=u.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==M&&(k===null?ne.firstBaseUpdate=W:k.next=W,ne.lastBaseUpdate=j))}if(E!==null){var re=x.baseState;M=0,ne=W=j=null,k=E;do{var Q=k.lane&-536870913,Z=Q!==k.lane;if(Z?(Ve&Q)===Q:(m&Q)===Q){Q!==0&&Q===vf&&(SE=!0),ne!==null&&(ne=ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Te=u,Ce=k;Q=f;var mt=g;switch(Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){re=Te.call(mt,re,Q);break e}re=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,Q=typeof Te=="function"?Te.call(mt,re,Q):Te,Q==null)break e;re=d({},re,Q);break e;case 2:Ro=!0}}Q=k.callback,Q!==null&&(u.flags|=64,Z&&(u.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(W=ne=Z,j=re):ne=ne.next=Z,M|=Q;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ne===null&&(j=re),x.baseState=j,x.firstBaseUpdate=W,x.lastBaseUpdate=ne,E===null&&(x.shared.lanes=0),Ho|=M,u.lanes=M,u.memoizedState=re}}function KN(u,f){if(typeof u!="function")throw Error(i(191,u));u.call(f)}function JN(u,f){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)KN(g[u],f)}var xf=V(null),p1=V(0);function eR(u,f){u=Os,se(p1,u),se(xf,f),Os=u|f.baseLanes}function EE(){se(p1,Os),se(xf,xf.current)}function wE(){Os=p1.current,ae(xf),ae(p1)}var Lo=0,Be=null,gt=null,Jt=null,m1=!1,Sf=!1,yl=!1,y1=0,Eg=0,Ef=null,xQ=0;function Ht(){throw Error(i(321))}function _E(u,f){if(f===null)return!1;for(var g=0;g<f.length&&g<u.length;g++)if(!Gi(u[g],f[g]))return!1;return!0}function AE(u,f,g,m,x,E){return Lo=E,Be=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,N.H=u===null||u.memoizedState===null?LR:UR,yl=!1,E=g(m,x),yl=!1,Sf&&(E=nR(f,g,m,x)),tR(u),E}function tR(u){N.H=w1;var f=gt!==null&&gt.next!==null;if(Lo=0,Jt=gt=Be=null,m1=!1,Eg=0,Ef=null,f)throw Error(i(300));u===null||mn||(u=u.dependencies,u!==null&&c1(u)&&(mn=!0))}function nR(u,f,g,m){Be=u;var x=0;do{if(Sf&&(Ef=null),Eg=0,Sf=!1,25<=x)throw Error(i(301));if(x+=1,Jt=gt=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}N.H=CQ,E=f(g,m)}while(Sf);return E}function SQ(){var u=N.H,f=u.useState()[0];return f=typeof f.then=="function"?wg(f):f,u=u.useState()[0],(gt!==null?gt.memoizedState:null)!==u&&(Be.flags|=1024),f}function $E(){var u=y1!==0;return y1=0,u}function CE(u,f,g){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~g}function ME(u){if(m1){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}m1=!1}Lo=0,Jt=gt=Be=null,Sf=!1,Eg=y1=0,Ef=null}function $i(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Be.memoizedState=Jt=u:Jt=Jt.next=u,Jt}function en(){if(gt===null){var u=Be.alternate;u=u!==null?u.memoizedState:null}else u=gt.next;var f=Jt===null?Be.memoizedState:Jt.next;if(f!==null)Jt=f,gt=u;else{if(u===null)throw Be.alternate===null?Error(i(467)):Error(i(310));gt=u,u={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Jt===null?Be.memoizedState=Jt=u:Jt=Jt.next=u}return Jt}function TE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wg(u){var f=Eg;return Eg+=1,Ef===null&&(Ef=[]),u=WN(Ef,u,f),f=Be,(Jt===null?f.memoizedState:Jt.next)===null&&(f=f.alternate,N.H=f===null||f.memoizedState===null?LR:UR),u}function v1(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return wg(u);if(u.$$typeof===A)return Gn(u)}throw Error(i(438,String(u)))}function DE(u){var f=null,g=Be.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var m=Be.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(f={data:m.data.map(function(x){return x.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=TE(),Be.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(u),m=0;m<u;m++)g[m]=L;return f.index++,g}function $s(u,f){return typeof f=="function"?f(u):f}function b1(u){var f=en();return kE(f,gt,u)}function kE(u,f,g){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=u.baseQueue,E=m.pending;if(E!==null){if(x!==null){var M=x.next;x.next=E.next,E.next=M}f.baseQueue=x=E,m.pending=null}if(E=u.baseState,x===null)u.memoizedState=E;else{f=x.next;var k=M=null,j=null,W=f,ne=!1;do{var re=W.lane&-536870913;if(re!==W.lane?(Ve&re)===re:(Lo&re)===re){var Q=W.revertLane;if(Q===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),re===vf&&(ne=!0);else if((Lo&Q)===Q){W=W.next,Q===vf&&(ne=!0);continue}else re={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(k=j=re,M=E):j=j.next=re,Be.lanes|=Q,Ho|=Q;re=W.action,yl&&g(E,re),E=W.hasEagerState?W.eagerState:g(E,re)}else Q={lane:re,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},j===null?(k=j=Q,M=E):j=j.next=Q,Be.lanes|=re,Ho|=re;W=W.next}while(W!==null&&W!==f);if(j===null?M=E:j.next=k,!Gi(E,u.memoizedState)&&(mn=!0,ne&&(g=bf,g!==null)))throw g;u.memoizedState=E,u.baseState=M,u.baseQueue=j,m.lastRenderedState=E}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function OE(u){var f=en(),g=f.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var m=g.dispatch,x=g.pending,E=f.memoizedState;if(x!==null){g.pending=null;var M=x=x.next;do E=u(E,M.action),M=M.next;while(M!==x);Gi(E,f.memoizedState)||(mn=!0),f.memoizedState=E,f.baseQueue===null&&(f.baseState=E),g.lastRenderedState=E}return[E,m]}function iR(u,f,g){var m=Be,x=en(),E=at;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=f();var M=!Gi((gt||x).memoizedState,g);M&&(x.memoizedState=g,mn=!0),x=x.queue;var k=sR.bind(null,m,x,u);if(_g(2048,8,k,[u]),x.getSnapshot!==f||M||Jt!==null&&Jt.memoizedState.tag&1){if(m.flags|=2048,wf(9,x1(),aR.bind(null,m,x,g,f),null),Et===null)throw Error(i(349));E||(Lo&124)!==0||rR(m,f,g)}return g}function rR(u,f,g){u.flags|=16384,u={getSnapshot:f,value:g},f=Be.updateQueue,f===null?(f=TE(),Be.updateQueue=f,f.stores=[u]):(g=f.stores,g===null?f.stores=[u]:g.push(u))}function aR(u,f,g,m){f.value=g,f.getSnapshot=m,oR(f)&&uR(u)}function sR(u,f,g){return g(function(){oR(f)&&uR(u)})}function oR(u){var f=u.getSnapshot;u=u.value;try{var g=f();return!Gi(u,g)}catch{return!0}}function uR(u){var f=gf(u,2);f!==null&&Zi(f,u,2)}function NE(u){var f=$i();if(typeof u=="function"){var g=u;if(u=g(),yl){Do(!0);try{g()}finally{Do(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:u},f}function lR(u,f,g,m){return u.baseState=g,kE(u,gt,typeof m=="function"?m:$s)}function EQ(u,f,g,m,x){if(E1(u))throw Error(i(485));if(u=f.action,u!==null){var E={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){E.listeners.push(M)}};N.T!==null?g(!0):E.isTransition=!1,m(E),g=f.pending,g===null?(E.next=f.pending=E,cR(f,E)):(E.next=g.next,f.pending=g.next=E)}}function cR(u,f){var g=f.action,m=f.payload,x=u.state;if(f.isTransition){var E=N.T,M={};N.T=M;try{var k=g(x,m),j=N.S;j!==null&&j(M,k),fR(u,f,k)}catch(W){RE(u,f,W)}finally{N.T=E}}else try{E=g(x,m),fR(u,f,E)}catch(W){RE(u,f,W)}}function fR(u,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){dR(u,f,m)},function(m){return RE(u,f,m)}):dR(u,f,g)}function dR(u,f,g){f.status="fulfilled",f.value=g,hR(f),u.state=g,f=u.pending,f!==null&&(g=f.next,g===f?u.pending=null:(g=g.next,f.next=g,cR(u,g)))}function RE(u,f,g){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do f.status="rejected",f.reason=g,hR(f),f=f.next;while(f!==m)}u.action=null}function hR(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function gR(u,f){return f}function pR(u,f){if(at){var g=Et.formState;if(g!==null){e:{var m=Be;if(at){if(Ft){t:{for(var x=Ft,E=wa;x.nodeType!==8;){if(!E){x=null;break t}if(x=qr(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Ft=qr(x.nextSibling),m=x.data==="F!";break e}}hl(m)}m=!1}m&&(f=g[0])}}return g=$i(),g.memoizedState=g.baseState=f,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gR,lastRenderedState:f},g.queue=m,g=RR.bind(null,Be,m),m.dispatch=g,m=NE(!1),E=BE.bind(null,Be,!1,m.queue),m=$i(),x={state:f,dispatch:null,action:u,pending:null},m.queue=x,g=EQ.bind(null,Be,x,E,g),x.dispatch=g,m.memoizedState=u,[f,g,!1]}function mR(u){var f=en();return yR(f,gt,u)}function yR(u,f,g){if(f=kE(u,f,gR)[0],u=b1($s)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var m=wg(f)}catch(M){throw M===yg?h1:M}else m=f;f=en();var x=f.queue,E=x.dispatch;return g!==f.memoizedState&&(Be.flags|=2048,wf(9,x1(),wQ.bind(null,x,g),null)),[m,E,u]}function wQ(u,f){u.action=f}function vR(u){var f=en(),g=gt;if(g!==null)return yR(f,g,u);en(),f=f.memoizedState,g=en();var m=g.queue.dispatch;return g.memoizedState=u,[f,m,!1]}function wf(u,f,g,m){return u={tag:u,create:g,deps:m,inst:f,next:null},f=Be.updateQueue,f===null&&(f=TE(),Be.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=u.next=u:(m=g.next,g.next=u,u.next=m,f.lastEffect=u),u}function x1(){return{destroy:void 0,resource:void 0}}function bR(){return en().memoizedState}function S1(u,f,g,m){var x=$i();m=m===void 0?null:m,Be.flags|=u,x.memoizedState=wf(1|f,x1(),g,m)}function _g(u,f,g,m){var x=en();m=m===void 0?null:m;var E=x.memoizedState.inst;gt!==null&&m!==null&&_E(m,gt.memoizedState.deps)?x.memoizedState=wf(f,E,g,m):(Be.flags|=u,x.memoizedState=wf(1|f,E,g,m))}function xR(u,f){S1(8390656,8,u,f)}function SR(u,f){_g(2048,8,u,f)}function ER(u,f){return _g(4,2,u,f)}function wR(u,f){return _g(4,4,u,f)}function _R(u,f){if(typeof f=="function"){u=u();var g=f(u);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function AR(u,f,g){g=g!=null?g.concat([u]):null,_g(4,4,_R.bind(null,f,u),g)}function zE(){}function $R(u,f){var g=en();f=f===void 0?null:f;var m=g.memoizedState;return f!==null&&_E(f,m[1])?m[0]:(g.memoizedState=[u,f],u)}function CR(u,f){var g=en();f=f===void 0?null:f;var m=g.memoizedState;if(f!==null&&_E(f,m[1]))return m[0];if(m=u(),yl){Do(!0);try{u()}finally{Do(!1)}}return g.memoizedState=[m,f],m}function FE(u,f,g){return g===void 0||(Lo&1073741824)!==0?u.memoizedState=f:(u.memoizedState=g,u=D5(),Be.lanes|=u,Ho|=u,g)}function MR(u,f,g,m){return Gi(g,f)?g:xf.current!==null?(u=FE(u,g,m),Gi(u,f)||(mn=!0),u):(Lo&42)===0?(mn=!0,u.memoizedState=g):(u=D5(),Be.lanes|=u,Ho|=u,f)}function TR(u,f,g,m,x){var E=q.p;q.p=E!==0&&8>E?E:8;var M=N.T,k={};N.T=k,BE(u,!1,f,g);try{var j=x(),W=N.S;if(W!==null&&W(k,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ne=bQ(j,m);Ag(u,f,ne,Qi(u))}else Ag(u,f,m,Qi(u))}catch(re){Ag(u,f,{then:function(){},status:"rejected",reason:re},Qi())}finally{q.p=E,N.T=M}}function _Q(){}function LE(u,f,g,m){if(u.tag!==5)throw Error(i(476));var x=DR(u).queue;TR(u,x,f,Y,g===null?_Q:function(){return kR(u),g(m)})}function DR(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:Y},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:g},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function kR(u){var f=DR(u).next.queue;Ag(u,f,{},Qi())}function UE(){return Gn(qg)}function OR(){return en().memoizedState}function NR(){return en().memoizedState}function AQ(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var g=Qi();u=zo(g);var m=Fo(f,u,g);m!==null&&(Zi(m,f,g),bg(m,f,g)),f={cache:gE()},u.payload=f;return}f=f.return}}function $Q(u,f,g){var m=Qi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},E1(u)?zR(f,g):(g=rE(u,f,g,m),g!==null&&(Zi(g,u,m),FR(g,f,m)))}function RR(u,f,g){var m=Qi();Ag(u,f,g,m)}function Ag(u,f,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(E1(u))zR(f,x);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=f.lastRenderedReducer,E!==null))try{var M=f.lastRenderedState,k=E(M,g);if(x.hasEagerState=!0,x.eagerState=k,Gi(k,M))return a1(u,f,x,0),Et===null&&r1(),!1}catch{}finally{}if(g=rE(u,f,x,m),g!==null)return Zi(g,u,m),FR(g,f,m),!0}return!1}function BE(u,f,g,m){if(m={lane:2,revertLane:yw(),action:m,hasEagerState:!1,eagerState:null,next:null},E1(u)){if(f)throw Error(i(479))}else f=rE(u,g,m,2),f!==null&&Zi(f,u,2)}function E1(u){var f=u.alternate;return u===Be||f!==null&&f===Be}function zR(u,f){Sf=m1=!0;var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}function FR(u,f,g){if((g&4194048)!==0){var m=f.lanes;m&=u.pendingLanes,g|=m,f.lanes=g,HO(u,g)}}var w1={readContext:Gn,use:v1,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht},LR={readContext:Gn,use:v1,useCallback:function(u,f){return $i().memoizedState=[u,f===void 0?null:f],u},useContext:Gn,useEffect:xR,useImperativeHandle:function(u,f,g){g=g!=null?g.concat([u]):null,S1(4194308,4,_R.bind(null,f,u),g)},useLayoutEffect:function(u,f){return S1(4194308,4,u,f)},useInsertionEffect:function(u,f){S1(4,2,u,f)},useMemo:function(u,f){var g=$i();f=f===void 0?null:f;var m=u();if(yl){Do(!0);try{u()}finally{Do(!1)}}return g.memoizedState=[m,f],m},useReducer:function(u,f,g){var m=$i();if(g!==void 0){var x=g(f);if(yl){Do(!0);try{g(f)}finally{Do(!1)}}}else x=f;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=$Q.bind(null,Be,u),[m.memoizedState,u]},useRef:function(u){var f=$i();return u={current:u},f.memoizedState=u},useState:function(u){u=NE(u);var f=u.queue,g=RR.bind(null,Be,f);return f.dispatch=g,[u.memoizedState,g]},useDebugValue:zE,useDeferredValue:function(u,f){var g=$i();return FE(g,u,f)},useTransition:function(){var u=NE(!1);return u=TR.bind(null,Be,u.queue,!0,!1),$i().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,g){var m=Be,x=$i();if(at){if(g===void 0)throw Error(i(407));g=g()}else{if(g=f(),Et===null)throw Error(i(349));(Ve&124)!==0||rR(m,f,g)}x.memoizedState=g;var E={value:g,getSnapshot:f};return x.queue=E,xR(sR.bind(null,m,E,u),[u]),m.flags|=2048,wf(9,x1(),aR.bind(null,m,E,g,f),null),g},useId:function(){var u=$i(),f=Et.identifierPrefix;if(at){var g=ws,m=Es;g=(m&~(1<<32-Hi(m)-1)).toString(32)+g,f=""+f+"R"+g,g=y1++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=xQ++,f=""+f+"r"+g.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:UE,useFormState:pR,useActionState:pR,useOptimistic:function(u){var f=$i();f.memoizedState=f.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=BE.bind(null,Be,!0,g),g.dispatch=f,[u,f]},useMemoCache:DE,useCacheRefresh:function(){return $i().memoizedState=AQ.bind(null,Be)}},UR={readContext:Gn,use:v1,useCallback:$R,useContext:Gn,useEffect:SR,useImperativeHandle:AR,useInsertionEffect:ER,useLayoutEffect:wR,useMemo:CR,useReducer:b1,useRef:bR,useState:function(){return b1($s)},useDebugValue:zE,useDeferredValue:function(u,f){var g=en();return MR(g,gt.memoizedState,u,f)},useTransition:function(){var u=b1($s)[0],f=en().memoizedState;return[typeof u=="boolean"?u:wg(u),f]},useSyncExternalStore:iR,useId:OR,useHostTransitionStatus:UE,useFormState:mR,useActionState:mR,useOptimistic:function(u,f){var g=en();return lR(g,gt,u,f)},useMemoCache:DE,useCacheRefresh:NR},CQ={readContext:Gn,use:v1,useCallback:$R,useContext:Gn,useEffect:SR,useImperativeHandle:AR,useInsertionEffect:ER,useLayoutEffect:wR,useMemo:CR,useReducer:OE,useRef:bR,useState:function(){return OE($s)},useDebugValue:zE,useDeferredValue:function(u,f){var g=en();return gt===null?FE(g,u,f):MR(g,gt.memoizedState,u,f)},useTransition:function(){var u=OE($s)[0],f=en().memoizedState;return[typeof u=="boolean"?u:wg(u),f]},useSyncExternalStore:iR,useId:OR,useHostTransitionStatus:UE,useFormState:vR,useActionState:vR,useOptimistic:function(u,f){var g=en();return gt!==null?lR(g,gt,u,f):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:DE,useCacheRefresh:NR},_f=null,$g=0;function _1(u){var f=$g;return $g+=1,_f===null&&(_f=[]),WN(_f,u,f)}function Cg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function A1(u,f){throw f.$$typeof===h?Error(i(525)):(u=Object.prototype.toString.call(f),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function BR(u){var f=u._init;return f(u._payload)}function jR(u){function f(G,I){if(u){var X=G.deletions;X===null?(G.deletions=[I],G.flags|=16):X.push(I)}}function g(G,I){if(!u)return null;for(;I!==null;)f(G,I),I=I.sibling;return null}function m(G){for(var I=new Map;G!==null;)G.key!==null?I.set(G.key,G):I.set(G.index,G),G=G.sibling;return I}function x(G,I){return G=Ss(G,I),G.index=0,G.sibling=null,G}function E(G,I,X){return G.index=X,u?(X=G.alternate,X!==null?(X=X.index,X<I?(G.flags|=67108866,I):X):(G.flags|=67108866,I)):(G.flags|=1048576,I)}function M(G){return u&&G.alternate===null&&(G.flags|=67108866),G}function k(G,I,X,ie){return I===null||I.tag!==6?(I=sE(X,G.mode,ie),I.return=G,I):(I=x(I,X),I.return=G,I)}function j(G,I,X,ie){var pe=X.type;return pe===v?ne(G,I,X.props.children,ie,X.key):I!==null&&(I.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===O&&BR(pe)===I.type)?(I=x(I,X.props),Cg(I,X),I.return=G,I):(I=o1(X.type,X.key,X.props,null,G.mode,ie),Cg(I,X),I.return=G,I)}function W(G,I,X,ie){return I===null||I.tag!==4||I.stateNode.containerInfo!==X.containerInfo||I.stateNode.implementation!==X.implementation?(I=oE(X,G.mode,ie),I.return=G,I):(I=x(I,X.children||[]),I.return=G,I)}function ne(G,I,X,ie,pe){return I===null||I.tag!==7?(I=ll(X,G.mode,ie,pe),I.return=G,I):(I=x(I,X),I.return=G,I)}function re(G,I,X){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=sE(""+I,G.mode,X),I.return=G,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case p:return X=o1(I.type,I.key,I.props,null,G.mode,X),Cg(X,I),X.return=G,X;case y:return I=oE(I,G.mode,X),I.return=G,I;case O:var ie=I._init;return I=ie(I._payload),re(G,I,X)}if(B(I)||H(I))return I=ll(I,G.mode,X,null),I.return=G,I;if(typeof I.then=="function")return re(G,_1(I),X);if(I.$$typeof===A)return re(G,f1(G,I),X);A1(G,I)}return null}function Q(G,I,X,ie){var pe=I!==null?I.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return pe!==null?null:k(G,I,""+X,ie);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return X.key===pe?j(G,I,X,ie):null;case y:return X.key===pe?W(G,I,X,ie):null;case O:return pe=X._init,X=pe(X._payload),Q(G,I,X,ie)}if(B(X)||H(X))return pe!==null?null:ne(G,I,X,ie,null);if(typeof X.then=="function")return Q(G,I,_1(X),ie);if(X.$$typeof===A)return Q(G,I,f1(G,X),ie);A1(G,X)}return null}function Z(G,I,X,ie,pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return G=G.get(X)||null,k(I,G,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case p:return G=G.get(ie.key===null?X:ie.key)||null,j(I,G,ie,pe);case y:return G=G.get(ie.key===null?X:ie.key)||null,W(I,G,ie,pe);case O:var Pe=ie._init;return ie=Pe(ie._payload),Z(G,I,X,ie,pe)}if(B(ie)||H(ie))return G=G.get(X)||null,ne(I,G,ie,pe,null);if(typeof ie.then=="function")return Z(G,I,X,_1(ie),pe);if(ie.$$typeof===A)return Z(G,I,X,f1(I,ie),pe);A1(I,ie)}return null}function Te(G,I,X,ie){for(var pe=null,Pe=null,xe=I,Me=I=0,vn=null;xe!==null&&Me<X.length;Me++){xe.index>Me?(vn=xe,xe=null):vn=xe.sibling;var et=Q(G,xe,X[Me],ie);if(et===null){xe===null&&(xe=vn);break}u&&xe&&et.alternate===null&&f(G,xe),I=E(et,I,Me),Pe===null?pe=et:Pe.sibling=et,Pe=et,xe=vn}if(Me===X.length)return g(G,xe),at&&fl(G,Me),pe;if(xe===null){for(;Me<X.length;Me++)xe=re(G,X[Me],ie),xe!==null&&(I=E(xe,I,Me),Pe===null?pe=xe:Pe.sibling=xe,Pe=xe);return at&&fl(G,Me),pe}for(xe=m(xe);Me<X.length;Me++)vn=Z(xe,G,Me,X[Me],ie),vn!==null&&(u&&vn.alternate!==null&&xe.delete(vn.key===null?Me:vn.key),I=E(vn,I,Me),Pe===null?pe=vn:Pe.sibling=vn,Pe=vn);return u&&xe.forEach(function(Jo){return f(G,Jo)}),at&&fl(G,Me),pe}function Ce(G,I,X,ie){if(X==null)throw Error(i(151));for(var pe=null,Pe=null,xe=I,Me=I=0,vn=null,et=X.next();xe!==null&&!et.done;Me++,et=X.next()){xe.index>Me?(vn=xe,xe=null):vn=xe.sibling;var Jo=Q(G,xe,et.value,ie);if(Jo===null){xe===null&&(xe=vn);break}u&&xe&&Jo.alternate===null&&f(G,xe),I=E(Jo,I,Me),Pe===null?pe=Jo:Pe.sibling=Jo,Pe=Jo,xe=vn}if(et.done)return g(G,xe),at&&fl(G,Me),pe;if(xe===null){for(;!et.done;Me++,et=X.next())et=re(G,et.value,ie),et!==null&&(I=E(et,I,Me),Pe===null?pe=et:Pe.sibling=et,Pe=et);return at&&fl(G,Me),pe}for(xe=m(xe);!et.done;Me++,et=X.next())et=Z(xe,G,Me,et.value,ie),et!==null&&(u&&et.alternate!==null&&xe.delete(et.key===null?Me:et.key),I=E(et,I,Me),Pe===null?pe=et:Pe.sibling=et,Pe=et);return u&&xe.forEach(function(MZ){return f(G,MZ)}),at&&fl(G,Me),pe}function mt(G,I,X,ie){if(typeof X=="object"&&X!==null&&X.type===v&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case p:e:{for(var pe=X.key;I!==null;){if(I.key===pe){if(pe=X.type,pe===v){if(I.tag===7){g(G,I.sibling),ie=x(I,X.props.children),ie.return=G,G=ie;break e}}else if(I.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===O&&BR(pe)===I.type){g(G,I.sibling),ie=x(I,X.props),Cg(ie,X),ie.return=G,G=ie;break e}g(G,I);break}else f(G,I);I=I.sibling}X.type===v?(ie=ll(X.props.children,G.mode,ie,X.key),ie.return=G,G=ie):(ie=o1(X.type,X.key,X.props,null,G.mode,ie),Cg(ie,X),ie.return=G,G=ie)}return M(G);case y:e:{for(pe=X.key;I!==null;){if(I.key===pe)if(I.tag===4&&I.stateNode.containerInfo===X.containerInfo&&I.stateNode.implementation===X.implementation){g(G,I.sibling),ie=x(I,X.children||[]),ie.return=G,G=ie;break e}else{g(G,I);break}else f(G,I);I=I.sibling}ie=oE(X,G.mode,ie),ie.return=G,G=ie}return M(G);case O:return pe=X._init,X=pe(X._payload),mt(G,I,X,ie)}if(B(X))return Te(G,I,X,ie);if(H(X)){if(pe=H(X),typeof pe!="function")throw Error(i(150));return X=pe.call(X),Ce(G,I,X,ie)}if(typeof X.then=="function")return mt(G,I,_1(X),ie);if(X.$$typeof===A)return mt(G,I,f1(G,X),ie);A1(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,I!==null&&I.tag===6?(g(G,I.sibling),ie=x(I,X),ie.return=G,G=ie):(g(G,I),ie=sE(X,G.mode,ie),ie.return=G,G=ie),M(G)):g(G,I)}return function(G,I,X,ie){try{$g=0;var pe=mt(G,I,X,ie);return _f=null,pe}catch(xe){if(xe===yg||xe===h1)throw xe;var Pe=Yi(29,xe,null,G.mode);return Pe.lanes=ie,Pe.return=G,Pe}finally{}}}var Af=jR(!0),PR=jR(!1),xr=V(null),_a=null;function Uo(u){var f=u.alternate;se(sn,sn.current&1),se(xr,u),_a===null&&(f===null||xf.current!==null||f.memoizedState!==null)&&(_a=u)}function IR(u){if(u.tag===22){if(se(sn,sn.current),se(xr,u),_a===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(_a=u)}}else Bo()}function Bo(){se(sn,sn.current),se(xr,xr.current)}function Cs(u){ae(xr),_a===u&&(_a=null),ae(sn)}var sn=V(0);function $1(u){for(var f=u;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Tw(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function jE(u,f,g,m){f=u.memoizedState,g=g(m,f),g=g==null?f:d({},f,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var PE={enqueueSetState:function(u,f,g){u=u._reactInternals;var m=Qi(),x=zo(m);x.payload=f,g!=null&&(x.callback=g),f=Fo(u,x,m),f!==null&&(Zi(f,u,m),bg(f,u,m))},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var m=Qi(),x=zo(m);x.tag=1,x.payload=f,g!=null&&(x.callback=g),f=Fo(u,x,m),f!==null&&(Zi(f,u,m),bg(f,u,m))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=Qi(),m=zo(g);m.tag=2,f!=null&&(m.callback=f),f=Fo(u,m,g),f!==null&&(Zi(f,u,g),bg(f,u,g))}};function qR(u,f,g,m,x,E,M){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,E,M):f.prototype&&f.prototype.isPureReactComponent?!lg(g,m)||!lg(x,E):!0}function HR(u,f,g,m){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,m),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,m),f.state!==u&&PE.enqueueReplaceState(f,f.state,null)}function vl(u,f){var g=f;if("ref"in f){g={};for(var m in f)m!=="ref"&&(g[m]=f[m])}if(u=u.defaultProps){g===f&&(g=d({},g));for(var x in u)g[x]===void 0&&(g[x]=u[x])}return g}var C1=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function GR(u){C1(u)}function YR(u){console.error(u)}function XR(u){C1(u)}function M1(u,f){try{var g=u.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(m){setTimeout(function(){throw m})}}function VR(u,f,g){try{var m=u.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function IE(u,f,g){return g=zo(g),g.tag=3,g.payload={element:null},g.callback=function(){M1(u,f)},g}function WR(u){return u=zo(u),u.tag=3,u}function QR(u,f,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;u.payload=function(){return x(E)},u.callback=function(){VR(f,g,m)}}var M=g.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(u.callback=function(){VR(f,g,m),typeof x!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function MQ(u,f,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(f=g.alternate,f!==null&&gg(f,g,x,!0),g=xr.current,g!==null){switch(g.tag){case 13:return _a===null?dw():g.alternate===null&&Lt===0&&(Lt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===yE?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([m]):f.add(m),gw(u,m,x)),!1;case 22:return g.flags|=65536,m===yE?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([m]):g.add(m)),gw(u,m,x)),!1}throw Error(i(435,g.tag))}return gw(u,m,x),dw(),!1}if(at)return f=xr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=x,m!==cE&&(u=Error(i(422),{cause:m}),hg(mr(u,g)))):(m!==cE&&(f=Error(i(423),{cause:m}),hg(mr(f,g))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=mr(m,g),x=IE(u.stateNode,m,x),xE(u,x),Lt!==4&&(Lt=2)),!1;var E=Error(i(520),{cause:m});if(E=mr(E,g),Rg===null?Rg=[E]:Rg.push(E),Lt!==4&&(Lt=2),f===null)return!0;m=mr(m,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,u=x&-x,g.lanes|=u,u=IE(g.stateNode,m,u),xE(g,u),!1;case 1:if(f=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Go===null||!Go.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=WR(x),QR(x,u,g,m),xE(g,x),!1}g=g.return}while(g!==null);return!1}var ZR=Error(i(461)),mn=!1;function kn(u,f,g,m){f.child=u===null?PR(f,null,g,m):Af(f,u.child,g,m)}function KR(u,f,g,m,x){g=g.render;var E=f.ref;if("ref"in m){var M={};for(var k in m)k!=="ref"&&(M[k]=m[k])}else M=m;return pl(f),m=AE(u,f,g,M,E,x),k=$E(),u!==null&&!mn?(CE(u,f,x),Ms(u,f,x)):(at&&k&&uE(f),f.flags|=1,kn(u,f,m,x),f.child)}function JR(u,f,g,m,x){if(u===null){var E=g.type;return typeof E=="function"&&!aE(E)&&E.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=E,e5(u,f,E,m,x)):(u=o1(g.type,null,m,f,f.mode,x),u.ref=f.ref,u.return=f,f.child=u)}if(E=u.child,!QE(u,x)){var M=E.memoizedProps;if(g=g.compare,g=g!==null?g:lg,g(M,m)&&u.ref===f.ref)return Ms(u,f,x)}return f.flags|=1,u=Ss(E,m),u.ref=f.ref,u.return=f,f.child=u}function e5(u,f,g,m,x){if(u!==null){var E=u.memoizedProps;if(lg(E,m)&&u.ref===f.ref)if(mn=!1,f.pendingProps=m=E,QE(u,x))(u.flags&131072)!==0&&(mn=!0);else return f.lanes=u.lanes,Ms(u,f,x)}return qE(u,f,g,m,x)}function t5(u,f,g){var m=f.pendingProps,x=m.children,E=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((f.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,u!==null){for(x=f.child=u.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;f.childLanes=E&~m}else f.childLanes=0,f.child=null;return n5(u,f,m,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&d1(f,E!==null?E.cachePool:null),E!==null?eR(f,E):EE(),IR(f);else return f.lanes=f.childLanes=536870912,n5(u,f,E!==null?E.baseLanes|g:g,g)}else E!==null?(d1(f,E.cachePool),eR(f,E),Bo(),f.memoizedState=null):(u!==null&&d1(f,null),EE(),Bo());return kn(u,f,x,g),f.child}function n5(u,f,g,m){var x=mE();return x=x===null?null:{parent:an._currentValue,pool:x},f.memoizedState={baseLanes:g,cachePool:x},u!==null&&d1(f,null),EE(),IR(f),u!==null&&gg(u,f,m,!0),null}function T1(u,f){var g=f.ref;if(g===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(f.flags|=4194816)}}function qE(u,f,g,m,x){return pl(f),g=AE(u,f,g,m,void 0,x),m=$E(),u!==null&&!mn?(CE(u,f,x),Ms(u,f,x)):(at&&m&&uE(f),f.flags|=1,kn(u,f,g,x),f.child)}function i5(u,f,g,m,x,E){return pl(f),f.updateQueue=null,g=nR(f,m,g,x),tR(u),m=$E(),u!==null&&!mn?(CE(u,f,E),Ms(u,f,E)):(at&&m&&uE(f),f.flags|=1,kn(u,f,g,E),f.child)}function r5(u,f,g,m,x){if(pl(f),f.stateNode===null){var E=pf,M=g.contextType;typeof M=="object"&&M!==null&&(E=Gn(M)),E=new g(m,E),f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=PE,f.stateNode=E,E._reactInternals=f,E=f.stateNode,E.props=m,E.state=f.memoizedState,E.refs={},vE(f),M=g.contextType,E.context=typeof M=="object"&&M!==null?Gn(M):pf,E.state=f.memoizedState,M=g.getDerivedStateFromProps,typeof M=="function"&&(jE(f,g,M,m),E.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(M=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),M!==E.state&&PE.enqueueReplaceState(E,E.state,null),Sg(f,m,E,x),xg(),E.state=f.memoizedState),typeof E.componentDidMount=="function"&&(f.flags|=4194308),m=!0}else if(u===null){E=f.stateNode;var k=f.memoizedProps,j=vl(g,k);E.props=j;var W=E.context,ne=g.contextType;M=pf,typeof ne=="object"&&ne!==null&&(M=Gn(ne));var re=g.getDerivedStateFromProps;ne=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function",k=f.pendingProps!==k,ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k||W!==M)&&HR(f,E,m,M),Ro=!1;var Q=f.memoizedState;E.state=Q,Sg(f,m,E,x),xg(),W=f.memoizedState,k||Q!==W||Ro?(typeof re=="function"&&(jE(f,g,re,m),W=f.memoizedState),(j=Ro||qR(f,g,j,m,Q,W,M))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(f.flags|=4194308)):(typeof E.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=m,f.memoizedState=W),E.props=m,E.state=W,E.context=M,m=j):(typeof E.componentDidMount=="function"&&(f.flags|=4194308),m=!1)}else{E=f.stateNode,bE(u,f),M=f.memoizedProps,ne=vl(g,M),E.props=ne,re=f.pendingProps,Q=E.context,W=g.contextType,j=pf,typeof W=="object"&&W!==null&&(j=Gn(W)),k=g.getDerivedStateFromProps,(W=typeof k=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M!==re||Q!==j)&&HR(f,E,m,j),Ro=!1,Q=f.memoizedState,E.state=Q,Sg(f,m,E,x),xg();var Z=f.memoizedState;M!==re||Q!==Z||Ro||u!==null&&u.dependencies!==null&&c1(u.dependencies)?(typeof k=="function"&&(jE(f,g,k,m),Z=f.memoizedState),(ne=Ro||qR(f,g,ne,m,Q,Z,j)||u!==null&&u.dependencies!==null&&c1(u.dependencies))?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,Z,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,Z,j)),typeof E.componentDidUpdate=="function"&&(f.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof E.componentDidUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(f.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(f.flags|=1024),f.memoizedProps=m,f.memoizedState=Z),E.props=m,E.state=Z,E.context=j,m=ne):(typeof E.componentDidUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(f.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===u.memoizedProps&&Q===u.memoizedState||(f.flags|=1024),m=!1)}return E=m,T1(u,f),m=(f.flags&128)!==0,E||m?(E=f.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),f.flags|=1,u!==null&&m?(f.child=Af(f,u.child,null,x),f.child=Af(f,null,g,x)):kn(u,f,g,x),f.memoizedState=E.state,u=f.child):u=Ms(u,f,x),u}function a5(u,f,g,m){return dg(),f.flags|=256,kn(u,f,g,m),f.child}var HE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function GE(u){return{baseLanes:u,cachePool:YN()}}function YE(u,f,g){return u=u!==null?u.childLanes&~g:0,f&&(u|=Sr),u}function s5(u,f,g){var m=f.pendingProps,x=!1,E=(f.flags&128)!==0,M;if((M=E)||(M=u!==null&&u.memoizedState===null?!1:(sn.current&2)!==0),M&&(x=!0,f.flags&=-129),M=(f.flags&32)!==0,f.flags&=-33,u===null){if(at){if(x?Uo(f):Bo(),at){var k=Ft,j;if(j=k){e:{for(j=k,k=wa;j.nodeType!==8;){if(!k){k=null;break e}if(j=qr(j.nextSibling),j===null){k=null;break e}}k=j}k!==null?(f.memoizedState={dehydrated:k,treeContext:cl!==null?{id:Es,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},j=Yi(18,null,null,0),j.stateNode=k,j.return=f,f.child=j,ai=f,Ft=null,j=!0):j=!1}j||hl(f)}if(k=f.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Tw(k)?f.lanes=32:f.lanes=536870912,null;Cs(f)}return k=m.children,m=m.fallback,x?(Bo(),x=f.mode,k=D1({mode:"hidden",children:k},x),m=ll(m,x,g,null),k.return=f,m.return=f,k.sibling=m,f.child=k,x=f.child,x.memoizedState=GE(g),x.childLanes=YE(u,M,g),f.memoizedState=HE,m):(Uo(f),XE(f,k))}if(j=u.memoizedState,j!==null&&(k=j.dehydrated,k!==null)){if(E)f.flags&256?(Uo(f),f.flags&=-257,f=VE(u,f,g)):f.memoizedState!==null?(Bo(),f.child=u.child,f.flags|=128,f=null):(Bo(),x=m.fallback,k=f.mode,m=D1({mode:"visible",children:m.children},k),x=ll(x,k,g,null),x.flags|=2,m.return=f,x.return=f,m.sibling=x,f.child=m,Af(f,u.child,null,g),m=f.child,m.memoizedState=GE(g),m.childLanes=YE(u,M,g),f.memoizedState=HE,f=x);else if(Uo(f),Tw(k)){if(M=k.nextSibling&&k.nextSibling.dataset,M)var W=M.dgst;M=W,m=Error(i(419)),m.stack="",m.digest=M,hg({value:m,source:null,stack:null}),f=VE(u,f,g)}else if(mn||gg(u,f,g,!1),M=(g&u.childLanes)!==0,mn||M){if(M=Et,M!==null&&(m=g&-g,m=(m&42)!==0?1:DS(m),m=(m&(M.suspendedLanes|g))!==0?0:m,m!==0&&m!==j.retryLane))throw j.retryLane=m,gf(u,m),Zi(M,u,m),ZR;k.data==="$?"||dw(),f=VE(u,f,g)}else k.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=j.treeContext,Ft=qr(k.nextSibling),ai=f,at=!0,dl=null,wa=!1,u!==null&&(vr[br++]=Es,vr[br++]=ws,vr[br++]=cl,Es=u.id,ws=u.overflow,cl=f),f=XE(f,m.children),f.flags|=4096);return f}return x?(Bo(),x=m.fallback,k=f.mode,j=u.child,W=j.sibling,m=Ss(j,{mode:"hidden",children:m.children}),m.subtreeFlags=j.subtreeFlags&65011712,W!==null?x=Ss(W,x):(x=ll(x,k,g,null),x.flags|=2),x.return=f,m.return=f,m.sibling=x,f.child=m,m=x,x=f.child,k=u.child.memoizedState,k===null?k=GE(g):(j=k.cachePool,j!==null?(W=an._currentValue,j=j.parent!==W?{parent:W,pool:W}:j):j=YN(),k={baseLanes:k.baseLanes|g,cachePool:j}),x.memoizedState=k,x.childLanes=YE(u,M,g),f.memoizedState=HE,m):(Uo(f),g=u.child,u=g.sibling,g=Ss(g,{mode:"visible",children:m.children}),g.return=f,g.sibling=null,u!==null&&(M=f.deletions,M===null?(f.deletions=[u],f.flags|=16):M.push(u)),f.child=g,f.memoizedState=null,g)}function XE(u,f){return f=D1({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function D1(u,f){return u=Yi(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function VE(u,f,g){return Af(f,u.child,null,g),u=XE(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function o5(u,f,g){u.lanes|=f;var m=u.alternate;m!==null&&(m.lanes|=f),dE(u.return,f,g)}function WE(u,f,g,m,x){var E=u.memoizedState;E===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=f,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function u5(u,f,g){var m=f.pendingProps,x=m.revealOrder,E=m.tail;if(kn(u,f,m.children,g),m=sn.current,(m&2)!==0)m=m&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&o5(u,g,f);else if(u.tag===19)o5(u,g,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(se(sn,m),x){case"forwards":for(g=f.child,x=null;g!==null;)u=g.alternate,u!==null&&$1(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=f.child,f.child=null):(x=g.sibling,g.sibling=null),WE(f,!1,x,g,E);break;case"backwards":for(g=null,x=f.child,f.child=null;x!==null;){if(u=x.alternate,u!==null&&$1(u)===null){f.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}WE(f,!0,g,null,E);break;case"together":WE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ms(u,f,g){if(u!==null&&(f.dependencies=u.dependencies),Ho|=f.lanes,(g&f.childLanes)===0)if(u!==null){if(gg(u,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(i(153));if(f.child!==null){for(u=f.child,g=Ss(u,u.pendingProps),f.child=g,g.return=f;u.sibling!==null;)u=u.sibling,g=g.sibling=Ss(u,u.pendingProps),g.return=f;g.sibling=null}return f.child}function QE(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&c1(u)))}function TQ(u,f,g){switch(f.tag){case 3:Qe(f,f.stateNode.containerInfo),No(f,an,u.memoizedState.cache),dg();break;case 27:case 5:ke(f);break;case 4:Qe(f,f.stateNode.containerInfo);break;case 10:No(f,f.type,f.memoizedProps.value);break;case 13:var m=f.memoizedState;if(m!==null)return m.dehydrated!==null?(Uo(f),f.flags|=128,null):(g&f.child.childLanes)!==0?s5(u,f,g):(Uo(f),u=Ms(u,f,g),u!==null?u.sibling:null);Uo(f);break;case 19:var x=(u.flags&128)!==0;if(m=(g&f.childLanes)!==0,m||(gg(u,f,g,!1),m=(g&f.childLanes)!==0),x){if(m)return u5(u,f,g);f.flags|=128}if(x=f.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(sn,sn.current),m)break;return null;case 22:case 23:return f.lanes=0,t5(u,f,g);case 24:No(f,an,u.memoizedState.cache)}return Ms(u,f,g)}function l5(u,f,g){if(u!==null)if(u.memoizedProps!==f.pendingProps)mn=!0;else{if(!QE(u,g)&&(f.flags&128)===0)return mn=!1,TQ(u,f,g);mn=(u.flags&131072)!==0}else mn=!1,at&&(f.flags&1048576)!==0&&BN(f,l1,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var m=f.elementType,x=m._init;if(m=x(m._payload),f.type=m,typeof m=="function")aE(m)?(u=vl(m,u),f.tag=1,f=r5(null,f,m,u,g)):(f.tag=0,f=qE(null,f,m,u,g));else{if(m!=null){if(x=m.$$typeof,x===$){f.tag=11,f=KR(null,f,m,u,g);break e}else if(x===T){f.tag=14,f=JR(null,f,m,u,g);break e}}throw f=P(m)||m,Error(i(306,f,""))}}return f;case 0:return qE(u,f,f.type,f.pendingProps,g);case 1:return m=f.type,x=vl(m,f.pendingProps),r5(u,f,m,x,g);case 3:e:{if(Qe(f,f.stateNode.containerInfo),u===null)throw Error(i(387));m=f.pendingProps;var E=f.memoizedState;x=E.element,bE(u,f),Sg(f,m,null,g);var M=f.memoizedState;if(m=M.cache,No(f,an,m),m!==E.cache&&hE(f,[an],g,!0),xg(),m=M.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:M.cache},f.updateQueue.baseState=E,f.memoizedState=E,f.flags&256){f=a5(u,f,m,g);break e}else if(m!==x){x=mr(Error(i(424)),f),hg(x),f=a5(u,f,m,g);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ft=qr(u.firstChild),ai=f,at=!0,dl=null,wa=!0,g=PR(f,null,m,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(dg(),m===x){f=Ms(u,f,g);break e}kn(u,f,m,g)}f=f.child}return f;case 26:return T1(u,f),u===null?(g=h6(f.type,null,f.pendingProps,null))?f.memoizedState=g:at||(g=f.type,u=f.pendingProps,m=H1(Se.current).createElement(g),m[Hn]=f,m[_i]=u,Nn(m,g,u),pn(m),f.stateNode=m):f.memoizedState=h6(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return ke(f),u===null&&at&&(m=f.stateNode=c6(f.type,f.pendingProps,Se.current),ai=f,wa=!0,x=Ft,Vo(f.type)?(Dw=x,Ft=qr(m.firstChild)):Ft=x),kn(u,f,f.pendingProps.children,g),T1(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&at&&((x=m=Ft)&&(m=iZ(m,f.type,f.pendingProps,wa),m!==null?(f.stateNode=m,ai=f,Ft=qr(m.firstChild),wa=!1,x=!0):x=!1),x||hl(f)),ke(f),x=f.type,E=f.pendingProps,M=u!==null?u.memoizedProps:null,m=E.children,$w(x,E)?m=null:M!==null&&$w(x,M)&&(f.flags|=32),f.memoizedState!==null&&(x=AE(u,f,SQ,null,null,g),qg._currentValue=x),T1(u,f),kn(u,f,m,g),f.child;case 6:return u===null&&at&&((u=g=Ft)&&(g=rZ(g,f.pendingProps,wa),g!==null?(f.stateNode=g,ai=f,Ft=null,u=!0):u=!1),u||hl(f)),null;case 13:return s5(u,f,g);case 4:return Qe(f,f.stateNode.containerInfo),m=f.pendingProps,u===null?f.child=Af(f,null,m,g):kn(u,f,m,g),f.child;case 11:return KR(u,f,f.type,f.pendingProps,g);case 7:return kn(u,f,f.pendingProps,g),f.child;case 8:return kn(u,f,f.pendingProps.children,g),f.child;case 12:return kn(u,f,f.pendingProps.children,g),f.child;case 10:return m=f.pendingProps,No(f,f.type,m.value),kn(u,f,m.children,g),f.child;case 9:return x=f.type._context,m=f.pendingProps.children,pl(f),x=Gn(x),m=m(x),f.flags|=1,kn(u,f,m,g),f.child;case 14:return JR(u,f,f.type,f.pendingProps,g);case 15:return e5(u,f,f.type,f.pendingProps,g);case 19:return u5(u,f,g);case 31:return m=f.pendingProps,g=f.mode,m={mode:m.mode,children:m.children},u===null?(g=D1(m,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Ss(u.child,m),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return t5(u,f,g);case 24:return pl(f),m=Gn(an),u===null?(x=mE(),x===null&&(x=Et,E=gE(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),f.memoizedState={parent:m,cache:x},vE(f),No(f,an,x)):((u.lanes&g)!==0&&(bE(u,f),Sg(f,null,null,g),xg()),x=u.memoizedState,E=f.memoizedState,x.parent!==m?(x={parent:m,cache:m},f.memoizedState=x,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=x),No(f,an,m)):(m=E.cache,No(f,an,m),m!==x.cache&&hE(f,[an],g,!0))),kn(u,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Ts(u){u.flags|=4}function c5(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!v6(f)){if(f=xr.current,f!==null&&((Ve&4194048)===Ve?_a!==null:(Ve&62914560)!==Ve&&(Ve&536870912)===0||f!==_a))throw vg=yE,XN;u.flags|=8192}}function k1(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?IO():536870912,u.lanes|=f,Tf|=f)}function Mg(u,f){if(!at)switch(u.tailMode){case"hidden":f=u.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Ot(u){var f=u.alternate!==null&&u.alternate.child===u.child,g=0,m=0;if(f)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=g,f}function DQ(u,f,g){var m=f.pendingProps;switch(lE(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(f),null;case 1:return Ot(f),null;case 3:return g=f.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),As(an),ge(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(fg(f)?Ts(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,IN())),Ot(f),null;case 26:return g=f.memoizedState,u===null?(Ts(f),g!==null?(Ot(f),c5(f,g)):(Ot(f),f.flags&=-16777217)):g?g!==u.memoizedState?(Ts(f),Ot(f),c5(f,g)):(Ot(f),f.flags&=-16777217):(u.memoizedProps!==m&&Ts(f),Ot(f),f.flags&=-16777217),null;case 27:ze(f),g=Se.current;var x=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return Ot(f),null}u=de.current,fg(f)?jN(f):(u=c6(x,m,g),f.stateNode=u,Ts(f))}return Ot(f),null;case 5:if(ze(f),g=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return Ot(f),null}if(u=de.current,fg(f))jN(f);else{switch(x=H1(Se.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}u[Hn]=f,u[_i]=m;e:for(x=f.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}f.stateNode=u;e:switch(Nn(u,g,m),g){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ts(f)}}return Ot(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==m&&Ts(f);else{if(typeof m!="string"&&f.stateNode===null)throw Error(i(166));if(u=Se.current,fg(f)){if(u=f.stateNode,g=f.memoizedProps,m=null,x=ai,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[Hn]=f,u=!!(u.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||i6(u.nodeValue,g)),u||hl(f)}else u=H1(u).createTextNode(m),u[Hn]=f,f.stateNode=u}return Ot(f),null;case 13:if(m=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=fg(f),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=f.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Hn]=f}else dg(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ot(f),x=!1}else x=IN(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return f.flags&256?(Cs(f),f):(Cs(f),null)}if(Cs(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=m!==null,u=u!==null&&u.memoizedState!==null,g){m=f.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==u&&g&&(f.child.flags|=8192),k1(f,f.updateQueue),Ot(f),null;case 4:return ge(),u===null&&Sw(f.stateNode.containerInfo),Ot(f),null;case 10:return As(f.type),Ot(f),null;case 19:if(ae(sn),x=f.memoizedState,x===null)return Ot(f),null;if(m=(f.flags&128)!==0,E=x.rendering,E===null)if(m)Mg(x,!1);else{if(Lt!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(E=$1(u),E!==null){for(f.flags|=128,Mg(x,!1),u=E.updateQueue,f.updateQueue=u,k1(f,u),f.subtreeFlags=0,u=g,g=f.child;g!==null;)UN(g,u),g=g.sibling;return se(sn,sn.current&1|2),f.child}u=u.sibling}x.tail!==null&&Kt()>R1&&(f.flags|=128,m=!0,Mg(x,!1),f.lanes=4194304)}else{if(!m)if(u=$1(E),u!==null){if(f.flags|=128,m=!0,u=u.updateQueue,f.updateQueue=u,k1(f,u),Mg(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!at)return Ot(f),null}else 2*Kt()-x.renderingStartTime>R1&&g!==536870912&&(f.flags|=128,m=!0,Mg(x,!1),f.lanes=4194304);x.isBackwards?(E.sibling=f.child,f.child=E):(u=x.last,u!==null?u.sibling=E:f.child=E,x.last=E)}return x.tail!==null?(f=x.tail,x.rendering=f,x.tail=f.sibling,x.renderingStartTime=Kt(),f.sibling=null,u=sn.current,se(sn,m?u&1|2:u&1),f):(Ot(f),null);case 22:case 23:return Cs(f),wE(),m=f.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(f.flags|=8192):m&&(f.flags|=8192),m?(g&536870912)!==0&&(f.flags&128)===0&&(Ot(f),f.subtreeFlags&6&&(f.flags|=8192)):Ot(f),g=f.updateQueue,g!==null&&k1(f,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),m=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(m=f.memoizedState.cachePool.pool),m!==g&&(f.flags|=2048),u!==null&&ae(ml),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),As(an),Ot(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function kQ(u,f){switch(lE(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return As(an),ge(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return ze(f),null;case 13:if(Cs(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(i(340));dg()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return ae(sn),null;case 4:return ge(),null;case 10:return As(f.type),null;case 22:case 23:return Cs(f),wE(),u!==null&&ae(ml),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return As(an),null;case 25:return null;default:return null}}function f5(u,f){switch(lE(f),f.tag){case 3:As(an),ge();break;case 26:case 27:case 5:ze(f);break;case 4:ge();break;case 13:Cs(f);break;case 19:ae(sn);break;case 10:As(f.type);break;case 22:case 23:Cs(f),wE(),u!==null&&ae(ml);break;case 24:As(an)}}function Tg(u,f){try{var g=f.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&u)===u){m=void 0;var E=g.create,M=g.inst;m=E(),M.destroy=m}g=g.next}while(g!==x)}}catch(k){bt(f,f.return,k)}}function jo(u,f,g){try{var m=f.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&u)===u){var M=m.inst,k=M.destroy;if(k!==void 0){M.destroy=void 0,x=f;var j=g,W=k;try{W()}catch(ne){bt(x,j,ne)}}}m=m.next}while(m!==E)}}catch(ne){bt(f,f.return,ne)}}function d5(u){var f=u.updateQueue;if(f!==null){var g=u.stateNode;try{JN(f,g)}catch(m){bt(u,u.return,m)}}}function h5(u,f,g){g.props=vl(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(m){bt(u,f,m)}}function Dg(u,f){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof g=="function"?u.refCleanup=g(m):g.current=m}}catch(x){bt(u,f,x)}}function Aa(u,f){var g=u.ref,m=u.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){bt(u,f,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){bt(u,f,x)}else g.current=null}function g5(u){var f=u.type,g=u.memoizedProps,m=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){bt(u,u.return,x)}}function ZE(u,f,g){try{var m=u.stateNode;KQ(m,u.type,g,f),m[_i]=f}catch(x){bt(u,u.return,x)}}function p5(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Vo(u.type)||u.tag===4}function KE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||p5(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Vo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function JE(u,f,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(u),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=q1));else if(m!==4&&(m===27&&Vo(u.type)&&(g=u.stateNode,f=null),u=u.child,u!==null))for(JE(u,f,g),u=u.sibling;u!==null;)JE(u,f,g),u=u.sibling}function O1(u,f,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,f?g.insertBefore(u,f):g.appendChild(u);else if(m!==4&&(m===27&&Vo(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(O1(u,f,g),u=u.sibling;u!==null;)O1(u,f,g),u=u.sibling}function m5(u){var f=u.stateNode,g=u.memoizedProps;try{for(var m=u.type,x=f.attributes;x.length;)f.removeAttributeNode(x[0]);Nn(f,m,g),f[Hn]=u,f[_i]=g}catch(E){bt(u,u.return,E)}}var Ds=!1,Gt=!1,ew=!1,y5=typeof WeakSet=="function"?WeakSet:Set,yn=null;function OQ(u,f){if(u=u.containerInfo,_w=Q1,u=MN(u),KS(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var M=0,k=-1,j=-1,W=0,ne=0,re=u,Q=null;t:for(;;){for(var Z;re!==g||x!==0&&re.nodeType!==3||(k=M+x),re!==E||m!==0&&re.nodeType!==3||(j=M+m),re.nodeType===3&&(M+=re.nodeValue.length),(Z=re.firstChild)!==null;)Q=re,re=Z;for(;;){if(re===u)break t;if(Q===g&&++W===x&&(k=M),Q===E&&++ne===m&&(j=M),(Z=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Z}g=k===-1||j===-1?null:{start:k,end:j}}else g=null}g=g||{start:0,end:0}}else g=null;for(Aw={focusedElem:u,selectionRange:g},Q1=!1,yn=f;yn!==null;)if(f=yn,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,yn=u;else for(;yn!==null;){switch(f=yn,E=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,g=f,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var Te=vl(g.type,x,g.elementType===g.type);u=m.getSnapshotBeforeUpdate(Te,E),m.__reactInternalSnapshotBeforeUpdate=u}catch(Ce){bt(g,g.return,Ce)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,g=u.nodeType,g===9)Mw(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Mw(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=f.sibling,u!==null){u.return=f.return,yn=u;break}yn=f.return}}function v5(u,f,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Po(u,g),m&4&&Tg(5,g);break;case 1:if(Po(u,g),m&4)if(u=g.stateNode,f===null)try{u.componentDidMount()}catch(M){bt(g,g.return,M)}else{var x=vl(g.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(x,f,u.__reactInternalSnapshotBeforeUpdate)}catch(M){bt(g,g.return,M)}}m&64&&d5(g),m&512&&Dg(g,g.return);break;case 3:if(Po(u,g),m&64&&(u=g.updateQueue,u!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{JN(u,f)}catch(M){bt(g,g.return,M)}}break;case 27:f===null&&m&4&&m5(g);case 26:case 5:Po(u,g),f===null&&m&4&&g5(g),m&512&&Dg(g,g.return);break;case 12:Po(u,g);break;case 13:Po(u,g),m&4&&S5(u,g),m&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=PQ.bind(null,g),aZ(u,g))));break;case 22:if(m=g.memoizedState!==null||Ds,!m){f=f!==null&&f.memoizedState!==null||Gt,x=Ds;var E=Gt;Ds=m,(Gt=f)&&!E?Io(u,g,(g.subtreeFlags&8772)!==0):Po(u,g),Ds=x,Gt=E}break;case 30:break;default:Po(u,g)}}function b5(u){var f=u.alternate;f!==null&&(u.alternate=null,b5(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&NS(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ct=null,Ci=!1;function ks(u,f,g){for(g=g.child;g!==null;)x5(u,f,g),g=g.sibling}function x5(u,f,g){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Zh,g)}catch{}switch(g.tag){case 26:Gt||Aa(g,f),ks(u,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Gt||Aa(g,f);var m=Ct,x=Ci;Vo(g.type)&&(Ct=g.stateNode,Ci=!1),ks(u,f,g),Bg(g.stateNode),Ct=m,Ci=x;break;case 5:Gt||Aa(g,f);case 6:if(m=Ct,x=Ci,Ct=null,ks(u,f,g),Ct=m,Ci=x,Ct!==null)if(Ci)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(g.stateNode)}catch(E){bt(g,f,E)}else try{Ct.removeChild(g.stateNode)}catch(E){bt(g,f,E)}break;case 18:Ct!==null&&(Ci?(u=Ct,u6(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),Xg(u)):u6(Ct,g.stateNode));break;case 4:m=Ct,x=Ci,Ct=g.stateNode.containerInfo,Ci=!0,ks(u,f,g),Ct=m,Ci=x;break;case 0:case 11:case 14:case 15:Gt||jo(2,g,f),Gt||jo(4,g,f),ks(u,f,g);break;case 1:Gt||(Aa(g,f),m=g.stateNode,typeof m.componentWillUnmount=="function"&&h5(g,f,m)),ks(u,f,g);break;case 21:ks(u,f,g);break;case 22:Gt=(m=Gt)||g.memoizedState!==null,ks(u,f,g),Gt=m;break;default:ks(u,f,g)}}function S5(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Xg(u)}catch(g){bt(f,f.return,g)}}function NQ(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new y5),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new y5),f;default:throw Error(i(435,u.tag))}}function tw(u,f){var g=NQ(u);f.forEach(function(m){var x=IQ.bind(null,u,m);g.has(m)||(g.add(m),m.then(x,x))})}function Xi(u,f){var g=f.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=u,M=f,k=M;e:for(;k!==null;){switch(k.tag){case 27:if(Vo(k.type)){Ct=k.stateNode,Ci=!1;break e}break;case 5:Ct=k.stateNode,Ci=!1;break e;case 3:case 4:Ct=k.stateNode.containerInfo,Ci=!0;break e}k=k.return}if(Ct===null)throw Error(i(160));x5(E,M,x),Ct=null,Ci=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)E5(f,u),f=f.sibling}var Ir=null;function E5(u,f){var g=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Xi(f,u),Vi(u),m&4&&(jo(3,u,u.return),Tg(3,u),jo(5,u,u.return));break;case 1:Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),m&64&&Ds&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Ir;if(Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=u.memoizedState,g===null)if(m===null)if(u.stateNode===null){e:{m=u.type,g=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[eg]||E[Hn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Nn(E,m,g),E[Hn]=u,pn(E),m=E;break e;case"link":var M=m6("link","href",x).get(m+(g.href||""));if(M){for(var k=0;k<M.length;k++)if(E=M[k],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){M.splice(k,1);break t}}E=x.createElement(m),Nn(E,m,g),x.head.appendChild(E);break;case"meta":if(M=m6("meta","content",x).get(m+(g.content||""))){for(k=0;k<M.length;k++)if(E=M[k],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){M.splice(k,1);break t}}E=x.createElement(m),Nn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Hn]=u,pn(E),m=E}u.stateNode=m}else y6(x,u.type,u.stateNode);else u.stateNode=p6(x,m,u.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?y6(x,u.type,u.stateNode):p6(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&ZE(u,u.memoizedProps,g.memoizedProps)}break;case 27:Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),g!==null&&m&4&&ZE(u,u.memoizedProps,g.memoizedProps);break;case 5:if(Xi(f,u),Vi(u),m&512&&(Gt||g===null||Aa(g,g.return)),u.flags&32){x=u.stateNode;try{of(x,"")}catch(Z){bt(u,u.return,Z)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,ZE(u,x,g!==null?g.memoizedProps:x)),m&1024&&(ew=!0);break;case 6:if(Xi(f,u),Vi(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,g=u.stateNode;try{g.nodeValue=m}catch(Z){bt(u,u.return,Z)}}break;case 3:if(X1=null,x=Ir,Ir=G1(f.containerInfo),Xi(f,u),Ir=x,Vi(u),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Xg(f.containerInfo)}catch(Z){bt(u,u.return,Z)}ew&&(ew=!1,w5(u));break;case 4:m=Ir,Ir=G1(u.stateNode.containerInfo),Xi(f,u),Vi(u),Ir=m;break;case 12:Xi(f,u),Vi(u);break;case 13:Xi(f,u),Vi(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(ow=Kt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,tw(u,m)));break;case 22:x=u.memoizedState!==null;var j=g!==null&&g.memoizedState!==null,W=Ds,ne=Gt;if(Ds=W||x,Gt=ne||j,Xi(f,u),Gt=ne,Ds=W,Vi(u),m&8192)e:for(f=u.stateNode,f._visibility=x?f._visibility&-2:f._visibility|1,x&&(g===null||j||Ds||Gt||bl(u)),g=null,f=u;;){if(f.tag===5||f.tag===26){if(g===null){j=g=f;try{if(E=j.stateNode,x)M=E.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{k=j.stateNode;var re=j.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){bt(j,j.return,Z)}}}else if(f.tag===6){if(g===null){j=f;try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(Z){bt(j,j.return,Z)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}m&4&&(m=u.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,tw(u,g))));break;case 19:Xi(f,u),Vi(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,tw(u,m)));break;case 30:break;case 21:break;default:Xi(f,u),Vi(u)}}function Vi(u){var f=u.flags;if(f&2){try{for(var g,m=u.return;m!==null;){if(p5(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=KE(u);O1(u,E,x);break;case 5:var M=g.stateNode;g.flags&32&&(of(M,""),g.flags&=-33);var k=KE(u);O1(u,k,M);break;case 3:case 4:var j=g.stateNode.containerInfo,W=KE(u);JE(u,W,j);break;default:throw Error(i(161))}}catch(ne){bt(u,u.return,ne)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function w5(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;w5(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Po(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)v5(u,f.alternate,f),f=f.sibling}function bl(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:jo(4,f,f.return),bl(f);break;case 1:Aa(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&h5(f,f.return,g),bl(f);break;case 27:Bg(f.stateNode);case 26:case 5:Aa(f,f.return),bl(f);break;case 22:f.memoizedState===null&&bl(f);break;case 30:bl(f);break;default:bl(f)}u=u.sibling}}function Io(u,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var m=f.alternate,x=u,E=f,M=E.flags;switch(E.tag){case 0:case 11:case 15:Io(x,E,g),Tg(4,E);break;case 1:if(Io(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){bt(m,m.return,W)}if(m=E,x=m.updateQueue,x!==null){var k=m.stateNode;try{var j=x.shared.hiddenCallbacks;if(j!==null)for(x.shared.hiddenCallbacks=null,x=0;x<j.length;x++)KN(j[x],k)}catch(W){bt(m,m.return,W)}}g&&M&64&&d5(E),Dg(E,E.return);break;case 27:m5(E);case 26:case 5:Io(x,E,g),g&&m===null&&M&4&&g5(E),Dg(E,E.return);break;case 12:Io(x,E,g);break;case 13:Io(x,E,g),g&&M&4&&S5(x,E);break;case 22:E.memoizedState===null&&Io(x,E,g),Dg(E,E.return);break;case 30:break;default:Io(x,E,g)}f=f.sibling}}function nw(u,f){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&pg(g))}function iw(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&pg(u))}function $a(u,f,g,m){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)_5(u,f,g,m),f=f.sibling}function _5(u,f,g,m){var x=f.flags;switch(f.tag){case 0:case 11:case 15:$a(u,f,g,m),x&2048&&Tg(9,f);break;case 1:$a(u,f,g,m);break;case 3:$a(u,f,g,m),x&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&pg(u)));break;case 12:if(x&2048){$a(u,f,g,m),u=f.stateNode;try{var E=f.memoizedProps,M=E.id,k=E.onPostCommit;typeof k=="function"&&k(M,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(j){bt(f,f.return,j)}}else $a(u,f,g,m);break;case 13:$a(u,f,g,m);break;case 23:break;case 22:E=f.stateNode,M=f.alternate,f.memoizedState!==null?E._visibility&2?$a(u,f,g,m):kg(u,f):E._visibility&2?$a(u,f,g,m):(E._visibility|=2,$f(u,f,g,m,(f.subtreeFlags&10256)!==0)),x&2048&&nw(M,f);break;case 24:$a(u,f,g,m),x&2048&&iw(f.alternate,f);break;default:$a(u,f,g,m)}}function $f(u,f,g,m,x){for(x=x&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var E=u,M=f,k=g,j=m,W=M.flags;switch(M.tag){case 0:case 11:case 15:$f(E,M,k,j,x),Tg(8,M);break;case 23:break;case 22:var ne=M.stateNode;M.memoizedState!==null?ne._visibility&2?$f(E,M,k,j,x):kg(E,M):(ne._visibility|=2,$f(E,M,k,j,x)),x&&W&2048&&nw(M.alternate,M);break;case 24:$f(E,M,k,j,x),x&&W&2048&&iw(M.alternate,M);break;default:$f(E,M,k,j,x)}f=f.sibling}}function kg(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=u,m=f,x=m.flags;switch(m.tag){case 22:kg(g,m),x&2048&&nw(m.alternate,m);break;case 24:kg(g,m),x&2048&&iw(m.alternate,m);break;default:kg(g,m)}f=f.sibling}}var Og=8192;function Cf(u){if(u.subtreeFlags&Og)for(u=u.child;u!==null;)A5(u),u=u.sibling}function A5(u){switch(u.tag){case 26:Cf(u),u.flags&Og&&u.memoizedState!==null&&vZ(Ir,u.memoizedState,u.memoizedProps);break;case 5:Cf(u);break;case 3:case 4:var f=Ir;Ir=G1(u.stateNode.containerInfo),Cf(u),Ir=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Og,Og=16777216,Cf(u),Og=f):Cf(u));break;default:Cf(u)}}function $5(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Ng(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];yn=m,M5(m,u)}$5(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)C5(u),u=u.sibling}function C5(u){switch(u.tag){case 0:case 11:case 15:Ng(u),u.flags&2048&&jo(9,u,u.return);break;case 3:Ng(u);break;case 12:Ng(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,N1(u)):Ng(u);break;default:Ng(u)}}function N1(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];yn=m,M5(m,u)}$5(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:jo(8,f,f.return),N1(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,N1(f));break;default:N1(f)}u=u.sibling}}function M5(u,f){for(;yn!==null;){var g=yn;switch(g.tag){case 0:case 11:case 15:jo(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:pg(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,yn=m;else e:for(g=u;yn!==null;){m=yn;var x=m.sibling,E=m.return;if(b5(m),m===g){yn=null;break e}if(x!==null){x.return=E,yn=x;break e}yn=E}}}var RQ={getCacheForType:function(u){var f=Gn(an),g=f.data.get(u);return g===void 0&&(g=u(),f.data.set(u,g)),g}},zQ=typeof WeakMap=="function"?WeakMap:Map,lt=0,Et=null,He=null,Ve=0,ct=0,Wi=null,qo=!1,Mf=!1,rw=!1,Os=0,Lt=0,Ho=0,xl=0,aw=0,Sr=0,Tf=0,Rg=null,Mi=null,sw=!1,ow=0,R1=1/0,z1=null,Go=null,On=0,Yo=null,Df=null,kf=0,uw=0,lw=null,T5=null,zg=0,cw=null;function Qi(){if((lt&2)!==0&&Ve!==0)return Ve&-Ve;if(N.T!==null){var u=vf;return u!==0?u:yw()}return GO()}function D5(){Sr===0&&(Sr=(Ve&536870912)===0||at?PO():536870912);var u=xr.current;return u!==null&&(u.flags|=32),Sr}function Zi(u,f,g){(u===Et&&(ct===2||ct===9)||u.cancelPendingCommit!==null)&&(Of(u,0),Xo(u,Ve,Sr,!1)),Jh(u,g),((lt&2)===0||u!==Et)&&(u===Et&&((lt&2)===0&&(xl|=g),Lt===4&&Xo(u,Ve,Sr,!1)),Ca(u))}function k5(u,f,g){if((lt&6)!==0)throw Error(i(327));var m=!g&&(f&124)===0&&(f&u.expiredLanes)===0||Kh(u,f),x=m?UQ(u,f):hw(u,f,!0),E=m;do{if(x===0){Mf&&!m&&Xo(u,f,0,!1);break}else{if(g=u.current.alternate,E&&!FQ(g)){x=hw(u,f,!1),E=!1;continue}if(x===2){if(E=f,u.errorRecoveryDisabledLanes&E)var M=0;else M=u.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){f=M;e:{var k=u;x=Rg;var j=k.current.memoizedState.isDehydrated;if(j&&(Of(k,M).flags|=256),M=hw(k,M,!1),M!==2){if(rw&&!j){k.errorRecoveryDisabledLanes|=E,xl|=E,x=4;break e}E=Mi,Mi=x,E!==null&&(Mi===null?Mi=E:Mi.push.apply(Mi,E))}x=M}if(E=!1,x!==2)continue}}if(x===1){Of(u,0),Xo(u,f,0,!0);break}e:{switch(m=u,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:Xo(m,f,Sr,!qo);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(x=ow+300-Kt(),10<x)){if(Xo(m,f,Sr,!qo),Ym(m,0,!0)!==0)break e;m.timeoutHandle=s6(O5.bind(null,m,g,Mi,z1,sw,f,Sr,xl,Tf,qo,E,2,-0,0),x);break e}O5(m,g,Mi,z1,sw,f,Sr,xl,Tf,qo,E,0,-0,0)}}break}while(!0);Ca(u)}function O5(u,f,g,m,x,E,M,k,j,W,ne,re,Q,Z){if(u.timeoutHandle=-1,re=f.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Ig={stylesheets:null,count:0,unsuspend:yZ},A5(f),re=bZ(),re!==null)){u.cancelPendingCommit=re(B5.bind(null,u,f,E,g,m,x,M,k,j,ne,1,Q,Z)),Xo(u,E,M,!W);return}B5(u,f,E,g,m,x,M,k,j)}function FQ(u){for(var f=u;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!Gi(E(),x))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Xo(u,f,g,m){f&=~aw,f&=~xl,u.suspendedLanes|=f,u.pingedLanes&=~f,m&&(u.warmLanes|=f),m=u.expirationTimes;for(var x=f;0<x;){var E=31-Hi(x),M=1<<E;m[E]=-1,x&=~M}g!==0&&qO(u,g,f)}function F1(){return(lt&6)===0?(Fg(0),!1):!0}function fw(){if(He!==null){if(ct===0)var u=He.return;else u=He,_s=gl=null,ME(u),_f=null,$g=0,u=He;for(;u!==null;)f5(u.alternate,u),u=u.return;He=null}}function Of(u,f){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,eZ(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),fw(),Et=u,He=g=Ss(u.current,null),Ve=f,ct=0,Wi=null,qo=!1,Mf=Kh(u,f),rw=!1,Tf=Sr=aw=xl=Ho=Lt=0,Mi=Rg=null,sw=!1,(f&8)!==0&&(f|=f&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=f;0<m;){var x=31-Hi(m),E=1<<x;f|=u[x],m&=~E}return Os=f,r1(),g}function N5(u,f){Be=null,N.H=w1,f===yg||f===h1?(f=QN(),ct=3):f===XN?(f=QN(),ct=4):ct=f===ZR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Wi=f,He===null&&(Lt=1,M1(u,mr(f,u.current)))}function R5(){var u=N.H;return N.H=w1,u===null?w1:u}function z5(){var u=N.A;return N.A=RQ,u}function dw(){Lt=4,qo||(Ve&4194048)!==Ve&&xr.current!==null||(Mf=!0),(Ho&134217727)===0&&(xl&134217727)===0||Et===null||Xo(Et,Ve,Sr,!1)}function hw(u,f,g){var m=lt;lt|=2;var x=R5(),E=z5();(Et!==u||Ve!==f)&&(z1=null,Of(u,f)),f=!1;var M=Lt;e:do try{if(ct!==0&&He!==null){var k=He,j=Wi;switch(ct){case 8:fw(),M=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(f=!0);var W=ct;if(ct=0,Wi=null,Nf(u,k,j,W),g&&Mf){M=0;break e}break;default:W=ct,ct=0,Wi=null,Nf(u,k,j,W)}}LQ(),M=Lt;break}catch(ne){N5(u,ne)}while(!0);return f&&u.shellSuspendCounter++,_s=gl=null,lt=m,N.H=x,N.A=E,He===null&&(Et=null,Ve=0,r1()),M}function LQ(){for(;He!==null;)F5(He)}function UQ(u,f){var g=lt;lt|=2;var m=R5(),x=z5();Et!==u||Ve!==f?(z1=null,R1=Kt()+500,Of(u,f)):Mf=Kh(u,f);e:do try{if(ct!==0&&He!==null){f=He;var E=Wi;t:switch(ct){case 1:ct=0,Wi=null,Nf(u,f,E,1);break;case 2:case 9:if(VN(E)){ct=0,Wi=null,L5(f);break}f=function(){ct!==2&&ct!==9||Et!==u||(ct=7),Ca(u)},E.then(f,f);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:VN(E)?(ct=0,Wi=null,L5(f)):(ct=0,Wi=null,Nf(u,f,E,7));break;case 5:var M=null;switch(He.tag){case 26:M=He.memoizedState;case 5:case 27:var k=He;if(!M||v6(M)){ct=0,Wi=null;var j=k.sibling;if(j!==null)He=j;else{var W=k.return;W!==null?(He=W,L1(W)):He=null}break t}}ct=0,Wi=null,Nf(u,f,E,5);break;case 6:ct=0,Wi=null,Nf(u,f,E,6);break;case 8:fw(),Lt=6;break e;default:throw Error(i(462))}}BQ();break}catch(ne){N5(u,ne)}while(!0);return _s=gl=null,N.H=m,N.A=x,lt=g,He!==null?0:(Et=null,Ve=0,r1(),Lt)}function BQ(){for(;He!==null&&!Zt();)F5(He)}function F5(u){var f=l5(u.alternate,u,Os);u.memoizedProps=u.pendingProps,f===null?L1(u):He=f}function L5(u){var f=u,g=f.alternate;switch(f.tag){case 15:case 0:f=i5(g,f,f.pendingProps,f.type,void 0,Ve);break;case 11:f=i5(g,f,f.pendingProps,f.type.render,f.ref,Ve);break;case 5:ME(f);default:f5(g,f),f=He=UN(f,Os),f=l5(g,f,Os)}u.memoizedProps=u.pendingProps,f===null?L1(u):He=f}function Nf(u,f,g,m){_s=gl=null,ME(f),_f=null,$g=0;var x=f.return;try{if(MQ(u,x,f,g,Ve)){Lt=1,M1(u,mr(g,u.current)),He=null;return}}catch(E){if(x!==null)throw He=x,E;Lt=1,M1(u,mr(g,u.current)),He=null;return}f.flags&32768?(at||m===1?u=!0:Mf||(Ve&536870912)!==0?u=!1:(qo=u=!0,(m===2||m===9||m===3||m===6)&&(m=xr.current,m!==null&&m.tag===13&&(m.flags|=16384))),U5(f,u)):L1(f)}function L1(u){var f=u;do{if((f.flags&32768)!==0){U5(f,qo);return}u=f.return;var g=DQ(f.alternate,f,Os);if(g!==null){He=g;return}if(f=f.sibling,f!==null){He=f;return}He=f=u}while(f!==null);Lt===0&&(Lt=5)}function U5(u,f){do{var g=kQ(u.alternate,u);if(g!==null){g.flags&=32767,He=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(u=u.sibling,u!==null)){He=u;return}He=u=g}while(u!==null);Lt=6,He=null}function B5(u,f,g,m,x,E,M,k,j){u.cancelPendingCommit=null;do U1();while(On!==0);if((lt&6)!==0)throw Error(i(327));if(f!==null){if(f===u.current)throw Error(i(177));if(E=f.lanes|f.childLanes,E|=iE,yW(u,g,E,M,k,j),u===Et&&(He=Et=null,Ve=0),Df=f,Yo=u,kf=g,uw=E,lw=x,T5=m,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,qQ(qm,function(){return H5(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||m){m=N.T,N.T=null,x=q.p,q.p=2,M=lt,lt|=4;try{OQ(u,f,g)}finally{lt=M,q.p=x,N.T=m}}On=1,j5(),P5(),I5()}}function j5(){if(On===1){On=0;var u=Yo,f=Df,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=N.T,N.T=null;var m=q.p;q.p=2;var x=lt;lt|=4;try{E5(f,u);var E=Aw,M=MN(u.containerInfo),k=E.focusedElem,j=E.selectionRange;if(M!==k&&k&&k.ownerDocument&&CN(k.ownerDocument.documentElement,k)){if(j!==null&&KS(k)){var W=j.start,ne=j.end;if(ne===void 0&&(ne=W),"selectionStart"in k)k.selectionStart=W,k.selectionEnd=Math.min(ne,k.value.length);else{var re=k.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Te=k.textContent.length,Ce=Math.min(j.start,Te),mt=j.end===void 0?Ce:Math.min(j.end,Te);!Z.extend&&Ce>mt&&(M=mt,mt=Ce,Ce=M);var G=$N(k,Ce),I=$N(k,mt);if(G&&I&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==I.node||Z.focusOffset!==I.offset)){var X=re.createRange();X.setStart(G.node,G.offset),Z.removeAllRanges(),Ce>mt?(Z.addRange(X),Z.extend(I.node,I.offset)):(X.setEnd(I.node,I.offset),Z.addRange(X))}}}}for(re=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<re.length;k++){var ie=re[k];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Q1=!!_w,Aw=_w=null}finally{lt=x,q.p=m,N.T=g}}u.current=f,On=2}}function P5(){if(On===2){On=0;var u=Yo,f=Df,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=N.T,N.T=null;var m=q.p;q.p=2;var x=lt;lt|=4;try{v5(u,f.alternate,f)}finally{lt=x,q.p=m,N.T=g}}On=3}}function I5(){if(On===4||On===3){On=0,gn();var u=Yo,f=Df,g=kf,m=T5;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?On=5:(On=0,Df=Yo=null,q5(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(Go=null),kS(g),f=f.stateNode,qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Zh,f,void 0,(f.current.flags&128)===128)}catch{}if(m!==null){f=N.T,x=q.p,q.p=2,N.T=null;try{for(var E=u.onRecoverableError,M=0;M<m.length;M++){var k=m[M];E(k.value,{componentStack:k.stack})}}finally{N.T=f,q.p=x}}(kf&3)!==0&&U1(),Ca(u),x=u.pendingLanes,(g&4194090)!==0&&(x&42)!==0?u===cw?zg++:(zg=0,cw=u):zg=0,Fg(0)}}function q5(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,pg(f)))}function U1(u){return j5(),P5(),I5(),H5()}function H5(){if(On!==5)return!1;var u=Yo,f=uw;uw=0;var g=kS(kf),m=N.T,x=q.p;try{q.p=32>g?32:g,N.T=null,g=lw,lw=null;var E=Yo,M=kf;if(On=0,Df=Yo=null,kf=0,(lt&6)!==0)throw Error(i(331));var k=lt;if(lt|=4,C5(E.current),_5(E,E.current,M,g),lt=k,Fg(0,!1),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Zh,E)}catch{}return!0}finally{q.p=x,N.T=m,q5(u,f)}}function G5(u,f,g){f=mr(g,f),f=IE(u.stateNode,f,2),u=Fo(u,f,2),u!==null&&(Jh(u,2),Ca(u))}function bt(u,f,g){if(u.tag===3)G5(u,u,g);else for(;f!==null;){if(f.tag===3){G5(f,u,g);break}else if(f.tag===1){var m=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Go===null||!Go.has(m))){u=mr(g,u),g=WR(2),m=Fo(f,g,2),m!==null&&(QR(g,m,f,u),Jh(m,2),Ca(m));break}}f=f.return}}function gw(u,f,g){var m=u.pingCache;if(m===null){m=u.pingCache=new zQ;var x=new Set;m.set(f,x)}else x=m.get(f),x===void 0&&(x=new Set,m.set(f,x));x.has(g)||(rw=!0,x.add(g),u=jQ.bind(null,u,f,g),f.then(u,u))}function jQ(u,f,g){var m=u.pingCache;m!==null&&m.delete(f),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Et===u&&(Ve&g)===g&&(Lt===4||Lt===3&&(Ve&62914560)===Ve&&300>Kt()-ow?(lt&2)===0&&Of(u,0):aw|=g,Tf===Ve&&(Tf=0)),Ca(u)}function Y5(u,f){f===0&&(f=IO()),u=gf(u,f),u!==null&&(Jh(u,f),Ca(u))}function PQ(u){var f=u.memoizedState,g=0;f!==null&&(g=f.retryLane),Y5(u,g)}function IQ(u,f){var g=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(f),Y5(u,g)}function qQ(u,f){return qt(u,f)}var B1=null,Rf=null,pw=!1,j1=!1,mw=!1,Sl=0;function Ca(u){u!==Rf&&u.next===null&&(Rf===null?B1=Rf=u:Rf=Rf.next=u),j1=!0,pw||(pw=!0,GQ())}function Fg(u,f){if(!mw&&j1){mw=!0;do for(var g=!1,m=B1;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var M=m.suspendedLanes,k=m.pingedLanes;E=(1<<31-Hi(42|u)+1)-1,E&=x&~(M&~k),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,Q5(m,E))}else E=Ve,E=Ym(m,m===Et?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Kh(m,E)||(g=!0,Q5(m,E));m=m.next}while(g);mw=!1}}function HQ(){X5()}function X5(){j1=pw=!1;var u=0;Sl!==0&&(JQ()&&(u=Sl),Sl=0);for(var f=Kt(),g=null,m=B1;m!==null;){var x=m.next,E=V5(m,f);E===0?(m.next=null,g===null?B1=x:g.next=x,x===null&&(Rf=g)):(g=m,(u!==0||(E&3)!==0)&&(j1=!0)),m=x}Fg(u)}function V5(u,f){for(var g=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var M=31-Hi(E),k=1<<M,j=x[M];j===-1?((k&g)===0||(k&m)!==0)&&(x[M]=mW(k,f)):j<=f&&(u.expiredLanes|=k),E&=~k}if(f=Et,g=Ve,g=Ym(u,u===f?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,g===0||u===f&&(ct===2||ct===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&Ze(m),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||Kh(u,g)){if(f=g&-g,f===u.callbackPriority)return f;switch(m!==null&&Ze(m),kS(g)){case 2:case 8:g=BO;break;case 32:g=qm;break;case 268435456:g=jO;break;default:g=qm}return m=W5.bind(null,u),g=qt(g,m),u.callbackPriority=f,u.callbackNode=g,f}return m!==null&&m!==null&&Ze(m),u.callbackPriority=2,u.callbackNode=null,2}function W5(u,f){if(On!==0&&On!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(U1()&&u.callbackNode!==g)return null;var m=Ve;return m=Ym(u,u===Et?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(k5(u,m,f),V5(u,Kt()),u.callbackNode!=null&&u.callbackNode===g?W5.bind(null,u):null)}function Q5(u,f){if(U1())return null;k5(u,f,!0)}function GQ(){tZ(function(){(lt&6)!==0?qt(UO,HQ):X5()})}function yw(){return Sl===0&&(Sl=PO()),Sl}function Z5(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Zm(""+u)}function K5(u,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,u.id&&g.setAttribute("form",u.id),f.parentNode.insertBefore(g,f),u=new FormData(u),g.parentNode.removeChild(g),u}function YQ(u,f,g,m,x){if(f==="submit"&&g&&g.stateNode===x){var E=Z5((x[_i]||null).action),M=m.submitter;M&&(f=(f=M[_i]||null)?Z5(f.formAction):M.getAttribute("formAction"),f!==null&&(E=f,M=null));var k=new t1("action","action",null,m,x);u.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Sl!==0){var j=M?K5(x,M):new FormData(x);LE(g,{pending:!0,data:j,method:x.method,action:E},null,j)}}else typeof E=="function"&&(k.preventDefault(),j=M?K5(x,M):new FormData(x),LE(g,{pending:!0,data:j,method:x.method,action:E},E,j))},currentTarget:x}]})}}for(var vw=0;vw<nE.length;vw++){var bw=nE[vw],XQ=bw.toLowerCase(),VQ=bw[0].toUpperCase()+bw.slice(1);Pr(XQ,"on"+VQ)}Pr(kN,"onAnimationEnd"),Pr(ON,"onAnimationIteration"),Pr(NN,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(fQ,"onTransitionRun"),Pr(dQ,"onTransitionStart"),Pr(hQ,"onTransitionCancel"),Pr(RN,"onTransitionEnd"),rf("onMouseEnter",["mouseout","mouseover"]),rf("onMouseLeave",["mouseout","mouseover"]),rf("onPointerEnter",["pointerout","pointerover"]),rf("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lg));function J5(u,f){f=(f&4)!==0;for(var g=0;g<u.length;g++){var m=u[g],x=m.event;m=m.listeners;e:{var E=void 0;if(f)for(var M=m.length-1;0<=M;M--){var k=m[M],j=k.instance,W=k.currentTarget;if(k=k.listener,j!==E&&x.isPropagationStopped())break e;E=k,x.currentTarget=W;try{E(x)}catch(ne){C1(ne)}x.currentTarget=null,E=j}else for(M=0;M<m.length;M++){if(k=m[M],j=k.instance,W=k.currentTarget,k=k.listener,j!==E&&x.isPropagationStopped())break e;E=k,x.currentTarget=W;try{E(x)}catch(ne){C1(ne)}x.currentTarget=null,E=j}}}}function Ge(u,f){var g=f[OS];g===void 0&&(g=f[OS]=new Set);var m=u+"__bubble";g.has(m)||(e6(f,u,2,!1),g.add(m))}function xw(u,f,g){var m=0;f&&(m|=4),e6(g,u,m,f)}var P1="_reactListening"+Math.random().toString(36).slice(2);function Sw(u){if(!u[P1]){u[P1]=!0,XO.forEach(function(g){g!=="selectionchange"&&(WQ.has(g)||xw(g,!1,u),xw(g,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[P1]||(f[P1]=!0,xw("selectionchange",!1,f))}}function e6(u,f,g,m){switch(_6(f)){case 2:var x=EZ;break;case 8:x=wZ;break;default:x=zw}g=x.bind(null,f,g,u),x=void 0,!qS||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(f,g,{capture:!0,passive:x}):u.addEventListener(f,g,!0):x!==void 0?u.addEventListener(f,g,{passive:x}):u.addEventListener(f,g,!1)}function Ew(u,f,g,m,x){var E=m;if((f&1)===0&&(f&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var k=m.stateNode.containerInfo;if(k===x)break;if(M===4)for(M=m.return;M!==null;){var j=M.tag;if((j===3||j===4)&&M.stateNode.containerInfo===x)return;M=M.return}for(;k!==null;){if(M=ef(k),M===null)return;if(j=M.tag,j===5||j===6||j===26||j===27){m=E=M;continue e}k=k.parentNode}}m=m.return}oN(function(){var W=E,ne=PS(g),re=[];e:{var Q=zN.get(u);if(Q!==void 0){var Z=t1,Te=u;switch(u){case"keypress":if(Jm(g)===0)break e;case"keydown":case"keyup":Z=qW;break;case"focusin":Te="focus",Z=XS;break;case"focusout":Te="blur",Z=XS;break;case"beforeblur":case"afterblur":Z=XS;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=cN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=kW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=YW;break;case kN:case ON:case NN:Z=RW;break;case RN:Z=VW;break;case"scroll":case"scrollend":Z=TW;break;case"wheel":Z=QW;break;case"copy":case"cut":case"paste":Z=FW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=dN;break;case"toggle":case"beforetoggle":Z=KW}var Ce=(f&4)!==0,mt=!Ce&&(u==="scroll"||u==="scrollend"),G=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var I=W,X;I!==null;){var ie=I;if(X=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||X===null||G===null||(ie=ng(I,G),ie!=null&&Ce.push(Ug(I,ie,X))),mt)break;I=I.return}0<Ce.length&&(Q=new Z(Q,Te,null,g,ne),re.push({event:Q,listeners:Ce}))}}if((f&7)===0){e:{if(Q=u==="mouseover"||u==="pointerover",Z=u==="mouseout"||u==="pointerout",Q&&g!==jS&&(Te=g.relatedTarget||g.fromElement)&&(ef(Te)||Te[Jc]))break e;if((Z||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Te=g.relatedTarget||g.toElement,Z=W,Te=Te?ef(Te):null,Te!==null&&(mt=a(Te),Ce=Te.tag,Te!==mt||Ce!==5&&Ce!==27&&Ce!==6)&&(Te=null)):(Z=null,Te=W),Z!==Te)){if(Ce=cN,ie="onMouseLeave",G="onMouseEnter",I="mouse",(u==="pointerout"||u==="pointerover")&&(Ce=dN,ie="onPointerLeave",G="onPointerEnter",I="pointer"),mt=Z==null?Q:tg(Z),X=Te==null?Q:tg(Te),Q=new Ce(ie,I+"leave",Z,g,ne),Q.target=mt,Q.relatedTarget=X,ie=null,ef(ne)===W&&(Ce=new Ce(G,I+"enter",Te,g,ne),Ce.target=X,Ce.relatedTarget=mt,ie=Ce),mt=ie,Z&&Te)t:{for(Ce=Z,G=Te,I=0,X=Ce;X;X=zf(X))I++;for(X=0,ie=G;ie;ie=zf(ie))X++;for(;0<I-X;)Ce=zf(Ce),I--;for(;0<X-I;)G=zf(G),X--;for(;I--;){if(Ce===G||G!==null&&Ce===G.alternate)break t;Ce=zf(Ce),G=zf(G)}Ce=null}else Ce=null;Z!==null&&t6(re,Q,Z,Ce,!1),Te!==null&&mt!==null&&t6(re,mt,Te,Ce,!0)}}e:{if(Q=W?tg(W):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var pe=xN;else if(vN(Q))if(SN)pe=uQ;else{pe=sQ;var Pe=aQ}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&BS(W.elementType)&&(pe=xN):pe=oQ;if(pe&&(pe=pe(u,W))){bN(re,pe,g,ne);break e}Pe&&Pe(u,Q,W),u==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&US(Q,"number",Q.value)}switch(Pe=W?tg(W):window,u){case"focusin":(vN(Pe)||Pe.contentEditable==="true")&&(ff=Pe,JS=W,cg=null);break;case"focusout":cg=JS=ff=null;break;case"mousedown":eE=!0;break;case"contextmenu":case"mouseup":case"dragend":eE=!1,TN(re,g,ne);break;case"selectionchange":if(cQ)break;case"keydown":case"keyup":TN(re,g,ne)}var xe;if(WS)e:{switch(u){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else cf?mN(u,g)&&(Me="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Me="onCompositionStart");Me&&(hN&&g.locale!=="ko"&&(cf||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&cf&&(xe=uN()):(Oo=ne,HS="value"in Oo?Oo.value:Oo.textContent,cf=!0)),Pe=I1(W,Me),0<Pe.length&&(Me=new fN(Me,u,null,g,ne),re.push({event:Me,listeners:Pe}),xe?Me.data=xe:(xe=yN(g),xe!==null&&(Me.data=xe)))),(xe=eQ?tQ(u,g):nQ(u,g))&&(Me=I1(W,"onBeforeInput"),0<Me.length&&(Pe=new fN("onBeforeInput","beforeinput",null,g,ne),re.push({event:Pe,listeners:Me}),Pe.data=xe)),YQ(re,u,W,g,ne)}J5(re,f)})}function Ug(u,f,g){return{instance:u,listener:f,currentTarget:g}}function I1(u,f){for(var g=f+"Capture",m=[];u!==null;){var x=u,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=ng(u,g),x!=null&&m.unshift(Ug(u,x,E)),x=ng(u,f),x!=null&&m.push(Ug(u,x,E))),u.tag===3)return m;u=u.return}return[]}function zf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function t6(u,f,g,m,x){for(var E=f._reactName,M=[];g!==null&&g!==m;){var k=g,j=k.alternate,W=k.stateNode;if(k=k.tag,j!==null&&j===m)break;k!==5&&k!==26&&k!==27||W===null||(j=W,x?(W=ng(g,E),W!=null&&M.unshift(Ug(g,W,j))):x||(W=ng(g,E),W!=null&&M.push(Ug(g,W,j)))),g=g.return}M.length!==0&&u.push({event:f,listeners:M})}var QQ=/\r\n?/g,ZQ=/\u0000|\uFFFD/g;function n6(u){return(typeof u=="string"?u:""+u).replace(QQ,`
`).replace(ZQ,"")}function i6(u,f){return f=n6(f),n6(u)===f}function q1(){}function pt(u,f,g,m,x,E){switch(g){case"children":typeof m=="string"?f==="body"||f==="textarea"&&m===""||of(u,m):(typeof m=="number"||typeof m=="bigint")&&f!=="body"&&of(u,""+m);break;case"className":Vm(u,"class",m);break;case"tabIndex":Vm(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Vm(u,g,m);break;case"style":aN(u,m,E);break;case"data":if(f!=="object"){Vm(u,"data",m);break}case"src":case"href":if(m===""&&(f!=="a"||g!=="href")){u.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=Zm(""+m),u.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(f!=="input"&&pt(u,f,"name",x.name,x,null),pt(u,f,"formEncType",x.formEncType,x,null),pt(u,f,"formMethod",x.formMethod,x,null),pt(u,f,"formTarget",x.formTarget,x,null)):(pt(u,f,"encType",x.encType,x,null),pt(u,f,"method",x.method,x,null),pt(u,f,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=Zm(""+m),u.setAttribute(g,m);break;case"onClick":m!=null&&(u.onclick=q1);break;case"onScroll":m!=null&&Ge("scroll",u);break;case"onScrollEnd":m!=null&&Ge("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}g=Zm(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""+m):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":m===!0?u.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,m):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(g,m):u.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(g):u.setAttribute(g,m);break;case"popover":Ge("beforetoggle",u),Ge("toggle",u),Xm(u,"popover",m);break;case"xlinkActuate":bs(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":bs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":bs(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":bs(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":bs(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":bs(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":bs(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":bs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":bs(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Xm(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=CW.get(g)||g,Xm(u,g,m))}}function ww(u,f,g,m,x,E){switch(g){case"style":aN(u,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof m=="string"?of(u,m):(typeof m=="number"||typeof m=="bigint")&&of(u,""+m);break;case"onScroll":m!=null&&Ge("scroll",u);break;case"onScrollEnd":m!=null&&Ge("scrollend",u);break;case"onClick":m!=null&&(u.onclick=q1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!VO.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),f=g.slice(2,x?g.length-7:void 0),E=u[_i]||null,E=E!=null?E[g]:null,typeof E=="function"&&u.removeEventListener(f,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(f,m,x);break e}g in u?u[g]=m:m===!0?u.setAttribute(g,""):Xm(u,g,m)}}}function Nn(u,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",u),Ge("load",u);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var M=g[E];if(M!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:pt(u,f,E,M,g,null)}}x&&pt(u,f,"srcSet",g.srcSet,g,null),m&&pt(u,f,"src",g.src,g,null);return;case"input":Ge("invalid",u);var k=E=M=x=null,j=null,W=null;for(m in g)if(g.hasOwnProperty(m)){var ne=g[m];if(ne!=null)switch(m){case"name":x=ne;break;case"type":M=ne;break;case"checked":j=ne;break;case"defaultChecked":W=ne;break;case"value":E=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,f));break;default:pt(u,f,m,ne,g,null)}}tN(u,E,k,j,W,M,x,!1),Wm(u);return;case"select":Ge("invalid",u),m=M=E=null;for(x in g)if(g.hasOwnProperty(x)&&(k=g[x],k!=null))switch(x){case"value":E=k;break;case"defaultValue":M=k;break;case"multiple":m=k;default:pt(u,f,x,k,g,null)}f=E,g=M,u.multiple=!!m,f!=null?sf(u,!!m,f,!1):g!=null&&sf(u,!!m,g,!0);return;case"textarea":Ge("invalid",u),E=x=m=null;for(M in g)if(g.hasOwnProperty(M)&&(k=g[M],k!=null))switch(M){case"value":m=k;break;case"defaultValue":x=k;break;case"children":E=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:pt(u,f,M,k,g,null)}iN(u,m,x,E),Wm(u);return;case"option":for(j in g)if(g.hasOwnProperty(j)&&(m=g[j],m!=null))switch(j){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(u,f,j,m,g,null)}return;case"dialog":Ge("beforetoggle",u),Ge("toggle",u),Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":Ge("load",u);break;case"video":case"audio":for(m=0;m<Lg.length;m++)Ge(Lg[m],u);break;case"image":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"embed":case"source":case"link":Ge("error",u),Ge("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in g)if(g.hasOwnProperty(W)&&(m=g[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:pt(u,f,W,m,g,null)}return;default:if(BS(f)){for(ne in g)g.hasOwnProperty(ne)&&(m=g[ne],m!==void 0&&ww(u,f,ne,m,g,void 0));return}}for(k in g)g.hasOwnProperty(k)&&(m=g[k],m!=null&&pt(u,f,k,m,g,null))}function KQ(u,f,g,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,M=null,k=null,j=null,W=null,ne=null;for(Z in g){var re=g[Z];if(g.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=re;default:m.hasOwnProperty(Z)||pt(u,f,Z,null,m,re)}}for(var Q in m){var Z=m[Q];if(re=g[Q],m.hasOwnProperty(Q)&&(Z!=null||re!=null))switch(Q){case"type":E=Z;break;case"name":x=Z;break;case"checked":W=Z;break;case"defaultChecked":ne=Z;break;case"value":M=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,f));break;default:Z!==re&&pt(u,f,Q,Z,m,re)}}LS(u,M,k,j,W,ne,E,x);return;case"select":Z=M=k=Q=null;for(E in g)if(j=g[E],g.hasOwnProperty(E)&&j!=null)switch(E){case"value":break;case"multiple":Z=j;default:m.hasOwnProperty(E)||pt(u,f,E,null,m,j)}for(x in m)if(E=m[x],j=g[x],m.hasOwnProperty(x)&&(E!=null||j!=null))switch(x){case"value":Q=E;break;case"defaultValue":k=E;break;case"multiple":M=E;default:E!==j&&pt(u,f,x,E,m,j)}f=k,g=M,m=Z,Q!=null?sf(u,!!g,Q,!1):!!m!=!!g&&(f!=null?sf(u,!!g,f,!0):sf(u,!!g,g?[]:"",!1));return;case"textarea":Z=Q=null;for(k in g)if(x=g[k],g.hasOwnProperty(k)&&x!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:pt(u,f,k,null,m,x)}for(M in m)if(x=m[M],E=g[M],m.hasOwnProperty(M)&&(x!=null||E!=null))switch(M){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&pt(u,f,M,x,m,E)}nN(u,Q,Z);return;case"option":for(var Te in g)if(Q=g[Te],g.hasOwnProperty(Te)&&Q!=null&&!m.hasOwnProperty(Te))switch(Te){case"selected":u.selected=!1;break;default:pt(u,f,Te,null,m,Q)}for(j in m)if(Q=m[j],Z=g[j],m.hasOwnProperty(j)&&Q!==Z&&(Q!=null||Z!=null))switch(j){case"selected":u.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:pt(u,f,j,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in g)Q=g[Ce],g.hasOwnProperty(Ce)&&Q!=null&&!m.hasOwnProperty(Ce)&&pt(u,f,Ce,null,m,Q);for(W in m)if(Q=m[W],Z=g[W],m.hasOwnProperty(W)&&Q!==Z&&(Q!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,f));break;default:pt(u,f,W,Q,m,Z)}return;default:if(BS(f)){for(var mt in g)Q=g[mt],g.hasOwnProperty(mt)&&Q!==void 0&&!m.hasOwnProperty(mt)&&ww(u,f,mt,void 0,m,Q);for(ne in m)Q=m[ne],Z=g[ne],!m.hasOwnProperty(ne)||Q===Z||Q===void 0&&Z===void 0||ww(u,f,ne,Q,m,Z);return}}for(var G in g)Q=g[G],g.hasOwnProperty(G)&&Q!=null&&!m.hasOwnProperty(G)&&pt(u,f,G,null,m,Q);for(re in m)Q=m[re],Z=g[re],!m.hasOwnProperty(re)||Q===Z||Q==null&&Z==null||pt(u,f,re,Q,m,Z)}var _w=null,Aw=null;function H1(u){return u.nodeType===9?u:u.ownerDocument}function r6(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a6(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function $w(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Cw=null;function JQ(){var u=window.event;return u&&u.type==="popstate"?u===Cw?!1:(Cw=u,!0):(Cw=null,!1)}var s6=typeof setTimeout=="function"?setTimeout:void 0,eZ=typeof clearTimeout=="function"?clearTimeout:void 0,o6=typeof Promise=="function"?Promise:void 0,tZ=typeof queueMicrotask=="function"?queueMicrotask:typeof o6<"u"?function(u){return o6.resolve(null).then(u).catch(nZ)}:s6;function nZ(u){setTimeout(function(){throw u})}function Vo(u){return u==="head"}function u6(u,f){var g=f,m=0,x=0;do{var E=g.nextSibling;if(u.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var M=u.ownerDocument;if(g&1&&Bg(M.documentElement),g&2&&Bg(M.body),g&4)for(g=M.head,Bg(g),M=g.firstChild;M;){var k=M.nextSibling,j=M.nodeName;M[eg]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&M.rel.toLowerCase()==="stylesheet"||g.removeChild(M),M=k}}if(x===0){u.removeChild(E),Xg(f);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);Xg(f)}function Mw(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Mw(g),NS(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function iZ(u,f,g,m){for(;u.nodeType===1;){var x=g;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[eg])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=qr(u.nextSibling),u===null)break}return null}function rZ(u,f,g){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=qr(u.nextSibling),u===null))return null;return u}function Tw(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function aZ(u,f){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")f();else{var m=function(){f(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function qr(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var Dw=null;function l6(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return u;f--}else g==="/$"&&f++}u=u.previousSibling}return null}function c6(u,f,g){switch(f=H1(g),u){case"html":if(u=f.documentElement,!u)throw Error(i(452));return u;case"head":if(u=f.head,!u)throw Error(i(453));return u;case"body":if(u=f.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Bg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);NS(u)}var Er=new Map,f6=new Set;function G1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ns=q.d;q.d={f:sZ,r:oZ,D:uZ,C:lZ,L:cZ,m:fZ,X:hZ,S:dZ,M:gZ};function sZ(){var u=Ns.f(),f=F1();return u||f}function oZ(u){var f=tf(u);f!==null&&f.tag===5&&f.type==="form"?kR(f):Ns.r(u)}var Ff=typeof document>"u"?null:document;function d6(u,f,g){var m=Ff;if(m&&typeof f=="string"&&f){var x=pr(f);x='link[rel="'+u+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),f6.has(x)||(f6.add(x),u={rel:u,crossOrigin:g,href:f},m.querySelector(x)===null&&(f=m.createElement("link"),Nn(f,"link",u),pn(f),m.head.appendChild(f)))}}function uZ(u){Ns.D(u),d6("dns-prefetch",u,null)}function lZ(u,f){Ns.C(u,f),d6("preconnect",u,f)}function cZ(u,f,g){Ns.L(u,f,g);var m=Ff;if(m&&u&&f){var x='link[rel="preload"][as="'+pr(f)+'"]';f==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+pr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+pr(g.imageSizes)+'"]')):x+='[href="'+pr(u)+'"]';var E=x;switch(f){case"style":E=Lf(u);break;case"script":E=Uf(u)}Er.has(E)||(u=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:u,as:f},g),Er.set(E,u),m.querySelector(x)!==null||f==="style"&&m.querySelector(jg(E))||f==="script"&&m.querySelector(Pg(E))||(f=m.createElement("link"),Nn(f,"link",u),pn(f),m.head.appendChild(f)))}}function fZ(u,f){Ns.m(u,f);var g=Ff;if(g&&u){var m=f&&typeof f.as=="string"?f.as:"script",x='link[rel="modulepreload"][as="'+pr(m)+'"][href="'+pr(u)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Uf(u)}if(!Er.has(E)&&(u=d({rel:"modulepreload",href:u},f),Er.set(E,u),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Pg(E)))return}m=g.createElement("link"),Nn(m,"link",u),pn(m),g.head.appendChild(m)}}}function dZ(u,f,g){Ns.S(u,f,g);var m=Ff;if(m&&u){var x=nf(m).hoistableStyles,E=Lf(u);f=f||"default";var M=x.get(E);if(!M){var k={loading:0,preload:null};if(M=m.querySelector(jg(E)))k.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},g),(g=Er.get(E))&&kw(u,g);var j=M=m.createElement("link");pn(j),Nn(j,"link",u),j._p=new Promise(function(W,ne){j.onload=W,j.onerror=ne}),j.addEventListener("load",function(){k.loading|=1}),j.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Y1(M,f,m)}M={type:"stylesheet",instance:M,count:1,state:k},x.set(E,M)}}}function hZ(u,f){Ns.X(u,f);var g=Ff;if(g&&u){var m=nf(g).hoistableScripts,x=Uf(u),E=m.get(x);E||(E=g.querySelector(Pg(x)),E||(u=d({src:u,async:!0},f),(f=Er.get(x))&&Ow(u,f),E=g.createElement("script"),pn(E),Nn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function gZ(u,f){Ns.M(u,f);var g=Ff;if(g&&u){var m=nf(g).hoistableScripts,x=Uf(u),E=m.get(x);E||(E=g.querySelector(Pg(x)),E||(u=d({src:u,async:!0,type:"module"},f),(f=Er.get(x))&&Ow(u,f),E=g.createElement("script"),pn(E),Nn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function h6(u,f,g,m){var x=(x=Se.current)?G1(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=Lf(g.href),g=nf(x).hoistableStyles,m=g.get(f),m||(m={type:"style",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=Lf(g.href);var E=nf(x).hoistableStyles,M=E.get(u);if(M||(x=x.ownerDocument||x,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,M),(E=x.querySelector(jg(u)))&&!E._p&&(M.instance=E,M.state.loading=5),Er.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Er.set(u,g),E||pZ(x,u,g,M.state))),f&&m===null)throw Error(i(528,""));return M}if(f&&m!==null)throw Error(i(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Uf(g),g=nf(x).hoistableScripts,m=g.get(f),m||(m={type:"script",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function Lf(u){return'href="'+pr(u)+'"'}function jg(u){return'link[rel="stylesheet"]['+u+"]"}function g6(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function pZ(u,f,g,m){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?m.loading=1:(f=u.createElement("link"),m.preload=f,f.addEventListener("load",function(){return m.loading|=1}),f.addEventListener("error",function(){return m.loading|=2}),Nn(f,"link",g),pn(f),u.head.appendChild(f))}function Uf(u){return'[src="'+pr(u)+'"]'}function Pg(u){return"script[async]"+u}function p6(u,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var m=u.querySelector('style[data-href~="'+pr(g.href)+'"]');if(m)return f.instance=m,pn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),pn(m),Nn(m,"style",x),Y1(m,g.precedence,u),f.instance=m;case"stylesheet":x=Lf(g.href);var E=u.querySelector(jg(x));if(E)return f.state.loading|=4,f.instance=E,pn(E),E;m=g6(g),(x=Er.get(x))&&kw(m,x),E=(u.ownerDocument||u).createElement("link"),pn(E);var M=E;return M._p=new Promise(function(k,j){M.onload=k,M.onerror=j}),Nn(E,"link",m),f.state.loading|=4,Y1(E,g.precedence,u),f.instance=E;case"script":return E=Uf(g.src),(x=u.querySelector(Pg(E)))?(f.instance=x,pn(x),x):(m=g,(x=Er.get(E))&&(m=d({},g),Ow(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),pn(x),Nn(x,"link",m),u.head.appendChild(x),f.instance=x);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(m=f.instance,f.state.loading|=4,Y1(m,g.precedence,u));return f.instance}function Y1(u,f,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,M=0;M<m.length;M++){var k=m[M];if(k.dataset.precedence===f)E=k;else if(E!==x)break}E?E.parentNode.insertBefore(u,E.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(u,f.firstChild))}function kw(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function Ow(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var X1=null;function m6(u,f,g){if(X1===null){var m=new Map,x=X1=new Map;x.set(g,m)}else x=X1,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(u))return m;for(m.set(u,null),g=g.getElementsByTagName(u),x=0;x<g.length;x++){var E=g[x];if(!(E[eg]||E[Hn]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var M=E.getAttribute(f)||"";M=u+M;var k=m.get(M);k?k.push(E):m.set(M,[E])}}return m}function y6(u,f,g){u=u.ownerDocument||u,u.head.insertBefore(g,f==="title"?u.querySelector("head > title"):null)}function mZ(u,f,g){if(g===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function v6(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Ig=null;function yZ(){}function vZ(u,f,g){if(Ig===null)throw Error(i(475));var m=Ig;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=Lf(g.href),E=u.querySelector(jg(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=V1.bind(m),u.then(m,m)),f.state.loading|=4,f.instance=E,pn(E);return}E=u.ownerDocument||u,g=g6(g),(x=Er.get(x))&&kw(g,x),E=E.createElement("link"),pn(E);var M=E;M._p=new Promise(function(k,j){M.onload=k,M.onerror=j}),Nn(E,"link",g),f.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(m.count++,f=V1.bind(m),u.addEventListener("load",f),u.addEventListener("error",f))}}function bZ(){if(Ig===null)throw Error(i(475));var u=Ig;return u.stylesheets&&u.count===0&&Nw(u,u.stylesheets),0<u.count?function(f){var g=setTimeout(function(){if(u.stylesheets&&Nw(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(g)}}:null}function V1(){if(this.count--,this.count===0){if(this.stylesheets)Nw(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var W1=null;function Nw(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,W1=new Map,f.forEach(xZ,u),W1=null,V1.call(u))}function xZ(u,f){if(!(f.state.loading&4)){var g=W1.get(u);if(g)var m=g.get(null);else{g=new Map,W1.set(u,g);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var M=x[E];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(g.set(M.dataset.precedence,M),m=M)}m&&g.set(null,m)}x=f.instance,M=x.getAttribute("data-precedence"),E=g.get(M)||m,E===m&&g.set(null,x),g.set(M,x),this.count++,m=V1.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),f.state.loading|=4}}var qg={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function SZ(u,f,g,m,x,E,M,k){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=TS(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TS(0),this.hiddenUpdates=TS(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function b6(u,f,g,m,x,E,M,k,j,W,ne,re){return u=new SZ(u,f,g,M,k,j,W,re),f=1,E===!0&&(f|=24),E=Yi(3,null,null,f),u.current=E,E.stateNode=u,f=gE(),f.refCount++,u.pooledCache=f,f.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:f},vE(E),u}function x6(u){return u?(u=pf,u):pf}function S6(u,f,g,m,x,E){x=x6(x),m.context===null?m.context=x:m.pendingContext=x,m=zo(f),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=Fo(u,m,f),g!==null&&(Zi(g,u,f),bg(g,u,f))}function E6(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<f?g:f}}function Rw(u,f){E6(u,f),(u=u.alternate)&&E6(u,f)}function w6(u){if(u.tag===13){var f=gf(u,67108864);f!==null&&Zi(f,u,67108864),Rw(u,67108864)}}var Q1=!0;function EZ(u,f,g,m){var x=N.T;N.T=null;var E=q.p;try{q.p=2,zw(u,f,g,m)}finally{q.p=E,N.T=x}}function wZ(u,f,g,m){var x=N.T;N.T=null;var E=q.p;try{q.p=8,zw(u,f,g,m)}finally{q.p=E,N.T=x}}function zw(u,f,g,m){if(Q1){var x=Fw(m);if(x===null)Ew(u,f,m,Z1,g),A6(u,m);else if(AZ(x,u,f,g,m))m.stopPropagation();else if(A6(u,m),f&4&&-1<_Z.indexOf(u)){for(;x!==null;){var E=tf(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var M=rl(E.pendingLanes);if(M!==0){var k=E;for(k.pendingLanes|=2,k.entangledLanes|=2;M;){var j=1<<31-Hi(M);k.entanglements[1]|=j,M&=~j}Ca(E),(lt&6)===0&&(R1=Kt()+500,Fg(0))}}break;case 13:k=gf(E,2),k!==null&&Zi(k,E,2),F1(),Rw(E,2)}if(E=Fw(m),E===null&&Ew(u,f,m,Z1,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else Ew(u,f,m,null,g)}}function Fw(u){return u=PS(u),Lw(u)}var Z1=null;function Lw(u){if(Z1=null,u=ef(u),u!==null){var f=a(u);if(f===null)u=null;else{var g=f.tag;if(g===13){if(u=s(f),u!==null)return u;u=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Z1=u,null}function _6(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Im()){case UO:return 2;case BO:return 8;case qm:case cW:return 32;case jO:return 268435456;default:return 32}default:return 32}}var Uw=!1,Wo=null,Qo=null,Zo=null,Hg=new Map,Gg=new Map,Ko=[],_Z="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A6(u,f){switch(u){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Hg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gg.delete(f.pointerId)}}function Yg(u,f,g,m,x,E){return u===null||u.nativeEvent!==E?(u={blockedOn:f,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},f!==null&&(f=tf(f),f!==null&&w6(f)),u):(u.eventSystemFlags|=m,f=u.targetContainers,x!==null&&f.indexOf(x)===-1&&f.push(x),u)}function AZ(u,f,g,m,x){switch(f){case"focusin":return Wo=Yg(Wo,u,f,g,m,x),!0;case"dragenter":return Qo=Yg(Qo,u,f,g,m,x),!0;case"mouseover":return Zo=Yg(Zo,u,f,g,m,x),!0;case"pointerover":var E=x.pointerId;return Hg.set(E,Yg(Hg.get(E)||null,u,f,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Gg.set(E,Yg(Gg.get(E)||null,u,f,g,m,x)),!0}return!1}function $6(u){var f=ef(u.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=s(g),f!==null){u.blockedOn=f,vW(u.priority,function(){if(g.tag===13){var m=Qi();m=DS(m);var x=gf(g,m);x!==null&&Zi(x,g,m),Rw(g,m)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function K1(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var g=Fw(u.nativeEvent);if(g===null){g=u.nativeEvent;var m=new g.constructor(g.type,g);jS=m,g.target.dispatchEvent(m),jS=null}else return f=tf(g),f!==null&&w6(f),u.blockedOn=g,!1;f.shift()}return!0}function C6(u,f,g){K1(u)&&g.delete(f)}function $Z(){Uw=!1,Wo!==null&&K1(Wo)&&(Wo=null),Qo!==null&&K1(Qo)&&(Qo=null),Zo!==null&&K1(Zo)&&(Zo=null),Hg.forEach(C6),Gg.forEach(C6)}function J1(u,f){u.blockedOn===f&&(u.blockedOn=null,Uw||(Uw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$Z)))}var ey=null;function M6(u){ey!==u&&(ey=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ey===u&&(ey=null);for(var f=0;f<u.length;f+=3){var g=u[f],m=u[f+1],x=u[f+2];if(typeof m!="function"){if(Lw(m||g)===null)continue;break}var E=tf(g);E!==null&&(u.splice(f,3),f-=3,LE(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function Xg(u){function f(j){return J1(j,u)}Wo!==null&&J1(Wo,u),Qo!==null&&J1(Qo,u),Zo!==null&&J1(Zo,u),Hg.forEach(f),Gg.forEach(f);for(var g=0;g<Ko.length;g++){var m=Ko[g];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Ko.length&&(g=Ko[0],g.blockedOn===null);)$6(g),g.blockedOn===null&&Ko.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],M=x[_i]||null;if(typeof E=="function")M||M6(g);else if(M){var k=null;if(E&&E.hasAttribute("formAction")){if(x=E,M=E[_i]||null)k=M.formAction;else if(Lw(x)!==null)continue}else k=M.action;typeof k=="function"?g[m+1]=k:(g.splice(m,3),m-=3),M6(g)}}}function Bw(u){this._internalRoot=u}ty.prototype.render=Bw.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(i(409));var g=f.current,m=Qi();S6(g,m,u,f,null,null)},ty.prototype.unmount=Bw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;S6(u.current,2,null,u,null,null),F1(),f[Jc]=null}};function ty(u){this._internalRoot=u}ty.prototype.unstable_scheduleHydration=function(u){if(u){var f=GO();u={blockedOn:null,target:u,priority:f};for(var g=0;g<Ko.length&&f!==0&&f<Ko[g].priority;g++);Ko.splice(g,0,u),g===0&&$6(u)}};var T6=t.version;if(T6!=="19.1.0")throw Error(i(527,T6,"19.1.0"));q.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var CZ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Zh=ny.inject(CZ),qi=ny}catch{}}return Wg.createRoot=function(u,f){if(!r(u))throw Error(i(299));var g=!1,m="",x=GR,E=YR,M=XR,k=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(m=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(E=f.onCaughtError),f.onRecoverableError!==void 0&&(M=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(k=f.unstable_transitionCallbacks)),f=b6(u,1,!1,null,null,g,m,x,E,M,k,null),u[Jc]=f.current,Sw(u),new Bw(f)},Wg.hydrateRoot=function(u,f,g){if(!r(u))throw Error(i(299));var m=!1,x="",E=GR,M=YR,k=XR,j=null,W=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&(M=g.onCaughtError),g.onRecoverableError!==void 0&&(k=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(j=g.unstable_transitionCallbacks),g.formState!==void 0&&(W=g.formState)),f=b6(u,1,!0,f,g??null,m,x,E,M,k,j,W),f.context=x6(null),g=f.current,m=Qi(),m=DS(m),x=zo(m),x.callback=null,Fo(g,x,m),g=m,f.current.lanes=g,Jh(f,g),Ca(f),u[Jc]=f.current,Sw(u),new ty(f)},Wg.version="19.1.0",Wg}var B6;function UZ(){if(B6)return Iw.exports;B6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Iw.exports=LZ(),Iw.exports}var BZ=UZ();const jZ=[{id:1,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[{firstName:"Jon",lastName:"Smith",timestamp:"2023-01-01T12:00:00Z"}]},{id:2,firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",history:[]},{id:3,firstName:"John",lastName:"Smoth",postcode:"SW1A 0AB",DoB:"1990-01-02",history:[]},{id:4,firstName:"David",lastName:"Jones",postcode:"AB11 9CD",DoB:"1989-11-09",isCause:!0,history:[{firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",timestamp:"2022-12-01T10:00:00Z"},{firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",timestamp:"2023-01-01T12:00:00Z"},{firstName:"John",lastName:"Smith",postcode:"SW1A 0AA",DoB:"1990-01-01",timestamp:"2023-06-15T09:30:00Z"}]}];/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var PZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),IZ=Object.prototype.hasOwnProperty;function NA(e,t){return IZ.call(e,t)}function RA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)NA(e,r)&&i.push(r);return i}function ir(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function zA(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Rl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function k7(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function FA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(FA(e[t]))return!0}else if(typeof e=="object"){for(var i=RA(e),r=i.length,a=0;a<r;a++)if(FA(e[i[a]]))return!0}}return!1}function j6(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var O7=function(e){PZ(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,j6(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=j6(n,{name:i,index:r,operation:a,tree:s}),l}return t}(Error),Bt=O7,qZ=ir,nd={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Tv(n,this.path);i&&(i=ir(i));var r=Ql(n,{op:"remove",path:this.from}).removed;return Ql(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Tv(n,this.from);return Ql(n,{op:"add",path:this.path,value:ir(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:c0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},HZ={add:function(e,t,n){return zA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:nd.move,copy:nd.copy,test:nd.test,_get:nd._get};function Tv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ql(e,n),n.value}function Ql(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Dv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Tv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=c0(e,t.value),s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=ir(e));var o=t.path||"",l=o.split("/"),c=e,d=1,h=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Dv;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=k7(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[y]===void 0?p=l.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(c)){if(y==="-")y=c.length;else{if(n&&!zA(y))throw new Bt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);zA(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>c.length)throw new Bt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=HZ[t.op].call(t,c,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=nd[t.op].call(t,c,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(c=c[y],n&&d<h&&(!c||typeof c!="object"))throw new Bt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function gx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=ir(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Ql(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function GZ(e,t,n){var i=Ql(e,t);if(i.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Dv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nd[e.op]){if(typeof e.path!="string")throw new Bt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&FA(e.value))throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Bt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Bt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=N7([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function N7(e,t,n){try{if(!Array.isArray(e))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)gx(ir(t),ir(e),n||!0);else{n=n||Dv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Bt)return r;throw r}}function c0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!c0(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!c0(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const YZ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bt,_areEquals:c0,applyOperation:Ql,applyPatch:gx,applyReducer:GZ,deepClone:qZ,getValueByPointer:Tv,validate:N7,validator:Dv},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var tM=new WeakMap,XZ=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),VZ=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function WZ(e){return tM.get(e)}function QZ(e,t){return e.observers.get(t)}function ZZ(e,t){e.observers.delete(t.callback)}function KZ(e,t){t.unobserve()}function JZ(e,t){var n=[],i,r=WZ(e);if(!r)r=new XZ(e),tM.set(e,r);else{var a=QZ(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=ir(e),t){i.callback=t,i.next=null;var s=function(){LA(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){LA(i),clearTimeout(i.next),ZZ(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new VZ(t,i)),i}function LA(e,t){t===void 0&&(t=!1);var n=tM.get(e.object);nM(n.value,e.object,e.patches,"",t),e.patches.length&&gx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function nM(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=RA(t),s=RA(e),o=!1,l=s.length-1;l>=0;l--){var c=s[l],d=e[c];if(NA(t,c)&&!(t[c]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[c];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?nM(d,h,n,i+"/"+Rl(c),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+Rl(c),value:ir(d)}),n.push({op:"replace",path:i+"/"+Rl(c),value:ir(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Rl(c),value:ir(d)}),n.push({op:"remove",path:i+"/"+Rl(c)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!NA(e,c)&&t[c]!==void 0&&n.push({op:"add",path:i+"/"+Rl(c),value:ir(t[c])})}}}function eK(e,t,n){n===void 0&&(n=!1);var i=[];return nM(e,t,i,"",n),i}const tK=Object.freeze(Object.defineProperty({__proto__:null,compare:eK,generate:LA,observe:JZ,unobserve:KZ},Symbol.toStringTag,{value:"Module"}));Object.assign({},YZ,tK,{JsonPatchError:O7,deepClone:ir,escapePathComponent:Rl,unescapePathComponent:k7});var Yw,P6;function nK(){if(P6)return Yw;P6=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return Yw=function(n,i){var r,a,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),a=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,function o(l,c,d){var h,p,y,v,b,S,w,_,A,$,C,D;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),C=JSON.stringify(l,s),C===void 0)return C;if(w=a-c.length-d,C.length<=w&&(A=C.replace(e,function(T,O){return O||T+" "}),A.length<=w))return A;if(s!=null&&(l=JSON.parse(C),s=void 0),typeof l=="object"&&l!==null){if(_=c+r,y=[],p=0,Array.isArray(l))for($="[",h="]",w=l.length;p<w;p++)y.push(o(l[p],_,p===w-1?0:1)||"null");else for($="{",h="}",S=Object.keys(l),w=S.length;p<w;p++)v=S[p],b=JSON.stringify(v)+": ",D=o(l[v],_,b.length+(p===w-1?0:1)),D!==void 0&&y.push(b+D);if(y.length>0)return[$,r+y.join(`,
`+_),h].join(`
`+c)}return C}(n,"",0)},Yw}var iK=nK();const Xw=JC(iK);function bo(e,t,n){return e.fields=t||[],e.fname=n,e}function rK(e){return e==null?null:e.fname}function R7(e){return e==null?null:e.fields}function z7(e){return e.length===1?aK(e[0]):sK(e)}const aK=e=>function(t){return t[e]},sK=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Wy(e){throw Error(e)}function iM(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Wy("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Wy("Access path missing closing bracket: "+e),i&&Wy("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function rM(e,t,n){const i=iM(e);return e=i.length===1?i[0]:e,bo((n&&n.get||z7)(i),[e],t||e)}const oK=rM("id"),aM=bo(e=>e,[],"identity"),uK=bo(()=>0,[],"zero"),lK=bo(()=>1,[],"one"),cK=bo(()=>!0,[],"true"),fK=bo(()=>!1,[],"false");function dK(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const F7=0,L7=1,U7=2,B7=3,j7=4;function hK(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dK,i=e||F7;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=L7&&n(t||"error","ERROR",arguments),this},warn(){return i>=U7&&n(t||"warn","WARN",arguments),this},info(){return i>=B7&&n(t||"log","INFO",arguments),this},debug(){return i>=j7&&n(t||"log","DEBUG",arguments),this}}}var px=Array.isArray;function lc(e){return e===Object(e)}const I6=e=>e!=="__proto__";function sM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=gK(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;mx(i,a,r[a],s)}return i},{})}function mx(e,t,n,i){if(!I6(t))return;let r,a;if(lc(n)&&!px(n)){a=lc(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?mx(a,r,n[r]):I6(r)&&(a[r]=n[r])}else e[t]=n}function gK(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function ih(e){return e[e.length-1]}function oM(e){return e==null||e===""?null:+e}const P7=e=>t=>e*Math.exp(t),I7=e=>t=>Math.log(e*t),q7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),H7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,kv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function yx(e,t,n,i){const r=n(e[0]),a=n(ih(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function pK(e,t){return yx(e,t,oM,aM)}function mK(e,t){var n=Math.sign(e[0]);return yx(e,t,I7(n),P7(n))}function yK(e,t,n){return yx(e,t,kv(n),kv(1/n))}function vK(e,t,n){return yx(e,t,q7(n),H7(n))}function vx(e,t,n,i,r){const a=i(e[0]),s=i(ih(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function bK(e,t,n){return vx(e,t,n,oM,aM)}function xK(e,t,n){const i=Math.sign(e[0]);return vx(e,t,n,I7(i),P7(i))}function SK(e,t,n,i){return vx(e,t,n,kv(i),kv(1/i))}function EK(e,t,n,i){return vx(e,t,n,q7(i),H7(i))}function wK(e){return 1+~~(new Date(e).getMonth()/3)}function _K(e){return 1+~~(new Date(e).getUTCMonth()/3)}function f0(e){return e!=null?px(e)?e:[e]:[]}function AK(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function bx(e){return typeof e=="function"}const $K="descending";function CK(e,t,n){n=n||{},t=f0(t)||[];const i=[],r=[],a={},s=n.comparator||MK;return f0(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===$K?-1:1),r.push(o=bx(o)?o:rM(o,null,n)),(R7(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:bo(s(r,i),Object.keys(a))}const uM=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),MK=(e,t)=>e.length===1?TK(e[0],t[0]):DK(e,t,e.length),TK=(e,t)=>function(n,i){return uM(e(n),e(i))*t},DK=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=uM(a(i),a(r));return s*t[o]});function kK(e){return bx(e)?e:()=>e}function OK(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function lM(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function NK(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function RK(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function qs(e,t){return Object.hasOwn(e,t)}const iy={};function zK(e){let t={},n;function i(a){return qs(t,a)&&t[a]!==iy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===iy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=iy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==iy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function FK(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=ih(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const d=Math.abs(l-t);return c<d&&c<=s?i:d<=s?r:a}function LK(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lM(i,n)}function UK(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function G7(e){return typeof e=="boolean"}function Y7(e){return Object.prototype.toString.call(e)==="[object Date]"}function BK(e){return e&&bx(e[Symbol.iterator])}function X7(e){return typeof e=="number"}function jK(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Js(e){return typeof e=="string"}function PK(e,t,n){e&&(e=t?f0(e).map(o=>o.replace(/\\(.)/g,"$1")):f0(e));const i=e&&e.length,r=n&&n.get||z7,a=o=>r(t?[o]:iM(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return bo(s,e,"key")}function IK(e,t){const n=e[0],i=ih(e),r=+t;return r?r===1?i:n+r*(i-n):n}const qK=1e4;function HK(e){e=+e||qK;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>qs(t,s)||qs(n,s),get:s=>qs(t,s)?t[s]:qs(n,s)?a(s,n[s]):void 0,set:(s,o)=>qs(t,s)?t[s]=o:a(s,o)}}function GK(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,c=0;for(;o<r&&l<a;++c)s[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++c)s[c]=t[o];for(;l<a;++l,++c)s[c]=n[l];return s}function wp(e,t){let n="";for(;--t>=0;)n+=e;return n}function YK(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?wp(r,s)+a:i==="center"?wp(r,~~(s/2))+a+wp(r,Math.ceil(s/2)):a+wp(r,s)}function XK(e){return e&&ih(e)-e[0]||0}function ud(e){return px(e)?"["+e.map(ud)+"]":lc(e)||Js(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function VK(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const WK=e=>X7(e)||Y7(e)?e:Date.parse(e);function QK(e,t){return t=t||WK,e==null||e===""?null:t(e)}function ZK(e){return e==null||e===""?null:e+""}function KK(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function JK(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function eJ(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}function rh(e,t,n){return e.fields=t||[],e.fname=n,e}function tJ(e){return e.length===1?nJ(e[0]):iJ(e)}const nJ=e=>function(t){return t[e]},iJ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Zl(e){throw Error(e)}function rJ(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Zl("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Zl("Access path missing closing bracket: "+e),i&&Zl("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function aJ(e,t,n){const i=rJ(e);return e=i.length===1?i[0]:e,rh(tJ(i),[e],e)}const xx=aJ("id"),V7=rh(e=>e,[],"identity");rh(()=>0,[],"zero");rh(()=>1,[],"one");const UA=rh(()=>!0,[],"true");rh(()=>!1,[],"false");function sJ(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const oJ=0,W7=1,uJ=2,lJ=3,cJ=4;function fJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sJ,i=e||oJ;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=W7&&n("error","ERROR",arguments),this},warn(){return i>=uJ&&n("warn","WARN",arguments),this},info(){return i>=lJ&&n("log","INFO",arguments),this},debug(){return i>=cJ&&n("log","DEBUG",arguments),this}}}var _u=Array.isArray;function Ov(e){return e!=null?_u(e)?e:[e]:[]}function mu(e){return typeof e=="function"}function cM(e){return mu(e)?e:()=>e}function dJ(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Q7(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function hJ(e,t){return Object.hasOwn(e,t)}function Z7(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Q7(i,n)}function zl(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}function ah(e,t,n){return e.fields=t||[],e.fname=n,e}function gJ(e){return e.length===1?pJ(e[0]):mJ(e)}const pJ=e=>function(t){return t[e]},mJ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Pa(e){throw Error(e)}function yJ(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Pa("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Pa("Access path missing closing bracket: "+e),i&&Pa("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function K7(e,t,n){const i=yJ(e);return e=i.length===1?i[0]:e,ah(gJ(i),[e],e)}K7("id");const J7=ah(e=>e,[],"identity");ah(()=>0,[],"zero");ah(()=>1,[],"one");ah(()=>!0,[],"true");ah(()=>!1,[],"false");var eL=Array.isArray;function tL(e){return e===Object(e)}function q6(e){return e==null||e===""?null:+e}function fM(e){return typeof e=="function"}function dM(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function nL(e,t){return Object.hasOwn(e,t)}function vJ(e){return Object.prototype.toString.call(e)==="[object Date]"}function bJ(e){return e&&fM(e[Symbol.iterator])}function xJ(e){return typeof e=="number"}function SJ(e){return typeof e=="string"}function hM(e){return eL(e)?"["+e.map(hM)+"]":tL(e)||SJ(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function EJ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const wJ=e=>xJ(e)||vJ(e)?e:Date.parse(e);function _J(e,t){return t=t||wJ,e==null||e===""?null:t(e)}function AJ(e){return e==null||e===""?null:e+""}var H6={},Vw={},Ww=34,Qg=10,Qw=13;function iL(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function $J(e,t){var n=iL(e);return function(i,r){return t(n(i),r,e)}}function G6(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ti(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function CJ(e){return e<0?"-"+Ti(-e,6):e>9999?"+"+Ti(e,6):Ti(e,4)}function MJ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":CJ(e.getUTCFullYear())+"-"+Ti(e.getUTCMonth()+1,2)+"-"+Ti(e.getUTCDate(),2)+(r?"T"+Ti(t,2)+":"+Ti(n,2)+":"+Ti(i,2)+"."+Ti(r,3)+"Z":i?"T"+Ti(t,2)+":"+Ti(n,2)+":"+Ti(i,2)+"Z":n||t?"T"+Ti(t,2)+":"+Ti(n,2)+"Z":"")}function TJ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,w){if(y)return y(S,w-1);v=S,y=p?$J(S,p):iL(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,w,_=v<=0,A=!1;h.charCodeAt(v-1)===Qg&&--v,h.charCodeAt(v-1)===Qw&&--v;function $(){if(_)return Vw;if(A)return A=!1,H6;var D,T=b,O;if(h.charCodeAt(T)===Ww){for(;b++<v&&h.charCodeAt(b)!==Ww||h.charCodeAt(++b)===Ww;);return(D=b)>=v?_=!0:(O=h.charCodeAt(b++))===Qg?A=!0:O===Qw&&(A=!0,h.charCodeAt(b)===Qg&&++b),h.slice(T+1,D-1).replace(/""/g,'"')}for(;b<v;){if((O=h.charCodeAt(D=b++))===Qg)A=!0;else if(O===Qw)A=!0,h.charCodeAt(b)===Qg&&++b;else if(O!==n)continue;return h.slice(T,D)}return _=!0,h.slice(T,v)}for(;(w=$())!==Vw;){for(var C=[];w!==H6&&w!==Vw;)C.push(w),w=$();p&&(C=p(C,S++))==null||y.push(C)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=G6(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=G6(h)),a(h,p).join(`
`)}function l(h){return h.map(c).join(`
`)}function c(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?MJ(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:c,formatValue:d}}function DJ(e){return e}function kJ(e){if(e==null)return DJ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var c=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;c<d;)h[c]=o[c],++c;return h}}function OJ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function NJ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Y6(e,n)})}:Y6(e,t)}function Y6(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=rL(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function rL(e,t){var n=kJ(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&OJ(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function l(d){return d.map(o)}function c(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(c)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return c(t)}function RJ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(c,d){var h=e.arcs[c<0?~c:c],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=c,t[d]=p)}),t.forEach(function(c){var d=o(c),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(c),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(c),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[c],i[y.start=h]=r[y.end=p]=y});function o(c){var d=e.arcs[c<0?~c:c],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],c<0?[p,h]:[h,p]}function l(c,d){for(var h in c){var p=c[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(c){n[c<0?~c:c]||a.push([c])}),a}function zJ(e){return rL(e,FJ.apply(this,arguments))}function FJ(e,t,n){var i,r,a;if(arguments.length>1)i=LJ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:RJ(e,i)}}function LJ(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function l(h){h.forEach(o)}function c(h){h.forEach(l)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":c(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function eo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function UJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sh(e){let t,n,i;e.length!==2?(t=eo,n=(o,l)=>eo(e(o),l),i=(o,l)=>e(o)-l):(t=e===eo||e===UJ?e:BJ,n=e,i=e);function r(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const h=c+d>>>1;n(o[h],l)<0?c=h+1:d=h}while(c<d)}return c}function a(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const h=c+d>>>1;n(o[h],l)<=0?c=h+1:d=h}while(c<d)}return c}function s(o,l,c=0,d=o.length){const h=r(o,l,c,d-1);return h>c&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:r,center:s,right:a}}function BJ(){return 0}function aL(e){return e===null?NaN:+e}function*jJ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const sL=sh(eo),Au=sL.right,PJ=sL.left;sh(aL).center;function IJ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function qJ(e,t){const n=IJ(e,t);return n&&Math.sqrt(n)}class yi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class X6 extends Map{constructor(t,n=lL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(BA(this,t))}has(t){return super.has(BA(this,t))}set(t,n){return super.set(oL(this,t),n)}delete(t){return super.delete(uL(this,t))}}class Nv extends Set{constructor(t,n=lL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(BA(this,t))}add(t){return super.add(oL(this,t))}delete(t){return super.delete(uL(this,t))}}function BA({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function oL({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function uL({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function lL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function HJ(e,t){return Array.from(t,n=>e[n])}function GJ(e=eo){if(e===eo)return cL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function cL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YJ=Math.sqrt(50),XJ=Math.sqrt(10),VJ=Math.sqrt(2);function Rv(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=YJ?10:a>=XJ?5:a>=VJ?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Rv(e,t,n*2):[o,l,c]}function jA(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Rv(t,e,n):Rv(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(r+c)/-s;else for(let c=0;c<o;++c)l[c]=(r+c)*s;return l}function PA(e,t,n){return t=+t,e=+e,n=+n,Rv(e,t,n)[2]}function $u(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?PA(t,e,n):PA(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Kl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function IA(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function fL(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?cL:GJ(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(c-l/2<0?-1:1),y=Math.max(n,Math.floor(t-c*h/l+p)),v=Math.min(i,Math.floor(t+(l-c)*h/l+p));fL(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Zg(e,n,t),r(e[i],a)>0&&Zg(e,n,i);s<o;){for(Zg(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Zg(e,n,o):(++o,Zg(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Zg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function qA(e,t,n){if(e=Float64Array.from(jJ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return IA(e);if(t>=1)return Kl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Kl(fL(e,a).subarray(0,a+1)),o=IA(e.subarray(a+1));return s+(o-s)*(r-a)}}function dL(e,t,n=aL){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function WJ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function hL(e,t){return qA(e,.5,t)}function*QJ(e){for(const t of e)yield*t}function gL(e){return Array.from(QJ(e))}function rr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function pL(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function ZJ(e,...t){e=new Nv(e),t=t.map(KJ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function KJ(e){return e instanceof Nv?e:new Nv(e)}function JJ(...e){const t=new Nv;for(const n of e)for(const i of n)t.add(i);return t}function eee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Ed(e){return e=zv(Math.abs(e)),e?e[1]:NaN}function tee(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function nee(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var iee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cc(e){if(!(t=iee.exec(e)))throw new Error("invalid format: "+e);var t;return new gM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cc.prototype=gM.prototype;function gM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ree(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var mL;function aee(e,t){var n=zv(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(mL=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+zv(e,Math.max(0,t+a-1))[0]}function V6(e,t){var n=zv(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const W6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>V6(e*100,t),r:V6,s:aee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Q6(e){return e}var Z6=Array.prototype.map,K6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yL(e){var t=e.grouping===void 0||e.thousands===void 0?Q6:tee(Z6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Q6:nee(Z6.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=cc(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,w=h.width,_=h.comma,A=h.precision,$=h.trim,C=h.type;C==="n"?(_=!0,C="g"):W6[C]||(A===void 0&&(A=12),$=!0,C="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var D=b==="$"?n:b==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",T=b==="$"?i:/[%p]/.test(C)?s:"",O=W6[C],R=/[defgprs%]/.test(C);A=A===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function L(z){var H=D,U=T,P,B,N;if(C==="c")U=O(z)+U,z="";else{z=+z;var q=z<0||1/z<0;if(z=isNaN(z)?l:O(Math.abs(z),A),$&&(z=ree(z)),q&&+z==0&&v!=="+"&&(q=!1),H=(q?v==="("?v:o:v==="-"||v==="("?"":v)+H,U=(C==="s"?K6[8+mL/3]:"")+U+(q&&v==="("?")":""),R){for(P=-1,B=z.length;++P<B;)if(N=z.charCodeAt(P),48>N||N>57){U=(N===46?r+z.slice(P+1):z.slice(P))+U,z=z.slice(0,P);break}}}_&&!S&&(z=t(z,1/0));var Y=H.length+z.length+U.length,ee=Y<w?new Array(w-Y+1).join(p):"";switch(_&&S&&(z=t(ee+z,ee.length?w-U.length:1/0),ee=""),y){case"<":z=H+z+U+ee;break;case"=":z=H+ee+z+U;break;case"^":z=ee.slice(0,Y=ee.length>>1)+H+z+U+ee.slice(Y);break;default:z=ee+H+z+U;break}return a(z)}return L.toString=function(){return h+""},L}function d(h,p){var y=c((h=cc(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Ed(p)/3)))*3,b=Math.pow(10,-v),S=K6[8+v/3];return function(w){return y(b*w)+S}}return{format:c,formatPrefix:d}}var ry,Sx,pM;see({thousands:",",grouping:[3],currency:["$",""]});function see(e){return ry=yL(e),Sx=ry.format,pM=ry.formatPrefix,ry}function vL(e){return Math.max(0,-Ed(Math.abs(e)))}function bL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ed(t)/3)))*3-Ed(Math.abs(e)))}function xL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ed(t)-Ed(e))+1}function oh(e,t,n){return e.fields=t||[],e.fname=n,e}function oee(e){return e.length===1?uee(e[0]):lee(e)}const uee=e=>function(t){return t[e]},lee=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ld(e){throw Error(e)}function cee(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ld("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ld("Access path missing closing bracket: "+e),i&&ld("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function fee(e,t,n){const i=cee(e);return e=i.length===1?i[0]:e,oh(oee(i),[e],e)}fee("id");oh(e=>e,[],"identity");const Kg=oh(()=>0,[],"zero"),dee=oh(()=>1,[],"one");oh(()=>!0,[],"true");oh(()=>!1,[],"false");var hee=Array.isArray;function SL(e){return e[e.length-1]}function gee(e){return e!=null?hee(e)?e:[e]:[]}function pee(e){return!1}function mee(e){return pee()?e:()=>e}function yee(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function vee(e,t){return Object.hasOwn(e,t)}function bee(e){return e&&SL(e)-e[0]||0}function xee(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}const Zw=new Date,Kw=new Date;function dn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},r.filter=a=>dn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(Zw.setTime(+a),Kw.setTime(+s),e(Zw),e(Kw),Math.floor(n(Zw,Kw))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const wd=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wd);wd.range;const Xs=1e3,Cr=Xs*60,Vs=Cr*60,co=Vs*24,mM=co*7,J6=co*30,Jw=co*365,Ws=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xs)},(e,t)=>(t-e)/Xs,e=>e.getUTCSeconds());Ws.range;const Ex=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xs)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getMinutes());Ex.range;const wx=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getUTCMinutes());wx.range;const _x=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xs-e.getMinutes()*Cr)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getHours());_x.range;const Ax=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vs)},(e,t)=>(t-e)/Vs,e=>e.getUTCHours());Ax.range;const to=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/co,e=>e.getDate()-1);to.range;const yu=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>e.getUTCDate()-1);yu.range;const EL=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>Math.floor(e/co));EL.range;function Nc(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/mM)}const uh=Nc(0),Fv=Nc(1),See=Nc(2),Eee=Nc(3),_d=Nc(4),wee=Nc(5),_ee=Nc(6);uh.range;Fv.range;See.range;Eee.range;_d.range;wee.range;_ee.range;function Rc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/mM)}const lh=Rc(0),Lv=Rc(1),Aee=Rc(2),$ee=Rc(3),Ad=Rc(4),Cee=Rc(5),Mee=Rc(6);lh.range;Lv.range;Aee.range;$ee.range;Ad.range;Cee.range;Mee.range;const d0=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());d0.range;const h0=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());h0.range;const Qa=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qa.range;const Za=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Za.range;function wL(e,t,n,i,r,a){const s=[[Ws,1,Xs],[Ws,5,5*Xs],[Ws,15,15*Xs],[Ws,30,30*Xs],[a,1,Cr],[a,5,5*Cr],[a,15,15*Cr],[a,30,30*Cr],[r,1,Vs],[r,3,3*Vs],[r,6,6*Vs],[r,12,12*Vs],[i,1,co],[i,2,2*co],[n,1,mM],[t,1,J6],[t,3,3*J6],[e,1,Jw]];function o(c,d,h){const p=d<c;p&&([c,d]=[d,c]);const y=h&&typeof h.range=="function"?h:l(c,d,h),v=y?y.range(c,+d+1):[];return p?v.reverse():v}function l(c,d,h){const p=Math.abs(d-c)/h,y=sh(([,,S])=>S).right(s,p);if(y===s.length)return e.every($u(c/Jw,d/Jw,h));if(y===0)return wd.every(Math.max($u(c,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[Tee,Dee]=wL(Za,h0,lh,EL,Ax,wx),[kee,Oee]=wL(Qa,d0,uh,to,_x,Ex),jn="year",Fi="quarter",ni="month",ln="week",Li="date",ei="day",Ka="dayofyear",cr="hours",fr="minutes",Nr="seconds",oa="milliseconds",yM=[jn,Fi,ni,ln,Li,ei,Ka,cr,fr,Nr,oa],e_=yM.reduce((e,t,n)=>(e[t]=1+n,e),{});function vM(e){const t=gee(e).slice(),n={};return t.length||ld("Missing time unit."),t.forEach(r=>{vee(e_,r)?n[r]=1:ld(`Invalid time unit: ${r}.`)}),(n[ln]||n[ei]?1:0)+(n[Fi]||n[ni]||n[Li]?1:0)+(n[Ka]?1:0)>1&&ld(`Incompatible time units: ${e}`),t.sort((r,a)=>e_[r]-e_[a]),t}const Nee={[jn]:"%Y ",[Fi]:"Q%q ",[ni]:"%b ",[Li]:"%d ",[ln]:"W%U ",[ei]:"%a ",[Ka]:"%j ",[cr]:"%H:00",[fr]:"00:%M",[Nr]:":%S",[oa]:".%L",[`${jn}-${ni}`]:"%Y-%m ",[`${jn}-${ni}-${Li}`]:"%Y-%m-%d ",[`${cr}-${fr}`]:"%H:%M"};function _L(e,t){const n=yee({},Nee,t),i=vM(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const Ul=new Date;function bM(e){return Ul.setFullYear(e),Ul.setMonth(0),Ul.setDate(1),Ul.setHours(0,0,0,0),Ul}function AL(e){return CL(new Date(e))}function $L(e){return HA(new Date(e))}function CL(e){return to.count(bM(e.getFullYear())-1,e)}function HA(e){return uh.count(bM(e.getFullYear())-1,e)}function GA(e){return bM(e).getDay()}function Ree(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function ML(e){return DL(new Date(e))}function TL(e){return YA(new Date(e))}function DL(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return yu.count(t-1,e)}function YA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lh.count(t-1,e)}function XA(e){return Ul.setTime(Date.UTC(e,0,1)),Ul.getUTCDay()}function zee(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function kL(e,t,n,i,r){const a=t||1,s=SL(e),o=(w,_,A)=>(A=A||w,Fee(n[A],i[A],w===s&&a,_)),l=new Date,c=xee(e),d=c[jn]?o(jn):mee(2012),h=c[ni]?o(ni):c[Fi]?o(Fi):Kg,p=c[ln]&&c[ei]?o(ei,1,ln+ei):c[ln]?o(ln,1):c[ei]?o(ei,1):c[Li]?o(Li,1):c[Ka]?o(Ka,1):dee,y=c[cr]?o(cr):Kg,v=c[fr]?o(fr):Kg,b=c[Nr]?o(Nr):Kg,S=c[oa]?o(oa):Kg;return function(w){l.setTime(+w);const _=d(l);return r(_,h(l),p(l,_),y(l),v(l),b(l),S(l))}}function Fee(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function $d(e,t,n){return t+e*7-(n+6)%7}const Lee={[jn]:e=>e.getFullYear(),[Fi]:e=>Math.floor(e.getMonth()/3),[ni]:e=>e.getMonth(),[Li]:e=>e.getDate(),[cr]:e=>e.getHours(),[fr]:e=>e.getMinutes(),[Nr]:e=>e.getSeconds(),[oa]:e=>e.getMilliseconds(),[Ka]:e=>CL(e),[ln]:e=>HA(e),[ln+ei]:(e,t)=>$d(HA(e),e.getDay(),GA(t)),[ei]:(e,t)=>$d(1,e.getDay(),GA(t))},Uee={[Fi]:e=>3*e,[ln]:(e,t)=>$d(e,0,GA(t))};function OL(e,t){return kL(e,t||1,Lee,Uee,Ree)}const Bee={[jn]:e=>e.getUTCFullYear(),[Fi]:e=>Math.floor(e.getUTCMonth()/3),[ni]:e=>e.getUTCMonth(),[Li]:e=>e.getUTCDate(),[cr]:e=>e.getUTCHours(),[fr]:e=>e.getUTCMinutes(),[Nr]:e=>e.getUTCSeconds(),[oa]:e=>e.getUTCMilliseconds(),[Ka]:e=>DL(e),[ln]:e=>YA(e),[ei]:(e,t)=>$d(1,e.getUTCDay(),XA(t)),[ln+ei]:(e,t)=>$d(YA(e),e.getUTCDay(),XA(t))},jee={[Fi]:e=>3*e,[ln]:(e,t)=>$d(e,0,XA(t))};function NL(e,t){return kL(e,t||1,Bee,jee,zee)}const Pee={[jn]:Qa,[Fi]:d0.every(3),[ni]:d0,[ln]:uh,[Li]:to,[ei]:to,[Ka]:to,[cr]:_x,[fr]:Ex,[Nr]:Ws,[oa]:wd},Iee={[jn]:Za,[Fi]:h0.every(3),[ni]:h0,[ln]:lh,[Li]:yu,[ei]:yu,[Ka]:yu,[cr]:Ax,[fr]:wx,[Nr]:Ws,[oa]:wd};function ch(e){return Pee[e]}function fh(e){return Iee[e]}function RL(e,t,n){return e?e.offset(t,n):void 0}function zL(e,t,n){return RL(ch(e),t,n)}function FL(e,t,n){return RL(fh(e),t,n)}function LL(e,t,n,i){return e?e.range(t,n,i):void 0}function UL(e,t,n,i){return LL(ch(e),t,n,i)}function BL(e,t,n,i){return LL(fh(e),t,n,i)}const _p=1e3,Ap=_p*60,$p=Ap*60,$x=$p*24,qee=$x*7,e4=$x*30,VA=$x*365,jL=[jn,ni,Li,cr,fr,Nr,oa],Cp=jL.slice(0,-1),Mp=Cp.slice(0,-1),Tp=Mp.slice(0,-1),Hee=Tp.slice(0,-1),Gee=[jn,ln],t4=[jn,ni],PL=[jn],Jg=[[Cp,1,_p],[Cp,5,5*_p],[Cp,15,15*_p],[Cp,30,30*_p],[Mp,1,Ap],[Mp,5,5*Ap],[Mp,15,15*Ap],[Mp,30,30*Ap],[Tp,1,$p],[Tp,3,3*$p],[Tp,6,6*$p],[Tp,12,12*$p],[Hee,1,$x],[Gee,1,qee],[t4,1,e4],[t4,3,3*e4],[PL,1,VA]];function IL(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(bee(t))/n;let r=sh(o=>o[2]).right(Jg,i),a,s;return r===Jg.length?(a=PL,s=$u(t[0]/VA,t[1]/VA,n)):r?(r=Jg[i/Jg[r-1][2]<Jg[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=jL,s=Math.max($u(t[0],t[1],n),1)),{units:a,step:s}}function dh(e,t,n){return e.fields=t||[],e.fname=n,e}function Yee(e){return e.length===1?Xee(e[0]):Vee(e)}const Xee=e=>function(t){return t[e]},Vee=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Yp(e){throw Error(e)}function Wee(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Yp("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Yp("Access path missing closing bracket: "+e),i&&Yp("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Qee(e,t,n){const i=Wee(e);return e=i.length===1?i[0]:e,dh(Yee(i),[e],e)}Qee("id");dh(e=>e,[],"identity");dh(()=>0,[],"zero");dh(()=>1,[],"one");dh(()=>!0,[],"true");dh(()=>!1,[],"false");function Zee(e){return e===Object(e)}function Kee(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function n4(e){return typeof e=="string"}function t_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function n_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ep(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function qL(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=tp(r),d=np(r),h=tp(a),p=np(a),y=tp(s),v=np(s),b=tp(o),S=np(o),w=tp(l),_=np(l),A={a:q,A:Y,b:ee,B:F,c:null,d:u4,e:u4,f:Ste,g:kte,G:Nte,H:vte,I:bte,j:xte,L:HL,m:Ete,M:wte,p:V,q:ae,Q:f4,s:d4,S:_te,u:Ate,U:$te,V:Cte,w:Mte,W:Tte,x:null,X:null,y:Dte,Y:Ote,Z:Rte,"%":c4},$={a:se,A:de,b:be,B:Se,c:null,d:l4,e:l4,f:Ute,g:Vte,G:Qte,H:zte,I:Fte,j:Lte,L:YL,m:Bte,M:jte,p:It,q:Qe,Q:f4,s:d4,S:Pte,u:Ite,U:qte,V:Hte,w:Gte,W:Yte,x:null,X:null,y:Xte,Y:Wte,Z:Zte,"%":c4},C={a:L,A:z,b:H,B:U,c:P,d:s4,e:s4,f:gte,g:a4,G:r4,H:o4,I:o4,j:cte,L:hte,m:lte,M:fte,p:R,q:ute,Q:mte,s:yte,S:dte,u:ite,U:rte,V:ate,w:nte,W:ste,x:B,X:N,y:a4,Y:r4,Z:ote,"%":pte};A.x=D(n,A),A.X=D(i,A),A.c=D(t,A),$.x=D(n,$),$.X=D(i,$),$.c=D(t,$);function D(ge,ke){return function(ze){var le=[],qt=-1,Ze=0,Zt=ge.length,gn,Kt,Im;for(ze instanceof Date||(ze=new Date(+ze));++qt<Zt;)ge.charCodeAt(qt)===37&&(le.push(ge.slice(Ze,qt)),(Kt=i4[gn=ge.charAt(++qt)])!=null?gn=ge.charAt(++qt):Kt=gn==="e"?" ":"0",(Im=ke[gn])&&(gn=Im(ze,Kt)),le.push(gn),Ze=qt+1);return le.push(ge.slice(Ze,qt)),le.join("")}}function T(ge,ke){return function(ze){var le=ep(1900,void 0,1),qt=O(le,ge,ze+="",0),Ze,Zt;if(qt!=ze.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ke&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Ze=n_(ep(le.y,0,1)),Zt=Ze.getUTCDay(),Ze=Zt>4||Zt===0?Lv.ceil(Ze):Lv(Ze),Ze=yu.offset(Ze,(le.V-1)*7),le.y=Ze.getUTCFullYear(),le.m=Ze.getUTCMonth(),le.d=Ze.getUTCDate()+(le.w+6)%7):(Ze=t_(ep(le.y,0,1)),Zt=Ze.getDay(),Ze=Zt>4||Zt===0?Fv.ceil(Ze):Fv(Ze),Ze=to.offset(Ze,(le.V-1)*7),le.y=Ze.getFullYear(),le.m=Ze.getMonth(),le.d=Ze.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Zt="Z"in le?n_(ep(le.y,0,1)).getUTCDay():t_(ep(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Zt+5)%7:le.w+le.U*7-(Zt+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,n_(le)):t_(le)}}function O(ge,ke,ze,le){for(var qt=0,Ze=ke.length,Zt=ze.length,gn,Kt;qt<Ze;){if(le>=Zt)return-1;if(gn=ke.charCodeAt(qt++),gn===37){if(gn=ke.charAt(qt++),Kt=C[gn in i4?ke.charAt(qt++):gn],!Kt||(le=Kt(ge,ze,le))<0)return-1}else if(gn!=ze.charCodeAt(le++))return-1}return le}function R(ge,ke,ze){var le=c.exec(ke.slice(ze));return le?(ge.p=d.get(le[0].toLowerCase()),ze+le[0].length):-1}function L(ge,ke,ze){var le=y.exec(ke.slice(ze));return le?(ge.w=v.get(le[0].toLowerCase()),ze+le[0].length):-1}function z(ge,ke,ze){var le=h.exec(ke.slice(ze));return le?(ge.w=p.get(le[0].toLowerCase()),ze+le[0].length):-1}function H(ge,ke,ze){var le=w.exec(ke.slice(ze));return le?(ge.m=_.get(le[0].toLowerCase()),ze+le[0].length):-1}function U(ge,ke,ze){var le=b.exec(ke.slice(ze));return le?(ge.m=S.get(le[0].toLowerCase()),ze+le[0].length):-1}function P(ge,ke,ze){return O(ge,t,ke,ze)}function B(ge,ke,ze){return O(ge,n,ke,ze)}function N(ge,ke,ze){return O(ge,i,ke,ze)}function q(ge){return s[ge.getDay()]}function Y(ge){return a[ge.getDay()]}function ee(ge){return l[ge.getMonth()]}function F(ge){return o[ge.getMonth()]}function V(ge){return r[+(ge.getHours()>=12)]}function ae(ge){return 1+~~(ge.getMonth()/3)}function se(ge){return s[ge.getUTCDay()]}function de(ge){return a[ge.getUTCDay()]}function be(ge){return l[ge.getUTCMonth()]}function Se(ge){return o[ge.getUTCMonth()]}function It(ge){return r[+(ge.getUTCHours()>=12)]}function Qe(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var ke=D(ge+="",A);return ke.toString=function(){return ge},ke},parse:function(ge){var ke=T(ge+="",!1);return ke.toString=function(){return ge},ke},utcFormat:function(ge){var ke=D(ge+="",$);return ke.toString=function(){return ge},ke},utcParse:function(ge){var ke=T(ge+="",!0);return ke.toString=function(){return ge},ke}}}var i4={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,Jee=/^%/,ete=/[\\^$*+?|[\]().{}]/g;function nt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function tte(e){return e.replace(ete,"\\$&")}function tp(e){return new RegExp("^(?:"+e.map(tte).join("|")+")","i")}function np(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function nte(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function ite(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function rte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function ate(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function ste(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function r4(e,t,n){var i=Tn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function a4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function ote(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function ute(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function lte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function s4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function cte(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function o4(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function fte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function dte(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function hte(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function gte(e,t,n){var i=Tn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function pte(e,t,n){var i=Jee.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function mte(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function yte(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function u4(e,t){return nt(e.getDate(),t,2)}function vte(e,t){return nt(e.getHours(),t,2)}function bte(e,t){return nt(e.getHours()%12||12,t,2)}function xte(e,t){return nt(1+to.count(Qa(e),e),t,3)}function HL(e,t){return nt(e.getMilliseconds(),t,3)}function Ste(e,t){return HL(e,t)+"000"}function Ete(e,t){return nt(e.getMonth()+1,t,2)}function wte(e,t){return nt(e.getMinutes(),t,2)}function _te(e,t){return nt(e.getSeconds(),t,2)}function Ate(e){var t=e.getDay();return t===0?7:t}function $te(e,t){return nt(uh.count(Qa(e)-1,e),t,2)}function GL(e){var t=e.getDay();return t>=4||t===0?_d(e):_d.ceil(e)}function Cte(e,t){return e=GL(e),nt(_d.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function Mte(e){return e.getDay()}function Tte(e,t){return nt(Fv.count(Qa(e)-1,e),t,2)}function Dte(e,t){return nt(e.getFullYear()%100,t,2)}function kte(e,t){return e=GL(e),nt(e.getFullYear()%100,t,2)}function Ote(e,t){return nt(e.getFullYear()%1e4,t,4)}function Nte(e,t){var n=e.getDay();return e=n>=4||n===0?_d(e):_d.ceil(e),nt(e.getFullYear()%1e4,t,4)}function Rte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nt(t/60|0,"0",2)+nt(t%60,"0",2)}function l4(e,t){return nt(e.getUTCDate(),t,2)}function zte(e,t){return nt(e.getUTCHours(),t,2)}function Fte(e,t){return nt(e.getUTCHours()%12||12,t,2)}function Lte(e,t){return nt(1+yu.count(Za(e),e),t,3)}function YL(e,t){return nt(e.getUTCMilliseconds(),t,3)}function Ute(e,t){return YL(e,t)+"000"}function Bte(e,t){return nt(e.getUTCMonth()+1,t,2)}function jte(e,t){return nt(e.getUTCMinutes(),t,2)}function Pte(e,t){return nt(e.getUTCSeconds(),t,2)}function Ite(e){var t=e.getUTCDay();return t===0?7:t}function qte(e,t){return nt(lh.count(Za(e)-1,e),t,2)}function XL(e){var t=e.getUTCDay();return t>=4||t===0?Ad(e):Ad.ceil(e)}function Hte(e,t){return e=XL(e),nt(Ad.count(Za(e),e)+(Za(e).getUTCDay()===4),t,2)}function Gte(e){return e.getUTCDay()}function Yte(e,t){return nt(Lv.count(Za(e)-1,e),t,2)}function Xte(e,t){return nt(e.getUTCFullYear()%100,t,2)}function Vte(e,t){return e=XL(e),nt(e.getUTCFullYear()%100,t,2)}function Wte(e,t){return nt(e.getUTCFullYear()%1e4,t,4)}function Qte(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ad(e):Ad.ceil(e),nt(e.getUTCFullYear()%1e4,t,4)}function Zte(){return"+0000"}function c4(){return"%"}function f4(e){return+e}function d4(e){return Math.floor(+e/1e3)}var Bf,xM,VL,SM,WL;Kte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kte(e){return Bf=qL(e),xM=Bf.format,VL=Bf.parse,SM=Bf.utcFormat,WL=Bf.utcParse,Bf}function Dp(e){const t={};return n=>t[n]||(t[n]=e(n))}function Jte(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=ene(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function ene(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function QL(e){const t=Dp(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=cc(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return Jte(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=cc(s??",f");const o=$u(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let c;if(s.precision==null)switch(s.type){case"s":return isNaN(c=bL(o,l))||(s.precision=c),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=xL(o,l))||(s.precision=c-(s.type==="e"));break}case"f":case"%":{isNaN(c=vL(o))||(s.precision=c-(s.type==="%")*2);break}}return t(s)}}}let WA;ZL();function ZL(){return WA=QL({format:Sx,formatPrefix:pM})}function KL(e){return QL(yL(e))}function Uv(e){return arguments.length?WA=KL(e):WA}function h4(e,t,n){n=n||{},Zee(n)||Yp(`Invalid time multi-format specifier: ${n}`);const i=t(Nr),r=t(fr),a=t(cr),s=t(Li),o=t(ln),l=t(ni),c=t(Fi),d=t(jn),h=e(n[oa]||".%L"),p=e(n[Nr]||":%S"),y=e(n[fr]||"%I:%M"),v=e(n[cr]||"%I %p"),b=e(n[Li]||n[ei]||"%a %d"),S=e(n[ln]||"%b %d"),w=e(n[ni]||"%B"),_=e(n[Fi]||"%B"),A=e(n[jn]||"%Y");return $=>(i($)<$?h:r($)<$?p:a($)<$?y:s($)<$?v:l($)<$?o($)<$?b:S:d($)<$?c($)<$?w:_:A)($)}function JL(e){const t=Dp(e.format),n=Dp(e.utcFormat);return{timeFormat:i=>n4(i)?t(i):h4(t,ch,i),utcFormat:i=>n4(i)?n(i):h4(n,fh,i),timeParse:Dp(e.parse),utcParse:Dp(e.utcParse)}}let QA;eU();function eU(){return QA=JL({format:xM,parse:VL,utcFormat:SM,utcParse:WL})}function tU(e){return JL(qL(e))}function g0(e){return arguments.length?QA=tU(e):QA}const ZA=(e,t)=>Kee({},e,t);function nU(e,t){const n=e?KL(e):Uv(),i=t?tU(t):g0();return ZA(n,i)}function EM(e,t){const n=arguments.length;return n&&n!==2&&Yp("defaultLocale expects either zero or two arguments."),n?ZA(Uv(e),g0(t)):ZA(Uv(),g0())}function tne(){return ZL(),eU(),EM()}const nne=/^(data:|([A-Za-z]+:)?\/\/)/,ine=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,rne=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,g4="file://";function ane(e,t){return n=>({options:n||{},sanitize:one,load:sne,fileAccess:!1,file:une(),http:cne(e)})}async function sne(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function one(e,t){t=dM({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=ine.test(e.replace(rne,""));(e==null||typeof e!="string"||!o)&&Pa("Sanitize failure, invalid URI: "+hM(e));const l=nne.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(g4))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(g4.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function une(e){return lne}async function lne(){Pa("No file system access.")}function cne(e){return e?async function(t,n){const i=dM({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?fM(a[r])?a[r]():a.text():Pa(a.status+""+a.statusText)}:fne}async function fne(){Pa("No HTTP fetch method available.")}const dne=e=>e!=null&&e===e,hne=e=>e==="true"||e==="false"||e===!0||e===!1,gne=e=>!Number.isNaN(Date.parse(e)),iU=e=>!Number.isNaN(+e)&&!(e instanceof Date),pne=e=>iU(e)&&Number.isInteger(+e),KA={boolean:EJ,integer:q6,number:q6,date:_J,string:AJ,unknown:J7},ay=[hne,pne,iU,gne],mne=["boolean","integer","number","date"];function rU(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=ay.length,r=ay.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&dne(l)&&!ay[o](l)&&(r[o]=0,++s,s===ay.length))return"string";return mne[r.reduce((a,s)=>a===0?s:a,0)-1]}function aU(e,t){return t.reduce((n,i)=>(n[i]=rU(e,i),n),{})}function p4(e){const t=function(n,i){const r={delimiter:e};return wM(n,i?dM(i,r):r)};return t.responseType="text",t}function wM(e,t){return t.header&&(e=t.header.map(hM).join(t.delimiter)+`
`+e),TJ(t.delimiter).parse(e+"")}wM.responseType="text";function yne(e){return typeof Buffer=="function"&&fM(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function _M(e,t){const n=t&&t.property?K7(t.property):J7;return tL(e)&&!yne(e)?vne(n(e),t):n(JSON.parse(e))}_M.responseType="json";function vne(e,t){return!eL(e)&&bJ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const bne={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function sU(e,t){let n,i,r,a;return e=_M(e,t),t&&t.feature?(n=NJ,r=t.feature):t&&t.mesh?(n=zJ,r=t.mesh,a=bne[t.filter]):Pa("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):Pa("Invalid TopoJSON object: "+r),i&&i.features||[i]}sU.responseType="json";const Qy={dsv:wM,csv:p4(","),tsv:p4("	"),json:_M,topojson:sU};function AM(e,t){return arguments.length>1?(Qy[e]=t,this):nL(Qy,e)?Qy[e]:null}function oU(e){const t=AM(e);return t&&t.responseType||"text"}function uU(e,t,n,i){t=t||{};const r=AM(t.type||"json");return r||Pa("Unknown data format type: "+t.type),e=r(e,t),t.parse&&xne(e,t.parse,n,i),nL(e,"columns")&&delete e.columns,e}function xne(e,t,n,i){if(!e.length)return;const r=g0();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,c,d,h;t==="auto"&&(t=aU(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!KA[v])throw Error("Illegal format pattern: "+y+":"+v);return KA[v]});for(l=0,d=e.length,h=a.length;l<d;++l)for(s=e[l],c=0;c<h;++c)o=a[c],s[o]=p[c](s[o])}const Cx=ane(typeof fetch<"u"&&fetch);function Mx(e){const t=e||V7,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function Zy(e,t){try{await t(e)}catch(n){e.error(n)}}const lU=Symbol("vega_id");let Sne=1;function Tx(e){return!!(e&&we(e))}function we(e){return e[lU]}function cU(e,t){return e[lU]=t,e}function st(e){const t=e===Object(e)?e:{data:e};return we(t)?t:cU(t,Sne++)}function $M(e){return Dx(e,st({}))}function Dx(e,t){for(const n in e)t[n]=e[n];return t}function fU(e,t){return cU(t,we(e))}function zc(e,t){return e?t?(n,i)=>e(n,i)||we(t(n))-we(t(i)):(n,i)=>e(n,i)||we(n)-we(i):null}function dU(e){return e&&e.constructor===Fc}function Fc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:Fc,insert(o){const l=Ov(o),c=l.length;for(let d=0;d<c;++d)e.push(l[d]);return this},remove(o){const l=mu(o)?i:t,c=Ov(o),d=c.length;for(let h=0;h<d;++h)l.push(c[h]);return this},modify(o,l,c){const d={field:l,value:cM(c)};return mu(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return mu(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const c={},d={};let h,p,y,v,b,S;for(h=0,p=l.length;h<p;++h)c[we(l[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],c[we(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],l.forEach(_=>{v(_)&&(c[we(_)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=we(b),c[S]?c[S]=1:o.add.push(st(e[h]));for(h=0,p=l.length;h<p;++h)b=l[h],c[we(b)]<0&&o.rem.push(b);function w(_,A,$){$?_[A]=$(_):o.encode=A,s||(d[we(_)]=_)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=c[we(b)],S>0&&(w(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,l.forEach(_=>{v(_)&&c[we(_)]>0&&w(_,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(_=>c[we(_)]>0):l.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const Ky="_:mod:_";function kx(){Object.defineProperty(this,Ky,{writable:!0,value:{}})}kx.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[Ky];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=_u(n)?1+n.length:-1),r},modified(e,t){const n=this[Ky];if(arguments.length){if(_u(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Ky]={},this}};let Ene=0;const wne="pulse",_ne=new kx,Ane=1,$ne=2;function xt(e,t,n,i){this.id=++Ene,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function m4(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}xt.prototype={targets(){return this._targets||(this._targets=Mx(xx))},set(e){return this.value!==e?(this.value=e,1):0},skip:m4(Ane),modified:m4($ne),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new kx,r=this._argops=this._argops||[],a=[];let s,o,l,c;const d=(h,p,y)=>{y instanceof xt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===wne)Ov(o).forEach(h=>{h instanceof xt?h!==this&&(h.targets().add(this),a.push(h)):Zl("Pulse parameters must be operator instances.")}),this.source=o;else if(_u(o))for(i.set(s,-1,Array(l=o.length)),c=0;c<l;++c)d(s,c,o[c]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||_ne,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Cne(e,t,n,i){let r=1,a;return e instanceof xt?a=e:e&&e.prototype instanceof xt?a=new e:mu(e)?a=new xt(null,e):(r=0,a=new xt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function Mne(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let Tne=0;function Ox(e,t,n){this.id=++Tne,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function tu(e,t,n){return new Ox(e,t,n)}Ox.prototype={_filter:UA,_apply:V7,targets(){return this._targets||(this._targets=Mx(xx))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=tu(e);return this.targets().add(t),t},apply(e){const t=tu(null,e);return this.targets().add(t),t},merge(){const e=tu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=tu();return this.targets().add(tu(null,null,dJ(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(tu(null,null,()=>n=!0)),t.targets().add(tu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=UA,this._targets=null}};function Dne(e,t,n,i){const r=this,a=tu(n,i),s=function(c){c.dataflow=r;try{a.receive(c)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Ov(e);const l=o.length;for(let c=0;c<l;++c)o[c].addEventListener(t,s);return a}function kne(e,t){const n=this.locale();return uU(e,t,n.timeParse,n.utcParse)}function One(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Nne(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:oU(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function Rne(e,t,n){const i=this,r=i._pending||zne(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(UA).insert(a.data||[])),r.done(),a}function zne(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Fne={skip:!0};function Lne(e,t,n,i,r){return(e instanceof xt?Bne:Une)(this,e,t,n,i,r),this}function Une(e,t,n,i,r,a){const s=Q7({},a,Fne);let o,l;mu(n)||(n=cM(n)),i===void 0?o=c=>e.touch(n(c)):mu(i)?(l=new xt(null,i,r,!1),o=c=>{l.evaluate(c);const d=n(c),h=l.value;dU(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=c=>e.update(n(c),i,s),t.apply(o)}function Bne(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new xt(null,jne(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function jne(e,t){return t=mu(t)?t:cM(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function Pne(e){e.rank=++this._rank}function Ine(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&Zl("Cycle detected in dataflow graph.")}const Bv={},Na=1,iu=2,Us=4,qne=Na|iu,y4=Na|Us,jf=Na|iu|Us,v4=8,ip=16,b4=32,x4=64;function vu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function i_(e,t){const n=[];return zl(e,t,i=>n.push(i)),n}function S4(e,t){const n={};return e.visit(t,i=>{n[we(i)]=1}),i=>n[we(i)]?null:i}function sy(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}vu.prototype={StopPropagation:Bv,ADD:Na,REM:iu,MOD:Us,ADD_REM:qne,ADD_MOD:y4,ALL:jf,REFLOW:v4,SOURCE:ip,NO_SOURCE:b4,NO_FIELDS:x4,fork(e){return new vu(this.dataflow).init(this,e)},clone(){const e=this.fork(jf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(jf|ip)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new vu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&x4)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&iu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Us?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&b4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||jf;return t&Na&&this.add.length||t&iu&&this.rem.length||t&Us&&this.mod.length},reflow(e){if(e)return this.fork(jf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Us,S4(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return _u(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?_u(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Na&&(n.addF=sy(n.addF,t)),e&iu&&(n.remF=sy(n.remF,t)),e&Us&&(n.modF=sy(n.modF,t)),e&ip&&(n.srcF=sy(n.srcF,t)),n},materialize(e){e=e||jf;const t=this;return e&Na&&t.addF&&(t.add=i_(t.add,t.addF),t.addF=null),e&iu&&t.remF&&(t.rem=i_(t.rem,t.remF),t.remF=null),e&Us&&t.modF&&(t.mod=i_(t.mod,t.modF),t.modF=null),e&ip&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&ip)return zl(n.source,n.srcF,i),n;e&Na&&zl(n.add,n.addF,i),e&iu&&zl(n.rem,n.remF,i),e&Us&&zl(n.mod,n.modF,i);const r=n.source;if(e&v4&&r){const a=n.add.length+n.mod.length;a===r.length||(a?zl(r,S4(n,y4),i):zl(r,n.srcF,i))}return n}};function CM(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}Z7(CM,vu,{fork(e){const t=new vu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?_u(e)?e.some(i=>n[i]):n[e]:0},filter(){Zl("MultiPulse does not support filtering.")},materialize(){Zl("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function Hne(e,t,n){const i=this,r=[];if(i._pulse)return hU(i);if(i._pending&&await i._pending,t&&await Zy(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new vu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Mx(xx);let s=0,o,l,c;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=Bv),l!==Bv&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),c=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),c&&(i._postrun=[],i.error(c)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await Zy(i,d[h].callback)}return n&&await Zy(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function Gne(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Yne(e,t,n){return this._pulse?hU(this):(this.evaluate(e,t,n),this)}function Xne(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function hU(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Vne(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Wne(e,t){const n=e.source,i=this._clock;return n&&_u(n)?new CM(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Qne(this._pulse,n&&n.pulse)}function Qne(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Bv&&(e.source=t.source),e)}const MM={skip:!1,force:!1};function Zne(e,t){const n=t||MM;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Kne(e,t,n){const i=n||MM;return(e.set(t)||i.force)&&this.touch(e,i),this}function Jne(e,t,n){this.touch(e,n||MM);const i=new vu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function eie(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),gU(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,tie(t,0,e)):i=n,i}}}function gU(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function tie(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,gU(e,i,t,n)}function cd(){this.logger(fJ()),this.logLevel(W7),this._clock=0,this._rank=0,this._locale=EM();try{this._loader=Cx()}catch{}this._touched=Mx(xx),this._input={},this._pulse=null,this._heap=eie((e,t)=>e.qrank-t.qrank),this._postrun=[]}function rp(e){return function(){return this._log[e].apply(this,arguments)}}cd.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:rp("error"),warn:rp("warn"),info:rp("info"),debug:rp("debug"),logLevel:rp("level"),cleanThreshold:1e4,add:Cne,connect:Mne,rank:Pne,rerank:Ine,pulse:Jne,touch:Zne,update:Kne,changeset:Fc,ingest:One,parse:kne,preload:Rne,request:Nne,events:Dne,on:Lne,evaluate:Hne,run:Yne,runAsync:Gne,runAfter:Xne,_enqueue:Vne,_getPulse:Wne};function J(e,t){xt.call(this,e,null,t)}Z7(J,xt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Cd={};function pU(e){const t=mU(e);return t&&t.Definition||null}function mU(e){return e=e&&e.toLowerCase(),hJ(Cd,e)?Cd[e]:null}function ga(e,t,n){return e.fields=t||[],e.fname=n,e}function Ri(e){return e==null?null:e.fname}function Ja(e){return e==null?null:e.fields}function yU(e){return e.length===1?nie(e[0]):iie(e)}const nie=e=>function(t){return t[e]},iie=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Pn(e){throw Error(e)}function vU(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Pn("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Pn("Access path missing closing bracket: "+e),i&&Pn("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function p0(e,t,n){const i=vU(e);return e=i.length===1?i[0]:e,ga((n&&n.get||yU)(i),[e],t||e)}p0("id");const bU=ga(e=>e,[],"identity"),rie=ga(()=>0,[],"zero");ga(()=>1,[],"one");const aie=ga(()=>!0,[],"true");ga(()=>!1,[],"false");var xU=Array.isArray;function SU(e){return e[e.length-1]}function EU(e){return e==null||e===""?null:+e}function ci(e){return e!=null?xU(e)?e:[e]:[]}function wU(e){return typeof e=="function"}const sie="descending";function oie(e,t,n){n=n||{},t=ci(t)||[];const i=[],r=[],a={},s=n.comparator||uie;return ci(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===sie?-1:1),r.push(o=wU(o)?o:p0(o,null,n)),(Ja(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:ga(s(r,i),Object.keys(a))}const TM=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),uie=(e,t)=>e.length===1?lie(e[0],t[0]):cie(e,t,e.length),lie=(e,t)=>function(n,i){return TM(e(n),e(i))*t},cie=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=TM(a(i),a(r));return s*t[o]});function fie(e){return wU(e)?e:()=>e}function DM(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function m0(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function die(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function V0(e,t){return Object.hasOwn(e,t)}const oy={};function kM(e){let t={},n;function i(a){return V0(t,a)&&t[a]!==oy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===oy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=oy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==oy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return r}function Ue(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),DM(i,n)}function hie(e,t,n){e&&(e=t?ci(e).map(o=>o.replace(/\\(.)/g,"$1")):ci(e));const i=e&&e.length,r=yU,a=o=>r(t?[o]:vU(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return ga(s,e,"key")}function gie(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,c=0;for(;o<r&&l<a;++c)s[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++c)s[c]=t[o];for(;l<a;++l,++c)s[c]=n[l];return s}function pie(e){return e&&SU(e)-e[0]||0}function*_U(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function OM(e,t,n){const i=Float64Array.from(_U(e,n));return i.sort(eo),t.map(r=>dL(i,r))}function NM(e,t){return OM(e,[.25,.5,.75],t)}function RM(e,t){const n=e.length,i=qJ(e,t),r=NM(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function AU(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,c,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/i),c=e.minstep||0,o=Math.max(c,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=c&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Rr=Math.random;function mie(e){Rr=e}function $U(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(_U(e,i)),a=r.length,s=t;let o,l,c,d;for(c=0,d=Array(s);c<s;++c){for(o=0,l=0;l<a;++l)o+=r[~~(Rr()*a)];d[c]=o/a}return d.sort(eo),[qA(d,n/2),qA(d,1-n/2)]}function CU(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),c=l,d=l+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(c=(l+c)/2;s<o;++s)a[s]=c;d=h+t,l=h}c=h}for(c=(l+c)/2;s<o;++s)a[s]=c;return n?yie(a,t+t/4):a}function yie(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function vie(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function bie(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Rr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const MU=Math.sqrt(2*Math.PI),xie=Math.SQRT2;let ap=NaN;function Nx(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(ap===ap)n=ap,ap=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,ap=i*a}return e+n*t}function zM(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*MU)}function Rx(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function zx(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*xie*Sie(2*e-1)}function Sie(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function FM(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Nx(n,i),pdf:a=>zM(a,n,i),cdf:a=>Rx(a,n,i),icdf:a=>zx(a,n,i)};return r.mean(e).stdev(t)}function LM(e,t){const n=FM();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=RM(e)),r):t},sample(){return e[~~(Rr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function UM(e,t){return e=e||0,t=t??1,Math.exp(e+Nx()*t)}function BM(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*MU*e)}function jM(e,t,n){return Rx(Math.log(e),t,n)}function PM(e,t,n){return Math.exp(zx(e,t,n))}function TU(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>UM(n,i),pdf:a=>BM(a,n,i),cdf:a=>jM(a,n,i),icdf:a=>PM(a,n,i)};return r.mean(e).stdev(t)}function DU(e,t){let n=0,i;function r(s){const o=[];let l=0,c;for(c=0;c<n;++c)l+=o[c]=s[c]==null?1:+s[c];for(c=0;c<n;++c)o[c]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Rr();let o=e[n-1],l=i[0],c=0;for(;c<n-1;l+=i[++c])if(s<l){o=e[c];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function IM(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rr()}function qM(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function HM(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function GM(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function kU(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>IM(n,i),pdf:a=>qM(a,n,i),cdf:a=>HM(a,n,i),icdf:a=>GM(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function YM(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function W0(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Fx(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,c=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,l+=(d-l)/o,c+=(h-c)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=c;return[a,s,l,c]}function Q0(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function hh(e,t,n,i,r){let a=0,s=0;return Q0(e,t,n,(o,l)=>{const c=l-r(o),d=l-i;a+=c*c,s+=d*d}),1-a/s}function XM(e,t,n){let i=0,r=0,a=0,s=0,o=0;Q0(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=W0(i,r,a,s),c=d=>l[0]+l[1]*d;return{coef:l,predict:c,rSquared:hh(e,t,n,r,c)}}function OU(e,t,n){let i=0,r=0,a=0,s=0,o=0;Q0(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=W0(i,r,a,s),c=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:c,rSquared:hh(e,t,n,r,c)}}function NU(e,t,n){const[i,r,a,s]=Fx(e,t,n);let o=0,l=0,c=0,d=0,h=0,p,y,v;Q0(e,t,n,(_,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,l+=(v-l)/h,c+=(v*y-c)/h,d+=(p*v-d)/h});const[b,S]=W0(l/s,o/s,c/s,d/s),w=_=>Math.exp(b+S*(_-a));return{coef:[Math.exp(b-S*a),S],predict:w,rSquared:hh(e,t,n,s,w)}}function RU(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Q0(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const c=W0(i,r,a,s),d=h=>c[0]*Math.pow(h,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:d,rSquared:hh(e,t,n,o,d)}}function VM(e,t,n){const[i,r,a,s]=Fx(e,t,n),o=i.length;let l=0,c=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,l+=(S-l)/y,c+=(S*v-c)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const w=d-l*l,_=l*w-c*c,A=(p*l-h*c)/_,$=(h*w-p*c)/_,C=-A*l,D=T=>(T=T-a,A*T*T+$*T+C+s);return{coef:[C-$*a+A*a*a+s,$-2*A*a,A],predict:D,rSquared:hh(e,t,n,s,D)}}function zU(e,t,n,i){if(i===0)return YM(e,t,n);if(i===1)return XM(e,t,n);if(i===2)return VM(e,t,n);const[r,a,s,o]=Fx(e,t,n),l=r.length,c=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(c.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(c);const w=wie(d),_=A=>{A-=s;let $=o+w[0]+w[1]*A+w[2]*A*A;for(p=3;p<h;++p)$+=w[p]*Math.pow(A,p);return $};return{coef:Eie(h,w,-s,o),predict:_,rSquared:hh(e,t,n,o,_)}}function Eie(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function wie(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const E4=2,w4=1e-12;function FU(e,t,n,i){const[r,a,s,o]=Fx(e,t,n,!0),l=r.length,c=Math.max(2,~~(i*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=E4;){const v=[0,c-1];for(let S=0;S<l;++S){const w=r[S],_=v[0],A=v[1],$=w-r[_]>r[A]-w?_:A;let C=0,D=0,T=0,O=0,R=0;const L=1/Math.abs(r[$]-w||1);for(let U=_;U<=A;++U){const P=r[U],B=a[U],N=_ie(Math.abs(w-P)*L)*p[U],q=P*N;C+=N,D+=q,T+=B*N,O+=B*q,R+=P*q}const[z,H]=W0(D/C,T/C,O/C,R/C);d[S]=z+H*w,h[S]=Math.abs(a[S]-d[S]),Aie(r,S+1,v)}if(y===E4)break;const b=hL(h);if(Math.abs(b)<w4)break;for(let S=0,w,_;S<l;++S)w=h[S]/(6*b),p[S]=w>=1?w4:(_=1-w*w)*_}return $ie(r,d,s,o)}function _ie(e){return(e=1-e*e*e)*e*e}function Aie(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function $ie(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],c;for(;s<r;++s)c=e[s]+n,l[0]===c?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[c,t[s]],a.push(l));return l[1]+=i,a}const Cie=.5*Math.PI/180;function Lx(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,c=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)c.push(r(a+b/n*o));return c.push(r(s)),c}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=c[0],p=d[d.length-1];const y=1/o,v=Mie(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=l&&Tie(h,b,p,y,v)>Cie?d.push(b):(h=p,c.push(p),d.pop()),p=d[d.length-1]}return c}function Mie(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function Tie(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function Die(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function JA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Die(e)}function LU(e,t,n){return n||e+(t?"_"+t:"")}const r_=()=>{},kie={init:r_,add:r_,rem:r_,idx:0},y0={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Z0=Object.keys(y0).filter(e=>e!=="__count__");function Oie(e,t){return(n,i)=>DM({name:e,aggregate_param:i,out:n||e},kie,t)}[...Z0,"__count__"].forEach(e=>{y0[e]=Oie(e,y0[e])});function UU(e,t,n){return y0[e](n,t)}function BU(e,t){return e.idx-t.idx}function Nie(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=y0[r]())})};return e.forEach(n),Object.values(t).sort(BU)}function Rie(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function zie(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Fie(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Lie(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function jU(e,t){const n=t||bU,i=Nie(e),r=e.slice().sort(BU);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=Rie,a.prototype.add=zie,a.prototype.rem=Fie,a.prototype.set=Lie,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function WM(e){this._key=e?p0(e):we,this.reset()}const qn=WM.prototype;qn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};qn.add=function(e){this._add.push(e)};qn.rem=function(e){this._rem.push(e)};qn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,c;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(c=e[o])]?s[n(c)]=0:a[l++]=c;return this._rem=[],this._add=a};qn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",V0(n,a)||(n[a]=1,++r);return r};qn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=die(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};qn.argmin=function(e){return this.extent(e)[0]||{}};qn.argmax=function(e){return this.extent(e)[1]||{}};qn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};qn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};qn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=NM(this.values(),e),this._get=e),this._q};qn.q1=function(e){return this.quartile(e)[0]};qn.q2=function(e){return this.quartile(e)[1]};qn.q3=function(e){return this.quartile(e)[2]};qn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=$U(this.values(),1e3,.05,e),this._get=e),this._ci};qn.ci0=function(e){return this.ci(e)[0]};qn.ci1=function(e){return this.ci(e)[1]};function Cu(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Cu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Z0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ue(Cu,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,c,d,h;for(l in o)for(d=o[l].tuple,c=0;c<r;++c)i[c][h=d[n[c]]]=h}a(e._prev),a(t);function s(o,l,c){const d=n[c],h=i[c++];for(const p in h){const y=o?o+"|"+p:p;l[d]=h[p],c<r?s(y,l,c):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(_){const A=ci(Ja(_)),$=A.length;let C=0,D;for(;C<$;++C)i[D=A[C]]||(i[D]=1,t.push(D))}this._dims=ci(e.groupby),this._dnames=this._dims.map(_=>{const A=Ri(_);return r(_),n.push(A),A}),this.cellkey=e.key?e.key:JA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],c=a.length,d={};let h,p,y,v,b,S,w;for(c!==s.length&&Pn("Unmatched number of fields and aggregate ops."),w=0;w<c;++w){if(h=a[w],p=s[w],y=o[w]||null,h==null&&p!=="count"&&Pn("Null aggregate field specified."),b=Ri(h),S=LU(p,b,l[w]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(UU(p,y,S))}return this._measures=this._measures.map(_=>jU(_,_.field)),Object.create(null)},cellkey:JA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new WM),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?fU(t.tuple,a):st(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,c,d,h;if(i)for(c in i)l=i[c],(!r||l.num)&&s.push(l.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Uie=1e-14;function QM(e){J.call(this,null,e)}QM.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ue(QM,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let c;return e.modified()?(t=t.reflow(!0),c=t.SOURCE):c=t.modified(Ja(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?d=>{const h=i(d);d[o]=h,d[l]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=AU(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(c){let d=EU(t(c));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(Uie+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=ga(l,Ja(t),e.name||"bin_"+Ri(t))}});function PU(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,c)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),c&&l&&r.sort(l),a.length&&(r=l?gie(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function ZM(e){J.call(this,[],e)}ZM.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ue(ZM,J,{transform(e,t){const n=t.fork(t.ALL),i=PU(we,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(zc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function IU(e){xt.call(this,null,Bie,e)}Ue(IU,xt);function Bie(e){return this.value&&!e.modified()?this.value:oie(e.fields,e.orders)}function KM(e){J.call(this,null,e)}KM.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function jie(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ue(KM,J,{transform(e,t){const n=h=>p=>{for(var y=jie(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],c=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,c;for(o in n)l=i[o],c=n[o]||0,!l&&c?(i[o]=l=st({}),l[r]=o,l[a]=c,s.add.push(l)):c===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==c&&(l[a]=c,s.mod.push(l));return s.modifies(t)}});function JM(e){J.call(this,null,e)}JM.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ue(JM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=Pie(o,r,a,e.filter||aie)):n.mod=o,n.source=this.value,n.modifies(i)}});function Pie(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,c;o<s;++o)for(a[t]=c=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(st(a)),a={},a[t]=c);return r}const _4={kde:LM,mixture:DU,normal:FM,lognormal:TU,uniform:kU},Iie="distributions",A4="function",qie="field";function qU(e,t){const n=e[A4];V0(_4,n)||Pn("Unknown distribution function: "+n);const i=_4[n]();for(const r in e)r===qie?i.data((e.from||t()).map(e[r])):r===Iie?i[r](e[r].map(a=>qU(a,t))):typeof i[r]===A4&&i[r](e[r]);return i}function e3(e){J.call(this,null,e)}const HU=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Hie={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:HU},{name:"weights",type:"number",array:!0}]};e3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:HU.concat(Hie)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ue(e3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=qU(e.distribution,Gie(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&Pn("Invalid density method: "+s),!e.extent&&!i.data&&Pn("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||m0(i.data()),c=Lx(s,l,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],st(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function Gie(e){return()=>e.materialize(e.SOURCE).source}function GU(e,t){return e?e.map((n,i)=>t[i]||Ri(n)):null}function t3(e,t,n){const i=[],r=h=>h(l);let a,s,o,l,c,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],c=t.map(r),d=a[c],d||(a[c]=d=[],d.dims=c,i.push(d)),d.push(n(l));return i}const YU="bin";function n3(e){J.call(this,null,e)}n3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:YU}]};const Yie=(e,t)=>pie(m0(e,t))/30;Ue(n3,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=t3(t.source,e.groupby,bU),r=e.smooth||!1,a=e.field,s=e.step||Yie(n,a),o=zc((v,b)=>a(v)-a(b)),l=e.as||YU,c=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<c;++p){const v=i[p].sort(o);y=-1;for(const b of CU(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][l]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(l)}});function XU(e){xt.call(this,null,Xie,e),this.modified(!0)}Ue(XU,xt);function Xie(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ga(n=>t(n,e),Ja(t),Ri(t))}function i3(e){J.call(this,[void 0,void 0],e)}i3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ue(i3,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=EU(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=Ri(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function r3(e,t){xt.call(this,e),this.parent=t,this.count=0}Ue(r3,xt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Ux(e){J.call(this,{},e),this._keys=kM();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}Ue(Ux,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=V0(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new r3(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=we(l),d=a.get(c);d!==void 0&&(a.delete(c),o(d).rem(l))}),t.visit(t.ADD,l=>{const c=i(l);a.set(we(l),c),o(c).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const c=we(l),d=a.get(c),h=i(l);d===h?o(h).mod(l):(a.set(c,h),o(d).rem(l),o(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(we(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const c=we(l),d=a.get(c),h=i(l);d!==h&&(a.set(c,h),o(d).rem(l),o(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function VU(e){xt.call(this,null,Vie,e)}Ue(VU,xt);function Vie(e){return this.value&&!e.modified()?this.value:xU(e.name)?ci(e.name).map(t=>p0(t)):p0(e.name,e.as)}function a3(e){J.call(this,kM(),e)}a3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ue(a3,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let c=!0;t.visit(t.REM,h=>{const p=we(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?a.push(h):i.set(we(h),1)});function d(h){const p=we(h),y=l(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):c&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(c=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function s3(e){J.call(this,[],e)}s3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ue(s3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=GU(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),c=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<c;++d){for(p=$M(o),h=0;h<s;++h)p[r[h]]=(y=l[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function o3(e){J.call(this,[],e)}o3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ue(o3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Ri),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let d=0,h;d<l;++d)h=$M(c),h[s]=r[d],h[o]=i[d](c),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function u3(e){J.call(this,null,e)}u3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ue(u3,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function WU(e){J.call(this,[],e)}Ue(WU,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=st(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const uy={value:"value",median:hL,mean:WJ,min:IA,max:Kl},Wie=[];function l3(e){J.call(this,[],e)}l3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Qie(e){var t=e.method||uy.value,n;if(uy[t]==null)Pn("Unrecognized imputation method: "+t);else return t===uy.value?(n=e.value!==void 0?e.value:0,()=>n):uy[t]}function Zie(e){const t=e.field;return n=>n?t(n):NaN}Ue(l3,J,{transform(e,t){var n=t.fork(t.ALL),i=Qie(e),r=Zie(e),a=Ri(e.field),s=Ri(e.key),o=(e.groupby||[]).map(Ri),l=Kie(t.source,e.groupby,e.key,e.keyvals),c=[],d=this.value,h=l.domain.length,p,y,v,b,S,w,_,A,$,C;for(S=0,A=l.length;S<A;++S)for(p=l[S],v=p.values,y=NaN,_=0;_<h;++_)if(p[_]==null){for(b=l.domain[_],C={_impute:!0},w=0,$=v.length;w<$;++w)C[o[w]]=v[w];C[s]=b,C[a]=Number.isNaN(y)?y=i(p,r):y,c.push(st(C))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=c,n}});function Kie(e,t,n,i){var r=w=>w(S),a=[],s=i?i.slice():[],o={},l={},c,d,h,p,y,v,b,S;for(s.forEach((w,_)=>o[w]=_+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(c=t?t.map(r):Wie)+"",(h=l[d])||(h=l[d]=[],a.push(h),h.values=c),h[y-1]=S;return a.domain=s,a}function c3(e){Cu.call(this,e)}c3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Z0},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ue(c3,Cu,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{DM(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function f3(e){J.call(this,null,e)}f3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ue(f3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=t3(i,e.groupby,e.field),a=(e.groupby||[]).map(Ri),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&Pn("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=m0(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=LM(y,s)[o],b=e.counts?y.length:1,S=d||m0(y);Lx(v,S,h,p).forEach(w=>{const _={};for(let A=0;A<a.length;++A)_[a[A]]=y.dims[A];_[l[0]]=w[0],_[l[1]]=w[1]*b,c.push(st(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function QU(e){xt.call(this,null,Jie,e)}Ue(QU,xt);function Jie(e){return this.value&&!e.modified()?this.value:hie(e.fields,e.flat)}function ZU(e){J.call(this,[],e),this._pending=null}Ue(ZU,J,{transform(e,t){const n=t.dataflow;return this._pending?a_(this,t,this._pending):ere(e)?t.StopPropagation:e.values?a_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ci(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>a_(this,t,ci(i.data)))}});function ere(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function a_(e,t,n){n.forEach(st);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function d3(e){J.call(this,{},e)}d3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ue(d3,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,c=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&Pn('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&Pn('The "as" parameter has too few output field names.'),d=d||r.map(Ri),h=function(v){for(var b=0,S=0,w,_;b<o;++b)if(_=i.get(n[b](v)),_==null)for(w=0;w<p;++w,++S)v[d[S]]=a;else for(w=0;w<p;++w,++S)v[d[S]]=r[w](_)}):(d||Pn("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?c=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,h),c.modifies(d)}});function KU(e){xt.call(this,null,tre,e)}Ue(KU,xt);function tre(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function JU(e){xt.call(this,null,nre,e)}Ue(JU,xt);function nre(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function eB(e){J.call(this,null,e)}Ue(eB,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function h3(e){Cu.call(this,e)}h3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Z0,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ue(h3,Cu,{_transform:Cu.prototype.transform,transform(e,t){return this._transform(ire(e,t),t)}});function ire(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Ja(n).concat(Ja(i)),s=are(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>rre(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function rre(e,t,n,i){return ga(r=>t(r)===e?n(r):NaN,i,e+"")}function are(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(TM),t?r.slice(0,t):r}function tB(e){Ux.call(this,e)}Ue(tB,Ux,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(we(a),n,t,a);return(e.modified("field")||i&&t.modified(Ja(i)))&&Pn("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(st(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function g3(e){J.call(this,null,e)}g3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ue(g3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=GU(e.fields,e.as||[]),a=i?(o,l)=>sre(o,l,i,r):Dx;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=we(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,st({}));s[we(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[we(o)]))}),n}});function sre(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function nB(e){J.call(this,null,e)}Ue(nB,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function p3(e){J.call(this,null,e)}p3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const ore=1e-14;Ue(p3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=t3(r,e.groupby,e.field),s=(e.groupby||[]).map(Ri),o=[],l=e.step||.01,c=e.probs||rr(l/2,1-ore,l),d=c.length;return a.forEach(h=>{const p=OM(h,c);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=c[y],v[i[1]]=p[y],o.push(st(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function iB(e){J.call(this,null,e)}Ue(iB,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=we(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=$M(r);i[we(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[we(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function m3(e){J.call(this,[],e),this.count=0}m3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ue(m3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[we(h)]=1,d),{});let s=this.value,o=this.count,l=0;function c(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Rr()),p<s.length&&p>=l&&(h=s[p],a[we(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=we(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[we(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[we(d)]||c(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[we(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[we(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[we(d)])),this.count=o,this.value=n.source=s,n}});function y3(e){J.call(this,null,e)}y3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ue(y3,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=rr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,st(a)}),n.add=t.add.concat(this.value),n}});function rB(e){J.call(this,null,e),this.modified(!0)}Ue(rB,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function v3(e){J.call(this,null,e)}const aB=["unit0","unit1"];v3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:yM,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:aB}]};Ue(v3,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?fh:ch)(a.unit).offset,o=e.as||aB,l=o[0],c=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ja(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,w;b==null?(v[l]=null,i&&(v[c]=null)):(v[l]=S=w=a(b),i&&(v[c]=w=s(S,d)),S<h&&(h=S),w>p&&(p=w))}),a.start=h,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:IL({extent:e.extent||m0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=vM(i),s=this.value||{},o=(n?NL:OL)(a,r);return o.unit=SU(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function sB(e){J.call(this,kM(),e)}Ue(sB,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function oB(e){J.call(this,null,e)}Ue(oB,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(zc(e.sort)):t.source).map(e.field))}});function ure(e,t,n,i){const r=v0[e](t,n);return{init:r.init||rie,update:function(a,s){s[i]=r.next(a)}}}const v0={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=v0.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Pn("ntile num must be greater than zero.");const n=v0.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Pn("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=lre(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function lre(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const cre=Object.keys(v0);function uB(e){const t=ci(e.ops),n=ci(e.fields),i=ci(e.params),r=ci(e.aggregate_params),a=ci(e.as),s=this.outputs=[],o=this.windows=[],l={},c={},d=[],h=[];let p=!0;function y(v){ci(Ja(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],w=i[b],_=r[b]||null,A=Ri(S),$=LU(v,A,a[b]);if(y(S),s.push($),V0(v0,v))o.push(ure(v,S,w,$));else{if(S==null&&v!=="count"&&Pn("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let C=c[A];C||(C=c[A]=[],C.field=S,h.push(C)),C.push(UU(v,_,$))}}),(d.length||h.length)&&(this.cell=fre(h,d,p)),this.inputs=Object.keys(l)}const lB=uB.prototype;lB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};lB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function fre(e,t,n){e=e.map(l=>jU(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new WM;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let c=0;c<r;++c)a[c].add(a[c].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let c=0;c<r;++c)a[c].rem(a[c].get(l),l)}},i.set=function(l){let c,d;for(o&&o.values(),c=0,d=t.length;c<d;++c)l[t[c]]=i.num;if(!n)for(c=0,d=a.length;c<d;++c)a[c].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function b3(e){J.call(this,{},e),this._mlen=0,this._mods=[]}b3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cre.concat(Z0)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ue(b3,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=zc(e.sort),r=JA(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new uB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)dre(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=PU(we),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function dre(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,c=a?sh(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||fie(-1)};t.init();for(let h=0;h<l;++h)hre(d,s,h,l),a&&gre(d,c),t.update(d,o[h])}function hre(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function gre(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const pre=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Cu,bin:QM,collect:ZM,compare:IU,countpattern:KM,cross:JM,density:e3,dotbin:n3,expression:XU,extent:i3,facet:Ux,field:VU,filter:a3,flatten:s3,fold:o3,formula:u3,generate:WU,impute:l3,joinaggregate:c3,kde:f3,key:QU,load:ZU,lookup:d3,multiextent:KU,multivalues:JU,params:eB,pivot:h3,prefacet:tB,project:g3,proxy:nB,quantile:p3,relay:iB,sample:m3,sequence:y3,sieve:rB,subflow:r3,timeunit:v3,tupleindex:sB,values:oB,window:b3},Symbol.toStringTag,{value:"Module"}));function gh(e,t,n){return e.fields=t||[],e.fname=n,e}function mre(e){return e.length===1?yre(e[0]):vre(e)}const yre=e=>function(t){return t[e]},vre=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Xp(e){throw Error(e)}function bre(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Xp("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Xp("Access path missing closing bracket: "+e),i&&Xp("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function xre(e,t,n){const i=bre(e);return e=i.length===1?i[0]:e,gh(mre(i),[e],e)}xre("id");gh(e=>e,[],"identity");gh(()=>0,[],"zero");gh(()=>1,[],"one");const cB=gh(()=>!0,[],"true");gh(()=>!1,[],"false");var Iu=Array.isArray;function $4(e){return e===Object(e)}function fB(e){return e[e.length-1]}function dB(e){return e!=null?Iu(e)?e:[e]:[]}function x3(e){return typeof e=="function"}function hB(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Hs(e,t){return Object.hasOwn(e,t)}function Sre(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hB(i,n)}function C4(e){return typeof e=="number"}const Ere=1e4;function wre(e){e=+e||Ere;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Hs(t,s)||Hs(n,s),get:s=>Hs(t,s)?t[s]:Hs(n,s)?a(s,n[s]):void 0,set:(s,o)=>Hs(t,s)?t[s]=o:a(s,o)}}function _re(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function ot(e){return function(){return e}}const M4=Math.abs,Xn=Math.atan2,El=Math.cos,Are=Math.max,s_=Math.min,Ma=Math.sin,Hl=Math.sqrt,Wn=1e-12,Md=Math.PI,jv=Md/2,gB=2*Md;function $re(e){return e>1?0:e<-1?Md:Math.acos(e)}function T4(e){return e>=1?jv:e<=-1?-jv:Math.asin(e)}const e$=Math.PI,t$=2*e$,Fl=1e-6,Cre=t$-Fl;function pB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Mre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let S3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pB:Mre(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,c=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Fl)if(!(Math.abs(h*l-c*d)>Fl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+c*c,S=y*y+v*v,w=Math.sqrt(b),_=Math.sqrt(p),A=a*Math.tan((e$-Math.acos((b+p-S)/(2*w*_)))/2),$=A/_,C=A/w;Math.abs($-1)>Fl&&this._append`L${t+$*d},${n+$*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+C*l},${this._y1=n+C*c}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),c=t+o,d=n+l,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Fl||Math.abs(this._y1-d)>Fl)&&this._append`L${c},${d}`,i&&(p<0&&(p=p%t$+t$),p>Cre?this._append`A${i},${i},0,1,${h},${t-o},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=d}`:p>Fl&&this._append`A${i},${i},0,${+(p>=e$)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Bx(){return new S3}Bx.prototype=S3.prototype;function jx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new S3(t)}function Tre(e){return e.innerRadius}function Dre(e){return e.outerRadius}function kre(e){return e.startAngle}function Ore(e){return e.endAngle}function Nre(e){return e&&e.padAngle}function Rre(e,t,n,i,r,a,s,o){var l=n-e,c=i-t,d=s-r,h=o-a,p=h*l-d*c;if(!(p*p<Wn))return p=(d*(t-a)-h*(e-r))/p,[e+p*l,t+p*c]}function ly(e,t,n,i,r,a,s){var o=e-n,l=t-i,c=(s?a:-a)/Hl(o*o+l*l),d=c*l,h=-c*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,w=(y+b)/2,_=v-p,A=b-y,$=_*_+A*A,C=r-a,D=p*b-v*y,T=(A<0?-1:1)*Hl(Are(0,C*C*$-D*D)),O=(D*A-_*T)/$,R=(-D*_-A*T)/$,L=(D*A+_*T)/$,z=(-D*_+A*T)/$,H=O-S,U=R-w,P=L-S,B=z-w;return H*H+U*U>P*P+B*B&&(O=L,R=z),{cx:O,cy:R,x01:-d,y01:-h,x11:O*(r/C-1),y11:R*(r/C-1)}}function zre(){var e=Tre,t=Dre,n=ot(0),i=null,r=kre,a=Ore,s=Nre,o=null,l=jx(c);function c(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-jv,b=a.apply(this,arguments)-jv,S=M4(b-v),w=b>v;if(o||(o=d=l()),y<p&&(h=y,y=p,p=h),!(y>Wn))o.moveTo(0,0);else if(S>gB-Wn)o.moveTo(y*El(v),y*Ma(v)),o.arc(0,0,y,v,b,!w),p>Wn&&(o.moveTo(p*El(b),p*Ma(b)),o.arc(0,0,p,b,v,w));else{var _=v,A=b,$=v,C=b,D=S,T=S,O=s.apply(this,arguments)/2,R=O>Wn&&(i?+i.apply(this,arguments):Hl(p*p+y*y)),L=s_(M4(y-p)/2,+n.apply(this,arguments)),z=L,H=L,U,P;if(R>Wn){var B=T4(R/p*Ma(O)),N=T4(R/y*Ma(O));(D-=B*2)>Wn?(B*=w?1:-1,$+=B,C-=B):(D=0,$=C=(v+b)/2),(T-=N*2)>Wn?(N*=w?1:-1,_+=N,A-=N):(T=0,_=A=(v+b)/2)}var q=y*El(_),Y=y*Ma(_),ee=p*El(C),F=p*Ma(C);if(L>Wn){var V=y*El(A),ae=y*Ma(A),se=p*El($),de=p*Ma($),be;if(S<Md)if(be=Rre(q,Y,se,de,V,ae,ee,F)){var Se=q-be[0],It=Y-be[1],Qe=V-be[0],ge=ae-be[1],ke=1/Ma($re((Se*Qe+It*ge)/(Hl(Se*Se+It*It)*Hl(Qe*Qe+ge*ge)))/2),ze=Hl(be[0]*be[0]+be[1]*be[1]);z=s_(L,(p-ze)/(ke-1)),H=s_(L,(y-ze)/(ke+1))}else z=H=0}T>Wn?H>Wn?(U=ly(se,de,q,Y,y,H,w),P=ly(V,ae,ee,F,y,H,w),o.moveTo(U.cx+U.x01,U.cy+U.y01),H<L?o.arc(U.cx,U.cy,H,Xn(U.y01,U.x01),Xn(P.y01,P.x01),!w):(o.arc(U.cx,U.cy,H,Xn(U.y01,U.x01),Xn(U.y11,U.x11),!w),o.arc(0,0,y,Xn(U.cy+U.y11,U.cx+U.x11),Xn(P.cy+P.y11,P.cx+P.x11),!w),o.arc(P.cx,P.cy,H,Xn(P.y11,P.x11),Xn(P.y01,P.x01),!w))):(o.moveTo(q,Y),o.arc(0,0,y,_,A,!w)):o.moveTo(q,Y),!(p>Wn)||!(D>Wn)?o.lineTo(ee,F):z>Wn?(U=ly(ee,F,V,ae,p,-z,w),P=ly(q,Y,se,de,p,-z,w),o.lineTo(U.cx+U.x01,U.cy+U.y01),z<L?o.arc(U.cx,U.cy,z,Xn(U.y01,U.x01),Xn(P.y01,P.x01),!w):(o.arc(U.cx,U.cy,z,Xn(U.y01,U.x01),Xn(U.y11,U.x11),!w),o.arc(0,0,p,Xn(U.cy+U.y11,U.cx+U.x11),Xn(P.cy+P.y11,P.cx+P.x11),w),o.arc(P.cx,P.cy,z,Xn(P.y11,P.x11),Xn(P.y01,P.x01),!w))):o.arc(0,0,p,C,$,w)}if(o.closePath(),d)return o=null,d+""||null}return c.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Md/2;return[El(h)*d,Ma(h)*d]},c.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ot(+d),c):e},c.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ot(+d),c):t},c.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ot(+d),c):n},c.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ot(+d),c):i},c.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ot(+d),c):r},c.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ot(+d),c):a},c.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ot(+d),c):s},c.context=function(d){return arguments.length?(o=d??null,c):o},c}function mB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yB(e){this._context=e}yB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function E3(e){return new yB(e)}function vB(e){return e[0]}function bB(e){return e[1]}function xB(e,t){var n=ot(!0),i=null,r=E3,a=null,s=jx(o);e=typeof e=="function"?e:e===void 0?vB:ot(e),t=typeof t=="function"?t:t===void 0?bB:ot(t);function o(l){var c,d=(l=mB(l)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),c=0;c<=d;++c)!(c<d&&n(h=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,c,l),+t(h,c,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:ot(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:ot(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ot(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function SB(e,t,n){var i=null,r=ot(!0),a=null,s=E3,o=null,l=jx(c);e=typeof e=="function"?e:e===void 0?vB:ot(+e),t=typeof t=="function"?t:ot(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?bB:ot(+n);function c(h){var p,y,v,b=(h=mB(h)).length,S,w=!1,_,A=new Array(b),$=new Array(b);for(a==null&&(o=s(_=l())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===w)if(w=!w)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],$[v]);o.lineEnd(),o.areaEnd()}w&&(A[p]=+e(S,p,h),$[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):$[p]))}if(_)return o=null,_+""||null}function d(){return xB().defined(r).curve(s).context(a)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),i=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),c):e},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ot(+h),c):i},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ot(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(i).y(t)},c.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ot(!!h),c):r},c.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),c):s},c.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),c):a},c}const Fre={draw(e,t){const n=Hl(t/Md);e.moveTo(n,0),e.arc(0,0,n,0,gB)}};function Lre(e,t){let n=null,i=jx(r);e=typeof e=="function"?e:ot(e||Fre),t=typeof t=="function"?t:ot(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ot(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ot(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function Mu(){}function Pv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Px(e){this._context=e}Px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ure(e){return new Px(e)}function EB(e){this._context=e}EB.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bre(e){return new EB(e)}function wB(e){this._context=e}wB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jre(e){return new wB(e)}function _B(e,t){this._basis=new Px(e),this._beta=t}_B.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Pre=function e(t){function n(i){return t===1?new Px(i):new _B(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Iv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function w3(e,t){this._context=e,this._k=(1-t)/6}w3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Iv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ire=function e(t){function n(i){return new w3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function _3(e,t){this._context=e,this._k=(1-t)/6}_3.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qre=function e(t){function n(i){return new _3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function A3(e,t){this._context=e,this._k=(1-t)/6}A3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hre=function e(t){function n(i){return new A3(i,t)}return n.tension=function(i){return e(+i)},n}(0);function $3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Wn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Wn){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function AB(e,t){this._context=e,this._alpha=t}AB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:$3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gre=function e(t){function n(i){return t?new AB(i,t):new w3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function $B(e,t){this._context=e,this._alpha=t}$B.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yre=function e(t){function n(i){return t?new $B(i,t):new _3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function CB(e,t){this._context=e,this._alpha=t}CB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xre=function e(t){function n(i){return t?new CB(i,t):new A3(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function MB(e){this._context=e}MB.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Vre(e){return new MB(e)}function D4(e){return e<0?-1:1}function k4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(D4(a)+D4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function O4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function o_(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function qv(e){this._context=e}qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o_(this,this._t0,O4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,o_(this,O4(this,n=k4(this,e,t)),n);break;default:o_(this,this._t0,n=k4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function TB(e){this._context=new DB(e)}(TB.prototype=Object.create(qv.prototype)).point=function(e,t){qv.prototype.point.call(this,t,e)};function DB(e){this._context=e}DB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function Wre(e){return new qv(e)}function Qre(e){return new TB(e)}function kB(e){this._context=e}kB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=N4(e),r=N4(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function N4(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function Zre(e){return new kB(e)}function Ix(e,t){this._context=e,this._t=t}Ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Kre(e){return new Ix(e,.5)}function Jre(e){return new Ix(e,0)}function eae(e){return new Ix(e,1)}function bu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const tae=()=>typeof Image<"u"?Image:null;function ph(e,t,n){return e.fields=t||[],e.fname=n,e}function nae(e){return e.length===1?iae(e[0]):rae(e)}const iae=e=>function(t){return t[e]},rae=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Jy(e){throw Error(e)}function aae(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Jy("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Jy("Access path missing closing bracket: "+e),i&&Jy("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function sae(e,t,n){const i=aae(e);return e=i.length===1?i[0]:e,ph(nae(i),[e],e)}sae("id");ph(e=>e,[],"identity");ph(()=>0,[],"zero");ph(()=>1,[],"one");ph(()=>!0,[],"true");ph(()=>!1,[],"false");var C3=Array.isArray;function oae(e){return e===Object(e)}function Tu(e){return e[e.length-1]}function uae(e){return e==null||e===""?null:+e}function lae(e){return e!=null?C3(e)?e:[e]:[]}function cae(e){return!1}function fae(e){return cae()?e:()=>e}function dae(e){return typeof e=="number"}function OB(e){return typeof e=="string"}function hae(e){return e&&Tu(e)-e[0]||0}function gae(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function as(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const n$=Symbol("implicit");function M3(){var e=new X6,t=[],n=[],i=n$;function r(a){let s=e.get(a);if(s===void 0){if(i!==n$)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new X6;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return M3(t,n).unknown(i)},as.apply(r,arguments),r}function mh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function K0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Hu(){}var fc=.7,Td=1/fc,fd="\\s*([+-]?\\d+)\\s*",b0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pae=/^#([0-9a-f]{3,8})$/,mae=new RegExp(`^rgb\\(${fd},${fd},${fd}\\)$`),yae=new RegExp(`^rgb\\(${Ia},${Ia},${Ia}\\)$`),vae=new RegExp(`^rgba\\(${fd},${fd},${fd},${b0}\\)$`),bae=new RegExp(`^rgba\\(${Ia},${Ia},${Ia},${b0}\\)$`),xae=new RegExp(`^hsl\\(${b0},${Ia},${Ia}\\)$`),Sae=new RegExp(`^hsla\\(${b0},${Ia},${Ia},${b0}\\)$`),R4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mh(Hu,x0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:z4,formatHex:z4,formatHex8:Eae,formatHsl:wae,formatRgb:F4,toString:F4});function z4(){return this.rgb().formatHex()}function Eae(){return this.rgb().formatHex8()}function wae(){return NB(this).formatHsl()}function F4(){return this.rgb().formatRgb()}function x0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pae.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?L4(t):n===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mae.exec(e))?new Sn(t[1],t[2],t[3],1):(t=yae.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vae.exec(e))?cy(t[1],t[2],t[3],t[4]):(t=bae.exec(e))?cy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xae.exec(e))?j4(t[1],t[2]/100,t[3]/100,1):(t=Sae.exec(e))?j4(t[1],t[2]/100,t[3]/100,t[4]):R4.hasOwnProperty(e)?L4(R4[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function L4(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function cy(e,t,n,i){return i<=0&&(e=t=n=NaN),new Sn(e,t,n,i)}function T3(e){return e instanceof Hu||(e=x0(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function Du(e,t,n,i){return arguments.length===1?T3(e):new Sn(e,t,n,i??1)}function Sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}mh(Sn,Du,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Jl(this.r),Jl(this.g),Jl(this.b),Hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U4,formatHex:U4,formatHex8:_ae,formatRgb:B4,toString:B4}));function U4(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}`}function _ae(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}${Gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function B4(){const e=Hv(this.opacity);return`${e===1?"rgb(":"rgba("}${Jl(this.r)}, ${Jl(this.g)}, ${Jl(this.b)}${e===1?")":`, ${e})`}`}function Hv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gl(e){return e=Jl(e),(e<16?"0":"")+e.toString(16)}function j4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kr(e,t,n,i)}function NB(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);if(e instanceof Hu||(e=x0(e)),!e)return new Kr;if(e instanceof Kr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new Kr(s,o,l,e.opacity)}function Gv(e,t,n,i){return arguments.length===1?NB(e):new Kr(e,t,n,i??1)}function Kr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mh(Kr,Gv,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Sn(u_(e>=240?e-240:e+120,r,i),u_(e,r,i),u_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Kr(P4(this.h),fy(this.s),fy(this.l),Hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hv(this.opacity);return`${e===1?"hsl(":"hsla("}${P4(this.h)}, ${fy(this.s)*100}%, ${fy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function P4(e){return e=(e||0)%360,e<0?e+360:e}function fy(e){return Math.max(0,Math.min(1,e||0))}function u_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const RB=Math.PI/180,zB=180/Math.PI,Yv=18,FB=.96422,LB=1,UB=.82521,BB=4/29,dd=6/29,jB=3*dd*dd,Aae=dd*dd*dd;function PB(e){if(e instanceof qa)return new qa(e.l,e.a,e.b,e.opacity);if(e instanceof Qs)return IB(e);e instanceof Sn||(e=T3(e));var t=d_(e.r),n=d_(e.g),i=d_(e.b),r=l_((.2225045*t+.7168786*n+.0606169*i)/LB),a,s;return t===n&&n===i?a=s=r:(a=l_((.4360747*t+.3850649*n+.1430804*i)/FB),s=l_((.0139322*t+.0971045*n+.7141733*i)/UB)),new qa(116*r-16,500*(a-r),200*(r-s),e.opacity)}function Xv(e,t,n,i){return arguments.length===1?PB(e):new qa(e,t,n,i??1)}function qa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}mh(qa,Xv,K0(Hu,{brighter(e){return new qa(this.l+Yv*(e??1),this.a,this.b,this.opacity)},darker(e){return new qa(this.l-Yv*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=FB*c_(t),e=LB*c_(e),n=UB*c_(n),new Sn(f_(3.1338561*t-1.6168667*e-.4906146*n),f_(-.9787684*t+1.9161415*e+.033454*n),f_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function l_(e){return e>Aae?Math.pow(e,1/3):e/jB+BB}function c_(e){return e>dd?e*e*e:jB*(e-BB)}function f_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function d_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $ae(e){if(e instanceof Qs)return new Qs(e.h,e.c,e.l,e.opacity);if(e instanceof qa||(e=PB(e)),e.a===0&&e.b===0)return new Qs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*zB;return new Qs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Vv(e,t,n,i){return arguments.length===1?$ae(e):new Qs(e,t,n,i??1)}function Qs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function IB(e){if(isNaN(e.h))return new qa(e.l,0,0,e.opacity);var t=e.h*RB;return new qa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mh(Qs,Vv,K0(Hu,{brighter(e){return new Qs(this.h,this.c,this.l+Yv*(e??1),this.opacity)},darker(e){return new Qs(this.h,this.c,this.l-Yv*(e??1),this.opacity)},rgb(){return IB(this).rgb()}}));var qB=-.14861,D3=1.78277,k3=-.29227,qx=-.90649,S0=1.97294,I4=S0*qx,q4=S0*D3,H4=D3*k3-qx*qB;function Cae(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);e instanceof Sn||(e=T3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(H4*i+I4*t-q4*n)/(H4+I4-q4),a=i-r,s=(S0*(n-r)-k3*a)/qx,o=Math.sqrt(s*s+a*a)/(S0*r*(1-r)),l=o?Math.atan2(s,a)*zB-120:NaN;return new ec(l<0?l+360:l,o,r,e.opacity)}function i$(e,t,n,i){return arguments.length===1?Cae(e):new ec(e,t,n,i??1)}function ec(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mh(ec,i$,K0(Hu,{brighter(e){return e=e==null?Td:Math.pow(Td,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fc:Math.pow(fc,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*RB,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Sn(255*(t+n*(qB*i+D3*r)),255*(t+n*(k3*i+qx*r)),255*(t+n*(S0*i)),this.opacity)}}));function HB(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function GB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return HB((n-i/t)*t,s,r,a,o)}}function YB(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return HB((n-i/t)*t,r,a,s,o)}}const Hx=e=>()=>e;function XB(e,t){return function(n){return e+n*t}}function Mae(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Gx(e,t){var n=t-e;return n?XB(e,n>180||n<-180?n-360*Math.round(n/360):n):Hx(isNaN(e)?t:e)}function Tae(e){return(e=+e)==1?En:function(t,n){return n-t?Mae(t,n,e):Hx(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?XB(e,n):Hx(isNaN(e)?t:e)}const r$=function e(t){var n=Tae(t);function i(r,a){var s=n((r=Du(r)).r,(a=Du(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),c=En(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=c(d),r+""}}return i.gamma=e,i}(1);function VB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=Du(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var Dae=VB(GB),kae=VB(YB);function O3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function WB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Oae(e,t){return(WB(t)?O3:QB)(e,t)}function QB(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Gu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function ZB(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Qr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function KB(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Gu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var a$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,h_=new RegExp(a$.source,"g");function Nae(e){return function(){return e}}function Rae(e){return function(t){return e(t)+""}}function JB(e,t){var n=a$.lastIndex=h_.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=a$.exec(e))&&(r=h_.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Qr(i,r)})),n=h_.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Rae(l[0].x):Nae(t):(t=l.length,function(c){for(var d=0,h;d<t;++d)o[(h=l[d]).i]=h.x(c);return o.join("")})}function Gu(e,t){var n=typeof t,i;return t==null||n==="boolean"?Hx(t):(n==="number"?Qr:n==="string"?(i=x0(t))?(t=i,r$):JB:t instanceof x0?r$:t instanceof Date?ZB:WB(t)?O3:Array.isArray(t)?QB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KB:Qr)(e,t)}function zae(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Fae(e,t){var n=Gx(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function J0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var G4=180/Math.PI,s$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ej(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*G4,skewX:Math.atan(l)*G4,scaleX:s,scaleY:o}}var dy;function Lae(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?s$:ej(t.a,t.b,t.c,t.d,t.e,t.f)}function Uae(e){return e==null||(dy||(dy=document.createElementNS("http://www.w3.org/2000/svg","g")),dy.setAttribute("transform",e),!(e=dy.transform.baseVal.consolidate()))?s$:(e=e.matrix,ej(e.a,e.b,e.c,e.d,e.e,e.f))}function tj(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function a(c,d,h,p,y,v){if(c!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Qr(c,h)},{i:b-2,x:Qr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(c,d,h,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Qr(c,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(c,d,h,p){c!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Qr(c,d)}):d&&h.push(r(h)+"skewX("+d+i)}function l(c,d,h,p,y,v){if(c!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Qr(c,h)},{i:b-2,x:Qr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(c,d){var h=[],p=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,p),s(c.rotate,d.rotate,h,p),o(c.skewX,d.skewX,h,p),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,p),c=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var Bae=tj(Lae,"px, ","px)","deg)"),jae=tj(Uae,", ",")",")"),Pae=1e-12;function Y4(e){return((e=Math.exp(e))+1/e)/2}function Iae(e){return((e=Math.exp(e))-1/e)/2}function qae(e){return((e=Math.exp(2*e))-1)/(e+1)}const Hae=function e(t,n,i){function r(a,s){var o=a[0],l=a[1],c=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-l,b=y*y+v*v,S,w;if(b<Pae)w=Math.log(p/c)/t,S=function(T){return[o+T*y,l+T*v,c*Math.exp(t*T*w)]};else{var _=Math.sqrt(b),A=(p*p-c*c+i*b)/(2*c*n*_),$=(p*p-c*c-i*b)/(2*p*n*_),C=Math.log(Math.sqrt(A*A+1)-A),D=Math.log(Math.sqrt($*$+1)-$);w=(D-C)/t,S=function(T){var O=T*w,R=Y4(C),L=c/(n*_)*(R*qae(t*O+C)-Iae(C));return[o+L*y,l+L*v,c*R/Y4(t*O+C)]}}return S.duration=w*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r}(Math.SQRT2,2,4);function nj(e){return function(t,n){var i=e((t=Gv(t)).h,(n=Gv(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Gae=nj(Gx);var Yae=nj(En);function Xae(e,t){var n=En((e=Xv(e)).l,(t=Xv(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function ij(e){return function(t,n){var i=e((t=Vv(t)).h,(n=Vv(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Vae=ij(Gx);var Wae=ij(En);function rj(e){return function t(n){n=+n;function i(r,a){var s=e((r=i$(r)).h,(a=i$(a)).h),o=En(r.s,a.s),l=En(r.l,a.l),c=En(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=c(d),r+""}}return i.gamma=t,i}(1)}const Qae=rj(Gx);var Zae=rj(En);function N3(e,t){t===void 0&&(t=e,e=Gu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function Kae(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Jae=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Gu,interpolateArray:Oae,interpolateBasis:GB,interpolateBasisClosed:YB,interpolateCubehelix:Qae,interpolateCubehelixLong:Zae,interpolateDate:ZB,interpolateDiscrete:zae,interpolateHcl:Vae,interpolateHclLong:Wae,interpolateHsl:Gae,interpolateHslLong:Yae,interpolateHue:Fae,interpolateLab:Xae,interpolateNumber:Qr,interpolateNumberArray:O3,interpolateObject:KB,interpolateRgb:r$,interpolateRgbBasis:Dae,interpolateRgbBasisClosed:kae,interpolateRound:J0,interpolateString:JB,interpolateTransformCss:Bae,interpolateTransformSvg:jae,interpolateZoom:Hae,piecewise:N3,quantize:Kae},Symbol.toStringTag,{value:"Module"}));function ese(e){return function(){return e}}function o$(e){return+e}var X4=[0,1];function Ni(e){return e}function u$(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ese(isNaN(t)?NaN:.5)}function tse(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function nse(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=u$(r,i),a=n(s,a)):(i=u$(i,r),a=n(a,s)),function(o){return a(i(o))}}function ise(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=u$(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=Au(e,o,1,i)-1;return a[l](r[l](o))}}function em(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yx(){var e=X4,t=X4,n=Gu,i,r,a,s=Ni,o,l,c;function d(){var p=Math.min(e.length,t.length);return s!==Ni&&(s=tse(e[0],e[p-1])),o=p>2?ise:nse,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((c||(c=o(t,e.map(i),Qr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,o$),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=J0,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Ni,d()):s!==Ni},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function aj(){return Yx()(Ni,Ni)}function sj(e,t,n,i){var r=$u(e,t,n),a;switch(i=cc(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=bL(r,s))&&(i.precision=a),pM(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=xL(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=vL(r))&&(i.precision=a-(i.type==="%")*2);break}}return Sx(i)}function Lc(e){var t=e.domain;return e.ticks=function(n){var i=t();return jA(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return sj(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,c,d=10;for(o<s&&(c=s,s=o,o=c,c=r,r=a,a=c);d-- >0;){if(c=PA(s,o,n),c===l)return i[r]=s,i[a]=o,t(i);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function oj(){var e=aj();return e.copy=function(){return em(e,oj())},as.apply(e,arguments),Lc(e)}function uj(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,o$),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return uj(e).unknown(t)},e=arguments.length?Array.from(e,o$):[0,1],Lc(n)}function lj(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function V4(e){return Math.log(e)}function W4(e){return Math.exp(e)}function rse(e){return-Math.log(-e)}function ase(e){return-Math.exp(-e)}function sse(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ose(e){return e===10?sse:e===Math.E?Math.exp:t=>Math.pow(e,t)}function use(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Q4(e){return(t,n)=>-e(-t,n)}function R3(e){const t=e(V4,W4),n=t.domain;let i=10,r,a;function s(){return r=use(i),a=ose(i),n()[0]<0?(r=Q4(r),a=Q4(a),e(rse,ase)):e(V4,W4),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let c=l[0],d=l[l.length-1];const h=d<c;h&&([c,d]=[d,c]);let p=r(c),y=r(d),v,b;const S=o==null?10:+o;let w=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),c>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<c)){if(b>d)break;w.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<c)){if(b>d)break;w.push(b)}w.length*2<S&&(w=jA(c,d,S))}else w=jA(p,y,Math.min(y-p,S)).map(a);return h?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=cc(l)).precision==null&&(l.trim=!0),l=Sx(l)),o===1/0)return l;const c=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=c?l(d):""}},t.nice=()=>n(lj(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function cj(){const e=R3(Yx()).domain([1,10]);return e.copy=()=>em(e,cj()).base(e.base()),as.apply(e,arguments),e}function Z4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function K4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function z3(e){var t=1,n=e(Z4(t),K4(t));return n.constant=function(i){return arguments.length?e(Z4(t=+i),K4(t)):t},Lc(n)}function fj(){var e=z3(Yx());return e.copy=function(){return em(e,fj()).constant(e.constant())},as.apply(e,arguments)}function J4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function lse(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function cse(e){return e<0?-e*e:e*e}function F3(e){var t=e(Ni,Ni),n=1;function i(){return n===1?e(Ni,Ni):n===.5?e(lse,cse):e(J4(n),J4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Lc(t)}function L3(){var e=F3(Yx());return e.copy=function(){return em(e,L3()).exponent(e.exponent())},as.apply(e,arguments),e}function fse(){return L3.apply(null,arguments).exponent(.5)}function dj(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=dL(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[Au(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(eo),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return dj().domain(e).range(t).unknown(i)},as.apply(a,arguments)}function hj(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[Au(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,i[0]]:c>=n?[i[n-1],t]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return hj().domain([e,t]).range(r).unknown(a)},as.apply(Lc(s),arguments)}function gj(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[Au(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return gj().domain(e).range(t).unknown(n)},as.apply(r,arguments)}function dse(e){return new Date(e)}function hse(e){return e instanceof Date?+e:+new Date(+e)}function U3(e,t,n,i,r,a,s,o,l,c){var d=aj(),h=d.invert,p=d.domain,y=c(".%L"),v=c(":%S"),b=c("%I:%M"),S=c("%I %p"),w=c("%a %d"),_=c("%b %d"),A=c("%B"),$=c("%Y");function C(D){return(l(D)<D?y:o(D)<D?v:s(D)<D?b:a(D)<D?S:i(D)<D?r(D)<D?w:_:n(D)<D?A:$)(D)}return d.invert=function(D){return new Date(h(D))},d.domain=function(D){return arguments.length?p(Array.from(D,hse)):p().map(dse)},d.ticks=function(D){var T=p();return e(T[0],T[T.length-1],D??10)},d.tickFormat=function(D,T){return T==null?C:c(T)},d.nice=function(D){var T=p();return(!D||typeof D.range!="function")&&(D=t(T[0],T[T.length-1],D??10)),D?p(lj(T,D)):d},d.copy=function(){return em(d,U3(e,t,n,i,r,a,s,o,l,c))},d}function gse(){return as.apply(U3(kee,Oee,Qa,d0,uh,to,_x,Ex,Ws,xM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pse(){return as.apply(U3(Tee,Dee,Za,h0,lh,yu,Ax,wx,Ws,SM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xx(){var e=0,t=1,n,i,r,a,s=Ni,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),c):[s(0),s(1)]}}return c.range=d(Gu),c.rangeRound=d(J0),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),c}}function Yu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function B3(){var e=Lc(Xx()(Ni));return e.copy=function(){return Yu(e,B3())},qu.apply(e,arguments)}function pj(){var e=R3(Xx()).domain([1,10]);return e.copy=function(){return Yu(e,pj()).base(e.base())},qu.apply(e,arguments)}function mj(){var e=z3(Xx());return e.copy=function(){return Yu(e,mj()).constant(e.constant())},qu.apply(e,arguments)}function j3(){var e=F3(Xx());return e.copy=function(){return Yu(e,j3()).exponent(e.exponent())},qu.apply(e,arguments)}function mse(){return j3.apply(null,arguments).exponent(.5)}function Vx(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,c=Ni,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),c(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(c=b,y):c};function v(b){return function(S){var w,_,A;return arguments.length?([w,_,A]=S,c=N3(b,[w,_,A]),y):[c(0),c(.5),c(1)]}}return y.range=v(Gu),y.rangeRound=v(J0),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function yj(){var e=Lc(Vx()(Ni));return e.copy=function(){return Yu(e,yj())},qu.apply(e,arguments)}function vj(){var e=R3(Vx()).domain([.1,1,10]);return e.copy=function(){return Yu(e,vj()).base(e.base())},qu.apply(e,arguments)}function bj(){var e=z3(Vx());return e.copy=function(){return Yu(e,bj()).constant(e.constant())},qu.apply(e,arguments)}function P3(){var e=F3(Vx());return e.copy=function(){return Yu(e,P3()).exponent(e.exponent())},qu.apply(e,arguments)}function yse(){return P3.apply(null,arguments).exponent(.5)}function ss(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const vse=ss("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bse=ss("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),xse=ss("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Sse=ss("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Ese=ss("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),wse=ss("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_se=ss("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ase=ss("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),$se=ss("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Cse=ss("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function I3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Mse="identity",Dd="linear",fo="log",tm="pow",nm="sqrt",Wx="symlog",dc="time",hc="utc",Ha="sequential",yh="diverging",kd="quantile",Qx="quantize",Zx="threshold",q3="ordinal",l$="point",xj="band",H3="bin-ordinal",hn="continuous",im="discrete",rm="discretizing",Ur="interpolating",G3="temporal";function Tse(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Dse(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,c;for(r<i&&(o=i,i=r,r=o),l=0,c=n.length;l<c;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function Y3(){const e=M3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,c=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=I3(h,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*c,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=rr(h).map(w=>b+r*w);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),o=l,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],w,_,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return w=Math.max(0,Au(y,b)-1),_=b===S?w:Au(y,S)-1,b-y[w]>a+1e-10&&++w,p&&(A=w,w=v-_,_=v-A),w>_?void 0:t().slice(w,_+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return Y3().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(c)},d()}function Sj(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Sj(t())},e}function kse(){return Sj(Y3().paddingInner(1))}var Ose=Array.prototype.map;function Nse(e){return Ose.call(e,uae)}const Rse=Array.prototype.slice;function Ej(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Au(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Nse(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Rse.call(i),n):t.slice()},n.tickFormat=function(i,r){return sj(e[0],Tu(e),i??10,r)},n.copy=function(){return Ej().domain(n.domain()).range(n.range())},n}const Wv=new Map,wj=Symbol("vega_scale");function _j(e){return e[wj]=!0,e}function ez(e){return e&&e[wj]===!0}function zse(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Tse(a):a.invertExtent?Dse(a):void 0),a.type=e,_j(a)};return i.metadata=gae(lae(n)),i}function it(e,t,n){return arguments.length>1?(Wv.set(e,zse(e,t,n)),this):Aj(e)?Wv.get(e):void 0}it(Mse,uj);it(Dd,oj,hn);it(fo,cj,[hn,fo]);it(tm,L3,hn);it(nm,fse,hn);it(Wx,fj,hn);it(dc,gse,[hn,G3]);it(hc,pse,[hn,G3]);it(Ha,B3,[hn,Ur]);it(`${Ha}-${Dd}`,B3,[hn,Ur]);it(`${Ha}-${fo}`,pj,[hn,Ur,fo]);it(`${Ha}-${tm}`,j3,[hn,Ur]);it(`${Ha}-${nm}`,mse,[hn,Ur]);it(`${Ha}-${Wx}`,mj,[hn,Ur]);it(`${yh}-${Dd}`,yj,[hn,Ur]);it(`${yh}-${fo}`,vj,[hn,Ur,fo]);it(`${yh}-${tm}`,P3,[hn,Ur]);it(`${yh}-${nm}`,yse,[hn,Ur]);it(`${yh}-${Wx}`,bj,[hn,Ur]);it(kd,dj,[rm,kd]);it(Qx,hj,rm);it(Zx,gj,rm);it(H3,Ej,[im,rm]);it(q3,M3,im);it(xj,Y3,im);it(l$,kse,im);function Aj(e){return Wv.has(e)}function Uc(e,t){const n=Wv.get(e);return n&&n.metadata[t]}function X3(e){return Uc(e,hn)}function Od(e){return Uc(e,im)}function c$(e){return Uc(e,rm)}function $j(e){return Uc(e,fo)}function Fse(e){return Uc(e,G3)}function Cj(e){return Uc(e,Ur)}function Mj(e){return Uc(e,kd)}const Lse=["clamp","base","constant","exponent"];function Tj(e,t){const n=t[0],i=Tu(t)-n;return function(r){return e(n+r*i)}}function Kx(e,t,n){return N3(V3(t||"rgb",n),e)}function Dj(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function kj(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?fae(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=it(a)().domain([t,n]).range([0,1]),Lse.forEach(o=>e[o]?s[o](e[o]()):0),s)}function V3(e,t){const n=Jae[Use(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Use(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Bse={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},jse={accent:bse,category10:vse,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:xse,observable10:Sse,paired:Ese,pastel1:wse,pastel2:_se,set1:Ase,set2:$se,set3:Cse,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Oj(e){if(C3(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function Nj(e,t){for(const n in e)W3(n,t(e[n]))}const tz={};Nj(jse,Oj);Nj(Bse,e=>Kx(Oj(e)));function W3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(tz[e]=t,this):tz[e]}const ev="symbol",Pse="discrete",Ise="gradient",qse=e=>C3(e)?e.map(t=>String(t)):String(e),Hse=(e,t)=>e[1]-t[1],Gse=(e,t)=>t[1]-e[1];function Q3(e,t,n){let i;return dae(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(hae(e.domain())/n||1)+1))),oae(t)&&(i=t.step,t=t.interval),OB(t)&&(t=e.type===dc?ch(t):e.type==hc?fh(t):Jy("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function Rj(e,t,n){let i=e.range(),r=i[0],a=Tu(i),s=Hse;if(r>a&&(i=a,a=r,r=i,s=Gse),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Tu(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=o)}return t}function Z3(e,t){return e.bins?Rj(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function zj(e,t,n,i,r,a){const s=t.type;let o=qse;if(s===dc||r===dc)o=e.timeFormat(i);else if(s===hc||r===hc)o=e.utcFormat(i);else if($j(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const c=Fj(t,n,!1);o=d=>c(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function Fj(e,t,n){const i=Z3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let c=l/Math.pow(r,Math.round(Math.log(l)/a));return c*r<r-.5&&(c*=r),c<=s};return n?i.filter(o):o}const f$={[kd]:"quantiles",[Qx]:"thresholds",[Zx]:"domain"},Lj={[kd]:"quantiles",[Qx]:"domain"};function Uj(e,t){return e.bins?Vse(e.bins):e.type===fo?Fj(e,t,!0):f$[e.type]?Xse(e[f$[e.type]]()):Z3(e,t)}function Yse(e,t,n){const i=t[Lj[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function Xse(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Vse(e){const t=e.slice(0,-1);return t.max=Tu(e),t}const Wse=e=>f$[e.type]||e.bins;function Bj(e,t,n,i,r,a,s){const o=Lj[t.type]&&a!==dc&&a!==hc?Yse(e,t,r):zj(e,t,n,r,a,s);return i===ev&&Wse(t)?Qse(o):i===Pse?Zse(o):Kse(o)}const Qse=e=>(t,n,i)=>{const r=nz(i[n+1],nz(i.max,1/0)),a=iz(t,e),s=iz(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},nz=(e,t)=>e??t,Zse=e=>(t,n)=>n?e(t):null,Kse=e=>t=>e(t),iz=(e,t)=>Number.isFinite(e)?t(e):null;function Jse(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Tu(t),a=r-i;if(e.type===Zx){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function eoe(e,t,n,i){const r=i||t.type;return OB(n)&&Fse(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===dc?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===hc?e.utcFormat("%A, %d %B %Y, %X UTC"):Bj(e,t,5,null,n,i,!0)}function jj(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=eoe(e,t,n.format,n.formatType);if(c$(t.type)){const a=Uj(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Od(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Tu(a))}`}}let Pj=0;function toe(){Pj=0}const Qv="p_";function K3(e){return e&&e.gradient}function Ij(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?Qv:"";return r||(r=e.id="gradient_"+Pj++,i==="radial"?(e.x1=Ta(e.x1,.5),e.y1=Ta(e.y1,.5),e.r1=Ta(e.r1,0),e.x2=Ta(e.x2,.5),e.y2=Ta(e.y2,.5),e.r2=Ta(e.r2,.5),a=Qv):(e.x1=Ta(e.x1,0),e.y1=Ta(e.y1,0),e.x2=Ta(e.x2,1),e.y2=Ta(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Ta(e,t){return e??t}function qj(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const rz={basis:{curve:Ure},"basis-closed":{curve:Bre},"basis-open":{curve:jre},bundle:{curve:Pre,tension:"beta",value:.85},cardinal:{curve:Ire,tension:"tension",value:0},"cardinal-open":{curve:Hre,tension:"tension",value:0},"cardinal-closed":{curve:qre,tension:"tension",value:0},"catmull-rom":{curve:Gre,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yre,tension:"alpha",value:.5},"catmull-rom-open":{curve:Xre,tension:"alpha",value:.5},linear:{curve:E3},"linear-closed":{curve:Vre},monotone:{horizontal:Qre,vertical:Wre},natural:{curve:Zre},step:{curve:Kre},"step-after":{curve:eae},"step-before":{curve:Jre}};function J3(e,t,n){var i=Hs(rz,e)&&rz[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const noe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ioe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,roe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,aoe=/^((\s+,?\s*)|(,\s*))/,soe=/^[01]/;function Nd(e){const t=[];return(e.match(ioe)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=noe[a],o=ooe(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let c=s;c<l;c+=s)t.push([r,...o.slice(c,c+s)])}}),t}function ooe(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?soe:roe,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(aoe);l!==null&&(r+=l[0].length)}return i}const ku=Math.PI/180,uoe=1e-14,Bl=Math.PI/2,Fa=Math.PI*2,Pf=Math.sqrt(3)/2;var g_={},p_={},Hj=[].join;function loe(e,t,n,i,r,a,s,o,l){const c=Hj.call(arguments);if(g_[c])return g_[c];const d=s*ku,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(l-t)*.5,v=p*(l-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,w=h/n,_=-h/i,A=p/i,$=S*o+w*l,C=_*o+A*l,D=S*e+w*t,T=_*e+A*t;let R=1/((D-$)*(D-$)+(T-C)*(T-C))-.25;R<0&&(R=0);let L=Math.sqrt(R);a==r&&(L=-L);const z=.5*($+D)-L*(T-C),H=.5*(C+T)+L*(D-$),U=Math.atan2(C-H,$-z);let B=Math.atan2(T-H,D-z)-U;B<0&&a===1?B+=Fa:B>0&&a===0&&(B-=Fa);const N=Math.ceil(Math.abs(B/(Bl+.001))),q=[];for(let Y=0;Y<N;++Y){const ee=U+Y*B/N,F=U+(Y+1)*B/N;q[Y]=[z,H,ee,F,n,i,h,p]}return g_[c]=q}function coe(e){const t=Hj.call(e);if(p_[t])return p_[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7];const d=c*s,h=-l*o,p=l*s,y=c*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),w=Math.sin(a),_=.5*(a-r),A=Math.sin(_*.5),$=8/3*A*A/Math.sin(_),C=n+v-$*b,D=i+b+$*v,T=n+S,O=i+w,R=T+$*w,L=O-$*S;return p_[t]=[d*C+h*D,p*C+y*D,d*R+h*L,p*R+y*L,d*T+h*O,p*T+y*O]}const wr=["l",0,0,0,0,0,0,0];function foe(e,t,n){const i=wr[0]=e[0];if(i==="a"||i==="A")wr[1]=t*e[1],wr[2]=n*e[2],wr[3]=e[3],wr[4]=e[4],wr[5]=e[5],wr[6]=t*e[6],wr[7]=n*e[7];else if(i==="h"||i==="H")wr[1]=t*e[1];else if(i==="v"||i==="V")wr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)wr[r]=(r%2==1?t:n)*e[r];return wr}function E0(e,t,n,i,r,a){var s,o=null,l=0,c=0,d=0,h=0,p,y,v,b,S=0,w=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var _=0,A=t.length;_<A;++_){switch(s=t[_],(r!==1||a!==1)&&(s=foe(s,r,a)),s[0]){case"l":l+=s[1],c+=s[2],e.lineTo(l+n,c+i);break;case"L":l=s[1],c=s[2],e.lineTo(l+n,c+i);break;case"h":l+=s[1],e.lineTo(l+n,c+i);break;case"H":l=s[1],e.lineTo(l+n,c+i);break;case"v":c+=s[1],e.lineTo(l+n,c+i);break;case"V":c=s[1],e.lineTo(l+n,c+i);break;case"m":l+=s[1],c+=s[2],S=l,w=c,e.moveTo(l+n,c+i);break;case"M":l=s[1],c=s[2],S=l,w=c,e.moveTo(l+n,c+i);break;case"c":p=l+s[5],y=c+s[6],d=l+s[3],h=c+s[4],e.bezierCurveTo(l+s[1]+n,c+s[2]+i,d+n,h+i,p+n,y+i),l=p,c=y;break;case"C":l=s[5],c=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,l+n,c+i);break;case"s":p=l+s[3],y=c+s[4],d=2*l-d,h=2*c-h,e.bezierCurveTo(d+n,h+i,l+s[1]+n,c+s[2]+i,p+n,y+i),d=l+s[1],h=c+s[2],l=p,c=y;break;case"S":p=s[3],y=s[4],d=2*l-d,h=2*c-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),l=p,c=y,d=s[1],h=s[2];break;case"q":p=l+s[3],y=c+s[4],d=l+s[1],h=c+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,c=y,d=s[1],h=s[2];break;case"t":p=l+s[1],y=c+s[2],o[0].match(/[QqTt]/)===null?(d=l,h=c):o[0]==="t"?(d=2*l-v,h=2*c-b):o[0]==="q"&&(d=2*l-d,h=2*c-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y,d=l+s[1],h=c+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,h=2*c-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,c=y;break;case"a":az(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+c+i]),l+=s[6],c+=s[7];break;case"A":az(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],c=s[7];break;case"z":case"Z":l=S,c=w,e.closePath();break}o=s}}function az(e,t,n,i){const r=loe(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=coe(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const sz=.5773502691896257,oz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n,r=i-n*sz,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n,r=i-n*sz;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Pf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Gj(e){return Hs(oz,e)?oz[e]:doe(e)}var m_={};function doe(e){if(!Hs(m_,e)){const t=Nd(e);m_[e]={draw:function(n,i){E0(n,t,0,0,Math.sqrt(i)/2)}}}return m_[e]}const eu=.448084975506;function hoe(e){return e.x}function goe(e){return e.y}function poe(e){return e.width}function moe(e){return e.height}function Rs(e){return typeof e=="function"?e:()=>+e}function hy(e,t,n){return Math.max(t,Math.min(e,n))}function Yj(){var e=hoe,t=goe,n=poe,i=moe,r=Rs(0),a=r,s=r,o=r,l=null;function c(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),w=+i.call(this,d),_=Math.min(S,w)/2,A=hy(+r.call(this,d),0,_),$=hy(+a.call(this,d),0,_),C=hy(+s.call(this,d),0,_),D=hy(+o.call(this,d),0,_);if(l||(l=y=Bx()),A<=0&&$<=0&&C<=0&&D<=0)l.rect(v,b,S,w);else{var T=v+S,O=b+w;l.moveTo(v+A,b),l.lineTo(T-$,b),l.bezierCurveTo(T-eu*$,b,T,b+eu*$,T,b+$),l.lineTo(T,O-D),l.bezierCurveTo(T,O-eu*D,T-eu*D,O,T-D,O),l.lineTo(v+C,O),l.bezierCurveTo(v+eu*C,O,v,O-eu*C,v,O-C),l.lineTo(v,b+A),l.bezierCurveTo(v,b+eu*A,v+eu*A,b,v+A,b),l.closePath()}if(y)return l=null,y+""||null}return c.x=function(d){return arguments.length?(e=Rs(d),c):e},c.y=function(d){return arguments.length?(t=Rs(d),c):t},c.width=function(d){return arguments.length?(n=Rs(d),c):n},c.height=function(d){return arguments.length?(i=Rs(d),c):i},c.cornerRadius=function(d,h,p,y){return arguments.length?(r=Rs(d),a=h!=null?Rs(h):r,o=p!=null?Rs(p):r,s=y!=null?Rs(y):a,c):r},c.context=function(d){return arguments.length?(l=d??null,c):l},c}function Xj(){var e,t,n,i,r=null,a,s,o,l;function c(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var w=Math.hypot(b,S),_=(b/=w)*l,A=(S/=w)*l,$=Math.atan2(S,b);r.moveTo(s-_,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,$-Math.PI,$),r.lineTo(s+_,o+A),r.arc(s,o,l,$,$+Math.PI)}else r.arc(h,p,v,0,Fa);r.closePath()}else a=1;s=h,o=p,l=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=Bx()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&c(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function am(e,t){return e??t}const sm=e=>e.x||0,om=e=>e.y||0,yoe=e=>e.width||0,voe=e=>e.height||0,boe=e=>(e.x||0)+(e.width||0),xoe=e=>(e.y||0)+(e.height||0),Soe=e=>e.startAngle||0,Eoe=e=>e.endAngle||0,woe=e=>e.padAngle||0,_oe=e=>e.innerRadius||0,Aoe=e=>e.outerRadius||0,$oe=e=>e.cornerRadius||0,Coe=e=>am(e.cornerRadiusTopLeft,e.cornerRadius)||0,Moe=e=>am(e.cornerRadiusTopRight,e.cornerRadius)||0,Toe=e=>am(e.cornerRadiusBottomRight,e.cornerRadius)||0,Doe=e=>am(e.cornerRadiusBottomLeft,e.cornerRadius)||0,koe=e=>am(e.size,64),Ooe=e=>e.size||1,Jx=e=>e.defined!==!1,Noe=e=>Gj(e.shape||"circle"),Roe=zre().startAngle(Soe).endAngle(Eoe).padAngle(woe).innerRadius(_oe).outerRadius(Aoe).cornerRadius($oe),zoe=SB().x(sm).y1(om).y0(xoe).defined(Jx),Foe=SB().y(om).x1(sm).x0(boe).defined(Jx),Loe=xB().x(sm).y(om).defined(Jx),Uoe=Yj().x(sm).y(om).width(yoe).height(voe).cornerRadius(Coe,Moe,Toe,Doe),Boe=Lre().type(Noe).size(koe),joe=Xj().x(sm).y(om).defined(Jx).size(Ooe);function eT(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Poe(e,t){return Roe.context(e)(t)}function Ioe(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Foe:zoe).curve(J3(i,n.orient,n.tension)).context(e)(t)}function qoe(e,t){const n=t[0],i=n.interpolate||"linear";return Loe.curve(J3(i,n.orient,n.tension)).context(e)(t)}function vh(e,t,n,i){return Uoe.context(e)(t,n,i)}function Hoe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Goe(e,t){return Boe.context(e)(t)}function Yoe(e,t){return joe.context(e)(t)}var Vj=1;function Xoe(){Vj=1}function tT(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+Vj++),s=r.clipping[a]||(r.clipping[a]={id:a});return x3(i)?s.path=i(null):eT(n)?s.path=vh(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function rn(e){this.clear(),e&&this.union(e)}rn.prototype={clone(){return new rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+c,l*i+o*r+d,o*i-l*s+c,l*i+o*s+d,o*a-l*r+c,l*a+o*r+d,o*a-l*s+c,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function e2(e){this.mark=e,this.bounds=this.bounds||new rn}function t2(e){e2.call(this,e),this.items=this.items||[]}Sre(t2,e2);class Wj{constructor(t){this._pending=0,this._loader=t||Cx()}pending(){return this._pending}sanitizeURL(t){const n=this;return uz(n),n._loader.sanitize(t,{context:"href"}).then(i=>(sp(n),i)).catch(()=>(sp(n),null))}loadImage(t){const n=this,i=tae();return uz(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Hs(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>sp(n),s.onerror=()=>sp(n),s.src=a,s}).catch(r=>(sp(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function uz(e){e._pending+=1}function sp(e){e._pending-=1}function xo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Voe(t,i):0))}return e}function Voe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Woe=Fa-1e-8;let n2,tv,nv,Yl,d$,iv,h$,g$;const ou=(e,t)=>n2.add(e,t),rv=(e,t)=>ou(tv=e,nv=t),lz=e=>ou(e,n2.y1),cz=e=>ou(n2.x1,e),jl=(e,t)=>d$*e+h$*t,Pl=(e,t)=>iv*e+g$*t,y_=(e,t)=>ou(jl(e,t),Pl(e,t)),v_=(e,t)=>rv(jl(e,t),Pl(e,t));function um(e,t){return n2=e,t?(Yl=t*ku,d$=g$=Math.cos(Yl),iv=Math.sin(Yl),h$=-iv):(d$=g$=1,Yl=iv=h$=0),Qoe}const Qoe={beginPath(){},closePath(){},moveTo:v_,lineTo:v_,rect(e,t,n,i){Yl?(y_(e+n,t),y_(e+n,t+i),y_(e,t+i),v_(e,t)):(ou(e+n,t+i),rv(e,t))},quadraticCurveTo(e,t,n,i){const r=jl(e,t),a=Pl(e,t),s=jl(n,i),o=Pl(n,i);fz(tv,r,s,lz),fz(nv,a,o,cz),rv(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=jl(e,t),o=Pl(e,t),l=jl(n,i),c=Pl(n,i),d=jl(r,a),h=Pl(r,a);dz(tv,s,l,d,lz),dz(nv,o,c,h,cz),rv(d,h)},arc(e,t,n,i,r,a){if(i+=Yl,r+=Yl,tv=n*Math.cos(r)+e,nv=n*Math.sin(r)+t,Math.abs(r-i)>Woe)ou(e-n,t-n),ou(e+n,t+n);else{const s=c=>ou(n*Math.cos(c)+e,n*Math.sin(c)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%Fa,i<0&&(i+=Fa),r=r%Fa,r<0&&(r+=Fa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Fa,o=i-i%Bl,l=0;l<4&&o>r;++l,o-=Bl)s(o);else for(o=i-i%Bl+Bl,l=0;l<4&&o<r;++l,o=o+Bl)s(o)}}};function fz(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function dz(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,c=0,d;Math.abs(a)>uoe?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,c=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(hz(l,e,t,n,i)),0<c&&c<1&&r(hz(c,e,t,n,i))}function hz(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var xu=(xu=bu(1,1))?xu.getContext("2d"):null;const p$=new rn;function nT(e){return function(t,n){if(!xu)return!0;e(xu,t),p$.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=p$;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(xu.isPointInPath(l,o))return!0;return!1}}function iT(e,t){return t.contains(e.x||0,e.y||0)}function Qj(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(p$.set(n,i,n+r,i+a))}function Zj(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return id(t,n,i,r,a)}function id(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,c=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-c,v=-(a-t)),S===1&&(y=c,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Rd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Gr(e,t){return e??t}function gz(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Zoe(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Gr(t.x1,.5)*i,n.y1+Gr(t.y1,.5)*r,Math.max(i,r)*Gr(t.r1,0),n.x1+Gr(t.x2,.5)*i,n.y1+Gr(t.y2,.5)*r,Math.max(i,r)*Gr(t.r2,.5));else{const s=Gr(t.x1,0),o=Gr(t.y1,0),l=Gr(t.x2,1),c=Gr(t.y2,0);if(s===l||o===c||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+c*r);else{const d=bu(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=gz(h.createLinearGradient(s,o,l,c),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return gz(a,t.stops)}function Kj(e,t,n){return K3(n)?Zoe(e,n,t.bounds):n}function Zv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Kj(e,t,t.fill),!0):!1}var Koe=[];function zd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Kj(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Koe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Joe(e,t){return e.zindex-t.zindex||e.index-t.index}function rT(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Joe)}function ua(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=rT(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Kv(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=rT(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function aT(e){return function(t,n,i){ua(n,r=>{(!i||i.intersects(r.bounds))&&Jj(e,t,r,r)})}}function eue(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Jj(e,t,n.items[0],n.items)}}function Jj(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Rd(t,n),n.fill&&Zv(t,n,r)&&t.fill(),n.stroke&&zd(t,n,r)&&t.stroke()))}function i2(e){return e=e||cB,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Kv(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function lm(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,c,d;return l&&(c=s.strokeWidth,d=s.strokeCap,n.lineWidth=c??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function sT(e){return i2(lm(e))}function tc(e,t){return"translate("+e+","+t+")"}function oT(e){return"rotate("+e+")"}function tue(e,t){return"scale("+e+","+t+")"}function eP(e){return tc(e.x||0,e.y||0)}function nue(e){return tc(e.x||0,e.y||0)+(e.angle?" "+oT(e.angle):"")}function iue(e){return tc(e.x||0,e.y||0)+(e.angle?" "+oT(e.angle):"")+(e.scaleX||e.scaleY?" "+tue(e.scaleX||1,e.scaleY||1):"")}function uT(e,t,n){function i(s,o){s("transform",nue(o)),s("d",t(null,o))}function r(s,o){return t(um(s,o.angle),o),xo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,c=o.y||0,d=o.angle||0;s.translate(l,c),d&&s.rotate(d*=ku),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:aT(a),pick:sT(a),isect:n||nT(a)}}var rue=uT("arc",Poe);function aue(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function sue(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function oue(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function lT(e,t,n){function i(l,c){var d=c.mark.items;d.length&&l("d",t(null,d))}function r(l,c){var d=c.items;return d.length===0?l:(t(um(l),d),xo(l,d[0]))}function a(l,c){l.beginPath(),t(l,c)}const s=lm(a);function o(l,c,d,h,p,y){var v=c.items,b=c.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,h*=l.pixelRatio,s(l,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:eue(a),pick:o,isect:iT,tip:n}}var uue=lT("area",Ioe,aue);function lue(e,t){var n=t.clip;e.save(),x3(n)?(e.beginPath(),n(e),e.clip()):tP(e,t.group)}function tP(e,t){e.beginPath(),eT(t)?vh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function nP(e){const t=Gr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function cue(e,t){e("transform",eP(t))}function iP(e,t){const n=nP(t);e("d",vh(null,t,n,n))}function fue(e,t){e("class","background"),e("aria-hidden",!0),iP(e,t)}function due(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?iP(e,t):e("d","")}function hue(e,t,n){const i=t.clip?tT(n,t,t):null;e("clip-path",i)}function gue(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),xo(e,t),e.translate(t.x||0,t.y||0)}function w0(e,t,n,i){const r=nP(t);e.beginPath(),vh(e,t,(n||0)+r,(i||0)+r)}const pue=lm(w0),mue=lm(w0,!1),yue=lm(w0,!0);function vue(e,t,n,i){ua(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(w0(e,r,a,s),Rd(e,r),r.fill&&Zv(e,r,l)&&e.fill(),r.stroke&&!o&&zd(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&tP(e,r),n&&n.translate(-a,-s),ua(r,c=>{(c.marktype==="group"||i==null||i.includes(c.marktype))&&this.draw(e,c,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(w0(e,r,a,s),Rd(e,r),zd(e,r,l)&&e.stroke())})}function bue(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return Kv(t,l=>{let c,d,h;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,h=l.y||0;const y=d+(l.width||0),v=h+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&eT(l)&&!yue(e,l,s,o))return e.restore(),null;const S=l.strokeForeground,w=t.interactive!==!1;return w&&S&&l.stroke&&mue(e,l,s,o)?(e.restore(),l):(c=Kv(l,_=>xue(_,d,h)?this.pick(_,n,i,d,h):null),!c&&w&&(l.fill||!S&&l.stroke)&&pue(e,l,s,o)&&(c=l),e.restore(),c||null)})}function xue(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Sue={type:"group",tag:"g",nested:!1,attr:cue,bound:gue,draw:vue,pick:bue,isect:Qj,content:hue,background:fue,foreground:due},_0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function cT(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function fT(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function dT(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function r2(e,t){return e==="center"?t/2:e==="right"?t:0}function a2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Eue(e,t,n){const i=cT(t,n),r=fT(t,i),a=dT(t,i),s=(t.x||0)-r2(t.align,r),o=(t.y||0)-a2(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,_0["xmlns:xlink"],"xlink:href"),e("transform",tc(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function wue(e,t){const n=t.image,i=fT(t,n),r=dT(t,n),a=(t.x||0)-r2(t.align,i),s=(t.y||0)-a2(t.baseline,r);return e.set(a,s,a+i,s+r)}function _ue(e,t,n){ua(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=cT(i,this);let a=fT(i,r),s=dT(i,r);if(a===0||s===0)return;let o=(i.x||0)-r2(i.align,a),l=(i.y||0)-a2(i.baseline,s),c,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Rd(e,i),e.globalAlpha=(c=i.opacity)!=null?c:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var Aue={type:"image",tag:"image",nested:!1,attr:Eue,bound:wue,draw:_ue,pick:i2(),isect:cB,get:cT,xOffset:r2,yOffset:a2},$ue=lT("line",qoe,sue);function Cue(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",iue(t)),e("d",t.path)}function av(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*ku,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Nd(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),E0(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):E0(e,l,i,r,a,s)}function Mue(e,t){return av(um(e,t.angle),t)?e.set(0,0,0,0):xo(e,t,!0)}var Tue={type:"path",tag:"path",nested:!1,attr:Cue,bound:Mue,draw:aT(av),pick:sT(av),isect:nT(av)};function Due(e,t){e("d",vh(null,t))}function kue(e,t){var n,i;return xo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function pz(e,t){e.beginPath(),vh(e,t)}var Oue={type:"rect",tag:"path",nested:!1,attr:Due,bound:kue,draw:aT(pz),pick:sT(pz),isect:Qj};function Nue(e,t){e("transform",eP(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Rue(e,t){var n,i;return xo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function rP(e,t,n){var i,r,a,s;return t.stroke&&zd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function zue(e,t,n){ua(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&rP(e,i,r)&&(Rd(e,i),e.stroke())}})}function Fue(e,t,n,i){return e.isPointInStroke?rP(e,t,1)&&e.isPointInStroke(n,i):!1}var Lue={type:"rule",tag:"line",nested:!1,attr:Nue,bound:Rue,draw:zue,pick:i2(Fue),isect:Zj},Uue=uT("shape",Hoe),Bue=uT("symbol",Goe,iT);const mz=wre();var sr={height:os,measureWidth:hT,estimateWidth:Jv,width:Jv,canvas:aP};aP(!0);function aP(e){sr.width=e&&xu?hT:Jv}function Jv(e,t){return sP(Nu(e,t),os(e))}function sP(e,t){return~~(.8*e.length*t)}function hT(e,t){return os(e)<=0||!(t=Nu(e,t))?0:oP(t,s2(e))}function oP(e,t){const n=`(${t}) ${e}`;let i=mz.get(n);return i===void 0&&(xu.font=t,i=xu.measureText(e).width,mz.set(n,i)),i}function os(e){return e.fontSize!=null?+e.fontSize||0:11}function Ou(e){return e.lineHeight!=null?e.lineHeight:os(e)+2}function jue(e){return Iu(e)?e.length>1?e:e[0]:e}function cm(e){return jue(e.lineBreak&&e.text&&!Iu(e.text)?e.text.split(e.lineBreak):e.text)}function gT(e){const t=cm(e);return(Iu(t)?t.length-1:0)*Ou(e)}function Nu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Iue(e,n):n}function Pue(e){if(sr.width===hT){const t=s2(e);return n=>oP(n,t)}else if(sr.width===Jv){const t=os(e);return n=>sP(n,t)}else return t=>sr.width(e,t)}function Iue(e,t){var n=+e.limit,i=Pue(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function fm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function s2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+os(e)+"px "+fm(e,t)}function pT(e){var t=e.baseline,n=os(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ou(e):t==="line-bottom"?.29*n-.5*Ou(e):0)}const que={left:"start",center:"middle",right:"end"},Vp=new rn;function o2(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Bl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Vp.x1=t,Vp.y1=n,Vp}function Hue(e,t){var n=t.dx||0,i=(t.dy||0)+pT(t),r=o2(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",que[t.align]||"start"),o?(l=tc(a,s)+" "+oT(o),(n||i)&&(l+=" "+tc(n,i))):l=tc(a+n,s+i),e("transform",l)}function mT(e,t,n){var i=sr.height(t),r=t.align,a=o2(t),s=a.x1,o=a.y1,l=t.dx||0,c=(t.dy||0)+pT(t)-Math.round(.8*i),d=cm(t),h;if(Iu(d)?(i+=Ou(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,sr.width(t,y)),0)):h=sr.width(t,d),r==="center"?l-=h/2:r==="right"&&(l-=h),e.set(l+=s,c+=o,l+h,c+i),t.angle&&!n)e.rotate(t.angle*ku,s,o);else if(n===2)return e.rotatedPoints(t.angle*ku,s,o);return e}function Gue(e,t,n){ua(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,c,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=s2(i),e.textAlign=i.align||"left",a=o2(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*ku),s=o=0),s+=i.dx||0,o+=(i.dy||0)+pT(i),d=cm(i),Rd(e,i),Iu(d))for(c=Ou(i),l=0;l<d.length;++l)h=Nu(i,d[l]),i.fill&&Zv(e,i,r)&&e.fillText(h,s,o),i.stroke&&zd(e,i,r)&&e.strokeText(h,s,o),o+=c;else h=Nu(i,d),i.fill&&Zv(e,i,r)&&e.fillText(h,s,o),i.stroke&&zd(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function Yue(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=o2(t),o=s.x1,l=s.y1,c=mT(Vp,t,1),d=-t.angle*ku,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*l),v=p*r+h*a+(l-p*o-h*l);return c.contains(y,v)}function Xue(e,t){const n=mT(Vp,e,2);return id(t,n[0],n[1],n[2],n[3])||id(t,n[0],n[1],n[4],n[5])||id(t,n[4],n[5],n[6],n[7])||id(t,n[2],n[3],n[6],n[7])}var Vue={type:"text",tag:"text",nested:!1,attr:Hue,bound:mT,draw:Gue,pick:i2(Yue),isect:Xue},Wue=lT("trail",Yoe,oue),dr={arc:rue,area:uue,group:Sue,image:Aue,line:$ue,path:Tue,rect:Oue,rule:Lue,shape:Uue,symbol:Bue,text:Vue,trail:Wue};function m$(e,t,n){var i=dr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new rn),e,n)}var yz={mark:null};function uP(e,t,n){var i=dr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,c,d;if(i.nested)return s?c=a[0]:(yz.mark=e,c=yz),d=m$(c,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new rn,s)for(o=0,l=a.length;o<l;++o)t.union(m$(a[o],r,n));return e.bounds=t}const Que=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function lP(e,t){return JSON.stringify(e,Que,t)}function cP(e){const t=typeof e=="string"?JSON.parse(e):e;return fP(t)}function fP(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&fP(n[r]);return t&&uP(e),e}class dP{constructor(t){arguments.length?this.root=cP(t):(this.root=vz({marktype:"group",name:"root",role:"frame"}),this.root.items=[new t2(this.root)])}toJSON(t){return lP(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=vz(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function vz(e,t){const n={bounds:new rn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function uu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function yT(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function un(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=uu(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Ar(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function hP(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function u2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Zue(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=dr[r.marktype]).tip){for(s=u2(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let vT=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Cx(),this._tooltip=n||Kue}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=uu(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Zue(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,c=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,c+=t.y||0;return{x:l,y:c,width:s,height:o,left:l,top:c,right:l+s,bottom:c+o}}};function Kue(e,t,n,i){e.element().setAttribute("title",i||"")}class dm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Wj(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Jue="keydown",ele="keypress",tle="keyup",gP="dragenter",sv="dragleave",pP="dragover",y$="pointerdown",nle="pointerup",eb="pointermove",ov="pointerout",mP="pointerover",v$="mousedown",ile="mouseup",yP="mousemove",tb="mouseout",vP="mouseover",nb="click",rle="dblclick",ale="wheel",bP="mousewheel",ib="touchstart",rb="touchmove",ab="touchend",sle=[Jue,ele,tle,gP,sv,pP,y$,nle,eb,ov,mP,v$,ile,yP,tb,vP,nb,rle,ale,bP,ib,rb,ab],b$=eb,Wp=tb,x$=nb;class hm extends vT{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=sle,this.pointermove=xz([eb,yP],[mP,vP],[ov,tb]),this.dragover=xz([pP],[gP],[sv]),this.pointerout=Sz([ov,tb]),this.dragleave=Sz([sv])}initialize(t,n,i){return this._canvas=t&&yT(t,"canvas"),[nb,v$,y$,eb,ov,sv].forEach(r=>bz(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(bP,t)}pointerdown(t){this._down=this._active,this.fire(y$,t)}mousedown(t){this._down=this._active,this.fire(v$,t)}click(t){this._down===this._active&&(this.fire(nb,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ib,t,!0)}touchmove(t){this.fire(rb,t,!0)}touchend(t){this.fire(ab,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===x$&&r&&r.href?this.handleHref(n,r,r.href):(t===b$||t===Wp)&&this.handleTooltip(n,r,t!==Wp),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(bz(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=u2(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return dr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const ole=e=>e===ib||e===rb||e===ab?[ib,rb,ab]:[e];function bz(e,t){ole(t).forEach(n=>ule(e,n))}function ule(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function kp(e,t,n){t.forEach(i=>e.fire(i,n))}function xz(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?kp(this,e,i):((!r||!r.exit)&&kp(this,n,i),this._active=a,kp(this,t,i),kp(this,e,i))}}function Sz(e){return function(t){kp(this,e,t),this._active=null}}function lle(){return typeof window<"u"&&window.devicePixelRatio||1}function cle(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?lle():r;e.width=t*l,e.height=n*l;for(const c in a)o[c]=a[c];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class sb extends dm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new rn,this._tempb=new rn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:bu(1,1,this._options.type),t&&this._canvas&&(Ar(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)cle(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||Xp("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=fle(r,a,s);i.save();const c=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):dle(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,c,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=dr[n.marktype];n.clip&&lue(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const fle=(e,t,n)=>new rn().set(0,0,t,n).translate(-e[0],-e[1]);function dle(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class xP extends vT{constructor(t,n){super(t,n);const i=this;i._hrefHandler=b_(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=b_(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Wp)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(x$,this._hrefHandler),r.removeEventListener(b$,this._tooltipHandler),r.removeEventListener(Wp,this._tooltipHandler)),this._svg=r=t&&yT(t,"svg"),r&&(r.addEventListener(x$,this._hrefHandler),r.addEventListener(b$,this._tooltipHandler),r.addEventListener(Wp,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:b_(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const b_=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},SP="aria-hidden",bT="aria-label",xT="role",ST="aria-roledescription",EP="graphics-object",ET="graphics-symbol",wP=(e,t,n)=>({[xT]:e,[ST]:t,[bT]:n||void 0}),hle=_re(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ez={axis:{desc:"axis",caption:mle},legend:{desc:"legend",caption:yle},"title-text":{desc:"title",caption:e=>`Title text '${_z(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${_z(e)}'`}},wz={ariaRole:xT,ariaRoleDescription:ST,description:bT};function _P(e,t){const n=t.aria===!1;if(e(SP,n||void 0),n||t.description==null)for(const i in wz)e(wz[i],void 0);else{const i=t.mark.marktype;e(bT,t.description),e(xT,t.ariaRole||(i==="group"?EP:ET)),e(ST,t.ariaRoleDescription||`${i} mark`)}}function AP(e){return e.aria===!1?{[SP]:!0}:hle[e.role]?null:Ez[e.role]?ple(e,Ez[e.role]):gle(e)}function gle(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return wP(n?EP:ET,`${t} mark container`,e.description)}function ple(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return wP(t.role||ET,t.desc,n.description||i(n))}catch{return null}}function _z(e){return dB(e.text).join(" ")}function mle(e){const t=e.datum,n=e.orient,i=t.title?$P(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Od(o)?"discrete":o} scale with ${jj(s,a,e)}`}function yle(e){const t=e.datum,n=t.title?$P(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return ble(i)+(n?` titled '${n}'`:"")+` for ${vle(a)} with ${jj(l,o,e)}`}function $P(e){try{return dB(fB(e.items).items[0].text).join(" ")}catch{return null}}function vle(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+fB(e)}function ble(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const CP=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),xle=e=>CP(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function wT(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,c)=>(c!=null&&(t+=` ${l}="${xle(c)}"`),o),o={open(l){a(l),t="<"+l;for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=CP(l),o),toString:()=>e};return o}const MP=e=>TP(wT(),e)+"";function TP(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):TP(e,i)}return e.close()}const ob={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ub={blend:"mix-blend-mode"},DP={fill:"none","stroke-miterlimit":10},op=0,Az="http://www.w3.org/2000/xmlns/",on=_0.xmlns;class _T extends dm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=un(t,0,"svg",on),this._svg.setAttributeNS(Az,"xmlns",on),this._svg.setAttributeNS(Az,"xmlns:xlink",_0["xmlns:xlink"]),this._svg.setAttribute("version",_0.version),this._svg.setAttribute("class","marks"),Ar(t,1),this._root=un(this._svg,op,"g",on),lu(this._root,DP),Ar(this._svg,op+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(lu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=un(t,op,"rect",on),lu(i,{width:this._width,height:this._height,fill:n}));const r=MP(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ar(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,c;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=dr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,$z(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(s,c._svg,c)):i._svg&&(c=i._svg.parentNode,c&&c.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,$z(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=dr[s],l=n.interactive===!1?"none":null,c=o.tag==="g",d=Cz(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Ar(d,0),n._svg;d.setAttribute("class",hP(n));const h=AP(n);for(const b in h)ui(d,b,h[b]);c||ui(d,"pointer-events",l),ui(d,"clip-path",n.clip?tT(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),w=Cz(b,d,p,o.tag,a);S&&(this._update(o,w,b),c&&wle(this,w,b,r)),p=w,++y};return o.nested?n.items.length&&v(n.items[0]):ua(n,v),Ar(d,y),d}_update(t,n,i){Zs=n,Kn=n.__values__,_P(Qp,i),t.attr(Qp,i,this);const r=Ale[t.type];r&&r.call(this,t,n,i),Zs&&this.style(Zs,i)}style(t,n){if(n!=null){for(const i in ob){let r=i==="font"?fm(n):n[i];if(r===Kn[i])continue;const a=ob[i];r==null?t.removeAttribute(a):(K3(r)&&(r=Ij(r,this._defs.gradient,kP())),t.setAttribute(a,r+"")),Kn[i]=r}for(const i in ub)uv(t,ub[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=un(t,op+1,"defs",on)),r=Sle(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=un(t,op+1,"defs",on)),r=Ele(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Ar(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function $z(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Sle(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=un(e,n++,"pattern",on);lu(s,{id:Qv+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=un(s,0,"rect",on),lu(s,{width:1,height:1,fill:`url(${kP()}#${t.id})`}),e=un(e,n++,"radialGradient",on),lu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=un(e,n++,"linearGradient",on),lu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=un(e,i,"stop",on),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Ar(e,i),n}function Ele(e,t,n){let i;return e=un(e,n,"clipPath",on),e.setAttribute("id",t.id),t.path?(i=un(e,0,"path",on),i.setAttribute("d",t.path)):(i=un(e,0,"rect",on),lu(i,{x:0,y:0,width:t.width,height:t.height})),Ar(e,1),n+1}function wle(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;ua(n,s=>{r=e.mark(t,s,r,i),++a}),Ar(t,1+a)}function Cz(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=uu(s,i,on),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=uu(s,"path",on);a.appendChild(o),o.__data__=e;const l=uu(s,"g",on);a.appendChild(l),l.__data__=e;const c=uu(s,"path",on);a.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(a.ownerSVGElement!==r||_le(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function _le(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Zs=null,Kn=null;const Ale={group(e,t,n){const i=Zs=t.childNodes[2];Kn=i.__values__,e.foreground(Qp,n,this),Kn=t.__values__,Zs=t.childNodes[1],e.content(Qp,n,this);const r=Zs=t.childNodes[0];e.background(Qp,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Kn.events&&(ui(i,"pointer-events",a),ui(r,"pointer-events",a),Kn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;ui(i,"display",null),this.style(r,n),ui(r,"stroke",null),s&&(n.fill=null),Kn=i.__values__,this.style(i,n),s&&(n.fill=s),Zs=null}else ui(i,"display","none")},image(e,t,n){n.smooth===!1?(uv(t,"image-rendering","optimizeSpeed"),uv(t,"image-rendering","pixelated")):uv(t,"image-rendering",null)},text(e,t,n){const i=cm(n);let r,a,s,o;Iu(i)?(a=i.map(l=>Nu(n,l)),r=a.join(`
`),r!==Kn.text&&(Ar(t,0),s=t.ownerDocument,o=Ou(n),a.forEach((l,c)=>{const d=uu(s,"tspan",on);d.__data__=n,d.textContent=l,c&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Kn.text=r)):(a=Nu(n,i),a!==Kn.text&&(t.textContent=a,Kn.text=a)),ui(t,"font-family",fm(n)),ui(t,"font-size",os(n)+"px"),ui(t,"font-style",n.fontStyle),ui(t,"font-variant",n.fontVariant),ui(t,"font-weight",n.fontWeight)}};function Qp(e,t,n){t!==Kn[e]&&(n?$le(Zs,e,t,n):ui(Zs,e,t),Kn[e]=t)}function uv(e,t,n){n!==Kn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Kn[t]=n)}function lu(e,t){for(const n in t)ui(e,n,t[n])}function ui(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function $le(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function kP(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class OP extends dm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=wT();n.open("svg",hB({},_0,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",DP,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=dr[n.marktype],r=i.tag,a=[_P,i.attr];t.open("g",{class:hP(n),"clip-path":n.clip?tT(this,n,n.group):null},AP(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const c=cm(o);if(Iu(c)){const d={x:0,dy:Ou(o)};for(let h=0;h<c.length;++h)t.open("tspan",h?d:null).text(Nu(o,c[h])).close()}else t.text(Nu(o,c))}else if(r==="g"){const c=o.strokeForeground,d=o.fill,h=o.stroke;c&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),ua(o,p=>this.mark(t,p)),t.close(),c&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):ua(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,c,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Cle(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Qv+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Cle(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=fm(t),e["font-size"]=os(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in ob){let o=t[s];const l=ob[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(K3(o)&&(o=Ij(o,r.gradient,"")),e[l]=o)}for(const s in ub){const o=t[s];o!=null&&(a=a||[],a.push(`${ub[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Vr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Mle(e){Vr.svgMarkTypes=e.svgMarkTypes??["text"],Vr.svgOnTop=e.svgOnTop??!0,Vr.debug=e.debug??!1}class S$ extends dm{constructor(t){super(t),this._svgRenderer=new _T(t),this._canvasRenderer=new sb(t)}initialize(t,n,i,r,a){this._root_el=un(t,0,"div");const s=un(this._root_el,0,"div"),o=un(this._root_el,1,"div");return this._root_el.style.position="relative",Vr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Vr.svgOnTop?o:s,this._canvasEl=Vr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Vr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Vr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Vr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Vr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class NP extends hm{constructor(t,n){super(t,n)}initialize(t,n,i){const r=un(un(t,0,"div"),Vr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const RP="canvas",zP="hybrid",FP="png",LP="svg",UP="none",cu={Canvas:RP,PNG:FP,SVG:LP,Hybrid:zP,None:UP},gc={};gc[RP]=gc[FP]={renderer:sb,headless:sb,handler:hm};gc[LP]={renderer:_T,headless:OP,handler:xP};gc[zP]={renderer:S$,headless:S$,handler:NP};gc[UP]={};function l2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(gc[e]=t,this):gc[e]}function BP(e,t,n){const i=[],r=new rn().union(t),a=e.marktype;return a?jP(e,r,n,i):a==="group"?PP(e,r,n,i):Xp("Intersect scene must be mark node or group item.")}function jP(e,t,n,i){if(Tle(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)PP(r[o],t,n,i);else for(const l=dr[a].isect;o<s;++o){const c=r[o];IP(c,t,l)&&i.push(c)}}return i}function Tle(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function PP(e,t,n,i){n&&n(e.mark)&&IP(e,t,dr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)jP(r[l],t,n,i);t.translate(s,o)}return i}function IP(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const x_=new rn;function qP(e){const t=e.clip;if(x3(t))t(um(x_.clear()));else if(t)x_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(x_)}const Dle=1e-9;function AT(e,t,n){return e===t?!0:n==="path"?HP(e,t):e instanceof Date&&t instanceof Date?+e==+t:C4(e)&&C4(t)?Math.abs(e-t)<=Dle:!e||!t||!$4(e)&&!$4(t)?e==t:kle(e,t)}function HP(e,t){return AT(Nd(e),Nd(t))}function kle(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!AT(e[r],t[r],r))return!1;return typeof e==typeof t}function Ole(){Xoe(),toe()}function bh(e,t,n){return e.fields=t||[],e.fname=n,e}function Nle(e){return e.length===1?Rle(e[0]):zle(e)}const Rle=e=>function(t){return t[e]},zle=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function S_(e){throw Error(e)}function Fle(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||S_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&S_("Access path missing closing bracket: "+e),i&&S_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Lle(e,t,n){const i=Fle(e);return e=i.length===1?i[0]:e,bh(Nle(i),[e],e)}Lle("id");bh(e=>e,[],"identity");bh(()=>0,[],"zero");bh(()=>1,[],"one");bh(()=>!0,[],"true");bh(()=>!1,[],"false");function Ule(e){return e===Object(e)}function E_(e){return e[e.length-1]}function Ble(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function xh(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ble(i,n)}const Fd="top",Jr="left",ea="right",Ru="bottom",jle="top-left",Ple="top-right",Ile="bottom-left",qle="bottom-right",$T="start",E$="middle",li="end",Hle="x",Gle="y",c2="group",CT="axis",MT="title",Yle="frame",Xle="scope",TT="legend",GP="row-header",YP="row-footer",XP="row-title",VP="column-header",WP="column-footer",QP="column-title",Vle="padding",Wle="symbol",ZP="fit",KP="fit-x",JP="fit-y",Qle="pad",DT="none",gy="all",w$="each",kT="flush",fu="column",du="row";function eI(e){J.call(this,null,e)}xh(eI,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=dr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=py(i,s),i.items.forEach(c=>{c.bounds.clear().union(o)});else if(r===c2||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),o.clear(),i.items.forEach(c=>o.union(py(c,s))),i.role){case CT:case TT:case MT:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{o.union(py(c,s))}),t.visit(t.MOD,c=>{l=l||o.alignsWith(c.bounds),n.dirty(c),o.union(py(c,s))}),l&&(o.clear(),i.items.forEach(c=>o.union(c.bounds)));return qP(i),t.modifies("bounds")}});function py(e,t,n){return t(e.bounds.clear(),e,n)}const Mz=":vega_identifier:";function OT(e){J.call(this,0,e)}OT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};xh(OT,J,{transform(e,t){const n=Zle(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Zle(e){return e._signals[Mz]||(e._signals[Mz]=e.add(0))}function tI(e){J.call(this,null,e)}xh(tI,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Kle(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===c2?t2:e2;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Kle(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function nI(e){J.call(this,null,e)}const Tz={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!iI(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},iI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Dz=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(iI(r,a=e[n].bounds,t))return!0},Jle=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ece=(e,t,n)=>{var i=e.range(),r=new rn;return t===Fd||t===Ru?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},kz=e=>(e.forEach(t=>t.opacity=1),e),Oz=(e,t)=>e.reflow(t.modified()).modifies("opacity");xh(nI,J,{transform(e,t){const n=Tz[e.method]||Tz.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(kz(r),t=Oz(t,e)),t;if(r=r.filter(Jle),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=kz(r),t=Oz(t,e),a.length>=3&&Dz(a,i)){do a=n(a,i);while(a.length>=3&&Dz(a,i));a.length<3&&!E_(r).opacity&&(a.length>1&&(E_(a).opacity=0),E_(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=ece(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function rI(e){J.call(this,null,e)}xh(rI,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Qn=new rn;function rd(e,t,n){return e[t]===n?0:(e[t]=n,1)}function tce(e){var t=e.items[0].orient;return t===Jr||t===ea}function nce(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ice(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=nce(a),c=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,S=r.bounds,w=v&&gT(v),_=0,A=0,$,C;switch(Qn.clear().union(S),S.clear(),($=l[0])>-1&&S.union(r.items[$].bounds),($=l[1])>-1&&S.union(r.items[$].bounds),o){case Fd:_=h||0,A=-d,C=Math.max(p,Math.min(y,-S.y1)),S.add(0,-C).add(c,0),v&&my(e,v,C,b,w,0,-1,S);break;case Jr:_=-d,A=h||0,C=Math.max(p,Math.min(y,-S.x1)),S.add(-C,0).add(0,c),v&&my(e,v,C,b,w,1,-1,S);break;case ea:_=n+d,A=h||0,C=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(C,c),v&&my(e,v,C,b,w,1,1,S);break;case Ru:_=h||0,A=i+d,C=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(c,C),v&&my(e,v,C,b,0,0,1,S);break;default:_=r.x,A=r.y}return xo(S.translate(_,A),r),rd(r,"x",_+s)|rd(r,"y",A+s)&&(r.bounds=Qn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function my(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const c=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=c):h=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-d,-h)),e.dirty(t)}o.union(l)}const Nz=(e,t)=>Math.floor(Math.min(e,t)),Rz=(e,t)=>Math.ceil(Math.max(e,t));function rce(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===c2)switch(r.role){case CT:case TT:case MT:break;case GP:s.rowheaders.push(...a);break;case YP:s.rowfooters.push(...a);break;case VP:s.colheaders.push(...a);break;case WP:s.colfooters.push(...a);break;case XP:s.rowtitle=a[0];break;case QP:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function ace(e){return new rn().set(0,0,e.width||0,e.height||0)}function sce(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Mt(e,t,n){const i=Ule(e)?e[t]:e;return i??(n!==void 0?n:0)}function zz(e){return e<0?Math.ceil(-e):0}function aI(e,t,n){var i=!n.nodirty,r=n.bounds===kT?ace:sce,a=Qn.set(0,0,0,0),s=Mt(n.align,fu),o=Mt(n.align,du),l=Mt(n.padding,fu),c=Mt(n.padding,du),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),w=Array(h),_=0,A=Array(p),$=Array(p),C=Array(p),D,T,O,R,L,z,H,U,P,B,N;for(T=0;T<d;++T)v[T]=0;for(T=0;T<h;++T)w[T]=0;for(T=0;T<p;++T)z=t[T],L=C[T]=r(z),z.x=z.x||0,A[T]=0,z.y=z.y||0,$[T]=0,O=T%d,R=~~(T/d),b=Math.max(b,H=Math.ceil(L.x2)),_=Math.max(_,U=Math.ceil(L.y2)),v[O]=Math.max(v[O],H),w[R]=Math.max(w[R],U),y[T]=l+zz(L.x1),S[T]=c+zz(L.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(s===w$)for(O=1;O<d;++O){for(N=0,T=O;T<p;T+=d)N<y[T]&&(N=y[T]);for(T=O;T<p;T+=d)y[T]=N+v[O-1]}else if(s===gy){for(N=0,T=0;T<p;++T)T%d&&N<y[T]&&(N=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=N+b)}else for(s=!1,O=1;O<d;++O)for(T=O;T<p;T+=d)y[T]+=v[O-1];if(o===w$)for(R=1;R<h;++R){for(N=0,T=R*d,D=T+d;T<D;++T)N<S[T]&&(N=S[T]);for(T=R*d;T<D;++T)S[T]=N+w[R-1]}else if(o===gy){for(N=0,T=d;T<p;++T)N<S[T]&&(N=S[T]);for(T=d;T<p;++T)S[T]=N+_}else for(o=!1,R=1;R<h;++R)for(T=R*d,D=T+d;T<D;++T)S[T]+=w[R-1];for(P=0,T=0;T<p;++T)P=y[T]+(T%d?P:0),A[T]+=P-t[T].x;for(O=0;O<d;++O)for(B=0,T=O;T<p;T+=d)B+=S[T],$[T]+=B-t[T].y;if(s&&Mt(n.center,fu)&&h>1)for(T=0;T<p;++T)L=s===gy?b:v[T%d],P=L-C[T].x2-t[T].x-A[T],P>0&&(A[T]+=P/2);if(o&&Mt(n.center,du)&&d!==1)for(T=0;T<p;++T)L=o===gy?_:w[~~(T/d)],B=L-C[T].y2-t[T].y-$[T],B>0&&($[T]+=B/2);for(T=0;T<p;++T)a.union(C[T].translate(A[T],$[T]));switch(P=Mt(n.anchor,Hle),B=Mt(n.anchor,Gle),Mt(n.anchor,fu)){case li:P-=a.width();break;case E$:P-=a.width()/2}switch(Mt(n.anchor,du)){case li:B-=a.height();break;case E$:B-=a.height()/2}for(P=Math.round(P),B=Math.round(B),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)z=t[T],z.x+=A[T]+=P,z.y+=$[T]+=B,a.union(z.mark.bounds.union(z.bounds.translate(A[T],$[T]))),i&&e.dirty(z);return a}function oce(e,t,n){var i=rce(t),r=i.marks,a=n.bounds===kT?uce:lce,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),c=l*o,d,h,p,y,v,b,S;const w=aI(e,r,n);w.empty()&&w.set(0,0,0,0),i.rowheaders&&(b=Mt(n.headerBand,du,null),d=yy(e,i.rowheaders,r,o,l,-Mt(s,"rowHeader"),Nz,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Mt(n.headerBand,fu,null),h=yy(e,i.colheaders,r,o,o,-Mt(s,"columnHeader"),Nz,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Mt(n.footerBand,du,null),p=yy(e,i.rowfooters,r,o,l,Mt(s,"rowFooter"),Rz,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Mt(n.footerBand,fu,null),y=yy(e,i.colfooters,r,o,o,Mt(s,"columnFooter"),Rz,1,a,"y2",c-o,1,o,b)),i.rowtitle&&(v=Mt(n.titleAnchor,du),S=Mt(s,"rowTitle"),S=v===li?p+S:d-S,b=Mt(n.titleBand,du,.5),Fz(e,i.rowtitle,S,0,w,b)),i.coltitle&&(v=Mt(n.titleAnchor,fu),S=Mt(s,"columnTitle"),S=v===li?y+S:h-S,b=Mt(n.titleBand,fu,.5),Fz(e,i.coltitle,S,1,w,b))}function uce(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function lce(e,t){return e.bounds[t]}function yy(e,t,n,i,r,a,s,o,l,c,d,h,p,y){var v=n.length,b=0,S=0,w,_,A,$,C,D,T,O,R;if(!v)return b;for(w=d;w<v;w+=h)n[w]&&(b=s(b,l(n[w],c)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,_=0,$=t.length;_<$;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(w=d,_=0,$=t.length;_<$;++_,w+=h){for(D=t[_],C=D.mark.bounds,A=w;A>=0&&(T=n[A])==null;A-=p);o?(O=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),R=b):(O=b,R=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),C.union(D.bounds.translate(O-(D.x||0),R-(D.y||0))),D.x=O,D.y=R,e.dirty(D),S=s(S,C[c])}return S}function Fz(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function cce(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function fce(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function dce(e,t,n,i,r,a,s){const o=cce(n,t),l=fce(e,o("offset",0)),c=o("anchor",$T),d=c===li?1:c===E$?.5:0,h={align:w$,bounds:o("bounds",kT),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Jr:h.anchor={x:Math.floor(i.x1)-l,column:li,y:d*(s||i.height()+2*i.y1),row:c};break;case ea:h.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:c};break;case Fd:h.anchor={y:Math.floor(r.y1)-l,row:li,x:d*(a||r.width()+2*r.x1),column:c};break;case Ru:h.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:c};break;case jle:h.anchor={x:l,y:l};break;case Ple:h.anchor={x:a-l,y:l,column:li};break;case Ile:h.anchor={x:l,y:s-l,row:li};break;case qle:h.anchor={x:a-l,y:s-l,column:li,row:li};break}return h}function hce(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,c;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),pce(e,n,n.items[0].items[0]),a=gce(n,a),l=2*n.padding,c=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),c=Math.ceil(a.height()+c)),i.type===Wle&&mce(n.items[0].items[0].items[0].items),r!==DT&&(n.x=s=0,n.y=o=0),n.width=l,n.height=c,xo(a.set(s,o,s+l,o+c),n),n.mark.bounds.clear().union(a),n}function gce(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function pce(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&up(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,c=i-s.x,d=i-s.y;switch(s.orient){case Jr:r+=Math.ceil(s.bounds.width())+l;break;case ea:case Ru:break;default:a+=s.bounds.height()+l}switch((r||a)&&up(e,n,r,a),s.orient){case Jr:d+=If(t,n,s,o,1,1);break;case ea:c+=If(t,n,s,li,0,0)+l,d+=If(t,n,s,o,1,1);break;case Ru:c+=If(t,n,s,o,0,0),d+=If(t,n,s,li,-1,0,1)+l;break;default:c+=If(t,n,s,o,0,0)}(c||d)&&up(e,s,c,d),(c=Math.round(s.bounds.x1-i))<0&&(up(e,n,-c,0),up(e,s,-c,0))}}function If(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,c=o&&(a||!l)&&!s?t.items[0]:t,d=c.bounds[r?"y2":"x2"]-e.padding,h=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:gT(n);return Math.round(i===$T?h:i===li?p-y:.5*(d-y))}function up(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function mce(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function yce(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,c=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Jr||o===ea?i:n,v=0,b=0,S=0,w=0,_=0,A;if(s!==c2?o===Jr?(v=r.y2,y=r.y1):o===ea?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Jr&&(v=i,y=0),A=l===$T?v:l===li?y:(v+y)/2,p&&p.text){switch(o){case Fd:case Ru:_=h.bounds.height()+d;break;case Jr:w=h.bounds.width()+d;break;case ea:w=-h.bounds.width()-d;break}Qn.clear().union(p.bounds),Qn.translate(w-(p.x||0),_-(p.y||0)),rd(p,"x",w)|rd(p,"y",_)&&(e.dirty(p),p.bounds.clear().union(Qn),p.mark.bounds.clear().union(Qn),e.dirty(p)),Qn.clear().union(p.bounds)}else Qn.clear();switch(Qn.union(h.bounds),o){case Fd:b=A,S=r.y1-Qn.height()-c;break;case Jr:b=r.x1-Qn.width()-c,S=A;break;case ea:b=r.x2+Qn.width()+c,S=A;break;case Ru:b=A,S=r.y2+c;break;default:b=a.x,S=a.y}return rd(a,"x",b)|rd(a,"y",S)&&(Qn.translate(b,S),e.dirty(a),a.bounds.clear().union(Qn),t.bounds.clear().union(Qn),e.dirty(a)),a.bounds}function sI(e){J.call(this,null,e)}xh(sI,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&oce(n,i,e.layout),bce(n,i,e)}),vce(e.mark.group)?t.reflow():t}});function vce(e){return e&&e.mark.role!=="legend-entry"}function bce(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new rn().set(0,0,r,a),o=s.clone(),l=s.clone(),c=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case CT:y=tce(h)?o:l,y.union(ice(e,h,r,a));break;case MT:d=h;break;case TT:c.push(hce(e,h));break;case Yle:case Xle:case GP:case YP:case XP:case VP:case WP:case QP:o.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(c.length){const S={};c.forEach(w=>{p=w.orient||ea,p!==DT&&(S[p]||(S[p]=[])).push(w)});for(const w in S){const _=S[w];aI(e,_,dce(_,w,n.legends,o,l,r,a))}c.forEach(w=>{const _=w.bounds;if(_.equals(w._bounds)||(w.bounds=w._bounds,e.dirty(w),w.bounds=_,e.dirty(w)),n.autosize&&(n.autosize.type===ZP||n.autosize.type===KP||n.autosize.type===JP))switch(w.orient){case Jr:case ea:s.add(_.x1,0).add(_.x2,0);break;case Fd:case Ru:s.add(0,_.y1).add(0,_.y2)}else s.union(_)})}s.union(o).union(l),d&&s.union(yce(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),xce(e,t,s,n)}function xce(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Vle){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===DT?(c=0,h=0,l=s,d=o):a===ZP?(l=Math.max(0,s-c-p),d=Math.max(0,o-h-y)):a===KP?(l=Math.max(0,s-c-p),o=d+h+y):a===JP?(s=l+c+p,d=Math.max(0,o-h-y)):a===Qle&&(s=l+c+p,o=d+h+y),e._resizeView(s,o,l,d,[c,h],r.resize)}const Sce=Object.freeze(Object.defineProperty({__proto__:null,bound:eI,identifier:OT,mark:tI,overlap:nI,render:rI,viewlayout:sI},Symbol.toStringTag,{value:"Module"}));function Sh(e,t,n){return e.fields=t||[],e.fname=n,e}function Ece(e){return e.length===1?wce(e[0]):_ce(e)}const wce=e=>function(t){return t[e]},_ce=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function no(e){throw Error(e)}function Ace(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||no("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&no("Access path missing closing bracket: "+e),i&&no("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function $ce(e,t,n){const i=Ace(e);return e=i.length===1?i[0]:e,Sh(Ece(i),[e],e)}$ce("id");const Cce=Sh(e=>e,[],"identity");Sh(()=>0,[],"zero");const oI=Sh(()=>1,[],"one");Sh(()=>!0,[],"true");const wl=Sh(()=>!1,[],"false");var gm=Array.isArray;function Mce(e){return e===Object(e)}function nc(e){return e[e.length-1]}function Tce(e){return e==null||e===""?null:+e}const Dce=e=>t=>e*Math.exp(t),kce=e=>t=>Math.log(e*t),Oce=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Nce=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Lz=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function f2(e,t,n,i,r){const a=i(e[0]),s=i(nc(e)),o=(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function Rce(e,t,n){return f2(e,t,n,Tce,Cce)}function zce(e,t,n){const i=Math.sign(e[0]);return f2(e,t,n,kce(i),Dce(i))}function Uz(e,t,n,i){return f2(e,t,n,Lz(i),Lz(1/i))}function Fce(e,t,n,i){return f2(e,t,n,Oce(i),Nce(i))}function Su(e){return typeof e=="function"}function Lce(e){return Su(e)?e:()=>e}function Uce(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Bce(e,t){return Object.hasOwn(e,t)}const vy={};function uI(e){let t={},n;function i(a){return Bce(t,a)&&t[a]!==vy}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===vy&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=vy),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==vy&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function So(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Uce(i,n)}function lI(e){return typeof e=="string"}function cI(e){return gm(e)?"["+e.map(cI)+"]":Mce(e)||lI(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function jce(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function fI(e){J.call(this,null,e)}So(fI,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=Q3(a,s,e.minstep),l=e.format||zj(n,a,o,e.formatSpecifier,e.formatType,!!e.values),c=e.values?Rj(a,e.values,o):Z3(a,o);return r&&(i.rem=r),r=c.map((d,h)=>st({index:h/(c.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(st({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function dI(e){J.call(this,null,e)}function Pce(){return st({})}function Ice(e){const t=uI().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}So(dI,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Pce,a=e.key||we,s=this.value;return gm(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&no("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Ice(a)),t.visit(t.ADD,o=>{const l=a(o);let c=s.get(l);c?c.exit?(s.empty--,i.add.push(c)):i.mod.push(c):(c=r(o),s.set(l,c),i.add.push(c)),c.datum=o,c.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),c=s.get(l);c&&(c.datum=o,i.mod.push(c))}),t.visit(t.REM,o=>{const l=a(o),c=s.get(l);o===c.datum&&!c.exit&&(i.rem.push(c),c.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function hI(e){J.call(this,null,e)}So(hI,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(gm(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||wl,l=r.enter||wl,c=r.exit||wl,d=(a&&!s?r[a]:o)||wl;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),o(h,e)}),n.modifies(l.output),n.modifies(o.output),d!==wl&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&c!==wl&&(t.visit(t.REM,h=>{c(h,e)}),n.modifies(c.output)),s||d!==wl){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function gI(e){J.call(this,[],e)}So(gI,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||ev,s=e.scale,o=+e.limit,l=Q3(s,e.count==null?5:e.count,e.minstep),c=!!e.values||a===ev,d=e.format||Bj(n,s,l,a,e.formatSpecifier,e.formatType,c),h=e.values||Uj(s,l),p,y,v,b,S;return r&&(i.rem=r),a===ev?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,Su(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((w,_)=>Math.max(w,v(_,e)),0)):v=Lce(b=v||8),r=r.map((w,_)=>st({index:_,label:d(w,_,r),value:w,offset:b,size:v(w,e)})),S&&(S=h[r.length],r.push(st({index:r.length,label:`${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===Ise?(p=s.domain(),y=kj(s,p[0],nc(p)),h.length<3&&!e.values&&p[0]!==nc(p)&&(h=[p[0],nc(p)]),r=h.map((w,_)=>st({index:_,label:d(w,_,h),value:w,perc:y(w)}))):(v=h.length-1,y=Jse(s),r=h.map((w,_)=>st({index:_,label:d(w,_,h),value:w,perc:_?y(w):0,perc2:_===v?1:y(h[_+1])}))),i.source=r,i.add=r,this.value=r,i}});const qce=e=>e.source.x,Hce=e=>e.source.y,Gce=e=>e.target.x,Yce=e=>e.target.y;function NT(e){J.call(this,{},e)}NT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};So(NT,J,{transform(e,t){var n=e.sourceX||qce,i=e.sourceY||Hce,r=e.targetX||Gce,a=e.targetY||Yce,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",c=Bz.get(l+"-"+o)||Bz.get(l);return c||no("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=c(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const pI=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Xce=(e,t,n,i)=>pI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),mI=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Vce=(e,t,n,i)=>mI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),yI=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Wce=(e,t,n,i)=>yI(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Qce=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Zce=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Kce=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Jce=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},efe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},tfe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},Bz=uI({line:pI,"line-radial":Xce,arc:mI,"arc-radial":Vce,curve:yI,"curve-radial":Wce,"orthogonal-horizontal":Qce,"orthogonal-vertical":Zce,"orthogonal-radial":Kce,"diagonal-horizontal":Jce,"diagonal-vertical":efe,"diagonal-radial":tfe});function RT(e){J.call(this,null,e)}RT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};So(RT,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||oI,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,c=l.map(a),d=c.length,h=s,p=(o-s)/pL(c),y=rr(d),v,b,S;for(e.sort&&y.sort((w,_)=>c[w]-c[_]),v=0;v<d;++v)S=c[y[v]],b=l[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=c,t.reflow(e.modified()).modifies(n)}});const nfe=5;function ife(e){const t=e.type;return!e.bins&&(t===Dd||t===tm||t===nm)}function vI(e){return X3(e)&&e!==Ha}const rfe=jce(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function bI(e){J.call(this,null,e),this.modified(!0)}So(bI,J,{transform(e,t){var n=t.dataflow,i=this.value,r=afe(e);(!i||r!==i.type)&&(this.value=i=it(r)());for(r in e)if(!rfe[r]){if(r==="padding"&&vI(i.type))continue;Su(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return ffe(i,e,cfe(i,e,ofe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function afe(e){var t=e.type,n="",i;return t===Ha?Ha+"-"+Dd:(sfe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ha+"-":i===3?yh+"-":""),(n+t||Dd).toLowerCase())}function sfe(e){const t=e.type;return X3(t)&&t!==dc&&t!==hc&&(e.scheme||e.range&&e.range.length&&e.range.every(lI))}function ofe(e,t,n){const i=ufe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&ife(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const c=l>r[o]?o+1:l<r[0]?0:o;c!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(c,0,l)}return vI(a)&&t.padding&&r[0]!==nc(r)&&(r=lfe(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(xI(a,r,n)),a===q3&&e.unknown(t.domainImplicit?n$:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Q3(e,t.nice)||null),r.length}function ufe(e,t,n){return t?(e.domain(xI(e.type,t,n)),t.length):-1}function lfe(e,t,n,i,r,a){var s=Math.abs(nc(n)-n[0]),o=s/(s-2*i),l=e===fo?zce(t,null,o):e===nm?Uz(t,null,o,.5):e===tm?Uz(t,null,o,r||1):e===Wx?Fce(t,null,o,a||1):Rce(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function xI(e,t,n){if($j(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+cI(t))}return t}function cfe(e,t,n){let i=t.bins;if(i&&!gm(i)){const r=e.domain(),a=r[0],s=nc(r),o=i.step;let l=i.start==null?a:i.start,c=i.stop==null?s:i.stop;o||no("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),c>s&&(c=o*Math.floor(s/o)),i=rr(l,c+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===H3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function ffe(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=dfe(i,t,n);else if(t.scheme&&(a=hfe(i,t,n),Su(a))){if(e.interpolator)return e.interpolator(a);no(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&Cj(i))return e.interpolator(Kx(_$(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(V3(t.interpolate,t.interpolateGamma)):Su(e.round)?e.round(r):Su(e.rangeRound)&&e.interpolate(r?J0:Gu),a&&e.range(_$(a,t.reverse))}function dfe(e,t,n){e!==xj&&e!==l$&&no("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===l$?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*I3(n,r,i)]}function hfe(e,t,n){var i=t.schemeExtent,r,a;return gm(t.scheme)?a=Kx(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=W3(r),a||no(`Unrecognized scheme name: ${t.scheme}`)),n=e===Zx?n+1:e===H3?n-1:e===kd||e===Qx?+t.schemeCount||nfe:n,Cj(e)?jz(a,i,t.reverse):Su(a)?Dj(jz(a,i),n):e===q3?a:a.slice(0,n)}function jz(e,t,n){return Su(e)&&(t||n)?Tj(e,_$(t||[0,1],n)):e}function _$(e,t){return t?e.slice().reverse():e}function SI(e){J.call(this,null,e)}So(SI,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(zc(e.sort)),this.modified(n),t}});const Pz="zero",EI="center",wI="normalize",_I=["y0","y1"];function zT(e){J.call(this,null,e)}zT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Pz,values:[Pz,EI,wI]},{name:"as",type:"string",array:!0,length:2,default:_I}]};So(zT,J,{transform(e,t){var n=e.as||_I,i=n[0],r=n[1],a=zc(e.sort),s=e.field||oI,o=e.offset===EI?gfe:e.offset===wI?pfe:mfe,l,c,d,h;for(l=yfe(t.source,e.groupby,a,s),c=0,d=l.length,h=l.max;c<d;++c)o(l[c],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function gfe(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function pfe(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,c=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(c+=Math.abs(n(d)))}function mfe(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,c,d;l<o;++l)d=e[l],c=+n(d),c<0?(d[i]=s,d[r]=s+=c):(d[i]=a,d[r]=a+=c)}function yfe(e,t,n,i){var r=[],a=b=>b(d),s,o,l,c,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,c=r.length;h<c;++h){for(p=r[h],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const vfe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:fI,datajoin:dI,encode:hI,legendentries:gI,linkpath:NT,pie:RT,scale:bI,sortitems:SI,stack:zT},Symbol.toStringTag,{value:"Module"}));function Eh(e,t,n){return e.fields=t||[],e.fname=n,e}function bfe(e){return e==null?null:e.fname}function lv(e){return e==null?null:e.fields}function xfe(e){return e.length===1?Sfe(e[0]):Efe(e)}const Sfe=e=>function(t){return t[e]},Efe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Eu(e){throw Error(e)}function wfe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Eu("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Eu("Access path missing closing bracket: "+e),i&&Eu("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function AI(e,t,n){const i=wfe(e);return e=i.length===1?i[0]:e,Eh(xfe(i),[e],e)}AI("id");const A0=Eh(e=>e,[],"identity"),_fe=Eh(()=>0,[],"zero"),Afe=Eh(()=>1,[],"one");Eh(()=>!0,[],"true");Eh(()=>!1,[],"false");var FT=Array.isArray;function LT(e){return e!=null?FT(e)?e:[e]:[]}function ho(e){return typeof e=="function"}function $0(e){return ho(e)?e:()=>e}function $I(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function $fe(e,t){let n=0,i,r,a,s;if(e&&(i=e.length)){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function us(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),$I(i,n)}function Iz(e){return typeof e=="number"}function Cfe(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}var Ae=1e-6,lb=1e-12,Ie=Math.PI,jt=Ie/2,cb=Ie/4,bi=Ie*2,Yt=180/Ie,je=Ie/180,Xe=Math.abs,wh=Math.atan,zr=Math.atan2,$e=Math.cos,by=Math.ceil,CI=Math.exp,A$=Math.hypot,fb=Math.log,w_=Math.pow,_e=Math.sin,Mr=Math.sign||function(e){return e>0?1:e<0?-1:0},xi=Math.sqrt,UT=Math.tan;function MI(e){return e>1?0:e<-1?Ie:Math.acos(e)}function Ui(e){return e>1?jt:e<-1?-jt:Math.asin(e)}function Un(){}function db(e,t){e&&Hz.hasOwnProperty(e.type)&&Hz[e.type](e,t)}var qz={Feature:function(e,t){db(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)db(n[i].geometry,t)}},Hz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){$$(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)$$(n[i],t,0)},Polygon:function(e,t){Gz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Gz(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)db(n[i],t)}};function $$(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Gz(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)$$(e[n],t,1);t.polygonEnd()}function Gs(e,t){e&&qz.hasOwnProperty(e.type)?qz[e.type](e,t):db(e,t)}var hb=new yi,gb=new yi,TI,DI,C$,M$,T$,es={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){hb=new yi,es.lineStart=Mfe,es.lineEnd=Tfe},polygonEnd:function(){var e=+hb;gb.add(e<0?bi+e:e),this.lineStart=this.lineEnd=this.point=Un},sphere:function(){gb.add(bi)}};function Mfe(){es.point=Dfe}function Tfe(){kI(TI,DI)}function Dfe(e,t){es.point=kI,TI=e,DI=t,e*=je,t*=je,C$=e,M$=$e(t=t/2+cb),T$=_e(t)}function kI(e,t){e*=je,t*=je,t=t/2+cb;var n=e-C$,i=n>=0?1:-1,r=i*n,a=$e(t),s=_e(t),o=T$*s,l=M$*a+o*$e(r),c=o*i*_e(r);hb.add(zr(c,l)),C$=e,M$=a,T$=s}function kfe(e){return gb=new yi,Gs(e,es),gb*2}function pb(e){return[zr(e[1],e[0]),Ui(e[2])]}function pc(e){var t=e[0],n=e[1],i=$e(n);return[i*$e(t),i*_e(t),_e(n)]}function xy(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ld(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function __(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sy(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mb(e){var t=xi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Nt,ki,Ut,er,Ll,OI,NI,hd,Zp,ru,go,js={point:D$,lineStart:Yz,lineEnd:Xz,polygonStart:function(){js.point=zI,js.lineStart=Ofe,js.lineEnd=Nfe,Zp=new yi,es.polygonStart()},polygonEnd:function(){es.polygonEnd(),js.point=D$,js.lineStart=Yz,js.lineEnd=Xz,hb<0?(Nt=-(Ut=180),ki=-(er=90)):Zp>Ae?er=90:Zp<-Ae&&(ki=-90),go[0]=Nt,go[1]=Ut},sphere:function(){Nt=-(Ut=180),ki=-(er=90)}};function D$(e,t){ru.push(go=[Nt=e,Ut=e]),t<ki&&(ki=t),t>er&&(er=t)}function RI(e,t){var n=pc([e*je,t*je]);if(hd){var i=Ld(hd,n),r=[i[1],-i[0],0],a=Ld(r,i);mb(a),a=pb(a);var s=e-Ll,o=s>0?1:-1,l=a[0]*Yt*o,c,d=Xe(s)>180;d^(o*Ll<l&&l<o*e)?(c=a[1]*Yt,c>er&&(er=c)):(l=(l+360)%360-180,d^(o*Ll<l&&l<o*e)?(c=-a[1]*Yt,c<ki&&(ki=c)):(t<ki&&(ki=t),t>er&&(er=t))),d?e<Ll?Ji(Nt,e)>Ji(Nt,Ut)&&(Ut=e):Ji(e,Ut)>Ji(Nt,Ut)&&(Nt=e):Ut>=Nt?(e<Nt&&(Nt=e),e>Ut&&(Ut=e)):e>Ll?Ji(Nt,e)>Ji(Nt,Ut)&&(Ut=e):Ji(e,Ut)>Ji(Nt,Ut)&&(Nt=e)}else ru.push(go=[Nt=e,Ut=e]);t<ki&&(ki=t),t>er&&(er=t),hd=n,Ll=e}function Yz(){js.point=RI}function Xz(){go[0]=Nt,go[1]=Ut,js.point=D$,hd=null}function zI(e,t){if(hd){var n=e-Ll;Zp.add(Xe(n)>180?n+(n>0?360:-360):n)}else OI=e,NI=t;es.point(e,t),RI(e,t)}function Ofe(){es.lineStart()}function Nfe(){zI(OI,NI),es.lineEnd(),Xe(Zp)>Ae&&(Nt=-(Ut=180)),go[0]=Nt,go[1]=Ut,hd=null}function Ji(e,t){return(t-=e)<0?t+360:t}function Rfe(e,t){return e[0]-t[0]}function Vz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zfe(e){var t,n,i,r,a,s,o;if(er=Ut=-(Nt=ki=1/0),ru=[],Gs(e,js),n=ru.length){for(ru.sort(Rfe),t=1,i=ru[0],a=[i];t<n;++t)r=ru[t],Vz(i,r[0])||Vz(i,r[1])?(Ji(i[0],r[1])>Ji(i[0],i[1])&&(i[1]=r[1]),Ji(r[0],i[1])>Ji(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Ji(i[1],r[0]))>s&&(s=o,Nt=r[0],Ut=i[1])}return ru=go=null,Nt===1/0||ki===1/0?[[NaN,NaN],[NaN,NaN]]:[[Nt,ki],[Ut,er]]}var Op,yb,vb,bb,xb,Sb,Eb,wb,k$,O$,N$,FI,LI,fi,di,hi,ta={sphere:Un,point:BT,lineStart:Wz,lineEnd:Qz,polygonStart:function(){ta.lineStart=Ufe,ta.lineEnd=Bfe},polygonEnd:function(){ta.lineStart=Wz,ta.lineEnd=Qz}};function BT(e,t){e*=je,t*=je;var n=$e(t);pm(n*$e(e),n*_e(e),_e(t))}function pm(e,t,n){++Op,vb+=(e-vb)/Op,bb+=(t-bb)/Op,xb+=(n-xb)/Op}function Wz(){ta.point=Ffe}function Ffe(e,t){e*=je,t*=je;var n=$e(t);fi=n*$e(e),di=n*_e(e),hi=_e(t),ta.point=Lfe,pm(fi,di,hi)}function Lfe(e,t){e*=je,t*=je;var n=$e(t),i=n*$e(e),r=n*_e(e),a=_e(t),s=zr(xi((s=di*a-hi*r)*s+(s=hi*i-fi*a)*s+(s=fi*r-di*i)*s),fi*i+di*r+hi*a);yb+=s,Sb+=s*(fi+(fi=i)),Eb+=s*(di+(di=r)),wb+=s*(hi+(hi=a)),pm(fi,di,hi)}function Qz(){ta.point=BT}function Ufe(){ta.point=jfe}function Bfe(){UI(FI,LI),ta.point=BT}function jfe(e,t){FI=e,LI=t,e*=je,t*=je,ta.point=UI;var n=$e(t);fi=n*$e(e),di=n*_e(e),hi=_e(t),pm(fi,di,hi)}function UI(e,t){e*=je,t*=je;var n=$e(t),i=n*$e(e),r=n*_e(e),a=_e(t),s=di*a-hi*r,o=hi*i-fi*a,l=fi*r-di*i,c=A$(s,o,l),d=Ui(c),h=c&&-d/c;k$.add(h*s),O$.add(h*o),N$.add(h*l),yb+=d,Sb+=d*(fi+(fi=i)),Eb+=d*(di+(di=r)),wb+=d*(hi+(hi=a)),pm(fi,di,hi)}function Pfe(e){Op=yb=vb=bb=xb=Sb=Eb=wb=0,k$=new yi,O$=new yi,N$=new yi,Gs(e,ta);var t=+k$,n=+O$,i=+N$,r=A$(t,n,i);return r<lb&&(t=Sb,n=Eb,i=wb,yb<Ae&&(t=vb,n=bb,i=xb),r=A$(t,n,i),r<lb)?[NaN,NaN]:[zr(n,t)*Yt,Ui(i/r)*Yt]}function R$(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function z$(e,t){return Xe(e)>Ie&&(e-=Math.round(e/bi)*bi),[e,t]}z$.invert=z$;function BI(e,t,n){return(e%=bi)?t||n?R$(Kz(e),Jz(t,n)):Kz(e):t||n?Jz(t,n):z$}function Zz(e){return function(t,n){return t+=e,Xe(t)>Ie&&(t-=Math.round(t/bi)*bi),[t,n]}}function Kz(e){var t=Zz(e);return t.invert=Zz(-e),t}function Jz(e,t){var n=$e(e),i=_e(e),r=$e(t),a=_e(t);function s(o,l){var c=$e(l),d=$e(o)*c,h=_e(o)*c,p=_e(l),y=p*n+d*i;return[zr(h*r-y*a,d*n-p*i),Ui(y*r+h*a)]}return s.invert=function(o,l){var c=$e(l),d=$e(o)*c,h=_e(o)*c,p=_e(l),y=p*r-h*a;return[zr(h*r+p*a,d*n+y*i),Ui(y*n-d*i)]},s}function Ife(e){e=BI(e[0]*je,e[1]*je,e.length>2?e[2]*je:0);function t(n){return n=e(n[0]*je,n[1]*je),n[0]*=Yt,n[1]*=Yt,n}return t.invert=function(n){return n=e.invert(n[0]*je,n[1]*je),n[0]*=Yt,n[1]*=Yt,n},t}function qfe(e,t,n,i,r,a){if(n){var s=$e(t),o=_e(t),l=i*n;r==null?(r=t+i*bi,a=t-l/2):(r=e8(s,r),a=e8(s,a),(i>0?r<a:r>a)&&(r+=i*bi));for(var c,d=r;i>0?d>a:d<a;d-=l)c=pb([s,-o*$e(d),-o*_e(d)]),e.point(c[0],c[1])}}function e8(e,t){t=pc(t),t[0]-=e,mb(t);var n=MI(-t[1]);return((-t[2]<0?-n:n)+bi-Ae)%bi}function jI(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Un,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function cv(e,t){return Xe(e[0]-t[0])<Ae&&Xe(e[1]-t[1])<Ae}function Ey(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function PI(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],w=v[b],_;if(cv(S,w)){if(!S[2]&&!w[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}w[0]+=2*Ae}a.push(_=new Ey(S,v,null,!0)),s.push(_.o=new Ey(S,null,_,!1)),a.push(_=new Ey(w,v,null,!1)),s.push(_.o=new Ey(w,null,_,!0))}}),!!a.length){for(s.sort(t),t8(a),t8(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var c=a[0],d,h;;){for(var p=c,y=!0;p.v;)if((p=p.n)===c)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function t8(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function A_(e){return Xe(e[0])<=Ie?e[0]:Mr(e[0])*((Xe(e[0])+Ie)%bi-Ie)}function Hfe(e,t){var n=A_(t),i=t[1],r=_e(i),a=[_e(n),-$e(n),0],s=0,o=0,l=new yi;r===1?i=jt+Ae:r===-1&&(i=-jt-Ae);for(var c=0,d=e.length;c<d;++c)if(p=(h=e[c]).length)for(var h,p,y=h[p-1],v=A_(y),b=y[1]/2+cb,S=_e(b),w=$e(b),_=0;_<p;++_,v=$,S=D,w=T,y=A){var A=h[_],$=A_(A),C=A[1]/2+cb,D=_e(C),T=$e(C),O=$-v,R=O>=0?1:-1,L=R*O,z=L>Ie,H=S*D;if(l.add(zr(H*R*_e(L),w*T+H*$e(L))),s+=z?O+R*bi:O,z^v>=n^$>=n){var U=Ld(pc(y),pc(A));mb(U);var P=Ld(a,U);mb(P);var B=(z^O>=0?-1:1)*Ui(P[2]);(i>B||i===B&&(U[0]||U[1]))&&(o+=z^O>=0?1:-1)}}return(s<-Ae||s<Ae&&l<-lb)^o&1}function II(e,t,n,i){return function(r){var a=t(r),s=jI(),o=t(s),l=!1,c,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=w,p.lineStart=_,p.lineEnd=A,d=[],c=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=gL(d);var $=Hfe(c,i);d.length?(l||(r.polygonStart(),l=!0),PI(d,Yfe,$,n,r)):$&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,C){e($,C)&&r.point($,C)}function v($,C){a.point($,C)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function w($,C){h.push([$,C]),o.point($,C)}function _(){o.lineStart(),h=[]}function A(){w(h[0][0],h[0][1]),o.lineEnd();var $=o.clean(),C=s.result(),D,T=C.length,O,R,L;if(h.pop(),c.push(h),h=null,!!T){if($&1){if(R=C[0],(O=R.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<O;++D)r.point((L=R[D])[0],L[1]);r.lineEnd()}return}T>1&&$&2&&C.push(C.pop().concat(C.shift())),d.push(C.filter(Gfe))}}return p}}function Gfe(e){return e.length>1}function Yfe(e,t){return((e=e.x)[0]<0?e[1]-jt-Ae:jt-e[1])-((t=t.x)[0]<0?t[1]-jt-Ae:jt-t[1])}const n8=II(function(){return!0},Xfe,Wfe,[-Ie,-jt]);function Xfe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Ie:-Ie,l=Xe(a-t);Xe(l-Ie)<Ae?(e.point(t,n=(n+s)/2>0?jt:-jt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Ie&&(Xe(t-i)<Ae&&(t-=i*Ae),Xe(a-o)<Ae&&(a-=o*Ae),n=Vfe(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Vfe(e,t,n,i){var r,a,s=_e(e-n);return Xe(s)>Ae?wh((_e(t)*(a=$e(i))*_e(n)-_e(i)*(r=$e(t))*_e(e))/(r*a*s)):(t+i)/2}function Wfe(e,t,n,i){var r;if(e==null)r=n*jt,i.point(-Ie,r),i.point(0,r),i.point(Ie,r),i.point(Ie,0),i.point(Ie,-r),i.point(0,-r),i.point(-Ie,-r),i.point(-Ie,0),i.point(-Ie,r);else if(Xe(e[0]-t[0])>Ae){var a=e[0]<t[0]?Ie:-Ie;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Qfe(e){var t=$e(e),n=2*je,i=t>0,r=Xe(t)>Ae;function a(d,h,p,y){qfe(y,e,n,p,d,h)}function s(d,h){return $e(d)*$e(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,w){var _=[S,w],A,$=s(S,w),C=i?$?0:c(S,w):$?c(S+(S<0?Ie:-Ie),w):0;if(!h&&(v=y=$)&&d.lineStart(),$!==y&&(A=l(h,_),(!A||cv(h,A)||cv(_,A))&&(_[2]=1)),$!==y)b=0,$?(d.lineStart(),A=l(_,h),d.point(A[0],A[1])):(A=l(h,_),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^$){var D;!(C&p)&&(D=l(_,h,!0))&&(b=0,i?(d.lineStart(),d.point(D[0][0],D[0][1]),d.point(D[1][0],D[1][1]),d.lineEnd()):(d.point(D[1][0],D[1][1]),d.lineEnd(),d.lineStart(),d.point(D[0][0],D[0][1],3)))}$&&(!h||!cv(h,_))&&d.point(_[0],_[1]),h=_,y=$,p=C},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function l(d,h,p){var y=pc(d),v=pc(h),b=[1,0,0],S=Ld(y,v),w=xy(S,S),_=S[0],A=w-_*_;if(!A)return!p&&d;var $=t*w/A,C=-t*_/A,D=Ld(b,S),T=Sy(b,$),O=Sy(S,C);__(T,O);var R=D,L=xy(T,R),z=xy(R,R),H=L*L-z*(xy(T,T)-1);if(!(H<0)){var U=xi(H),P=Sy(R,(-L-U)/z);if(__(P,T),P=pb(P),!p)return P;var B=d[0],N=h[0],q=d[1],Y=h[1],ee;N<B&&(ee=B,B=N,N=ee);var F=N-B,V=Xe(F-Ie)<Ae,ae=V||F<Ae;if(!V&&Y<q&&(ee=q,q=Y,Y=ee),ae?V?q+Y>0^P[1]<(Xe(P[0]-B)<Ae?q:Y):q<=P[1]&&P[1]<=Y:F>Ie^(B<=P[0]&&P[0]<=N)){var se=Sy(R,(-L+U)/z);return __(se,T),[P,pb(se)]}}}function c(d,h){var p=i?e:Ie-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return II(s,o,a,i?[0,-e]:[-Ie,e-Ie])}function Zfe(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],c=t[1],d=0,h=1,p=l-s,y=c-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var Np=1e9,wy=-Np;function qI(e,t,n,i){function r(c,d){return e<=c&&c<=n&&t<=d&&d<=i}function a(c,d,h,p){var y=0,v=0;if(c==null||(y=s(c,h))!==(v=s(d,h))||l(c,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(c,d){return Xe(c[0]-e)<Ae?d>0?0:3:Xe(c[0]-n)<Ae?d>0?2:1:Xe(c[1]-t)<Ae?d>0?1:0:d>0?3:2}function o(c,d){return l(c.x,d.x)}function l(c,d){var h=s(c,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-c[1]:h===1?c[0]-d[0]:h===2?c[1]-d[1]:d[0]-c[0]}return function(c){var d=c,h=jI(),p,y,v,b,S,w,_,A,$,C,D,T={point:O,lineStart:H,lineEnd:U,polygonStart:L,polygonEnd:z};function O(B,N){r(B,N)&&d.point(B,N)}function R(){for(var B=0,N=0,q=y.length;N<q;++N)for(var Y=y[N],ee=1,F=Y.length,V=Y[0],ae,se,de=V[0],be=V[1];ee<F;++ee)ae=de,se=be,V=Y[ee],de=V[0],be=V[1],se<=i?be>i&&(de-ae)*(i-se)>(be-se)*(e-ae)&&++B:be<=i&&(de-ae)*(i-se)<(be-se)*(e-ae)&&--B;return B}function L(){d=h,p=[],y=[],D=!0}function z(){var B=R(),N=D&&B,q=(p=gL(p)).length;(N||q)&&(c.polygonStart(),N&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),q&&PI(p,o,B,a,c),c.polygonEnd()),d=c,p=y=v=null}function H(){T.point=P,y&&y.push(v=[]),C=!0,$=!1,_=A=NaN}function U(){p&&(P(b,S),w&&$&&h.rejoin(),p.push(h.result())),T.point=O,$&&d.lineEnd()}function P(B,N){var q=r(B,N);if(y&&v.push([B,N]),C)b=B,S=N,w=q,C=!1,q&&(d.lineStart(),d.point(B,N));else if(q&&$)d.point(B,N);else{var Y=[_=Math.max(wy,Math.min(Np,_)),A=Math.max(wy,Math.min(Np,A))],ee=[B=Math.max(wy,Math.min(Np,B)),N=Math.max(wy,Math.min(Np,N))];Zfe(Y,ee,e,t,n,i)?($||(d.lineStart(),d.point(Y[0],Y[1])),d.point(ee[0],ee[1]),q||d.lineEnd(),D=!1):q&&(d.lineStart(),d.point(B,N),D=!1)}_=B,A=N,$=q}return T}}function i8(e,t,n){var i=rr(e,t-Ae,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function r8(e,t,n){var i=rr(e,t-Ae,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Kfe(){var e,t,n,i,r,a,s,o,l=10,c=l,d=90,h=360,p,y,v,b,S=2.5;function w(){return{type:"MultiLineString",coordinates:_()}}function _(){return rr(by(i/d)*d,n,d).map(v).concat(rr(by(o/h)*h,s,h).map(b)).concat(rr(by(t/l)*l,e,l).filter(function(A){return Xe(A%d)>Ae}).map(p)).concat(rr(by(a/c)*c,r,c).filter(function(A){return Xe(A%h)>Ae}).map(y))}return w.lines=function(){return _().map(function(A){return{type:"LineString",coordinates:A}})},w.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},w.extent=function(A){return arguments.length?w.extentMajor(A).extentMinor(A):w.extentMinor()},w.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),w.precision(S)):[[i,o],[n,s]]},w.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),w.precision(S)):[[t,a],[e,r]]},w.step=function(A){return arguments.length?w.stepMajor(A).stepMinor(A):w.stepMinor()},w.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],w):[d,h]},w.stepMinor=function(A){return arguments.length?(l=+A[0],c=+A[1],w):[l,c]},w.precision=function(A){return arguments.length?(S=+A,p=i8(a,r,90),y=r8(t,e,S),v=i8(o,s,90),b=r8(i,n,S),w):S},w.extentMajor([[-180,-90+Ae],[180,90-Ae]]).extentMinor([[-180,-80-Ae],[180,80+Ae]])}const C0=e=>e;var $_=new yi,F$=new yi,HI,GI,L$,U$,Ys={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){Ys.lineStart=Jfe,Ys.lineEnd=tde},polygonEnd:function(){Ys.lineStart=Ys.lineEnd=Ys.point=Un,$_.add(Xe(F$)),F$=new yi},result:function(){var e=$_/2;return $_=new yi,e}};function Jfe(){Ys.point=ede}function ede(e,t){Ys.point=YI,HI=L$=e,GI=U$=t}function YI(e,t){F$.add(U$*e-L$*t),L$=e,U$=t}function tde(){YI(HI,GI)}var Ud=1/0,_b=Ud,M0=-Ud,Ab=M0,$b={point:nde,lineStart:Un,lineEnd:Un,polygonStart:Un,polygonEnd:Un,result:function(){var e=[[Ud,_b],[M0,Ab]];return M0=Ab=-(_b=Ud=1/0),e}};function nde(e,t){e<Ud&&(Ud=e),e>M0&&(M0=e),t<_b&&(_b=t),t>Ab&&(Ab=t)}var B$=0,j$=0,Rp=0,Cb=0,Mb=0,ad=0,P$=0,I$=0,zp=0,XI,VI,La,Ua,$r={point:mc,lineStart:a8,lineEnd:s8,polygonStart:function(){$r.lineStart=ade,$r.lineEnd=sde},polygonEnd:function(){$r.point=mc,$r.lineStart=a8,$r.lineEnd=s8},result:function(){var e=zp?[P$/zp,I$/zp]:ad?[Cb/ad,Mb/ad]:Rp?[B$/Rp,j$/Rp]:[NaN,NaN];return B$=j$=Rp=Cb=Mb=ad=P$=I$=zp=0,e}};function mc(e,t){B$+=e,j$+=t,++Rp}function a8(){$r.point=ide}function ide(e,t){$r.point=rde,mc(La=e,Ua=t)}function rde(e,t){var n=e-La,i=t-Ua,r=xi(n*n+i*i);Cb+=r*(La+e)/2,Mb+=r*(Ua+t)/2,ad+=r,mc(La=e,Ua=t)}function s8(){$r.point=mc}function ade(){$r.point=ode}function sde(){WI(XI,VI)}function ode(e,t){$r.point=WI,mc(XI=La=e,VI=Ua=t)}function WI(e,t){var n=e-La,i=t-Ua,r=xi(n*n+i*i);Cb+=r*(La+e)/2,Mb+=r*(Ua+t)/2,ad+=r,r=Ua*e-La*t,P$+=r*(La+e),I$+=r*(Ua+t),zp+=r*3,mc(La=e,Ua=t)}function QI(e){this._context=e}QI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,bi);break}}},result:Un};var q$=new yi,C_,ZI,KI,Fp,Lp,T0={point:Un,lineStart:function(){T0.point=ude},lineEnd:function(){C_&&JI(ZI,KI),T0.point=Un},polygonStart:function(){C_=!0},polygonEnd:function(){C_=null},result:function(){var e=+q$;return q$=new yi,e}};function ude(e,t){T0.point=JI,ZI=Fp=e,KI=Lp=t}function JI(e,t){Fp-=e,Lp-=t,q$.add(xi(Fp*Fp+Lp*Lp)),Fp=e,Lp=t}let o8,Tb,u8,l8;class c8{constructor(t){this._append=t==null?eq:lde(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==u8||this._append!==Tb){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,u8=i,Tb=this._append,l8=this._,this._=r}this._+=l8;break}}}result(){const t=this._;return this._="",t.length?t:null}}function eq(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lde(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return eq;if(t!==o8){const n=10**t;o8=t,Tb=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Tb}function tq(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Gs(o,r(a))),a.result()}return s.area=function(o){return Gs(o,r(Ys)),Ys.result()},s.measure=function(o){return Gs(o,r(T0)),T0.result()},s.bounds=function(o){return Gs(o,r($b)),$b.result()},s.centroid=function(o){return Gs(o,r($r)),$r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,C0):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new c8(n)):new QI(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new c8(n)),s},s.projection(e).digits(n).context(t)}function d2(e){return function(t){var n=new H$;for(var i in e)n[i]=e[i];return n.stream=t,n}}function H$(){}H$.prototype={constructor:H$,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function jT(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Gs(n,e.stream($b)),t($b.result()),i!=null&&e.clipExtent(i),e}function h2(e,t,n){return jT(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function PT(e,t,n){return h2(e,[[0,0],t],n)}function IT(e,t,n){return jT(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function qT(e,t,n){return jT(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var f8=16,cde=$e(30*je);function d8(e,t){return+t?dde(e,t):fde(e)}function fde(e){return d2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function dde(e,t){function n(i,r,a,s,o,l,c,d,h,p,y,v,b,S){var w=c-i,_=d-r,A=w*w+_*_;if(A>4*t&&b--){var $=s+p,C=o+y,D=l+v,T=xi($*$+C*C+D*D),O=Ui(D/=T),R=Xe(Xe(D)-1)<Ae||Xe(a-h)<Ae?(a+h)/2:zr(C,$),L=e(R,O),z=L[0],H=L[1],U=z-i,P=H-r,B=_*U-w*P;(B*B/A>t||Xe((w*U+_*P)/A-.5)>.3||s*p+o*y+l*v<cde)&&(n(i,r,a,s,o,l,z,H,R,$/=T,C/=T,D,b,S),S.point(z,H),n(z,H,R,$,C,D,c,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,l,c,d,h,p,y,v,b,S={point:w,lineStart:_,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=C},polygonEnd:function(){i.polygonEnd(),S.lineStart=_}};function w(O,R){O=e(O,R),i.point(O[0],O[1])}function _(){h=NaN,S.point=A,i.lineStart()}function A(O,R){var L=pc([O,R]),z=e(O,R);n(h,p,d,y,v,b,h=z[0],p=z[1],d=O,y=L[0],v=L[1],b=L[2],f8,i),i.point(h,p)}function $(){S.point=w,i.lineEnd()}function C(){_(),S.point=D,S.lineEnd=T}function D(O,R){A(r=O,R),a=h,s=p,o=y,l=v,c=b,S.point=A}function T(){n(h,p,d,y,v,b,a,s,r,o,l,c,f8,i),S.lineEnd=$,$()}return S}}var hde=d2({point:function(e,t){this.stream.point(e*je,t*je)}});function gde(e){return d2({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function pde(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function h8(e,t,n,i,r,a){if(!a)return pde(e,t,n,i,r);var s=$e(a),o=_e(a),l=s*e,c=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[l*b-c*S+t,n-c*b-l*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ls(e){return nq(function(){return e})()}function nq(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,c=0,d,h=0,p=1,y=1,v=null,b=n8,S=null,w,_,A,$=C0,C=.5,D,T,O,R,L;function z(B){return O(B[0]*je,B[1]*je)}function H(B){return B=O.invert(B[0],B[1]),B&&[B[0]*Yt,B[1]*Yt]}z.stream=function(B){return R&&L===B?R:R=hde(gde(d)(b(D($(L=B)))))},z.preclip=function(B){return arguments.length?(b=B,v=void 0,P()):b},z.postclip=function(B){return arguments.length?($=B,S=w=_=A=null,P()):$},z.clipAngle=function(B){return arguments.length?(b=+B?Qfe(v=B*je):(v=null,n8),P()):v*Yt},z.clipExtent=function(B){return arguments.length?($=B==null?(S=w=_=A=null,C0):qI(S=+B[0][0],w=+B[0][1],_=+B[1][0],A=+B[1][1]),P()):S==null?null:[[S,w],[_,A]]},z.scale=function(B){return arguments.length?(n=+B,U()):n},z.translate=function(B){return arguments.length?(i=+B[0],r=+B[1],U()):[i,r]},z.center=function(B){return arguments.length?(a=B[0]%360*je,s=B[1]%360*je,U()):[a*Yt,s*Yt]},z.rotate=function(B){return arguments.length?(o=B[0]%360*je,l=B[1]%360*je,c=B.length>2?B[2]%360*je:0,U()):[o*Yt,l*Yt,c*Yt]},z.angle=function(B){return arguments.length?(h=B%360*je,U()):h*Yt},z.reflectX=function(B){return arguments.length?(p=B?-1:1,U()):p<0},z.reflectY=function(B){return arguments.length?(y=B?-1:1,U()):y<0},z.precision=function(B){return arguments.length?(D=d8(T,C=B*B),P()):xi(C)},z.fitExtent=function(B,N){return h2(z,B,N)},z.fitSize=function(B,N){return PT(z,B,N)},z.fitWidth=function(B,N){return IT(z,B,N)},z.fitHeight=function(B,N){return qT(z,B,N)};function U(){var B=h8(n,0,0,p,y,h).apply(null,t(a,s)),N=h8(n,i-B[0],r-B[1],p,y,h);return d=BI(o,l,c),T=R$(t,N),O=R$(d,T),D=d8(T,C),P()}function P(){return R=L=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&H,U()}}function HT(e){var t=0,n=Ie/3,i=nq(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*je,n=a[1]*je):[t*Yt,n*Yt]},r}function mde(e){var t=$e(e);function n(i,r){return[i*t,_e(r)/t]}return n.invert=function(i,r){return[i/t,Ui(r*t)]},n}function yde(e,t){var n=_e(e),i=(n+_e(t))/2;if(Xe(i)<Ae)return mde(e);var r=1+n*(2*i-n),a=xi(r)/i;function s(o,l){var c=xi(r-2*i*_e(l))/i;return[c*_e(o*=i),a-c*$e(o)]}return s.invert=function(o,l){var c=a-l,d=zr(o,Xe(c))*Mr(c);return c*i<0&&(d-=Ie*Mr(o)*Mr(c)),[d/i,Ui((r-(o*o+c*c)*i*i)/(2*i))]},s}function Db(){return HT(yde).scale(155.424).center([0,33.6442])}function iq(){return Db().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function vde(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function bde(){var e,t,n=iq(),i,r=Db().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Db().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=vde([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(c),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ae,b+.12*y+Ae],[v-.214*y-Ae,b+.234*y-Ae]]).stream(c),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ae,b+.166*y+Ae],[v-.115*y-Ae,b+.234*y-Ae]]).stream(c),h()},d.fitExtent=function(p,y){return h2(d,p,y)},d.fitSize=function(p,y){return PT(d,p,y)},d.fitWidth=function(p,y){return IT(d,p,y)},d.fitHeight=function(p,y){return qT(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function rq(e){return function(t,n){var i=$e(t),r=$e(n),a=e(i*r);return a===1/0?[2,0]:[a*r*_e(t),a*_e(n)]}}function mm(e){return function(t,n){var i=xi(t*t+n*n),r=e(i),a=_e(r),s=$e(r);return[zr(t*a,i*s),Ui(i&&n*a/i)]}}var aq=rq(function(e){return xi(2/(1+e))});aq.invert=mm(function(e){return 2*Ui(e/2)});function xde(){return ls(aq).scale(124.75).clipAngle(180-.001)}var sq=rq(function(e){return(e=MI(e))&&e/_e(e)});sq.invert=mm(function(e){return e});function Sde(){return ls(sq).scale(79.4188).clipAngle(180-.001)}function g2(e,t){return[e,fb(UT((jt+t)/2))]}g2.invert=function(e,t){return[e,2*wh(CI(t))-jt]};function Ede(){return oq(g2).scale(961/bi)}function oq(e){var t=ls(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,c;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=l=c=null:(s=+h[0][0],o=+h[0][1],l=+h[1][0],c=+h[1][1]),d()):s==null?null:[[s,o],[l,c]]};function d(){var h=Ie*i(),p=t(Ife(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===g2?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,l),c]]:[[s,Math.max(p[1]-h,o)],[l,Math.min(p[1]+h,c)]])}return d()}function _y(e){return UT((jt+e)/2)}function wde(e,t){var n=$e(e),i=e===t?_e(e):fb(n/$e(t))/fb(_y(t)/_y(e)),r=n*w_(_y(e),i)/i;if(!i)return g2;function a(s,o){r>0?o<-jt+Ae&&(o=-jt+Ae):o>jt-Ae&&(o=jt-Ae);var l=r/w_(_y(o),i);return[l*_e(i*s),r-l*$e(i*s)]}return a.invert=function(s,o){var l=r-o,c=Mr(i)*xi(s*s+l*l),d=zr(s,Xe(l))*Mr(l);return l*i<0&&(d-=Ie*Mr(s)*Mr(l)),[d/i,2*wh(w_(r/c,1/i))-jt]},a}function _de(){return HT(wde).scale(109.5).parallels([30,30])}function kb(e,t){return[e,t]}kb.invert=kb;function Ade(){return ls(kb).scale(152.63)}function $de(e,t){var n=$e(e),i=e===t?_e(e):(n-$e(t))/(t-e),r=n/i+e;if(Xe(i)<Ae)return kb;function a(s,o){var l=r-o,c=i*s;return[l*_e(c),r-l*$e(c)]}return a.invert=function(s,o){var l=r-o,c=zr(s,Xe(l))*Mr(l);return l*i<0&&(c-=Ie*Mr(s)*Mr(l)),[c/i,r-Mr(i)*xi(s*s+l*l)]},a}function Cde(){return HT($de).scale(131.154).center([0,13.9389])}var Kp=1.340264,Jp=-.081106,e0=893e-6,t0=.003796,Ob=xi(3)/2,Mde=12;function uq(e,t){var n=Ui(Ob*_e(t)),i=n*n,r=i*i*i;return[e*$e(n)/(Ob*(Kp+3*Jp*i+r*(7*e0+9*t0*i))),n*(Kp+Jp*i+r*(e0+t0*i))]}uq.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<Mde&&(o=n*(Kp+Jp*i+r*(e0+t0*i))-t,l=Kp+3*Jp*i+r*(7*e0+9*t0*i),n-=s=o/l,i=n*n,r=i*i*i,!(Xe(s)<lb));++a);return[Ob*e*(Kp+3*Jp*i+r*(7*e0+9*t0*i))/$e(n),Ui(_e(n)/Ob)]};function Tde(){return ls(uq).scale(177.158)}function lq(e,t){var n=$e(t),i=$e(e)*n;return[n*_e(e)/i,_e(t)/i]}lq.invert=mm(wh);function Dde(){return ls(lq).scale(144.049).clipAngle(60)}function kde(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,c,d,h,p=1,y=1,v=d2({point:function($,C){var D=A([$,C]);this.stream.point(D[0],D[1])}}),b=C0,S,w;function _(){return p=e*i,y=e*r,S=w=null,A}function A($){var C=$[0]*p,D=$[1]*y;if(a){var T=D*s-C*o;C=C*s+D*o,D=T}return[C+t,D+n]}return A.invert=function($){var C=$[0]-t,D=$[1]-n;if(a){var T=D*s+C*o;C=C*s-D*o,D=T}return[C/p,D/y]},A.stream=function($){return S&&w===$?S:S=v(b(w=$))},A.postclip=function($){return arguments.length?(b=$,l=c=d=h=null,_()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(l=c=d=h=null,C0):qI(l=+$[0][0],c=+$[0][1],d=+$[1][0],h=+$[1][1]),_()):l==null?null:[[l,c],[d,h]]},A.scale=function($){return arguments.length?(e=+$,_()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],_()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*je,o=_e(a),s=$e(a),_()):a*Yt},A.reflectX=function($){return arguments.length?(i=$?-1:1,_()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,_()):r<0},A.fitExtent=function($,C){return h2(A,$,C)},A.fitSize=function($,C){return PT(A,$,C)},A.fitWidth=function($,C){return IT(A,$,C)},A.fitHeight=function($,C){return qT(A,$,C)},A}function cq(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}cq.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Xe(r)>Ae&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Ode(){return ls(cq).scale(175.295)}function fq(e,t){return[$e(t)*_e(e),_e(t)]}fq.invert=mm(Ui);function Nde(){return ls(fq).scale(249.5).clipAngle(90+Ae)}function dq(e,t){var n=$e(t),i=1+$e(e)*n;return[n*_e(e)/i,_e(t)/i]}dq.invert=mm(function(e){return 2*wh(e)});function Rde(){return ls(dq).scale(250).clipAngle(142)}function hq(e,t){return[fb(UT((jt+t)/2)),-e]}hq.invert=function(e,t){return[-t,2*wh(CI(e))-jt]};function zde(){var e=oq(hq),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Fde=Math.abs,G$=Math.cos,Nb=Math.sin,Lde=1e-6,gq=Math.PI,Y$=gq/2,g8=Ude(2);function p8(e){return e>1?Y$:e<-1?-Y$:Math.asin(e)}function Ude(e){return e>0?Math.sqrt(e):0}function Bde(e,t){var n=e*Nb(t),i=30,r;do t-=r=(t+Nb(t)-n)/(1+G$(t));while(Fde(r)>Lde&&--i>0);return t/2}function jde(e,t,n){function i(r,a){return[e*r*G$(a=Bde(n,a)),t*Nb(a)]}return i.invert=function(r,a){return a=p8(a/t),[r/(e*G$(a)),p8((2*a+Nb(2*a))/n)]},i}var Pde=jde(g8/Y$,g8,gq);function Ide(){return ls(Pde).scale(169.529)}const qde=tq(),X$=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Hde(e,t){return function n(){const i=t();return i.type=e,i.path=tq().projection(i),i.copy=i.copy||function(){const r=n();return X$.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},_j(i)}}function GT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Rb[e]=Hde(e,t),this):Rb[e]||null}function pq(e){return e&&e.path||qde}const Rb={albers:iq,albersusa:bde,azimuthalequalarea:xde,azimuthalequidistant:Sde,conicconformal:_de,conicequalarea:Db,conicequidistant:Cde,equalEarth:Tde,equirectangular:Ade,gnomonic:Dde,identity:kde,mercator:Ede,mollweide:Ide,naturalEarth1:Ode,orthographic:Nde,stereographic:Rde,transversemercator:zde};for(const e in Rb)GT(e,Rb[e]);function Gde(){}const zs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mq(){var e=1,t=1,n=o;function i(l,c){return c.map(d=>r(l,d))}function r(l,c){var d=[],h=[];return a(l,c,p=>{n(p,l,c),Yde(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Xde((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:d}}function a(l,c,d){var h=[],p=[],y,v,b,S,w,_;for(y=v=-1,S=l[0]>=c,zs[S<<1].forEach(A);++y<e-1;)b=S,S=l[y+1]>=c,zs[b|S<<1].forEach(A);for(zs[S<<0].forEach(A);++v<t-1;){for(y=-1,S=l[v*e+e]>=c,w=l[v*e]>=c,zs[S<<1|w<<2].forEach(A);++y<e-1;)b=S,S=l[v*e+e+y+1]>=c,_=w,w=l[v*e+y+1]>=c,zs[b|S<<1|w<<2|_<<3].forEach(A);zs[S|w<<3].forEach(A)}for(y=-1,w=l[v*e]>=c,zs[w<<2].forEach(A);++y<e-1;)_=w,w=l[v*e+y+1]>=c,zs[w<<2|_<<3].forEach(A);zs[w<<3].forEach(A);function A($){var C=[$[0][0]+y,$[0][1]+v],D=[$[1][0]+y,$[1][1]+v],T=s(C),O=s(D),R,L;(R=p[T])?(L=h[O])?(delete p[R.end],delete h[L.start],R===L?(R.ring.push(D),d(R.ring)):h[R.start]=p[L.end]={start:R.start,end:L.end,ring:R.ring.concat(L.ring)}):(delete p[R.end],R.ring.push(D),p[R.end=O]=R):(R=h[O])?(L=p[T])?(delete h[R.start],delete p[L.end],R===L?(R.ring.push(D),d(R.ring)):h[L.start]=p[R.end]={start:L.start,end:R.end,ring:L.ring.concat(R.ring)}):(delete h[R.start],R.ring.unshift(C),h[R.start=T]=R):h[T]=p[O]={start:T,end:O,ring:[C,D]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,c,d){l.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,w=c[b*e+v];p>0&&p<e&&v===p&&(S=c[b*e+v-1],h[0]=p+(d-S)/(w-S)-.5),y>0&&y<t&&b===y&&(S=c[(b-1)*e+v],h[1]=y+(d-S)/(w-S)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),d=Math.floor(l[1]);return c>=0&&d>=0||Eu("invalid size"),e=c,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:Gde,i):n===o},i}function Yde(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Xde(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Vde(e,t[n]))return r;return 0}function Vde(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],c=l[0],d=l[1],h=e[o],p=h[0],y=h[1];if(Wde(l,h,t))return 0;d>i!=y>i&&n<(p-c)*(i-d)/(y-d)+c&&(r=-r)}return r}function Wde(e,t,n){var i;return Qde(e,t,n)&&Zde(e[i=+(e[0]===t[0])],n[i],t[i])}function Qde(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Zde(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function yq(e,t,n){return function(i){var r=$fe(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?$u(a,s,e):o/(e+1);return rr(a+l,s,l)}}function YT(e){J.call(this,null,e)}YT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};us(YT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||A0,a=mq().smooth(e.smooth!==!1),s=e.thresholds||Kde(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(c=>{const d=r(c),h=a.size([d.width,d.height])(d.values,FT(s)?s:s(d.values));Jde(h,d,c,e),h.forEach(p=>{l.push(Dx(c,st(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Kde(e,t,n){const i=yq(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Kl(t(r).values)))}function Jde(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(ho(r)&&(r=r(n,i)),ho(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(Iz(r)?r:r[0])||1,o=(Iz(r)?r:r[1])||1,l=a&&a[0]||0,c=a&&a[1]||0;e.forEach(vq(t,s,o,l,c))}function vq(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(h){h.forEach(c)}function c(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(l),h}}function m8(e,t,n){const i=e>=0?e:RM(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function M_(e){return ho(e)?e:$0(+e)}function bq(){var e=l=>l[0],t=l=>l[1],n=Afe,i=[-1,-1],r=960,a=500,s=2;function o(l,c){const d=m8(i[0],l,e)>>s,h=m8(i[1],l,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),w=new Float32Array(v*b);let _=S;l.forEach($=>{const C=p+(+e($)>>s),D=y+(+t($)>>s);C>=0&&C<v&&D>=0&&D<b&&(S[C+D*v]+=+n($))}),d>0&&h>0?(qf(v,b,S,w,d),Hf(v,b,w,S,h),qf(v,b,S,w,d),Hf(v,b,w,S,h),qf(v,b,S,w,d),Hf(v,b,w,S,h)):d>0?(qf(v,b,S,w,d),qf(v,b,w,S,d),qf(v,b,S,w,d),_=w):h>0&&(Hf(v,b,S,w,h),Hf(v,b,w,S,h),Hf(v,b,S,w,h),_=w);const A=c?Math.pow(2,-2*s):1/pL(_);for(let $=0,C=v*b;$<C;++$)_[$]*=A;return{values:_,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=M_(l),o):e},o.y=function(l){return arguments.length?(t=M_(l),o):t},o.weight=function(l){return arguments.length?(n=M_(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var c=+l[0],d=+l[1];return c>=0&&d>=0||Eu("invalid size"),r=c,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||Eu("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=LT(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Eu("invalid bandwidth"),i=l,o):i},o}function qf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function Hf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function XT(e){J.call(this,null,e)}XT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ehe=["x","y","weight","size","cellSize","bandwidth"];function xq(e,t){return ehe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}us(XT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=the(i,e.groupby),a=(e.groupby||[]).map(bfe),s=xq(bq(),e),o=e.as||"grid",l=[];function c(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return l=r.map(d=>st(c({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function the(e,t){var n=[],i=d=>d(o),r,a,s,o,l,c;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),c=r[l],c||(r[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function VT(e){J.call(this,null,e)}VT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};us(VT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=mq().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||yq(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=xq(bq(),e)(r,!0),l=vq(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=FT(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(st),n}});const V$="Feature",WT="FeatureCollection",nhe="MultiPoint";function QT(e){J.call(this,null,e)}QT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};us(QT,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&A0,l=t.ADD,c;c=e.modified()||t.changed(t.REM)||t.modified(lv(o))||a&&t.modified(lv(a))||s&&t.modified(lv(s)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:V$,geometry:{type:nhe,coordinates:i}})),this.value={type:WT,features:n}}});function ZT(e){J.call(this,null,e)}ZT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};us(ZT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||A0,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=pq(e.projection),n.materialize().reflow()):s=r===A0||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=ihe(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function ihe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function KT(e){J.call(this,null,e)}KT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};us(KT,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function c(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(a)}});function JT(e){J.call(this,null,e)}JT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};us(JT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=rhe(pq(e.projection),e.field||AI("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function rhe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function eD(e){J.call(this,[],e),this.generator=Kfe()}eD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};us(eD,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)ho(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(fU(n[0],r)):t.add.push(st(r)),n[0]=r,t}});function tD(e){J.call(this,null,e)}tD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};us(tD,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||A0,a=she(e.opacity,e),s=ahe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Kl(n.map(c=>Kl(r(c).values))):0};return n.forEach(c=>{const d=r(c),h=$I({},c,l);i||(h.$max=Kl(d.values||[])),c[o]=ohe(d,h,s.dep?s:$0(s(h)),a.dep?a:$0(a(h)))}),t.reflow(!0).modifies(o)}});function ahe(e,t){let n;return ho(e)?(n=i=>Du(e(i,t)),n.dep=Sq(e)):n=$0(Du(e||"#888")),n}function she(e,t){let n;return ho(e)?(n=i=>e(i,t),n.dep=Sq(e)):e?n=$0(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Sq(e){if(!ho(e))return!1;const t=Cfe(lv(e));return t.$x||t.$y||t.$value||t.$max}function ohe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,c=e.y2||a,d=e.values,h=d?S=>d[S]:_fe,p=bu(l-s,c-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,c-o),b=v.data;for(let S=o,w=0;S<c;++S){t.$y=S-o;for(let _=s,A=S*r;_<l;++_,w+=4){t.$x=_-s,t.$value=h(_+A);const $=n(t);b[w+0]=$.r,b[w+1]=$.g,b[w+2]=$.b,b[w+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function Eq(e){J.call(this,null,e),this.modified(!0)}us(Eq,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=lhe(e.type),X$.forEach(i=>{e[i]!=null&&y8(n,i,e[i])})):X$.forEach(i=>{e.modified(i)&&y8(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&uhe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uhe(e,t){const n=che(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function lhe(e){const t=GT((e||"mercator").toLowerCase());return t||Eu("Unrecognized projection type: "+e),t()}function y8(e,t,n){ho(e[t])&&e[t](n)}function che(e){return e=LT(e),e.length===1?e[0]:{type:WT,features:e.reduce((t,n)=>t.concat(fhe(n)),[])}}function fhe(e){return e.type===WT?e.features:LT(e).filter(t=>t!=null).map(t=>t.type===V$?t:{type:V$,geometry:t})}const dhe=Object.freeze(Object.defineProperty({__proto__:null,contour:VT,geojson:QT,geopath:ZT,geopoint:KT,geoshape:JT,graticule:eD,heatmap:tD,isocontour:YT,kde2d:XT,projection:Eq},Symbol.toStringTag,{value:"Module"}));function _h(e,t,n){return e.fields=t||[],e.fname=n,e}function hhe(e){return e==null?null:e.fields}function ghe(e){return e.length===1?phe(e[0]):mhe(e)}const phe=e=>function(t){return t[e]},mhe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function fv(e){throw Error(e)}function yhe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||fv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&fv("Access path missing closing bracket: "+e),i&&fv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function vhe(e,t,n){const i=yhe(e);return e=i.length===1?i[0]:e,_h(ghe(i),[e],e)}vhe("id");_h(e=>e,[],"identity");_h(()=>0,[],"zero");_h(()=>1,[],"one");_h(()=>!0,[],"true");_h(()=>!1,[],"false");var bhe=Array.isArray;function xhe(e){return e!=null?bhe(e)?e:[e]:[]}function nD(e){return typeof e=="function"}function She(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ehe(e,t){return Object.hasOwn(e,t)}function whe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),She(i,n)}function _he(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,c=0;for(a=0;a<s;++a)o=n[a],l+=o.x,c+=o.y;for(l=(l/s-e)*i,c=(c/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=c}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Ahe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return wq(this.cover(t,n),t,n,e)}function wq(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,c=e._x1,d=e._y1,h,p,y,v,b,S,w,_;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+c)/2))?o=h:c=h,(S=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[w=S<<1|b]))return r[w]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[w]=s:e._root=s,e;do r=r?r[w]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+c)/2))?o=h:c=h,(S=n>=(p=(l+d)/2))?l=p:d=p;while((w=S<<1|b)===(_=(v>=p)<<1|y>=h));return r[_]=a,r[w]=s,e}function $he(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,c=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<c&&(c=a),a>h&&(h=a));if(l>d||c>h)return this;for(this.cover(l,c).cover(d,h),n=0;n<i;++n)wq(this,s[n],o[n],e[n]);return this}function Che(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,c;n>e||e>=r||i>t||t>=a;)switch(c=(t<i)<<1|e<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Mhe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function The(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function gi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Dhe(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,c,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new gi(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(l=v.x1)<r||(c=v.y1)<a))if(y.length){var S=(s+l)/2,w=(o+c)/2;p.push(new gi(y[3],S,w,l,c),new gi(y[2],s,w,S,c),new gi(y[1],S,o,l,w),new gi(y[0],s,o,S,w)),(b=(t>=w)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var _=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=_*_+A*A;if($<n){var C=Math.sqrt(n=$);r=e-C,a=t-C,d=e+C,h=t+C,i=y.data}}return i}function khe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,c=this._y1,d,h,p,y,v,b,S,w;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=h>=(y=(o+c)/2))?o=y:c=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,w=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[w]=n:this._root=n),this):(this._root=a,this)}function Ohe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Nhe(){return this._root}function Rhe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function zhe(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new gi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var c=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new gi(r,c,d,o,l)),(r=i[2])&&t.push(new gi(r,a,d,c,l)),(r=i[1])&&t.push(new gi(r,c,s,o,d)),(r=i[0])&&t.push(new gi(r,a,s,c,d))}return this}function Fhe(e){var t=[],n=[],i;for(this._root&&t.push(new gi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,c=i.y1,d=(s+l)/2,h=(o+c)/2;(a=r[0])&&t.push(new gi(a,s,o,d,h)),(a=r[1])&&t.push(new gi(a,d,o,l,h)),(a=r[2])&&t.push(new gi(a,s,h,d,c)),(a=r[3])&&t.push(new gi(a,d,h,l,c))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Lhe(e){return e[0]}function Uhe(e){return arguments.length?(this._x=e,this):this._x}function Bhe(e){return e[1]}function jhe(e){return arguments.length?(this._y=e,this):this._y}function iD(e,t,n){var i=new rD(t??Lhe,n??Bhe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function rD(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function v8(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ei=iD.prototype=rD.prototype;Ei.copy=function(){var e=new rD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=v8(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=v8(i));return e};Ei.add=Ahe;Ei.addAll=$he;Ei.cover=Che;Ei.data=Mhe;Ei.extent=The;Ei.find=Dhe;Ei.remove=khe;Ei.removeAll=Ohe;Ei.root=Nhe;Ei.size=Rhe;Ei.visit=zhe;Ei.visitAfter=Fhe;Ei.x=Uhe;Ei.y=jhe;function pi(e){return function(){return e}}function hu(e){return(e()-.5)*1e-6}function Phe(e){return e.x+e.vx}function Ihe(e){return e.y+e.vy}function qhe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=pi(e==null?1:+e));function s(){for(var c,d=t.length,h,p,y,v,b,S,w=0;w<a;++w)for(h=iD(t,Phe,Ihe).visitAfter(o),c=0;c<d;++c)p=t[c],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(_);function _(A,$,C,D,T){var O=A.data,R=A.r,L=b+R;if(O){if(O.index>p.index){var z=y-O.x-O.vx,H=v-O.y-O.vy,U=z*z+H*H;U<L*L&&(z===0&&(z=hu(i),U+=z*z),H===0&&(H=hu(i),U+=H*H),U=(L-(U=Math.sqrt(U)))/U*r,p.vx+=(z*=U)*(L=(R*=R)/(S+R)),p.vy+=(H*=U)*L,O.vx-=z*(L=1-L),O.vy-=H*L)}return}return $>y+L||D<y-L||C>v+L||T<v-L}}function o(c){if(c.data)return c.r=n[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function l(){if(t){var c,d=t.length,h;for(n=new Array(d),c=0;c<d;++c)h=t[c],n[h.index]=+e(h,c,t)}}return s.initialize=function(c,d){t=c,i=d,l()},s.iterations=function(c){return arguments.length?(a=+c,s):a},s.strength=function(c){return arguments.length?(r=+c,s):r},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:pi(+c),l(),s):e},s}function Hhe(e){return e.index}function b8(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Ghe(e){var t=Hhe,n=h,i,r=pi(30),a,s,o,l,c,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var w=0,_=e.length;w<d;++w)for(var A=0,$,C,D,T,O,R,L;A<_;++A)$=e[A],C=$.source,D=$.target,T=D.x+D.vx-C.x-C.vx||hu(c),O=D.y+D.vy-C.y-C.vy||hu(c),R=Math.sqrt(T*T+O*O),R=(R-a[A])/R*S*i[A],T*=R,O*=R,D.vx-=T*(L=l[A]),D.vy-=O*L,C.vx+=T*(L=1-L),C.vy+=O*L}function y(){if(s){var S,w=s.length,_=e.length,A=new Map(s.map((C,D)=>[t(C,D,s),C])),$;for(S=0,o=new Array(w);S<_;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=b8(A,$.source)),typeof $.target!="object"&&($.target=b8(A,$.target)),o[$.source.index]=(o[$.source.index]||0)+1,o[$.target.index]=(o[$.target.index]||0)+1;for(S=0,l=new Array(_);S<_;++S)$=e[S],l[S]=o[$.source.index]/(o[$.source.index]+o[$.target.index]);i=new Array(_),v(),a=new Array(_),b()}}function v(){if(s)for(var S=0,w=e.length;S<w;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,w=e.length;S<w;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,w){s=S,c=w,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:pi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:pi(+S),b(),p):r},p}var Yhe={value:()=>{}};function _q(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new dv(n)}function dv(e){this._=e}function Xhe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}dv.prototype=_q.prototype={constructor:dv,on:function(e,t){var n=this._,i=Xhe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Vhe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=x8(n[r],e.name,t);else if(t==null)for(r in n)n[r]=x8(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dv(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Vhe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function x8(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Yhe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Bd=0,Up=0,lp=0,Aq=1e3,zb,Bp,Fb=0,yc=0,p2=0,D0=typeof performance=="object"&&performance.now?performance:Date,$q=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function aD(){return yc||($q(Whe),yc=D0.now()+p2)}function Whe(){yc=0}function Lb(){this._call=this._time=this._next=null}Lb.prototype=Cq.prototype={constructor:Lb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?aD():+n)+(t==null?0:+t),!this._next&&Bp!==this&&(Bp?Bp._next=this:zb=this,Bp=this),this._call=e,this._time=n,W$()},stop:function(){this._call&&(this._call=null,this._time=1/0,W$())}};function Cq(e,t,n){var i=new Lb;return i.restart(e,t,n),i}function Qhe(){aD(),++Bd;for(var e=zb,t;e;)(t=yc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bd}function S8(){yc=(Fb=D0.now())+p2,Bd=Up=0;try{Qhe()}finally{Bd=0,Khe(),yc=0}}function Zhe(){var e=D0.now(),t=e-Fb;t>Aq&&(p2-=t,Fb=e)}function Khe(){for(var e,t=zb,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zb=n);Bp=e,W$(i)}function W$(e){if(!Bd){Up&&(Up=clearTimeout(Up));var t=e-yc;t>24?(e<1/0&&(Up=setTimeout(S8,e-D0.now()-p2)),lp&&(lp=clearInterval(lp))):(lp||(Fb=D0.now(),lp=setInterval(Zhe,Aq)),Bd=1,$q(S8))}}function Jhe(e,t,n){var i=new Lb,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?aD():+o,i._restart(function l(c){c+=r,i._restart(l,r+=s,o),a(c)},s,o)},i.restart(e,t,n),i)}const ege=1664525,tge=1013904223,E8=4294967296;function nge(){let e=1;return()=>(e=(ege*e+tge)%E8)/E8}function ige(e){return e.x}function rge(e){return e.y}var age=10,sge=Math.PI*(3-Math.sqrt(5));function oge(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=Cq(h),c=_q("tick","end"),d=nge();e==null&&(e=[]);function h(){p(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function p(b){var S,w=e.length,_;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function($){$(n)}),S=0;S<w;++S)_=e[S],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return t}function y(){for(var b=0,S=e.length,w;b<S;++b){if(w=e[b],w.index=b,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var _=age*Math.sqrt(.5+b),A=b*sge;w.x=_*Math.cos(A),w.y=_*Math.sin(A)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,w){var _=0,A=e.length,$,C,D,T,O;for(w==null?w=1/0:w*=w,_=0;_<A;++_)T=e[_],$=b-T.x,C=S-T.y,D=$*$+C*C,D<w&&(O=T,w=D);return O},on:function(b,S){return arguments.length>1?(c.on(b,S),t):c.on(b)}}}function uge(){var e,t,n,i,r=pi(-30),a,s=1,o=1/0,l=.81;function c(y){var v,b=e.length,S=iD(e,ige,rge).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,w=0,_,A,$;if(y.length){for(_=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,w+=S,_+=S*b.x,A+=S*b.y);y.x=_/w,y.y=A/w}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var w=y.x-t.x,_=y.y-t.y,A=S-v,$=w*w+_*_;if(A*A/l<$)return $<o&&(w===0&&(w=hu(n),$+=w*w),_===0&&(_=hu(n),$+=_*_),$<s&&($=Math.sqrt(s*$)),t.vx+=w*y.value*i/$,t.vy+=_*y.value*i/$),!0;if(y.length||$>=o)return;(y.data!==t||y.next)&&(w===0&&(w=hu(n),$+=w*w),_===0&&(_=hu(n),$+=_*_),$<s&&($=Math.sqrt(s*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=w*A,t.vy+=_*A);while(y=y.next)}return c.initialize=function(y,v){e=y,n=v,d()},c.strength=function(y){return arguments.length?(r=typeof y=="function"?y:pi(+y),d(),c):r},c.distanceMin=function(y){return arguments.length?(s=y*y,c):Math.sqrt(s)},c.distanceMax=function(y){return arguments.length?(o=y*y,c):Math.sqrt(o)},c.theta=function(y){return arguments.length?(l=y*y,c):Math.sqrt(l)},c}function lge(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(o){for(var l=0,c=n.length,d;l<c;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:pi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:pi(+o),s(),a):e},a}function cge(e){var t=pi(.1),n,i,r;typeof e!="function"&&(e=pi(e==null?0:+e));function a(o){for(var l=0,c=n.length,d;l<c;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:pi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:pi(+o),s(),a):e},a}const w8={center:_he,collide:qhe,nbody:uge,link:Ghe,x:lge,y:cge},jp="forces",Q$=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],fge=["static","iterations"],Mq=["x","y","vx","vy"];function sD(e){J.call(this,null,e)}sD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Mq}]};whe(sD,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Q$),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&Tq(n,e,0,t)):(this.value=n=hge(t.source,e),n.on("tick",dge(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(fge)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,c=o.length,d;l<c;++l)if(d=o[l],!(d.name!==jp||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Mq)}});function dge(e,t){return()=>e.touch(t).run()}function hge(e,t){const n=oge(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),Tq(n,t,!0).on("end",()=>a=!0)}function Tq(e,t,n,i){var r=xhe(t.forces),a,s,o,l;for(a=0,s=Q$.length;a<s;++a)o=Q$[a],o!==jp&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=jp+a,o=n||t.modified(jp,a)?pge(r[a]):i&&gge(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(jp+a,null);return e.numForces=r.length,e}function gge(e,t){var n,i;for(n in e)if(nD(i=e[n])&&t.modified(hhe(i)))return 1;return 0}function pge(e){var t,n;Ehe(w8,e.force)||fv("Unrecognized force: "+e.force),t=w8[e.force]();for(n in e)nD(t[n])&&mge(t[n],e[n],e);return t}function mge(e,t,n){e(nD(t)?i=>t(i,n):t)}const yge=Object.freeze(Object.defineProperty({__proto__:null,force:sD},Symbol.toStringTag,{value:"Module"}));function Ah(e,t,n){return e.fields=t||[],e.fname=n,e}function vge(e){return e.length===1?bge(e[0]):xge(e)}const bge=e=>function(t){return t[e]},xge=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Ga(e){throw Error(e)}function Sge(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Ga("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Ga("Access path missing closing bracket: "+e),i&&Ga("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Ege(e,t,n){const i=Sge(e);return e=i.length===1?i[0]:e,Ah(vge(i),[e],e)}Ege("id");Ah(e=>e,[],"identity");Ah(()=>0,[],"zero");const wge=Ah(()=>1,[],"one"),_ge=Ah(()=>!0,[],"true");Ah(()=>!1,[],"false");var Age=Array.isArray;function $ge(e){return e!=null?Age(e)?e:[e]:[]}function Cge(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Dq(e,t){return Object.hasOwn(e,t)}function Xu(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Cge(i,n)}function Mge(e,t){return e.parent===t.parent?1:2}function Tge(e){return e.reduce(Dge,0)/e.length}function Dge(e,t){return e+t.x}function kge(e){return 1+e.reduce(Oge,0)}function Oge(e,t){return Math.max(e,t.y)}function Nge(e){for(var t;t=e.children;)e=t[0];return e}function Rge(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zge(){var e=Mge,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Tge(y),p.y=kge(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=Nge(a),c=Rge(a),d=l.x-e(l,c)/2,h=c.x+e(c,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Fge(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Lge(){return this.eachAfter(Fge)}function Uge(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Bge(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function jge(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Pge(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Ige(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function qge(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Hge(e){for(var t=this,n=Gge(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Gge(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Yge(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Xge(){return Array.from(this)}function Vge(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Wge(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Qge(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function oD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Jge)):t===void 0&&(t=Kge);for(var n=new jd(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new jd(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(kq)}function Zge(){return oD(this).eachBefore(epe)}function Kge(e){return e.children}function Jge(e){return Array.isArray(e)?e[1]:null}function epe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function kq(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jd(e){this.data=e,this.depth=this.height=0,this.parent=null}jd.prototype=oD.prototype={constructor:jd,count:Lge,each:Uge,eachAfter:jge,eachBefore:Bge,find:Pge,sum:Ige,sort:qge,path:Hge,ancestors:Yge,descendants:Xge,leaves:Vge,links:Wge,copy:Zge,[Symbol.iterator]:Qge};function hv(e){return e==null?null:Oq(e)}function Oq(e){if(typeof e!="function")throw new Error;return e}function Il(){return 0}function Jf(e){return function(){return e}}const tpe=1664525,npe=1013904223,_8=4294967296;function ipe(){let e=1;return()=>(e=(tpe*e+npe)%_8)/_8}function rpe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ape(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function spe(e,t){for(var n=0,i=(e=ape(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&Nq(s,a)?++n:(s=upe(r=ope(r,a)),n=0);return s}function ope(e,t){var n,i;if(T_(t,e))return[t];for(n=0;n<e.length;++n)if(Ay(t,e[n])&&T_(Pp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Ay(Pp(e[n],e[i]),t)&&Ay(Pp(e[n],t),e[i])&&Ay(Pp(e[i],t),e[n])&&T_(Rq(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Ay(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function Nq(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function T_(e,t){for(var n=0;n<t.length;++n)if(!Nq(e,t[n]))return!1;return!0}function upe(e){switch(e.length){case 1:return lpe(e[0]);case 2:return Pp(e[0],e[1]);case 3:return Rq(e[0],e[1],e[2])}}function lpe(e){return{x:e.x,y:e.y,r:e.r}}function Pp(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,c=s-i,d=o-r,h=Math.sqrt(l*l+c*c);return{x:(n+a+l/h*d)/2,y:(i+s+c/h*d)/2,r:(h+r+o)/2}}function Rq(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,c=n.x,d=n.y,h=n.r,p=i-s,y=i-c,v=r-o,b=r-d,S=l-a,w=h-a,_=i*i+r*r-a*a,A=_-s*s-o*o+l*l,$=_-c*c-d*d+h*h,C=y*v-p*b,D=(v*$-b*A)/(C*2)-i,T=(b*S-v*w)/C,O=(y*A-p*$)/(C*2)-r,R=(p*w-y*S)/C,L=T*T+R*R-1,z=2*(a+D*T+O*R),H=D*D+O*O-a*a,U=-(Math.abs(L)>1e-6?(z+Math.sqrt(z*z-4*L*H))/(2*L):H/z);return{x:i+D+T*U,y:r+O+R*U,r:U}}function A8(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,c=i*i+s*s;c?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(c+l-a)/(2*c),o=Math.sqrt(Math.max(0,l/c-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(c+a-l)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function $8(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function C8(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function $y(e){this._=e,this.next=null,this.previous=null}function cpe(e,t){if(!(a=(e=rpe(e)).length))return 0;var n,i,r,a,s,o,l,c,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;A8(i,n,r=e[2]),n=new $y(n),i=new $y(i),r=new $y(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){A8(n._,i._,r=e[l]),r=new $y(r),c=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if($8(c._,r._)){i=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if($8(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(c!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=C8(n);(r=r.next)!==i;)(o=C8(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=spe(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function fpe(e){return Math.sqrt(e.value)}function dpe(){var e=null,t=1,n=1,i=Il;function r(a){const s=ipe();return a.x=t/2,a.y=n/2,e?a.eachBefore(M8(e)).eachAfter(D_(i,.5,s)).eachBefore(T8(1)):a.eachBefore(M8(fpe)).eachAfter(D_(Il,1,s)).eachAfter(D_(i,a.r/Math.min(t,n),s)).eachBefore(T8(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=hv(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Jf(+a),r):i},r}function M8(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function D_(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=cpe(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function T8(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function zq(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ym(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,c=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*c}function hpe(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(zq),s}function a(s,o){return function(l){l.children&&ym(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var c=l.x0,d=l.y0,h=l.x1-n,p=l.y1-n;h<c&&(c=h=(c+h)/2),p<d&&(d=p=(d+p)/2),l.x0=c,l.y0=d,l.x1=h,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var gpe={depth:-1},D8={},k_={};function ppe(e){return e.id}function mpe(e){return e.parentId}function k8(){var e=ppe,t=mpe,n;function i(r){var a=Array.from(r),s=e,o=t,l,c,d,h,p,y,v,b,S=new Map;if(n!=null){const w=a.map(($,C)=>ype(n($,C,r))),_=w.map(O8),A=new Set(w).add("");for(const $ of _)A.has($)||(A.add($),w.push($),_.push(O8($)),a.push(k_));s=($,C)=>w[C],o=($,C)=>_[C]}for(d=0,l=a.length;d<l;++d)c=a[d],y=a[d]=new jd(c),(v=s(c,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?D8:y)),(v=o(c,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===D8)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===k_&&h.children.length===1;)h=h.children[0],--l;for(let w=a.length-1;w>=0&&(y=a[w],y.data===k_);--w)y.data=null}if(h.parent=gpe,h.eachBefore(function(w){w.depth=w.parent.depth+1,--l}).eachBefore(kq),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=hv(r),i):e},i.parentId=function(r){return arguments.length?(t=hv(r),i):t},i.path=function(r){return arguments.length?(n=hv(r),i):n},i}function ype(e){e=`${e}`;let t=e.length;return Z$(e,t-1)&&!Z$(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function O8(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Z$(e,t););return e.slice(0,t)}function Z$(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function vpe(e,t){return e.parent===t.parent?1:2}function O_(e){var t=e.children;return t?t[0]:e.t}function N_(e){var t=e.children;return t?t[t.length-1]:e.t}function bpe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function xpe(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Spe(e,t,n){return e.a.parent===t.parent?e.a:n}function gv(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}gv.prototype=Object.create(jd.prototype);function Epe(e){for(var t=new gv(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new gv(a[s],s)),r.parent=n;return(t.parent=new gv(null,0)).children=[t],t}function wpe(){var e=vpe,t=1,n=1,i=null;function r(c){var d=Epe(c);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)c.eachBefore(l);else{var h=c,p=c,y=c;c.eachBefore(function(_){_.x<h.x&&(h=_),_.x>p.x&&(p=_),_.depth>y.depth&&(y=_)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),w=n/(y.depth||1);c.eachBefore(function(_){_.x=(_.x+b)*S,_.y=_.depth*w})}return c}function a(c){var d=c.children,h=c.parent.children,p=c.i?h[c.i-1]:null;if(d){xpe(c);var y=(d[0].z+d[d.length-1].z)/2;p?(c.z=p.z+e(c._,p._),c.m=c.z-y):c.z=y}else p&&(c.z=p.z+e(c._,p._));c.parent.A=o(c,p,c.parent.A||h[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,d,h){if(d){for(var p=c,y=c,v=d,b=p.parent.children[0],S=p.m,w=y.m,_=v.m,A=b.m,$;v=N_(v),p=O_(p),v&&p;)b=O_(b),y=N_(y),y.a=c,$=v.z+_-p.z-S+e(v._,p._),$>0&&(bpe(Spe(v,c,h),c,$),S+=$,w+=$),_+=v.m,S+=p.m,A+=b.m,w+=y.m;v&&!N_(y)&&(y.t=v,y.m+=_-w),p&&!O_(b)&&(b.t=p,b.m+=S-A,h=c)}return h}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}function m2(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,c=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*c}var Fq=(1+Math.sqrt(5))/2;function Lq(e,t,n,i,r,a){for(var s=[],o=t.children,l,c,d=0,h=0,p=o.length,y,v,b=t.value,S,w,_,A,$,C,D;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(w=_=S,C=Math.max(v/y,y/v)/(b*e),D=S*S*C,$=Math.max(_/D,D/w);h<p;++h){if(S+=c=o[h].value,c<w&&(w=c),c>_&&(_=c),D=S*S*C,A=Math.max(_/D,D/w),A>$){S-=c;break}$=A}s.push(l={value:S,dice:y<v,children:o.slice(d,h)}),l.dice?ym(l,n,i,r,b?i+=v*S/b:a):m2(l,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const Uq=function e(t){function n(i,r,a,s,o){Lq(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Fq);function _pe(){var e=Uq,t=!1,n=1,i=1,r=[0],a=Il,s=Il,o=Il,l=Il,c=Il;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(zq),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,w=p.y1-y;S<v&&(v=S=(v+S)/2),w<b&&(b=w=(b+w)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=w,p.children&&(y=r[p.depth+1]=a(p)/2,v+=c(p)-y,b+=s(p)-y,S-=o(p)-y,w-=l(p)-y,S<v&&(v=S=(v+S)/2),w<b&&(b=w=(b+w)/2),e(p,v,b,S,w))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=Oq(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Jf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Jf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Jf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Jf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:Jf(+p),d):c},d}function Ape(e,t,n,i,r){var a=e.children,s,o=a.length,l,c=new Array(o+1);for(c[0]=l=s=0;s<o;++s)c[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,w){if(h>=p-1){var _=a[h];_.x0=v,_.y0=b,_.x1=S,_.y1=w;return}for(var A=c[h],$=y/2+A,C=h+1,D=p-1;C<D;){var T=C+D>>>1;c[T]<$?C=T+1:D=T}$-c[C-1]<c[C]-$&&h+1<C&&--C;var O=c[C]-A,R=y-O;if(S-v>w-b){var L=y?(v*R+S*O)/y:S;d(h,C,O,v,b,L,w),d(C,p,R,L,b,S,w)}else{var z=y?(b*R+w*O)/y:w;d(h,C,O,v,b,S,z),d(C,p,R,v,z,S,w)}}}function $pe(e,t,n,i,r){(e.depth&1?m2:ym)(e,t,n,i,r)}const Cpe=function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,c,d,h,p=-1,y,v=l.length,b=i.value;++p<v;){for(c=l[p],d=c.children,h=c.value=0,y=d.length;h<y;++h)c.value+=d[h].value;c.dice?ym(c,r,a,s,b?a+=(o-a)*c.value/b:o):m2(c,r,a,b?r+=(s-r)*c.value/b:s,o),b-=c.value}else i._squarify=l=Lq(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Fq);function K$(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function uD(e){J.call(this,null,e)}uD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Mpe=e=>e.values;Xu(uD,J,{transform(e,t){t.source||Ga("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Tx(s.data)&&r.rem.push(s.data)}),this.value=a=oD({values:$ge(e.keys).reduce((s,o)=>(s.key(o),s),Tpe()).entries(r.source)},Mpe),n&&a.each(s=>{s.children&&(s=st(s.data),r.add.push(s),r.source.push(s))}),K$(a,we,we)),r.source.root=a,r}});function Tpe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},c={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=l[h])?y.push(p):l[h]=[p];for(h in l)c[h]=n(l[h],a);return c}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function Eo(e){J.call(this,null,e)}const Dpe=(e,t)=>e.parent===t.parent?1:2;Xu(Eo,J,{transform(e,t){(!t.source||!t.source.root)&&Ga(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(zc(e.sort,s=>s.data)),kpe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Dpe:wge);try{this.value=n(r)}catch(s){Ga(s)}return r.each(s=>Ope(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function kpe(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Ope(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const J$=["x","y","r","depth","children"];function lD(e){Eo.call(this,e)}lD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:J$.length,default:J$}]};Xu(lD,Eo,{layout:dpe,params:["radius","size","padding"],fields:J$});const eC=["x0","y0","x1","y1","depth","children"];function cD(e){Eo.call(this,e)}cD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eC.length,default:eC}]};Xu(cD,Eo,{layout:hpe,params:["size","round","padding"],fields:eC});function fD(e){J.call(this,null,e)}fD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Xu(fD,J,{transform(e,t){t.source||Ga("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?K$(k8().id(e.key).parentId(e.parentKey)(r.source),e.key,_ge):K$(k8()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const N8={tidy:wpe,cluster:zge},tC=["x","y","depth","children"];function dD(e){Eo.call(this,e)}dD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:tC.length,default:tC}]};Xu(dD,Eo,{layout(e){const t=e||"tidy";if(Dq(N8,t))return N8[t]();Ga("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:tC});function hD(e){J.call(this,[],e)}hD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Xu(hD,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||Ga("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[we(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[we(o)]&&a[we(l)]&&r.add.push(st({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[we(s)]=1),n.forEach(s=>{(a[we(s.source)]||a[we(s.target)])&&r.mod.push(s)})),r}});const R8={binary:Ape,dice:ym,slice:m2,slicedice:$pe,squarify:Uq,resquarify:Cpe},nC=["x0","y0","x1","y1","depth","children"];function gD(e){Eo.call(this,e)}gD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nC.length,default:nC}]};Xu(gD,Eo,{layout(){const e=_pe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Dq(R8,t)?e.tile(R8[t]):Ga("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:nC});const Npe=Object.freeze(Object.defineProperty({__proto__:null,nest:uD,pack:lD,partition:cD,stratify:fD,tree:dD,treelinks:hD,treemap:gD},Symbol.toStringTag,{value:"Module"}));function $h(e,t,n){return e.fields=t||[],e.fname=n,e}function Rpe(e){return e.length===1?zpe(e[0]):Fpe(e)}const zpe=e=>function(t){return t[e]},Fpe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function pv(e){throw Error(e)}function Lpe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||pv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&pv("Access path missing closing bracket: "+e),i&&pv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Upe(e,t,n){const i=Lpe(e);return e=i.length===1?i[0]:e,$h(Rpe(i),[e],e)}Upe("id");$h(e=>e,[],"identity");$h(()=>0,[],"zero");$h(()=>1,[],"one");$h(()=>!0,[],"true");$h(()=>!1,[],"false");var Bpe=Array.isArray;function z8(e){return e!=null?Bpe(e)?e:[e]:[]}function jpe(e){return typeof e=="function"}function Ppe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ipe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ppe(i,n)}const R_=4278190080;function qpe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Hpe(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=bu(a,s).getContext("2d"),c=bu(a,s).getContext("2d"),d=o&&bu(a,s).getContext("2d");n.forEach(O=>mv(l,O,!1)),mv(c,t,!1),o&&mv(d,t,!0);const h=z_(l,a,s),p=z_(c,a,s),y=o&&z_(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,w,_,A,$,C,D,T;for(w=0;w<s;++w)for(S=0;S<a;++S)$=w*a+S,C=h[$]&R_,T=p[$]&R_,D=o&&y[$]&R_,(C||D||T)&&(_=e(S),A=e(w),!r&&(C||T)&&v.set(_,A),o&&(C||D)&&b.set(_,A));return[v,b]}function z_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function mv(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>mv(e,a.items,n))}):dr[i].draw(e,{items:n?t.map(Gpe):t})}function Gpe(e){const t=Dx(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Fs=5,si=31,k0=32,au=new Uint32Array(k0+1),Zr=new Uint32Array(k0+1);Zr[0]=0;au[0]=~Zr[0];for(let e=1;e<=k0;++e)Zr[e]=Zr[e-1]<<1|1,au[e]=~Zr[e];function Ype(e,t){const n=new Uint32Array(~~((e*t+k0)/k0));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Fs]&1<<(o&si)},set:(a,s)=>{const o=s*e+a;i(o>>>Fs,1<<(o&si))},clear:(a,s)=>{const o=s*e+a;r(o>>>Fs,~(1<<(o&si)))},getRange:(a,s,o,l)=>{let c=l,d,h,p,y;for(;c>=s;--c)if(d=c*e+a,h=c*e+o,p=d>>>Fs,y=h>>>Fs,p===y){if(n[p]&au[d&si]&Zr[(h&si)+1])return!0}else{if(n[p]&au[d&si]||n[y]&Zr[(h&si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let c,d,h,p,y;for(;s<=l;++s)if(c=s*e+a,d=s*e+o,h=c>>>Fs,p=d>>>Fs,h===p)i(h,au[c&si]&Zr[(d&si)+1]);else for(i(h,au[c&si]),i(p,Zr[(d&si)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let c,d,h,p,y;for(;s<=l;++s)if(c=s*e+a,d=s*e+o,h=c>>>Fs,p=d>>>Fs,h===p)r(h,Zr[c&si]|au[(d&si)+1]);else for(r(h,Zr[c&si]),r(p,au[(d&si)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Xpe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>Ype(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Vpe(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,c=s.datum.fontSize,d=sr.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,w,_;for(let A=0;A<l;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,w=(v+b)/2,_=Math.abs(y-p+b-v),_>=h&&(h=_,s.x=S,s.y=w);return S=d/2,w=c/2,p=s.x-S,y=s.x+S,v=s.y-w,b=s.y+w,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function Ub(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function gu(e,t,n,i,r,a,s,o){const l=r*a/(i*2),c=e(t-l),d=e(t+l),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(c,h,d,p)||s.getRange(c,h,d,p)||o&&o.getRange(c,h,d,p)}function Wpe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(c,d,h,p,y){const v=e.invert(c),b=e.invert(d);let S=h,w=a,_;if(!Ub(v,b,p,y,r,a)&&!gu(e,v,b,y,p,S,s,o)&&!gu(e,v,b,y,p,y,s,null)){for(;w-S>=1;)_=(S+w)/2,gu(e,v,b,y,p,_,s,o)?w=_:S=_;if(S>h)return[v,b,S,!0]}}return function(c){const d=c.datum.datum.items[i].items,h=d.length,p=c.datum.fontSize,y=sr.width(c.datum,c.datum.text);let v=n?p:0,b=!1,S=!1,w=0,_,A,$,C,D,T,O,R,L,z,H,U,P,B,N,q,Y;for(let ee=0;ee<h;++ee){for(_=d[ee].x,$=d[ee].y,A=d[ee].x2===void 0?_:d[ee].x2,C=d[ee].y2===void 0?$:d[ee].y2,_>A&&(Y=_,_=A,A=Y),$>C&&(Y=$,$=C,C=Y),L=e(_),H=e(A),z=~~((L+H)/2),U=e($),B=e(C),P=~~((U+B)/2),O=z;O>=L;--O)for(R=P;R>=U;--R)q=l(O,R,v,y,p),q&&([c.x,c.y,v,b]=q);for(O=z;O<=H;++O)for(R=P;R<=B;++R)q=l(O,R,v,y,p),q&&([c.x,c.y,v,b]=q);!b&&!n&&(N=Math.abs(A-_+C-$),D=(_+A)/2,T=($+C)/2,N>=w&&!Ub(D,T,y,p,r,a)&&!gu(e,D,T,p,y,p,s,null)&&(w=N,c.x=D,c.y=T,S=!0))}return b||S?(D=y/2,T=p/2,s.setRange(e(c.x-D),e(c.y-T),e(c.x+D),e(c.y+T)),c.align="center",c.baseline="middle",!0):!1}}const Qpe=[-1,-1,1,1],Zpe=[-1,1,-1,1];function Kpe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(c){const d=c.datum.datum.items[i].items,h=d.length,p=c.datum.fontSize,y=sr.width(c.datum,c.datum.text),v=[];let b=n?p:0,S=!1,w=!1,_=0,A,$,C,D,T,O,R,L,z,H,U,P;for(let B=0;B<h;++B){for(A=d[B].x,C=d[B].y,$=d[B].x2===void 0?A:d[B].x2,D=d[B].y2===void 0?C:d[B].y2,v.push([e((A+$)/2),e((C+D)/2)]);v.length;)if([R,L]=v.pop(),!(s.get(R,L)||o.get(R,L)||l.get(R,L))){l.set(R,L);for(let N=0;N<4;++N)T=R+Qpe[N],O=L+Zpe[N],l.outOfBounds(T,O,T,O)||v.push([T,O]);if(T=e.invert(R),O=e.invert(L),z=b,H=a,!Ub(T,O,y,p,r,a)&&!gu(e,T,O,p,y,z,s,o)&&!gu(e,T,O,p,y,p,s,null)){for(;H-z>=1;)U=(z+H)/2,gu(e,T,O,p,y,U,s,o)?H=U:z=U;z>b&&(c.x=T,c.y=O,b=z,S=!0)}}!S&&!n&&(P=Math.abs($-A+D-C),T=(A+$)/2,O=(C+D)/2,P>=_&&!Ub(T,O,y,p,r,a)&&!gu(e,T,O,p,y,p,s,null)&&(_=P,c.x=T,c.y=O,w=!0))}return S||w?(T=y/2,O=p/2,s.setRange(e(c.x-T),e(c.y-O),e(c.x+T),e(c.y+O)),c.align="center",c.baseline="middle",!0):!1}}const Jpe=["right","center","left"],e0e=["bottom","middle","top"];function t0e(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(c){const d=c.boundary,h=c.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=c.textWidth??0,y,v,b,S,w,_,A,$,C,D,T,O,R,L,z;for(let H=0;H<l;++H){if(y=(n[H]&3)-1,v=(n[H]>>>2&3)-1,b=y===0&&v===0||i[H]<0,S=y&&v?Math.SQRT1_2:1,w=i[H]<0?-1:1,_=d[1+y]+i[H]*y*S,T=d[4+v]+w*h*v/2+i[H]*v*S,$=T-h/2,C=T+h/2,O=e(_),L=e($),z=e(C),!p)if(F8(O,O,L,z,s,o,_,_,$,C,d,b))p=sr.width(c.datum,c.datum.text);else continue;if(D=_+w*p*y/2,_=D-p/2,A=D+p/2,O=e(_),R=e(A),F8(O,R,L,z,s,o,_,A,$,C,d,b))return c.x=y?y*w<0?A:_:D,c.y=v?v*w<0?C:$:T,c.align=Jpe[y*w+1],c.baseline=e0e[v*w+1],s.setRange(O,L,R,z),!0}return!1}}function F8(e,t,n,i,r,a,s,o,l,c,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const F_=0,L_=4,U_=8,B_=0,j_=1,P_=2,n0e={"top-left":F_+B_,top:F_+j_,"top-right":F_+P_,left:L_+B_,middle:L_+j_,right:L_+P_,"bottom-left":U_+B_,bottom:U_+j_,"bottom-right":U_+P_},i0e={naive:Vpe,"reduced-search":Wpe,floodfill:Kpe};function r0e(e,t,n,i,r,a,s,o,l,c,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=a0e(i,h),y=s0e(r,h),v=o0e(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,S=b==="area",w=u0e(v,b,o,l),_=c===null||c===1/0,A=S&&d==="naive";let $=-1,C=-1;const D=e.map(L=>{const z=_?sr.width(L,L.text):void 0;return $=Math.max($,z),C=Math.max(C,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:w(L),textWidth:z}});c=c===null||c===1/0?Math.max($,C)+Math.max(...i):c;const T=Xpe(t[0],t[1],c);let O;if(!A){n&&D.sort((H,U)=>n(H.datum,U.datum));let L=!1;for(let H=0;H<y.length&&!L;++H)L=y[H]===5||p[H]<0;const z=(v&&s||S)&&e.map(H=>H.datum);O=a.length||z?Hpe(T,z||[],a,L,S):qpe(T,s&&D)}const R=S?i0e[d](T,O,s,l):t0e(T,O,y,p);return D.forEach(L=>L.opacity=+R(L)),D}function a0e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function s0e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=n0e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function o0e(e){return e&&e.mark&&e.mark.marktype}function u0e(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const iC=["x","y","opacity","align","baseline"],Bq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function pD(e){J.call(this,null,e)}pD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Bq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:iC.length,default:iC}]};Ipe(pD,J,{transform(e,t){function n(a){const s=e[a];return jpe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&pv("Size parameter should be specified as a [width, height] array.");const r=e.as||iC;return r0e(t.materialize(t.SOURCE).source||[],e.size,e.sort,z8(e.offset==null?1:e.offset),z8(e.anchor||Bq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const l0e=Object.freeze(Object.defineProperty({__proto__:null,label:pD},Symbol.toStringTag,{value:"Module"}));function Ch(e,t,n){return e.fields=t||[],e.fname=n,e}function gd(e){return e==null?null:e.fname}function c0e(e){return e.length===1?f0e(e[0]):d0e(e)}const f0e=e=>function(t){return t[e]},d0e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function yv(e){throw Error(e)}function h0e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||yv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&yv("Access path missing closing bracket: "+e),i&&yv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function g0e(e,t,n){const i=h0e(e);return e=i.length===1?i[0]:e,Ch(c0e(i),[e],e)}g0e("id");Ch(e=>e,[],"identity");Ch(()=>0,[],"zero");Ch(()=>1,[],"one");Ch(()=>!0,[],"true");Ch(()=>!1,[],"false");function p0e(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function m0e(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function y0e(e,t){return Object.hasOwn(e,t)}function jq(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),p0e(i,n)}function Pq(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,c;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),c=r[l],c||(r[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function mD(e){J.call(this,null,e)}mD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};jq(mD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Pq(i,e.groupby),a=(e.groupby||[]).map(gd),s=a.length,o=e.as||[gd(e.x),gd(e.y)],l=[];r.forEach(c=>{FU(c,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=c.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],l.push(st(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const rC={constant:YM,linear:XM,log:OU,exp:NU,pow:RU,quad:VM,poly:zU},v0e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function yD(e){J.call(this,null,e)}yD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(rC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};jq(yD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Pq(i,e.groupby),a=(e.groupby||[]).map(gd),s=e.method||"linear",o=e.order==null?3:e.order,l=v0e(s,o),c=e.as||[gd(e.x),gd(e.y)],d=rC[s],h=[];let p=e.extent;y0e(rC,s)||yv("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(st({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||m0e(y,e.x),w=_=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[c[0]]=_[0],A[c[1]]=_[1],h.push(st(A))};s==="linear"||s==="constant"?S.forEach(_=>w([_,b.predict(_)])):Lx(b.predict,S,25,200).forEach(w)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const b0e=Object.freeze(Object.defineProperty({__proto__:null,loess:mD,regression:yD},Symbol.toStringTag,{value:"Module"}));function Mh(e,t,n){return e.fields=t||[],e.fname=n,e}function x0e(e){return e.length===1?S0e(e[0]):E0e(e)}const S0e=e=>function(t){return t[e]},E0e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function I_(e){throw Error(e)}function w0e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||I_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&I_("Access path missing closing bracket: "+e),i&&I_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function _0e(e,t,n){const i=w0e(e);return e=i.length===1?i[0]:e,Mh(x0e(i),[e],e)}_0e("id");Mh(e=>e,[],"identity");Mh(()=>0,[],"zero");Mh(()=>1,[],"one");Mh(()=>!0,[],"true");Mh(()=>!1,[],"false");function A0e(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function $0e(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),A0e(i,n)}const io=11102230246251565e-32,Vn=134217729,C0e=(3+8*io)*io;function q_(e,t,n,i,r){let a,s,o,l,c=t[0],d=i[0],h=0,p=0;d>c==d>-c?(a=c,c=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>c==d>-c?(s=c+a,o=a-(s-c),c=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>c==d>-c?(s=a+c,l=s-a,o=a-(s-l)+(c-l),c=t[++h]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+c,l=s-a,o=a-(s-l)+(c-l),c=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function M0e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function vm(e){return new Float64Array(e)}const T0e=(3+16*io)*io,D0e=(2+12*io)*io,k0e=(9+64*io)*io*io,Gf=vm(4),L8=vm(8),U8=vm(12),B8=vm(16),oi=vm(4);function O0e(e,t,n,i,r,a,s){let o,l,c,d,h,p,y,v,b,S,w,_,A,$,C,D,T,O;const R=e-r,L=n-r,z=t-a,H=i-a;$=R*H,p=Vn*R,y=p-(p-R),v=R-y,p=Vn*H,b=p-(p-H),S=H-b,C=v*S-($-y*b-v*b-y*S),D=z*L,p=Vn*z,y=p-(p-z),v=z-y,p=Vn*L,b=p-(p-L),S=L-b,T=v*S-(D-y*b-v*b-y*S),w=C-T,h=C-w,Gf[0]=C-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,Gf[1]=A-(w+h)+(h-D),O=_+w,h=O-_,Gf[2]=_-(O-h)+(w-h),Gf[3]=O;let U=M0e(4,Gf),P=D0e*s;if(U>=P||-U>=P||(h=e-R,o=e-(R+h)+(h-r),h=n-L,c=n-(L+h)+(h-r),h=t-z,l=t-(z+h)+(h-a),h=i-H,d=i-(H+h)+(h-a),o===0&&l===0&&c===0&&d===0)||(P=k0e*s+C0e*Math.abs(U),U+=R*d+H*o-(z*c+L*l),U>=P||-U>=P))return U;$=o*H,p=Vn*o,y=p-(p-o),v=o-y,p=Vn*H,b=p-(p-H),S=H-b,C=v*S-($-y*b-v*b-y*S),D=l*L,p=Vn*l,y=p-(p-l),v=l-y,p=Vn*L,b=p-(p-L),S=L-b,T=v*S-(D-y*b-v*b-y*S),w=C-T,h=C-w,oi[0]=C-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const B=q_(4,Gf,4,oi,L8);$=R*d,p=Vn*R,y=p-(p-R),v=R-y,p=Vn*d,b=p-(p-d),S=d-b,C=v*S-($-y*b-v*b-y*S),D=z*c,p=Vn*z,y=p-(p-z),v=z-y,p=Vn*c,b=p-(p-c),S=c-b,T=v*S-(D-y*b-v*b-y*S),w=C-T,h=C-w,oi[0]=C-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const N=q_(B,L8,4,oi,U8);$=o*d,p=Vn*o,y=p-(p-o),v=o-y,p=Vn*d,b=p-(p-d),S=d-b,C=v*S-($-y*b-v*b-y*S),D=l*c,p=Vn*l,y=p-(p-l),v=l-y,p=Vn*c,b=p-(p-c),S=c-b,T=v*S-(D-y*b-v*b-y*S),w=C-T,h=C-w,oi[0]=C-(w+h)+(h-T),_=$+w,h=_-$,A=$-(_-h)+(w-h),w=A-D,h=A-w,oi[1]=A-(w+h)+(h-D),O=_+w,h=O-_,oi[2]=_-(O-h)+(w-h),oi[3]=O;const q=q_(N,U8,4,oi,B8);return B8[q-1]}function Cy(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,c=Math.abs(s+o);return Math.abs(l)>=T0e*c?l:-O0e(e,t,n,i,r,a,c)}const j8=Math.pow(2,-52),My=new Uint32Array(512);class Bb{static from(t,n=L0e,i=U0e){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new Bb(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,c=-1/0,d=-1/0;for(let R=0;R<s;R++){const L=t[2*R],z=t[2*R+1];L<o&&(o=L),z<l&&(l=z),L>c&&(c=L),z>d&&(d=z),this._ids[R]=R}const h=(o+c)/2,p=(l+d)/2;let y,v,b;for(let R=0,L=1/0;R<s;R++){const z=H_(h,p,t[2*R],t[2*R+1]);z<L&&(y=R,L=z)}const S=t[2*y],w=t[2*y+1];for(let R=0,L=1/0;R<s;R++){if(R===y)continue;const z=H_(S,w,t[2*R],t[2*R+1]);z<L&&z>0&&(v=R,L=z)}let _=t[2*v],A=t[2*v+1],$=1/0;for(let R=0;R<s;R++){if(R===y||R===v)continue;const L=z0e(S,w,_,A,t[2*R],t[2*R+1]);L<$&&(b=R,$=L)}let C=t[2*b],D=t[2*b+1];if($===1/0){for(let z=0;z<s;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];sd(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let L=0;for(let z=0,H=-1/0;z<s;z++){const U=this._ids[z],P=this._dists[U];P>H&&(R[L++]=U,H=P)}this.hull=R.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Cy(S,w,_,A,C,D)<0){const R=v,L=_,z=A;v=b,_=C,A=D,b=R,C=L,D=z}const T=F0e(S,w,_,A,C,D);this._cx=T.x,this._cy=T.y;for(let R=0;R<s;R++)this._dists[R]=H_(t[2*R],t[2*R+1],T.x,T.y);sd(this._ids,this._dists,0,s-1),this._hullStart=y;let O=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,w)]=y,a[this._hashKey(_,A)]=v,a[this._hashKey(C,D)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let R=0,L,z;R<this._ids.length;R++){const H=this._ids[R],U=t[2*H],P=t[2*H+1];if(R>0&&Math.abs(U-L)<=j8&&Math.abs(P-z)<=j8||(L=U,z=P,H===y||H===v||H===b))continue;let B=0;for(let F=0,V=this._hashKey(U,P);F<this._hashSize&&(B=a[(V+F)%this._hashSize],!(B!==-1&&B!==i[B]));F++);B=n[B];let N=B,q;for(;q=i[N],Cy(U,P,t[2*N],t[2*N+1],t[2*q],t[2*q+1])>=0;)if(N=q,N===B){N=-1;break}if(N===-1)continue;let Y=this._addTriangle(N,H,i[N],-1,-1,r[N]);r[H]=this._legalize(Y+2),r[N]=Y,O++;let ee=i[N];for(;q=i[ee],Cy(U,P,t[2*ee],t[2*ee+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(ee,H,q,r[H],-1,r[ee]),r[H]=this._legalize(Y+2),i[ee]=ee,O--,ee=q;if(N===B)for(;q=n[N],Cy(U,P,t[2*q],t[2*q+1],t[2*N],t[2*N+1])<0;)Y=this._addTriangle(q,H,N,-1,r[N],r[q]),this._legalize(Y+2),r[q]=Y,i[N]=N,O--,N=q;this._hullStart=n[H]=N,i[N]=n[ee]=H,i[H]=ee,a[this._hashKey(U,P)]=H,a[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(O);for(let R=0,L=this._hullStart;R<O;R++)this.hull[R]=L,L=i[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(N0e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=My[--a];continue}const c=o-o%3,d=l+(t+1)%3,h=c+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(R0e(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const w=i[h];if(w===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,w),this._link(o,i[s]),this._link(s,h);const _=c+(o+1)%3;a<My.length&&(My[a++]=_)}else{if(a===0)break;t=My[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function N0e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function H_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function R0e(e,t,n,i,r,a,s,o){const l=e-s,c=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=l*l+c*c,b=d*d+h*h,S=p*p+y*y;return l*(h*S-b*y)-c*(d*S-b*p)+v*(d*y-h*p)<0}function z0e(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,c=a-t,d=s*s+o*o,h=l*l+c*c,p=.5/(s*c-o*l),y=(c*d-o*h)*p,v=(s*h-l*d)*p;return y*y+v*v}function F0e(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,c=a-t,d=s*s+o*o,h=l*l+c*c,p=.5/(s*c-o*l),y=e+(c*d-o*h)*p,v=t+(s*h-l*d)*p;return{x:y,y:v}}function sd(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;cp(e,r,a),t[e[n]]>t[e[i]]&&cp(e,n,i),t[e[a]]>t[e[i]]&&cp(e,a,i),t[e[n]]>t[e[a]]&&cp(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;cp(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(sd(e,t,a,i),sd(e,t,n,s-1)):(sd(e,t,n,s-1),sd(e,t,a,i))}}function cp(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function L0e(e){return e[0]}function U0e(e){return e[1]}const P8=1e-6;class Xl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>P8||Math.abs(this._y1-a)>P8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class aC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let B0e=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,w=i.length,_,A;b<w;b+=3,S+=2){const $=i[b]*2,C=i[b+1]*2,D=i[b+2]*2,T=t[$],O=t[$+1],R=t[C],L=t[C+1],z=t[D],H=t[D+1],U=R-T,P=L-O,B=z-T,N=H-O,q=(U*N-P*B)*2;if(Math.abs(q)<1e-9){if(a===void 0){a=s=0;for(const ee of n)a+=t[ee*2],s+=t[ee*2+1];a/=n.length,s/=n.length}const Y=1e9*Math.sign((a-T)*N-(s-O)*B);_=(T+z)/2-Y*N,A=(O+H)/2+Y*B}else{const Y=1/q,ee=U*U+P*P,F=B*B+N*N;_=T+(N*ee-P*F)*Y,A=O+(U*F-B*ee)*Y}o[S]=_,o[S+1]=A}let l=n[n.length-1],c,d=l*4,h,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],c=d,h=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[c+2]=r[d]=y-v,r[c+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Xl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],w=s[v],_=s[v+1];this._renderSegment(b,S,w,_,t)}let l,c=a[a.length-1];for(let d=0;d<a.length;++d){l=c,c=a[d];const h=Math.floor(r[c]/3)*2,p=s[h],y=s[h+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Xl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Xl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new aC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const c=Math.floor(l/3);if(o.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],c,d=this._regioncode(o,l),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],c=d,d=this._regioncode(o,l),c===0&&d===0)h=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,S,w,_;if(c===0){if((v=this._clipSegment(a,s,o,l,c,d))===null)continue;[b,S,w,_]=v}else{if((v=this._clipSegment(o,l,a,s,d,c))===null)continue;[w,_,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(w,_),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(w,_):r=[w,_]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,c,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):d&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=c,a=this._regioncode(t,n)):(i=l,r=c,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let c=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);c<d;c+=2)h=p,p=this._edgecode(o[c],o[c+1]),h&&p&&(c=this._edge(t,h,p,o,c),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const j0e=2*Math.PI,Yf=Math.pow;function P0e(e){return e[0]}function I0e(e){return e[1]}function q0e(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function H0e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class vD{static from(t,n=P0e,i=I0e,r){return new vD("length"in t?G0e(t,n,i,r):Float64Array.from(Y0e(t,n,i,r)))}constructor(t){this._delaunator=new Bb(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&q0e(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=H0e(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new Bb(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,c=r.length;l<c;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new B0e(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=n[t];if(l===-1)return;let c=l,d=-1;do{if(yield d=s[c],c=c%3===2?c-2:c+1,s[c]!==t)return;if(c=a[c],c===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let d=t,h=Yf(n-c[t*2],2)+Yf(i-c[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=Yf(n-c[v*2],2)+Yf(i-c[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&Yf(n-c[y*2],2)+Yf(i-c[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Xl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const c=a[s]*2,d=a[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Xl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,j0e)}return i&&i.value()}renderHull(t){const n=t==null?t=new Xl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new aC;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Xl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new aC;return this.renderTriangle(t,n),n.value()}}function G0e(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Y0e(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function bD(e){J.call(this,null,e)}bD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const X0e=[-1e5,-1e5,1e5,1e5];$0e(bD,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:X0e;const a=this.value=vD.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!W0e(l)?V0e(l):null}return t.reflow(e.modified()).modifies(n)}});function V0e(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function W0e(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Q0e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:bD},Symbol.toStringTag,{value:"Module"}));function Th(e,t,n){return e.fields=t||[],e.fname=n,e}function Z0e(e){return e.length===1?K0e(e[0]):J0e(e)}const K0e=e=>function(t){return t[e]},J0e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function vv(e){throw Error(e)}function eme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||vv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&vv("Access path missing closing bracket: "+e),i&&vv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function tme(e,t,n){const i=eme(e);return e=i.length===1?i[0]:e,Th(Z0e(i),[e],e)}tme("id");Th(e=>e,[],"identity");Th(()=>0,[],"zero");Th(()=>1,[],"one");Th(()=>!0,[],"true");Th(()=>!1,[],"false");function sC(e){return typeof e=="function"}function nme(e){return sC(e)?e:()=>e}function ime(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function rme(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function ame(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ime(i,n)}var G_=Math.PI/180,Ip=64,bv=2048;function sme(){var e=[256,256],t,n,i,r,a,s,o,l=Iq,c=[],d=Math.random,h={};h.layout=function(){for(var v=p(bu()),b=dme((e[0]>>5)*e[1]),S=null,w=c.length,_=-1,A=[],$=c.map(D=>({text:t(D),font:n(D),style:r(D),weight:a(D),rotate:s(D),size:~~(i(D)+1e-14),padding:o(D),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:D})).sort((D,T)=>T.size-D.size);++_<w;){var C=$[_];C.x=e[0]*(d()+.5)>>1,C.y=e[1]*(d()+.5)>>1,ome(v,C,$,_),C.hasText&&y(b,C,S)&&(A.push(C),S?lme(S,C):S=[{x:C.x+C.x0,y:C.y+C.y0},{x:C.x+C.x1,y:C.y+C.y1}],C.x-=e[0]>>1,C.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ip<<5)/b,v.height=bv/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var w=b.x,_=b.y,A=Math.hypot(e[0],e[1]),$=l(e),C=d()<.5?1:-1,D=-C,T,O,R;(T=$(D+=C))&&(O=~~T[0],R=~~T[1],!(Math.min(Math.abs(O),Math.abs(R))>=A));)if(b.x=w+O,b.y=_+R,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!ume(b,v,e[0]))&&(!S||cme(b,S))){for(var L=b.sprite,z=b.width>>5,H=e[0]>>5,U=b.x-(z<<4),P=U&127,B=32-P,N=b.y1-b.y0,q=(b.y+b.y0)*H+(U>>5),Y,ee=0;ee<N;ee++){Y=0;for(var F=0;F<=z;F++)v[q+F]|=Y<<B|(F<z?(Y=L[ee*z+F])>>>P:0);q+=H}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(c=v,h):c},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=_l(v),h):n},h.fontStyle=function(v){return arguments.length?(r=_l(v),h):r},h.fontWeight=function(v){return arguments.length?(a=_l(v),h):a},h.rotate=function(v){return arguments.length?(s=_l(v),h):s},h.text=function(v){return arguments.length?(t=_l(v),h):t},h.spiral=function(v){return arguments.length?(l=hme[v]||v,h):l},h.fontSize=function(v){return arguments.length?(i=_l(v),h):i},h.padding=function(v){return arguments.length?(o=_l(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function ome(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ip<<5)/a,bv/a);var s=0,o=0,l=0,c=n.length,d,h,p,y,v;for(--i;++i<c;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*G_),S=Math.cos(t.rotate*G_),w=d*S,_=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(w+$),Math.abs(w-$))+31>>5<<5,p=~~Math.max(Math.abs(_+A),Math.abs(_-A))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=Ip<<5&&(s=0,o+=l,l=0),o+p>=bv)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*G_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var C=r.getImageData(0,0,(Ip<<5)/a,bv/a).data,D=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)D[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var T=0,O=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var R=h*v+(y>>5),L=C[(o+v)*(Ip<<5)+(s+y)<<2]?1<<31-y%32:0;D[R]|=L,T|=L}T?O=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+O,t.sprite=D.slice(0,(t.y1-t.y0)*h)}}}function ume(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),d,h=0;h<l;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[c+p])return!0;c+=n}return!1}function lme(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function cme(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Iq(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function fme(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function dme(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function _l(e){return typeof e=="function"?e:function(){return e}}var hme={archimedean:Iq,rectangular:fme};const qq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],gme=["text","font","rotate","fontSize","fontStyle","fontWeight"];function xD(e){J.call(this,sme(),e)}xD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qq}]};ame(xD,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&vv("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return sC(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||gme.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||qq;let o=e.fontSize||14,l;if(sC(o)?l=e.fontSizeRange:o=nme(o),l){const v=o,b=it("sqrt")().domain(rme(r,v)).range(l);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const c=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Rr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=c.length;for(let v=0,b,S;v<y;++v)b=c[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const pme=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:xD},Symbol.toStringTag,{value:"Module"}));function Dh(e,t,n){return e.fields=t||[],e.fname=n,e}function mme(e){return e.length===1?yme(e[0]):vme(e)}const yme=e=>function(t){return t[e]},vme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Y_(e){throw Error(e)}function bme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Y_("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Y_("Access path missing closing bracket: "+e),i&&Y_("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function xme(e,t,n){const i=bme(e);return e=i.length===1?i[0]:e,Dh(mme(i),[e],e)}xme("id");Dh(e=>e,[],"identity");Dh(()=>0,[],"zero");Dh(()=>1,[],"one");Dh(()=>!0,[],"true");Dh(()=>!1,[],"false");function Sme(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Hq(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Sme(i,n)}const Eme=e=>new Uint8Array(e),wme=e=>new Uint16Array(e),n0=e=>new Uint32Array(e);function _me(){let e=8,t=[],n=n0(0),i=Ty(0,e),r=Ty(0,e);return{data:()=>t,seen:()=>n=Ame(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,c;s<l;++s)c=a[s],c._index=o++,t.push(c)},remove(a,s){const o=t.length,l=Array(o-a),c=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)l[h]=t[h],c[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?c[h]=-1:(c[h]=p,i[p]=i[h],r[p]=r[h],l[p]=d,d._index=p++),i[h]=0;return t=l,c},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=Ty(a,e,i),r=Ty(a,e))}}}function Ame(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ty(e,t,n){const i=(t<257?Eme:t<65537?wme:n0)(e);return n&&i.set(n),i}function I8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,c=o[0],d=o[1],h=l.length;let p;for(p=0;p<c;++p)a[l[p]]|=i;for(p=d;p<h;++p)a[l[p]]|=i;return s}}}function q8(){let e=n0(0),t=[],n=0;function i(o,l,c){if(!l.length)return[];const d=n,h=l.length,p=n0(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(l[S]),p[S]=S;if(y=$me(y,p),d)v=t,b=e,t=Array(d+h),e=n0(d+h),Cme(c,v,b,d,y,p,h,t,e);else{if(c>0)for(S=0;S<h;++S)p[S]+=c;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,l){const c=n;let d,h,p;for(h=0;!l[e[h]]&&h<c;++h);for(p=h;h<c;++h)l[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=c-o}function a(o){for(let l=0,c=n;l<c;++l)e[l]=o[e[l]]}function s(o,l){let c;return l?c=l.length:(l=t,c=n),[PJ(l,o[0],0,c),Au(l,o[1],0,c)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function $me(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),HJ(e,t)}function Cme(e,t,n,i,r,a,s,o,l){let c=0,d=0,h;for(h=0;c<i&&d<s;++h)t[c]<r[d]?(o[h]=t[c],l[h]=n[c++]):(o[h]=r[d],l[h]=a[d++]+e);for(;c<i;++c,++h)o[h]=t[c],l[h]=n[c];for(;d<s;++d,++h)o[h]=r[d],l[h]=a[d]+e}function SD(e){J.call(this,_me(),e),this._indices=null,this._dims=null}SD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Hq(SD,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,c;for(;o<s;++o)l=n[o].fname,c=r[l]||(r[l]=q8()),a.push(I8(c,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),c=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,w,_,A,$,C,D,T;if(c.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for($={},_=t.mod,C=0,D=_.length;C<D;++C)$[_[C]._index]=1;for(C=0;C<y;++C)T=i[C],(!s[C]||e.modified("fields",C)||t.modified(T.fields))&&(w=T.fname,(b=v[w])||(a[w]=S=q8(),v[w]=b=S.insert(T,t.source,0)),s[C]=I8(S,C,r[C]).onAdd(b,l));for(C=0,D=o.data().length;C<D;++C)A[C]||(c[C]!==l[C]?h.push(C):$[C]&&l[C]!==d&&p.push(C));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},c=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),w=r.prev(),_=r.all();for(y=0;y<h;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)w[p]=_,S[p]!==_&&c.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,c;for(o=0,l=s.length;o<l;++o)c=s[o]._index,r[c]!==a&&n.push(c)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},c=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&c.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,c;for(n.filters=0,c=0;c<s;++c)e.modified("query",c)&&(l=c,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(c=0,o=0;c<s;++c)e.modified("query",c)&&(o|=i[c].one,this.incrementAll(i[c],r[c],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),c=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=c[0],v=c[1],b=e.one;let S,w,_;if(h<y)for(S=h,w=Math.min(y,p);S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(h>y)for(S=y,w=Math.min(h,v);S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;if(p>v)for(S=Math.max(h,v),w=p;S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(p<v)for(S=Math.max(y,p),w=v;S<w;++S)_=l[S],a[_]!==n&&(o[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),c=l[0],d=l[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(c<h)for(v=c,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(c>h)for(v=h,b=Math.min(c,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(c,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function ED(e){J.call(this,null,e)}ED.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Hq(ED,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),c=d=>o[d]&n?null:s[d];return a.filter(a.MOD,c),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^l[d]&n))?s[d]:null})):(a.filter(a.ADD,c),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>c(d._index))}});const Mme=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:SD,resolvefilter:ED},Symbol.toStringTag,{value:"Module"}));function kh(e,t,n){return e.fields=t||[],e.fname=n,e}function Tme(e){return e.length===1?Dme(e[0]):kme(e)}const Dme=e=>function(t){return t[e]},kme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Ya(e){throw Error(e)}function Ome(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Ya("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Ya("Access path missing closing bracket: "+e),i&&Ya("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Nme(e,t,n){const i=Ome(e);return e=i.length===1?i[0]:e,kh(Tme(i),[e],e)}Nme("id");kh(e=>e,[],"identity");kh(()=>0,[],"zero");kh(()=>1,[],"one");const Rme=kh(()=>!0,[],"true");kh(()=>!1,[],"false");var Bc=Array.isArray;function bm(e){return e===Object(e)}function zme(e){return e!=null?Bc(e)?e:[e]:[]}function Fme(e){return typeof e=="function"}function H8(e){return Fme(e)?e:()=>e}function Lme(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function jb(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function wD(e,t){return Object.hasOwn(e,t)}function Ume(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),jb(i,n)}function Gq(e){return Object.prototype.toString.call(e)==="[object Date]"}function Pb(e){return typeof e=="string"}function Yq(e){return Bc(e)?"["+e.map(Yq)+"]":bm(e)||Pb(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Bme(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function Oh(e,t,n){return e.fields=t||[],e.fname=n,e}function jme(e){return e.length===1?Pme(e[0]):Ime(e)}const Pme=e=>function(t){return t[e]},Ime=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ro(e){throw Error(e)}function qme(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ro("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ro("Access path missing closing bracket: "+e),i&&ro("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Xq(e,t,n){const i=qme(e);return e=i.length===1?i[0]:e,Oh(jme(i),[e],e)}Xq("id");const _D=Oh(e=>e,[],"identity");Oh(()=>0,[],"zero");Oh(()=>1,[],"one");const Vq=Oh(()=>!0,[],"true");Oh(()=>!1,[],"false");var po=Array.isArray;function Ib(e){return e===Object(e)}function zu(e){return e[e.length-1]}function AD(e){return e==null||e===""?null:+e}const Wq=e=>t=>e*Math.exp(t),Qq=e=>t=>Math.log(e*t),Zq=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Kq=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,qb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function y2(e,t,n,i){const r=n(e[0]),a=n(zu(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function Hme(e,t){return y2(e,t,AD,_D)}function Gme(e,t){var n=Math.sign(e[0]);return y2(e,t,Qq(n),Wq(n))}function Yme(e,t,n){return y2(e,t,qb(n),qb(1/n))}function Xme(e,t,n){return y2(e,t,Zq(n),Kq(n))}function v2(e,t,n,i,r){const a=i(e[0]),s=i(zu(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function Vme(e,t,n){return v2(e,t,n,AD,_D)}function Wme(e,t,n){const i=Math.sign(e[0]);return v2(e,t,n,Qq(i),Wq(i))}function Qme(e,t,n,i){return v2(e,t,n,qb(i),qb(1/i))}function Zme(e,t,n,i){return v2(e,t,n,Zq(i),Kq(i))}function Kme(e){return 1+~~(new Date(e).getMonth()/3)}function Jme(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Hb(e){return e!=null?po(e)?e:[e]:[]}function e1e(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Jq(e){return typeof e=="function"}const t1e=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function $D(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function n1e(e,t){let n=0,i,r,a,s;if(e&&(i=e.length)){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function b2(e,t){return Object.hasOwn(e,t)}function i1e(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=zu(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const d=Math.abs(l-t);return c<d&&c<=s?i:d<=s?r:a}function r1e(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function a1e(e){return typeof e=="boolean"}function eH(e){return Object.prototype.toString.call(e)==="[object Date]"}function tH(e){return typeof e=="number"}function nH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Nh(e){return typeof e=="string"}function s1e(e,t){const n=e[0],i=zu(e),r=+t;return r?r===1?i:n+r*(i-n):n}function Dy(e,t){let n="";for(;--t>=0;)n+=e;return n}function o1e(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?Dy(r,s)+a:i==="center"?Dy(r,~~(s/2))+a+Dy(r,Math.ceil(s/2)):a+Dy(r,s)}function u1e(e){return e&&zu(e)-e[0]||0}function O0(e){return po(e)?"["+e.map(O0)+"]":Ib(e)||Nh(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function l1e(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const c1e=e=>tH(e)||eH(e)?e:Date.parse(e);function f1e(e,t){return t=t||c1e,e==null||e===""?null:t(e)}function d1e(e){return e==null||e===""?null:e+""}function h1e(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Rh(e,t,n){return e.fields=t||[],e.fname=n,e}function g1e(e){return e.length===1?p1e(e[0]):m1e(e)}const p1e=e=>function(t){return t[e]},m1e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function na(e){throw Error(e)}function y1e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||na("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&na("Access path missing closing bracket: "+e),i&&na("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function v1e(e,t,n){const i=y1e(e);return e=i.length===1?i[0]:e,Rh(g1e(i),[e],e)}v1e("id");Rh(e=>e,[],"identity");Rh(()=>0,[],"zero");Rh(()=>1,[],"one");Rh(()=>!0,[],"true");Rh(()=>!1,[],"false");function G8(e){return typeof e=="function"}function ky(e,t){return Object.hasOwn(e,t)}function b1e(e){return typeof e=="string"}function Y8(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}const x1e="RawCode",vc="Literal",S1e="Property",E1e="Identifier",w1e="ArrayExpression",_1e="BinaryExpression",iH="CallExpression",A1e="ConditionalExpression",$1e="LogicalExpression",C1e="MemberExpression",M1e="ObjectExpression",T1e="UnaryExpression";function pa(e){this.type=e}pa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=D1e(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function D1e(e){switch(e.type){case w1e:return e.elements;case _1e:case $1e:return[e.left,e.right];case iH:return[e.callee].concat(e.arguments);case A1e:return[e.test,e.consequent,e.alternate];case C1e:return[e.object,e.property];case M1e:return e.properties;case S1e:return[e.key,e.value];case T1e:return[e.argument];case E1e:case vc:case x1e:default:return[]}}var cs,ye,te,ii,dt,x2=1,xm=2,bc=3,Vu=4,S2=5,jc=6,Di=7,Sm=8,k1e=9;cs={};cs[x2]="Boolean";cs[xm]="<end>";cs[bc]="Identifier";cs[Vu]="Keyword";cs[S2]="Null";cs[jc]="Numeric";cs[Di]="Punctuator";cs[Sm]="String";cs[k1e]="RegularExpression";var O1e="ArrayExpression",N1e="BinaryExpression",R1e="CallExpression",z1e="ConditionalExpression",rH="Identifier",F1e="Literal",L1e="LogicalExpression",U1e="MemberExpression",B1e="ObjectExpression",j1e="Property",P1e="UnaryExpression",wn="Unexpected token %0",I1e="Unexpected number",q1e="Unexpected string",H1e="Unexpected identifier",G1e="Unexpected reserved word",Y1e="Unexpected end of input",oC="Invalid regular expression",X_="Invalid regular expression: missing /",aH="Octal literals are not allowed in strict mode.",X1e="Duplicate data property in object literal not allowed in strict mode",Bn="ILLEGAL",N0="Disabled.",V1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),W1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function E2(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ps(e){return e>=48&&e<=57}function CD(e){return"0123456789abcdefABCDEF".includes(e)}function i0(e){return"01234567".includes(e)}function Q1e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function R0(e){return e===10||e===13||e===8232||e===8233}function Em(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&V1e.test(String.fromCharCode(e))}function Gb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&W1e.test(String.fromCharCode(e))}const Z1e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function sH(){for(;te<ii;){const e=ye.charCodeAt(te);if(Q1e(e)||R0(e))++te;else break}}function uC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<ii&&CD(ye[te])?(i=ye[te++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):tt({},wn,Bn);return String.fromCharCode(r)}function K1e(){var e,t,n,i;for(e=ye[te],t=0,e==="}"&&tt({},wn,Bn);te<ii&&(e=ye[te++],!!CD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&tt({},wn,Bn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function oH(){var e,t;for(e=ye.charCodeAt(te++),t=String.fromCharCode(e),e===92&&(ye.charCodeAt(te)!==117&&tt({},wn,Bn),++te,e=uC("u"),(!e||e==="\\"||!Em(e.charCodeAt(0)))&&tt({},wn,Bn),t=e);te<ii&&(e=ye.charCodeAt(te),!!Gb(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ye.charCodeAt(te)!==117&&tt({},wn,Bn),++te,e=uC("u"),(!e||e==="\\"||!Gb(e.charCodeAt(0)))&&tt({},wn,Bn),t+=e);return t}function J1e(){var e,t;for(e=te++;te<ii;){if(t=ye.charCodeAt(te),t===92)return te=e,oH();if(Gb(t))++te;else break}return ye.slice(e,te)}function eye(){var e,t,n;return e=te,t=ye.charCodeAt(te)===92?oH():J1e(),t.length===1?n=bc:Z1e.hasOwnProperty(t)?n=Vu:t==="null"?n=S2:t==="true"||t==="false"?n=x2:n=bc,{type:n,value:t,start:e,end:te}}function V_(){var e=te,t=ye.charCodeAt(te),n,i=ye[te],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:Di,value:String.fromCharCode(t),start:e,end:te};default:if(n=ye.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:Di,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,ye.charCodeAt(te)===61&&++te,{type:Di,value:ye.slice(e,te),start:e,end:te}}}if(s=ye.substr(te,4),s===">>>=")return te+=4,{type:Di,value:s,start:e,end:te};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return te+=3,{type:Di,value:a,start:e,end:te};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return te+=2,{type:Di,value:r,start:e,end:te};if(r==="//"&&tt({},wn,Bn),"<>=!+-*%&|^/".includes(i))return++te,{type:Di,value:i,start:e,end:te};tt({},wn,Bn)}function tye(e){let t="";for(;te<ii&&CD(ye[te]);)t+=ye[te++];return t.length===0&&tt({},wn,Bn),Em(ye.charCodeAt(te))&&tt({},wn,Bn),{type:jc,value:parseInt("0x"+t,16),start:e,end:te}}function nye(e){let t="0"+ye[te++];for(;te<ii&&i0(ye[te]);)t+=ye[te++];return(Em(ye.charCodeAt(te))||Ps(ye.charCodeAt(te)))&&tt({},wn,Bn),{type:jc,value:parseInt(t,8),octal:!0,start:e,end:te}}function X8(){var e,t,n;if(n=ye[te],E2(Ps(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=ye[te++],n=ye[te],e==="0"){if(n==="x"||n==="X")return++te,tye(t);if(i0(n))return nye(t);n&&Ps(n.charCodeAt(0))&&tt({},wn,Bn)}for(;Ps(ye.charCodeAt(te));)e+=ye[te++];n=ye[te]}if(n==="."){for(e+=ye[te++];Ps(ye.charCodeAt(te));)e+=ye[te++];n=ye[te]}if(n==="e"||n==="E")if(e+=ye[te++],n=ye[te],(n==="+"||n==="-")&&(e+=ye[te++]),Ps(ye.charCodeAt(te)))for(;Ps(ye.charCodeAt(te));)e+=ye[te++];else tt({},wn,Bn);return Em(ye.charCodeAt(te))&&tt({},wn,Bn),{type:jc,value:parseFloat(e),start:t,end:te}}function iye(){var e="",t,n,i,r,a=!1;for(t=ye[te],E2(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<ii;)if(i=ye[te++],i===t){t="";break}else if(i==="\\")if(i=ye[te++],!i||!R0(i.charCodeAt(0)))switch(i){case"u":case"x":ye[te]==="{"?(++te,e+=K1e()):e+=uC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:i0(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),te<ii&&i0(ye[te])&&(a=!0,r=r*8+"01234567".indexOf(ye[te++]),"0123".includes(i)&&te<ii&&i0(ye[te])&&(r=r*8+"01234567".indexOf(ye[te++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&ye[te]===`
`&&++te;else{if(R0(i.charCodeAt(0)))break;e+=i}return t!==""&&tt({},wn,Bn),{type:Sm,value:e,octal:a,start:n,end:te}}function rye(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";tt({},oC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{tt({},oC)}try{return new RegExp(e,t)}catch{return null}}function aye(){var e,t,n,i,r;for(e=ye[te],E2(e==="/","Regular expression literal must start with a slash"),t=ye[te++],n=!1,i=!1;te<ii;)if(e=ye[te++],t+=e,e==="\\")e=ye[te++],R0(e.charCodeAt(0))&&tt({},X_),t+=e;else if(R0(e.charCodeAt(0)))tt({},X_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||tt({},X_),r=t.substr(1,t.length-2),{value:r,literal:t}}function sye(){var e,t,n;for(t="",n="";te<ii&&(e=ye[te],!!Gb(e.charCodeAt(0)));)++te,e==="\\"&&te<ii?tt({},wn,Bn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&tt({},oC,n),{value:n,literal:t}}function oye(){var e,t,n,i;return dt=null,sH(),e=te,t=aye(),n=sye(),i=rye(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function uye(e){return e.type===bc||e.type===Vu||e.type===x2||e.type===S2}function uH(){if(sH(),te>=ii)return{type:xm,start:te,end:te};const e=ye.charCodeAt(te);return Em(e)?eye():e===40||e===41||e===59?V_():e===39||e===34?iye():e===46?Ps(ye.charCodeAt(te+1))?X8():V_():Ps(e)?X8():V_()}function Oi(){const e=dt;return te=e.end,dt=uH(),te=e.end,e}function lH(){const e=te;dt=uH(),te=e}function lye(e){const t=new pa(O1e);return t.elements=e,t}function V8(e,t,n){const i=new pa(e==="||"||e==="&&"?L1e:N1e);return i.operator=e,i.left=t,i.right=n,i}function cye(e,t){const n=new pa(R1e);return n.callee=e,n.arguments=t,n}function fye(e,t,n){const i=new pa(z1e);return i.test=e,i.consequent=t,i.alternate=n,i}function MD(e){const t=new pa(rH);return t.name=e,t}function qp(e){const t=new pa(F1e);return t.value=e.value,t.raw=ye.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function W8(e,t,n){const i=new pa(U1e);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function dye(e){const t=new pa(B1e);return t.properties=e,t}function Q8(e,t,n){const i=new pa(j1e);return i.key=t,i.value=n,i.kind=e,i}function hye(e,t){const n=new pa(P1e);return n.operator=e,n.argument=t,n.prefix=!0,n}function tt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(E2(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=te,n.description=r,n}function w2(e){e.type===xm&&tt(e,Y1e),e.type===jc&&tt(e,I1e),e.type===Sm&&tt(e,q1e),e.type===bc&&tt(e,H1e),e.type===Vu&&tt(e,G1e),tt(e,wn,e.value)}function ri(e){const t=Oi();(t.type!==Di||t.value!==e)&&w2(t)}function At(e){return dt.type===Di&&dt.value===e}function W_(e){return dt.type===Vu&&dt.value===e}function gye(){const e=[];for(te=dt.start,ri("[");!At("]");)At(",")?(Oi(),e.push(null)):(e.push(xc()),At("]")||ri(","));return Oi(),lye(e)}function Z8(){te=dt.start;const e=Oi();return e.type===Sm||e.type===jc?(e.octal&&tt(e,aH),qp(e)):MD(e.value)}function pye(){var e,t,n,i;if(te=dt.start,e=dt,e.type===bc)return n=Z8(),ri(":"),i=xc(),Q8("init",n,i);if(e.type===xm||e.type===Di)w2(e);else return t=Z8(),ri(":"),i=xc(),Q8("init",t,i)}function mye(){var e=[],t,n,i,r={},a=String;for(te=dt.start,ri("{");!At("}");)t=pye(),t.key.type===rH?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?tt({},X1e):r[i]=!0,e.push(t),At("}")||ri(",");return ri("}"),dye(e)}function yye(){ri("(");const e=TD();return ri(")"),e}const vye={if:1};function bye(){var e,t,n;if(At("("))return yye();if(At("["))return gye();if(At("{"))return mye();if(e=dt.type,te=dt.start,e===bc||vye[dt.value])n=MD(Oi().value);else if(e===Sm||e===jc)dt.octal&&tt(dt,aH),n=qp(Oi());else{if(e===Vu)throw new Error(N0);e===x2?(t=Oi(),t.value=t.value==="true",n=qp(t)):e===S2?(t=Oi(),t.value=null,n=qp(t)):At("/")||At("/=")?(n=qp(oye()),lH()):w2(Oi())}return n}function xye(){const e=[];if(ri("("),!At(")"))for(;te<ii&&(e.push(xc()),!At(")"));)ri(",");return ri(")"),e}function Sye(){te=dt.start;const e=Oi();return uye(e)||w2(e),MD(e.value)}function Eye(){return ri("."),Sye()}function wye(){ri("[");const e=TD();return ri("]"),e}function _ye(){var e,t,n;for(e=bye();;)if(At("."))n=Eye(),e=W8(".",e,n);else if(At("("))t=xye(),e=cye(e,t);else if(At("["))n=wye(),e=W8("[",e,n);else break;return e}function K8(){const e=_ye();if(dt.type===Di&&(At("++")||At("--")))throw new Error(N0);return e}function xv(){var e,t;if(dt.type!==Di&&dt.type!==Vu)t=K8();else{if(At("++")||At("--"))throw new Error(N0);if(At("+")||At("-")||At("~")||At("!"))e=Oi(),t=xv(),t=hye(e.value,t);else{if(W_("delete")||W_("void")||W_("typeof"))throw new Error(N0);t=K8()}}return t}function J8(e){let t=0;if(e.type!==Di&&e.type!==Vu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Aye(){var e,t,n,i,r,a,s,o,l,c;if(e=dt,l=xv(),i=dt,r=J8(i),r===0)return l;for(i.prec=r,Oi(),t=[e,dt],s=xv(),a=[l,i,s];(r=J8(dt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=V8(o,l,s),a.push(n);i=Oi(),i.prec=r,a.push(i),t.push(dt),n=xv(),a.push(n)}for(c=a.length-1,n=a[c],t.pop();c>1;)t.pop(),n=V8(a[c-1].value,a[c-2],n),c-=2;return n}function xc(){var e,t,n;return e=Aye(),At("?")&&(Oi(),t=xc(),ri(":"),n=xc(),e=fye(e,t,n)),e}function TD(){const e=xc();if(At(","))throw new Error(N0);return e}function DD(e){ye=e,te=0,ii=ye.length,dt=null,lH();const t=TD();if(dt.type!==xm)throw new Error("Unexpect token after expression.");return t}var cH={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function fH(e){function t(s,o,l,c){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(c<0?"":c===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return c=>t(s,c,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&na("Missing arguments to clamp function."),s.length>3&&na("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&na("Missing arguments to if function."),s.length>3&&na("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function $ye(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function dH(e){e=e||{};const t=e.allowed?Y8(e.allowed):{},n=e.forbidden?Y8(e.forbidden):{},i=e.constants||cH,r=(e.functions||fH)(h),a=e.globalvar,s=e.fieldvar,o=G8(a)?a:v=>`${a}["${v}"]`;let l={},c={},d=0;function h(v){if(b1e(v))return v;const b=p[v.type];return b==null&&na("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:ky(n,b)?na("Illegal identifier: "+b):ky(i,b)?i[b]:ky(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const w=h(v.property);return S===s&&(c[$ye(w)]=1),b&&(d-=1),S+(b?"."+w:"["+w+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&na("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,w=ky(r,b)&&r[b];return w||na("Unrecognized function: "+b),G8(w)?w(S):w+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},b}return y.functions=r,y.constants=i,y}function zh(e,t,n){return e.fields=t||[],e.fname=n,e}function Cye(e){return e.length===1?Mye(e[0]):Tye(e)}const Mye=e=>function(t){return t[e]},Tye=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Sv(e){throw Error(e)}function Dye(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Sv("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Sv("Access path missing closing bracket: "+e),i&&Sv("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function kD(e,t,n){const i=Dye(e);return e=i.length===1?i[0]:e,zh(Cye(i),[e],e)}kD("id");zh(e=>e,[],"identity");zh(()=>0,[],"zero");zh(()=>1,[],"one");zh(()=>!0,[],"true");zh(()=>!1,[],"false");var lC=Array.isArray;function kye(e){return e[e.length-1]}function Vl(e){return e==null||e===""?null:+e}function eF(e){return e!=null?lC(e)?e:[e]:[]}function Oye(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function tF(e,t){return Object.hasOwn(e,t)}function Oy(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Q_(e){return Object.prototype.toString.call(e)==="[object Date]"}const nF=Symbol("vega_selection_getter");function hH(e){return(!e.getter||!e.getter[nF])&&(e.getter=kD(e.field),e.getter[nF]=!0),e.getter}const OD="intersect",iF="union",Nye="vlMulti",Rye="vlPoint",rF="or",zye="and",za="_vgsid_",z0=kD(za),Fye="E",Lye="R",Uye="R-E",Bye="R-LE",jye="R-RE",Pye="E-LT",Iye="E-LTE",qye="E-GT",Hye="E-GTE",Gye="E-VALID",Yye="E-ONE",Yb="index:unit";function aF(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=hH(o)(e),Q_(s)&&(s=Vl(s)),Q_(i[a])&&(i[a]=Vl(i[a])),lC(i[a])&&Q_(i[a][0])&&(i[a]=i[a].map(Vl)),o.type===Fye){if(lC(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Lye){if(!Oy(s,i[a]))return!1}else if(o.type===jye){if(!Oy(s,i[a],!0,!1))return!1}else if(o.type===Uye){if(!Oy(s,i[a],!1,!1))return!1}else if(o.type===Bye){if(!Oy(s,i[a],!1,!0))return!1}else if(o.type===Pye){if(s>=i[a])return!1}else if(o.type===Iye){if(s>i[a])return!1}else if(o.type===qye){if(s<=i[a])return!1}else if(o.type===Hye){if(s<i[a])return!1}else if(o.type===Gye){if(s===null||isNaN(s))return!1}else if(o.type===Yye&&i[a].indexOf(s)===-1)return!1;return!0}function Xye(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[Yb]&&i[Yb].value:void 0,s=n===OD,o=r.length,l=0,c,d,h,p,y;l<o;++l)if(c=r[l],a&&s){if(d=d||{},h=d[p=c.unit]||0,h===-1)continue;if(y=aF(t,c),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=aF(t,c),s^y)return y;return o&&s}const gH=sh(z0),Vye=gH.left,Wye=gH.right;function Qye(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[Yb]&&i[Yb].value:void 0,s=n===OD,o=z0(t),l=Vye(r,o);if(l===r.length||z0(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(Wye(r,o)-l<a.size)return!1}return!0}function Zye(e,t){return e.map(n=>Oye(t.fields?{values:t.fields.map(i=>hH(i)(n.datum))}:{[za]:z0(n.datum)},t))}function Kye(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},c,d,h,p,y,v,b,S,w,_,A=a.length,$=0,C,D;$<A;++$)if(c=a[$],p=c.unit,d=c.fields,h=c.values,d&&h){for(C=0,D=d.length;C<D;++C)y=d[C],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),l[y.field]=w=y.type.charAt(0),_=Z_[`${w}_union`],b[p]=_(S,eF(h[C]));n&&(S=o[p]||(o[p]=[]),S.push(eF(h).reduce((T,O,R)=>(T[d[R].field]=O,T),{})))}else y=za,v=z0(c),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[za]:v}));if(t=t||iF,s[za]?s[za]=Z_[`${za}_${t}`](...Object.values(s[za])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(O=>s[T][O]).reduce((O,R)=>O===void 0?R:Z_[`${l[T]}_${t}`](O,R))}),a=Object.keys(o),n&&a.length){const T=i?Rye:Nye;s[T]=t===iF?{[rF]:a.reduce((O,R)=>(O.push(...o[R]),O),[])}:{[zye]:a.map(O=>({[rF]:o[O]}))}}return s}var Z_={[`${za}_union`]:JJ,[`${za}_intersect`]:ZJ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Vl(t[0]),i=Vl(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Vl(t[0]),i=Vl(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Jye=":",eve="@";function ND(e,t,n,i){t[0].type!==vc&&Sv("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&kye(t).value,s="unit",o=eve+s,l=Jye+r;a===OD&&!tF(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),tF(i,l)||(i[l]=n.getData(r).tuplesRef())}function pH(e){const t=this.context.data[e];return t?t.values.value:[]}function tve(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function nve(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Vq).insert(t)),1}function ive(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const wm=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},rve=wm("format"),mH=wm("timeFormat"),ave=wm("utcFormat"),sve=wm("timeParse"),ove=wm("utcParse"),Ny=new Date(2e3,0,1);function _2(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ny.setYear(2e3),Ny.setMonth(e),Ny.setDate(t),mH.call(this,Ny,n))}function uve(e){return _2.call(this,e,1,"%B")}function lve(e){return _2.call(this,e,1,"%b")}function cve(e){return _2.call(this,0,2+e,"%A")}function fve(e){return _2.call(this,0,2+e,"%a")}const dve=":",hve="@",cC="%",yH="$";function RD(e,t,n,i){t[0].type!==vc&&ro("First argument to data functions must be a string literal.");const r=t[0].value,a=dve+r;if(!b2(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function gve(e,t,n,i){t[0].type!==vc&&ro("First argument to indata must be a string literal."),t[1].type!==vc&&ro("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=hve+a;b2(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function vi(e,t,n,i){if(t[0].type===vc)sF(n,i,t[0].value);else for(e in n.scales)sF(n,i,e)}function sF(e,t,n){const i=cC+n;if(!b2(t,i))try{t[i]=e.scaleRef(n)}catch{}}function fs(e,t){if(Nh(e)){const n=t.scales[e];return n&&ez(n.value)?n.value:void 0}else if(Jq(e))return ez(e)?e:void 0}function pve(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=vi,n._range=vi,n._scale=vi;const i=r=>"_["+(r.type===vc?O0(cC+r.value):O0(cC)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function zD(e,t){return function(n,i,r){if(n){const a=fs(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const mve=zD("area",kfe),yve=zD("bounds",zfe),vve=zD("centroid",Pfe);function bve(e,t){const n=fs(e,(t||this).context);return n&&n.scale()}function xve(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function FD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Sve(){return FD(this.context.dataflow,"warn",arguments)}function Eve(){return FD(this.context.dataflow,"info",arguments)}function wve(){return FD(this.context.dataflow,"debug",arguments)}function K_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fC(e){const t=Du(e),n=K_(t.r),i=K_(t.g),r=K_(t.b);return .2126*n+.7152*i+.0722*r}function _ve(e,t){const n=fC(e),i=fC(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Ave(){const e=[].slice.call(arguments);return e.unshift({}),$D(...e)}function vH(e,t){return e===t||e!==e&&t!==t?!0:po(e)?po(t)&&e.length===t.length?$ve(e,t):!1:Ib(e)&&Ib(t)?bH(e,t):!1}function $ve(e,t){for(let n=0,i=e.length;n<i;++n)if(!vH(e[n],t[n]))return!1;return!0}function bH(e,t){for(const n in e)if(!vH(e[n],t[n]))return!1;return!0}function oF(e){return t=>bH(e,t)}function Cve(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,c=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<c)&&(o.changes=d=s.changeset(),d.stamp=c,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(h=n===!0?Vq:po(n)||Tx(n)?n:oF(n),d.remove(h)),t&&d.insert(t),i&&(h=oF(i),l.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Mve(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Tve(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const uF={};function Dve(e,t){const n=uF[t]||(uF[t]=Xq(t));return po(e)?e.map(n):n(e)}function A2(e){return po(e)||ArrayBuffer.isView(e)?e:null}function LD(e){return A2(e)||(Nh(e)?e:null)}function kve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return A2(e).join(...n)}function Ove(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return LD(e).indexOf(...n)}function Nve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return LD(e).lastIndexOf(...n)}function Rve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return LD(e).slice(...n)}function zve(e,t,n){return Jq(n)&&ro("Function argument passed to replace."),!Nh(t)&&!nH(t)&&ro("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Fve(e){return A2(e).slice().reverse()}function Lve(e){return A2(e).slice().sort(t1e)}function Uve(e,t,n){return I3(e||0,t||0,n||0)}function Bve(e,t){const n=fs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function jve(e,t){const n=fs(e,(t||this).context);return n?n.copy():void 0}function Pve(e,t){const n=fs(e,(t||this).context);return n?n.domain():[]}function Ive(e,t,n){const i=fs(e,(n||this).context);return i?po(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function qve(e,t){const n=fs(e,(t||this).context);return n&&n.range?n.range():[]}function Hve(e,t,n){const i=fs(e,(n||this).context);return i?i(t):void 0}function Gve(e,t,n,i,r){e=fs(e,(r||this).context);const a=qj(t,n);let s=e.domain(),o=s[0],l=zu(s),c=_D;return l-o?c=kj(e,o,l):e=(e.interpolator?it("sequential")().interpolator(e.interpolator()):it("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==zu(s)&&s.push(l)),s.forEach(d=>a.stop(c(d),e(d))),a}function Yve(e,t,n){const i=fs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Xve(e){let t=null;return function(n){return n?E0(n,t=t||Nd(e)):e}}const xH=e=>e.data;function SH(e,t){const n=pH.call(t,e);return n.root&&n.root.lookup||{}}function Vve(e,t,n){const i=SH(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(xH):void 0}function Wve(e,t){const n=SH(e,this)[t];return n?n.ancestors().map(xH):void 0}const EH=()=>typeof window<"u"&&window||null;function Qve(){const e=EH();return e?e.screen:{}}function Zve(){const e=EH();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Kve(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function wH(e,t,n){if(!e)return[];const[i,r]=e,a=new rn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return BP(s,a,Jve(t))}function Jve(e){let t=null;if(e){const n=Hb(e.marktype),i=Hb(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function ebe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Hb(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function tbe(e){return Hb(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function nbe(e,t,n){const{x:i,y:r,mark:a}=n,s=new rn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),c<s.y1&&(s.y1=c),c>s.y2&&(s.y2=c);return s.translate(i,r),wH([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>ibe(l.x,l.y,t))}function ibe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,c]=n[r];c>t!=o>t&&e<(s-l)*(t-c)/(o-c)+l&&i++}return i&1}const F0={random(){return Rr()},cumulativeNormal:Rx,cumulativeLogNormal:jM,cumulativeUniform:HM,densityNormal:zM,densityLogNormal:BM,densityUniform:qM,quantileNormal:zx,quantileLogNormal:PM,quantileUniform:GM,sampleNormal:Nx,sampleLogNormal:UM,sampleUniform:IM,isArray:po,isBoolean:a1e,isDate:eH,isDefined(e){return e!==void 0},isNumber:tH,isObject:Ib,isRegExp:nH,isString:Nh,isTuple:Tx,isValid(e){return e!=null&&e===e},toBoolean:l1e,toDate(e){return f1e(e)},toNumber:AD,toString:d1e,indexof:Ove,join:kve,lastindexof:Nve,replace:zve,reverse:Fve,sort:Lve,slice:Rve,flush:i1e,lerp:s1e,merge:Ave,pad:o1e,peek:zu,pluck:Dve,span:u1e,inrange:r1e,truncate:h1e,rgb:Du,lab:Xv,hcl:Vv,hsl:Gv,luminance:fC,contrast:_ve,sequence:rr,format:rve,utcFormat:ave,utcParse:ove,utcOffset:FL,utcSequence:BL,timeFormat:mH,timeParse:sve,timeOffset:zL,timeSequence:UL,timeUnitSpecifier:_L,monthFormat:uve,monthAbbrevFormat:lve,dayFormat:cve,dayAbbrevFormat:fve,quarter:Kme,utcquarter:Jme,week:$L,utcweek:TL,dayofyear:AL,utcdayofyear:ML,warn:Sve,info:Eve,debug:wve,extent(e){return n1e(e)},inScope:xve,intersect:wH,clampRange:e1e,pinchDistance:Mve,pinchAngle:Tve,screen:Qve,containerSize:Kve,windowSize:Zve,bandspace:Uve,setdata:nve,pathShape:Xve,panLinear:Hme,panLog:Gme,panPow:Yme,panSymlog:Xme,zoomLinear:Vme,zoomLog:Wme,zoomPow:Qme,zoomSymlog:Zme,encode:ive,modify:Cve,lassoAppend:ebe,lassoPath:tbe,intersectLasso:nbe},rbe=["view","item","group","xy","x","y"],abe="event.vega.",_H="this.",UD={},AH={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${O0(yH+e)}]`,functions:sbe,constants:cH,visitors:UD},dC=dH(AH);function sbe(e){const t=fH(e);rbe.forEach(n=>t[n]=abe+n);for(const n in F0)t[n]=_H+n;return $D(t,pve(e,F0,UD)),t}function Qt(e,t,n){return arguments.length===1?F0[e]:(F0[e]=t,n&&(UD[e]=n),dC&&(dC.functions[e]=_H+e),this)}Qt("bandwidth",Bve,vi);Qt("copy",jve,vi);Qt("domain",Pve,vi);Qt("range",qve,vi);Qt("invert",Ive,vi);Qt("scale",Hve,vi);Qt("gradient",Gve,vi);Qt("geoArea",mve,vi);Qt("geoBounds",yve,vi);Qt("geoCentroid",vve,vi);Qt("geoShape",Yve,vi);Qt("geoScale",bve,vi);Qt("indata",tve,gve);Qt("data",pH,RD);Qt("treePath",Vve,RD);Qt("treeAncestors",Wve,RD);Qt("vlSelectionTest",Xye,ND);Qt("vlSelectionIdTest",Qye,ND);Qt("vlSelectionResolve",Kye,ND);Qt("vlSelectionTuples",Zye);function ts(e,t){const n={};let i;try{e=Nh(e)?e:O0(e)+"",i=DD(e)}catch{ro("Expression parse error: "+e)}i.visit(a=>{if(a.type!==iH)return;const s=a.callee.name,o=AH.visitors[s];o&&o(s,a.arguments,t,n)});const r=dC(i);return r.globals.forEach(a=>{const s=yH+a;!b2(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:$D({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function ds(e,t,n){return e.fields=t||[],e.fname=n,e}function obe(e){return e==null?null:e.fields}function $H(e){return e.length===1?ube(e[0]):lbe(e)}const ube=e=>function(t){return t[e]},lbe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ic(e){throw Error(e)}function CH(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||ic("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&ic("Access path missing closing bracket: "+e),i&&ic("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function BD(e,t,n){const i=CH(e);return e=i.length===1?i[0]:e,ds((n&&n.get||$H)(i),[e],t||e)}BD("id");ds(e=>e,[],"identity");ds(()=>0,[],"zero");ds(()=>1,[],"one");const cbe=ds(()=>!0,[],"true");ds(()=>!1,[],"false");var jD=Array.isArray;function PD(e){return e===Object(e)}function L0(e){return e!=null?jD(e)?e:[e]:[]}function fbe(e){return typeof e=="function"}const dbe="descending";function hbe(e,t,n){n=n||{},t=L0(t)||[];const i=[],r=[],a={},s=n.comparator||gbe;return L0(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===dbe?-1:1),r.push(o=fbe(o)?o:BD(o,null,n)),(obe(o)||[]).forEach(c=>a[c]=1))}),r.length===0?null:ds(s(r,i),Object.keys(a))}const MH=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),gbe=(e,t)=>e.length===1?pbe(e[0],t[0]):mbe(e,t,e.length),pbe=(e,t)=>function(n,i){return MH(e(n),e(i))*t},mbe=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=MH(a(i),a(r));return s*t[o]});function ybe(e,t){return Object.hasOwn(e,t)}function vbe(e){return typeof e=="string"}function bbe(e,t,n){e&&(e=t?L0(e).map(o=>o.replace(/\\(.)/g,"$1")):L0(e));const i=e&&e.length,r=n&&n.get||$H,a=o=>r(t?[o]:CH(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let c=""+o[0](l),d=0;for(;++d<i;)c+="|"+o[d](l);return c}}return ds(s,e,"key")}function hC(e){return jD(e)?"["+e.map(hC)+"]":PD(e)||vbe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function TH(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function xbe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Sbe=TH(["rule"]),lF=TH(["group","image","rect"]);function Ebe(e,t){let n="";return Sbe[t]||(e.x2&&(e.x?(lF[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(lF[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ID(e){return(e+"").toLowerCase()}function wbe(e){return ID(e)==="operator"}function _be(e){return ID(e)==="collect"}function fp(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Abe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var $be={operator:(e,t)=>fp(e,["_"],t.code),parameter:(e,t)=>fp(e,["datum","_"],t.code),event:(e,t)=>fp(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return fp(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+hC(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Ebe(i,n),r+="return m;",fp(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(hC).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,c;return a.path?(l=`a${a.path}`,c=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,c=`this.f${s}(b)`),Abe(l,c,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Cbe(e){const t=this;wbe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Mbe(e){const t=this;if(e.params){const n=t.get(e.id);n||ic("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Tbe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=jD(r)?r.map(a=>cF(a,n,t)):cF(r,n,t)}return t}function cF(e,t,n){if(!e||!PD(e))return e;for(let i=0,r=fF.length,a;i<r;++i)if(a=fF[i],ybe(e,a.key))return a.parse(e,t,n);return e}var fF=[{key:"$ref",parse:Dbe},{key:"$key",parse:Obe},{key:"$expr",parse:kbe},{key:"$field",parse:Nbe},{key:"$encode",parse:zbe},{key:"$compare",parse:Rbe},{key:"$context",parse:Fbe},{key:"$subflow",parse:Lbe},{key:"$tupleid",parse:Ube}];function Dbe(e,t){return t.get(e.$ref)||ic("Operator not defined: "+e.$ref)}function kbe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ds(t.parameterExpression(e.$expr),e.$fields))}function Obe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=bbe(e.$key,e.$flat,t.expr.codegen))}function Nbe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=BD(e.$field,e.$name,t.expr.codegen))}function Rbe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=L0(e.$compare).map(r=>r&&r.$tupleid?we:r);return t.fn[n]||(t.fn[n]=hbe(i,e.$order,t.expr.codegen))}function zbe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=ds(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Fbe(e,t){return t}function Lbe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function Ube(){return we}function Bbe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ic("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function jbe(e){var t=this,n=PD(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ic("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const Pbe={skip:!0};function Ibe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function qbe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Pbe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(cbe).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function DH(e,t,n,i){return new kH(e,t,n,i)}function kH(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||$be,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function dF(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}kH.prototype=dF.prototype={fork(){const e=new dF(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),_be(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ID(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:xbe,parseOperator:Cbe,parseOperatorParameters:Mbe,parseParameters:Tbe,parseStream:Bbe,parseUpdate:jbe,getState:Ibe,setState:qbe};function Hbe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),OH(t,e.description()))}function OH(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Gbe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const J_="default";function Ybe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:J_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Pb(r)?r:r.user:J_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Pb(i)||(r=i.item,i=i.user),gC(e,i&&i!==J_?i:r||i),r},{cursor:t})}function gC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Xb(e,t){var n=e._runtime.data;return wD(n,t)||Ya("Unrecognized data set: "+t),n[t]}function Xbe(e,t){return arguments.length<2?Xb(this,e).values.value:$2.call(this,e,Fc().remove(Rme).insert(t))}function $2(e,t){dU(t)||Ya("Second argument to changes must be a changeset.");const n=Xb(this,e);return n.modified=!0,this.pulse(n.input,t)}function Vbe(e,t){return $2.call(this,e,Fc().insert(t))}function Wbe(e,t){return $2.call(this,e,Fc().remove(t))}function NH(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function RH(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function C2(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Qbe(e){var t=C2(e),n=NH(e),i=RH(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Zbe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=C2(e),s=t.changedTouches?t.changedTouches[0]:t,a=u2(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Kbe(e,n,a),t}function Kbe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;Pb(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:H8(e),item:H8(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const hF="view",Jbe="timer",exe="window",txe={trap:!1};function nxe(e){const t=jb({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{Bc(i[a])&&(i[a]=Bme(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function zH(e,t,n,i){e._eventListeners.push({type:n,sources:zme(t),handler:i})}function ixe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Ry(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||bm(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function rxe(e,t,n){var i=this,r=new Ox(n),a=function(c,d){i.runAsync(null,()=>{e===hF&&ixe(i,t)&&c.preventDefault(),r.receive(Zbe(i,c,d))})},s;if(e===Jbe)Ry(i,"timer",t)&&i.timer(a,t);else if(e===hF)Ry(i,"view",t)&&i.addEventListener(t,a,txe);else if(e===exe?Ry(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Ry(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);zH(i,s,t,a)}return r}function gF(e){return e.item}function pF(e){return e.item.mark.source}function mF(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function axe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",gF),pF,mF(e)),this.on(this.events("view","pointerout",gF),pF,mF(t)),this}function sxe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function or(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const oxe="vega-bind",uxe="vega-bind-name",lxe="vega-bind-radio";function cxe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=Lme(i.debounce,r.update))),(i.input==null&&i.element?fxe:hxe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function fxe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),zH(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(dxe(r))}}function dxe(e){return typeof Event<"u"?new Event(e):{type:e}}function hxe(e,t,n,i){const r=i.signal(n.signal),a=or("div",{class:oxe}),s=n.input==="radio"?a:a.appendChild(or("label"));s.appendChild(or("span",{class:uxe},n.name||n.signal)),t.appendChild(a);let o=gxe;switch(n.input){case"checkbox":o=pxe;break;case"select":o=mxe;break;case"radio":o=yxe;break;case"range":o=vxe;break}o(e,s,n,r)}function gxe(e,t,n,i){const r=or("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function pxe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=or("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function mxe(e,t,n,i){const r=or("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};Vb(s,i)&&(l.selected=!0),r.appendChild(or("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(Vb(n.options[o],s)){r.selectedIndex=o;return}}}function yxe(e,t,n,i){const r=or("span",{class:lxe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};Vb(s,i)&&(l.checked=!0);const c=or("input",l);c.addEventListener("change",()=>e.update(s));const d=or("label",{},(a[o]||s)+"");return d.prepend(c),r.appendChild(d),c}),e.set=s=>{const o=e.elements,l=o.length;for(let c=0;c<l;++c)Vb(o[c].value,s)&&(o[c].checked=!0)}}function vxe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||$u(a,r,100),o=or("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=or("span",{},+i);t.appendChild(o),t.appendChild(l);const c=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",c),o.addEventListener("change",c),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function Vb(e,t){return e===t||e+""==t+""}function FH(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,NH(e),RH(e),C2(e),r,a).background(e.background())}function qD(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function bxe(e,t,n,i){const r=new i(e.loader(),qD(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,C2(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function xxe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=l2(i);e=n._el=e?eA(n,e,!0):null,Hbe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||hm,o=e?a.renderer:a.headless;return n._renderer=o?FH(n,n._renderer,e,o):null,n._handler=bxe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=eA(n,t,!0):e.appendChild(or("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=eA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{cxe(n,l.element||t,l)})),n}function eA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const dp=e=>+e||0,Sxe=e=>({top:e,bottom:e,left:e,right:e});function yF(e){return bm(e)?{top:dp(e.top),bottom:dp(e.bottom),left:dp(e.left),right:dp(e.right)}:Sxe(dp(e))}async function HD(e,t,n,i){const r=l2(t),a=r&&r.headless;return a||Ya("Unrecognized renderer type: "+t),await e.runAsync(),FH(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Exe(e,t){e!==cu.Canvas&&e!==cu.SVG&&e!==cu.PNG&&Ya("Unrecognized image type: "+e);const n=await HD(this,e,t);return e===cu.SVG?wxe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function wxe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function _xe(e,t){return(await HD(this,cu.Canvas,e,t)).canvas()}async function Axe(e){return(await HD(this,cu.SVG,e)).svg()}function $xe(e,t,n){return DH(e,Cd,F0,n).parse(t)}function Cxe(e){var t=this._runtime.scales;return wD(t,e)||Ya("Unrecognized scale or projection: "+e),t[e].value}var LH="width",UH="height",GD="padding",vF={skip:!0};function BH(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===GD?i.left+i.right:0)}function jH(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===GD?i.top+i.bottom:0)}function Mxe(e){var t=e._signals,n=t[LH],i=t[UH],r=t[GD];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=BH(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=jH(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function Txe(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(LH,n,vF),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(UH,i,vF),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function Dxe(e){return this._runtime.getState(e||{data:kxe,signals:Oxe,recurse:!0})}function kxe(e,t){return t.modified&&Bc(t.input.value)&&!e.startsWith("_:vega:_")}function Oxe(e,t){return!(e==="parent"||t instanceof Cd.proxy)}function Nxe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Rxe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Jhe(n,t))}function zxe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Fxe(i))}function Fxe(e){return e==null?"":Bc(e)?PH(e):bm(e)&&!Gq(e)?Lxe(e):e+""}function Lxe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Bc(n)?PH(n):IH(n))}).join(`
`)}function PH(e){return"["+e.map(IH).join(", ")+"]"}function IH(e){return Bc(e)?"[]":bm(e)&&!Gq(e)?"{}":e}function Uxe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function qH(e,t){const n=this;if(t=t||{},cd.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=jb({},e.locale,t.locale);n.locale(nU(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||cu.Canvas,n._scenegraph=new dP;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||zxe,n._redraw=!0,n._handler=new hm().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=nxe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=$xe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:jb({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=BH(n,n._width),n._viewHeight=jH(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Mxe(n),Gbe(n),Ybe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function zy(e,t){return wD(e._signals,t)?e._signals[t]:Ya("Unrecognized signal name: "+Yq(t))}function HH(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function bF(e,t,n,i){let r=HH(n,i);return r||(r=qD(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function xF(e,t,n){const i=HH(t,n);return i&&t._targets.remove(i),e}Ume(qH,cd,{async evaluate(e,t,n){if(await cd.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Qbe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&Zy(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&OH(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=zy(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",yF(e)):yF(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(l2(e)||Ya("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(cd.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(zy(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Txe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=qD(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return bF(this,e,zy(this,e),t)},removeSignalListener(e,t){return xF(this,zy(this,e),t)},addDataListener(e,t){return bF(this,e,Xb(this,e).values,t)},removeDataListener(e,t){return xF(this,Xb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=gC(this,null);this._globalCursor=!!e,t&&gC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Rxe,events:rxe,finalize:sxe,hover:axe,data:Xbe,change:$2,insert:Vbe,remove:Wbe,scale:Cxe,initialize:xxe,toImageURL:Exe,toCanvas:_xe,toSVG:Axe,getState:Dxe,setState:Nxe,_watchPixelRatio:Uxe});function Fh(e,t,n){return e.fields=t||[],e.fname=n,e}function Bxe(e){return e.length===1?jxe(e[0]):Pxe(e)}const jxe=e=>function(t){return t[e]},Pxe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Fe(e){throw Error(e)}function GH(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||Fe("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&Fe("Access path missing closing bracket: "+e),i&&Fe("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Ixe(e,t,n){const i=GH(e);return e=i.length===1?i[0]:e,Fh(Bxe(i),[e],e)}Ixe("id");Fh(e=>e,[],"identity");Fh(()=>0,[],"zero");Fh(()=>1,[],"one");Fh(()=>!0,[],"true");Fh(()=>!1,[],"false");var _n=Array.isArray;function wt(e){return e===Object(e)}const SF=e=>e!=="__proto__";function qxe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=Hxe(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;YH(i,a,r[a],s)}return i},{})}function YH(e,t,n,i){if(!SF(t))return;let r,a;if(wt(n)&&!_n(n)){a=wt(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?YH(a,r,n[r]):SF(r)&&(a[r]=n[r])}else e[t]=n}function Hxe(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function r0(e){return e[e.length-1]}function Jn(e){return e!=null?_n(e)?e:[e]:[]}function Pt(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function tr(e,t){return Object.hasOwn(e,t)}function la(e){return typeof e=="string"}function Ne(e){return _n(e)?"["+e.map(Ne)+"]":wt(e)||la(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}const Gxe="view",Wb="[",Qb="]",XH="{",VH="}",Yxe=":",WH=",",Xxe="@",Vxe=">",Wxe=/[[\]{}]/,Qxe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let QH,ZH;function Wu(e,t,n){return QH=t||Gxe,ZH=n||Qxe,KH(e.trim()).map(pC)}function Zxe(e){return ZH[e]}function a0(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function KH(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=a0(e,r,WH,Wb+XH,Qb+VH),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function pC(e){return e[0]==="["?Kxe(e):Jxe(e)}function Kxe(e){const t=e.length;let n=1,i;if(n=a0(e,n,Qb,Wb,Qb),n===t)throw"Empty between selector: "+e;if(i=KH(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Vxe)throw"Expected '>' after between selector: "+e;i=i.map(pC);const r=pC(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Jxe(e){const t={source:QH},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,c;if(e[s-1]===VH){if(o=e.lastIndexOf(XH),o>=0){try{i=e2e(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===Xxe&&(r=++o),l=a0(e,o,Yxe),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=a0(e,o,Wb),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),c=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=a0(e,o,Qb),o===s)throw"Unmatched left bracket: "+e;if(c.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==Wb)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||Wxe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Zxe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),c!=null&&(t.filter=c),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function e2e(e){const t=e.split(WH);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function t2e(e){return wt(e)?e:{type:e||"pad"}}const hp=e=>+e||0,n2e=e=>({top:e,bottom:e,left:e,right:e});function i2e(e){return wt(e)?e.signal?e:{top:hp(e.top),bottom:hp(e.bottom),left:hp(e.left),right:hp(e.right)}:n2e(hp(e))}const An=e=>wt(e)&&!_n(e)?Pt({},e):{value:e};function EF(e,t,n,i){return n!=null?(wt(n)&&!_n(n)||_n(n)&&n.length&&wt(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function In(e,t,n){for(const i in t)EF(e,i,t[i]);for(const i in n)EF(e,i,n[i],"update")}function Lh(e,t,n){for(const i in t)n&&tr(n,i)||(e[i]=Pt(e[i]||{},t[i]));return e}function ed(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const YD="mark",XD="frame",VD="scope",r2e="axis",a2e="axis-domain",s2e="axis-grid",o2e="axis-label",u2e="axis-tick",l2e="axis-title",c2e="legend",f2e="legend-band",d2e="legend-entry",h2e="legend-gradient",JH="legend-label",g2e="legend-symbol",p2e="legend-title",m2e="title",y2e="title-text",v2e="title-subtitle";function b2e(e,t,n,i,r){const a={},s={};let o,l,c,d;l="lineBreak",t==="text"&&r[l]!=null&&!ed(l,e)&&tA(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===XD?r.group:n===YD?Pt({},r.mark,r[t]):null;for(l in d)c=ed(l,e)||(l==="fill"||l==="stroke")&&(ed("fill",e)||ed("stroke",e)),c||tA(a,l,d[l]);Jn(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)ed(y,e)||tA(a,y,p[y])}),e=Pt({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=Pt(s,e.enter),o&&(e.update=Pt(o,e.update)),e}function tA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const eG=e=>la(e)?Ne(e):e.signal?`(${e.signal})`:tG(e);function M2(e){if(e.gradient!=null)return S2e(e);let t=e.signal?`(${e.signal})`:e.color?x2e(e.color):e.field!=null?tG(e.field):e.value!==void 0?Ne(e.value):void 0;return e.scale!=null&&(t=E2e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Ev(e.exponent)})`),e.mult!=null&&(t+=`*${Ev(e.mult)}`),e.offset!=null&&(t+=`+${Ev(e.offset)}`),e.round&&(t=`round(${t})`),t}const Fy=(e,t,n,i)=>`(${e}(${[t,n,i].map(M2).join(",")})+'')`;function x2e(e){return e.c?Fy("hcl",e.h,e.c,e.l):e.h||e.s?Fy("hsl",e.h,e.s,e.l):e.l||e.a?Fy("lab",e.l,e.a,e.b):e.r||e.g||e.b?Fy("rgb",e.r,e.g,e.b):null}function S2e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ne(n));for(;t.length&&r0(t)==null;)t.pop();return t.unshift(eG(e.gradient)),`gradient(${t.join(",")})`}function Ev(e){return wt(e)?"("+M2(e)+")":e}function tG(e){return nG(wt(e)?e:{datum:e})}function nG(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):Fe("Invalid field reference: "+Ne(e));return e.signal||(i=la(i)?GH(i).map(Ne).join("]["):nG(i)),t+"["+i+"]"}function E2e(e,t){const n=eG(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Ev(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function w2e(e){let t="";return e.forEach(n=>{const i=M2(n);t+=n.test?`(${n.test})?${i}:`:i}),r0(t)===":"&&(t+="null"),t}function iG(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=b2e(e,t,n,i,r.config);for(const o in e)s[o]=_2e(e[o],t,a,r);return a}function _2e(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=$2e(A2e(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function A2e(e){return _n(e)?w2e(e):M2(e)}function $2e(e,t,n,i){const r=ts(e,t);return r.$fields.forEach(a=>i[a]=1),Pt(n,r.$params),r.$expr}const C2e="outer",M2e=["value","update","init","react","bind"];function wF(e,t){Fe(e+' for "outer" push: '+Ne(t))}function rG(e,t){const n=e.name;if(e.push===C2e)t.signals[n]||wF("No prior signal definition",n),M2e.forEach(i=>{e[i]!==void 0&&wF("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function mC(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function T2(e,t,n,i){return new mC(e,t,n,i)}function Zb(e,t){return T2("operator",e,t)}function Ee(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function U0(e,t){return t?{$field:e,$name:t}:{$field:e}}const yC=U0("key");function _F(e,t){return{$compare:e,$order:t}}function T2e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const D2e="ascending",k2e="descending";function O2e(e){return wt(e)?(e.order===k2e?"-":"+")+D2(e.op,e.field):""}function D2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const WD="scope",vC="view";function fn(e){return e&&e.signal}function N2e(e){return e&&e.expr}function wv(e){if(fn(e))return!0;if(wt(e)){for(const t in e)if(wv(e[t]))return!0}return!1}function Wr(e,t){return e??t}function rc(e){return e&&e.signal||e}const AF="timer";function B0(e,t){return(e.merge?z2e:e.stream?F2e:e.type?L2e:Fe("Invalid stream specification: "+Ne(e)))(e,t)}function R2e(e){return e===WD?vC:e||vC}function z2e(e,t){const n=e.merge.map(r=>B0(r,t)),i=QD({merge:n},e,t);return t.addStream(i).id}function F2e(e,t){const n=B0(e.stream,t),i=QD({stream:n},e,t);return t.addStream(i).id}function L2e(e,t){let n;e.type===AF?(n=t.event(AF,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(R2e(e.source),e.type);const i=QD({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function QD(e,t,n){let i=t.between;return i&&(i.length!==2&&Fe('Stream "between" parameter must have 2 entries: '+Ne(t)),e.between=[B0(i[0],n),B0(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(U2e(t.marktype,t.markname,t.markrole)),t.source===WD&&i.push("inScope(event.item)"),i.length&&(e.filter=ts("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function U2e(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const B2e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function j2e(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||Fe("Signal update missing events specification."),la(a)&&(a=Wu(a,t.isSubscope()?WD:vC)),a=Jn(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[I2e(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&Fe("Signal encode and update are mutually exclusive."),s="encode(item(),"+Ne(i)+")"),r.update=la(s)?ts(s,t):s.expr!=null?ts(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:B2e,$params:{$value:t.signalRef(s.signal)}}:Fe("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(Pt(P2e(l,t),r)))}function P2e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):B0(e,t)}}function I2e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function q2e(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?Fe("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=ts(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>j2e(r,t,n.id))}const vt=e=>(t,n,i)=>T2(e,n,t||void 0,i),aG=vt("aggregate"),H2e=vt("axisticks"),sG=vt("bound"),ma=vt("collect"),$F=vt("compare"),G2e=vt("datajoin"),oG=vt("encode"),Y2e=vt("expression"),X2e=vt("facet"),V2e=vt("field"),W2e=vt("key"),Q2e=vt("legendentries"),Z2e=vt("load"),K2e=vt("mark"),J2e=vt("multiextent"),eSe=vt("multivalues"),tSe=vt("overlap"),nSe=vt("params"),uG=vt("prefacet"),iSe=vt("projection"),rSe=vt("proxy"),aSe=vt("relay"),lG=vt("render"),sSe=vt("scale"),Pc=vt("sieve"),oSe=vt("sortitems"),cG=vt("viewlayout"),uSe=vt("values");let lSe=0;const fG={min:"min",max:"max",count:"sum"};function cSe(e,t){const n=e.type||"linear";Aj(n)||Fe("Unrecognized scale type: "+Ne(n)),t.addScale(e.name,{type:n,domain:void 0})}function fSe(e,t){const n=t.getScale(e.name).params;let i;n.domain=dG(e.domain,e,t),e.range!=null&&(n.range=gG(e,t,n)),e.interpolate!=null&&SSe(e.interpolate,n),e.nice!=null&&(n.nice=xSe(e.nice,t)),e.bins!=null&&(n.bins=bSe(e.bins,t));for(i in e)tr(n,i)||i==="name"||(n[i]=Tr(e[i],t))}function Tr(e,t){return wt(e)?e.signal?t.signalRef(e.signal):Fe("Unsupported object: "+Ne(e)):e}function _v(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Tr(n,t))}function k2(e){Fe("Can not find data set: "+Ne(e))}function dG(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Fe("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(_n(e)?dSe:e.fields?gSe:hSe)(e,t,n)}function dSe(e,t,n){return e.map(i=>Tr(i,n))}function hSe(e,t,n){const i=n.getData(e.data);return i||k2(e.data),Od(t.type)?i.valuesRef(n,e.field,hG(e.sort,!1)):Mj(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function gSe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=la(s)?{data:i,field:s}:_n(s)||s.signal?pSe(s,n):s,a.push(s),a),[]);return(Od(t.type)?mSe:Mj(t.type)?ySe:vSe)(e,n,r)}function pSe(e,t){const n="_:vega:_"+lSe++,i=ma({});if(_n(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Ne(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Pc({})]),{data:n,field:"data"}}function mSe(e,t,n){const i=hG(e.sort,!0);let r,a;const s=n.map(c=>{const d=t.getData(c.data);return d||k2(c.data),d.countsRef(t,c.field,i)}),o={groupby:yC,pulse:s};i&&(r=i.op||"count",a=i.field?D2(r,i.field):"count",o.ops=[fG[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(aG(o));const l=t.add(ma({pulse:Ee(r)}));return a=t.add(uSe({field:yC,sort:t.sortRef(i),pulse:Ee(l)})),Ee(a)}function hG(e,t){return e&&(!e.field&&!e.op?wt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Fe("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!fG[e.op]&&Fe("Multiple domain scales can not be sorted using "+e.op)),e}function ySe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||k2(r.data),a.domainRef(t,r.field)});return Ee(t.add(eSe({values:i})))}function vSe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||k2(r.data),a.extentRef(t,r.field)});return Ee(t.add(J2e({extents:i})))}function bSe(e,t){return e.signal||_n(e)?_v(e,t):t.objectProperty(e)}function xSe(e,t){return e.signal?t.signalRef(e.signal):wt(e)?{interval:Tr(e.interval),step:Tr(e.step)}:Tr(e)}function SSe(e,t){t.interpolate=Tr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Tr(e.gamma))}function gG(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(la(r)){if(i&&tr(i,r))return e=Pt({},e,{range:i[r]}),gG(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Od(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Fe("Unrecognized scale range value: "+Ne(r))}else if(r.scheme){n.scheme=_n(r.scheme)?_v(r.scheme,t):Tr(r.scheme,t),r.extent&&(n.schemeExtent=_v(r.extent,t)),r.count&&(n.schemeCount=Tr(r.count,t));return}else if(r.step){n.rangeStep=Tr(r.step,t);return}else{if(Od(e.type)&&!_n(r))return dG(r,e,t);_n(r)||Fe("Unsupported range type: "+Ne(r))}return r.map(a=>(_n(a)?_v:Tr)(a,t))}function ESe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=bC(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=bC(n[r],r,t));t.addProjection(e.name,i)}function bC(e,t,n){return _n(e)?e.map(i=>bC(i,t,n)):wt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Fe("Unsupported parameter object: "+Ne(e)):e}const ya="top",Uh="left",Bh="right",Fu="bottom",pG="center",wSe="vertical",_Se="start",ASe="middle",$Se="end",xC="index",ZD="label",CSe="offset",Pd="perc",MSe="perc2",kr="value",_m="guide-label",KD="guide-title",TSe="group-title",DSe="group-subtitle",CF="symbol",Av="gradient",SC="discrete",EC="size",kSe="shape",OSe="fill",NSe="stroke",RSe="strokeWidth",zSe="strokeDash",FSe="opacity",JD=[EC,kSe,OSe,NSe,RSe,zSe,FSe],Am={name:1,style:1,interactive:1},We={value:0},Or={value:1},O2="group",mG="rect",ek="rule",LSe="symbol",Ic="text";function j0(e){return e.type=O2,e.interactive=e.interactive||!1,e}function Ii(e,t){const n=(i,r)=>Wr(e[i],Wr(t[i],r));return n.isVertical=i=>wSe===Wr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Wr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Wr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Wr(e.columns,Wr(t.columns,+n.isVertical(!0))),n}function yG(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function USe(e,t,n){const i=t.config.style[n];return i&&i[e]}function N2(e,t,n){return`item.anchor === '${_Se}' ? ${e} : item.anchor === '${$Se}' ? ${t} : ${n}`}const tk=N2(Ne(Uh),Ne(Bh),Ne(pG));function BSe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},wt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function vG(e,t){return t?e?wt(e)?Object.assign({},e,{offset:vG(e.offset,t)}):{value:e,offset:t}:t:e}function hr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Lh(e.encode,t,Am)):e.interactive=!1,e}function jSe(e,t,n,i){const r=Ii(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,c,d,h,p;a?(c=[0,1],d=[0,0],h=s,p=o):(c=[0,0],d=[1,0],h=o,p=s);const y={enter:l={opacity:We,x:We,y:We,width:An(h),height:An(p)},update:Pt({},l,{opacity:Or,fill:{gradient:t,start:c,stop:d}}),exit:{opacity:We}};return In(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),hr({type:mG,role:h2e,encode:y},i)}function PSe(e,t,n,i,r){const a=Ii(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let c,d,h,p,y="";s?(c="y",h="y2",d="x",p="width",y="1-"):(c="x",h="x2",d="y",p="height");const v={opacity:We,fill:{scale:t,field:kr}};v[c]={signal:y+"datum."+Pd,mult:l},v[d]=We,v[h]={signal:y+"datum."+MSe,mult:l},v[p]=An(o);const b={enter:v,update:Pt({},v,{opacity:Or}),exit:{opacity:We}};return In(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),hr({type:mG,role:f2e,key:kr,from:r,encode:b},i)}const ISe=`datum.${Pd}<=0?"${Uh}":datum.${Pd}>=1?"${Bh}":"${pG}"`,qSe=`datum.${Pd}<=0?"${Fu}":datum.${Pd}>=1?"${ya}":"${ASe}"`;function MF(e,t,n,i){const r=Ii(e,t),a=r.isVertical(),s=An(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),c,d,h,p,y="";const v={enter:c={opacity:We},update:d={opacity:Or,text:{field:ZD}},exit:{opacity:We}};return In(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Wr(e.labelLimit,t.gradientLabelLimit)}),a?(c.align={value:"left"},c.baseline=d.baseline={signal:qSe},h="y",p="x",y="1-"):(c.align=d.align={signal:ISe},c.baseline={value:"top"},h="x",p="y"),c[h]=d[h]={signal:y+"datum."+Pd,mult:o},c[p]=d[p]=s,s.offset=Wr(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+xC}:void 0,hr({type:Ic,role:JH,style:_m,key:kr,from:i,encode:v,overlap:l},n)}function HSe(e,t,n,i,r){const a=Ii(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,c=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${CSe} : datum.${EC}`,y=c?An(c):{field:EC},v=`datum.${xC}`,b=`max(1, ${r})`;let S,w,_,A,$;y.mult=.5,S={enter:w={opacity:We,x:{signal:p,mult:.5,offset:d},y},update:_={opacity:Or,x:w.x,y:w.y},exit:{opacity:We}};let C=null,D=null;e.fill||(C=t.symbolBaseFillColor,D=t.symbolBaseStrokeColor),In(S,{fill:a("symbolFillColor",C),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",D),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),JD.forEach(L=>{e[L]&&(_[L]=w[L]={scale:e[L],field:kr})});const T=hr({type:LSe,role:g2e,key:kr,from:h,clip:c?!0:void 0,encode:S},n.symbols),O=An(d);O.offset=a("labelOffset"),S={enter:w={opacity:We,x:{signal:p,offset:O},y},update:_={opacity:Or,text:{field:ZD},x:w.x,y:w.y},exit:{opacity:We}},In(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const R=hr({type:Ic,role:JH,style:_m,key:kr,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!c},width:We,height:c?An(c):We,opacity:We},exit:{opacity:We},update:_={opacity:Or,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,_.row.signal=`${v}%${A}`,_.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(_.row.signal=`floor(${v} / ${b})`,_.column.signal=`${v} % ${b}`,$={field:v}),_.column.signal=`(${r})?${_.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:xC}},j0({role:VD,from:i,encode:Lh(S,s,Am),marks:[T,R],name:l,interactive:o,sort:$})}function GSe(e,t){const n=Ii(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const nk='item.orient === "left"',ik='item.orient === "right"',R2=`(${nk} || ${ik})`,YSe=`datum.vgrad && ${R2}`,XSe=N2('"top"','"bottom"','"middle"'),VSe=N2('"right"','"left"','"center"'),WSe=`datum.vgrad && ${ik} ? (${VSe}) : (${R2} && !(datum.vgrad && ${nk})) ? "left" : ${tk}`,QSe=`item._anchor || (${R2} ? "middle" : "start")`,ZSe=`${YSe} ? (${nk} ? -90 : 90) : 0`,KSe=`${R2} ? (datum.vgrad ? (${ik} ? "bottom" : "top") : ${XSe}) : "top"`;function JSe(e,t,n,i){const r=Ii(e,t),a={enter:{opacity:We},update:{opacity:Or,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:We}};return In(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:QSe},angle:{signal:ZSe},align:{signal:WSe},baseline:{signal:KSe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),hr({type:Ic,role:p2e,style:KD,from:i,encode:a},n)}function eEe(e,t){let n;return wt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+TF(e.path)+")":e.sphere&&(n="geoShape("+TF(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function TF(e){return wt(e)&&e.signal?e.signal:Ne(e)}function bG(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===O2?VD:t||YD}function tEe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||bG(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function nEe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function rk(e,t){const n=pU(e.type);n||Fe("Unrecognized transform type: "+Ne(e.type));const i=T2(n.type.toLowerCase(),null,xG(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function xG(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=iEe(s,t,n)}return i}function iEe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return rEe(e,t,n);if(r===void 0){e.required&&Fe("Missing required "+Ne(t.type)+" parameter: "+Ne(e.name));return}else{if(i==="param")return aEe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!fn(r)?r.map(a=>DF(e,a,n)):DF(e,r,n)}function DF(e,t,n){const i=e.type;if(fn(t))return OF(i)?Fe("Expression references can not be signals."):nA(i)?n.fieldRef(t):NF(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||nA(i);return r&&sEe(t)?n.exprRef(t.expr,t.as):r&&oEe(t)?U0(t.field,t.as):OF(i)?ts(t,n):uEe(i)?Ee(n.getData(t).values):nA(i)?U0(t):NF(i)?n.compareRef(t):t}}function rEe(e,t,n){return la(t.from)||Fe('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function aEe(e,t,n){const i=t[e.name];return e.array?(_n(i)||Fe("Expected an array of sub-parameters. Instead: "+Ne(i)),i.map(r=>kF(e,r,n))):kF(e,i,n)}function kF(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||Fe("Unsupported parameter: "+Ne(t));const a=Pt(xG(r,t,n),r.key);return Ee(n.add(nSe(a)))}const sEe=e=>e&&e.expr,oEe=e=>e&&e.field,uEe=e=>e==="data",OF=e=>e==="expr",nA=e=>e==="field",NF=e=>e==="compare";function lEe(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||Fe("Only group marks can be faceted."),i.field!=null?s=o=$v(i,n):(e.data?o=Ee(n.getData(e.data).aggregate):(a=rk(Pt({type:"aggregate",groupby:Jn(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=$v(i,n),s=o=Ee(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Ee(n.add(ma(null,[{}]))),s||(s=$v(e,n)),{key:r,pulse:s,parent:o}}function $v(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ee(t.getData(e.data).output)}function Sc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Sc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ee(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new Sc(e,a,r,i,s)};function SG(e){return la(e)?e:null}function RF(e,t,n){const i=D2(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function gp(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=O2e(a);let c=SG(r),d,h;if(c!=null&&(e=t.scope,c=c+(l?"|"+l:""),d=o[c]),!d){const p=a?{field:yC,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Ee(t.output)};l&&(p.sort=e.sortRef(a)),h=e.add(T2(i,void 0,p)),s&&(t.index[r]=h),d=Ee(h),c!=null&&(o[c]=d)}return d}Sc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=SG(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&RF(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ee(i.output)},n&&n.field&&RF(e,l,n),o=e.add(aG(l)),s=e.add(ma({pulse:Ee(o)})),s={agg:o,ref:Ee(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Ee(this.values)},extentRef(e,t){return gp(e,this,"extent","extent",t,!1)},domainRef(e,t){return gp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return gp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return gp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return gp(e,this,"indata","tupleindex",t,!0,!0)}};function cEe(e,t,n){const i=e.from.facet,r=i.name,a=$v(i,t);let s;i.name||Fe("Facet must have a name: "+Ne(i)),i.data||Fe("Facet must reference a data set: "+Ne(i)),i.field?s=t.add(uG({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(X2e({key:t.keyRef(i.groupby),group:Ee(t.proxy(n.parent)),pulse:a})):Fe("Facet must specify groupby or field: "+Ne(i));const o=t.fork(),l=o.add(ma()),c=o.add(Pc({pulse:Ee(l)}));o.addData(r,new Sc(o,l,l,c)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function fEe(e,t,n){const i=t.add(uG({pulse:n.pulse})),r=t.fork();r.add(Pc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function EG(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(Zb()),c="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=ts(c,t);l.update=d.$expr,l.params=d.$params}function z2(e,t){const n=bG(e),i=e.type===O2,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===VD||n===XD,o,l,c,d,h,p,y;const v=n===YD||s||r,b=lEe(e.from,i,t);l=t.add(G2e({key:b.key||(e.key?U0(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Ee(l);l=c=t.add(ma({pulse:S})),l=t.add(K2e({markdef:tEe(e),interactive:nEe(e.interactive,t),clip:eEe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ee(l)}));const w=Ee(l);l=d=t.add(oG(iG(e.encode,e.type,n,e.style,t,{mod:!1,pulse:w}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(D=>{const T=rk(D,t),O=T.metadata;(O.generates||O.changes)&&Fe("Mark transforms should not generate new data."),O.nomod||(d.params.mod=!0),T.params.pulse=Ee(l),t.add(l=T)}),e.sort&&(l=t.add(oSe({sort:t.compareRef(e.sort),pulse:Ee(l)})));const _=Ee(l);(r||s)&&(s=t.add(cG({layout:t.objectProperty(e.layout),legends:t.legends,mark:w,pulse:_})),p=Ee(s));const A=t.add(sG({mark:w,pulse:p||_}));y=Ee(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(_,p||y,S),r?cEe(e,t,b):v?fEe(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=dEe(a,y,t));const $=t.add(lG({pulse:y})),C=t.add(Pc({pulse:Ee($)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Sc(t,c,$,C)),e.on&&e.on.forEach(D=>{(D.insert||D.remove||D.toggle)&&Fe("Marks only support modify triggers."),EG(D,t,h)}))}function dEe(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:fn(a)?n.signalRef(a.signal):a,method:fn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=fn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Ee(n.add(tSe(s)))}function hEe(e,t){const n=t.config.legend,i=e.encode||{},r=Ii(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,c={};let d=0,h,p,y;JD.forEach(A=>e[A]?(c[A]=e[A],d=d||e[A]):0),d||Fe("Missing valid scale for legend.");const v=gEe(e,t.scaleType(d)),b={title:e.title!=null,scales:c,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Ee(t.add(ma(null,[b]))),w={enter:{x:{value:0},y:{value:0}}},_=Ee(t.add(Q2e(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===Av?(y=[jSe(e,d,n,i.gradient),MF(e,n,i.labels,_)],p.count=p.count||t.signalRef(`max(2,2*floor((${rc(r.gradientLength())})/100))`)):v===SC?y=[PSe(e,d,n,i.gradient,_),MF(e,n,i.labels,_)]:(h=GSe(e,n),y=[HSe(e,n,i,_,rc(h.columns))],p.size=yEe(e,t,y[0].marks)),y=[j0({role:d2e,from:S,encode:w,marks:y,layout:h,interactive:o})],b.title&&y.push(JSe(e,n,i.title,S)),z2(j0({role:c2e,from:S,encode:Lh(mEe(r,e,n),a,Am),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function gEe(e,t){let n=e.type||CF;return!e.type&&pEe(e)===1&&(e.fill||e.stroke)&&(n=X3(t)?Av:c$(t)?SC:CF),n!==Av?n:c$(t)?SC:Av}function pEe(e){return JD.reduce((t,n)=>t+(e[n]?1:0),0)}function mEe(e,t,n){const i={enter:{},update:{}};return In(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function yEe(e,t,n){const i=rc(zF("size",e,n)),r=rc(zF("strokeWidth",e,n)),a=rc(vEe(n[1].encode,t,_m));return ts(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function zF(e,t,n){return t[e]?`scale("${t[e]}",datum)`:yG(e,n[0].encode)}function vEe(e,t,n){return yG("fontSize",e)||USe("fontSize",t,n)}const bEe=`item.orient==="${Uh}"?-90:item.orient==="${Bh}"?90:0`;function xEe(e,t){e=la(e)?{text:e}:e;const n=Ii(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],c={},d=Ee(t.add(ma(null,[c])));return l.push(wEe(e,n,SEe(e),d)),e.subtitle&&l.push(_Ee(e,n,i.subtitle,d)),z2(j0({role:m2e,from:d,encode:EEe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function SEe(e){const t=e.encode;return t&&t.title||Pt({name:e.name,interactive:e.interactive,style:e.style},t)}function EEe(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:tk},angle:{signal:bEe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Lh(n,t,Am)}function wEe(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Ic,role:y2e,style:TSe,from:i,encode:s},n)}function _Ee(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hr({type:Ic,role:v2e,style:DSe,from:i,encode:s},n)}function AEe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(rk(i,t))}),e.on&&e.on.forEach(i=>{EG(i,t,e.name)}),t.addDataPipeline(e.name,$Ee(e,t,n))}function $Ee(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,c,d,h;for(e.values?fn(e.values)||wv(e.format)?(i.push(FF(t,e)),i.push(r=Al())):i.push(r=Al({$ingest:e.values,$format:e.format})):e.url?wv(e.url)||wv(e.format)?(i.push(FF(t,e)),i.push(r=Al())):i.push(r=Al({$request:e.url,$format:e.format})):e.source&&(r=o=Jn(e.source).map(p=>Ee(t.getData(p).output)),i.push(null)),l=0,c=n.length;l<c;++l)d=n[l],h=d.metadata,!r&&!h.source&&i.push(r=Al()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(c=o.length-1,i[0]=aSe({derive:a,pulse:c?o:o[0]}),(a||c)&&i.splice(1,0,Al())),r||i.push(Al()),i.push(Pc({})),i}function Al(e){const t=ma({},e);return t.metadata={source:!0},t}function FF(e,t){return Z2e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const wG=e=>e===Fu||e===ya,F2=(e,t,n)=>fn(e)?DEe(e.signal,t,n):e===Uh||e===ya?t:n,$n=(e,t,n)=>fn(e)?MEe(e.signal,t,n):wG(e)?t:n,aa=(e,t,n)=>fn(e)?TEe(e.signal,t,n):wG(e)?n:t,_G=(e,t,n)=>fn(e)?kEe(e.signal,t,n):e===ya?{value:t}:{value:n},CEe=(e,t,n)=>fn(e)?OEe(e.signal,t,n):e===Bh?{value:t}:{value:n},MEe=(e,t,n)=>AG(`${e} === '${ya}' || ${e} === '${Fu}'`,t,n),TEe=(e,t,n)=>AG(`${e} !== '${ya}' && ${e} !== '${Fu}'`,t,n),DEe=(e,t,n)=>ak(`${e} === '${Uh}' || ${e} === '${ya}'`,t,n),kEe=(e,t,n)=>ak(`${e} === '${ya}'`,t,n),OEe=(e,t,n)=>ak(`${e} === '${Bh}'`,t,n),AG=(e,t,n)=>(t=t!=null?An(t):t,n=n!=null?An(n):n,LF(t)&&LF(n)?(t=t?t.signal||Ne(t.value):null,n=n?n.signal||Ne(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pt({test:e},t)].concat(n||[])),LF=e=>e==null||Object.keys(e).length===1,ak=(e,t,n)=>({signal:`${e} ? (${od(t)}) : (${od(n)})`}),NEe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Uh}' ? (${od(i)}) : `:"")+(n!=null?`${e} === '${Fu}' ? (${od(n)}) : `:"")+(r!=null?`${e} === '${Bh}' ? (${od(r)}) : `:"")+(t!=null?`${e} === '${ya}' ? (${od(t)}) : `:"")+"(null)"}),od=e=>fn(e)?e.signal:e==null?null:Ne(e),REe=(e,t)=>t===0?0:fn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},pd=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Xf(e,t,n,i){let r;if(t&&tr(t,e))return t[e];if(tr(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[KD][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[_m][r]}return null}function UF(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function zEe(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,c;if(fn(s)){const h=UF([n.axisX,n.axisY]),p=UF([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(c of h)o[c]=$n(s,Xf(c,n.axisX,r,i),Xf(c,n.axisY,r,i));l={};for(c of p)l[c]=NEe(s.signal,Xf(c,n.axisTop,r,i),Xf(c,n.axisBottom,r,i),Xf(c,n.axisLeft,r,i),Xf(c,n.axisRight,r,i))}else o=s===ya||s===Fu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?Pt({},r,o,l,a):r}function FEe(e,t,n,i){const r=Ii(e,t),a=e.orient;let s,o;const l={enter:s={opacity:We},update:o={opacity:Or},exit:{opacity:We}};In(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const c=BF(e,0),d=BF(e,1);return s.x=o.x=$n(a,c,We),s.x2=o.x2=$n(a,d),s.y=o.y=aa(a,c,We),s.y2=o.y2=aa(a,d),hr({type:ek,role:a2e,from:i,encode:l},n)}function BF(e,t){return{scale:e.scale,range:t}}function LEe(e,t,n,i,r){const a=Ii(e,t),s=e.orient,o=e.gridScale,l=F2(s,1,-1),c=UEe(e.offset,l);let d,h,p;const y={enter:d={opacity:We},update:p={opacity:Or},exit:h={opacity:We}};In(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:kr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=$n(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:l,offset:c}:{value:0,offset:c},w=o?{scale:o,range:1,mult:l,offset:c}:Pt(b,{mult:l,offset:c});return d.x=p.x=$n(s,v,S),d.y=p.y=aa(s,v,S),d.x2=p.x2=aa(s,w),d.y2=p.y2=$n(s,w),h.x=$n(s,v),h.y=aa(s,v),hr({type:ek,role:s2e,key:kr,from:i,encode:y},n)}function UEe(e,t){if(t!==1)if(!wt(e))e=fn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pt({},e);for(;n.mult!=null;)if(wt(n.mult))n=n.mult=Pt({},n.mult);else return n.mult=fn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function BEe(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=F2(o,-1,1);let c,d,h;const p={enter:c={opacity:We},update:h={opacity:Or},exit:d={opacity:We}};In(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=An(r);y.mult=l;const v={scale:e.scale,field:kr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=c.y=$n(o,We,v),h.y2=c.y2=$n(o,y),d.x=$n(o,v),h.x=c.x=aa(o,We,v),h.x2=c.x2=aa(o,y),d.y=aa(o,v),hr({type:ek,role:u2e,key:kr,from:i,encode:p},n)}function iA(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function jEe(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=e.scale,c=F2(o,-1,1),d=rc(s("labelFlush")),h=rc(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=An(r);S.mult=c,S.offset=An(s("labelPadding")||0),S.offset.mult=c;const w={scale:l,field:kr,band:.5,offset:vG(a.offset,s("labelOffset"))},_=$n(o,v?iA(l,d,'"left"','"right"','"center"'):{value:"center"},CEe(o,"left","right")),A=$n(o,_G(o,"bottom","top"),v?iA(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=iA(l,d,`-(${h})`,h,0);v=v&&h;const C={opacity:We,x:$n(o,w,S),y:aa(o,w,S)},D={enter:C,update:b={opacity:Or,text:{field:ZD},x:C.x,y:C.y,align:_,baseline:A},exit:{opacity:We,x:C.x,y:C.y}};In(D,{dx:!p&&v?$n(o,$):null,dy:!y&&v?aa(o,$):null}),In(D,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const T=s("labelBound");let O=s("labelOverlap");return O=O||T?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:T?{scale:l,orient:o,tolerance:T}:null}:void 0,b.align!==_&&(b.align=pd(b.align,_)),b.baseline!==A&&(b.baseline=pd(b.baseline,A)),hr({type:Ic,role:o2e,style:_m,key:kr,from:i,encode:D,overlap:O},n)}function PEe(e,t,n,i){const r=Ii(e,t),a=e.orient,s=F2(a,-1,1);let o,l;const c={enter:o={opacity:We,anchor:An(r("titleAnchor",null)),align:{signal:tk}},update:l=Pt({},o,{opacity:Or,text:An(e.title)}),exit:{opacity:We}},d={signal:`lerp(range("${e.scale}"), ${N2(0,1,.5)})`};return l.x=$n(a,d),l.y=aa(a,d),o.angle=$n(a,We,REe(s,90)),o.baseline=$n(a,_G(a,Fu,ya),{value:Fu}),l.angle=o.angle,l.baseline=o.baseline,In(c,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),IEe(r,a,c,n),c.update.align=pd(c.update.align,o.align),c.update.angle=pd(c.update.angle,o.angle),c.update.baseline=pd(c.update.baseline,o.baseline),hr({type:Ic,role:l2e,style:KD,from:i,encode:c},n)}function IEe(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=pd(An(o),n.update[l]),!1):!ed(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?An(s):$n(t,An(s),An(a))}function qEe(e,t){const n=zEe(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=Ii(e,n),c=BSe(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Ee(t.add(ma({},[d]))),p=Ee(t.add(H2e({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(LEe(e,n,i.grid,p,c)),d.ticks&&(v=l("tickSize"),y.push(BEe(e,n,i.ticks,p,v,c))),d.labels&&(v=d.ticks?v:0,y.push(jEe(e,n,i.labels,p,v,c))),d.domain&&y.push(FEe(e,n,i.domain,h)),d.title&&y.push(PEe(e,n,i.title,h)),z2(j0({role:r2e,from:h,encode:Lh(HEe(l,e),r,Am),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function HEe(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),offset:e("offset")||0,position:Wr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function $G(e,t,n){const i=Jn(e.signals),r=Jn(e.scales);return n||i.forEach(a=>rG(a,t)),Jn(e.projections).forEach(a=>ESe(a,t)),r.forEach(a=>cSe(a,t)),Jn(e.data).forEach(a=>AEe(a,t)),r.forEach(a=>fSe(a,t)),(n||i).forEach(a=>q2e(a,t)),Jn(e.axes).forEach(a=>qEe(a,t)),Jn(e.marks).forEach(a=>z2(a,t)),Jn(e.legends).forEach(a=>hEe(a,t)),e.title&&xEe(e.title,t),t.parseLambdas(),t}const GEe=e=>Lh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function YEe(e,t){const n=t.config,i=Ee(t.root=t.add(Zb())),r=XEe(e,n);r.forEach(c=>rG(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ma()),s=t.add(oG(iG(GEe(e.encode),O2,XD,e.style,t,{pulse:Ee(a)}))),o=t.add(cG({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ee(s)}));t.operators.pop(),t.pushState(Ee(s),Ee(o),null),$G(e,t,r),t.operators.push(o);let l=t.add(sG({mark:i,pulse:Ee(o)}));return l=t.add(lG({pulse:Ee(l)})),l=t.add(Pc({pulse:Ee(l)})),t.addData("root",new Sc(t,a,a,l)),t}function pp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function XEe(e,t){const n=s=>Wr(e[s],t[s]),i=[pp("background",n("background")),pp("autosize",t2e(n("autosize"))),pp("padding",i2e(n("padding"))),pp("width",n("width")||0),pp("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return Jn(e.signals).forEach(s=>{tr(r,s.name)?s=Pt(r[s.name],s):i.push(s),a[s.name]=s}),Jn(t.signals).forEach(s=>{!tr(a,s.name)&&!tr(r,s.name)&&i.push(s)}),i}function CG(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function jF(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}CG.prototype=jF.prototype={parse(e){return $G(e,this)},fork(){return new jF(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof mC?Ee(e):e;return this.add(rSe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ee(this.add(Pc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ee(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return r0(this._parent)},encode(){return r0(this._encode)},lookup(){return r0(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(la(e))return U0(e,t);e.signal||Fe("Unsupported field reference: "+Ne(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ee(this.add(V2e(r)))}return i},compareRef(e){let t=!1;const n=a=>fn(a)?(t=!0,this.signalRef(a.signal)):N2e(a)?(t=!0,this.exprRef(a.expr)):a,i=Jn(e.field).map(n),r=Jn(e.order).map(n);return t?Ee(this.add($F({fields:i,orders:r}))):_F(i,r)},keyRef(e,t){let n=!1;const i=a=>fn(a)?(n=!0,Ee(r[a.signal])):a,r=this.signals;return e=Jn(e).map(i),n?Ee(this.add(W2e({fields:e,flat:t}))):T2e(e,t)},sortRef(e){if(!e)return e;const t=D2(e.op,e.field),n=e.order||D2e;return n.signal?Ee(this.add($F({fields:t,orders:this.signalRef(n.signal)}))):_F(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return tr(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Fe("Duplicate signal name: "+Ne(e));const n=t instanceof mC?t:this.add(Zb(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Fe("Unrecognized signal name: "+Ne(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ee(this.signals[e]):(tr(this.lambdas,e)||(this.lambdas[e]=this.add(Zb(null))),Ee(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=ts(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!wt(e)?e:this.signalRef(e.signal||sk(e))},exprRef(e,t){const n={expr:ts(e,this)};return t&&(n.expr.$name=t),Ee(this.add(Y2e(n)))},addBinding(e,t){this.bindings||Fe("Nested signals do not support binding: "+Ne(e)),this.bindings.push(Pt({signal:e},t))},addScaleProj(e,t){tr(this.scales,e)&&Fe("Duplicate scale or projection name: "+Ne(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,sSe(t))},addProjection(e,t){this.addScaleProj(e,iSe(t))},getScale(e){return this.scales[e]||Fe("Unrecognized scale name: "+Ne(e)),this.scales[e]},scaleRef(e){return Ee(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return tr(this.data,e)&&Fe("Duplicate data set name: "+Ne(e)),this.data[e]=t},getData(e){return this.data[e]||Fe("Undefined data set name: "+Ne(e)),this.data[e]},addDataPipeline(e,t){return tr(this.data,e)&&Fe("Duplicate data set name: "+Ne(e)),this.addData(e,Sc.fromEntries(this,t))}};function sk(e){return(_n(e)?VEe:WEe)(e)}function VEe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(wt(r)?r.signal||sk(r):Ne(r))}return n+"]"}function WEe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+Ne(i)+":"+(wt(r)?r.signal||sk(r):Ne(r));return t+"}"}function QEe(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ZEe(e,t,n){return wt(e)||Fe("Input Vega specification must be an object."),t=qxe(QEe(),t,e.config),YEe(e,new CG(t,n)).toRuntime()}var KEe="6.1.2";lM(Cd,pre,Sce,vfe,dhe,yge,l0e,Npe,b0e,Q0e,pme,Mme);const JEe=KEe,ewe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:rn,CanvasHandler:hm,CanvasRenderer:sb,DATE:Li,DAY:ei,DAYOFYEAR:Ka,Dataflow:cd,Debug:j7,Error:L7,EventStream:Ox,Gradient:qj,GroupItem:t2,HOURS:cr,Handler:vT,HybridHandler:NP,HybridRenderer:S$,Info:B7,Item:e2,MILLISECONDS:oa,MINUTES:fr,MONTH:ni,Marks:dr,MultiPulse:CM,None:F7,Operator:xt,Parameters:kx,Pulse:vu,QUARTER:Fi,RenderType:cu,Renderer:dm,ResourceLoader:Wj,SECONDS:Nr,SVGHandler:xP,SVGRenderer:_T,SVGStringRenderer:OP,Scenegraph:dP,TIME_UNITS:yM,Transform:J,View:qH,WEEK:ln,Warn:U7,YEAR:jn,accessor:bo,accessorFields:R7,accessorName:rK,array:f0,ascending:uM,bandwidthNRD:RM,bin:AU,bootstrapCI:$U,boundClip:qP,boundContext:um,boundItem:m$,boundMark:uP,boundStroke:xo,changeset:Fc,clampRange:AK,codegenExpression:dH,compare:CK,constant:kK,cumulativeLogNormal:jM,cumulativeNormal:Rx,cumulativeUniform:HM,dayofyear:AL,debounce:OK,defaultLocale:EM,definition:pU,densityLogNormal:BM,densityNormal:zM,densityUniform:qM,domChild:un,domClear:Ar,domCreate:uu,domFind:yT,dotbin:CU,error:Wy,expressionFunction:Qt,extend:lM,extent:NK,extentIndex:RK,falsy:fK,fastmap:zK,field:rM,flush:FK,font:s2,fontFamily:fm,fontSize:os,format:Qy,formatLocale:Uv,formats:AM,hasOwnProperty:qs,id:oK,identity:aM,inferType:rU,inferTypes:aU,ingest:st,inherits:LK,inrange:UK,interpolate:V3,interpolateColors:Kx,interpolateRange:Tj,intersect:BP,intersectBoxLine:id,intersectPath:nT,intersectPoint:iT,intersectRule:Zj,isArray:px,isBoolean:G7,isDate:Y7,isFunction:bx,isIterable:BK,isNumber:X7,isObject:lc,isRegExp:jK,isString:Js,isTuple:Tx,key:PK,lerp:IK,lineHeight:Ou,loader:Cx,locale:nU,logger:hK,lruCache:HK,markup:wT,merge:GK,mergeConfig:sM,multiLineOffset:gT,one:lK,pad:YK,panLinear:pK,panLog:mK,panPow:yK,panSymlog:vK,parse:ZEe,parseExpression:DD,parseSelector:Wu,path:Bx,pathCurves:J3,pathEqual:HP,pathParse:Nd,pathRectangle:Yj,pathRender:E0,pathSymbols:Gj,pathTrail:Xj,peek:ih,point:u2,projection:GT,quantileLogNormal:PM,quantileNormal:zx,quantileUniform:GM,quantiles:OM,quantizeInterpolator:Dj,quarter:wK,quartiles:NM,get random(){return Rr},randomInteger:bie,randomKDE:LM,randomLCG:vie,randomLogNormal:TU,randomMixture:DU,randomNormal:FM,randomUniform:kU,read:uU,regressionConstant:YM,regressionExp:NU,regressionLinear:XM,regressionLoess:FU,regressionLog:OU,regressionPoly:zU,regressionPow:RU,regressionQuad:VM,renderModule:l2,repeat:wp,resetDefaultLocale:tne,resetSVGDefIds:Ole,responseType:oU,runtimeContext:DH,sampleCurve:Lx,sampleLogNormal:UM,sampleNormal:Nx,sampleUniform:IM,scale:it,sceneEqual:AT,sceneFromJSON:cP,scenePickVisit:Kv,sceneToJSON:lP,sceneVisit:ua,sceneZOrder:rT,scheme:W3,serializeXML:MP,setHybridRendererOptions:Mle,setRandom:mie,span:XK,splitAccessPath:iM,stringValue:ud,textMetrics:sr,timeBin:IL,timeFloor:OL,timeFormatLocale:g0,timeInterval:ch,timeOffset:zL,timeSequence:UL,timeUnitSpecifier:_L,timeUnits:vM,toBoolean:VK,toDate:QK,toNumber:oM,toSet:KK,toString:ZK,transform:mU,transforms:Cd,truncate:JK,truthy:cK,tupleid:we,typeParsers:KA,utcFloor:NL,utcInterval:fh,utcOffset:FL,utcSequence:BL,utcdayofyear:ML,utcquarter:_K,utcweek:TL,version:JEe,visitArray:eJ,week:$L,writeConfig:mx,zero:uK,zoomLinear:bK,zoomLog:xK,zoomPow:SK,zoomSymlog:EK},Symbol.toStringTag,{value:"Module"}));function jh(e,t,n){return e.fields=t||[],e.fname=n,e}function twe(e){return e.length===1?nwe(e[0]):iwe(e)}const nwe=e=>function(t){return t[e]},iwe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function rA(e){throw Error(e)}function rwe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||rA("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&rA("Access path missing closing bracket: "+e),i&&rA("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function awe(e,t,n){const i=rwe(e);return e=i.length===1?i[0]:e,jh(twe(i),[e],e)}awe("id");jh(e=>e,[],"identity");jh(()=>0,[],"zero");jh(()=>1,[],"one");jh(()=>!0,[],"true");jh(()=>!1,[],"false");var swe=Array.isArray;function PF(e){return e===Object(e)}const owe=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function uwe(e){return typeof e=="string"}function lwe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var cwe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},fwe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},dwe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const hwe=Array.prototype.slice,$l=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,hwe.call(t,1))},gwe=(e,t,n,i,r,a,s)=>new Date(e,t||0,n??1,i||0,r||0,a||0,s||0);var pwe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:gwe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return $l("join",arguments)},indexof:function(){return $l("indexOf",arguments)},lastindexof:function(){return $l("lastIndexOf",arguments)},slice:function(){return $l("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(owe),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return $l("substring",arguments,String)},split:function(){return $l("split",arguments,String)},replace:function(){return $l("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const mwe=["view","item","group","xy","x","y"],wC=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&wC.add(setImmediate);const ywe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:cwe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),wC.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||pwe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>fwe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>dwe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,wC.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function mp(e,t,n,i,r,a){const s=o=>ywe[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,mwe.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var vwe={operator(e,t){const n=t.ast,i=e.functions;return r=>mp(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>mp(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>mp(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return mp(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let c=0,d;for(const h in i)d=mp(i[h].ast,r,o,l,void 0,s),s[h]!==d&&(s[h]=d,c=1);return n!=="rule"&&lwe(s,i,a),c}}};function Ph(e,t,n){return e.fields=t||[],e.fname=n,e}function bwe(e){return e.length===1?xwe(e[0]):Swe(e)}const xwe=e=>function(t){return t[e]},Swe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function aA(e){throw Error(e)}function qc(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function c(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?c():s=o+1:l==="["?(o>s&&c(),r=s=o+1):l==="]"&&(r||aA("Access path missing open bracket: "+e),r>0&&c(),r=0,s=o+1)}return r&&aA("Access path missing closing bracket: "+e),i&&aA("Access path missing closing quote: "+e),o>s&&(o++,c()),t}function Ewe(e,t,n){const i=qc(e);return e=i.length===1?i[0]:e,Ph(bwe(i),[e],e)}Ewe("id");const wwe=Ph(e=>e,[],"identity");Ph(()=>0,[],"zero");Ph(()=>1,[],"one");Ph(()=>!0,[],"true");Ph(()=>!1,[],"false");function _we(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Awe=1,MG=2,$we=3,Cwe=4;function Mwe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_we,i=e;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=Awe&&n("error","ERROR",arguments),this},warn(){return i>=MG&&n("warn","WARN",arguments),this},info(){return i>=$we&&n("log","INFO",arguments),this},debug(){return i>=Cwe&&n("log","DEBUG",arguments),this}}}var me=Array.isArray;function Je(e){return e===Object(e)}const IF=e=>e!=="__proto__";function TG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=Twe(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;L2(i,a,r[a],s)}return i},{})}function L2(e,t,n,i){if(!IF(t))return;let r,a;if(Je(n)&&!me(n)){a=Je(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?L2(a,r,n[r]):IF(r)&&(a[r]=n[r])}else e[t]=n}function Twe(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Xt(e){return e!=null?me(e)?e:[e]:[]}function Dwe(e){return typeof e=="function"}function tn(e,t){return Object.hasOwn(e,t)}function $m(e){return typeof e=="boolean"}function Dt(e){return typeof e=="number"}function Re(e){return typeof e=="string"}function Ke(e){return me(e)?"["+e.map(Ke)+"]":Je(e)||Re(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var kwe="6.2.0",Owe={version:kwe};function ok(e){return ue(e,"or")}function uk(e){return ue(e,"and")}function lk(e){return ue(e,"not")}function Cv(e,t){if(lk(e))Cv(e.not,t);else if(uk(e))for(const n of e.and)Cv(n,t);else if(ok(e))for(const n of e.or)Cv(n,t);else t(e)}function md(e,t){return lk(e)?{not:md(e.not,t)}:uk(e)?{and:e.and.map(n=>md(n,t))}:ok(e)?{or:e.or.map(n=>md(n,t))}:t(e)}const De=structuredClone;function DG(e){throw new Error(e)}function Id(e,t){const n={};for(const i of t)tn(e,i)&&(n[i]=e[i]);return n}function ur(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ut(e)).join(",")})`};function Ye(e){if(Dt(e))return e;const t=Re(e)?e:ut(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function _C(e){return e===!1||e===null}function qe(e,t){return e.includes(t)}function qd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function ck(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function kG(e,...t){for(const n of t)Nwe(e,n??{});return e}function Nwe(e,t){for(const n of oe(t))L2(e,n,t[n],!0)}function Ba(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Rwe(e,t){const n=oe(e),i=oe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function OG(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function fk(e,t){for(const n of e)if(t.has(n))return!0;return!1}function AC(e){const t=new Set;for(const n of e){const r=qc(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function dk(e,t){return e===void 0||t===void 0?!0:fk(AC(e),AC(t))}function St(e){return oe(e).length===0}const oe=Object.keys,nn=Object.values,Lu=Object.entries;function P0(e){return e===!0||e===!1}function Tt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function s0(e,t){return lk(e)?`!(${s0(e.not,t)})`:uk(e)?`(${e.and.map(n=>s0(n,t)).join(") && (")})`:ok(e)?`(${e.or.map(n=>s0(n,t)).join(") || (")})`:t(e)}function Kb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Kb(e[n],t)&&delete e[n],St(e)}function Cm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function hk(e,t="datum"){const n=qc(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(Ke).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function NG(e,t="datum"){return`${t}[${Ke(qc(e).join("."))}]`}function ft(e){return`datum['${e.replaceAll("'","\\'")}']`}function zwe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Fr(e){return`${qc(e).map(zwe).join("\\.")}`}function Ec(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Ih(e){return`${qc(e).join(".")}`}function Hd(e){return e?qc(e).length:0}function Vt(...e){return e.find(t=>t!==void 0)}let RG=42;function zG(e){const t=++RG;return e?String(e)+t:t}function Fwe(){RG=42}function FG(e){return LG(e)?e:`__${e}`}function LG(e){return e.startsWith("__")}function I0(e){if(e!==void 0)return(e%360+360)%360}function U2(e){return Dt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qF=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qF.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qF.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ut(e){const t=[];return function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],c=n(i[l]);c&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${c}`)}return t.splice(s,1),`{${a}}`}(e)}function ue(e,t){return Je(e)&&tn(e,t)&&e[t]!==void 0}const ao="row",so="column",B2="facet",kt="x",Dn="y",va="x2",hs="y2",Qu="xOffset",qh="yOffset",ba="radius",wo="radius2",Br="theta",_o="theta2",xa="latitude",Sa="longitude",Ea="latitude2",Lr="longitude2",Zu="time",Bi="color",gs="fill",ps="stroke",ji="shape",Ao="size",Hc="angle",$o="opacity",Ku="fillOpacity",Ju="strokeOpacity",el="strokeWidth",tl="strokeDash",Mm="text",Gd="order",Tm="detail",j2="key",wc="tooltip",P2="href",I2="url",q2="description",Lwe={x:1,y:1,x2:1,y2:1},UG={theta:1,theta2:1,radius:1,radius2:1};function BG(e){return tn(UG,e)}const gk={longitude:1,longitude2:1,latitude:1,latitude2:1};function jG(e){switch(e){case xa:return"y";case Ea:return"y2";case Sa:return"x";case Lr:return"x2"}}function PG(e){return tn(gk,e)}const Uwe=oe(gk),pk={...Lwe,...UG,...gk,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function yd(e){return e===Bi||e===gs||e===ps}const IG={row:1,column:1,facet:1},Dr=oe(IG),mk={...pk,...IG},Bwe=oe(mk),{order:BNe,detail:jNe,tooltip:PNe,...jwe}=mk,{row:INe,column:qNe,facet:HNe,...Pwe}=jwe;function Iwe(e){return tn(Pwe,e)}function qG(e){return tn(mk,e)}const qwe=[va,hs,Ea,Lr,_o,wo];function HG(e){return Gc(e)!==e}function Gc(e){switch(e){case va:return kt;case hs:return Dn;case Ea:return xa;case Lr:return Sa;case _o:return Br;case wo:return ba}return e}function Uu(e){if(BG(e))switch(e){case Br:return"startAngle";case _o:return"endAngle";case ba:return"outerRadius";case wo:return"innerRadius"}return e}function ms(e){switch(e){case kt:return va;case Dn:return hs;case xa:return Ea;case Sa:return Lr;case Br:return _o;case ba:return wo}}function Pi(e){switch(e){case kt:case va:return"width";case Dn:case hs:return"height"}}function GG(e){switch(e){case kt:return"xOffset";case Dn:return"yOffset";case va:return"x2Offset";case hs:return"y2Offset";case Br:return"thetaOffset";case ba:return"radiusOffset";case _o:return"theta2Offset";case wo:return"radius2Offset"}}function yk(e){switch(e){case kt:return"xOffset";case Dn:return"yOffset"}}function Hwe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Gwe=oe(pk),{x:GNe,y:YNe,x2:XNe,y2:VNe,xOffset:WNe,yOffset:QNe,latitude:ZNe,longitude:KNe,latitude2:JNe,longitude2:eRe,theta:tRe,theta2:nRe,radius:iRe,radius2:rRe,...vk}=pk,Ywe=oe(vk),bk={x:1,y:1},Co=oe(bk);function Wt(e){return tn(bk,e)}const xk={theta:1,radius:1},Xwe=oe(xk);function H2(e){return e==="width"?kt:Dn}const YG={xOffset:1,yOffset:1};function Dm(e){return tn(YG,e)}const Vwe={time:1};function sA(e){return e in Vwe}const{text:aRe,tooltip:sRe,href:oRe,url:uRe,description:lRe,detail:cRe,key:fRe,order:dRe,...XG}=vk,Wwe=oe(XG);function Qwe(e){return tn(vk,e)}function Zwe(e){switch(e){case Bi:case gs:case ps:case Ao:case ji:case $o:case el:case tl:return!0;case Ku:case Ju:case Hc:case Zu:return!1}}const VG={...bk,...xk,...YG,...XG},Sk=oe(VG);function ys(e){return tn(VG,e)}function Kwe(e,t){return e_e(e)[t]}const WG={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:hRe,...Jwe}=WG;function e_e(e){switch(e){case Bi:case gs:case ps:case q2:case Tm:case j2:case wc:case P2:case Gd:case $o:case Ku:case Ju:case el:case B2:case ao:case so:return WG;case kt:case Dn:case Qu:case qh:case xa:case Sa:case Zu:return Jwe;case va:case hs:case Ea:case Lr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ao:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case tl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ji:return{point:"always",geoshape:"always"};case Mm:return{text:"always"};case Hc:return{point:"always",square:"always",text:"always"};case I2:return{image:"always"};case Br:return{text:"always",arc:"always"};case ba:return{text:"always",arc:"always"};case _o:case wo:return{arc:"always"}}}function oA(e){switch(e){case kt:case Dn:case Br:case ba:case Qu:case qh:case Ao:case Hc:case el:case $o:case Ku:case Ju:case Zu:case va:case hs:case _o:case wo:return;case B2:case ao:case so:case ji:case tl:case Mm:case wc:case P2:case I2:case q2:return"discrete";case Bi:case gs:case ps:return"flexible";case xa:case Sa:case Ea:case Lr:case Tm:case j2:case Gd:return}}const t_e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},n_e={count:1,min:1,max:1};function mo(e){return ue(e,"argmin")}function nl(e){return ue(e,"argmax")}function Ek(e){return Re(e)&&tn(t_e,e)}const i_e=new Set(["count","valid","missing","distinct"]);function G2(e){return Re(e)&&i_e.has(e)}function r_e(e){return Re(e)&&qe(["min","max"],e)}const a_e=new Set(["count","sum","distinct","valid","missing"]),s_e=new Set(["mean","average","median","q1","q3","min","max"]);function QG(e){return $m(e)&&(e=iS(e,void 0)),`bin${oe(e).map(t=>Y2(e[t])?Tt(`_${t}_${Lu(e[t])}`):Tt(`_${t}_${e[t]}`)).join("")}`}function _t(e){return e===!0||Yc(e)&&!e.binned}function Rn(e){return e==="binned"||Yc(e)&&e.binned===!0}function Yc(e){return Je(e)}function Y2(e){return ue(e,"param")}function HF(e){switch(e){case ao:case so:case Ao:case Bi:case gs:case ps:case el:case $o:case Ku:case Ju:case ji:return 6;case tl:return 4;default:return 10}}function km(e){return ue(e,"expr")}function zn(e,{level:t}={level:0}){const n=oe(e||{}),i={};for(const r of n)i[r]=t===0?nr(e[r]):zn(e[r],{level:t-1});return i}function ZG(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:c,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},w={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},_={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=Id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:w,subtitle:_}}function su(e){return Re(e)||me(e)&&Re(e[0])}function ve(e){return ue(e,"signal")}function Xc(e){return ue(e,"step")}function o_e(e){return me(e)?!1:ue(e,"fields")&&!ue(e,"data")}function u_e(e){return me(e)?!1:ue(e,"fields")&&ue(e,"data")}function Ks(e){return me(e)?!1:ue(e,"field")&&ue(e,"data")}const l_e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},c_e=oe(l_e),f_e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},$C=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],d_e="  ";function KG(e){const t=me(e.condition)?e.condition.map(GF):GF(e.condition);return{...nr(e),condition:t}}function nr(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function GF(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function $t(e){if(km(e)){const{expr:t,...n}=e;return{signal:t,...n}}return ve(e)?e:e!==void 0?{value:e}:void 0}function h_e(e){return ve(e)?e.signal:Ke(e)}function YF(e){return ve(e)?e.signal:Ke(e.value)}function ia(e){return ve(e)?e.signal:e==null?null:Ke(e)}function g_e(e,t,n){for(const i of n){const r=ns(i,t.markDef,t.config);r!==void 0&&(e[i]=$t(r))}return e}function JG(e){return[].concat(e.type,e.style??[])}function yt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ue(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:ns(e,t,n,i)}function ns(e,t,n,{vgChannel:i}={}){const r=CC(e,t,n.style);return Vt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function CC(e,t,n){return eY(e,JG(t),n)}function eY(e,t,n){t=Xt(t);let i;for(const r of t){const a=n[r];ue(a,e)&&(i=a[e])}return i}function tY(e,t){return Xt(e).reduce((n,i)=>(n.field.push(he(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function nY(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function iY(e,t){return ar(e,t)||!t?e:e?[...Xt(e),...Xt(t)].join(", "):t}function rY(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((su(n)||ve(n))&&(su(i)||ve(i)))return{explicit:e.explicit,value:iY(n,i)};if(su(n)||ve(n))return{explicit:e.explicit,value:n};if(su(i)||ve(i))return{explicit:e.explicit,value:i};if(!su(n)&&!ve(n)&&!su(i)&&!ve(i))return{explicit:e.explicit,value:nY(n,i)};throw new Error("It should never reach here")}function wk(e){return`Invalid specification ${ut(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const p_e='Autosize "fit" only works for single views and layered views.';function XF(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function VF(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function WF(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pi(e)}.`:'Dropping "fit" because spec has discrete size.'}function _k(e){return`Unknown field for ${e}. Cannot calculate view size.`}function QF(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function m_e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function y_e(e){return`The "nearest" transform is not supported for ${e} marks.`}function aY(e){return`Selection not supported for ${e} yet.`}function v_e(e){return`Cannot find a selection named "${e}".`}const b_e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",x_e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",S_e="Legend bindings are only supported for selections over an individual field or encoding channel.";function E_e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function w_e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const __e="The same selection must be used to override scale domains in a layered view.",A_e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function $_e(e){return`Unknown repeated value "${e}".`}function ZF(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const C_e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Ak="Animation involving facet, layer, or concat is currently unsupported.";function M_e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ud(e)}.`}function T_e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ud(t)} encoding found for selection ${ud(n.param)}. Using "field": ${ud(i)}.`}const D_e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function k_e(e){return`Unrecognized parse "${e}".`}function KF(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const O_e="Attempt to add the same child twice.";function N_e(e){return`Ignoring an invalid transform: ${ut(e)}.`}const R_e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function JF(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function z_e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ut(t)} is overridden by a child projection ${ut(n)}.`}const F_e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function L_e(e){return`${e}Offset dropped because ${e} is continuous`}function U_e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ut(n)}}.`}function sY(e){return`Invalid field type "${e}".`}function B_e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function j_e(e){return`Invalid aggregation operator "${e}".`}function oY(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function P_e(e){return`Position range does not support relative band size for ${e}.`}function MC(e,t){return`Dropping ${ut(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const I_e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function X2(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function q_e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function H_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function G_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Y_e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function uA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function X_e(e){return`The ${e} for range marks cannot be an expression`}function V_e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function W_e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Q_e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Z_e(e){return`Cannot use the relative band size with ${e} scale.`}function K_e(e){return`Using unaggregated domain with raw field has no effect (${ut(e)}).`}function J_e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function eAe(e){return`Unaggregated domain is currently unsupported for log scale (${ut(e)}).`}function tAe(e){return`Cannot apply size to non-oriented mark "${e}".`}function nAe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function iAe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function uY(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function lY(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function rAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ut(n)} and ${ut(i)}). Using ${ut(n)}.`}function aAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ut(n)} and ${ut(i)}). Using the union of the two domains.`}function sAe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function oAe(e){return`Dropping sort property ${ut(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const e9="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",uAe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",lAe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",cAe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function fAe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function dAe(e){return`Stack is applied to a non-linear scale (${e}).`}function hAe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Jb(e,t){return`Invalid ${e}: ${ut(t)}.`}function gAe(e){return`Dropping day from datetime ${ut(e)} as day cannot be combined with other units.`}function pAe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function mAe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function yAe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function t9(e){return`1D error band does not support ${e}.`}function cY(e){return`Channel ${e} is required for "binned" bin.`}function vAe(e){return`Channel ${e} should not be used with "binned" bin.`}function bAe(e){return`Domain for ${e} is required for threshold scale.`}const fY=Mwe(MG);let _c=fY;function xAe(e){return _c=e,_c}function SAe(){return _c=fY,_c}function $k(...e){_c.error(...e)}function ce(...e){_c.warn(...e)}function EAe(...e){_c.debug(...e)}function Vc(e){if(e&&Je(e)){for(const t of Mk)if(ue(e,t))return!0}return!1}const dY=["january","february","march","april","may","june","july","august","september","october","november","december"],wAe=dY.map(e=>e.substr(0,3)),hY=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],_Ae=hY.map(e=>e.substr(0,3));function AAe(e){if(U2(e)&&(e=+e),Dt(e))return e>4&&ce(Jb("quarter",e)),e-1;throw new Error(Jb("quarter",e))}function $Ae(e){if(U2(e)&&(e=+e),Dt(e))return e-1;{const t=e.toLowerCase(),n=dY.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=wAe.indexOf(i);if(r!==-1)return r;throw new Error(Jb("month",e))}}function CAe(e){if(U2(e)&&(e=+e),Dt(e))return e%7;{const t=e.toLowerCase(),n=hY.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=_Ae.indexOf(i);if(r!==-1)return r;throw new Error(Jb("day",e))}}function Ck(e,t){const n=[];if(t&&e.day!==void 0&&oe(e).length>1&&(ce(gAe(e)),e=De(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?$Ae(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?AAe(e.quarter):e.quarter;n.push(Dt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?CAe(e.day):e.day;n.push(Dt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Ac(e){const n=Ck(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function MAe(e){const n=Ck(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function TAe(e){const t=Ck(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const gY={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Mk=oe(gY);function DAe(e){return qs(gY,e)}function Wc(e){return Je(e)?e.binned:pY(e)}function pY(e){return e?.startsWith("binned")}function Tk(e){return e.startsWith("utc")}function kAe(e){return e.substring(3)}const OAe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function V2(e){return Mk.filter(t=>yY(e,t))}function mY(e){const t=V2(e);return t[t.length-1]}function yY(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function NAe(e,t,{end:n}={end:!1}){const i=hk(t),r=Tk(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of Mk)yY(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),MAe(o)}function vY(e){if(!e)return;const t=V2(e);return`timeUnitSpecifier(${ut(t)}, ${ut(OAe)})`}function RAe(e,t,n){if(!e)return;const i=vY(e);return`${n||Tk(e)?"utc":"time"}Format(${t}, ${i})`}function Cn(e){if(!e)return;let t;return Re(e)?pY(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Je(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Tk(t.unit)&&(t.utc=!0,t.unit=kAe(t.unit)),t}function zAe(e){const{utc:t,...n}=Cn(e);return n.unit?(t?"utc":"")+oe(n).map(i=>Tt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${oe(n).map(i=>Tt(`_${i}_${n[i]}`)).join("")}`}function bY(e,t=n=>n){const n=Cn(e),i=mY(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=xY(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Ac(o))} - ${t(Ac(r))}`}}const FAe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function LAe(e){return qs(FAe,e)}function xY(e,t=1){if(LAe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function UAe(e){return ue(e,"param")}function Dk(e){return!!e?.field&&e.equal!==void 0}function kk(e){return!!e?.field&&e.lt!==void 0}function Ok(e){return!!e?.field&&e.lte!==void 0}function Nk(e){return!!e?.field&&e.gt!==void 0}function Rk(e){return!!e?.field&&e.gte!==void 0}function zk(e){if(e?.field){if(me(e.range)&&e.range.length===2)return!0;if(ve(e.range))return!0}return!1}function Fk(e){return!!e?.field&&(me(e.oneOf)||me(e.in))}function BAe(e){return!!e?.field&&e.valid!==void 0}function SY(e){return Fk(e)||Dk(e)||zk(e)||kk(e)||Nk(e)||Ok(e)||Rk(e)}function Da(e,t){return rS(e,{timeUnit:t,wrapTime:!0})}function jAe(e,t){return e.map(n=>Da(n,t))}function EY(e,t=!0){const{field:n}=e,i=Cn(e.timeUnit),{unit:r,binned:a}=i||{},s=he(e,{expr:"datum"}),o=r?`time(${a?s:NAe(r,n)})`:s;if(Dk(e))return`${o}===${Da(e.equal,r)}`;if(kk(e)){const l=e.lt;return`${o}<${Da(l,r)}`}else if(Nk(e)){const l=e.gt;return`${o}>${Da(l,r)}`}else if(Ok(e)){const l=e.lte;return`${o}<=${Da(l,r)}`}else if(Rk(e)){const l=e.gte;return`${o}>=${Da(l,r)}`}else{if(Fk(e))return`indexof([${jAe(e.oneOf,r).join(",")}], ${o}) !== -1`;if(BAe(e))return W2(o,e.valid);if(zk(e)){const{range:l}=zn(e),c=ve(l)?{signal:`${l.signal}[0]`}:l[0],d=ve(l)?{signal:`${l.signal}[1]`}:l[1];if(c!==null&&d!==null&&t)return`inrange(${o}, [${Da(c,r)}, ${Da(d,r)}])`;const h=[];return c!==null&&h.push(`${o} >= ${Da(c,r)}`),d!==null&&h.push(`${o} <= ${Da(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ut(e)}`)}function W2(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function PAe(e){return SY(e)&&e.timeUnit?{...e,timeUnit:Cn(e.timeUnit)}:e}const Om={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function IAe(e){return e==="quantitative"||e==="temporal"}function wY(e){return e==="ordinal"||e==="nominal"}const $c=Om.quantitative,Lk=Om.ordinal,Yd=Om.temporal,Uk=Om.nominal,Hh=Om.geojson;function qAe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case $c:return"quantitative";case"t":case Yd:return"temporal";case"o":case Lk:return"ordinal";case"n":case Uk:return"nominal";case Hh:return"geojson"}}const Fn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},TC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function HAe(e,t){const n=TC[e],i=TC[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const GAe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function n9(e){return GAe[e]}const _Y=new Set(["linear","log","pow","sqrt","symlog"]),AY=new Set([..._Y,"time","utc"]);function $Y(e){return _Y.has(e)}const CY=new Set(["quantile","quantize","threshold"]),YAe=new Set([...AY,...CY,"sequential","identity"]),XAe=new Set(["ordinal","bin-ordinal","point","band"]);function Mn(e){return XAe.has(e)}function ca(e){return YAe.has(e)}function ja(e){return AY.has(e)}function Xd(e){return CY.has(e)}const VAe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function WAe(e){return!Re(e)&&ue(e,"name")}function MY(e){return ue(e,"param")}function QAe(e){return ue(e,"unionWith")}function ZAe(e){return Je(e)&&"field"in e}const KAe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:gRe,domain:pRe,range:mRe,rangeMax:yRe,rangeMin:vRe,scheme:bRe,...JAe}=KAe,e$e=oe(JAe);function DC(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ja(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ja(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ja(e);case"nice":return ja(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ca(e)&&!qe(["log","time","utc","threshold","quantile"],e)}}function TY(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return yd(e)?void 0:Q_e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function t$e(e,t){return qe([Lk,Uk],t)?e===void 0||Mn(e):t===Yd?qe([Fn.TIME,Fn.UTC,void 0],e):t===$c?$Y(e)||Xd(e)||e===void 0:!0}function n$e(e,t,n=!1){if(!ys(e))return!1;switch(e){case kt:case Dn:case Qu:case qh:case Br:case ba:return ja(t)||t==="band"?!0:t==="point"?!n:!1;case Zu:return qe(["linear","band"],t);case Ao:case el:case $o:case Ku:case Ju:case Hc:return ja(t)||Xd(t)||qe(["band","point","ordinal"],t);case Bi:case gs:case ps:return t!=="band";case tl:case ji:return t==="ordinal"||Xd(t)}}function i$e(e){return Je(e)&&"value"in e}const wi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},DY=wi.arc,Q2=wi.area,Z2=wi.bar,r$e=wi.image,K2=wi.line,J2=wi.point,a$e=wi.rect,ex=wi.rule,kY=wi.text,Bk=wi.tick,s$e=wi.trail,jk=wi.circle,Pk=wi.square,OY=wi.geoshape;function il(e){return["line","area","trail"].includes(e)}function q0(e){return["rect","bar","image","arc","tick"].includes(e)}const o$e=new Set(oe(wi));function is(e){return ue(e,"type")}const u$e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],l$e=["fill","fillOpacity"],c$e=[...u$e,...l$e],f$e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},i9=oe(f$e),lA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],d$e={area:["line","point"],bar:lA,rect:lA,line:["point"],tick:["bandSize","thickness",...lA]},h$e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},g$e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},NY=oe(g$e);function Cc(e){return ue(e,"band")}const p$e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},m$e=5,Ik={binSpacing:0,continuousBandSize:m$e,minBandSize:.25,timeUnitBandPosition:.5},y$e={...Ik,binSpacing:1},v$e={...Ik,thickness:1};function b$e(e){return is(e)?e.type:e}function RY(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function qk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ca(i)||r)return"always-valid";const a=RY(yt("invalid",e,t),{isPath:il(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function x$e(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function zY({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function FY({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=da(t),l=G2(o?.aggregate),c=qk({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&c==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:W2(he(o,{expr:"datum"}),!1),...S$e(d,n,i)}}}function S$e(e,t,n){if(i$e(e)){const{value:i}=e;return ve(i)?{signal:i.signal}:{value:i}}return zY({scale:t,scaleName:n,mode:"zeroOrMin"})}function Hk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=Gc(t),l=Gk(e),c=FY({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return c!==void 0?[c,l]:l}function E$e(e){const{datum:t}=e;return Vc(t)?Ac(t):`${ut(t)}`}function ac(e,t,n,i){const r={};if(t&&(r.scale=t),vs(e)){const{datum:a}=e;Vc(a)?r.signal=Ac(a):ve(a)?r.signal=a.signal:km(a)?r.signal=a.expr:r.value=a}else r.field=he(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function tx({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!ve(s)&&0<s&&s<1?"datum":void 0,l=he(t,{expr:o,suffix:r}),c=n!==void 0?he(n,{expr:o}):he(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?l:c;d.field=h}else{const h=ve(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${c}`:`${1-s} * ${l} + ${s} * ${c}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function w$e({scaleName:e,fieldDef:t}){const n=he(t,{expr:"datum"}),i=he(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function Gk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:c,bandPosition:d}){if(t){if(Oe(t)){const h=s?.get("type");if(Si(t)){d??=Bu({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(_t(p)||d&&y&&v===Yd)return o?.impute?ac(t,a,{binSuffix:"mid"},{offset:l}):d&&!Mn(h)?tx({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):ac(t,a,Lm(t,e)?{binSuffix:"range"}:{},{offset:l});if(Rn(p)){if(fe(n))return tx({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});ce(cY(e===kt?va:hs))}}return ac(t,a,Mn(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(fa(t)){const h=t.value,p=l?{offset:l}:{};return{...o0(e,h),...p}}}return Dwe(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function o0(e,t){return qe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:qe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:$t(t)}function Mc(e){return e&&e!=="number"&&e!=="time"}function LY(e,t,n){return`${e}(${t}${n?`, ${ut(n)}`:""})`}function Yk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Mc(n))return ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=UY(e,i,r),o=Vd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ra({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ra({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&fe(e)&&e.timeUnit===void 0)return ra({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function l(c){return fe(c)?Cn(c.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Qd(e)){const{unit:c,utc:d}=l(e),h=A$e({field:s,timeUnit:c,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||Qc(e)&&e.scale?.type===Fn.UTC});return h?{signal:h}:void 0}if(t=kC({type:o,specifiedFormat:t,config:a,normalizeStack:r}),fe(e)&&_t(e.bin)){const c=he(e,{expr:i,binSuffix:"end"});return{signal:Nm(s,c,t,n,a)}}else return t||Vd(e)==="quantitative"?{signal:`${PY(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function UY(e,t,n){return fe(e)?n?`${he(e,{expr:t,suffix:"end"})}-${he(e,{expr:t,suffix:"start"})}`:he(e,{expr:t}):E$e(e)}function ra({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=UY(e,i,r),s!=="datum.value"&&fe(e)&&_t(e.bin)){const o=he(e,{expr:i,binSuffix:"end"});return{signal:Nm(s,o,t,n,a)}}return{signal:LY(n,s,t)}}function BY(e,t,n,i,r,a){if(!(Re(i)&&Mc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Vd(e)==="quantitative"&&(r.normalizedNumberFormatType&&Wd(e)&&e.stack==="normalize"||r.numberFormatType))){if(Wd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return kC({type:"quantitative",config:r,normalizeStack:!0});if(Qd(e)){const s=fe(e)?Cn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:_$e({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return kC({type:t,specifiedFormat:n,config:r})}}function jY(e,t,n){if(e&&(ve(e)||e==="number"||e==="time"))return e;if(Qd(t)&&n!=="time"&&n!=="utc")return fe(t)&&Cn(t?.timeUnit)?.utc?"utc":"time"}function kC({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Re(t))return t;if(e===$c)return i?n.normalizedNumberFormat:n.numberFormat}function _$e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:vY(t)}:i?void 0:n.timeFormat)}function PY(e,t){return`format(${e}, "${t||""}")`}function r9(e,t,n,i){return Mc(n)?LY(n,e,t):PY(e,(Re(t)?t:void 0)??i.numberFormat)}function Nm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return Nm(e,t,r.numberFormat,r.numberFormatType,r);const a=r9(e,n,i,r),s=r9(t,n,i,r);return`${W2(e,!1)} ? "null" : ${a} + "${d_e}" + ${s}`}function A$e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${ut(n)})`:(n=Re(n)?n:r,`${a?"utc":"time"}Format(${e}, ${ut(n)})`):RAe(t,e,a)}const eS="min",$$e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function a9(e){return tn($$e,e)}function C$e(e){return ue(e,"encoding")}function oo(e){return e&&(e.op==="count"||ue(e,"field"))}function IY(e){return e&&me(e)}function Rm(e){return ue(e,"row")||ue(e,"column")}function Xk(e){return ue(e,"header")}function tS(e){return ue(e,"facet")}function M$e(e){return ue(e,"param")}function T$e(e){return!Re(e)&&ue(e,"repeat")}function s9(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Vk(e){return ue(e,"sort")}function Bu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Oe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(fe(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return ns("timeUnitBandPosition",n,i);if(_t(a))return .5}}function qY({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=Pi(e),l=yt(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(fe(t)){const{timeUnit:c,bin:d}=t;if(c&&!n)return{band:ns("timeUnitBandSize",i,r)};if(_t(d)&&!Mn(a))return{band:1}}if(q0(i.type))return a?Mn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function HY(e,t,n,i){return _t(e.bin)||e.timeUnit&&Si(e)&&e.type==="temporal"?Bu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function GY(e){return ue(e,"sort")&&!ue(e,"field")}function zm(e){return ue(e,"condition")}function nS(e){const t=e?.condition;return!!t&&!me(t)&&fe(t)}function Fm(e){const t=e?.condition;return!!t&&!me(t)&&Oe(t)}function D$e(e){const t=e?.condition;return!!t&&(me(t)||fa(t))}function fe(e){return ue(e,"field")||e?.aggregate==="count"}function Vd(e){return e?.type}function vs(e){return ue(e,"datum")}function pu(e){return Si(e)&&!ix(e)||nx(e)}function o9(e){return Si(e)&&e.type==="quantitative"&&!e.bin||nx(e)}function nx(e){return vs(e)&&Dt(e.datum)}function Oe(e){return fe(e)||vs(e)}function Si(e){return e&&(ue(e,"field")||e.aggregate==="count")&&ue(e,"type")}function fa(e){return ue(e,"value")}function Qc(e){return ue(e,"scale")||ue(e,"sort")}function Wd(e){return ue(e,"axis")||ue(e,"stack")||ue(e,"impute")}function YY(e){return ue(e,"legend")}function XY(e){return ue(e,"format")||ue(e,"formatType")}function k$e(e){return ur(e,["legend","axis","header","scale"])}function O$e(e){return ue(e,"op")}function he(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(R$e(e))n=FG("count");else{let s;if(!t.nofn)if(O$e(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:c}=e;_t(o)?(s=QG(o),r=(t.binSuffix??"")+(t.suffix??"")):l?nl(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):mo(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):c&&!Wc(c)&&(s=zAe(c),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Ih(n):t.expr?NG(n,t.expr)+a:Fr(n)+a}function ix(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return fe(e)&&!!e.bin;case"temporal":return!1}throw new Error(sY(e.type))}function N$e(e){return Qc(e)&&Xd(e.scale?.type)}function R$e(e){return e.aggregate==="count"}function z$e(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(_t(i))return`${n} (binned)`;if(r&&!Wc(r)){const s=Cn(r)?.unit;if(s)return`${n} (${V2(s).join("-")})`}else if(a)return nl(a)?`${n} for max ${a.argmax}`:mo(a)?`${n} for min ${a.argmin}`:`${Cm(a)} of ${n}`;return n}function F$e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(nl(t))return`${r} for argmax(${t.argmax})`;if(mo(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Wc(i)?Cn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||_t(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const VY=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return F$e(e);default:return z$e(e,t)}};let WY=VY;function QY(e){WY=e}function L$e(){QY(VY)}function vd(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=Wk(e)?.title;if(!fe(e))return r??e.title;const a=e,s=i?Qk(a,t):void 0;return n?Vt(r,a.title,s):r??a.title??s}function Wk(e){if(Wd(e)&&e.axis)return e.axis;if(YY(e)&&e.legend)return e.legend;if(Xk(e)&&e.header)return e.header}function Qk(e,t){return WY(e,t)}function rx(e){if(XY(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Wk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function U$e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Vk(e)&&me(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!nl(n)&&!mo(n))return"quantitative";if(Qc(e)&&e.scale?.type)switch(TC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function da(e){if(fe(e))return e;if(nS(e))return e.condition}function cn(e){if(Oe(e))return e;if(Fm(e))return e.condition}function ZY(e,t,n,i={}){if(Re(e)||Dt(e)||$m(e)){const r=Re(e)?"string":Dt(e)?"number":"boolean";return ce(U_e(t,r,e)),{value:e}}return Oe(e)?ax(e,t,n,i):Fm(e)?{...e,condition:ax(e.condition,t,n,i)}:e}function ax(e,t,n,i){if(XY(e)){const{format:r,formatType:a,...s}=e;if(Mc(a)&&!n.customFormatTypes)return ce(JF(t)),ax(s,t,n,i)}else{const r=Wd(e)?"axis":YY(e)?"legend":Xk(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Mc(s)&&!n.customFormatTypes)return ce(JF(t)),ax({...e,[r]:o},t,n,i)}}return fe(e)?Zk(e,t,i):B$e(e)}function B$e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Dt(n)?"quantitative":Re(n)?"nominal":Vc(n)?"temporal":void 0,{...e,type:t}}function Zk(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!Ek(i)&&!nl(i)&&!mo(i)&&(ce(j_e(i)),delete o.aggregate),r&&(o.timeUnit=Cn(r)),s&&(o.field=`${s}`),_t(a)&&(o.bin=iS(a,t)),Rn(a)&&!Wt(t)&&ce(vAe(t)),Si(o)){const{type:l}=o,c=qAe(l);l!==c&&(o.type=c),l!=="quantitative"&&G2(i)&&(ce(B_e(l,i)),o.type="quantitative")}else if(!HG(t)){const l=U$e(o,t);o.type=l}if(Si(o)){const{compatible:l,warning:c}=j$e(o,t)||{};l===!1&&ce(c)}if(Vk(o)&&Re(o.sort)){const{sort:l}=o;if(a9(l))return{...o,sort:{encoding:l}};const c=l.substring(1);if(l.charAt(0)==="-"&&a9(c))return{...o,sort:{encoding:c,order:"descending"}}}if(Xk(o)){const{header:l}=o;if(l){const{orient:c,...d}=l;if(c)return{...o,header:{...d,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return o}function iS(e,t){return $m(e)?{maxbins:HF(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:HF(t)}:e}const Vf={compatible:!0};function j$e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ao:case so:case B2:return ix(e)?Vf:{compatible:!1,warning:H_e(t)};case kt:case Dn:case Qu:case qh:case Bi:case gs:case ps:case Mm:case Tm:case j2:case wc:case P2:case I2:case Hc:case Br:case ba:case q2:return Vf;case Sa:case Lr:case xa:case Ea:return n!==$c?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Vf;case $o:case Ku:case Ju:case el:case Ao:case _o:case wo:case va:case hs:case Zu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Vf;case ji:case tl:return!ix(e)&&!N$e(e)?{compatible:!1,warning:G_e(t)}:Vf;case Gd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Vf}}function Qd(e){const{formatType:t}=rx(e);return t==="time"||!t&&P$e(e)}function P$e(e){return e&&(e.type==="temporal"||fe(e)&&!!e.timeUnit)}function rS(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Cn(t)?.unit;let s=a||n==="temporal",o;return km(e)?o=e.expr:ve(e)?o=e.signal:Vc(e)?(s=!0,o=Ac(e)):(Re(e)||Dt(e))&&s&&(o=`datetime(${ut(e)})`,DAe(a)&&(Dt(e)&&e<1e4||Re(e)&&isNaN(Date.parse(e)))&&(o=Ac({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:ut(e)}function KY(e,t){const{type:n}=e;return t.map(i=>{const r=fe(e)&&!Wc(e.timeUnit)?e.timeUnit:void 0,a=rS(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Lm(e,t){return _t(e.bin)?ys(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const u9={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Um(e){return e?.condition}const JY=["domain","grid","labels","ticks","title"],I$e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},eX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},q$e={...eX,style:1,labelExpr:1,encoding:1};function l9(e){return tn(q$e,e)}const H$e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},tX=oe(H$e);function Mo(e){return ue(e,"mark")}class aS{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Mo(t)?b$e(t.mark)===this.name:!1}}function sc(e,t){const n=e?.[t];return n?me(n)?qd(n,i=>!!i.field):fe(n)||nS(n):!1}function nX(e,t){const n=e?.[t];return n?me(n)?qd(n,i=>!!i.field):fe(n)||vs(n)||Fm(n):!1}function iX(e,t){if(Wt(t)){const n=e[t];if((fe(n)||vs(n))&&(wY(n.type)||fe(n)&&n.timeUnit)){const i=yk(t);return nX(e,i)}}return!1}function rX(e){return qd(Bwe,t=>{if(sc(e,t)){const n=e[t];if(me(n))return qd(n,i=>!!i.aggregate);{const i=da(n);return i&&!!i.aggregate}}return!1})}function aX(e,t){const n=[],i=[],r=[],a=[],s={};return Kk(e,(o,l)=>{if(fe(o)){const{field:c,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=Wk(o)?.title;let S=he(o,{forAs:!0});const w={...b?[]:{title:vd(o,t,{allowDisabling:!0})},...y,field:S};if(d){let _;if(nl(d)?(_="argmax",S=he({op:"argmax",field:d.argmax},{forAs:!0}),w.field=`${S}.${c}`):mo(d)?(_="argmin",S=he({op:"argmin",field:d.argmin},{forAs:!0}),w.field=`${S}.${c}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(_=d),_){const A={op:_,as:S};c&&(A.field=c),a.push(A)}}else if(n.push(S),Si(o)&&_t(h)){if(i.push({bin:h,field:c,as:S}),n.push(he(o,{binSuffix:"end"})),Lm(o,l)&&n.push(he(o,{binSuffix:"range"})),Wt(l)){const _={field:`${S}_end`};s[`${l}2`]=_}w.bin="binned",HG(l)||(w.type=$c)}else if(p&&!Wc(p)){r.push({timeUnit:p,field:c,as:S});const _=Si(o)&&o.type!==Yd&&"time";_&&(l===Mm||l===wc?w.formatType=_:Qwe(l)?w.legend={formatType:_,...w.legend}:Wt(l)&&(w.axis={formatType:_,...w.axis}))}s[l]=w}else n.push(c),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function G$e(e,t,n){const i=Kwe(t,n);if(i){if(i==="binned"){const r=e[t===va?kt:Dn];return!!(fe(r)&&fe(e[t])&&Rn(r.bin))}}else return!1;return!0}function Y$e(e,t,n,i){const r={};for(const a of oe(e))qG(a)||ce(q_e(a));for(let a of Gwe){if(!e[a])continue;const s=e[a];if(Dm(a)){const o=Hwe(a),l=r[o];if(fe(l)&&IAe(l.type)&&fe(s)&&!l.timeUnit){ce(L_e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ce(F_e),a=Br),!G$e(e,a,t)){ce(X2(a,t));continue}if(a===Ao&&t==="line"&&da(e[a])?.aggregate){ce(I_e);continue}if(a===Bi&&(n?"fill"in e:"stroke"in e)){ce(oY("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===Tm||a===Gd&&!me(s)&&!fa(s)||a===wc&&me(s)){if(s){if(a===Gd){const o=e[a];if(GY(o)){r[a]=o;continue}}r[a]=Xt(s).reduce((o,l)=>(fe(l)?o.push(Zk(l,a)):ce(MC(l,a)),o),[])}}else{if(a===wc&&s===null)r[a]=null;else if(!fe(s)&&!vs(s)&&!fa(s)&&!zm(s)&&!ve(s)){ce(MC(s,a));continue}r[a]=ZY(s,a,i)}}return r}function sS(e,t){const n={};for(const i of oe(e)){const r=ZY(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function X$e(e){const t=[];for(const n of oe(e))if(sc(e,n)){const i=e[n],r=Xt(i);for(const a of r)fe(a)?t.push(a):nS(a)&&t.push(a.condition)}return t}function Kk(e,t,n){if(e)for(const i of oe(e)){const r=e[i];if(me(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function V$e(e,t,n,i){return e?oe(e).reduce((r,a)=>{const s=e[a];return me(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function sX(e,t){return oe(t).reduce((n,i)=>{switch(i){case kt:case Dn:case P2:case q2:case I2:case va:case hs:case Qu:case qh:case Br:case _o:case ba:case wo:case Zu:case xa:case Sa:case Ea:case Lr:case Mm:case ji:case Hc:case wc:return n;case Gd:if(e==="line"||e==="trail")return n;case Tm:case j2:{const r=t[i];if(me(r)||fe(r))for(const a of Xt(r))a.aggregate||n.push(he(a,{}));return n}case Ao:if(e==="trail")return n;case Bi:case gs:case ps:case $o:case Ku:case Ju:case tl:case el:{const r=da(t[i]);return r&&!r.aggregate&&n.push(he(r,{})),n}}},[])}function W$e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(me(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return me(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function OC(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${Jk(t)}`:"";return{field:s+t.field,type:t.type,title:ve(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=X$e(n).map(k$e);return{tooltip:[...r,...Ba(a,Ye)]}}function Jk(e){const{title:t,field:n}=e;return Vt(t,n)}function eO(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:c,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=Jk(n);return oX(e,o,r,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Re(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function oX(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...is(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...$m(e[t])?{}:e[t]}}]:[]}function uX(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Ly(a,n),continuousAxisChannelDef2:Ly(s,n),continuousAxisChannelDefError:Ly(o,n),continuousAxisChannelDefError2:Ly(l,n),continuousAxis:r}}function Ly(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ce(yAe(n,t)),i}else return e}function lX(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(is(n)&&n.orient)return n.orient;if(pu(r)){if(pu(a)){const s=fe(r)&&r.aggregate,o=fe(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Qd(a)&&!Qd(r)?"horizontal":"vertical"}return"horizontal"}else{if(pu(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const sx="boxplot",Q$e=["box","median","outliers","rule","ticks"],Z$e=new aS(sx,fX);function cX(e){return Dt(e)?"tukey":e}function fX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=is(n)?n:{type:n};r&&ce(aY("boxplot"));const l=o.extent??t.boxplot.extent,c=yt("size",o,t),d=o.invalid,h=cX(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:w,aggregate:_,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:C,customTooltipWithoutAggregatedField:D}=K$e(e,l,t),T=Ih(b.field),{color:O,size:R,...L}=A,z=Kt=>eO(o,S,b,Kt,t.boxplot),H=z(L),U=z(A),P=(Je(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",B=z({...L,...R?{size:R}:{},color:{condition:{test:`${ft(`lower_box_${b.field}`)} >= ${ft(`upper_box_${b.field}`)}`,...O||{value:P}}}}),N=OC([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),q={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},Y=h==="min-max"?N:OC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),ee=[...H({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...H({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...H({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...H({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],F=[...h!=="tukey"?ee:[],...U({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:C,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...B({partName:"median",mark:{type:"tick",invalid:d,...Je(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:N})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:F};const V=ft(`lower_box_${b.field}`),ae=ft(`upper_box_${b.field}`),se=`(${ae} - ${V})`,de=`${V} - ${l} * ${se}`,be=`${ae} + ${l} * ${se}`,Se=ft(b.field),It={joinaggregate:dX(b.field),groupby:w},Qe={transform:[{filter:`(${de} <= ${Se}) && (${Se} <= ${be})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},..._],groupby:w}],layer:ee},{tooltip:ge,...ke}=L,{scale:ze,axis:le}=b,qt=Jk(b),Ze=oX(o,"outliers",t.boxplot,{transform:[{filter:`(${Se} < ${de}) || (${Se} > ${be})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...qt!==void 0?{title:qt}:{},...ze!==void 0?{scale:ze}:{},...le!==void 0?{axis:le}:{}},...ke,...O?{color:O}:{},...D?{tooltip:D}:{}}})[0];let Zt;const gn=[...p,...y,It];return Ze?Zt={transform:gn,layer:[Ze,Qe]}:(Zt=Qe,Zt.transform.unshift(...gn)),{...s,layer:[Zt,{transform:v,layer:F}]}}function dX(e){const t=Ih(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function K$e(e,t,n){const i=lX(e,sx),{continuousAxisChannelDef:r,continuousAxis:a}=uX(e,i,sx),s=r.field,o=Ih(s),l=cX(t),c=[...dX(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${ft(`upper_box_${o}`)} - ${ft(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${ft(`upper_box_${o}`)} + ${ft(`iqr_${o}`)} * ${t}, ${ft(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${ft(`lower_box_${o}`)} - ${ft(`iqr_${o}`)} * ${t}, ${ft(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=W$e(p),{bins:b,timeUnits:S,aggregate:w,groupby:_,encoding:A}=aX(v,n),$=i==="vertical"?"horizontal":"vertical",C=i,D=[...b,...S,{aggregate:[...w,...c],groupby:_},...d];return{bins:b,timeUnits:S,transform:D,groupby:_,aggregate:w,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:C,customTooltipWithoutAggregatedField:y}}const tO="errorbar",J$e=["ticks","rule"],eCe=new aS(tO,hX);function hX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:c}=gX(e,tO,t);delete a.size;const d=eO(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:c}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function tCe(e,t){const{encoding:n}=e;if(nCe(n))return{orient:lX(e,t),inputType:"raw"};const i=iCe(n),r=rCe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Oe(o)&&Oe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Oe(o)){if(pu(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Oe(l)){if(pu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,c=n.yError,d=n.yError2;if(Oe(l)&&!Oe(o))throw new Error(`${t} cannot have xError2 without xError`);if(Oe(d)&&!Oe(c))throw new Error(`${t} cannot have yError2 without yError`);if(Oe(o)&&Oe(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Oe(o)){if(pu(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Oe(c)){if(pu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function nCe(e){return(Oe(e.x)||Oe(e.y))&&!Oe(e.x2)&&!Oe(e.y2)&&!Oe(e.xError)&&!Oe(e.xError2)&&!Oe(e.yError)&&!Oe(e.yError2)}function iCe(e){return Oe(e.x2)||Oe(e.y2)}function rCe(e){return Oe(e.xError)||Oe(e.xError2)||Oe(e.yError)||Oe(e.yError2)}function gX(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=is(i)?i:{type:i};a&&ce(aY(t));const{orient:c,inputType:d}=tCe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=uX(e,c,t),{errorBarSpecificAggregate:S,postAggregateCalculates:w,tooltipSummary:_,tooltipTitleWithFieldName:A}=aCe(l,h,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:C,[b==="x"?"xError":"yError"]:D,[b==="x"?"xError2":"yError2"]:T,...O}=r,{bins:R,timeUnits:L,aggregate:z,groupby:H,encoding:U}=aX(O,n),P=[...z,...S],B=d!=="raw"?[]:H,N=OC(_,h,U,A);return{transform:[...o.transform??[],...R,...L,...P.length===0?[]:[{aggregate:P,groupby:B}],...w],groupby:B,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:U,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:N}}function aCe(e,t,n,i,r,a,s,o){let l=[],c=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ce(mAe(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],c=[{calculate:`${ft(`center_${d}`)} + ${ft(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${ft(`center_${d}`)} - ${ft(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:Cm(y)},{fieldPrefix:"upper_",titlePrefix:c9(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:c9(y,v,"-")}],p=!0;else{let b,S,w;v==="ci"?(b="mean",S="ci0",w="ci1"):(b="median",S="q1",w="q3"),l=[{op:S,field:d,as:`lower_${d}`},{op:w,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:vd({field:d,aggregate:w,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:vd({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:vd({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ce(pAe(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],c=[{calculate:ft(n.field),as:`upper_${d}`},{calculate:ft(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],c=[{calculate:`${ft(d)} + ${ft(i.field)}`,as:`upper_${d}`}],r?c.push({calculate:`${ft(d)} + ${ft(r.field)}`,as:`lower_${d}`}):c.push({calculate:`${ft(d)} - ${ft(i.field)}`,as:`lower_${d}`}));for(const y of c)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Ec(Ec(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function c9(e,t,n){return`${Cm(e)} ${n} ${t}`}const nO="errorband",sCe=["band","borders"],oCe=new aS(nO,pX);function pX(e,{config:t}){e={...e,encoding:sS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=gX(e,nO,t),c=s,d=eO(c,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):c.interpolate?ce(t9("interpolate")):c.tension&&ce(t9("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const mX={};function iO(e,t,n){const i=new aS(e,t);mX[e]={normalizer:i,parts:n}}function uCe(){return oe(mX)}iO(sx,fX,Q$e);iO(tO,hX,J$e);iO(nO,pX,sCe);const lCe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],yX={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},vX={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},cCe=oe(yX),fCe=oe(vX),dCe={header:1,headerRow:1,headerColumn:1,headerFacet:1},bX=oe(dCe),xX=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],hCe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},gCe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ha="_vgsid_",pCe={point:{on:"click",fields:[ha],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function rO(e){return e==="legend"||!!e?.legend}function cA(e){return rO(e)&&Je(e)}function aO(e){return!!e?.select}function SX(e){const t=[];for(const n of e||[]){if(aO(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function mCe(e){return oS(e)||oO(e)||sO(e)}function sO(e){return ue(e,"concat")}function oS(e){return ue(e,"vconcat")}function oO(e){return ue(e,"hconcat")}function EX({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rs(e){return ue(e,"step")}function f9(e){return ue(e,"view")||ue(e,"width")||ue(e,"height")}const d9=20,yCe={align:1,bounds:1,center:1,columns:1,spacing:1},vCe=oe(yCe);function bCe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(tS(e)&&!Rm(e.facet)||sO(e))&&(r.columns=s),oS(e)&&(r.columns=1);for(const o of vCe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=Dt(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function NC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function RC(e,t){const n=ox(e,t);return rs(n)?n.step:wX}function ox(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Vt(n,{step:e.step})}const wX=20,xCe={continuousWidth:300,continuousHeight:300,step:wX},SCe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:xCe,mark:h$e,arc:{},area:{},bar:y$e,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ik,rule:{color:"black"},square:{},text:{color:"black"},tick:v$e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:VAe,projection:{},legend:hCe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:pCe,style:{},title:{},facet:{spacing:d9},concat:{spacing:d9},normalizedNumberFormat:".0%"},Ls=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],h9={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},g9={blue:Ls[0],orange:Ls[1],red:Ls[2],teal:Ls[3],green:Ls[4],yellow:Ls[5],purple:Ls[6],pink:Ls[7],brown:Ls[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ECe(e={}){return{signals:[{name:"color",value:Je(e)?{...g9,...e}:g9}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function wCe(e){return{signals:[{name:"fontSize",value:Je(e)?{...h9,...e}:h9}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function _Ce(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function _X(e){const t=oe(e||{}),n={};for(const i of t){const r=e[i];n[i]=Um(r)?KG(r):nr(r)}return n}function ACe(e){const t=oe(e),n={};for(const i of t)n[i]=_X(e[i]);return n}const $Ce=[...NY,...tX,...bX,"background","padding","legend","lineBreak","scale","style","title","view"];function AX(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=TG({},De(SCe),n?_Ce(n):{},t?ECe(t):{},i?wCe(i):{},a||{});r&&L2(s,"selection",r,!0);const o=ur(s,$Ce);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=nr(s[l]));for(const l of NY)s[l]&&(o[l]=zn(s[l]));for(const l of tX)s[l]&&(o[l]=_X(s[l]));for(const l of bX)s[l]&&(o[l]=zn(s[l]));if(s.legend&&(o.legend=zn(s.legend)),s.scale){const{invalid:l,...c}=s.scale,d=zn(l,{level:1});o.scale={...zn(c),...oe(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=ACe(s.style)),s.title&&(o.title=zn(s.title)),s.view&&(o.view=zn(s.view)),o}const CCe=new Set(["view",...o$e]),MCe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],TCe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...d$e};function DCe(e){e=De(e);for(const t of MCe)delete e[t];if(e.axis)for(const t in e.axis)Um(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of lCe)delete e.legend[t];if(e.mark){for(const t of i9)delete e.mark[t];e.mark.tooltip&&Je(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(SX(e.params)),delete e.params);for(const t of CCe){for(const i of i9)delete e[t][i];const n=TCe[t];if(n)for(const i of n)delete e[t][i];OCe(e,t)}for(const t of uCe())delete e[t];kCe(e);for(const t in e)Je(e[t])&&St(e[t])&&delete e[t];return St(e)?void 0:e}function kCe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=ZG(e.title);St(t)||(e.style["group-title"]={...e.style["group-title"],...t}),St(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),St(i)?delete e.title:e.title=i}function OCe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};St(a)||(e.style[n??t]=a),delete e[t]}function uS(e){return ue(e,"layer")}function NCe(e){return ue(e,"repeat")}function RCe(e){return!me(e.repeat)&&ue(e.repeat,"layer")}class uO{map(t,n){return tS(t)?this.mapFacet(t,n):NCe(t)?this.mapRepeat(t,n):oO(t)?this.mapHConcat(t,n):oS(t)?this.mapVConcat(t,n):sO(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(uS(t))return this.mapLayer(t,n);if(Mo(t))return this.mapUnit(t,n);throw new Error(wk(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const zCe={zero:1,center:1,normalize:1};function FCe(e){return tn(zCe,e)}const LCe=new Set([DY,Z2,Q2,ex,J2,jk,Pk,K2,kY,Bk]),UCe=new Set([Z2,Q2,DY]);function Wf(e){return fe(e)&&Vd(e)==="quantitative"&&!e.bin}function p9(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(fe(s)&&fe(o))if(Wf(s)&&Wf(o)){if(s.stack)return t;if(o.stack)return r;const l=fe(s)&&!!s.aggregate,c=fe(o)&&!!o.aggregate;if(l!==c)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Wf(s))return t;if(Wf(o))return r}else{if(Wf(s))return a&&n==="vertical"?void 0:t;if(Wf(o))return a&&n==="horizontal"?void 0:r}}function BCe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function $X(e,t){const n=is(e)?e:{type:e},i=n.type;if(!LCe.has(i))return null;const r=p9(t,"x",n)||p9(t,"theta",n);if(!r)return null;const a=t[r],s=fe(a)?he(a,{}):void 0,o=BCe(r),l=[],c=new Set;if(t[o]){const b=t[o],S=fe(b)?he(b,{}):void 0;S&&S!==s&&(l.push(o),c.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=fe(h)?he(h,{}):void 0;p&&p!==s&&(l.push(d),c.add(p));const y=Ywe.reduce((b,S)=>{if(S!=="tooltip"&&sc(t,S)){const w=t[S];for(const _ of Xt(w)){const A=da(_);if(A.aggregate)continue;const $=he(A,{});(!$||!c.has($))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?$m(a.stack)?v=a.stack?"zero":null:v=a.stack:UCe.has(i)&&(v="zero"),!v||!FCe(v)||rX(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Fn.LINEAR&&a?.stack&&ce(dAe(a.scale.type)),Oe(t[ms(r)])?(a.stack!==void 0&&ce(fAe(r)),null):(fe(a)&&a.aggregate&&!a_e.has(a.aggregate)&&ce(hAe(a.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:r,impute:a.impute===null?!1:il(i),stackBy:y,offset:v}))}function CX(e,t,n){const i=zn(e),r=yt("orient",i,n);if(i.orient=qCe(i.type,t,r),r!==void 0&&r!==i.orient&&ce(W_e(i.orient,r)),i.type==="bar"&&i.orient){const l=yt("cornerRadiusEnd",i,n);if(l!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:p$e[i.orient];for(const d of c)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=yt("opacity",i,n),s=yt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=PCe(i.type,t)),yt("cursor",i,n)===void 0&&(i.cursor=jCe(i,t,n)),i}function jCe(e,t,n){return t.href||e.href||yt("href",e,n)?"pointer":e.cursor}function PCe(e,t){if(qe([J2,Bk,jk,Pk],e)&&!rX(t))return .7}function ICe(e,t,{graticule:n}){if(n)return!1;const i=ns("filled",e,t),r=e.type;return Vt(i,r!==J2&&r!==K2&&r!==ex)}function qCe(e,t,n){switch(e){case J2:case jk:case Pk:case kY:case a$e:case r$e:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case Z2:if(fe(i)&&(Rn(i.bin)||fe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(fe(r)&&(Rn(r.bin)||fe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(fe(i)&&i.type===$c&&!_t(i.bin)||nx(i))&&fe(r)&&Rn(r.bin)?"horizontal":"vertical";if(!s)return(fe(r)&&r.type===$c&&!_t(r.bin)||nx(r))&&fe(i)&&Rn(i.bin)?"vertical":"horizontal"}case ex:if(a&&!(fe(i)&&Rn(i.bin))&&s&&!(fe(r)&&Rn(r.bin)))return;case Q2:if(s)return fe(r)&&Rn(r.bin)?"horizontal":"vertical";if(a)return fe(i)&&Rn(i.bin)?"vertical":"horizontal";if(e===ex){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case K2:case Bk:{const o=o9(i),l=o9(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const c=Si(i)&&i.type===Yd,d=Si(r)&&r.type===Yd;if(c&&!d)return"vertical";if(!c&&d)return"horizontal"}return}}return"vertical"}function HCe(e){const{point:t,line:n,...i}=e;return oe(i).length>1?i:i.type}function GCe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ur(e[t],["point","line"])});return e}function fA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Je(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Je(t.point)?t.point:{}:void 0}function m9(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class YCe{name="path-overlay";hasMatchingType(t,n){if(Mo(t)){const{mark:i,encoding:r}=t,a=is(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!fA(a,n[a.type],r);case"area":return!!fA(a,n[a.type],r)||!!m9(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:c,...d}=t,h=sS(c,r),p=is(o)?o:{type:o},y=fA(p,r[p.type],h),v=p.type==="area"&&m9(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:HCe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ur(h,["shape"])}],S=$X(CX(p,h,r),h);let w=h;if(S){const{fieldChannel:_,offset:A}=S;w={...h,[_]:{...h[_],...A?{stack:A}:{}}}}return w=ur(w,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...Id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:w}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Id(p,["clip","tooltip"]),...y},encoding:w}),i({...d,layer:b},{...n,config:GCe(r)})}}function XCe(e,t){return t?Rm(e)?TX(e,t):MX(e,t):e}function dA(e,t){return t?TX(e,t):e}function zC(e,t,n){const i=t[e];if(T$e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ce($_e(i.repeat));return}return t}function MX(e,t){if(e=zC("field",e,t),e!==void 0){if(e===null)return null;if(Vk(e)&&oo(e.sort)){const n=zC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function y9(e,t){if(fe(e))return MX(e,t);{const n=zC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function v9(e,t){if(Oe(e)){const n=y9(e,t);if(n)return n;if(zm(e))return{condition:e.condition}}else{if(Fm(e)){const n=y9(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function TX(e,t){const n={};for(const i in e)if(ue(e,i)){const r=e[i];if(me(r))n[i]=r.map(a=>v9(a,t)).filter(a=>a);else{const a=v9(r,t);a!==void 0&&(n[i]=a)}}return n}class VCe{name="RuleForRangedLine";hasMatchingType(t){if(Mo(t)){const{encoding:n,mark:i}=t;if(i==="line"||is(i)&&i.type==="line")for(const r of qwe){const a=Gc(r),s=n[a];if(n[r]&&(fe(s)&&!Rn(s.bin)||vs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ce(V_e(!!r.x2,!!r.y2)),i({...t,mark:Je(a)?{...a,type:"rule"}:"rule"},n)}}class WCe extends uO{nonFacetUnitNormalizers=[Z$e,eCe,oCe,new YCe,new VCe];map(t,n){if(Mo(t)){const i=sc(t.encoding,ao),r=sc(t.encoding,so),a=sc(t.encoding,B2);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=dA(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return RCe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:l}=i,{repeater:c={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:r}},n):{...a,layer:l.map(h=>{const p={...c,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Tt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!me(i)&&t.columns&&(t=ur(t,["columns"]),ce(ZF("repeat")));const o=[],{repeater:l={},repeaterPrefix:c=""}=n,d=!me(i)&&i.row||[l?l.row:null],h=!me(i)&&i.column||[l?l.column:null],p=me(i)&&i||[l?l.repeat:null];for(const v of p)for(const b of d)for(const S of h){const w={repeat:v,row:b,column:S,layer:l.layer},_=`${(r.name?`${r.name}_`:"")+c}child__${me(i)?`${Tt(v)}`:(i.row?`row_${Tt(b)}`:"")+(i.column?`column_${Tt(S)}`:"")}`,A=this.map(r,{...n,repeater:w,repeaterPrefix:_});A.name=_,o.push(ur(A,["data"]))}const y=me(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return Rm(i)&&t.columns&&(t=ur(t,["columns"]),ce(ZF("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=x9({parentProjection:s,projection:r}),c=b9({parentEncoding:a,encoding:dA(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:l,projection:c,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),w=dA(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...l?{width:l}:{},...d?{height:d}:{},...h?{view:h}:{},...c?{projection:c}:{},mark:o,encoding:w,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ce(Y_e([...i?[ao]:[],...r?[so]:[]]));const s={},o={};for(const l of[ao,so]){const c=t[l];if(c){const{align:d,center:h,spacing:p,columns:y,...v}=c;s[l]=v;for(const b of["align","center","spacing"])c[b]!==void 0&&(o[b]??={},o[b][l]=c[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:l,columns:c,...d}=a;return{facetMapping:XCe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,l={...r,parentEncoding:b9({parentEncoding:n,encoding:a,layer:!0}),parentProjection:x9({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}},l)}}function b9({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...oe(e),...oe(t)]);for(const a of r){const s=t[a],o=e[a];if(Oe(s)){const l={...o,...s};i[a]=l}else Fm(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||fa(o)||ve(o)||Oe(o)||me(o))&&(i[a]=o)}}else i=t;return!i||St(i)?void 0:i}function x9(e){const{parentProjection:t,projection:n}=e;return t&&n&&ce(z_e({parentProjection:t,projection:n})),n??t}function lO(e){return ue(e,"filter")}function QCe(e){return ue(e,"stop")}function DX(e){return ue(e,"lookup")}function ZCe(e){return ue(e,"data")}function KCe(e){return ue(e,"param")}function JCe(e){return ue(e,"pivot")}function eMe(e){return ue(e,"density")}function tMe(e){return ue(e,"quantile")}function nMe(e){return ue(e,"regression")}function iMe(e){return ue(e,"loess")}function rMe(e){return ue(e,"sample")}function aMe(e){return ue(e,"window")}function sMe(e){return ue(e,"joinaggregate")}function oMe(e){return ue(e,"flatten")}function uMe(e){return ue(e,"calculate")}function kX(e){return ue(e,"bin")}function lMe(e){return ue(e,"impute")}function cMe(e){return ue(e,"timeUnit")}function fMe(e){return ue(e,"aggregate")}function dMe(e){return ue(e,"stack")}function hMe(e){return ue(e,"fold")}function gMe(e){return ue(e,"extent")&&!ue(e,"density")&&!ue(e,"regression")}function pMe(e){return e.map(t=>lO(t)?{filter:md(t.filter,PAe)}:t)}class mMe extends uO{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=S9(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=S9(t,n),t.encoding){const i={};for(const[r,a]of Lu(t.encoding))i[r]=OX(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Lu(i).map(([a,s])=>{const{init:o,bind:l,empty:c,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=c!=="none";for(const h of nn(n.selectionPredicates[a]??{}))h.empty=c!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function S9(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(lO(a))return{filter:FC(a,t)};if(kX(a)&&Yc(a.bin))return{...a,bin:NX(a.bin)};if(DX(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function OX(e,t){const n=De(e);if(fe(n)&&Yc(n.bin)&&(n.bin=NX(n.bin)),Qc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(zm(n))if(me(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:FC(i,t)}});else{const{selection:i,param:r,test:a,...s}=OX(n.condition,t);n.condition=r?n.condition:{...s,test:FC(n.condition,t)}}return n}function NX(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function FC(e,t){const n=i=>md(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):md(e.test||e.filter,i=>i.selection?n(i.selection):i)}class LC extends uO{map(t,n){const i=n.selections??[];if(t.params&&!Mo(t)){const r=[];for(const a of t.params)aO(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(Re(o)&&(o===t.name||r.includes(o))||me(o)&&o.map(l=>r.indexOf(l)).every((l,c,d)=>l!==-1&&(c===0||l>d[c-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=LC.prototype[e];LC.prototype[e]=function(n,i){return t.call(this,n,yMe(n,i))}}function yMe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function RX(e,t){t===void 0&&(t=AX(e.config));const n=SMe(e,t),{width:i,height:r}=e,a=EMe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const vMe=new WCe,bMe=new mMe,xMe=new LC;function SMe(e,t={}){const n={config:t};return xMe.map(vMe.map(bMe.map(e,n),n),n)}function E9(e){return Re(e)?{type:e}:e??{}}function EMe(e,t,n){let{width:i,height:r}=t;const a=Mo(e)||uS(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ce(XF("width")),i=void 0),r=="container"&&(ce(XF("height")),r=void 0));const o={type:"pad",...s,...n?E9(n.autosize):{},...E9(e.autosize)};if(o.type==="fit"&&!a&&(ce(p_e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&ce(VF("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&ce(VF("height")),!ar(o,{type:"pad"}))return o}function wMe(e){return["fit","fit-x","fit-y"].includes(e)}function _Me(e){return e?`fit-${H2(e)}`:"fit"}const AMe=["background","padding"];function w9(e,t){const n={};for(const i of AMe)e&&e[i]!==void 0&&(n[i]=nr(e[i]));return t&&(n.params=e.params),n}class To{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new To(De(this.explicit),De(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Vt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of oe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function Ki(e){return{explicit:!1,value:e}}function zX(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:lS(t,n,i,r)}}function lS(e,t,n,i){return e.explicit&&t.explicit&&ce(rAe(n,i,e.value,t.value)),e}function ju(e,t,n,i,r=lS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class $Me extends To{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Zd(e){return ue(e,"url")}function H0(e){return ue(e,"values")}function FX(e){return ue(e,"name")&&!Zd(e)&&!H0(e)&&!wu(e)}function wu(e){return e&&(LX(e)||UX(e)||cO(e))}function LX(e){return ue(e,"sequence")}function UX(e){return ue(e,"sphere")}function cO(e){return ue(e,"graticule")}var zt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(zt||(zt={}));function BX({invalid:e,isPath:t}){switch(RY(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function CMe(e){const{marks:t,scales:n}=BX(e);return t===n?zt.Main:n==="include-invalid-values"?zt.PreFilterInvalid:zt.PostFilterInvalid}class ht{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ce(O_e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class zi extends ht{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${zG()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function hA(e){return e.as!==void 0}function _9(e){return`${e}_end`}class Xa extends ht{timeUnits;clone(){return new Xa(null,De(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:l}=a;if(l){let c;if(Wc(l)){if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=Bu({fieldDef:a,markDef:h,config:p});(q0(d)||y)&&(c={timeUnit:Cn(l),field:o})}}else c={as:he(a,{forAs:!0}),field:o,timeUnit:l};if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=Bu({fieldDef:a,markDef:h,config:p});q0(d)&&Wt(s)&&y!==.5&&(c.rectBandPosition=y)}c&&(r[Ye(c)]=c)}return r},{});return St(i)?null:new Xa(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Cn(i),s={...r,timeUnit:a};return new Xa(t,{[Ye(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Lu(this.timeUnits)){const a=hA(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(nn(this.timeUnits).map(t=>hA(t)?t.as:_9(t.field)))}dependentFields(){return new Set(nn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ye(this.timeUnits)}`}assemble(){const t=[];for(const n of nn(this.timeUnits)){const{rectBandPosition:i}=n,r=Cn(n.timeUnit);if(hA(n)){const{field:a,as:s}=n,{unit:o,utc:l,...c}=r,d=[s,`${s}_end`];t.push({field:Fr(a),type:"timeunit",...o?{units:V2(o)}:{},...l?{timezone:"utc"}:{},...c,as:d}),t.push(...A9(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=jX({timeUnit:r,field:s}),l=_9(s);t.push({type:"formula",expr:o,as:l}),t.push(...A9([s,l],i,r))}}return t}}const cS="offsetted_rect_start",fS="offsetted_rect_end";function jX({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=mY(i),{part:s,step:o}=xY(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${ft(t)}, ${n?-o:o})`}function A9([e,t],n,i){if(n!==void 0&&n!==.5){const r=ft(e),a=ft(t);return[{type:"formula",expr:$9([jX({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${cS}`},{type:"formula",expr:$9([r,a],n+.5),as:`${e}_${fS}`}]}return[]}function $9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Bm="_tuple_fields";class MMe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const TMe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new MMe,a={},s={},o=new Set,l=(v,b)=>{const S=b==="visual"?v.channel:v.field;let w=Tt(`${i}_${S}`);for(let _=1;o.has(w);_++)w=Tt(`${i}_${S}_${_}`);return o.add(w),{[b]:w}},c=t.type,d=e.config.selection[c],h=n.value!==void 0?Xt(n.value):null;let{fields:p,encodings:y}=Je(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(Je(v))for(const b of oe(v))Iwe(b)?(y||(y=[])).push(b):c==="interval"?(ce(A_e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){ce(m_e(v,b.aggregate));continue}else if(!S){ce(QF(v));continue}if(b.timeUnit&&!Wc(b.timeUnit)){S=e.vgField(v);const w={timeUnit:b.timeUnit,as:S,field:b.field};s[Ye(w)]=w}if(!a[S]){const w=c==="interval"&&ys(v)&&ca(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",_={field:S,channel:v,type:w,index:r.items.length};_.signals={...l(_,"data"),...l(_,"visual")},r.items.push(a[S]=_),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ha,PG(v)?(_.geoChannel=v,_.channel=jG(v),r.hasChannel[_.channel]=a[S]):r.hasChannel[v]=a[S]}}else ce(QF(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ha}h&&(t.init=h.map(v=>r.items.map(b=>Je(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),St(s)||(r.timeUnit=new Xa(null,s))},signals:(e,t,n)=>{const i=t.name+Bm;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(HX)})}},PX="_curr",Mv="anim_value",td="anim_clock",UC="eased_anim_clock",IX="min_extent",qX="max_range_extent",gA="last_tick_at",pA="is_playing",DMe=1/60*1e3,kMe=(e,t)=>[{name:UC,update:td},{name:`${e}_domain`,init:`domain('${t}')`},{name:IX,init:`extent(${e}_domain)[0]`},{name:qX,init:`extent(range('${t}'))[1]`},{name:Mv,update:`invert('${t}', ${UC})`}],OMe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Va(t)&&(n=n.concat([{name:td,init:"0",on:[{events:{type:"timer",throttle:DMe},update:`${pA} ? (${td} + (now() - ${gA}) > ${qX} ? 0 : ${td} + (now() - ${gA})) : ${td}`}]},{name:gA,init:"now()",on:[{events:[{signal:td},{signal:pA}],update:"now()"}]},{name:pA,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Bm,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=nn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+bd):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let c=`unit: ${oc(e)}, `;if(t.project.hasSelectionId)c+=`${ha}: ${s}[${Ke(ha)}]`;else if(Va(t))c+=`fields: ${r}, values: [${Mv} ? ${Mv} : ${IX}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${Ke(e.vgField(h.channel,{}))}], ${s}[${Ke(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${Ke(h.field)}]`).join(", ");c+=`fields: ${r}, values: [${d}]`}if(Va(t))return n.concat(kMe(t.name,e.scaleName(Zu)),[{name:i+vo,on:[{events:[{signal:UC},{signal:Mv}],update:`{${c}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+vo,on:d?[{events:d,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}}};function HX(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Fr(r.field),r}function Tc(e,t=!0,n=wwe){if(me(e)){const i=e.map(r=>Tc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Vc(e))return n(t?Ac(e):TAe(e));return t?n(ut(e)):e}function NMe(e,t){for(const n of nn(e.component.selection??{})){const i=n.name;let r=`${i}${vo}, ${n.resolve==="global"?"true":`{unit: ${oc(e)}}`}`;for(const a of hS)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+s3e,on:[{events:{signal:n.name+vo},update:`modify(${Ke(n.name+Dc)}, ${r})`}]})}return fO(t)}function RMe(e,t){if(e.component.selection&&oe(e.component.selection).length){const n=Ke(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Wu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return fO(t)}function zMe(e,t){let n=!1;for(const i of nn(e.component.selection??{})){const r=i.name,a=Ke(r+Dc);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${oV}(${a}, ${Ke(o)}${l}`})}n=!0;for(const o of hS)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),fO(t)}function FMe(e,t){const n=[],i=[],r=oc(e,{escape:!1});for(const a of nn(e.component.selection??{})){const s={name:a.name+Dc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ha}}]),a.init){const l=a.project.items.map(HX);s.values=a.project.hasSelectionId?a.init.map(c=>({unit:r,[ha]:Tc(c,!1)[0]})):a.init.map(c=>({unit:r,fields:l,values:Tc(c,!1)}))}if([...n,...t].filter(l=>l.name===a.name+Dc).length||n.push(s),Va(a)&&t.length){const l=e.lookupDataSource(e.getDataName(zt.Main)),c=t.find(h=>h.name===l),d=c.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){c.transform=c.transform.filter(p=>p!==d);const h={name:c.name+PX,source:c.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function GX(e,t){for(const n of nn(e.component.selection??{}))for(const i of hS)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function LMe(e,t){for(const n of e.children)Rt(n)&&(t=GX(n,t));return t}function UMe(e,t,n,i){const r=dV(e,t.param,t);return{signal:ca(n.get("type"))&&me(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function fO(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const uo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ys(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&ce(x_e),!a||!ca(s)){ce(b_e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||jC(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(oV))r.update=`{${i.map(s=>`${Ke(Fr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${Ke(Fr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!jC(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function BC(e,t){return`domain(${Ke(e.scaleName(t))})`}function jC(e){return e.parent&&Wh(e.parent)&&(!e.parent.parent||jC(e.parent.parent))}const bd="_brush",YX="_scale_trigger",yp="geo_interval_init_tick",XX="_init",BMe="_center",jMe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...lc(n.select)?n.select:{}};i.fields=[ha],i.encodings||(i.encodings=n.value?oe(n.value):[Sa,xa]),n.select={type:"interval",...i}}if(t.translate&&!uo.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ke(t.name+bd)}`;for(const r of t.events){if(!r.between){ce(`${r} is not an ordered event stream for interval selections.`);continue}const a=Xt(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+vo,a=nn(t.project.hasChannel).filter(o=>o.channel===kt||o.channel===Dn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(PMe(e,t,l,s?.[l.index])),[])),e.hasProjection){const o=Ke(e.projectionName()),l=e.projectionName()+BMe,{x:c,y:d}=t.project.hasChannel,h=c?.signals.visual,p=d?.signals.visual,y=c?s?.[c.index]:`${l}[0]`,v=d?s?.[d.index]:`${l}[1]`,b=C=>e.getSizeSignalRef(C).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+XX,init:`[scale(${o}, [${c?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${c?y[1]:y}, ${d?v[1]:v}])]`}),(!c||!d)&&(n.find(D=>D.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const w=`intersect(${S}, {markname: ${Ke(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${oc(e)}}`,A=`vlSelectionTuples(${w}, ${_})`,$=a.map(C=>C.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...s?[{signal:yp}]:[]],update:A}]})}else{if(!uo.defined(t)){const c=i+YX,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=Ke(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),w=ca(S)?"+":"";return`(!isArray(${y}) || (${w}invert(${b}, ${v})[0] === ${w}${y}[0] && ${w}invert(${b}, ${v})[1] === ${w}${y}[1]))`});d.length&&n.push({name:c,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${c} : {}`}]})}const o=a.map(c=>c.signals.data),l=`unit: ${oc(e)}, fields: ${i+Bm}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Tc(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Rt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===yp).length||n.unshift({name:yp,value:null,on:[{events:"timer{1}",update:`${yp} === null ? {} : ${yp}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,l=`data(${Ke(t.name+Dc)})`;if(uo.defined(t)||!r&&!a)return n;const c={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of oe(c))c[S]=[{test:`${l}.length && ${l}[0].unit === ${oc(e)}`,...c[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=oe(y).reduce((S,w)=>(S[w]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(_=>_).join(" && "),value:y[w]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+bd}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:c}},...n,{name:i+bd,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...c,...v}}}]}};function PMe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=Ke(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,c=e.getSizeSignalRef(a===kt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${c})]`}],[]);if(r){const p=n.signals.data,y=uo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Tc(i,!0,l)}:{value:[]};return h.push({events:{signal:t.name+YX},update:ca(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Tc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===kt?0:1,y=t.name+XX,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Gh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=zm(t)&&t.condition;let s=[];a&&(s=Xt(a).map(c=>{const d=r(c);if(M$e(c)){const{param:h,empty:p}=c;return{test:fV(e,{param:h,empty:p}),...d}}else return{test:cx(e,c.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function dO(e,t="text"){const n=e.encoding[t];return Gh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>dS(i,e.config),invalidValueRef:void 0})}function dS(e,t,n="datum"){if(e){if(fa(e))return $t(e.value);if(Oe(e)){const{format:i,formatType:r}=rx(e);return Yk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function VX(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(me(s))return{tooltip:C9({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Gh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:c=>{const d=dS(c,r,o);if(d)return d;if(c===null)return;let h=yt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),Re(h))return{value:h};if(Je(h))return ve(h)?h:h.content==="encoding"?C9(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function WX(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,h){const p=Gc(h),y=Si(d)?d:{...d,type:e[p].type},v=y.title||Qk(y,r),b=Xt(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Wt(h)){const w=h==="x"?"x2":"y2",_=da(e[w]);if(Rn(y.bin)&&_){const A=he(y,{expr:s}),$=he(_,{expr:s}),{format:C,formatType:D}=rx(y);S=Nm(A,$,C,D,r),a.add(w)}}if((Wt(h)||h===Br||h===ba)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:w,formatType:_}=rx(y);S=Yk({fieldOrDatumDef:y,format:w,formatType:_,expr:s,config:r,normalizeStack:!0}).signal}S??=dS(y,r,s).signal,o.push({channel:h,key:b,value:S})}Kk(e,(d,h)=>{fe(d)?l(d,h):nS(d)&&l(d.condition,h)});const c={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!c[h]&&(c[h]=p);return c}function C9(e,t,n,{reactiveGeom:i}={}){const r=WX(e,t,n,{reactiveGeom:i}),a=Lu(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function IMe(e){const{markDef:t,config:n}=e,i=yt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...qMe(e),...HMe(e)}}function qMe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=yt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:tn(f_e,t)?{}:{ariaRoleDescription:{value:t}}}function HMe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Gh({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>dS(l,e.config),invalidValueRef:void 0});const s=yt("description",n,i);if(s!=null)return{description:$t(s)};if(i.aria===!1)return{};const o=WX(t,r,i);if(!St(o))return{description:{signal:Lu(o).map(([l,c],d)=>`"${d>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function Ln(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const c=r[e];o===void 0&&(l??=yt(e,i,a,{vgChannel:s,ignoreVgConfig:!zm(c)}),l!==void 0&&(o=$t(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=FY({...d,scaleChannel:e,channelDef:c});return Gh({model:t,channelDef:c,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>Gk({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function QX(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??yt("filled",n,r),o=qe(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=yt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,c=yt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...l?{fill:$t(l)}:{},...c?{stroke:$t(c)}:{}};return n.color&&(s?n.fill:n.stroke)&&ce(oY("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Ln("color",e,{vgChannel:d,defaultValue:s?l:c}),...Ln("fill",e,{defaultValue:i.fill?l:void 0}),...Ln("stroke",e,{defaultValue:i.stroke?c:void 0})}}function GMe(e){const{encoding:t,mark:n}=e,i=t.order;return!il(n)&&fa(i)?Gh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>$t(r.value),invalidValueRef:void 0}):{}}function Kd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:Gk({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:$t(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function mi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],c=r[ms(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=Kd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=hO({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!l&&Wt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:YMe({channel:e,channelDef:l,channel2Def:c,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function YMe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Oe(n)&&r&&t===r.fieldChannel){if(fe(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return tx({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return ac(n,i,{suffix:"end"},{offset:a})}return Hk(e)}function hO({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=Gc(n),l=Uu(n),c=yt(n,a,s,{vgChannel:l});if(c!==void 0)return o0(n,c);switch(t){case"zeroOrMin":return M9({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return M9({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Pi(n)],mult:.5}}}}function M9({mainChannel:e,config:t,...n}){const i=zY(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const XMe={left:"x",center:"xc",right:"x2"},VMe={top:"y",middle:"yc",bottom:"y2"};function ZX(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Uu(e);const r=e==="x"?"align":"baseline",a=yt(r,t,n);let s;return ve(a)?(ce(X_e(r)),s=void 0):s=a,e==="x"?XMe[s||(i==="top"?"left":"center")]:VMe[s||i]}function ux(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?KX(e,t,{defaultPos:n,defaultPos2:i}):mi(e,t,{defaultPos:n})}function KX(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ms(e),o=Pi(e),l=WMe(t,i,s),c=l[o]?ZX(e,r,a):Uu(e);return{...mi(e,t,{defaultPos:n,vgChannel:c}),...l}}function WMe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=Gc(n),c=Pi(n),d=Uu(n),h=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?Kd({channel:n,markDef:a,encoding:i,model:e}):Kd({channel:l,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Pi(n),w=e.markDef[S];return w!=null?{[S]:{value:w}}:{[d]:{field:e.getName(n)}}}const b=QMe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:Uy(n,a)||Uy(n,{[n]:CC(n,a,o.style),[c]:CC(c,a,o.style)})||Uy(n,o[r])||Uy(n,o.mark)||{[d]:hO({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function QMe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:c}){return Oe(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?ac(t,a,{suffix:"start"},{offset:l}):Hk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:c})}function Uy(e,t){const n=Pi(e),i=Uu(e);if(t[i]!==void 0)return{[i]:o0(e,t[i])};if(t[e]!==void 0)return{[i]:o0(e,t[e])};if(t[n]){const r=t[n];if(Cc(r))ce(P_e(n));else return{[n]:o0(e,r)}}}function yo(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ms(t),o=Pi(t),l=i[t],c=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??yt("size",r,n,{vgChannel:o}),v=GG(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return fe(l)&&(_t(l.bin)||Rn(l.bin)||l.timeUnit&&!c)&&!(y&&!Cc(y))&&!i[v]&&!Mn(h)?JMe({fieldDef:l,fieldDef2:c,channel:t,model:e}):(Oe(l)&&Mn(h)||b)&&!c?KMe(l,t,e):KX(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ZMe(e,t,n,i,r,a,s){if(Cc(r))if(n){const l=n.get("type");if(l==="band"){let c=`bandwidth('${t}')`;r.band!==1&&(c=`${r.band} * ${c}`);const d=ns("minBandSize",{type:s},i);return{signal:d?`max(${ia(d)}, ${c})`:c}}else r.band!==1&&(ce(Z_e(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(ve(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Xc(l)&&Dt(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Vt(l,s==="tick"?h:s==="bar"?c:d);if(ve(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(Dt(p))return{signal:`${1-p} * ${e}`}}return{value:RC(i.view,e)-2}}function KMe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),c=n.getScaleComponent(t),d=Pi(t),h=ms(t),p=GG(t),y=n.scaleName(p),v=n.getScaleComponent(yk(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Ln("size",n,{vgChannel:d,defaultRef:$t(i.size)}):ce(tAe(i.type)));const w=!!S,_=qY({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(c||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:ZMe(d,y||l,v||c,a,_,!!e,i.type)};const A=(c||v)?.get("type")==="band"&&Cc(_)&&!w?"top":"middle",$=ZX(t,i,a,A),C=$==="xc"||$==="yc",{offset:D,offsetType:T}=Kd({channel:t,markDef:i,encoding:r,model:n,bandPosition:C?.5:0}),O=Hk({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:c,stack:s,offset:D,defaultRef:hO({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:C?T==="encoding"?0:.5:ve(_)?{signal:`(1-${_})/2`}:Cc(_)?(1-_.band)/2:0});if(d)return{[$]:O,...S};{const R=Uu(h),L=S[d],z=D?{...L,offset:D}:L;return{[$]:O,[R]:me(O)?[O[0],{...O[1],offset:z}]:{...O,offset:z}}}}function T9(e,t,n,i,r,a,s){if(BG(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(ve(n)||ve(r)||ve(i)||a){const c=ia(n),d=ia(r),h=ia(i),p=ia(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=h?`${h} + `:"",S=c?`(${c} ? -1 : 1) * `:"",w=d?`(${d} + ${v})`:v;return{signal:b+S+w}}else return r=r||0,i+(n?-r-l:+r+l)}function JMe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),c=o?o.get("type"):void 0,d=o.get("reverse"),h=qY({channel:n,fieldDef:e,markDef:a,config:r,scaleType:c}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Wt(n)?yt("binSpacing",a,r)??0:0,b=ms(n),S=Uu(n),w=Uu(b),_=ns("minBandSize",a,r),{offset:A}=Kd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:$}=Kd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),C=w$e({fieldDef:e,scaleName:l}),D=T9(n,v,d,y,A,_,C),T=T9(b,v,d,y,$??A,_,C),O=ve(h)?{signal:`(1-${h.signal})/2`}:Cc(h)?(1-h.band)/2:.5,R=Bu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(_t(e.bin)||e.timeUnit){const L=e.timeUnit&&R!==.5;return{[w]:D9({fieldDef:e,scaleName:l,bandPosition:O,offset:T,useRectOffsetField:L}),[S]:D9({fieldDef:e,scaleName:l,bandPosition:ve(O)?{signal:`1-${O.signal}`}:1-O,offset:D,useRectOffsetField:L})}}else if(Rn(e.bin)){const L=ac(e,l,{},{offset:T});if(fe(t))return{[w]:L,[S]:ac(t,l,{},{offset:D})};if(Yc(e.bin)&&e.bin.step)return{[w]:L,[S]:{signal:`scale("${l}", ${he(e,{expr:"datum"})} + ${e.bin.step})`,offset:D}}}ce(cY(b))}function D9({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return tx({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:cS,endSuffix:fS}:{}})}const e3e=new Set(["aria","width","height"]);function jr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?QX(e):{};return{...t3e(e.markDef,t),...k9("fill",n),...k9("stroke",i),...Ln("opacity",e),...Ln("fillOpacity",e),...Ln("strokeOpacity",e),...Ln("strokeWidth",e),...Ln("strokeDash",e),...GMe(e),...VX(e),...dO(e,"href"),...IMe(e)}}function k9(e,t){return t?{[e]:t}:{}}function t3e(e,t){return c_e.reduce((n,i)=>(!e3e.has(i)&&ue(e,i)&&t[i]!=="ignore"&&(n[i]=$t(e[i])),n),{})}function gO(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!ys(a)||!(s=e.getScaleType(a)))return;const o=G2(r.aggregate),l=qk({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(x$e(l)){const c=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});c&&i.add(c)}}),i.size>0)return{defined:{signal:[...i].map(a=>W2(a,!0)).join(" && ")}}}function O9(e,t){if(t!==void 0)return{[e]:$t(t)}}const mA="voronoi",JX={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(mA)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(il(a))return ce(y_e(a)),n;const s={name:e.getName(mA),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...VX(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((c,d)=>{const h=c.name??"";h===e.component.mark[0].name?o=d:h.includes(mA)&&(l=!0)}),l||n.splice(o+1,0,s),n}},eV={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!rO(e.bind),parse:(e,t,n)=>uV(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=JX.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,c)=>{const d=Tt(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Tc(s[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${Ke(l.field)}] : null`}]:[],bind:a[l.field]??a[l.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(c=>c.name===i+vo),s=i+Bm,o=r.items.map(c=>Tt(`${i}_${c.field}`)),l=o.map(c=>`${c} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},lx="_toggle",tV={defined:e=>e.type==="point"&&!Va(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+lx,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+vo,i=t.name+lx;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${oc(e)}}, `}${i} ? ${n} : null`}},n3e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Va(e),parse:(e,t)=>{t.clear&&(t.clear=Re(t.clear)?Wu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(eV.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Tt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+vo);i(r,"null"),tV.defined(t)&&(r=n.findIndex(a=>a.name===t.name+lx),i(r,"false"))}return n}},nV={defined:e=>{const t=e.resolve==="global"&&e.bind&&rO(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ha;return t&&!n&&ce(S_e),t&&n},parse:(e,t,n)=>{const i=De(n);if(i.select=Re(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},uV(t,i),lc(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Xt(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=cA(t.bind)?t.bind.legend:"click",a=Re(r)?Wu(r,"view"):Xt(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=cA(t.bind)&&t.bind.legend,a=s=>o=>{const l=De(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Tt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+vo),s=i+Bm,o=r.items.filter(p=>p.hasLegend).map(p=>Tt(`${i}_${Tt(p.field)}_legend`)),c=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:c}):o.length>0&&(a.update=c,delete a.value,delete a.on);const d=n.find(p=>p.name===i+lx),h=cA(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function i3e(e,t,n){const i=e.fieldDef(t)?.field;for(const r of nn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&nV.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const iV="_translate_anchor",rV="_translate_delta",r3e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=uo.defined(t),a=i+iV,{x:s,y:o}=t.project.hasChannel;let l=Wu(t.translate,"scope");return r||(l=l.map(c=>(c.between[0].markname=i+bd,c))),n.push({name:a,value:{},on:[{events:l.map(c=>c.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?BC(e,kt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?BC(e,Dn):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+rV,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&N9(e,t,s,"width",n),o!==void 0&&N9(e,t,o,"height",n),n}};function N9(e,t,n,i,r){const a=t.name,s=a+iV,o=a+rV,l=n.channel,c=uo.defined(t),d=r.find(C=>C.name===n.signals[c?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p?.get("type"),v=p?.get("reverse"),b=c?l===kt?v?"":"-":v?"-":"":"",S=`${s}.extent_${l}`,w=`${b}${o}.${l} / ${c?`${h}`:`span(${S})`}`,_=!c||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=c?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${_}(${S}, ${w}${A})`;d.on.push({events:{signal:o},update:c?$:`clampRange(${$}, 0, ${h})`})}const aV="_zoom_anchor",sV="_zoom_delta",a3e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=uo.defined(t),a=i+sV,{x:s,y:o}=t.project.hasChannel,l=Ke(e.scaleName(kt)),c=Ke(e.scaleName(Dn));let d=Wu(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+bd,h))),n.push({name:i+aV,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&R9(e,t,s,"width",n),o!==void 0&&R9(e,t,o,"height",n),n}};function R9(e,t,n,i,r){const a=t.name,s=n.channel,o=uo.defined(t),l=r.find(_=>_.name===n.signals[o?"data":"visual"]),c=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?BC(e,s):l.name,y=a+sV,v=`${a}${aV}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${b}(${p}, ${v}, ${y}${S})`;l.on.push({events:{signal:y},update:o?w:`clampRange(${w}, 0, ${c})`})}const Dc="_store",vo="_tuple",s3e="_modify",oV="vlSelectionResolve",hS=[OMe,jMe,TMe,tV,eV,uo,nV,n3e,r3e,a3e,JX];function o3e(e){let t=e.parent;for(;t&&!lr(t);)t=t.parent;return t}function oc(e,{escape:t}={escape:!0}){let n=t?Ke(e.name):e.name;const i=o3e(e);if(i){const{facet:r}=i;for(const a of Dr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${Ke(i.vgField(a))}])`)}return n}function pO(e){return nn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function uV(e,t){(Js(t.select)||!t.select.on)&&delete e.events,(Js(t.select)||!t.select.clear)&&delete e.clear,(Js(t.select)||!t.select.toggle)&&delete e.toggle}function Va(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function PC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...PC(e.object)),t.push(...PC(e.property))),t)}function lV(e){return e.object.type==="MemberExpression"?lV(e.object):e.object.name==="datum"}function cV(e){const t=DD(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&lV(i)&&n.add(PC(i).slice(1).join("."))}),n}class Yh extends ht{model;filter;expr;_dependentFields;clone(){return new Yh(null,this.model,De(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=cx(this.model,this.filter,this),this._dependentFields=cV(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function u3e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Tt(a.name),o=a.select,l=Re(o)?o:o.type,c=Je(o)?De(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(c.mark={...d.mark,...c.mark}),(c[y]===void 0||c[y]===!0)&&(c[y]=De(d[y]??c[y])));const h=n[s]={...c,name:s,type:l,init:a.value,bind:a.bind,events:Re(c.on)?Wu(c.on,"scope"):Xt(De(c.on))};if(Va(h)&&(r++,r>1)){delete n[s];continue}const p=De(a);for(const y of hS)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&ce(C_e),n}function fV(e,t,n,i="datum"){const r=Re(t)?t:t.param,a=Tt(r),s=Ke(a+Dc);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",c=o.resolve==="global"?")":`, ${Ke(o.resolve)})`,d=`${l}${s}, ${i}${c}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function dV(e,t,n){const i=Tt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&ce(M_e(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,ce(T_e(o,r,n,a))):a=o[0].field}return`${s.name}[${Ke(Fr(a))}]`}function l3e(e,t){for(const[n,i]of Lu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new zi(new Yh(t,e,{param:n}),r,zt.Lookup,e.component.data.outputNodeRefCounts)}}function cx(e,t,n){return s0(t,i=>Re(i)?i:UAe(i)?fV(e,i,n):EY(i))}function c3e(e,t){if(e)return me(e)&&!su(e)?e.map(n=>Qk(n,t)).join(", "):e}function yA(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Hp(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:c,...d}=e.combine();if(!r){for(const h in d){const p=h,y=I$e[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(Um(v)){const{condition:b,...S}=v,w=Xt(b),_=u9[p];if(_){const{vgProp:A,part:$}=_,C=[...w.map(D=>{const{test:T,...O}=D;return{test:cx(null,T),...O}}),S];yA(d,$,A,C),delete d[p]}else if(_===null){const A={signal:w.map($=>{const{test:C,...D}=$;return`${cx(null,C)} ? ${YF(D)} : `}).join("")+YF(S)};d[p]=A}}else if(ve(v)){const b=u9[p];if(b){const{vgProp:S,part:w}=b;yA(d,w,S,v),delete d[p]}}qe(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},St(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Vt(c,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&ve(d.encode.labels.update.text)&&(p=Ec(o,"datum.label",d.encode.labels.update.text.signal)),yA(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of JY)e.hasAxisPart(p)||delete d.encode[p];St(d.encode)&&delete d.encode}const h=c3e(l,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Vt(c,0)}}}}function hV(e){const{axes:t}=e.component,n=[];for(const i of Co)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function f3e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Hp(r,"grid",t)),...i.map(r=>Hp(r,"grid",t)),...n.map(r=>Hp(r,"main",t)),...i.map(r=>Hp(r,"main",t))].filter(r=>r)}function z9(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...oe(s),...oe(o)]),c={};for(const d of l.values())c[d]={signal:`${i.signal} === "${a}" ? ${ia(s[d])} : ${ia(o[d])}`};return c}return t[r]})])}function d3e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$Y(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=ve(n)?"axisOrient":`axis${Cm(n)}`,o=[...r,...r.map(c=>a+c.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:z9(o,i,e,n),vgAxisConfig:z9(l,i,e,n),axisConfigStyle:h3e([...l,...o],i)}}function h3e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Xt(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function IC(e,t,n,i={}){const r=eY(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const F9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??g3e(n,e),gridScale:({model:e,channel:t})=>p3e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||pV(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||gV(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??y3e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??v3e(t.type,n,fe(t)&&!!t.timeUnit,fe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??x3e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??S3e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=mV(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return nY(r?[s9(r)]:[],fe(s)?[s9(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>E3e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??w3e(n,t)};function g3e(e,t){return!Mn(e)&&fe(t)&&!_t(t?.bin)&&!Rn(t?.bin)}function p3e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function m3e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return ve(a)?a:I0(a);{const{configValue:s}=IC("labelAngle",i,t?.style,r);return s!==void 0?I0(s):n===kt&&qe([Uk,Lk],e.type)&&!(fe(e)&&e.timeUnit)?270:void 0}}function qC(e){return`(((${e.signal} % 360) + 360) % 360)`}function gV(e,t,n,i){if(e!==void 0)if(n==="x"){if(ve(e)){const r=qC(e),a=ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ve(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ve(e)){const r=qC(e),a=ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(ve(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function pV(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(ve(e)){const s=qC(e),o=ve(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(ve(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function y3e(e,t){if(t==="x"&&qe(["quantitative","temporal"],e))return!0}function v3e(e,t,n,i){if(n&&!Je(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function b3e(e){return e==="x"?"bottom":"left"}function x3e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Mn(t)&&t!=="log"){if(fe(e)){if(_t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&qe(["month","hours","day","quarter"],Cn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function S3e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(fe(t)){const{timeUnit:n}=t;if(n){const i=bY(n);if(i)return{signal:i}}}}function mV(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return iY(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function E3e(e,t){const n=e.values;if(me(n))return KY(t,n);if(ve(n))return n}function w3e(e,t){return e==="rect"&&ix(t)?1:0}class Jd extends ht{transform;_dependentFields;clone(){return new Jd(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=cV(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Qc(i)&&IY(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((c,d)=>`${EY({field:a,timeUnit:s,equal:c})} ? ${d} : `).join("")+o.length;t=new Jd(t,{calculate:l,as:eh(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ye(this.transform)}`}}function eh(e,t,n){return he(e,{prefix:t,suffix:"sort_index",...n})}function gS(e,t){return qe(["top","bottom"],t)?"column":qe(["left","right"],t)||e==="row"?"row":"column"}function th(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Vt((t||{})[e],r[e],n.header[e])}function pS(e,t,n,i){const r={};for(const a of e){const s=th(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const mO=["row","column"],yO=["header","footer"];function _3e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=pS(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=gS(t,o),c=I0(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...vV(c,l),...yV(l,c,a),...bV(i,r,t,cCe,yX)}}}function yV(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=pV(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function vV(e,t){const n=gV(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function A3e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of yO)if(n[r])for(const a of n[r]){const s=C3e(e,t,r,n,a);s!=null&&i.push(s)}return i}function $3e(e,t){const{sort:n}=e;return oo(n)?{field:he(n,{expr:"datum"}),order:n.order??"ascending"}:me(n)?{field:eh(e,t,{expr:"datum"}),order:"ascending"}:{field:he(e,{expr:"datum"}),order:n??"ascending"}}function HC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=pS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=Yk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=gS(t,o);return{text:{signal:l?Ec(Ec(l,"datum.label",c),"datum.value",he(e,{expr:"parent"})):c},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...vV(a,d),...yV(d,a,s),...bV(n,e,t,fCe,vX)}}function C3e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=pS(["labelOrient"],s.header,o,t);(t==="row"&&!qe(["top","bottom"],h)||t==="column"&&!qe(["left","right"],h))&&(a=HC(s,t,o))}const l=lr(e)&&!Rm(e.facet),c=r.axes,d=c?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:$3e(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:c}:{}}}}return null}const M3e={column:{start:0,end:1},row:{start:1,end:0}};function T3e(e,t){return M3e[t][e]}function D3e(e,t){const n={};for(const i of Dr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=pS(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=gS(i,s),l=T3e(a,o);l!==void 0&&(n[o]=l)}}return St(n)?void 0:n}function bV(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=th(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function vO(e){return[...By(e,"width"),...By(e,"height"),...By(e,"childWidth"),...By(e,"childHeight")]}function By(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(Mn(s)&&Xc(o)){const l=e.scaleName(n);return lr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[L9(l,o)]:[L9(l,o),{name:r,update:xV(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=NC(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function L9(e,t){const n=`${e}_step`;return ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function xV(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Vt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ia(s)}, ${ia(a)}) * ${e}_step`}function SV(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function EV(e,t){return oe(e).reduce((n,i)=>({...n,...Gh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>$t(r.value),invalidValueRef:void 0})}),{})}function wV(e,t){if(lr(t))return e==="theta"?"independent":"shared";if(Wh(t))return"shared";if(AO(t))return Wt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function bO(e,t){const n=e.scale[t],i=Wt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ce(sAe(t)),"independent"):e[i][t]||"shared"}const k3e={...gCe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},_V=oe(k3e);class O3e extends To{}const U9={symbols:N3e,gradient:R3e,labels:z3e,entries:F3e};function N3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:c}=n,d=s.filled&&c!=="trail";let h={...g_e({},n,c$e),...QX(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?AV(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Bi)delete h.fill;else if(ue(h.fill,"field"))y?delete h.fill:(h.fill=$t(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=$t(b??1));else if(me(h.fill)){const S=GC(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=$t(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Bi)delete h.stroke;else if(ue(h.stroke,"field")||v)delete h.stroke;else if(me(h.stroke)){const S=Vt(GC(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==$o){const S=fe(t)&&CV(n,r,t);S?h.opacity=[{test:S,...$t(b??1)},$t(l.legend.unselectedOpacity)]:b&&(h.opacity=$t(b))}return h={...h,...e},St(h)?void 0:h}function R3e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const c=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?AV(s.opacity)||a.opacity:void 0;return c&&(o.opacity=$t(c)),o={...o,...e},St(o)?void 0:o}function z3e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=fe(t)?CV(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:c,formatType:d}=a;let h;Mc(d)?h=ra({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:d,config:s}):c===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=ra({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&fe(t)&&t.timeUnit===void 0&&(h=ra({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return St(p)?void 0:p}function F3e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function AV(e){return $V(e,(t,n)=>Math.max(t,n.value))}function GC(e){return $V(e,(t,n)=>Vt(t,n.value))}function $V(e,t){if(D$e(e))return Xt(e.condition).reduce(t,e.value);if(fa(e))return e.value}function CV(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=Ke(n.field);return i.map(a=>`(!length(data(${Ke(Tt(a)+Dc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const B9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return BY(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return jY(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??q3e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??H3e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??U3e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>vd(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(yd(n)&&ja(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>L3e(t,e)};function L3e(e,t){const n=e.values;if(me(n))return KY(t,n);if(ve(n))return n}function U3e(e,t,n,i){if(t!=="shape"){const r=GC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function B3e(e){const{legend:t}=e;return Vt(t.type,j3e(e))}function j3e({channel:e,timeUnit:t,scaleType:n}){if(yd(e)){if(qe(["quarter","month","day"],t))return"symbol";if(ja(n))return"gradient"}return"symbol"}function P3e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??I3e(n,t)}function I3e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function q3e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(ja(r))return n==="horizontal"?i==="top"||i==="bottom"?j9(t,"width",s,a):s:j9(t,"height",l,o)}function j9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function H3e(e){if(qe(["quantile","threshold","log","symlog"],e))return"greedy"}function MV(e){const t=Rt(e)?G3e(e):W3e(e);return e.component.legends=t,t}function G3e(e){const{encoding:t}=e,n={};for(const i of[Bi,...xX]){const r=cn(t[i]);!r||!e.getScaleComponent(i)||i===ji&&fe(r)&&r.type===Hh||(n[i]=V3e(e,i))}return n}function Y3e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function X3e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function V3e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new O3e({},Y3e(e,t));i3e(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const c=e.getScaleComponent(t).get("type"),d=cn(r[t]),h=fe(d)?Cn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=B3e({legend:n,channel:t,timeUnit:h,scaleType:c}),v=P3e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:c,orient:p,legendType:y,direction:v};for(const $ of _V){if(y==="gradient"&&$.startsWith("symbol")||y==="symbol"&&$.startsWith("gradient"))continue;const C=$ in B9?B9[$](b):n[$];if(C!==void 0){const D=X3e(C,$,n,e.fieldDef(t));(D||a.legend[$]===void 0)&&o.set($,C,D)}}const S=n?.encoding??{},w=o.get("selections"),_={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const C=EV(S[$]??{},e),D=$ in U9?U9[$](C,A):C;D!==void 0&&!St(D)&&(_[$]={...w?.length&&fe(d)?{name:`${Tt(d.field)}_legend_${$}`}:{},...w?.length?{interactive:!!w}:{},update:D})}return St(_)||o.set("encode",_,!!n?.encoding),o}function W3e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){MV(i);for(const r of oe(i.component.legends))n.legend[r]=bO(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=TV(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of oe(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function TV(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of _V){const s=ju(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,l)=>{switch(a){case"symbolType":return Q3e(o,l);case"title":return rY(o,l);case"type":return r=!0,Ki("symbol")}return lS(o,l,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&Kb(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Kb(e.explicit,["encode","gradient"])),e}function Q3e(e,t){return t.value==="circle"?t:e}function Z3e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function DV(e){const t=e.component.legends,n={};for(const r of oe(t)){const a=e.getScaleComponent(r),s=ut(a.get("domains"));if(n[s])for(const o of n[s])TV(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return nn(n).flat().map(r=>K3e(r,e.config)).filter(r=>r!==void 0)}function K3e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of xX)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&ve(a.encode.labels.update.text)&&(s=Ec(i,"datum.label",a.encode.labels.update.text.signal)),Z3e(a,"labels","text",{signal:s})}return a}}function J3e(e){return Wh(e)||AO(e)?eTe(e):kV(e)}function eTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),kV(e))}function kV(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=ve(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return qe(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const tTe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class OV extends To{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function NV(e){e.component.projection=Rt(e)?nTe(e):aTe(e)}function nTe(e){if(e.hasProjection){const t=zn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?iTe(e):void 0,a=new OV(e.projectionName(!0),{...zn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function iTe(e){const t=[],{encoding:n}=e;for(const i of[[Sa,xa],[Lr,Ea]])(cn(n[i[0]])||cn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ji)&&e.typedFieldDef(ji).type===Hh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zt.Main)),t}function rTe(e,t){const n=ck(tTe,r=>!!(!tn(e.explicit,r)&&!tn(t.explicit,r)||tn(e.explicit,r)&&tn(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function aTe(e){if(e.children.length===0)return;let t;for(const i of e.children)NV(i);const n=ck(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=rTe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new OV(i,t.specifiedProjection,t.size,De(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function sTe(e,t,n,i){if(Lm(t,n)){const r=Rt(e)?e.axis(n)??e.legend(n)??{}:{},a=he(t,{expr:"datum"}),s=he(t,{expr:"datum",binSuffix:"end"});return{formulaAs:he(t,{binSuffix:"range",forAs:!0}),formula:Nm(a,s,r.format,r.formatType,i)}}return{}}function RV(e,t){return`${QG(e)}_${t}`}function oTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function xO(e,t,n){const i=iS(n,void 0)??{},r=RV(i,t);return e.getName(`${r}_bins`)}function uTe(e){return"as"in e}function P9(e,t,n){let i,r;uTe(e)?i=Re(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[he(e,{forAs:!0}),he(e,{binSuffix:"end",forAs:!0})];const a={...iS(t,void 0)},s=RV(a,e.field),{signal:o,extentSignal:l}=oTe(n,s);if(Y2(a.extent)){const d=a.extent;r=dV(n,d.param,d),delete a.extent}const c={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:c}}class Wa extends ht{bins;clone(){return new Wa(null,De(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Si(a)&&_t(a.bin)){const{key:o,binComponent:l}=P9(a,a.bin,n);r[o]={...l,...r[o],...sTe(n,a,s,n.config)}}return r},{});return St(i)?null:new Wa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=P9(n,n.bin,i);return new Wa(t,{[r]:a})}merge(t,n){for(const i of oe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ba([...this.bins[i].as,...t.bins[i].as],Ye)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(nn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(nn(this.bins).map(t=>t.field))}hash(){return`Bin ${Ye(this.bins)}`}assemble(){return nn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:Fr(t.field),as:i,signal:t.signal,...Y2(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:Fr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of r)for(let c=0;c<2;c++)n.push({type:"formula",expr:he({field:i[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function lTe(e,t,n,i){const r=Rt(i)?i.encoding[ms(t)]:void 0;if(Si(n)&&Rt(i)&&HY(n,r,i.markDef,i.config)){e.add(he(n,{})),e.add(he(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,l=Bu({fieldDef:n,markDef:s,config:o});q0(a)&&l!==.5&&Wt(t)&&(e.add(he(n,{suffix:cS})),e.add(he(n,{suffix:fS}))),n.bin&&Lm(n,t)&&e.add(he(n,{binSuffix:"range"}))}else if(PG(t)){const a=jG(t);e.add(i.getName(a))}else e.add(he(n));return Qc(n)&&ZAe(n.scale?.range)&&e.add(n.scale.range.field),e}function cTe(e,t){for(const n of oe(t)){const i=t[n];for(const r of oe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class sa extends ht{dimensions;measures;clone(){return new sa(null,new Set(this.dimensions),De(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:l,field:c}=s;if(l)if(l==="count")r["*"]??={},r["*"].count=new Set([he(s,{forAs:!0})]);else{if(mo(l)||nl(l)){const d=mo(l)?"argmin":"argmax",h=l[d];r[h]??={},r[h][d]=new Set([he({op:d,field:h},{forAs:!0})])}else r[c]??={},r[c][l]=new Set([he(s,{forAs:!0})]);ys(o)&&n.scaleDomain(o)==="unaggregated"&&(r[c]??={},r[c].min=new Set([he({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([he({field:c,aggregate:"max"},{forAs:!0})]))}else lTe(a,o,s,n)}),a.size+oe(r).length===0)?null:new sa(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:l}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([l||he(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(l||he(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+oe(r).length===0?null:new sa(t,i,r)}merge(t){return OG(this.dimensions,t.dimensions)?(cTe(this.measures,t.measures),!0):(EAe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...oe(this.measures)])}producedFields(){const t=new Set;for(const n of oe(this.measures))for(const i of oe(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ye({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of oe(this.measures))for(const s of oe(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:Fr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Fr),ops:t,fields:n,as:i}}}class Xh extends ht{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Dr){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]={name:n.getName(`${a}_domain`),fields:[he(s),..._t(o)?[he(s,{binSuffix:"end"})]:[]],...oo(l)?{sortField:l}:me(l)?{sortIndexField:eh(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Dr)this[n]&&(t+=` ${n.charAt(0)}:${Ye(this[n])}`);return t}get fields(){const t=[];for(const n of Dr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Dr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Co){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Mn(r)&&Xc(a)){const s=mS(this.childModel,n),o=_O(s);o?t[n]=o:ce(_k(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:c}=this[t];if(l){const{op:d=eS,field:h}=l;a.push(h),s.push(d),o.push(he(l,{forAs:!0}))}else c&&(a.push(c),s.push("max"),o.push(c));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const l of mO){for(const c of yO){const d=i[l]?.[c]??[];for(const h of d)if(h.axes?.length>0){a[l]=!0;break}}if(a[l]){const c=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[so,ao])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function I9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function fTe(e,t){const n=hk(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=I9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=I9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ce(k_e(t)),null}function dTe(e){const t={};return Cv(e.filter,n=>{if(SY(n)){let i=null;Dk(n)?i=nr(n.equal):Ok(n)?i=nr(n.lte):kk(n)?i=nr(n.lt):Nk(n)?i=nr(n.gt):Rk(n)?i=nr(n.gte):zk(n)?i=n.range[0]:Fk(n)&&(i=(n.oneOf??n.in)[0]),i&&(Vc(i)?t[n.field]="date":Dt(i)?t[n.field]="number":Re(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function hTe(e){const t={};function n(i){Qd(i)?t[i.field]="date":i.type==="quantitative"&&r_e(i.aggregate)?t[i.field]="number":Hd(i.field)>1?i.field in t||(t[i.field]="flatten"):Qc(i)&&oo(i.sort)&&Hd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Rt(e)||lr(e))&&e.forEachFieldDef((i,r)=>{if(Si(i))n(i);else{const a=Gc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Rt(e)){const{mark:i,markDef:r,encoding:a}=e;if(il(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];fe(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function gTe(e){const t={};if(Rt(e)&&e.component.selection)for(const n of oe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&Hd(r.field)>1&&(t[r.field]="flatten")}return t}class ti extends ht{_parse;clone(){return new ti(null,De(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ye(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!wu(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of oe(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:ce(KF(o,i[o],l.value)))}for(const o of oe(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:ce(KF(o,n[o],l)))}const a=new To(n,i);r.copyAll(a);const s={};for(const o of oe(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return oe(s).length===0||r.parseNothing?null:new ti(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of oe(this._parse)){const i=this._parse[n];Hd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(oe(this._parse))}dependentFields(){return new Set(oe(this._parse))}assembleTransforms(t=!1){return oe(this._parse).filter(n=>t?Hd(n)>1:!0).map(n=>{const i=fTe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Ih(n)}:null}).filter(n=>n!==null)}}class Pu extends ht{clone(){return new Pu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ha])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ha}}}class jm extends ht{params;clone(){return new jm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ye(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Pm extends ht{params;clone(){return new Pm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ye(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kc extends ht{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(wu(t)||(n=t.format?{...ur(t.format,["parse"])}:{}),H0(t))this._data={values:t.values};else if(Zd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];qe(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else UX(t)?this._data={values:[{type:"Sphere"}]}:(FX(t)||wu(t))&&(this._data={});this._generator=wu(t),t.name&&(this._name=t.name),n&&!St(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function SO(e){return e instanceof kc||e instanceof jm||e instanceof Pm}class EO{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Zc extends EO{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class wO extends EO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class pTe extends wO{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of oe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class mTe extends wO{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&pO(t)}run(t){t instanceof Pu&&(this.requiresSelectionId&&(SO(t.parent)||t.parent instanceof sa||t.parent instanceof ti)||(this.setModified(),t.remove()))}}class yTe extends EO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Xa&&(i=t.producedFields(),fk(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class vTe extends wO{constructor(){super()}run(t){t instanceof zi&&!t.isRequired()&&(this.setModified(),t.remove())}}class bTe extends Zc{run(t){if(!SO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ti)if(t instanceof ti)this.setModified(),t.merge(n);else{if(dk(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class xTe extends Zc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ti);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of oe(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!St(r)){this.setModified();const s=new ti(t,r);for(const o of n){if(o instanceof ti)for(const l of oe(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof ti&&oe(o.parse).length===0&&o.remove()}}}}}class STe extends Zc{run(t){t instanceof zi||t.numChildren()>0||t instanceof Xh||t instanceof kc||(this.setModified(),t.remove())}}class ETe extends Zc{run(t){const n=t.children.filter(r=>r instanceof Xa),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class wTe extends Zc{run(t){const n=t.children.filter(r=>r instanceof sa),i={};for(const r of n){const a=Ye(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of oe(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class _Te extends Zc{model;constructor(t){super(),this.model=t}run(t){const n=!(SO(t)||t instanceof Yh||t instanceof ti||t instanceof Pu),i=[],r=[];for(const a of t.children)a instanceof Wa&&(n&&!dk(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Wa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class ATe extends Zc{run(t){const n=[...t.children];if(!qd(n,s=>s instanceof zi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof zi){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof zi)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Kc extends ht{transform;clone(){return new Kc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??he(t)}hash(){return`JoinAggregateTransform ${Ye(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class nh extends ht{filter;clone(){return new nh(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((c,d,h)=>{const p=ys(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=qk({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:G2(v)});b!=="show"&&b!=="always-valid"&&(c[d.field]=d)}return c},{});return oe(l).length?new nh(t,l):null}dependentFields(){return new Set(oe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ye(this.filter)}`}assemble(){const t=oe(this.filter).reduce((n,i)=>{const r=this.filter[i],a=he(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${YC(a)}))`):r.type==="quantitative"&&n.push(YC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function YC(e){return`isValid(${e}) && isFinite(+${e})`}function $Te(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=he(i);return r&&t.push(r),t},[])}function CTe(e){return me(e)&&e.every(t=>Re(t))&&e.length>1}class lo extends ht{_stack;clone(){return new lo(null,De(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),l.push(Vt(h.order,"ascending"));const c={field:o,order:l};let d;return CTe(a)?d=a:Re(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new lo(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:c,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:l}=i,c=a.map(y=>{const v=r[y];return da(v)}).filter(y=>!!y),d=$Te(n),h=n.encoding.order;let p;if(me(h)||fe(h))p=tY(h);else{const y=GY(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new lo(t,{dimensionFieldDefs:c,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ye(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[he(r,{binSuffix:"mid"})]:[he(r,{}),he(r,{binSuffix:"end"})]:[he(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:c}=this._stack;if(l)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=he(d,{expr:"datum"}),v=he(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${YC(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:he(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:he(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:c,offset:o}),t}}class Vh extends ht{transform;clone(){return new Vh(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??he(t)}hash(){return`WindowTransform ${Ye(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>Ek(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),l.push(h.order??"ascending");const c={field:o,order:l},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:c,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function MTe(e){function t(n){if(!(n instanceof Xh)){const i=n.clone();if(i instanceof zi){const r=VC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof sa||i instanceof lo||i instanceof Vh||i instanceof Kc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function XC(e){if(e instanceof Xh)if(e.numChildren()===1&&!(e.children[0]instanceof zi)){const t=e.children[0];(t instanceof sa||t instanceof lo||t instanceof Vh||t instanceof Kc)&&t.addDimensions(e.fields),t.swapWithParent(),XC(e)}else{const t=e.model.component.data.main;zV(t);const n=MTe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(XC)}function zV(e){if(e instanceof zi&&e.type===zt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Xh||(t.swapWithParent(),zV(e))}}const VC="scale_",jy=5;function WC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!WC(t.children))return!1}return!0}function Hr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function q9(e,t,n){let i=e.sources,r=!1;return r=Hr(new vTe,i)||r,r=Hr(new mTe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Hr(new STe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Hr(new bTe,i)||r,r=Hr(new _Te(t),i)||r,r=Hr(new yTe,i)||r,r=Hr(new xTe,i)||r,r=Hr(new wTe,i)||r,r=Hr(new ETe,i)||r,r=Hr(new pTe,i)||r,r=Hr(new ATe,i)||r),e.sources=i,r}function TTe(e,t){WC(e.sources);let n=0,i=0;for(let r=0;r<jy&&q9(e,t,!0);r++)n++;e.sources.map(XC);for(let r=0;r<jy&&q9(e,t,!1);r++)i++;WC(e.sources),Math.max(n,i)===jy&&ce(`Maximum optimization runs(${jy}) reached.`)}class xn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new xn(()=>t(n))}}function FV(e){Rt(e)?DTe(e):kTe(e)}function DTe(e){const t=e.component.scales;for(const n of oe(t)){const i=NTe(e,n);if(t[n].setWithExplicit("domains",i),zTe(e,n),e.component.data.isFaceted){let a=e;for(;!lr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Ks(o)&&(o.data=VC+o.data.replace(VC,""))}}}function kTe(e){for(const n of e.children)FV(n);const t=e.component.scales;for(const n of oe(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=ju(i,s.getWithExplicit("domains"),"domains","scale",QC);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&ce(__e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function OTe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=H9(t,n);if(!r){ce(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=H9(t,n);if(r)return"unaggregated"}return e}function NTe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=OTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&cn(i.x2)?cn(i.x)?ju(nu(n,r,e,"x"),nu(n,r,e,"x2"),"domain","scale",QC):nu(n,r,e,"x2"):t==="y"&&cn(i.y2)?cn(i.y)?ju(nu(n,r,e,"y"),nu(n,r,e,"y2"),"domain","scale",QC):nu(n,r,e,"y2"):nu(n,r,e,t)}function RTe(e,t,n){return e.map(i=>({signal:`{data: ${rS(i,{timeUnit:n,type:t})}}`}))}function vA(e,t,n){const i=Cn(n)?.unit;return t==="temporal"||i?RTe(e,t,i):[e]}function nu(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,c=cn(r[i]),{type:d}=c,h=c.timeUnit,p=CMe({invalid:ns("invalid",a,o),isPath:il(s)});if(QAe(t)){const b=nu(e,void 0,n,i),S=vA(t.unionWith,d,h);return Ra([...S,...b.value])}else{if(ve(t))return Ra([t]);if(t&&t!=="unaggregated"&&!MY(t))return Ra(vA(t,d,h))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Ki([[0,1]]);const b=n.requestDataName(p);return Ki([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ys(i)&&fe(c)?FTe(n,i,e):void 0;if(vs(c)){const b=vA([c.datum],d,h);return Ki(b)}const v=c;if(t==="unaggregated"){const{field:b}=c;return Ki([{data:n.requestDataName(p),field:he({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:he({field:b,aggregate:"max"})}])}else if(_t(v.bin)){if(Mn(e))return Ki(e==="bin-ordinal"?[]:[{data:P0(y)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(i,Lm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Je(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(_t(b)){const S=xO(n,v.field,b);return Ki([new xn(()=>{const w=n.getSignalName(S);return`[${w}.start, ${w}.stop]`})])}else return Ki([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&qe(["time","utc"],e)){const b=r[ms(i)];if(HY(v,b,a,o)){const S=n.requestDataName(p),w=Bu({fieldDef:v,fieldDef2:b,markDef:a,config:o}),_=q0(s)&&w!==.5&&Wt(i);return Ki([{data:S,field:n.vgField(i,_?{suffix:cS}:{})},{data:S,field:n.vgField(i,{suffix:_?fS:"end"})}])}}return Ki(y?[{data:P0(y)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function bA(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":eS),...i?{field:Fr(i)}:{},...r?{order:r}:{}}}function zTe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=MY(i)?i:void 0,s=Yc(r)&&Y2(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function FTe(e,t,n){if(!Mn(n))return;const i=e.fieldDef(t),r=i.sort;if(IY(r))return{op:"min",field:eh(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(oo(r)){const o=a&&!s.has(r.field);return bA(r,o)}else if(C$e(r)){const{encoding:o,order:l}=r,c=e.fieldDef(o),{aggregate:d,field:h}=c,p=a&&!s.has(h);if(mo(d)||nl(d))return bA({field:he(c),order:l},p);if(Ek(d)||!d)return bA({op:d,field:h,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(qe(["ascending",void 0],r))return!0}}function H9(e,t){const{aggregate:n,type:i}=e;return n?Re(n)&&!s_e.has(n)?{valid:!1,reason:J_e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:eAe(e)}:{valid:!0}:{valid:!1,reason:K_e(e)}}function QC(e,t,n,i){return e.explicit&&t.explicit&&ce(aAe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function LTe(e){const t=Ba(e.map(s=>{if(Ks(s)){const{sort:o,...l}=s;return l}return s}),Ye),n=Ba(e.map(s=>{if(Ks(s)){const o=s.sort;return o!==void 0&&!P0(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ye);if(t.length===0)return;if(t.length===1){const s=e[0];if(Ks(s)&&n.length>0){let o=n[0];if(n.length>1){ce(e9);const l=n.filter(c=>Je(c)&&"op"in c&&c.op!=="min");n.every(c=>Je(c)&&"op"in c)&&l.length===1?o=l[0]:o=!0}else if(Je(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Ba(n.map(s=>P0(s)||!("op"in s)||Re(s.op)&&tn(n_e,s.op)?s:(ce(oAe(s)),!0)),Ye);let r;i.length===1?r=i[0]:i.length>1&&(ce(e9),r=!0);const a=Ba(e.map(s=>Ks(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function _O(e){if(Ks(e)&&Re(e.field))return e.field;if(o_e(e)){let t;for(const n of e.fields)if(Ks(n)&&Re(n.field)){if(!t)t=n.field;else if(t!==n.field)return ce(uAe),t}return ce(lAe),t}else if(u_e(e)){ce(cAe);const t=e.fields[0];return Re(t)?t:void 0}}function mS(e,t){const i=e.component.scales[t].get("domains").map(r=>(Ks(r)&&(r.data=e.lookupDataSource(r.data)),r));return LTe(i)}function LV(e){return Wh(e)||AO(e)?e.children.reduce((t,n)=>t.concat(LV(n)),G9(e)):G9(e)}function G9(e){return oe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:c,reverse:d,...h}=r,p=UTe(r.range,a,n,e),y=mS(e,n),v=o?UMe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function UTe(e,t,n,i){if(Wt(n)){if(Xc(e))return{step:{signal:`${t}_step`}}}else if(Je(e)&&Ks(e))return{...e,data:i.lookupDataSource(e.data)};return e}class UV extends To{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(qe([Fn.LOG,Fn.TIME,Fn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&qe([Fn.LINEAR,Fn.SQRT,Fn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(me(o)){const l=o[0],c=o[o.length-1];if(Dt(l)&&Dt(c))if(l<=0&&c>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const BTe=["range","scheme"];function jTe(e){const t=e.component.scales;for(const n of Sk){const i=t[n];if(!i)continue;const r=PTe(n,e);i.setWithExplicit("range",r)}}function Y9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Pi(t),s=e.getName(a);if(Je(i)&&i.binned&&i.step!==void 0)return new xn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(_t(i)){const o=xO(e,r,i);return new xn(()=>{const l=e.getSignalName(o),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${c})`})}}}function PTe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of BTe)if(n[h]!==void 0){const p=DC(a,h),y=TY(e,h);if(!p)ce(uY(a,h,e));else if(y)ce(y);else switch(h){case"range":{const v=n.range;if(me(v)){if(Wt(e))return Ra(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),w=t.getSignalName.bind(t);return xn.fromName(w,S)}return b}))}else if(Je(v))return Ra({data:t.requestDataName(zt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ra(v)}case"scheme":return Ra(ITe(n[h]))}}const s=e===kt||e==="xOffset"?"width":"height",o=i[s];if(rs(o)){if(Wt(e))if(Mn(a)){const h=jV(o,t,e);if(h)return Ra({step:h})}else ce(lY(s));else if(Dm(e)){const h=e===Qu?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=PV(o,a);if(v)return Ra(v)}}}const{rangeMin:l,rangeMax:c}=n,d=qTe(e,t);return(l!==void 0||c!==void 0)&&DC(a,"rangeMin")&&me(d)&&d.length===2?Ra([l??d[0],c??d[1]]):Ki(d)}function ITe(e){return WAe(e)?{scheme:e.name,...ur(e,["name"])}:{scheme:e}}function BV(e,t,n,{center:i}={}){const r=Pi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Dn&&ca(n)?i?[xn.fromName(o=>`${s(o)}/2`,a),xn.fromName(o=>`-${s(o)}/2`,a)]:[xn.fromName(s,a),0]:i?[xn.fromName(o=>`-${s(o)}/2`,a),xn.fromName(o=>`${s(o)}/2`,a)]:[0,xn.fromName(s,a)]}function qTe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=cn(a[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:d}=t.specifiedScales[e];switch(e){case kt:case Dn:{if(qe(["point","band"],l)){const h=IV(e,n,i.view);if(rs(h))return{step:jV(h,t,e)}}return BV(e,t,l)}case Qu:case qh:return HTe(e,t,l);case Ao:{const h=XTe(r,i),p=VTe(r,n,t,i);return Xd(l)?YTe(h,p,GTe(l,i,c,e)):[h,p]}case Br:return[0,Math.PI*2];case Hc:return[0,360];case ba:return[0,new xn(()=>{const h=t.getSignalName(lr(t.parent)?"child_width":"width"),p=t.getSignalName(lr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Zu:return{step:1e3/i.scale.framesPerSecond};case el:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case tl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ji:return"symbol";case Bi:case gs:case ps:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case $o:case Ku:case Ju:return[i.scale.minOpacity,i.scale.maxOpacity]}}function jV(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=yk(n),s=i[a];if(EX({step:e,offsetIsDiscrete:Oe(s)&&wY(s.type)})==="offset"&&nX(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${h_e(h)})`}}else return e.step}function PV(e,t){if(EX({step:e,offsetIsDiscrete:Mn(t)})==="offset")return{step:e.step}}function HTe(e,t,n){const i=e===Qu?"x":"y",r=t.getScaleComponent(i);if(!r)return BV(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const c=IV(i,t.size,t.config.view);if(rs(c)){const d=PV(c,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const c=t.encoding[i];if(fe(c)&&c.timeUnit){const d=bY(c.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Bu({fieldDef:c,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(h){const v=ve(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=ve(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return DG(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function IV(e,t,n){const i=e===kt?"width":"height",r=t[i];return r||ox(n,i)}function GTe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&me(n)?n.length+1:(ce(bAe(i)),3)}}function YTe(e,t,n){const i=()=>{const r=ia(t),a=ia(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return ve(t)?new xn(i):{signal:i()}}function XTe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(X2("size",e))}const X9=.95;function VTe(e,t,n,i){const r={x:Y9(n,"x"),y:Y9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=V9(t,r,i.view);return Dt(a)?a-1:new xn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=V9(t,r,i.view);return Dt(a)?Math.pow(X9*a,2):new xn(()=>`pow(${X9} * ${a.signal}, 2)`)}}throw new Error(X2("size",e))}function V9(e,t,n){const i=rs(e.width)?e.width.step:RC(n,"width"),r=rs(e.height)?e.height.step:RC(n,"height");return t.x||t.y?new xn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function qV(e,t){Rt(e)?WTe(e,t):GV(e,t)}function WTe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of oe(n)){const l=s[o],c=n[o],d=e.getScaleComponent(o),h=cn(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=DC(y,t),w=TY(o,t);if(p!==void 0&&(S?w&&ce(w):ce(uY(y,t,o))),S&&w===void 0)if(p!==void 0){const _=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":Vc(l[t])||A==="temporal"||_?c.set(t,{signal:rS(l[t],{type:A,timeUnit:_})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const _=ue(W9,t)?W9[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:iX(r,o),hasSecondaryRangeChannel:!!r[ms(o)]}):i.scale[t];_!==void 0&&c.set(t,_,!1)}}}const W9={bins:({model:e,fieldOrDatumDef:t})=>fe(t)?QTe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>ZTe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>KTe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>JTe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>eDe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>tDe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=fe(e)?e.sort:void 0;return nDe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>iDe(e,t,n,i,r,a.scale,s)};function HV(e){Rt(e)?jTe(e):GV(e,"range")}function GV(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?HV(i):qV(i,t);for(const i of oe(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=ju(r,o,t,"scale",zX((l,c)=>{switch(t){case"range":return l.step&&c.step?l.step-c.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function QTe(e,t){const n=t.bin;if(_t(n)){const i=xO(e,t.field,n);return new xn(()=>e.getSignalName(i))}else if(Rn(n)&&Yc(n)&&n.step!==void 0)return{step:n.step}}function ZTe(e,t){if(qe([Bi,gs,ps],e)&&t!=="nominal")return"hcl"}function KTe(e,t,n,i,r,a){if(!(da(a)?.bin||me(n)||r!=null||i!=null||qe([Fn.TIME,Fn.UTC],e)))return Wt(t)?!0:void 0}function JTe(e,t,n,i,r,a){if(Wt(e)){if(ja(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(fe(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Fn.POINT)return n.pointPadding}}function eDe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:c,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Vt(s,n==="bar"?o:n==="tick"?c:l)}else if(Dm(t)&&i===Fn.BAND)return r.offsetBandPaddingInner}}function tDe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Fn.BAND)return Vt(s,ve(i)?{signal:`${i.signal}/2`}:i/2)}else if(Dm(t)){if(n===Fn.POINT)return .5;if(n===Fn.BAND)return r.offsetBandPaddingOuter}}}function nDe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ca(e)&&t==="descending"?ve(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ca(e)&&t==="descending")return!0}function iDe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&ca(r)){if(me(n)){const l=n[0],c=n[n.length-1];if(Dt(l)&&l<=0&&Dt(c)&&c>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Xd(r))return!0;if(!(fe(t)&&t.bin)&&qe([...Co,...Xwe],e)){const{orient:l,type:c}=i;return qe(["bar","area","line","trail"],c)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:qe(["bar","area"],c)&&!s?!0:a?.zero}return!1}function rDe(e,t,n,i,r=!1){const a=aDe(t,n,i,r),{type:s}=e;return ys(t)?s!==void 0?n$e(t,s)?fe(n)&&!t$e(s,n.type)?(ce(iAe(s,a)),a):s:(ce(nAe(t,s,a)),a):a:null}function aDe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(yd(e)||oA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ce(uA(e,"ordinal")),"ordinal";if(sA(e))return"band";if(Wt(e)||Dm(e)){if(qe(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in xk)return"band";const r=n[Pi(e)];return Cc(r)||Wd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return yd(e)?"time":oA(e)==="discrete"?(ce(uA(e,"temporal")),"ordinal"):fe(t)&&t.timeUnit&&Cn(t.timeUnit).utc?"utc":sA(e)?"band":"time";case"quantitative":return yd(e)?fe(t)&&_t(t.bin)?"bin-ordinal":"linear":oA(e)==="discrete"?(ce(uA(e,"quantitative")),"ordinal"):sA(e)?"band":"linear";case"geojson":return}throw new Error(sY(t.type))}function sDe(e,{ignoreRange:t}={}){YV(e),FV(e);for(const n of e$e)qV(e,n);t||HV(e)}function YV(e){Rt(e)?e.component.scales=oDe(e):e.component.scales=lDe(e)}function oDe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of Sk){const s=cn(t[a]);if(s&&n===OY&&a===ji&&s.type===Hh)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const l=iX(t,a),c=rDe(o,a,s,i,l);r[a]=new UV(e.scaleName(`${a}`,!0),{value:c,explicit:o.type===c})}}return r}const uDe=zX((e,t)=>n9(e)-n9(t));function lDe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){YV(r);for(const a of oe(r.component.scales))if(i.scale[a]??=wV(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?HAe(s.value,o.value)?n[a]=ju(s,o,"type","scale",uDe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of oe(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new UV(a,s);for(const o of e.children){const l=o.component.scales[r];l&&(o.renameScale(l.get("name"),a),l.merged=!0)}}return t}class xA{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Rt(e){return e?.type==="unit"}function lr(e){return e?.type==="facet"}function AO(e){return e?.type==="concat"}function Wh(e){return e?.type==="layer"}class $O{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=zn(o),this.name=t.name??r,this.title=su(t.title)?{text:t.title}:t.title?zn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new xA,this.projectionNameMap=i?i.projectionNameMap:new xA,this.signalNameMap=i?i.signalNameMap:new xA,this.data=t.data,this.description=t.description,this.transforms=pMe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:bCe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:tS(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new To,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?De(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){sDe(this)}parseProjection(){NV(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){MV(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of oe(i)){const s=i[a];s!==void 0&&(r[a]=$t(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=$t(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:St(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=D3e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Dr)t[i].title&&n.push(_3e(this,i));for(const i of mO)n=n.concat(A3e(this,i));return n}assembleAxes(){return f3e(this.component.axes,this.config)}assembleLegends(){return DV(this)}assembleProjections(){return J3e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...ZG(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return qe(["unit","layer"],this.type)?qe(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",St(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||lr(this.parent)?LV(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Tt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(lr(this.parent)){const n=SV(t),i=H2(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Mn(a)&&Xc(s)){const o=r.get("name"),l=mS(this,i),c=_O(l);if(c){const d=he({aggregate:"distinct",field:c},{expr:"datum"});return{signal:xV(o,r,d)}}else return ce(_k(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(qG(t)&&ys(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(v_e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class XV extends $O{vgField(t,n={}){const i=this.fieldDef(t);if(i)return he(i,n)}reduceFieldDef(t,n){return V$e(this.getMapping(),(i,r,a)=>{const s=da(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){Kk(this.getMapping(),(i,r)=>{const a=da(i);a&&t(a,r)},n)}}class yS extends ht{transform;clone(){return new yS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ye(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class vS extends ht{transform;clone(){return new vS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ye(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class bS extends ht{transform;clone(){return new bS(this.parent,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ye(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class xS extends ht{transform;clone(){return new xS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ye(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class xd extends ht{fields;geojson;signal;clone(){return new xd(null,De(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Sa,xa],[Lr,Ea]]){const a=r.map(s=>{const o=cn(n.encoding[s]);return fe(o)?o.field:vs(o)?{expr:`${o.datum}`}:fa(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new xd(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ji)){const r=n.typedFieldDef(ji);r.type===Hh&&(t=new xd(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Re);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ye(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class G0 extends ht{projection;fields;as;clone(){return new G0(null,this.projection,De(this.fields),De(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Sa,xa],[Lr,Ea]]){const r=i.map(s=>{const o=cn(n.encoding[s]);return fe(o)?o.field:vs(o)?{expr:`${o.datum}`}:fa(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Lr?"2":"";(r[0]||r[1])&&(t=new G0(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Re))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ye(this.fields)} ${Ye(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class uc extends ht{transform;clone(){return new uc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new uc(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(fe(r)&&fe(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:c,frame:d,keyvals:h}=s.impute,p=sX(n.mark,i);return new uc(t,{impute:s.field,key:o.field,...l?{method:l}:{},...c!==void 0?{value:c}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Ye(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:QCe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const c={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,c,d]}else return[l]}}class SS extends ht{transform;clone(){return new SS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ye(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Y0 extends ht{transform;secondary;clone(){return new Y0(null,De(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(ZCe(s)){let l=QV(s.data,a);l||(l=new kc(s.data),a.push(l));const c=n.getName(`lookup_${r}`);o=new zi(l,c,zt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=o}else if(KCe(s)){const l=s.param;i={as:l,...i};let c;try{c=n.getSelectionComponent(Tt(l),l)}catch{throw new Error(E_e(l))}if(o=c.materialized,!o)throw new Error(w_e(l))}return new Y0(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Xt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ye({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Xt(this.transform.as)}:{}};else{let n=this.transform.as;Re(n)||(ce(R_e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class ES extends ht{transform;clone(){return new ES(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ye(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class wS extends ht{transform;clone(){return new wS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ye(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class _S extends ht{transform;clone(){return new _S(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ye(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class AS extends ht{transform;clone(){return new AS(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ye(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function VV(e){let t=0;function n(i,r){if(i instanceof kc&&!i.isGenerator&&!Zd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ti&&(i.parent instanceof kc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Xh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof jm||i instanceof Pm||i instanceof nh||i instanceof Yh||i instanceof Jd||i instanceof G0||i instanceof sa||i instanceof Y0||i instanceof Vh||i instanceof Kc||i instanceof xS||i instanceof bS||i instanceof yS||i instanceof SS||i instanceof ES||i instanceof wS||i instanceof Pu||i instanceof AS||i instanceof _S||i instanceof vS)&&r.transform.push(i.assemble()),(i instanceof Wa||i instanceof Xa||i instanceof uc||i instanceof lo||i instanceof xd)&&r.transform.push(...i.assemble()),i instanceof zi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof zi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof zi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function cDe(e){const t=[],n=VV(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function fDe(e,t){const n=[],i=VV(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function dDe(e){return e==="top"||e==="left"||ve(e)?"header":"footer"}function hDe(e){for(const t of Dr)gDe(e,t);Q9(e,"x"),Q9(e,"y")}function gDe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=th("title",null,i,t);let l=vd(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(l=me(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=th("labelOrient",s.header,i,t),d=s.header!==null?Vt(s.header?.labels,i.header.labels,!0):!1,h=qe(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[h]:t==="facet"?[]:[WV(e,t,d)]}}}function WV(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Q9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=bO(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=dDe(o.get("orient"));s[l]??=[WV(e,a,!1)];const c=Hp(o,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),o.mainExtracted=!0}}}}function pDe(e){CO(e),fx(e,"width"),fx(e,"height")}function mDe(e){CO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";fx(e,t),fx(e,n)}function CO(e){for(const t of e.children)t.parseLayoutSize()}function fx(e,t){const n=SV(t),i=H2(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),c=r.scale[i]??wV(i,e);if(c==="independent"&&l.value==="step"){s=void 0;break}if(s){if(c==="independent"&&s.value!==l.value){s=void 0;break}s=ju(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function yDe(e){const{size:t,component:n}=e;for(const i of Co){const r=Pi(i);if(t[r]){const a=t[r];n.layoutSize.set(r,rs(a)?"step":a,!0)}else{const a=vDe(e,r);n.layoutSize.set(r,a,!1)}}}function vDe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Mn(a)){const o=ox(i.view,t);return Xc(s)||rs(o)?"step":o}else return NC(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return NC(i.view,t);{const a=ox(i.view,t);return rs(a)?a.step:a}}}function ZC(e,t,n){return he(t,{suffix:`by_${he(e)}`,...n})}class u0 extends XV{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=OO(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Rm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=oe(t),i={};for(const r of n){if(![ao,so].includes(r)){ce(X2(r,"facet"));break}const a=t[r];if(a.field===void 0){ce(MC(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Zk(t,n);return i.header?i.header=zn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ue(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=$S(this),this.child.parseData()}parseLayoutSize(){CO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,nn(this.component.selection).some(t=>Va(t))&&$k(Ak)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),hDe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Dr)for(const i of yO){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=th("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const l=gS(n,o);t.titleAnchor??={},t.titleAnchor[l]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??={},t[l][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof u0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof u0?{...this.channelHasField("column")?{encode:{update:{columns:{field:he(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof u0){if(this.child.channelHasField("column")){const r=he(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Co){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(Mn(s)&&Xc(o)){const l=mS(this.child,r),c=_O(l);c?(t.push(c),n.push("distinct"),i.push(`distinct_${c}`)):ce(_k(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of Dr){const h=this.facet[d];if(h){l.push(he(h));const{bin:p,sort:y}=h;if(_t(p)&&l.push(he(h,{binSuffix:"end"})),oo(y)){const{field:v,op:b=eS}=y,S=ZC(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(me(y)){const v=eh(h,d);a.push(v),s.push("max"),o.push(v)}}}const c=!!i&&!!r;return{name:t,data:n,groupby:l,...c||a.length>0?{aggregate:{...c?{cross:c}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?oo(i.sort)?[ZC(i,i.sort,{expr:"datum"})]:me(i.sort)?[eh(i,t,{expr:"datum"})]:[he(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(oo(r)?r.order:!me(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return HC(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of mO)if(t[r]){const a=th("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return HC(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=cDe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Dr.map(l=>this.facetSortFields(l)).flat(),order:Dr.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(RMe(this,[]))}]}getMapping(){return this.facet}}function bDe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(oo(a.sort)){const{field:s,op:o=eS}=a.sort;e=r=new Kc(e,{joinaggregate:[{op:o,field:s,as:ZC(a,a.sort,{forAs:!0})}],groupby:[he(a)]})}return r}return null}function QV(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(H0(e)&&H0(i)){if(ar(e.values,i.values))return n}else if(Zd(e)&&Zd(i)){if(e.url===i.url)return n}else if(FX(e)&&e.name===n.dataName)return n}}return null}function xDe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new kc({values:[]});return t.push(i),i}const n=QV(e.data,t);if(n)return wu(e.data)||(n.data.format=kG({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new kc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function SDe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(uMe(r))s=e=new Jd(e,r),a="derived";else if(lO(r)){const o=dTe(r);s=e=ti.makeWithAncestors(e,{},o,n)??e,e=new Yh(e,t,r.filter)}else if(kX(r))s=e=Wa.makeFromTransform(e,r,t),a="number";else if(cMe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new ti(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Xa.makeFromTransform(e,r);else if(fMe(r))s=e=sa.makeFromTransform(e,r),a="number",pO(t)&&(e=new Pu(e));else if(DX(r))s=e=Y0.make(e,t,r,i++),a="derived";else if(aMe(r))s=e=new Vh(e,r),a="number";else if(sMe(r))s=e=new Kc(e,r),a="number";else if(dMe(r))s=e=lo.makeFromTransform(e,r),a="derived";else if(hMe(r))s=e=new xS(e,r),a="derived";else if(gMe(r))s=e=new vS(e,r),a="derived";else if(oMe(r))s=e=new bS(e,r),a="derived";else if(JCe(r))s=e=new _S(e,r),a="derived";else if(rMe(r))e=new AS(e,r);else if(lMe(r))s=e=uc.makeFromTransform(e,r),a="derived";else if(eMe(r))s=e=new yS(e,r),a="derived";else if(tMe(r))s=e=new ES(e,r),a="derived";else if(nMe(r))s=e=new wS(e,r),a="derived";else if(iMe(r))s=e=new SS(e,r),a="derived";else{ce(N_e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function $S(e){let t=xDe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(wu(r)||Zd(r)||H0(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new $Me;wu(r)?(LX(r)?t=new Pm(t,r.sequence):cO(r)&&(t=new jm(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=ti.makeExplicit(t,e,s)??t,t=new Pu(t);const o=e.parent&&Wh(e.parent);(Rt(e)||lr(e))&&o&&(t=Wa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=SDe(t,e,s));const l=gTe(e),c=hTe(e);t=ti.makeWithAncestors(t,{},{...l,...c},s)??t,Rt(e)&&(t=xd.parseAll(t,e),t=G0.parseAll(t,e)),(Rt(e)||lr(e))&&(o||(t=Wa.makeFromEncoding(t,e)??t),t=Xa.makeFromEncoding(t,e)??t,t=Jd.parseAllForSortIndex(t,e));const d=t=Py(zt.Raw,e,t);if(Rt(e)){const S=sa.makeFromEncoding(t,e);S&&(t=S,pO(e)&&(t=new Pu(t))),t=uc.makeFromEncoding(t,e)??t,t=lo.makeFromEncoding(t,e)??t}let h,p;if(Rt(e)){const{markDef:S,mark:w,config:_}=e,A=yt("invalid",S,_),{marks:$,scales:C}=p=BX({invalid:A,isPath:il(w)});$!==C&&C==="include-invalid-values"&&(h=t=Py(zt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=nh.make(t,e,p)??t)}const y=t=Py(zt.Main,e,t);let v;if(Rt(e)&&p){const{marks:S,scales:w}=p;S==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=nh.make(t,e,p)??t,v=t=Py(zt.PostFilterInvalid,e,t))}Rt(e)&&l3e(e,y);let b=null;if(lr(e)){const S=e.getName("facet");t=bDe(t,e.facet)??t,b=new Xh(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function Py(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new zi(n,a,e,r);return i[a]=s,s}class EDe extends $O{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ce(D_e),this.children=this.getChildren(t).map((a,s)=>OO(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=$S(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Va(t))&&$k(Ak)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return oS(t)?t.vconcat:oO(t)?t.hconcat:t.concat}parseLayoutSize(){mDe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=vO(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function wDe(e){return e===!1||e===null}const _De={disable:1,gridScale:1,scale:1,...eX,labelExpr:1,encode:1},ZV=oe(_De);class MO extends To{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new MO(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!wDe(this.get(t))}hasOrientSignalRef(){return ve(this.explicit.orient)}}function ADe(e,t,n){const{encoding:i,config:r}=e,a=cn(i[t])??cn(i[ms(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(Mc(l))return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(Vd(a)==="quantitative"){if(Wd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Vd(a)==="temporal"&&r.timeFormatType&&fe(a)&&!a.timeUnit)return{text:ra({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function $De(e){return Co.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[NDe(n,e)]),t),{})}const CDe={bottom:"top",top:"bottom",left:"right",right:"left"};function MDe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of oe(r.component.axes))n.axis[a]=bO(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=TDe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of Co){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!ve(o)){if(i[o]>0&&!l){const c=CDe[o];i[o]>i[c]&&s.set("orient",c,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function TDe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=DDe(r,a)}}}else return t.map(n=>n.clone());return e}function DDe(e,t){for(const n of ZV){const i=ju(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return rY(r,a);case"gridScale":return{explicit:r.explicit,value:Vt(r.value,a.value)}}return lS(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function kDe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ve(n.labelAngle)?n.labelAngle:I0(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===mV(i,r))return!0}return e===n[t]}const ODe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function NDe(e,t){let n=t.axis(e);const i=new MO,r=cn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||b3e(e),l=t.getScaleComponent(e).get("type"),c=d3e(e,l,o,t.config),d=n!==void 0?!n:IC("disable",s.style,n?.style,c).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=m3e(r,n,e,s.style,c),p=jY(n.formatType,r,l),y=BY(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const w of ZV){const _=w in F9?F9[w](v):l9(w)?n[w]:void 0,A=_!==void 0,$=kDe(_,w,n,t,e);if(A&&$)i.set(w,_,$);else{const{configValue:C=void 0,configFrom:D=void 0}=l9(w)&&w!=="values"?IC(w,s.style,n.style,c):{},T=C!==void 0;A&&!T?i.set(w,_,$):(D!=="vgAxisConfig"||ODe.has(w)&&T||Um(C)||ve(C))&&i.set(w,C,!1)}}const b=n.encoding??{},S=JY.reduce((w,_)=>{if(!i.hasAxisPart(_))return w;const A=EV(b[_]??{},t),$=_==="labels"?ADe(t,e,A):A;return $!==void 0&&!St($)&&(w[_]={update:$}),w},{});return St(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function RDe({encoding:e,size:t}){for(const n of Co){const i=Pi(n);rs(t[i])&&pu(e[n])&&(delete t[i],ce(lY(i)))}return t}const zDe={vgMark:"arc",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...yo(e,"radius"),...yo(e,"theta")})},FDe={vgMark:"area",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ux("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...ux("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...gO(e)})},LDe={vgMark:"rect",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y")})},UDe={vgMark:"shape",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&fe(n)&&n.type===Hh?{field:he(n,{expr:"datum"})}:{}}]}},BDe={vgMark:"image",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y"),...dO(e,"url")})},jDe={vgMark:"line",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e,{vgChannel:"strokeWidth"}),...gO(e)})},PDe={vgMark:"trail",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e),...gO(e)})};function TO(e,t){const{config:n}=e;return{...jr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...Ln("size",e),...Ln("angle",e),...IDe(e,n,t)}}function IDe(e,t,n){return n?{shape:{value:n}}:Ln("shape",e)}const qDe={vgMark:"symbol",encodeEntry:e=>TO(e)},HDe={vgMark:"symbol",encodeEntry:e=>TO(e,"circle")},GDe={vgMark:"symbol",encodeEntry:e=>TO(e,"square")},YDe={vgMark:"rect",encodeEntry:e=>({...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,"x"),...yo(e,"y")})},XDe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ux("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...ux("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ln("size",e,{vgChannel:"strokeWidth"})}}},VDe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...jr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...mi("x",e,{defaultPos:"mid"}),...mi("y",e,{defaultPos:"mid"}),...dO(e),...Ln("size",e,{vgChannel:"fontSize"}),...Ln("angle",e),...O9("align",WDe(e.markDef,n,t)),...O9("baseline",QDe(e.markDef,n,t)),...mi("radius",e,{defaultPos:null}),...mi("theta",e,{defaultPos:null})}}};function WDe(e,t,n){if(yt("align",e,n)===void 0)return"center"}function QDe(e,t,n){if(yt("baseline",e,n)===void 0)return"middle"}const ZDe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...jr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yo(e,r),...mi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:$t(yt("thickness",n,t))}}},Iy={arc:zDe,area:FDe,bar:LDe,circle:HDe,geoshape:UDe,image:BDe,line:jDe,point:qDe,rect:YDe,rule:XDe,square:GDe,text:VDe,tick:ZDe,trail:PDe};function KDe(e){if(qe([K2,Q2,s$e],e.mark)){const t=sX(e.mark,e.encoding);if(t.length>0)return JDe(e,t)}else if(e.mark===Z2){const t=$C.some(n=>yt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return eke(e)}return DO(e)}const Z9="faceted_path_";function JDe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Z9+e.requestDataName(zt.Main),data:e.requestDataName(zt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:DO(e,{fromPrefix:Z9})}]}const K9="stack_group_";function eke(e){const[t]=DO(e,{fromPrefix:K9}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...Id(t.encode.update,["y","yc","y2","height",...$C]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ur(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ur(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of $C){const d=ns(c,e.markDef,e.config);t.encode.update[c]?(a[c]=t.encode.update[c],delete t.encode.update[c]):d&&(a[c]=$t(d)),d&&(t.encode.update[c]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),h=he(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(he(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const h=ns(d,e.markDef,e.config);return h!==void 0?{...c,[d]:$t(h)}:c}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zt.Main),name:K9+e.requestDataName(zt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function tke(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!me(s)&&fa(s)&&_C(s.value)||!s&&_C(yt("order",r,a)))){if((me(s)||fe(s))&&!n)return tY(s,{expr:"datum"});if(il(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(fe(l))return{field:o}}}}function DO(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Vt(i.clip,nke(e),ike(e)),o=JG(i),l=r.key,c=tke(e),d=rke(e),h=yt("aria",i,a),p=Iy[n].postEncodingTransform?Iy[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Iy[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(zt.Main)},encode:{update:Iy[n].encodeEntry(e)},...p?{transform:p}:{}}]}function nke(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function ike(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function rke(e){if(!e.component.selection)return null;const t=oe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=oe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class KV extends XV{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,f9(t)?t.view:void 0);const s=is(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=ICe(s,a,{graticule:t.data&&cO(t.data)}));const l=this.encoding=Y$e(t.encoding||{},o,s.filled,a);this.markDef=CX(s,l,a),this.size=RDe({encoding:l,size:f9(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=$X(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(c=>aO(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===OY,i=t&&Uwe.some(r=>Oe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Sk.reduce((i,r)=>{const a=cn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=zn(t);return me(n)&&(r.domain=n.map(nr)),me(i)&&(r.range=i.map(nr)),r}initAxes(t){return Co.reduce((n,i)=>{const r=t[i];if(Oe(r)||i===kt&&Oe(t.x2)||i===Dn&&Oe(t.y2)){const a=Oe(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=oe(t),i={};for(const r of n){const a=t[r];i[r]=Um(a)?KG(a):nr(a)}return i}initLegends(t){return Wwe.reduce((n,i)=>{const r=cn(t[i]);if(r&&Zwe(i)){const a=r.legend;n[i]=a&&zn(a)}return n},{})}parseData(){this.component.data=$S(this)}parseLayoutSize(){yDe(this)}parseSelections(){this.component.selection=u3e(this,this.selection)}parseMarkGroup(){this.component.mark=KDe(this)}parseAxesAndHeaders(){this.component.axes=$De(this)}assembleSelectionTopLevelSignals(t){return zMe(this,t)}assembleSignals(){return[...hV(this),...NMe(this,[])]}assembleSelectionData(t){return FMe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return vO(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+PX)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Wh(this.parent))&&(t=GX(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return sc(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return da(n)}typedFieldDef(t){const n=this.fieldDef(t);return Si(n)?n:null}}class kO extends $O{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(uS(o))return new kO(o,this,this.getName(`layer_${l}`),s,a);if(Mo(o))return new KV(o,this,this.getName(`layer_${l}`),s,a);throw new Error(wk(o))})}parseData(){this.component.data=$S(this);for(const t of this.children)t.parseData()}parseLayoutSize(){pDe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}nn(this.component.selection).some(t=>Va(t))&&$k(Ak)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){MDe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),hV(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),vO(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Xt(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return LMe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),DV(this))}}function OO(e,t,n,i,r){if(tS(e))return new u0(e,t,n,r);if(uS(e))return new kO(e,t,n,i,r);if(Mo(e))return new KV(e,t,n,i,r);if(mCe(e))return new EDe(e,t,n,r);throw new Error(wk(e))}function ake(e,t={}){t.logger&&xAe(t.logger),t.fieldTitle&&QY(t.fieldTitle);try{const n=AX(TG(t.config,e.config)),i=RX(e,n),r=OO(i,null,"",void 0,n);return r.parse(),TTe(r.component.data,r),{spec:oke(r,ske(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&SAe(),t.fieldTitle&&L$e()}}function ske(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Re(t)&&(t={type:t}),r&&a&&wMe(t.type)){if(r==="step"&&a==="step")ce(WF()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";ce(WF(H2(s)));const o=s==="width"?"height":"width";t.type=_Me(o)}}return{...oe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...w9(n,!1),...w9(e,!0)}}function oke(e,t,n={},i){const r=e.config?DCe(e.config):void 0,a=fDe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),c=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...c?{style:c}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...SX(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const uke=Owe.version,lke=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Hd,accessPathWithDatum:hk,accessWithDatumToUnescapedPath:ft,compile:ake,contains:qe,deepEqual:ar,deleteNestedProperty:Kb,duplicate:De,entries:Lu,every:ck,fieldIntersection:dk,flatAccessWithDatum:NG,getFirstDefined:Vt,hasIntersection:fk,hasProperty:ue,hash:Ye,internalField:FG,isBoolean:P0,isEmpty:St,isEqual:Rwe,isInternalField:LG,isNullOrFalse:_C,isNumeric:U2,keys:oe,logicalExpr:s0,mergeDeep:kG,never:DG,normalize:RX,normalizeAngle:I0,omit:ur,pick:Id,prefixGenerator:AC,removePathFromField:Ih,replaceAll:Ec,replacePathInField:Fr,resetIdCounter:Fwe,setEqual:OG,some:qd,stringify:ut,titleCase:Cm,unique:Ba,uniqueId:zG,vals:nn,varName:Tt,version:uke},Symbol.toStringTag,{value:"Module"}));function JV(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var cke="2.15.0",fke={version:cke};const Qf="#fff",J9="#888",dke={background:"#333",view:{stroke:J9},title:{color:Qf,subtitleColor:Qf},style:{"guide-label":{fill:Qf},"guide-title":{fill:Qf}},axis:{domainColor:Qf,gridColor:J9,tickColor:Qf}},Cl="#4572a7",hke={background:"#fff",arc:{fill:Cl},area:{fill:Cl},line:{stroke:Cl,strokeWidth:2},path:{stroke:Cl},rect:{fill:Cl},shape:{stroke:Cl},symbol:{fill:Cl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Ml="#30a2da",SA="#cbcbcb",gke="#999",pke="#333",e7="#f0f0f0",t7="#333",mke={arc:{fill:Ml},area:{fill:Ml},axis:{domainColor:SA,grid:!0,gridColor:SA,gridWidth:1,labelColor:gke,labelFontSize:10,titleColor:pke,tickColor:SA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:e7,group:{fill:e7},legend:{labelColor:t7,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:t7,titleFontSize:14,titlePadding:10},line:{stroke:Ml,strokeWidth:2},path:{stroke:Ml,strokeWidth:.5},rect:{fill:Ml},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Ml},bar:{binSpacing:2,fill:Ml,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Tl="#000",yke={group:{fill:"#e5e5e5"},arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},vke=22,bke="normal",n7="Benton Gothic, sans-serif",i7=11.5,xke="normal",Dl="#82c6df",EA="Benton Gothic Bold, sans-serif",r7="normal",a7=13,vp={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Ske={background:"#ffffff",title:{anchor:"start",color:"#000000",font:EA,fontSize:vke,fontWeight:bke},arc:{fill:Dl},area:{fill:Dl},line:{stroke:Dl,strokeWidth:2},path:{stroke:Dl},rect:{fill:Dl},shape:{stroke:Dl},symbol:{fill:Dl,size:30},axis:{labelFont:n7,labelFontSize:i7,labelFontWeight:xke,titleFont:EA,titleFontSize:a7,titleFontWeight:r7},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:n7,labelFontSize:i7,symbolType:"square",titleFont:EA,titleFontSize:a7,titleFontWeight:r7},range:{category:vp["category-6"],diverging:vp["fireandice-6"],heatmap:vp["fire-7"],ordinal:vp["fire-7"],ramp:vp["fire-7"]}},kl="#ab5787",qy="#979797",Eke={background:"#f9f9f9",arc:{fill:kl},area:{fill:kl},line:{stroke:kl},path:{stroke:kl},rect:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:30},axis:{domainColor:qy,domainWidth:.5,gridWidth:.2,labelColor:qy,tickColor:qy,tickWidth:.2,titleColor:qy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ol="#3e5c69",wke={background:"#fff",arc:{fill:Ol},area:{fill:Ol},line:{stroke:Ol},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{fill:Ol},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},_r="#1696d2",s7="#000000",_ke="#FFFFFF",Hy="Lato",wA="Lato",Ake="Lato",$ke="#DEDDDD",Cke=18,bp={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Mke={background:_ke,title:{anchor:"start",fontSize:Cke,font:Hy},axisX:{domain:!0,domainColor:s7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:wA,labelAngle:0,tickColor:s7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Hy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$ke,gridWidth:1,labelFontSize:12,labelFont:wA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Hy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:wA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Hy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:bp["six-groups-cat-1"],diverging:bp["diverging-colors"],heatmap:bp["diverging-colors"],ordinal:bp["six-groups-seq"],ramp:bp["shades-blue"]},area:{fill:_r},rect:{fill:_r},line:{color:_r,stroke:_r,strokeWidth:5},trail:{color:_r,stroke:_r,strokeWidth:0,size:1},path:{stroke:_r,strokeWidth:.5},point:{filled:!0},text:{font:Ake,color:_r,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:_r,stroke:null}},arc:{fill:_r},shape:{stroke:_r},symbol:{fill:_r,size:30}},Nl="#3366CC",o7="#ccc",Gy="Arial, sans-serif",Tke={arc:{fill:Nl},area:{fill:Nl},path:{stroke:Nl},rect:{fill:Nl},shape:{stroke:Nl},symbol:{stroke:Nl},circle:{fill:Nl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Gy,fontSize:12},"guide-title":{font:Gy,fontSize:12},"group-title":{font:Gy,fontSize:12}},title:{font:Gy,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:o7,tickColor:o7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},NO=e=>e*(1/3+1),u7=NO(9),l7=NO(10),c7=NO(12),xp="Segoe UI",f7="wf_standard-font, helvetica, arial, sans-serif",d7="#252423",Sp="#605E5C",h7="transparent",Dke="#C8C6C4",Yr="#118DFF",kke="#12239E",Oke="#E66C37",Nke="#6B007B",Rke="#E044A7",zke="#744EC2",Fke="#D9B300",Lke="#D64550",eW=Yr,tW="#DEEFFF",g7=[tW,eW],Uke=[tW,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",eW],Bke={view:{stroke:h7},background:h7,font:xp,header:{titleFont:f7,titleFontSize:c7,titleColor:d7,labelFont:xp,labelFontSize:l7,labelColor:Sp},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Sp,labelFontSize:u7,titleFont:f7,titleColor:d7,titleFontSize:c7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Dke,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Yr},line:{stroke:Yr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:xp,fontSize:u7,fill:Sp},arc:{fill:Yr},area:{fill:Yr,line:!0,opacity:.6},path:{stroke:Yr},rect:{fill:Yr},point:{fill:Yr,filled:!0,size:75},shape:{stroke:Yr},symbol:{fill:Yr,strokeWidth:1.5,size:50},legend:{titleFont:xp,titleFontWeight:"bold",titleColor:Sp,labelFont:xp,labelFontSize:l7,labelColor:Sp,symbolType:"circle",symbolSize:75},range:{category:[Yr,kke,Oke,Nke,Rke,zke,Fke,Lke],diverging:g7,heatmap:g7,ordinal:Uke}},_A='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',jke='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',AA=400,Yy={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Pke=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Ike=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function CS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=Yy.gridBg[e],r=Yy.textPrimary[e],a=Yy.textSecondary[e],s=n==="dark"?Pke:Ike,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:_A,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:jke,labelFontWeight:AA,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Yy.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:_A,fill:a,fontWeight:AA},"guide-title":{font:_A,fill:a,fontWeight:AA}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const qke=CS({theme:"white",background:"#ffffff"}),Hke=CS({theme:"g10",background:"#f4f4f4"}),Gke=CS({theme:"g90",background:"#262626"}),Yke=CS({theme:"g100",background:"#161616"}),Xke=fke.version,Vke=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Hke,carbong100:Yke,carbong90:Gke,carbonwhite:qke,dark:dke,excel:hke,fivethirtyeight:mke,ggplot2:yke,googlecharts:Tke,latimes:Ske,powerbi:Bke,quartz:Eke,urbaninstitute:Mke,version:Xke,vox:wke},Symbol.toStringTag,{value:"Module"}));function Wke(e,t,n,i){if(swe(e))return`[${e.map(r=>t(uwe(r)?r:p7(r,n))).join(", ")}]`;if(PF(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const c of l){let d=o[c];d!==void 0&&(PF(d)&&(d=p7(d,n)),r+=`<tr><td class="key">${t(c)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Qke(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function p7(e,t){return JSON.stringify(e,Qke(t))}var Zke=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const nW="vg-tooltip-element",Kke={offsetX:10,offsetY:10,id:nW,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Jke,maxDepth:2,formatTooltip:Wke,baseURL:""};function Jke(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function eOe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Zke.toString().replace(nW,e)}function tOe(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:r,y:a}}class nOe{constructor(t){this.options={...Kke,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=eOe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=tOe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var $A={};function iOe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CA,m7;function rOe(){return m7||(m7=1,CA=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),CA}var aOe=rt;rt.Node=Oc;rt.create=rt;function rt(e){var t=this;if(t instanceof rt||(t=new rt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}rt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};rt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};rt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};rt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)oOe(this,arguments[e]);return this.length};rt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)uOe(this,arguments[e]);return this.length};rt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};rt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};rt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};rt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};rt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};rt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};rt.prototype.map=function(e,t){t=t||this;for(var n=new rt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};rt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new rt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};rt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};rt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};rt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};rt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};rt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new rt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};rt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new rt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};rt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var a=[],i=0;r&&i<t;i++)a.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=sOe(this,r,n[i]);return a};rt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function sOe(e,t,n){var i=t===e.head?new Oc(n,null,t,e):new Oc(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function oOe(e,t){e.tail=new Oc(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function uOe(e,t){e.head=new Oc(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Oc(e,t,n,i){if(!(this instanceof Oc))return new Oc(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{rOe()(rt)}catch{}const lOe=aOe,ql=Symbol("max"),Is=Symbol("length"),Zf=Symbol("lengthCalculator"),l0=Symbol("allowStale"),Wl=Symbol("maxAge"),Bs=Symbol("dispose"),y7=Symbol("noDisposeOnSet"),bn=Symbol("lruList"),Xr=Symbol("cache"),iW=Symbol("updateAgeOnGet"),MA=()=>1;class cOe{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ql]=t.max||1/0;const n=t.length||MA;if(this[Zf]=typeof n!="function"?MA:n,this[l0]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Wl]=t.maxAge||0,this[Bs]=t.dispose,this[y7]=t.noDisposeOnSet||!1,this[iW]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ql]=t||1/0,Ep(this)}get max(){return this[ql]}set allowStale(t){this[l0]=!!t}get allowStale(){return this[l0]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Wl]=t,Ep(this)}get maxAge(){return this[Wl]}set lengthCalculator(t){typeof t!="function"&&(t=MA),t!==this[Zf]&&(this[Zf]=t,this[Is]=0,this[bn].forEach(n=>{n.length=this[Zf](n.value,n.key),this[Is]+=n.length})),Ep(this)}get lengthCalculator(){return this[Zf]}get length(){return this[Is]}get itemCount(){return this[bn].length}rforEach(t,n){n=n||this;for(let i=this[bn].tail;i!==null;){const r=i.prev;v7(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[bn].head;i!==null;){const r=i.next;v7(this,t,i,n),i=r}}keys(){return this[bn].toArray().map(t=>t.key)}values(){return this[bn].toArray().map(t=>t.value)}reset(){this[Bs]&&this[bn]&&this[bn].length&&this[bn].forEach(t=>this[Bs](t.key,t.value)),this[Xr]=new Map,this[bn]=new lOe,this[Is]=0}dump(){return this[bn].map(t=>dx(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[bn]}set(t,n,i){if(i=i||this[Wl],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,a=this[Zf](n,t);if(this[Xr].has(t)){if(a>this[ql])return Sd(this,this[Xr].get(t)),!1;const l=this[Xr].get(t).value;return this[Bs]&&(this[y7]||this[Bs](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[Is]+=a-l.length,l.length=a,this.get(t),Ep(this),!0}const s=new fOe(t,n,a,r,i);return s.length>this[ql]?(this[Bs]&&this[Bs](t,n),!1):(this[Is]+=s.length,this[bn].unshift(s),this[Xr].set(t,this[bn].head),Ep(this),!0)}has(t){if(!this[Xr].has(t))return!1;const n=this[Xr].get(t).value;return!dx(this,n)}get(t){return TA(this,t,!0)}peek(t){return TA(this,t,!1)}pop(){const t=this[bn].tail;return t?(Sd(this,t),t.value):null}del(t){Sd(this,this[Xr].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],a=r.e||0;if(a===0)this.set(r.k,r.v);else{const s=a-n;s>0&&this.set(r.k,r.v,s)}}}prune(){this[Xr].forEach((t,n)=>TA(this,n,!1))}}const TA=(e,t,n)=>{const i=e[Xr].get(t);if(i){const r=i.value;if(dx(e,r)){if(Sd(e,i),!e[l0])return}else n&&(e[iW]&&(i.value.now=Date.now()),e[bn].unshiftNode(i));return r.value}},dx=(e,t)=>{if(!t||!t.maxAge&&!e[Wl])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Wl]&&n>e[Wl]},Ep=e=>{if(e[Is]>e[ql])for(let t=e[bn].tail;e[Is]>e[ql]&&t!==null;){const n=t.prev;Sd(e,t),t=n}},Sd=(e,t)=>{if(t){const n=t.value;e[Bs]&&e[Bs](n.key,n.value),e[Is]-=n.length,e[Xr].delete(n.key),e[bn].removeNode(t)}};class fOe{constructor(t,n,i,r,a){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=a||0}}const v7=(e,t,n,i)=>{let r=n.value;dx(e,r)&&(Sd(e,n),e[l0]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var dOe=cOe;const hOe=Object.freeze({loose:!0}),gOe=Object.freeze({}),pOe=e=>e?typeof e!="object"?hOe:e:gOe;var RO=pOe,KC={exports:{}};const rW=256,mOe=Number.MAX_SAFE_INTEGER||9007199254740991,yOe=16,vOe=rW-6;var zO={MAX_LENGTH:rW,MAX_SAFE_COMPONENT_LENGTH:yOe,MAX_SAFE_BUILD_LENGTH:vOe,MAX_SAFE_INTEGER:mOe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const bOe=typeof process=="object"&&$A&&$A.NODE_DEBUG&&/\bsemver\b/i.test($A.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var MS=bOe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=zO,a=MS;t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],c=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[h,i]],y=b=>{for(const[S,w]of p)b=b.split(`${S}*`).join(`${S}{0,${w}}`).split(`${S}+`).join(`${S}{1,${w}}`);return b},v=(b,S,w)=>{const _=y(S),A=d++;a(b,A,S),c[b]=A,l[A]=S,s[A]=new RegExp(S,w?"g":void 0),o[A]=new RegExp(_,w?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),v("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${h}+`),v("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),v("FULL",`^${l[c.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),v("LOOSE",`^${l[c.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),v("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),v("COERCERTL",l[c.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(KC,KC.exports);var FO=KC.exports;const b7=/^[0-9]+$/,xOe=(e,t)=>{const n=b7.test(e),i=b7.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var SOe={compareIdentifiers:xOe};const Xy=MS,{MAX_LENGTH:x7,MAX_SAFE_INTEGER:Vy}=zO,{safeRe:S7,t:E7}=FO,EOe=RO,{compareIdentifiers:Kf}=SOe;let wOe=class ka{constructor(t,n){if(n=EOe(n),t instanceof ka){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>x7)throw new TypeError(`version is longer than ${x7} characters`);Xy("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?S7[E7.LOOSE]:S7[E7.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Vy||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vy||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vy||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const a=+r;if(a>=0&&a<Vy)return a}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Xy("SemVer.compare",this.version,this.options,t),!(t instanceof ka)){if(typeof t=="string"&&t===this.version)return 0;t=new ka(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ka||(t=new ka(t,this.options)),Kf(this.major,t.major)||Kf(this.minor,t.minor)||Kf(this.patch,t.patch)}comparePre(t){if(t instanceof ka||(t=new ka(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(Xy("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kf(i,r)}while(++n)}compareBuild(t){t instanceof ka||(t=new ka(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(Xy("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kf(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let a=[n,r];i===!1&&(a=[n]),Kf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var LO=wOe;const w7=LO,_Oe=(e,t,n)=>new w7(e,n).compare(new w7(t,n));var Qh=_Oe;const AOe=Qh,$Oe=(e,t,n)=>AOe(e,t,n)===0;var COe=$Oe;const MOe=Qh,TOe=(e,t,n)=>MOe(e,t,n)!==0;var DOe=TOe;const kOe=Qh,OOe=(e,t,n)=>kOe(e,t,n)>0;var NOe=OOe;const ROe=Qh,zOe=(e,t,n)=>ROe(e,t,n)>=0;var FOe=zOe;const LOe=Qh,UOe=(e,t,n)=>LOe(e,t,n)<0;var BOe=UOe;const jOe=Qh,POe=(e,t,n)=>jOe(e,t,n)<=0;var IOe=POe;const qOe=COe,HOe=DOe,GOe=NOe,YOe=FOe,XOe=BOe,VOe=IOe,WOe=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return qOe(e,n,i);case"!=":return HOe(e,n,i);case">":return GOe(e,n,i);case">=":return YOe(e,n,i);case"<":return XOe(e,n,i);case"<=":return VOe(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var QOe=WOe,DA,_7;function ZOe(){if(_7)return DA;_7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}DA=t;const n=RO,{safeRe:i,t:r}=FO,a=QOe,s=MS,o=LO,l=aW();return DA}var kA,A7;function aW(){if(A7)return kA;A7=1;class e{constructor(P,B){if(B=i(B),P instanceof e)return P.loose===!!B.loose&&P.includePrerelease===!!B.includePrerelease?P:new e(P.raw,B);if(P instanceof r)return this.raw=P.value,this.set=[[P]],this.format(),this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=P.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(q=>!v(q[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&b(q[0])){this.set=[q];break}}}this.format()}format(){return this.range=this.set.map(P=>P.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(P){const N=((this.options.includePrerelease&&p)|(this.options.loose&&y))+":"+P,q=n.get(N);if(q)return q;const Y=this.options.loose,ee=Y?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];P=P.replace(ee,z(this.options.includePrerelease)),a("hyphen replace",P),P=P.replace(o[l.COMPARATORTRIM],c),a("comparator trim",P),P=P.replace(o[l.TILDETRIM],d),a("tilde trim",P),P=P.replace(o[l.CARETTRIM],h),a("caret trim",P);let F=P.split(" ").map(de=>w(de,this.options)).join(" ").split(/\s+/).map(de=>L(de,this.options));Y&&(F=F.filter(de=>(a("loose invalid filter",de,this.options),!!de.match(o[l.COMPARATORLOOSE])))),a("range list",F);const V=new Map,ae=F.map(de=>new r(de,this.options));for(const de of ae){if(v(de))return[de];V.set(de.value,de)}V.size>1&&V.has("")&&V.delete("");const se=[...V.values()];return n.set(N,se),se}intersects(P,B){if(!(P instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>S(N,B)&&P.set.some(q=>S(q,B)&&N.every(Y=>q.every(ee=>Y.intersects(ee,B)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new s(P,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(H(this.set[B],P,this.options))return!0;return!1}}kA=e;const t=dOe,n=new t({max:1e3}),i=RO,r=ZOe(),a=MS,s=LO,{safeRe:o,t:l,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:h}=FO,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:y}=zO,v=U=>U.value==="<0.0.0-0",b=U=>U.value==="",S=(U,P)=>{let B=!0;const N=U.slice();let q=N.pop();for(;B&&N.length;)B=N.every(Y=>q.intersects(Y,P)),q=N.pop();return B},w=(U,P)=>(a("comp",U,P),U=C(U,P),a("caret",U),U=A(U,P),a("tildes",U),U=T(U,P),a("xrange",U),U=R(U,P),a("stars",U),U),_=U=>!U||U.toLowerCase()==="x"||U==="*",A=(U,P)=>U.trim().split(/\s+/).map(B=>$(B,P)).join(" "),$=(U,P)=>{const B=P.loose?o[l.TILDELOOSE]:o[l.TILDE];return U.replace(B,(N,q,Y,ee,F)=>{a("tilde",U,N,q,Y,ee,F);let V;return _(q)?V="":_(Y)?V=`>=${q}.0.0 <${+q+1}.0.0-0`:_(ee)?V=`>=${q}.${Y}.0 <${q}.${+Y+1}.0-0`:F?(a("replaceTilde pr",F),V=`>=${q}.${Y}.${ee}-${F} <${q}.${+Y+1}.0-0`):V=`>=${q}.${Y}.${ee} <${q}.${+Y+1}.0-0`,a("tilde return",V),V})},C=(U,P)=>U.trim().split(/\s+/).map(B=>D(B,P)).join(" "),D=(U,P)=>{a("caret",U,P);const B=P.loose?o[l.CARETLOOSE]:o[l.CARET],N=P.includePrerelease?"-0":"";return U.replace(B,(q,Y,ee,F,V)=>{a("caret",U,q,Y,ee,F,V);let ae;return _(Y)?ae="":_(ee)?ae=`>=${Y}.0.0${N} <${+Y+1}.0.0-0`:_(F)?Y==="0"?ae=`>=${Y}.${ee}.0${N} <${Y}.${+ee+1}.0-0`:ae=`>=${Y}.${ee}.0${N} <${+Y+1}.0.0-0`:V?(a("replaceCaret pr",V),Y==="0"?ee==="0"?ae=`>=${Y}.${ee}.${F}-${V} <${Y}.${ee}.${+F+1}-0`:ae=`>=${Y}.${ee}.${F}-${V} <${Y}.${+ee+1}.0-0`:ae=`>=${Y}.${ee}.${F}-${V} <${+Y+1}.0.0-0`):(a("no pr"),Y==="0"?ee==="0"?ae=`>=${Y}.${ee}.${F}${N} <${Y}.${ee}.${+F+1}-0`:ae=`>=${Y}.${ee}.${F}${N} <${Y}.${+ee+1}.0-0`:ae=`>=${Y}.${ee}.${F} <${+Y+1}.0.0-0`),a("caret return",ae),ae})},T=(U,P)=>(a("replaceXRanges",U,P),U.split(/\s+/).map(B=>O(B,P)).join(" ")),O=(U,P)=>{U=U.trim();const B=P.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return U.replace(B,(N,q,Y,ee,F,V)=>{a("xRange",U,N,q,Y,ee,F,V);const ae=_(Y),se=ae||_(ee),de=se||_(F),be=de;return q==="="&&be&&(q=""),V=P.includePrerelease?"-0":"",ae?q===">"||q==="<"?N="<0.0.0-0":N="*":q&&be?(se&&(ee=0),F=0,q===">"?(q=">=",se?(Y=+Y+1,ee=0,F=0):(ee=+ee+1,F=0)):q==="<="&&(q="<",se?Y=+Y+1:ee=+ee+1),q==="<"&&(V="-0"),N=`${q+Y}.${ee}.${F}${V}`):se?N=`>=${Y}.0.0${V} <${+Y+1}.0.0-0`:de&&(N=`>=${Y}.${ee}.0${V} <${Y}.${+ee+1}.0-0`),a("xRange return",N),N})},R=(U,P)=>(a("replaceStars",U,P),U.trim().replace(o[l.STAR],"")),L=(U,P)=>(a("replaceGTE0",U,P),U.trim().replace(o[P.includePrerelease?l.GTE0PRE:l.GTE0],"")),z=U=>(P,B,N,q,Y,ee,F,V,ae,se,de,be,Se)=>(_(N)?B="":_(q)?B=`>=${N}.0.0${U?"-0":""}`:_(Y)?B=`>=${N}.${q}.0${U?"-0":""}`:ee?B=`>=${B}`:B=`>=${B}${U?"-0":""}`,_(ae)?V="":_(se)?V=`<${+ae+1}.0.0-0`:_(de)?V=`<${ae}.${+se+1}.0-0`:be?V=`<=${ae}.${se}.${de}-${be}`:U?V=`<${ae}.${se}.${+de+1}-0`:V=`<=${V}`,`${B} ${V}`.trim()),H=(U,P,B)=>{for(let N=0;N<U.length;N++)if(!U[N].test(P))return!1;if(P.prerelease.length&&!B.includePrerelease){for(let N=0;N<U.length;N++)if(a(U[N].semver),U[N].semver!==r.ANY&&U[N].semver.prerelease.length>0){const q=U[N].semver;if(q.major===P.major&&q.minor===P.minor&&q.patch===P.patch)return!0}return!1}return!0};return kA}const KOe=aW(),JOe=(e,t,n)=>{try{t=new KOe(t,n)}catch{return!1}return t.test(e)};var eNe=JOe,sW=iOe(eNe);function tNe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(c){c.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var nNe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function oW(e,...t){for(const n of t)iNe(e,n);return e}function iNe(e,t){for(const n of Object.keys(t))mx(e,n,t[n],!0)}const Oa=ewe;let X0=lke;const $7=typeof window<"u"?window:void 0;X0===void 0&&$7?.vl?.compile&&(X0=$7.vl);const rNe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},aNe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Gp={vega:"Vega","vega-lite":"Vega-Lite"},hx={vega:Oa.version,"vega-lite":X0?X0.version:"not available"},sNe={vega:e=>e,"vega-lite":(e,t)=>X0.compile(e,{config:t}).spec},oNe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,uNe="chart-wrapper";function lNe(e){return typeof e=="function"}function C7(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Gp[i]} JSON Source`}function cNe(e,t){if(e.$schema){const n=JV(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Gp[n.library]}, but mode argument sets ${Gp[t]??t}.`);const i=n.library;return sW(hx[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Gp[i]} ${n.version}, but the current version of ${Gp[i]} is v${hx[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function uW(e){return!!(e&&"load"in e)}function M7(e){return uW(e)?e:Oa.loader(e)}function fNe(e){const t=e.usermeta?.embedOptions??{};return Js(t.defaultStyle)&&(t.defaultStyle=!1),t}async function dNe(e,t,n={}){let i,r;Js(t)?(r=M7(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=fNe(i),s=a.loader;(!r||s)&&(r=M7(n.loader??s));const o=await T7(a,r),l=await T7(n,r),c={...oW(l,o),config:sM(l.config??{},o.config??{})};return await gNe(e,i,c,r)}async function T7(e,t){const n=Js(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Js(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function hNe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function gNe(e,t,n={},i){const r=n.theme?sM(Vke[n.theme],n.config??{}):n.config,a=G7(n.actions)?n.actions:oW({},rNe,n.actions??{}),s={...aNe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Oa.Warn,c=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const C="vega-embed-style",{root:D,rootContainer:T}=hNe(d);if(!D.getElementById(C)){const O=document.createElement("style");O.id=C,O.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?nNe.toString():n.defaultStyle,T.appendChild(O)}}const h=cNe(t,n.mode);let p=sNe[h](t,r);if(h==="vega-lite"&&p.$schema){const C=JV(p.$schema);sW(hx.vega,`^${C.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${C.version}, but current version is v${hx.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const C=document.createElement("div");C.classList.add(uNe),d.appendChild(C),y=C}const v=n.patch;if(v&&(p=v instanceof Function?v(p):gx(p,v,!0,!1).newDocument),n.formatLocale&&Oa.formatLocale(n.formatLocale),n.timeFormatLocale&&Oa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const C in n.expressionFunctions){const D=n.expressionFunctions[C];"fn"in D?Oa.expressionFunction(C,D.fn,D.visitor):D instanceof Function&&Oa.expressionFunction(C,D)}const{ast:b}=n,S=Oa.parse(p,h==="vega-lite"?{}:r,{ast:b}),w=new(n.viewClass||Oa.View)(S,{loader:i,logLevel:l,renderer:o,...b?{expr:Oa.expressionInterpreter??n.expr??vwe}:{}});if(w.addSignalListener("autosize",(C,D)=>{const{type:T}=D;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:C,tooltip:D}=n,T=C&&!uW(C)?C?.baseURL:void 0,O=lNe(D)?D:new nOe({baseURL:T,...D===!0?{}:D}).call;w.tooltip(O)}let{hover:_}=n;if(_===void 0&&(_=h==="vega"),_){const{hoverSet:C,updateSet:D}=typeof _=="boolean"?{}:_;w.hover(C,D)}n&&(n.width!=null&&w.width(n.width),n.height!=null&&w.height(n.height),n.padding!=null&&w.padding(n.padding)),await w.initialize(y,n.bind).runAsync();let A;if(a!==!1){let C=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,d.append(T),C=T;const O=document.createElement("summary");O.innerHTML=oNe,T.append(O),A=R=>{T.contains(R.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const D=document.createElement("div");if(C.append(D),D.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const O=s[`${T.toUpperCase()}_ACTION`],R=document.createElement("a"),L=lc(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;R.text=O,R.href="#",R.target="_blank",R.download=`${c}.${T}`,R.addEventListener("mousedown",async function(z){z.preventDefault();const H=await w.toImageURL(T,L);this.href=H}),D.append(R)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(O){C7(Xw(t),n.sourceHeader??"",n.sourceFooter??"",h),O.preventDefault()}),D.append(T)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(O){C7(Xw(p),n.sourceHeader??"",n.sourceFooter??"","vega"),O.preventDefault()}),D.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",O=document.createElement("a");O.text=s.EDITOR_ACTION,O.href="#",O.addEventListener("click",function(R){tNe(window,T,{config:r,mode:h,renderer:o,spec:Xw(t)}),R.preventDefault()}),D.append(O)}}function $(){A&&document.removeEventListener("click",A),w.finalize()}return{view:w,spec:t,vgSpec:p,finalize:$,embedOptions:n}}var OA={exports:{}},D7;function pNe(){return D7||(D7=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,r=0;t.Diff=function(a,s){return[a,s]},t.prototype.diff_main=function(a,s,o,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var c=l;if(a==null||s==null)throw new Error("Null input. (diff_main)");if(a==s)return a?[new t.Diff(r,a)]:[];typeof o>"u"&&(o=!0);var d=o,h=this.diff_commonPrefix(a,s),p=a.substring(0,h);a=a.substring(h),s=s.substring(h),h=this.diff_commonSuffix(a,s);var y=a.substring(a.length-h);a=a.substring(0,a.length-h),s=s.substring(0,s.length-h);var v=this.diff_compute_(a,s,d,c);return p&&v.unshift(new t.Diff(r,p)),y&&v.push(new t.Diff(r,y)),this.diff_cleanupMerge(v),v},t.prototype.diff_compute_=function(a,s,o,l){var c;if(!a)return[new t.Diff(i,s)];if(!s)return[new t.Diff(n,a)];var d=a.length>s.length?a:s,h=a.length>s.length?s:a,p=d.indexOf(h);if(p!=-1)return c=[new t.Diff(i,d.substring(0,p)),new t.Diff(r,h),new t.Diff(i,d.substring(p+h.length))],a.length>s.length&&(c[0][0]=c[2][0]=n),c;if(h.length==1)return[new t.Diff(n,a),new t.Diff(i,s)];var y=this.diff_halfMatch_(a,s);if(y){var v=y[0],b=y[1],S=y[2],w=y[3],_=y[4],A=this.diff_main(v,S,o,l),$=this.diff_main(b,w,o,l);return A.concat([new t.Diff(r,_)],$)}return o&&a.length>100&&s.length>100?this.diff_lineMode_(a,s,l):this.diff_bisect_(a,s,l)},t.prototype.diff_lineMode_=function(a,s,o){var l=this.diff_linesToChars_(a,s);a=l.chars1,s=l.chars2;var c=l.lineArray,d=this.diff_main(a,s,!1,o);this.diff_charsToLines_(d,c),this.diff_cleanupSemantic(d),d.push(new t.Diff(r,""));for(var h=0,p=0,y=0,v="",b="";h<d.length;){switch(d[h][0]){case i:y++,b+=d[h][1];break;case n:p++,v+=d[h][1];break;case r:if(p>=1&&y>=1){d.splice(h-p-y,p+y),h=h-p-y;for(var S=this.diff_main(v,b,!1,o),w=S.length-1;w>=0;w--)d.splice(h,0,S[w]);h=h+S.length}y=0,p=0,v="",b="";break}h++}return d.pop(),d},t.prototype.diff_bisect_=function(a,s,o){for(var l=a.length,c=s.length,d=Math.ceil((l+c)/2),h=d,p=2*d,y=new Array(p),v=new Array(p),b=0;b<p;b++)y[b]=-1,v[b]=-1;y[h+1]=0,v[h+1]=0;for(var S=l-c,w=S%2!=0,_=0,A=0,$=0,C=0,D=0;D<d&&!(new Date().getTime()>o);D++){for(var T=-D+_;T<=D-A;T+=2){var O=h+T,R;T==-D||T!=D&&y[O-1]<y[O+1]?R=y[O+1]:R=y[O-1]+1;for(var L=R-T;R<l&&L<c&&a.charAt(R)==s.charAt(L);)R++,L++;if(y[O]=R,R>l)A+=2;else if(L>c)_+=2;else if(w){var z=h+S-T;if(z>=0&&z<p&&v[z]!=-1){var H=l-v[z];if(R>=H)return this.diff_bisectSplit_(a,s,R,L,o)}}}for(var U=-D+$;U<=D-C;U+=2){var z=h+U,H;U==-D||U!=D&&v[z-1]<v[z+1]?H=v[z+1]:H=v[z-1]+1;for(var P=H-U;H<l&&P<c&&a.charAt(l-H-1)==s.charAt(c-P-1);)H++,P++;if(v[z]=H,H>l)C+=2;else if(P>c)$+=2;else if(!w){var O=h+S-U;if(O>=0&&O<p&&y[O]!=-1){var R=y[O],L=h+R-O;if(H=l-H,R>=H)return this.diff_bisectSplit_(a,s,R,L,o)}}}}return[new t.Diff(n,a),new t.Diff(i,s)]},t.prototype.diff_bisectSplit_=function(a,s,o,l,c){var d=a.substring(0,o),h=s.substring(0,l),p=a.substring(o),y=s.substring(l),v=this.diff_main(d,h,!1,c),b=this.diff_main(p,y,!1,c);return v.concat(b)},t.prototype.diff_linesToChars_=function(a,s){var o=[],l={};o[0]="";function c(y){for(var v="",b=0,S=-1,w=o.length;S<y.length-1;){S=y.indexOf(`
`,b),S==-1&&(S=y.length-1);var _=y.substring(b,S+1);(l.hasOwnProperty?l.hasOwnProperty(_):l[_]!==void 0)?v+=String.fromCharCode(l[_]):(w==d&&(_=y.substring(b),S=y.length),v+=String.fromCharCode(w),l[_]=w,o[w++]=_),b=S+1}return v}var d=4e4,h=c(a);d=65535;var p=c(s);return{chars1:h,chars2:p,lineArray:o}},t.prototype.diff_charsToLines_=function(a,s){for(var o=0;o<a.length;o++){for(var l=a[o][1],c=[],d=0;d<l.length;d++)c[d]=s[l.charCodeAt(d)];a[o][1]=c.join("")}},t.prototype.diff_commonPrefix=function(a,s){if(!a||!s||a.charAt(0)!=s.charAt(0))return 0;for(var o=0,l=Math.min(a.length,s.length),c=l,d=0;o<c;)a.substring(d,c)==s.substring(d,c)?(o=c,d=o):l=c,c=Math.floor((l-o)/2+o);return c},t.prototype.diff_commonSuffix=function(a,s){if(!a||!s||a.charAt(a.length-1)!=s.charAt(s.length-1))return 0;for(var o=0,l=Math.min(a.length,s.length),c=l,d=0;o<c;)a.substring(a.length-c,a.length-d)==s.substring(s.length-c,s.length-d)?(o=c,d=o):l=c,c=Math.floor((l-o)/2+o);return c},t.prototype.diff_commonOverlap_=function(a,s){var o=a.length,l=s.length;if(o==0||l==0)return 0;o>l?a=a.substring(o-l):o<l&&(s=s.substring(0,o));var c=Math.min(o,l);if(a==s)return c;for(var d=0,h=1;;){var p=a.substring(c-h),y=s.indexOf(p);if(y==-1)return d;h+=y,(y==0||a.substring(c-h)==s.substring(0,h))&&(d=h,h++)}},t.prototype.diff_halfMatch_=function(a,s){if(this.Diff_Timeout<=0)return null;var o=a.length>s.length?a:s,l=a.length>s.length?s:a;if(o.length<4||l.length*2<o.length)return null;var c=this;function d(A,$,C){for(var D=A.substring(C,C+Math.floor(A.length/4)),T=-1,O="",R,L,z,H;(T=$.indexOf(D,T+1))!=-1;){var U=c.diff_commonPrefix(A.substring(C),$.substring(T)),P=c.diff_commonSuffix(A.substring(0,C),$.substring(0,T));O.length<P+U&&(O=$.substring(T-P,T)+$.substring(T,T+U),R=A.substring(0,C-P),L=A.substring(C+U),z=$.substring(0,T-P),H=$.substring(T+U))}return O.length*2>=A.length?[R,L,z,H,O]:null}var h=d(o,l,Math.ceil(o.length/4)),p=d(o,l,Math.ceil(o.length/2)),y;if(!h&&!p)return null;p?h?y=h[4].length>p[4].length?h:p:y=p:y=h;var v,b,S,w;a.length>s.length?(v=y[0],b=y[1],S=y[2],w=y[3]):(S=y[0],w=y[1],v=y[2],b=y[3]);var _=y[4];return[v,b,S,w,_]},t.prototype.diff_cleanupSemantic=function(a){for(var s=!1,o=[],l=0,c=null,d=0,h=0,p=0,y=0,v=0;d<a.length;)a[d][0]==r?(o[l++]=d,h=y,p=v,y=0,v=0,c=a[d][1]):(a[d][0]==i?y+=a[d][1].length:v+=a[d][1].length,c&&c.length<=Math.max(h,p)&&c.length<=Math.max(y,v)&&(a.splice(o[l-1],0,new t.Diff(n,c)),a[o[l-1]+1][0]=i,l--,l--,d=l>0?o[l-1]:-1,h=0,p=0,y=0,v=0,c=null,s=!0)),d++;for(s&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),d=1;d<a.length;){if(a[d-1][0]==n&&a[d][0]==i){var b=a[d-1][1],S=a[d][1],w=this.diff_commonOverlap_(b,S),_=this.diff_commonOverlap_(S,b);w>=_?(w>=b.length/2||w>=S.length/2)&&(a.splice(d,0,new t.Diff(r,S.substring(0,w))),a[d-1][1]=b.substring(0,b.length-w),a[d+1][1]=S.substring(w),d++):(_>=b.length/2||_>=S.length/2)&&(a.splice(d,0,new t.Diff(r,b.substring(0,_))),a[d-1][0]=i,a[d-1][1]=S.substring(0,S.length-_),a[d+1][0]=n,a[d+1][1]=b.substring(_),d++),d++}d++}},t.prototype.diff_cleanupSemanticLossless=function(a){function s(_,A){if(!_||!A)return 6;var $=_.charAt(_.length-1),C=A.charAt(0),D=$.match(t.nonAlphaNumericRegex_),T=C.match(t.nonAlphaNumericRegex_),O=D&&$.match(t.whitespaceRegex_),R=T&&C.match(t.whitespaceRegex_),L=O&&$.match(t.linebreakRegex_),z=R&&C.match(t.linebreakRegex_),H=L&&_.match(t.blanklineEndRegex_),U=z&&A.match(t.blanklineStartRegex_);return H||U?5:L||z?4:D&&!O&&R?3:O||R?2:D||T?1:0}for(var o=1;o<a.length-1;){if(a[o-1][0]==r&&a[o+1][0]==r){var l=a[o-1][1],c=a[o][1],d=a[o+1][1],h=this.diff_commonSuffix(l,c);if(h){var p=c.substring(c.length-h);l=l.substring(0,l.length-h),c=p+c.substring(0,c.length-h),d=p+d}for(var y=l,v=c,b=d,S=s(l,c)+s(c,d);c.charAt(0)===d.charAt(0);){l+=c.charAt(0),c=c.substring(1)+d.charAt(0),d=d.substring(1);var w=s(l,c)+s(c,d);w>=S&&(S=w,y=l,v=c,b=d)}a[o-1][1]!=y&&(y?a[o-1][1]=y:(a.splice(o-1,1),o--),a[o][1]=v,b?a[o+1][1]=b:(a.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(a){for(var s=!1,o=[],l=0,c=null,d=0,h=!1,p=!1,y=!1,v=!1;d<a.length;)a[d][0]==r?(a[d][1].length<this.Diff_EditCost&&(y||v)?(o[l++]=d,h=y,p=v,c=a[d][1]):(l=0,c=null),y=v=!1):(a[d][0]==n?v=!0:y=!0,c&&(h&&p&&y&&v||c.length<this.Diff_EditCost/2&&h+p+y+v==3)&&(a.splice(o[l-1],0,new t.Diff(n,c)),a[o[l-1]+1][0]=i,l--,c=null,h&&p?(y=v=!0,l=0):(l--,d=l>0?o[l-1]:-1,y=v=!1),s=!0)),d++;s&&this.diff_cleanupMerge(a)},t.prototype.diff_cleanupMerge=function(a){a.push(new t.Diff(r,""));for(var s=0,o=0,l=0,c="",d="",h;s<a.length;)switch(a[s][0]){case i:l++,d+=a[s][1],s++;break;case n:o++,c+=a[s][1],s++;break;case r:o+l>1?(o!==0&&l!==0&&(h=this.diff_commonPrefix(d,c),h!==0&&(s-o-l>0&&a[s-o-l-1][0]==r?a[s-o-l-1][1]+=d.substring(0,h):(a.splice(0,0,new t.Diff(r,d.substring(0,h))),s++),d=d.substring(h),c=c.substring(h)),h=this.diff_commonSuffix(d,c),h!==0&&(a[s][1]=d.substring(d.length-h)+a[s][1],d=d.substring(0,d.length-h),c=c.substring(0,c.length-h))),s-=o+l,a.splice(s,o+l),c.length&&(a.splice(s,0,new t.Diff(n,c)),s++),d.length&&(a.splice(s,0,new t.Diff(i,d)),s++),s++):s!==0&&a[s-1][0]==r?(a[s-1][1]+=a[s][1],a.splice(s,1)):s++,l=0,o=0,c="",d="";break}a[a.length-1][1]===""&&a.pop();var p=!1;for(s=1;s<a.length-1;)a[s-1][0]==r&&a[s+1][0]==r&&(a[s][1].substring(a[s][1].length-a[s-1][1].length)==a[s-1][1]?(a[s][1]=a[s-1][1]+a[s][1].substring(0,a[s][1].length-a[s-1][1].length),a[s+1][1]=a[s-1][1]+a[s+1][1],a.splice(s-1,1),p=!0):a[s][1].substring(0,a[s+1][1].length)==a[s+1][1]&&(a[s-1][1]+=a[s+1][1],a[s][1]=a[s][1].substring(a[s+1][1].length)+a[s+1][1],a.splice(s+1,1),p=!0)),s++;p&&this.diff_cleanupMerge(a)},t.prototype.diff_xIndex=function(a,s){var o=0,l=0,c=0,d=0,h;for(h=0;h<a.length&&(a[h][0]!==i&&(o+=a[h][1].length),a[h][0]!==n&&(l+=a[h][1].length),!(o>s));h++)c=o,d=l;return a.length!=h&&a[h][0]===n?d:d+(s-c)},t.prototype.diff_prettyHtml=function(a){for(var s=[],o=/&/g,l=/</g,c=/>/g,d=/\n/g,h=0;h<a.length;h++){var p=a[h][0],y=a[h][1],v=y.replace(o,"&amp;").replace(l,"&lt;").replace(c,"&gt;").replace(d,"&para;<br>");switch(p){case i:s[h]='<ins style="background:#e6ffe6;">'+v+"</ins>";break;case n:s[h]='<del style="background:#ffe6e6;">'+v+"</del>";break;case r:s[h]="<span>"+v+"</span>";break}}return s.join("")},t.prototype.diff_text1=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==i&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_text2=function(a){for(var s=[],o=0;o<a.length;o++)a[o][0]!==n&&(s[o]=a[o][1]);return s.join("")},t.prototype.diff_levenshtein=function(a){for(var s=0,o=0,l=0,c=0;c<a.length;c++){var d=a[c][0],h=a[c][1];switch(d){case i:o+=h.length;break;case n:l+=h.length;break;case r:s+=Math.max(o,l),o=0,l=0;break}}return s+=Math.max(o,l),s},t.prototype.diff_toDelta=function(a){for(var s=[],o=0;o<a.length;o++)switch(a[o][0]){case i:s[o]="+"+encodeURI(a[o][1]);break;case n:s[o]="-"+a[o][1].length;break;case r:s[o]="="+a[o][1].length;break}return s.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(a,s){for(var o=[],l=0,c=0,d=s.split(/\t/g),h=0;h<d.length;h++){var p=d[h].substring(1);switch(d[h].charAt(0)){case"+":try{o[l++]=new t.Diff(i,decodeURI(p))}catch{throw new Error("Illegal escape in diff_fromDelta: "+p)}break;case"-":case"=":var y=parseInt(p,10);if(isNaN(y)||y<0)throw new Error("Invalid number in diff_fromDelta: "+p);var v=a.substring(c,c+=y);d[h].charAt(0)=="="?o[l++]=new t.Diff(r,v):o[l++]=new t.Diff(n,v);break;default:if(d[h])throw new Error("Invalid diff operation in diff_fromDelta: "+d[h])}}if(c!=a.length)throw new Error("Delta length ("+c+") does not equal source text length ("+a.length+").");return o},t.prototype.match_main=function(a,s,o){if(a==null||s==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,a.length)),a==s?0:a.length?a.substring(o,o+s.length)==s?o:this.match_bitap_(a,s,o):-1},t.prototype.match_bitap_=function(a,s,o){if(s.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(s),c=this;function d(R,L){var z=R/s.length,H=Math.abs(o-L);return c.Match_Distance?z+H/c.Match_Distance:H?1:z}var h=this.Match_Threshold,p=a.indexOf(s,o);p!=-1&&(h=Math.min(d(0,p),h),p=a.lastIndexOf(s,o+s.length),p!=-1&&(h=Math.min(d(0,p),h)));var y=1<<s.length-1;p=-1;for(var v,b,S=s.length+a.length,w,_=0;_<s.length;_++){for(v=0,b=S;v<b;)d(_,o+b)<=h?v=b:S=b,b=Math.floor((S-v)/2+v);S=b;var A=Math.max(1,o-b+1),$=Math.min(o+b,a.length)+s.length,C=Array($+2);C[$+1]=(1<<_)-1;for(var D=$;D>=A;D--){var T=l[a.charAt(D-1)];if(_===0?C[D]=(C[D+1]<<1|1)&T:C[D]=(C[D+1]<<1|1)&T|((w[D+1]|w[D])<<1|1)|w[D+1],C[D]&y){var O=d(_,D-1);if(O<=h)if(h=O,p=D-1,p>o)A=Math.max(1,2*o-p);else break}}if(d(_+1,o)>h)break;w=C}return p},t.prototype.match_alphabet_=function(a){for(var s={},o=0;o<a.length;o++)s[a.charAt(o)]=0;for(var o=0;o<a.length;o++)s[a.charAt(o)]|=1<<a.length-o-1;return s},t.prototype.patch_addContext_=function(a,s){if(s.length!=0){if(a.start2===null)throw Error("patch not initialized");for(var o=s.substring(a.start2,a.start2+a.length1),l=0;s.indexOf(o)!=s.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,o=s.substring(a.start2-l,a.start2+a.length1+l);l+=this.Patch_Margin;var c=s.substring(a.start2-l,a.start2);c&&a.diffs.unshift(new t.Diff(r,c));var d=s.substring(a.start2+a.length1,a.start2+a.length1+l);d&&a.diffs.push(new t.Diff(r,d)),a.start1-=c.length,a.start2-=c.length,a.length1+=c.length+d.length,a.length2+=c.length+d.length}},t.prototype.patch_make=function(a,s,o){var l,c;if(typeof a=="string"&&typeof s=="string"&&typeof o>"u")l=a,c=this.diff_main(l,s,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(a&&typeof a=="object"&&typeof s>"u"&&typeof o>"u")c=a,l=this.diff_text1(c);else if(typeof a=="string"&&s&&typeof s=="object"&&typeof o>"u")l=a,c=s;else if(typeof a=="string"&&typeof s=="string"&&o&&typeof o=="object")l=a,c=o;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var d=[],h=new t.patch_obj,p=0,y=0,v=0,b=l,S=l,w=0;w<c.length;w++){var _=c[w][0],A=c[w][1];switch(!p&&_!==r&&(h.start1=y,h.start2=v),_){case i:h.diffs[p++]=c[w],h.length2+=A.length,S=S.substring(0,v)+A+S.substring(v);break;case n:h.length1+=A.length,h.diffs[p++]=c[w],S=S.substring(0,v)+S.substring(v+A.length);break;case r:A.length<=2*this.Patch_Margin&&p&&c.length!=w+1?(h.diffs[p++]=c[w],h.length1+=A.length,h.length2+=A.length):A.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(h,b),d.push(h),h=new t.patch_obj,p=0,b=S,y=v);break}_!==i&&(y+=A.length),_!==n&&(v+=A.length)}return p&&(this.patch_addContext_(h,b),d.push(h)),d},t.prototype.patch_deepCopy=function(a){for(var s=[],o=0;o<a.length;o++){var l=a[o],c=new t.patch_obj;c.diffs=[];for(var d=0;d<l.diffs.length;d++)c.diffs[d]=new t.Diff(l.diffs[d][0],l.diffs[d][1]);c.start1=l.start1,c.start2=l.start2,c.length1=l.length1,c.length2=l.length2,s[o]=c}return s},t.prototype.patch_apply=function(a,s){if(a.length==0)return[s,[]];a=this.patch_deepCopy(a);var o=this.patch_addPadding(a);s=o+s+o,this.patch_splitMax(a);for(var l=0,c=[],d=0;d<a.length;d++){var h=a[d].start2+l,p=this.diff_text1(a[d].diffs),y,v=-1;if(p.length>this.Match_MaxBits?(y=this.match_main(s,p.substring(0,this.Match_MaxBits),h),y!=-1&&(v=this.match_main(s,p.substring(p.length-this.Match_MaxBits),h+p.length-this.Match_MaxBits),(v==-1||y>=v)&&(y=-1))):y=this.match_main(s,p,h),y==-1)c[d]=!1,l-=a[d].length2-a[d].length1;else{c[d]=!0,l=y-h;var b;if(v==-1?b=s.substring(y,y+p.length):b=s.substring(y,v+this.Match_MaxBits),p==b)s=s.substring(0,y)+this.diff_text2(a[d].diffs)+s.substring(y+p.length);else{var S=this.diff_main(p,b,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(S)/p.length>this.Patch_DeleteThreshold)c[d]=!1;else{this.diff_cleanupSemanticLossless(S);for(var w=0,_,A=0;A<a[d].diffs.length;A++){var $=a[d].diffs[A];$[0]!==r&&(_=this.diff_xIndex(S,w)),$[0]===i?s=s.substring(0,y+_)+$[1]+s.substring(y+_):$[0]===n&&(s=s.substring(0,y+_)+s.substring(y+this.diff_xIndex(S,w+$[1].length))),$[0]!==n&&(w+=$[1].length)}}}}}return s=s.substring(o.length,s.length-o.length),[s,c]},t.prototype.patch_addPadding=function(a){for(var s=this.Patch_Margin,o="",l=1;l<=s;l++)o+=String.fromCharCode(l);for(var l=0;l<a.length;l++)a[l].start1+=s,a[l].start2+=s;var c=a[0],d=c.diffs;if(d.length==0||d[0][0]!=r)d.unshift(new t.Diff(r,o)),c.start1-=s,c.start2-=s,c.length1+=s,c.length2+=s;else if(s>d[0][1].length){var h=s-d[0][1].length;d[0][1]=o.substring(d[0][1].length)+d[0][1],c.start1-=h,c.start2-=h,c.length1+=h,c.length2+=h}if(c=a[a.length-1],d=c.diffs,d.length==0||d[d.length-1][0]!=r)d.push(new t.Diff(r,o)),c.length1+=s,c.length2+=s;else if(s>d[d.length-1][1].length){var h=s-d[d.length-1][1].length;d[d.length-1][1]+=o.substring(0,h),c.length1+=h,c.length2+=h}return o},t.prototype.patch_splitMax=function(a){for(var s=this.Match_MaxBits,o=0;o<a.length;o++)if(!(a[o].length1<=s)){var l=a[o];a.splice(o--,1);for(var c=l.start1,d=l.start2,h="";l.diffs.length!==0;){var p=new t.patch_obj,y=!0;for(p.start1=c-h.length,p.start2=d-h.length,h!==""&&(p.length1=p.length2=h.length,p.diffs.push(new t.Diff(r,h)));l.diffs.length!==0&&p.length1<s-this.Patch_Margin;){var v=l.diffs[0][0],b=l.diffs[0][1];v===i?(p.length2+=b.length,d+=b.length,p.diffs.push(l.diffs.shift()),y=!1):v===n&&p.diffs.length==1&&p.diffs[0][0]==r&&b.length>2*s?(p.length1+=b.length,c+=b.length,y=!1,p.diffs.push(new t.Diff(v,b)),l.diffs.shift()):(b=b.substring(0,s-p.length1-this.Patch_Margin),p.length1+=b.length,c+=b.length,v===r?(p.length2+=b.length,d+=b.length):y=!1,p.diffs.push(new t.Diff(v,b)),b==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(b.length))}h=this.diff_text2(p.diffs),h=h.substring(h.length-this.Patch_Margin);var S=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);S!==""&&(p.length1+=S.length,p.length2+=S.length,p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=S:p.diffs.push(new t.Diff(r,S))),y||a.splice(++o,0,p)}}},t.prototype.patch_toText=function(a){for(var s=[],o=0;o<a.length;o++)s[o]=a[o];return s.join("")},t.prototype.patch_fromText=function(a){var s=[];if(!a)return s;for(var o=a.split(`
`),l=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<o.length;){var d=o[l].match(c);if(!d)throw new Error("Invalid patch string: "+o[l]);var h=new t.patch_obj;for(s.push(h),h.start1=parseInt(d[1],10),d[2]===""?(h.start1--,h.length1=1):d[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(d[2],10)),h.start2=parseInt(d[3],10),d[4]===""?(h.start2--,h.length2=1):d[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(d[4],10)),l++;l<o.length;){var p=o[l].charAt(0);try{var y=decodeURI(o[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+y)}if(p=="-")h.diffs.push(new t.Diff(n,y));else if(p=="+")h.diffs.push(new t.Diff(i,y));else if(p==" ")h.diffs.push(new t.Diff(r,y));else{if(p=="@")break;if(p!=="")throw new Error('Invalid patch mode "'+p+'" in: '+y)}l++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var a,s;this.length1===0?a=this.start1+",0":this.length1==1?a=this.start1+1:a=this.start1+1+","+this.length1,this.length2===0?s=this.start2+",0":this.length2==1?s=this.start2+1:s=this.start2+1+","+this.length2;for(var o=["@@ -"+a+" +"+s+` @@
`],l,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case i:l="+";break;case n:l="-";break;case r:l=" ";break}o[c+1]=l+encodeURI(this.diffs[c][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r}(OA)),OA.exports}var mNe=pNe();const lW=JC(mNe),yNe="https://vega.github.io/schema/vega/v6.json",vNe="A node-link diagram with force-directed layout, depicting character co-occurrence in the novel Les Misrables.",bNe=700,xNe=500,SNe=0,ENe="none",wNe=[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{name:"nodeRadius",value:22,bind:{input:"range",min:1,max:50,step:1}},{name:"nodeCharge",value:-30,bind:{input:"range",min:-100,max:10,step:1}},{name:"linkDistance",value:100,bind:{input:"range",min:5,max:100,step:1}},{name:"static",value:!1,bind:{input:"checkbox"}},{name:"scoreThreshold",value:0,bind:{input:"range",min:0,max:30,step:1,name:"Score Threshold:"}},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"symbol:pointerout[!event.buttons], window:pointerup",update:"false"},{events:"symbol:pointerover",update:"fix || true"},{events:"[symbol:pointerdown, window:pointerup] > window:pointermove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"symbol:pointerover",update:"fix === true ? item() : node"}]},{name:"restart",value:0,on:[{events:{signal:"fix"},update:"restart + 1"},{events:{signal:"scoreThreshold"},update:"restart + 1"}]},{name:"clickedLink",value:null,on:[{events:"path:click",update:"item()"}]}],_Ne=[],ANe=[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"category10"}},{name:"linkColor",type:"linear",domain:[0,10,24,30],range:["red","red","green","green"]}],$Ne=[{name:"nodes",type:"symbol",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{signal:"datum.group === 0 ? '#808080' : scale('color', datum.group)"},stroke:{value:"white"}},update:{size:{signal:"2 * nodeRadius * nodeRadius"},cursor:{value:"pointer"},tooltip:{signal:"datum"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},static:{signal:"static"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide",radius:{signal:"nodeRadius"}},{force:"nbody",strength:{signal:"nodeCharge"}},{force:"link",links:"link-data",distance:{signal:"linkDistance"}}]}]},{type:"path",from:{data:"link-data"},interactive:!0,encode:{enter:{stroke:{value:"#ccc"},strokeWidth:{value:3}},update:{stroke:{scale:"linkColor",field:"value"},tooltip:{signal:"datum"}},hover:{stroke:{value:"darkgreen"}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]},{type:"text",from:{data:"nodes"},zindex:2,encode:{enter:{align:{value:"center"},baseline:{value:"middle"},fontSize:{value:12},fontWeight:{value:"bold"},fill:{value:"white"},text:{field:"datum.id"},x:{field:"x"},y:{field:"y"}},update:{x:{field:"x"},y:{field:"y"}}}}],CNe={$schema:yNe,description:vNe,width:bNe,height:xNe,padding:SNe,autosize:ENe,signals:wNe,data:_Ne,scales:ANe,marks:$Ne};function MNe(e,t){const n=new lW,i=["firstName","lastName","postcode","DoB"];let r=0;return i.forEach(a=>{const s=e[a]?e[a].toString():"",o=t[a]?t[a].toString():"",l=n.diff_main(s,o);r+=l.filter(c=>c[0]!==0).length}),30-r}function TNe({allRecords:e,clusters:t,onEdgeClick:n}){const i=Zn.useRef(null),r=Zn.useRef(null);return Zn.useEffect(()=>{if(!e||!i.current)return;const a=new Map;t.forEach((c,d)=>{c.forEach(h=>{a.set(h.id,d+1)})});const s=e.map(c=>({...c,group:a.get(c.id)||0})),o=[];for(let c=0;c<e.length;c++)for(let d=c+1;d<e.length;d++){const h=s[c].group,p=s[d].group;let y=!1;if((h===0||p===0||h===p)&&(y=!0),y){const v=MNe(e[c],e[d]);o.push({source:c,target:d,value:v})}}const l={...CNe,data:[{name:"node-data",values:s},{name:"links-raw",values:o},{name:"link-data",source:"links-raw",transform:[{type:"filter",expr:"datum.value >= scoreThreshold"}]}]};return dNe(i.current,l,{actions:!0}).then(c=>{r.current=c.view,n&&r.current.addSignalListener("clickedLink",(d,h)=>{n(h)}),document.querySelectorAll(".vg-tooltip").forEach(d=>d.parentNode.removeChild(d))}).catch(console.error),()=>{if(r.current&&n)try{r.current.removeSignalListener("clickedLink",n)}catch{}}},[e,t,n]),K.jsxs(K.Fragment,{children:[K.jsx("h2",{children:"Cluster Relationship Viewer"}),K.jsx("div",{ref:i})]})}function DNe({leftRecords:e,clusters:t,clusterUUIDs:n}){return K.jsxs("div",{className:"debug-output-container",children:[K.jsx("h2",{children:"Debug Output"}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"ID"}),K.jsx("th",{children:"Manual override"})]})}),K.jsxs("tbody",{children:[e.map(i=>K.jsxs("tr",{children:[K.jsx("td",{children:i.id}),K.jsx("td",{children:"N/A"})]},i.id)),t.map((i,r)=>i.map(a=>K.jsxs("tr",{className:a.isCause?"cause-record":"",children:[K.jsx("td",{children:a.id}),K.jsx("td",{children:n[r]})]},a.id)))]})]})]})}function kNe({comparisonSlots:e}){const[t,n]=Zn.useState(30),i=new lW,r=s=>{if(e[0]&&e[1]){const o=e[0][s],l=e[1][s],c=i.diff_main(o,l);return i.diff_cleanupSemantic(c),i.diff_prettyHtml(c).replace(/background:#ffe6e6/g,"background:#ffaaaa").replace(/background:#e6ffe6/g,"background:#aaffaa")}return""},a=()=>{let s=0;["firstName","lastName","postcode","DoB"].forEach(l=>{const c=e[0][l]?.toString()||"",d=e[1][l]?.toString()||"",h=i.diff_main(c,d);s+=h.filter(p=>p[0]!==0).length}),n(30-s)};return Zn.useEffect(()=>{e[0]&&e[1]?a():n(30)},[e]),K.jsxs("div",{className:"comparison-table-container",children:[K.jsx("h2",{children:"Detailed comparison"}),e[0]&&e[1]&&K.jsxs("p",{children:["Match Weight: ",t]}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Slot"}),K.jsx("th",{children:"ID"}),K.jsx("th",{children:"First Name"}),K.jsx("th",{children:"Last Name"}),K.jsx("th",{children:"Postcode"}),K.jsx("th",{children:"DoB"})]})}),K.jsxs("tbody",{children:[K.jsxs("tr",{children:[K.jsx("td",{children:"1"}),e[0]?K.jsxs(K.Fragment,{children:[K.jsx("td",{children:e[0].id}),K.jsx("td",{children:e[0].firstName}),K.jsx("td",{children:e[0].lastName}),K.jsx("td",{children:e[0].postcode}),K.jsx("td",{children:e[0].DoB})]}):K.jsx("td",{colSpan:"5",children:"Empty"})]}),K.jsxs("tr",{children:[K.jsx("td",{children:"2"}),e[1]?K.jsxs(K.Fragment,{children:[K.jsx("td",{children:e[1].id}),K.jsx("td",{children:e[1].firstName}),K.jsx("td",{children:e[1].lastName}),K.jsx("td",{children:e[1].postcode}),K.jsx("td",{children:e[1].DoB})]}):K.jsx("td",{colSpan:"5",children:"Empty"})]}),e[0]&&e[1]&&K.jsxs("tr",{children:[K.jsx("td",{children:"Diff"}),K.jsx("td",{}),K.jsx("td",{dangerouslySetInnerHTML:{__html:r("firstName")}}),K.jsx("td",{dangerouslySetInnerHTML:{__html:r("lastName")}}),K.jsx("td",{dangerouslySetInnerHTML:{__html:r("postcode")}}),K.jsx("td",{dangerouslySetInnerHTML:{__html:r("DoB")}})]})]})]})]})}function ONe({records:e,selectedIds:t,expandedHistoryIds:n,showTimestampColumn:i,comparisonSlots:r,onToggleSelection:a,onToggleHistory:s,onSetComparisonSlot:o}){return K.jsxs("div",{className:"left-column",children:[K.jsx("h2",{children:"Unresolved Records"}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{}),K.jsx("th",{}),K.jsx("th",{}),K.jsx("th",{children:"ID"}),K.jsx("th",{children:"First Name"}),K.jsx("th",{children:"Last Name"}),i&&K.jsx("th",{children:"Timestamp"}),K.jsxs("th",{children:["Select for",K.jsx("br",{}),"compare"]})]})}),K.jsx("tbody",{children:e.map(l=>K.jsxs(OZ.Fragment,{children:[K.jsxs("tr",{className:l.isCause?"cause-record":"",children:[K.jsx("td",{children:K.jsx("input",{type:"checkbox",checked:t.has(l.id),onChange:()=>a(l.id)})}),K.jsx("td",{children:l.isCause&&""}),K.jsx("td",{children:l.history&&l.history.length>0&&K.jsx("button",{onClick:()=>s(l.id),children:""})}),K.jsx("td",{children:l.id}),K.jsx("td",{children:l.firstName}),K.jsx("td",{children:l.lastName}),i&&K.jsx("td",{}),K.jsxs("td",{children:[K.jsx("button",{onClick:()=>o(l,0),className:r[0]?.id===l.id?"selected":"",children:"1"}),K.jsx("button",{onClick:()=>o(l,1),className:r[1]?.id===l.id?"selected":"",children:"2"})]})]}),n.has(l.id)&&l.history?.map((c,d)=>K.jsxs("tr",{className:"history-row",children:[K.jsx("td",{}),K.jsx("td",{}),K.jsx("td",{}),K.jsx("td",{}),K.jsx("td",{children:c.firstName}),K.jsx("td",{children:c.lastName}),K.jsx("td",{className:"history-timestamp",children:new Date(c.timestamp).toLocaleString()}),K.jsx("td",{})]},`${l.id}-hist-${d}`))]},l.id))})]})]})}function NNe({cluster:e,clusterIndex:t,selectedClusterIds:n,comparisonSlots:i,selectedIds:r,onToggleClusterSelection:a,onSetComparisonSlot:s,onAddToCluster:o}){return K.jsxs("div",{className:"cluster-card",children:[K.jsxs("h3",{children:["Cluster #",t+1]}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{}),K.jsx("th",{}),K.jsx("th",{children:"ID"}),K.jsx("th",{children:"First Name"}),K.jsx("th",{children:"Last Name"}),K.jsxs("th",{children:["Select for",K.jsx("br",{}),"compare"]})]})}),K.jsx("tbody",{children:e.map(l=>K.jsxs("tr",{className:l.isCause?"cause-record":"",children:[K.jsx("td",{children:l.isCause&&""}),K.jsx("td",{children:K.jsx("input",{type:"checkbox",checked:n.has(l.id),onChange:()=>a(l.id)})}),K.jsx("td",{children:l.id}),K.jsx("td",{children:l.firstName}),K.jsx("td",{children:l.lastName}),K.jsxs("td",{children:[K.jsx("button",{onClick:()=>s(l,0),className:i[0]?.id===l.id?"selected":"",children:"1"}),K.jsx("button",{onClick:()=>s(l,1),className:i[1]?.id===l.id?"selected":"",children:"2"})]})]},l.id))})]}),K.jsx("button",{disabled:!r.size,onClick:()=>o(t),children:"Add selected to this cluster "})]})}function RNe({clusters:e,onAddCluster:t,selectedClusterIds:n,comparisonSlots:i,selectedIds:r,onToggleClusterSelection:a,onSetComparisonSlot:s,onAddToCluster:o}){return K.jsxs("div",{className:"right-column",children:[K.jsx("h2",{children:"Clusters"}),e.map((l,c)=>K.jsx(NNe,{cluster:l,clusterIndex:c,selectedClusterIds:n,comparisonSlots:i,selectedIds:r,onToggleClusterSelection:a,onSetComparisonSlot:s,onAddToCluster:o},c)),K.jsx("button",{onClick:t,className:"add-new-cluster-button",children:"Add New Cluster"})]})}function zNe(){const[e,t]=Zn.useState(jZ),[n,i]=Zn.useState([[]]),[r,a]=Zn.useState(new Set),[s,o]=Zn.useState(new Set),[l,c]=Zn.useState(new Set),[d,h]=Zn.useState(!1),[p,y]=Zn.useState([null,null]),[v,b]=Zn.useState({});Zn.useEffect(()=>{h(l.size>0)},[l]);const S=[...e,...n.flat()].sort((L,z)=>L.id-z.id),w=L=>{if(L&&L.datum){const{source:z,target:H}=L.datum;y([z.datum,H.datum])}},_=L=>{const z=new Set(s);z.has(L)?z.delete(L):z.add(L),o(z)},A=()=>Math.random().toString(36).substring(2,8),$=L=>{const z=e.filter(P=>r.has(P.id)),H=n.map((P,B)=>B===L?[...P,...z]:P),U={...v};U[L]||(U[L]=A()),b(U),i(H),t(e.filter(P=>!r.has(P.id))),a(new Set)},C=()=>{const L=[],z=n.map(H=>H.filter(P=>s.has(P.id)?(L.push(P),!1):!0)).filter(H=>H.length>0);t(H=>[...H,...L].sort((P,B)=>P.id-B.id)),i(z),o(new Set)},D=()=>{const L=e.filter(B=>r.has(B.id)),z=[...L],H=[...n,z],U={...v},P=n.length;L.length>0&&(U[P]=A()),b(U),i(H),L.length>0&&(t(e.filter(B=>!r.has(B.id))),a(new Set))},T=L=>{const z=new Set(l);z.has(L)?z.delete(L):z.add(L),c(z)},O=(L,z)=>{const H=[...p];H[z]&&H[z].id===L.id?H[z]=null:H[z]=L,y(H)},R=L=>{const z=new Set(r);z.has(L)?z.delete(L):z.add(L),a(z)};return K.jsxs("div",{className:"app-container-wrapper",children:[K.jsxs("div",{class:"panel",children:[K.jsx("h2",{children:"README"}),K.jsx("p",{children:"This is a protype app for how a user may manually resolve clusters."}),K.jsx("p",{children:"In some scenarios, the interface may start with all records in 'unresolved'"}),K.jsx("p",{children:"In other scenarios, such as an existing cluster splitting, or when we already have override markers, the starting state may have some records alraedy in clusters."}),K.jsx("p",{children:"The highlighted record is the one that has changed"})]}),K.jsxs("div",{className:"app-container",children:[K.jsx(ONe,{records:e,selectedIds:r,expandedHistoryIds:l,showTimestampColumn:d,comparisonSlots:p,onToggleSelection:R,onToggleHistory:T,onSetComparisonSlot:O}),K.jsx("div",{className:"controls",children:K.jsx("button",{disabled:!s.size,onClick:C,children:""})}),K.jsx(RNe,{clusters:n,onAddCluster:D,selectedClusterIds:s,comparisonSlots:p,selectedIds:r,onToggleClusterSelection:_,onSetComparisonSlot:O,onAddToCluster:$}),K.jsx(kNe,{comparisonSlots:p}),K.jsx("button",{className:"done-button",onClick:()=>console.log("Clusters",n),children:"Done"}),K.jsx(DNe,{leftRecords:e,clusters:n,clusterUUIDs:v}),K.jsx("div",{className:"cluster-viewer-container",children:K.jsx(TNe,{allRecords:S,clusters:n,onEdgeClick:w})})]})]})}BZ.createRoot(document.getElementById("root")).render(K.jsx(Zn.StrictMode,{children:K.jsx(zNe,{})}));</script>
    <style rel="stylesheet" crossorigin>.app-container-wrapper{display:flex;flex-direction:column;gap:1rem;padding:1rem;font-family:monospace}.panel{border:1px solid #ccc;padding:1rem}.app-container{display:grid;grid-template-columns:1fr auto 1fr;gap:1rem}.left-column,.right-column{border:1px solid #ccc;padding:1rem}.cluster-card{border:1px solid purple;padding:1rem;margin-bottom:1rem}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}.history-row td{background-color:#f0f0f0}.history-timestamp{font-size:.8em;color:#666}.cause-record{background-color:#fffacd}.done-button{position:fixed;top:1rem;right:1rem}.comparison-table-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem}.comparison-table-container p{font-size:1.2em;font-weight:700;margin-bottom:.5rem}button.selected{background-color:#a8d8a8}.debug-output-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #e0e0e0;padding:1rem;color:#888;background-color:#f8f8f8}.debug-output-container table,.debug-output-container th,.debug-output-container td{border:1px solid #e0e0e0}.cluster-viewer-container{grid-column:1 / -1;margin-top:1rem;border:1px solid #ccc;padding:1rem;background-color:#fff}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
